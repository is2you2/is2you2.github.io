{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/home/home.ts","../../src/providers/ws-client.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/GlobalValues.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 108;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 108\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 149;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 149\n// module chunks = 0","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport { WsClient } from '../../providers/ws-client';\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  constructor(public navCtrl: NavController,\n    private ws: WsClient\n  ) {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Injectable } from '@angular/core';\nimport { AlertController } from 'ionic-angular';\nimport { GlobalValues } from './GlobalValues';\n\nexport interface PacketForm {\n  /** 자료 종류 */\n  type?: string;\n  /** 내용물 */\n  content?: any;\n  /** 내용물의 아이디(이미지용) */\n  content_id?: string;\n  /** 자료 처리 시간 */\n  date?: number;\n  /** 부분 자료 처리용 */\n  part?: string;\n}\n\n@Injectable()\nexport class WsClient {\n\n  private ws: WebSocket;\n  private PORT: number = 12000;\n\n  constructor(private alertCont: AlertController,\n  ) {\n    Notification.requestPermission().then(v => {\n      if (v == 'granted')\n        navigator.serviceWorker.ready.then(v => {\n          v.showNotification('data.title', {\n            body: 'typeof data.text ==  ? data.text : data.text[0]',\n          });\n        });\n    });\n  }\n\n  private last_connected: string = 'localhost';\n  connect_to(address: string) {\n    this.ws = new WebSocket('wss://' + address + ':' + this.PORT);\n    this.ws.onopen = (ev: any) => {\n      console.log('서버에 접속됨');\n    }\n    this.ws.onerror = (e: any) => {\n      console.error('웹 소켓 오류: ', +e);\n    }\n    this.ws.onmessage = (ev: any) => {\n      let data: Blob = ev.data;\n      let reader: FileReader = new FileReader();\n      reader.readAsText(data);\n      reader.onload = () => {\n        const VALUES: string = reader.result as string;\n        const obj: PacketForm = JSON.parse(VALUES);\n        switch (obj.type) {\n          case 'proc': // 받아온 내용은 절차입니다\n            GlobalValues.proc = obj.content;\n            break;\n          case 'img': // 받아온 내용은 이미지입니다\n            GlobalValues.imgs[obj['content_id']] = obj.content;\n            break;\n          case 'icon':\n            // this.notification_opt['icon'] = obj['content']\n            break;\n          case 'push': // 알림을 받았습니다\n            // if (obj['content'])\n            //   this.worker.showNotification(obj['content'], this.notification_opt);\n            break;\n          case 'succ': // *관리자의 변경사항이 적용됨\n            break;\n          case 'part': // 대용량 분할 전송\n            let pkt: PacketForm = {\n              type: this.part_number < this._HOW_MANY_SEP ? 'part' : 'EOF',\n              part: this.part_transfer[this.part_number]\n            }\n            this.ws.send(JSON.stringify(pkt));\n            this.part_number++;\n            break;\n          default:\n            console.warn('정의되지 않은 수신 타입: ', obj.type);\n            break;\n        }\n      };\n    }\n    this.ws.onclose = (ev: any) => {\n      console.warn('서버 끊김: ', ev, '\\n/ 재접속 시도..');\n      this.connect_to(this.last_connected);\n    }\n  }\n\n  private part_number: number = 0;\n  private part_transfer: string[] = [];\n  private TRANSFER_LIMIT: number = 65535 - 200;\n  private _HOW_MANY_SEP: number = 0;\n  send(msg: string) {\n    if (this.ws != null && this.ws.OPEN) {\n      if (msg.length > this.TRANSFER_LIMIT) {\n        this.part_number = 0;\n        this.part_transfer = [];\n        this._HOW_MANY_SEP = Math.floor(msg.length / this.TRANSFER_LIMIT);\n        for (let i = 0; i <= this._HOW_MANY_SEP; i++) {\n          const IS_LIMIT_SAFE: boolean = ((i + 1) * this.TRANSFER_LIMIT) < msg.length;\n          this.part_transfer.push(msg.substring(i * this.TRANSFER_LIMIT, IS_LIMIT_SAFE ? (i + 1) * this.TRANSFER_LIMIT : msg.length));\n        }\n        let pkt: PacketForm = {\n          type: 'part',\n          part: this.part_transfer[this.part_number],\n        }\n        this.ws.send(JSON.stringify(pkt));\n        this.part_number++;\n      } else\n        this.ws.send(msg);\n    } else {\n      console.error('웹소켓이 연결되지 않음_ send failed');\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/ws-client.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport { WsClient } from '../providers/ws-client';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage\n  ],\n  providers: [\n    StatusBar,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    WsClient,\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","export class GlobalValues {\n    /** 절차ID-절차내용 이 구분되어 저장됨 */\n    public static proc: { [id: string]: string } = {};\n    /** imgID-base64 상태로 저장함 */\n    public static imgs: { [id: string]: string } = {};\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/GlobalValues.ts"],"sourceRoot":""}