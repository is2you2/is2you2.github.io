"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7681],{7681:(y,u,o)=>{o.r(u),o.d(u,{RegisterPageModule:()=>P});var f=o(9808),m=o(4182),c=o(5649),d=o(501),g=o(9606),i=o(2096),h=o(7860);let p=(()=>{class t{constructor(e){this.device=e}initialize(e){this.client=new WebSocket(`ws://${g.GA}:12001`),this.client.onopen=n=>{console.log("\uc5f0\uacb0\ub428: ",n),e()},this.client.onclose=n=>{console.log("\uc5f0\uacb0 \ub04a\uae40: ",n)},this.client.onerror=n=>{console.error("\uc624\ub958 \ubc1c\uc0dd: ",n)},this.client.onmessage=n=>{n.data.text().then(a=>{let l=JSON.parse(a);"get_uuid"===(console.log("\ub370\uc774\ud130 \ubc1b\uc74c: ",l),l.act)&&(this.uuid=l.uuid)})}}register(e){this.client.send(JSON.stringify({act:"register",email:e,uuid:this.device.uuid}))}login(e){this.client.send(JSON.stringify({act:"login",email:e,uuid:this.device.uuid}))}change_userInfo(e){let s=Object.assign({act:"profile"},e);this.client.send(JSON.stringify(s))}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(h.A))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const v=[{path:"",component:(()=>{class t{constructor(e,s,n,a,l){this.get=e,this.nav=s,this.device=n,this.account=a,this.alert=l,this.userInfo={email:"",nickname:""}}ngOnInit(){this.CertificateEmail()}CertificateEmail(){let e=this.get.CatchGETs();if("list"in e&&"token"in e){let s=new WebSocket(`ws://${g.GA}:12010`);s.onopen=n=>{s.send(JSON.stringify({act:"register",token:e.token[0],list:e.list[0]}))},s.onclose=n=>{4e3==n.code?this.userInfo.email=n.reason.substring(0,n.reason.length-1):this.alert.create({header:"\uc815\ubcf4 \uc5c6\uc74c",backdropDismiss:!1,message:"\uc77c\uce58\ud558\ub294 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4",buttons:[{handler:()=>{this.nav.navigateRoot("")},text:"\ud655\uc778"}]}).then(a=>{a.present()})}}else this.nav.navigateRoot("")}RegisterClick(){this.account.initialize(()=>{this.account.change_userInfo({nickname:this.userInfo.nickname})}),"DesktopPWA"!=g.n$||console.log("\ud578\ub4dc\ud3f0\uc5d0\uc11c \uae30\uae30 \ub4f1\ub85d\uc774 \uc6b0\uc120\ub428 \uc54c\ub9bc"),console.log("\ud68c\uc6d0\uac00\uc785 \uc644\ub8cc \ubc84\ud2bc \ub20c\ub9bc")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(g.y$),i.Y36(c.SH),i.Y36(h.A),i.Y36(p),i.Y36(c.Br))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-register"]],decls:5,vars:0,template:function(e,s){1&e&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"register"),i.qZA()()(),i._UZ(4,"ion-content"))},directives:[c.Gu,c.sr,c.wd,c.W2],styles:[""]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[d.Bz.forChild(v)],d.Bz]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[f.ez,m.u5,c.Pc,R]]}),t})()}}]);