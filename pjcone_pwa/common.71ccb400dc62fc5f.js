"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{7160:(k,T,c)=>{c.d(T,{c:()=>e});var C=c(2361),o=c(7683),w=c(3139);const e=(t,l)=>{let s,r;const _=(p,h,g)=>{if("undefined"==typeof document)return;const m=document.elementFromPoint(p,h);m&&l(m)?m!==s&&(d(),u(m,g)):d()},u=(p,h)=>{s=p,r||(r=s);const g=s;(0,C.c)(()=>g.classList.add("ion-activated")),h()},d=(p=!1)=>{if(!s)return;const h=s;(0,C.c)(()=>h.classList.remove("ion-activated")),p&&r!==s&&s.click(),s=void 0};return(0,w.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:p=>_(p.currentX,p.currentY,o.a),onMove:p=>_(p.currentX,p.currentY,o.b),onEnd:()=>{d(!0),(0,o.h)(),r=void 0}})}},8685:(k,T,c)=>{c.d(T,{g:()=>C});const C=(l,s,r,_,u)=>w(l[1],s[1],r[1],_[1],u).map(d=>o(l[0],s[0],r[0],_[0],d)),o=(l,s,r,_,u)=>u*(3*s*Math.pow(u-1,2)+u*(-3*r*u+3*r+_*u))-l*Math.pow(u-1,3),w=(l,s,r,_,u)=>t((_-=u)-3*(r-=u)+3*(s-=u)-(l-=u),3*r-6*s+3*l,3*s-3*l,l).filter(p=>p>=0&&p<=1),t=(l,s,r,_)=>{if(0===l)return((l,s,r)=>{const _=s*s-4*l*r;return _<0?[]:[(-s+Math.sqrt(_))/(2*l),(-s-Math.sqrt(_))/(2*l)]})(s,r,_);const u=(3*(r/=l)-(s/=l)*s)/3,d=(2*s*s*s-9*s*r+27*(_/=l))/27;if(0===u)return[Math.pow(-d,1/3)];if(0===d)return[Math.sqrt(-u),-Math.sqrt(-u)];const p=Math.pow(d/2,2)+Math.pow(u/3,3);if(0===p)return[Math.pow(d/2,.5)-s/3];if(p>0)return[Math.pow(-d/2+Math.sqrt(p),1/3)-Math.pow(d/2+Math.sqrt(p),1/3)-s/3];const h=Math.sqrt(Math.pow(-u/3,3)),g=Math.acos(-d/(2*Math.sqrt(Math.pow(-u/3,3)))),m=2*Math.pow(h,1/3);return[m*Math.cos(g/3)-s/3,m*Math.cos((g+2*Math.PI)/3)-s/3,m*Math.cos((g+4*Math.PI)/3)-s/3]}},5062:(k,T,c)=>{c.d(T,{i:()=>C});const C=o=>o&&""!==o.dir?"rtl"===o.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},1112:(k,T,c)=>{c.r(T),c.d(T,{startFocusVisible:()=>e});const C="ion-focused",w=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],e=t=>{let l=[],s=!0;const r=t?t.shadowRoot:document,_=t||document.body,u=E=>{l.forEach(M=>M.classList.remove(C)),E.forEach(M=>M.classList.add(C)),l=E},d=()=>{s=!1,u([])},p=E=>{s=w.includes(E.key),s||u([])},h=E=>{if(s&&E.composedPath){const M=E.composedPath().filter(f=>!!f.classList&&f.classList.contains("ion-focusable"));u(M)}},g=()=>{r.activeElement===_&&u([])};return r.addEventListener("keydown",p),r.addEventListener("focusin",h),r.addEventListener("focusout",g),r.addEventListener("touchstart",d),r.addEventListener("mousedown",d),{destroy:()=>{r.removeEventListener("keydown",p),r.removeEventListener("focusin",h),r.removeEventListener("focusout",g),r.removeEventListener("touchstart",d),r.removeEventListener("mousedown",d)},setFocus:u}}},4118:(k,T,c)=>{c.d(T,{C:()=>t,a:()=>w,d:()=>e});var C=c(5861),o=c(1643);const w=function(){var l=(0,C.Z)(function*(s,r,_,u,d,p){var h;if(s)return s.attachViewToDom(r,_,d,u);if(!(p||"string"==typeof _||_ instanceof HTMLElement))throw new Error("framework delegate is missing");const g="string"==typeof _?null===(h=r.ownerDocument)||void 0===h?void 0:h.createElement(_):_;return u&&u.forEach(m=>g.classList.add(m)),d&&Object.assign(g,d),r.appendChild(g),yield new Promise(m=>(0,o.c)(g,m)),g});return function(r,_,u,d,p,h){return l.apply(this,arguments)}}(),e=(l,s)=>{if(s){if(l)return l.removeViewFromDom(s.parentElement,s);s.remove()}return Promise.resolve()},t=()=>{let l,s;return{attachViewToDom:function(){var u=(0,C.Z)(function*(d,p,h={},g=[]){var m,E;if(l=d,p){const f="string"==typeof p?null===(m=l.ownerDocument)||void 0===m?void 0:m.createElement(p):p;g.forEach(i=>f.classList.add(i)),Object.assign(f,h),l.appendChild(f),yield new Promise(i=>(0,o.c)(f,i))}else if(l.children.length>0){const f=null===(E=l.ownerDocument)||void 0===E?void 0:E.createElement("div");g.forEach(i=>f.classList.add(i)),f.append(...l.children),l.appendChild(f)}const M=document.querySelector("ion-app")||document.body;return s=document.createComment("ionic teleport"),l.parentNode.insertBefore(s,l),M.appendChild(l),l});return function(p,h){return u.apply(this,arguments)}}(),removeViewFromDom:()=>(l&&s&&(s.parentNode.insertBefore(l,s),s.remove()),Promise.resolve())}}},7683:(k,T,c)=>{c.d(T,{a:()=>w,b:()=>e,c:()=>o,d:()=>l,h:()=>t});const C={getEngine(){var s;const r=window;return r.TapticEngine||(null===(s=r.Capacitor)||void 0===s?void 0:s.isPluginAvailable("Haptics"))&&r.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(s){const r=this.getEngine();if(!r)return;const _=this.isCapacitor()?s.style.toUpperCase():s.style;r.impact({style:_})},notification(s){const r=this.getEngine();if(!r)return;const _=this.isCapacitor()?s.style.toUpperCase():s.style;r.notification({style:_})},selection(){this.impact({style:"light"})},selectionStart(){const s=this.getEngine();!s||(this.isCapacitor()?s.selectionStart():s.gestureSelectionStart())},selectionChanged(){const s=this.getEngine();!s||(this.isCapacitor()?s.selectionChanged():s.gestureSelectionChanged())},selectionEnd(){const s=this.getEngine();!s||(this.isCapacitor()?s.selectionEnd():s.gestureSelectionEnd())}},o=()=>{C.selection()},w=()=>{C.selectionStart()},e=()=>{C.selectionChanged()},t=()=>{C.selectionEnd()},l=s=>{C.impact(s)}},1473:(k,T,c)=>{c.d(T,{a:()=>u,b:()=>h,f:()=>d,g:()=>_,p:()=>g,s:()=>p});var C=c(5861),o=c(1643),w=c(7208);const t="ion-content",l=".ion-content-scroll-host",s=`${t}, ${l}`,r=m=>m&&"ION-CONTENT"===m.tagName,_=function(){var m=(0,C.Z)(function*(E){return r(E)?(yield new Promise(M=>(0,o.c)(E,M)),E.getScrollElement()):E});return function(M){return m.apply(this,arguments)}}(),u=m=>m.querySelector(l)||m.querySelector(s),d=m=>m.closest(s),p=(m,E)=>r(m)?m.scrollToTop(E):Promise.resolve(m.scrollTo({top:0,left:0,behavior:E>0?"smooth":"auto"})),h=(m,E,M,f)=>r(m)?m.scrollByPoint(E,M,f):Promise.resolve(m.scrollBy({top:M,left:E,behavior:f>0?"smooth":"auto"})),g=m=>(0,w.a)(m,t)},7208:(k,T,c)=>{c.d(T,{a:()=>w,b:()=>o,p:()=>C});const C=e=>console.warn(`[Ionic Warning]: ${e}`),o=(e,...t)=>console.error(`[Ionic Error]: ${e}`,...t),w=(e,...t)=>console.error(`<${e.tagName.toLowerCase()}> must be used inside ${t.join(" or ")}.`)},8439:(k,T,c)=>{c.d(T,{s:()=>C});const C=r=>{try{if(r instanceof class s{constructor(_){this.value=_}})return r.value;if(!e()||"string"!=typeof r||""===r)return r;const _=document.createDocumentFragment(),u=document.createElement("div");_.appendChild(u),u.innerHTML=r,l.forEach(g=>{const m=_.querySelectorAll(g);for(let E=m.length-1;E>=0;E--){const M=m[E];M.parentNode?M.parentNode.removeChild(M):_.removeChild(M);const f=w(M);for(let i=0;i<f.length;i++)o(f[i])}});const d=w(_);for(let g=0;g<d.length;g++)o(d[g]);const p=document.createElement("div");p.appendChild(_);const h=p.querySelector("div");return null!==h?h.innerHTML:p.innerHTML}catch(_){return console.error(_),""}},o=r=>{if(r.nodeType&&1!==r.nodeType)return;for(let u=r.attributes.length-1;u>=0;u--){const d=r.attributes.item(u),p=d.name;if(!t.includes(p.toLowerCase())){r.removeAttribute(p);continue}const h=d.value;null!=h&&h.toLowerCase().includes("javascript:")&&r.removeAttribute(p)}const _=w(r);for(let u=0;u<_.length;u++)o(_[u])},w=r=>null!=r.children?r.children:r.childNodes,e=()=>{var r;const _=window,u=null===(r=null==_?void 0:_.Ionic)||void 0===r?void 0:r.config;return!u||(u.get?u.get("sanitizerEnabled",!0):!0===u.sanitizerEnabled||void 0===u.sanitizerEnabled)},t=["class","id","href","src","name","slot"],l=["script","style","iframe","meta","link","object","embed"]},8117:(k,T,c)=>{c.d(T,{a:()=>C,b:()=>d,c:()=>l,d:()=>p,e:()=>i,f:()=>w,g:()=>o,h:()=>M,i:()=>s,j:()=>_,k:()=>h,l:()=>r,m:()=>t,n:()=>e,o:()=>u,p:()=>g,q:()=>m,r:()=>E,s:()=>f});const C="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Back</title><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Back</title><path d='M368 64L144 256l224 192V64z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",d="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close Circle</title><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Three</title><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Two</title><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},1316:(k,T,c)=>{c.r(T),c.d(T,{KEYBOARD_DID_CLOSE:()=>o,KEYBOARD_DID_OPEN:()=>C,copyVisualViewport:()=>f,keyboardDidClose:()=>g,keyboardDidOpen:()=>p,keyboardDidResize:()=>h,resetKeyboardAssist:()=>s,setKeyboardClose:()=>d,setKeyboardOpen:()=>u,startKeyboardAssist:()=>r,trackViewportChanges:()=>M});const C="ionKeyboardDidShow",o="ionKeyboardDidHide";let e={},t={},l=!1;const s=()=>{e={},t={},l=!1},r=i=>{_(i),i.visualViewport&&(t=f(i.visualViewport),i.visualViewport.onresize=()=>{M(i),p()||h(i)?u(i):g(i)&&d(i)})},_=i=>{i.addEventListener("keyboardDidShow",n=>u(i,n)),i.addEventListener("keyboardDidHide",()=>d(i))},u=(i,n)=>{m(i,n),l=!0},d=i=>{E(i),l=!1},p=()=>!l&&e.width===t.width&&(e.height-t.height)*t.scale>150,h=i=>l&&!g(i),g=i=>l&&t.height===i.innerHeight,m=(i,n)=>{const v=new CustomEvent(C,{detail:{keyboardHeight:n?n.keyboardHeight:i.innerHeight-t.height}});i.dispatchEvent(v)},E=i=>{const n=new CustomEvent(o);i.dispatchEvent(n)},M=i=>{e=Object.assign({},t),t=f(i.visualViewport)},f=i=>({width:Math.round(i.width),height:Math.round(i.height),offsetTop:i.offsetTop,offsetLeft:i.offsetLeft,pageTop:i.pageTop,pageLeft:i.pageLeft,scale:i.scale})},7741:(k,T,c)=>{c.d(T,{S:()=>o});const o={bubbles:{dur:1e3,circles:9,fn:(w,e,t)=>{const l=w*e/t-w+"ms",s=2*Math.PI*e/t;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":l}}}},circles:{dur:1e3,circles:8,fn:(w,e,t)=>{const l=e/t,s=w*l-w+"ms",r=2*Math.PI*l;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":s}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(w,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:8,fn:(w,e,t)=>({y1:14,y2:26,style:{transform:`rotate(${360/t*e+(e<t/2?180:-180)}deg)`,"animation-delay":w*e/t-w+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(w,e,t)=>({y1:12,y2:20,style:{transform:`rotate(${360/t*e+(e<t/2?180:-180)}deg)`,"animation-delay":w*e/t-w+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(w,e,t)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":w*e/t-w+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(w,e,t)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":w*e/t-w+"ms"}})}}},5713:(k,T,c)=>{c.r(T),c.d(T,{createSwipeBackGesture:()=>t});var C=c(1643),o=c(5062),w=c(3139);c(3509);const t=(l,s,r,_,u)=>{const d=l.ownerDocument.defaultView,p=(0,o.i)(l),g=i=>p?-i.deltaX:i.deltaX;return(0,w.createGesture)({el:l,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:i=>(i=>{const{startX:a}=i;return p?a>=d.innerWidth-50:a<=50})(i)&&s(),onStart:r,onMove:i=>{const a=g(i)/d.innerWidth;_(a)},onEnd:i=>{const n=g(i),a=d.innerWidth,v=n/a,b=(i=>p?-i.velocityX:i.velocityX)(i),D=b>=0&&(b>.2||n>a/2),O=(D?1-v:v)*a;let A=0;if(O>5){const P=O/Math.abs(b);A=Math.min(P,540)}u(D,v<=0?.01:(0,C.k)(0,v,.9999),A)}})}},2854:(k,T,c)=>{c.d(T,{c:()=>w,g:()=>t,h:()=>o,o:()=>s});var C=c(5861);const o=(r,_)=>null!==_.closest(r),w=(r,_)=>"string"==typeof r&&r.length>0?Object.assign({"ion-color":!0,[`ion-color-${r}`]:!0},_):_,t=r=>{const _={};return(r=>void 0!==r?(Array.isArray(r)?r:r.split(" ")).filter(u=>null!=u).map(u=>u.trim()).filter(u=>""!==u):[])(r).forEach(u=>_[u]=!0),_},l=/^[a-z][a-z0-9+\-.]*:/,s=function(){var r=(0,C.Z)(function*(_,u,d,p){if(null!=_&&"#"!==_[0]&&!l.test(_)){const h=document.querySelector("ion-router");if(h)return null!=u&&u.preventDefault(),h.push(_,d,p)}return!1});return function(u,d,p,h){return r.apply(this,arguments)}}()},6638:(k,T,c)=>{c.d(T,{B:()=>M});var C=c(655),o=c(5016),w=c(3260),e=c(9863),t=c(3996),l=c(3336),s=c(9912),r=c(4606),_=c(5742),u=c(1282),d=c(9808),p=c(4182);function h(f,i){if(1&f){const n=e.EpF();e.TgZ(0,"ion-item",25),e.NdJ("click",function(){const b=e.CHM(n).index;return e.oxw(2).select_server(b)}),e.TgZ(1,"ion-label"),e._uU(2),e.qZA()()}if(2&f){const n=i.$implicit;e.xp6(2),e.Oqu(n.name)}}function g(f,i){if(1&f){const n=e.EpF();e.TgZ(0,"ion-accordion-group",18,19),e.NdJ("click",function(){return e.CHM(n),e.oxw().isExpanded=!0}),e.TgZ(2,"ion-accordion",20)(3,"ion-item",21)(4,"ion-label"),e._uU(5),e.qZA(),e.TgZ(6,"ion-label",22),e._uU(7),e.qZA()(),e.TgZ(8,"ion-list",23),e.YNc(9,h,3,1,"ion-item",24),e.qZA()()()}if(2&f){const n=e.oxw();e.Q6J("disabled",n.isSaveClicked)("value",n.isExpanded),e.xp6(5),e.Oqu(n.lang.text.AddGroup.SelectServer),e.xp6(2),e.Oqu(n.servers[n.index].name),e.xp6(2),e.Q6J("ngForOf",n.servers)}}function m(f,i){if(1&f&&(e.TgZ(0,"ion-item",26)(1,"ion-label"),e._uU(2),e.qZA()()),2&f){const n=e.oxw();e.xp6(2),e.Oqu(n.lang.text.AddGroup.AfterCreateGroup)}}function E(f,i){if(1&f&&e._UZ(0,"img",27),2&f){const n=e.oxw();e.Q6J("src",n.QRCodeSRC,e.LSH)}}let M=(()=>{class f{constructor(n,a,v,b,x,D){this.modalCtrl=n,this.p5toast=a,this.nakama=v,this.statusBar=b,this.lang=x,this.global=D,this.userInput={server:void 0,id:void 0,name:void 0,description:void 0,max_count:void 0,lang_tag:void 0,open:!0,creator_id:void 0,img:void 0},this.servers=[],this.index=0,this.isExpanded=!0,this.cant_use_clipboard=!1,this.imageURL_disabled=!1,this.imageURL_placeholder=this.lang.text.Profile.pasteURI,this.isSaveClicked=!1,this.isSavedWell=!1,this.file_sel_id=""}ngOnInit(){let n=JSON.parse(localStorage.getItem("add-group"));n&&(this.userInput=n),this.servers=this.nakama.get_all_server_info(!0,!0),this.userInput.server=this.servers[this.index],this.cant_use_clipboard="DesktopPWA"!=o.n$,this.file_sel_id=`add_group_${(new Date).getTime()}`}select_server(n){this.index=n,this.userInput.server=this.servers[n],this.isExpanded=!1}imageURLPasted(){"DesktopPWA"==o.n$&&(this.imageURL_disabled=!0,w.Z.read().then(n=>{0==n.indexOf("http")?(this.userInput.img=n,this.imageURL_placeholder=n):0==n.indexOf("data:image")?this.nakama.limit_image_size(n,a=>this.userInput.img=a.canvas.toDataURL()):this.p5toast.show({text:this.lang.text.Profile.copyURIFirst})}),setTimeout(()=>{this.imageURL_disabled=!1},1500))}isPublicToggle(){this.userInput.open=!this.userInput.open}save(){if("online"!=this.statusBar.groupServer[this.servers[this.index].isOfficial][this.servers[this.index].target])return void this.p5toast.show({text:this.lang.text.AddGroup.cannot_use_selected_server});let n=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].client,a=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].session;this.userInput.owner=a.user_id,this.userInput.status="online",this.isSaveClicked=!0,this.userInput.lang_tag=this.userInput.lang_tag||this.lang.lang,this.userInput.max_count=this.userInput.max_count||2,n.createGroup(a,{name:this.userInput.name,lang_tag:this.userInput.lang_tag,description:this.userInput.description,max_count:this.userInput.max_count,open:this.userInput.open}).then(v=>{this.userInput.id=v.id,this.userInput.creator_id=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].session.user_id,this.QRCodeSRC=this.global.readasQRCodeFromId({type:"group",id:this.userInput.id,title:this.userInput.name}),this.nakama.save_group_info(this.userInput,this.servers[this.index].isOfficial,this.servers[this.index].target),this.nakama.join_chat_with_modulation(v.id,3,this.servers[this.index].isOfficial,this.servers[this.index].target,b=>{this.isSavedWell=!0,localStorage.removeItem("add-group"),this.p5toast.show({text:this.lang.text.AddGroup.group_created}),setTimeout(()=>{this.modalCtrl.dismiss()},500)})}).catch(v=>{switch(console.error("\uadf8\ub8f9 \uc0dd\uc131 \uc2e4\ud328: ",v),v.status){case 400:setTimeout(()=>{this.p5toast.show({text:this.lang.text.AddGroup.NeedSetGroupName}),this.isSaveClicked=!1},500);break;case 409:setTimeout(()=>{this.p5toast.show({text:this.lang.text.AddGroup.AlreadyExist}),this.isSaveClicked=!1},500);break;default:setTimeout(()=>{this.p5toast.show({text:`${this.lang.text.AddGroup.UnexpectedErr}: ${v}`}),this.isSaveClicked=!1},500)}})}ionViewWillLeave(){this.isSavedWell||localStorage.setItem("add-group",JSON.stringify(this.userInput))}buttonClickLinkInputFile(){document.getElementById(this.file_sel_id).click()}inputImageSelected(n){return(0,C.mG)(this,void 0,void 0,function*(){let a=yield this.global.GetBase64ThroughFileReader(n.target.files[0]);this.nakama.limit_image_size(a,v=>this.userInput.img=v.canvas.toDataURL())})}go_back(){"AddGroupPageModule"!=this.modalCtrl.injector.source&&this.modalCtrl.dismiss()}}return f.\u0275fac=function(n){return new(n||f)(e.Y36(t.IN),e.Y36(l.F),e.Y36(s.a),e.Y36(r.g),e.Y36(_.b),e.Y36(u.A))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-add-group"]],decls:51,vars:34,consts:[["slot","start",3,"click"],["defaultHref",""],["value","colors","expand","inset",3,"disabled","value","click",4,"ngIf"],["button","",3,"disabled"],[1,"ion-text-right",3,"ngModel","placeholder","ngModelChange"],["button","",3,"disabled","click"],[1,"additional_form","bg_img_form"],[1,"profile_img",2,"filter","grayscale(0) contrast(1)",3,"src"],[3,"hidden","disabled","click"],["color","medium"],["hidden","","type","file","accept","image/*",3,"id","change"],["disabled","",4,"ngIf"],["style","width: 100%; height: auto;","alt","Loading",3,"src",4,"ngIf"],[1,"infobox",3,"disabled","ngModel","placeholder","ngModelChange"],[3,"disabled"],["type","number","min","2","placeholder","2",1,"ion-text-right",3,"ngModel","ngModelChange"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["value","colors","expand","inset",3,"disabled","value","click"],["accordionGroup",""],["value","colors"],["slot","header"],[1,"ion-text-right"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["disabled",""],["alt","Loading",2,"width","100%","height","auto",3,"src"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0),e.NdJ("click",function(){return a.go_back()}),e._UZ(5,"ion-back-button",1),e.qZA()()(),e.TgZ(6,"ion-content"),e.YNc(7,g,10,5,"ion-accordion-group",2),e.TgZ(8,"ion-item-divider")(9,"ion-label"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item",3)(12,"ion-label"),e._uU(13),e.qZA(),e.TgZ(14,"ion-input",4),e.NdJ("ngModelChange",function(b){return a.userInput.name=b}),e.qZA()(),e.TgZ(15,"ion-item",5),e.NdJ("click",function(){return a.buttonClickLinkInputFile()}),e.TgZ(16,"div",6),e._UZ(17,"img",7),e.qZA(),e.TgZ(18,"ion-label")(19,"p"),e._uU(20),e.qZA(),e.TgZ(21,"h2"),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-item",8),e.NdJ("click",function(){return a.imageURLPasted()}),e.TgZ(24,"ion-label",9),e._uU(25),e.qZA()(),e.TgZ(26,"input",10),e.NdJ("change",function(b){return a.inputImageSelected(b)}),e.qZA(),e.TgZ(27,"ion-item-divider")(28,"ion-label"),e._uU(29),e.qZA()(),e.YNc(30,m,3,1,"ion-item",11),e.YNc(31,E,1,1,"img",12),e.TgZ(32,"ion-item-divider")(33,"ion-label"),e._uU(34),e.qZA()(),e.TgZ(35,"textarea",13),e.NdJ("ngModelChange",function(b){return a.userInput.description=b}),e.qZA(),e.TgZ(36,"ion-item",3)(37,"ion-label"),e._uU(38),e.qZA(),e.TgZ(39,"ion-input",4),e.NdJ("ngModelChange",function(b){return a.userInput.lang_tag=b}),e.qZA()(),e.TgZ(40,"ion-item",14)(41,"ion-label"),e._uU(42),e.qZA(),e.TgZ(43,"ion-input",15),e.NdJ("ngModelChange",function(b){return a.userInput.max_count=b}),e.qZA()(),e.TgZ(44,"ion-item",5),e.NdJ("click",function(){return a.isPublicToggle()}),e.TgZ(45,"ion-label"),e._uU(46),e.qZA(),e.TgZ(47,"ion-toggle",16),e.NdJ("ngModelChange",function(b){return a.userInput.open=b}),e.qZA()(),e.TgZ(48,"ion-item",5),e.NdJ("click",function(){return a.save()}),e.TgZ(49,"ion-label",17),e._uU(50),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(a.lang.text.AddGroup.Title),e.xp6(4),e.Q6J("ngIf",a.servers.length),e.xp6(3),e.Oqu(a.lang.text.AddGroup.GroupInfo),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Oqu(a.lang.text.AddGroup.DisplayName),e.xp6(1),e.Q6J("ngModel",a.userInput.name)("placeholder",a.lang.text.AddGroup.DisplayName_placeholder),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Q6J("src",a.userInput.img,e.LSH),e.xp6(3),e.Oqu((a.userInput.name||a.lang.text.AddGroup.DisplayName_placeholder)+" ("+a.userInput.server.target+")"),e.xp6(2),e.Oqu(a.lang.text.AddGroup.ClicktoChangeGroupImg),e.xp6(1),e.Q6J("hidden",a.cant_use_clipboard)("disabled",a.isSaveClicked||a.imageURL_disabled),e.xp6(2),e.Oqu(a.imageURL_placeholder),e.xp6(1),e.Q6J("id",a.file_sel_id),e.xp6(3),e.Oqu(a.lang.text.AddGroup.JoinThisGroup),e.xp6(1),e.Q6J("ngIf",!a.QRCodeSRC),e.xp6(1),e.Q6J("ngIf",a.QRCodeSRC),e.xp6(3),e.Oqu(a.lang.text.AddGroup.GroupDetail),e.xp6(1),e.Q6J("disabled",a.isSaveClicked)("ngModel",a.userInput.description)("placeholder",a.lang.text.AddGroup.GroupDetail_placeholder),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Oqu(a.lang.text.AddGroup.LanguageTag),e.xp6(1),e.Q6J("ngModel",a.userInput.lang_tag)("placeholder",a.lang.lang),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Oqu(a.lang.text.AddGroup.MemberMaxLimit),e.xp6(1),e.Q6J("ngModel",a.userInput.max_count),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Oqu(a.lang.text.AddGroup.IsOpen),e.xp6(1),e.Q6J("ngModel",a.userInput.open),e.xp6(1),e.Q6J("disabled",a.isSaveClicked),e.xp6(2),e.Oqu(a.lang.text.AddGroup.submit))},directives:[t.Gu,t.sr,t.wd,t.Sm,t.oU,t.cs,t.W2,d.O5,t.eh,t.We,t.Ie,t.Q$,t.q_,d.sg,t.rH,t.pK,t.j9,p.JJ,p.On,p.Fj,t.as,t.ho,t.w],styles:[""]}),f})()},4896:(k,T,c)=>{c.d(T,{Y:()=>E});var C=c(655),o=c(6505),e=c(8888),t=c(9863),l=c(9912),s=c(3336),r=c(4606),_=c(3496),u=c(5742),d=c(3996),p=c(4182),h=c(9808);function g(M,f){if(1&M&&(t.TgZ(0,"ion-item-divider")(1,"ion-label"),t._uU(2),t.qZA()()),2&M){const i=t.oxw();t.xp6(2),t.Oqu(i.lang.text.GroupServer.JoinedServerList)}}function m(M,f){if(1&M){const i=t.EpF();t.TgZ(0,"ion-item",13),t.NdJ("click",function(){const v=t.CHM(i).$implicit;return t.oxw().link_group(v.isOfficial,v.target)}),t._UZ(1,"div",14),t.TgZ(2,"ion-label",15)(3,"h2"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-button",16),t.NdJ("click",function(){const v=t.CHM(i).$implicit;return t.oxw().view_detail(v)}),t._uU(8),t.qZA(),t.TgZ(9,"ion-button",16),t.NdJ("click",function(){const v=t.CHM(i).$implicit;return t.oxw().remove_server(v.isOfficial,v.target)}),t._uU(10),t.qZA()()}if(2&M){const i=f.$implicit,n=t.oxw();t.xp6(1),t.Akn("background-color: "+n.statusBar.colors[n.statusBar.groupServer[i.isOfficial][i.target]||"offline"]),t.xp6(3),t.Oqu(i.name),t.xp6(2),t.AsE("",i.target," (",i.address,")"),t.xp6(2),t.hij(" ",n.lang.text.GroupServer.ServerDetail," "),t.xp6(2),t.hij(" ","online"==n.statusBar.groupServer[i.isOfficial][i.target]?n.lang.text.GroupServer.RemoveAccount:n.lang.text.GroupServer.RemoveUnofficial," ")}}let E=(()=>{class M{constructor(i,n,a,v,b,x){this.nakama=i,this.p5toast=n,this.statusBar=a,this.indexed=v,this.lang=b,this.modalCtrl=x,this.dedicated_info={name:void 0,address:void 0,target:void 0,port:void 0,useSSL:void 0,isOfficial:void 0,key:void 0},this.add_custom_tog=!1,this.isOverrideButtonPressed=!1}ngOnInit(){new o(i=>{i.setup=()=>{i.noCanvas(),i.loadStrings(`assets/data/infos/${this.lang.lang}/group-server.txt`,n=>{this.info=n.join("\n"),i.remove()},n=>{console.error("\uadf8\ub8f9\uc11c\ubc84 \uc124\uba85 \ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",n),i.remove()})}}),this.servers=this.nakama.get_all_server_info(!0)}link_group(i,n){this.isOverrideButtonPressed?this.isOverrideButtonPressed=!1:("offline"==this.statusBar.groupServer[i][n]||"missing"==this.statusBar.groupServer[i][n]?(this.statusBar.groupServer[i][n]="pending",this.nakama.catch_group_server_header("pending"),this.nakama.users.self.online&&this.nakama.init_session(this.nakama.servers[i][n].info)):(this.nakama.on_socket_disconnected.group_unlink_by_user||(this.nakama.on_socket_disconnected.group_unlink_by_user=()=>{this.nakama.set_group_statusBar("offline",i,n)}),this.statusBar.groupServer[i][n]="offline",this.nakama.catch_group_server_header("offline"),this.nakama.servers[i][n].session&&this.nakama.servers[i][n].client.sessionLogout(this.nakama.servers[i][n].session,this.nakama.servers[i][n].session.token,this.nakama.servers[i][n].session.refresh_token).then(a=>{a||console.warn("\ub85c\uadf8\uc544\uc6c3 \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),this.nakama.noti_origin[i]&&this.nakama.noti_origin[i][n]&&delete this.nakama.noti_origin[i][n],this.nakama.rearrange_notifications()}),this.nakama.servers[i][n].socket&&this.nakama.servers[i][n].socket.disconnect(!0),this.nakama.channels_orig[i]&&this.nakama.channels_orig[i][n]&&Object.keys(this.nakama.channels_orig[i][n]).forEach(v=>{"missing"!=this.nakama.channels_orig[i][n][v].status&&delete this.nakama.channels_orig[i][n][v].status})),this.indexed.saveTextFileToUserPath(JSON.stringify(this.statusBar.groupServer),"servers/list.json"))}add_custom_dedicated(){if(!this.add_custom_tog){if(!this.dedicated_info.name)return void this.p5toast.show({text:this.lang.text.GroupServer.NeedSetDIsplayName});this.add_custom_tog=!0,this.dedicated_info.port=this.dedicated_info.port||7350,this.dedicated_info.useSSL=this.dedicated_info.useSSL||!1,this.dedicated_info.key=this.dedicated_info.key||"defaultkey",this.nakama.add_group_server(this.dedicated_info,()=>{this.servers=this.nakama.get_all_server_info(!0),this.dedicated_info.name=void 0,this.dedicated_info.address=void 0,this.dedicated_info.target=void 0,this.dedicated_info.port=void 0,this.dedicated_info.useSSL=void 0,this.dedicated_info.isOfficial=void 0}),setTimeout(()=>{this.add_custom_tog=!1},1e3)}}view_detail(i){this.isOverrideButtonPressed=!0,this.modalCtrl.create({component:e.P,componentProps:{data:i}}).then(n=>n.present())}remove_server(i,n){return(0,C.mG)(this,void 0,void 0,function*(){this.isOverrideButtonPressed=!0,yield this.nakama.remove_server(i,n),this.servers=this.nakama.get_all_server_info(!0)})}ionViewWillLeave(){this.nakama.on_socket_disconnected.group_unlink_by_user&&delete this.nakama.on_socket_disconnected.group_unlink_by_user,this.nakama.on_socket_disconnected.group_remove_by_user&&delete this.nakama.on_socket_disconnected.group_remove_by_user}go_back(){"GroupServerPageModule"!=this.modalCtrl.injector.source&&this.modalCtrl.dismiss()}}return M.\u0275fac=function(i){return new(i||M)(t.Y36(l.a),t.Y36(s.F),t.Y36(r.g),t.Y36(_.H),t.Y36(u.b),t.Y36(d.IN))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-group-server"]],decls:43,vars:28,consts:[["slot","start",3,"click"],["defaultHref",""],["disabled","",1,"infobox",2,"height","180px",3,"ngModel","ngModelChange"],[4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"disabled"],[1,"ion-text-right",3,"ngModel","placeholder","ngModelChange"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModel","ngModelChange"],["disabled","","placeholder","defaultkey",1,"ion-text-right",3,"ngModel","ngModelChange"],["disabled","","type","number","placeholder","7350",1,"ion-text-right",3,"ngModel","ngModelChange"],["button","",3,"disabled","click"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["button","",3,"click"],[1,"additional_form","status_bar_single"],[1,"form_margin"],[3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return n.go_back()}),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"textarea",2),t.NdJ("ngModelChange",function(v){return n.info=v}),t.qZA(),t.YNc(11,g,3,1,"ion-item-divider",3),t.YNc(12,m,11,7,"ion-item",4),t.TgZ(13,"ion-item-divider")(14,"ion-label"),t._uU(15),t.qZA()(),t.TgZ(16,"ion-item",5)(17,"ion-label"),t._uU(18),t.qZA(),t.TgZ(19,"ion-input",6),t.NdJ("ngModelChange",function(v){return n.dedicated_info.name=v}),t.qZA()(),t.TgZ(20,"ion-item",5)(21,"ion-label"),t._uU(22),t.qZA(),t.TgZ(23,"ion-input",6),t.NdJ("ngModelChange",function(v){return n.dedicated_info.target=v}),t.qZA()(),t.TgZ(24,"ion-item",5)(25,"ion-label"),t._uU(26),t.qZA(),t.TgZ(27,"ion-input",7),t.NdJ("ngModelChange",function(v){return n.dedicated_info.address=v}),t.qZA()(),t.TgZ(28,"ion-item",5)(29,"ion-label"),t._uU(30),t.qZA(),t.TgZ(31,"ion-input",8),t.NdJ("ngModelChange",function(v){return n.dedicated_info.key=v}),t.qZA()(),t.TgZ(32,"ion-item",5)(33,"ion-label"),t._uU(34),t.qZA(),t.TgZ(35,"ion-input",9),t.NdJ("ngModelChange",function(v){return n.dedicated_info.port=v}),t.qZA()(),t.TgZ(36,"ion-item",10),t.NdJ("click",function(){return n.dedicated_info.useSSL=!n.dedicated_info.useSSL}),t.TgZ(37,"ion-label"),t._uU(38),t.qZA(),t.TgZ(39,"ion-toggle",11),t.NdJ("ngModelChange",function(v){return n.dedicated_info.useSSL=v}),t.qZA()(),t.TgZ(40,"ion-item",10),t.NdJ("click",function(){return n.add_custom_dedicated()}),t.TgZ(41,"ion-label",12),t._uU(42),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(n.lang.text.Settings.groupServer),t.xp6(6),t.Oqu(n.lang.text.GroupServer.AboutServerAndAccount),t.xp6(1),t.Q6J("ngModel",n.info),t.xp6(1),t.Q6J("ngIf",n.nakama.servers.official.default||n.servers.length),t.xp6(1),t.Q6J("ngForOf",n.servers),t.xp6(3),t.Oqu(n.lang.text.GroupServer.RegisterServer),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.DisplayName),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.name)("placeholder",n.lang.text.GroupServer.DisplayName_placeholder),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.DivisionName),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.target)("placeholder",n.dedicated_info.name||n.lang.text.GroupServer.DivisionName_placeholder),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.Address),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.address),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.Key),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.key),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.Port),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.port),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.isSSL),t.xp6(1),t.Q6J("ngModel",n.dedicated_info.useSSL),t.xp6(1),t.Q6J("disabled",n.add_custom_tog),t.xp6(2),t.Oqu(n.lang.text.GroupServer.submit))},directives:[d.Gu,d.sr,d.wd,d.Sm,d.oU,d.cs,d.W2,d.rH,d.Q$,p.Fj,p.JJ,p.On,h.O5,h.sg,d.Ie,d.YG,d.pK,d.j9,d.as,d.ho,d.w],styles:[""]}),M})()},9805:(k,T,c)=>{c.d(T,{$:()=>u});var C=c(655),o=c(9863),w=c(5742),e=c(3996),t=c(1282),l=c(3496),s=c(9808);function r(d,p){if(1&d){const h=o.EpF();o.TgZ(0,"div",5),o.NdJ("click",function(){return o.CHM(h),o.oxw().open_crop_tool()}),o._UZ(1,"ion-icon",15),o.qZA()}if(2&d){const h=o.oxw();o.xp6(1),o.Q6J("color",h.initialized?"dark":"medium")}}function _(d,p){if(1&d){const h=o.EpF();o.TgZ(0,"div",5),o.NdJ("click",function(){return o.CHM(h),o.oxw().apply_crop()}),o._UZ(1,"ion-icon",16),o.qZA()}if(2&d){const h=o.oxw();o.xp6(1),o.Q6J("color",h.initialized?"dark":"medium")}}let u=(()=>{class d{constructor(h,g,m,E,M,f,i){this.lang=h,this.modalCtrl=g,this.alertCtrl=m,this.loadingCtrl=E,this.global=M,this.navParams=f,this.indexed=i,this.initialized=!1,this.EventListenerAct=n=>{n.detail.register(130,a=>{})},this.is_cropping=!1,this.WithoutSave=!0}ngOnInit(){}ionViewDidEnter(){return(0,C.mG)(this,void 0,void 0,function*(){document.addEventListener("ionBackButton",this.EventListenerAct),this.mainLoading=yield this.loadingCtrl.create({message:this.lang.text.voidDraw.UseThisImage}),yield this.global.CreateGodotIFrame("voidDraw",{local_url:"assets/data/godot/voidDraw.pck",title:"voidDraw",image:Boolean(this.navParams.data.path),receive_image:(h,g=!1)=>{let m="data:image/png;base64,"+h.replace(/"|=|\\/g,""),E=new Date,M=E.getUTCFullYear(),f=("0"+(E.getMonth()+1)).slice(-2),i=("0"+E.getDate()).slice(-2),n=("0"+E.getHours()).slice(-2),a=("0"+E.getMinutes()).slice(-2),v=("0"+E.getSeconds()).slice(-2);this.modalCtrl.dismiss({name:`voidDraw_${M}-${f}-${i}_${n}-${a}-${v}.png`,img:m,loadingCtrl:this.mainLoading,is_modify:g})}},"new_canvas"),this.initialized=!0,this.navParams.data.path&&this.global.godot_window.new_canvas(JSON.stringify({width:this.navParams.data.width,height:this.navParams.data.height,path:"/userfs/"+this.navParams.data.path}))})}change_color(){this.initialized&&this.global.godot_window.change_color()}new_image(){if(!this.initialized)return;this.alertCtrl.create({header:this.lang.text.voidDraw.newDraw,inputs:[{name:"width",type:"number",placeholder:`${this.lang.text.voidDraw.width} (${this.lang.text.voidDraw.default_size}: 432)`},{name:"height",type:"number",placeholder:`${this.lang.text.voidDraw.height} (${this.lang.text.voidDraw.default_size}: 432)`}],buttons:[{text:this.lang.text.voidDraw.CreateNew,handler:g=>{g.width||(g.width=432),g.height||(g.height=432),this.global.godot_window.new_canvas(JSON.stringify(g))}}]}).then(g=>g.present())}change_line_weight(){!this.initialized||this.alertCtrl.create({header:this.lang.text.voidDraw.changeWeight,inputs:[{name:"weight",type:"number",placeholder:`${this.lang.text.voidDraw.weight} (${this.lang.text.voidDraw.default_size}: 1)`}],buttons:[{text:this.lang.text.voidDraw.apply,handler:h=>{this.global.godot_window.set_line_weight(h.weight||1)}}]}).then(h=>h.present())}act_history(h){switch(h){case-1:this.global.godot_window.undo_draw();break;case 1:this.global.godot_window.redo_draw();break;default:console.error("\uc788\uc744 \uc218 \uc5c6\ub294 \ub3d9\uc791 \uc694\uccad: ",h)}}open_crop_tool(){!this.initialized||(this.global.godot_window.open_crop_tool(),this.is_cropping=!0)}apply_crop(){!this.initialized||(this.global.godot_window.resize_canvas(),this.is_cropping=!1)}dismiss_draw(){this.is_cropping?(this.global.godot_window.resize_canvas(),this.is_cropping=!1):(this.mainLoading.present(),this.WithoutSave=!1,setTimeout(()=>{this.global.godot_window.save_image()},100))}ionViewDidLeave(){document.removeEventListener("ionBackButton",this.EventListenerAct),this.indexed.removeFileFromUserPath("tmp_files/modify_image.png"),this.WithoutSave&&this.mainLoading.remove()}}return d.\u0275fac=function(h){return new(h||d)(o.Y36(w.b),o.Y36(e.IN),o.Y36(e.Br),o.Y36(e.HT),o.Y36(t.A),o.Y36(e.X1),o.Y36(l.H))},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-void-draw"]],decls:39,vars:9,consts:[["slot","start",3,"click"],["defaultHref",""],["id","interface_table"],[2,"width","100%","height","100%"],[1,"button_panel"],[1,"button_panel","button_font",3,"click"],["slot","start","name","add",1,"icon_button",3,"color"],["class","button_panel button_font",3,"click",4,"ngIf"],["slot","start","name","checkmark",1,"icon_button",3,"color"],["colspan","6"],["id","voidDraw",1,"full_screen",2,"display","flex","background-color","grey","overflow","hidden"],["slot","start","name","arrow-undo",1,"icon_button",3,"color"],["slot","start","name","arrow-redo",1,"icon_button",3,"color"],["slot","start","name","color-palette",1,"icon_button",3,"color"],["slot","start","name","pencil",1,"icon_button",3,"color"],["slot","start","name","crop",1,"icon_button",3,"color"],["slot","start","name","checkmark-circle-outline",1,"icon_button",3,"color"]],template:function(h,g){1&h&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3),o.qZA(),o.TgZ(4,"ion-buttons",0),o.NdJ("click",function(){return g.modalCtrl.dismiss()}),o._UZ(5,"ion-back-button",1),o.qZA()()(),o.TgZ(6,"ion-content")(7,"div",2)(8,"table",3)(9,"tr",4)(10,"table",4)(11,"tr",4)(12,"td")(13,"div",5),o.NdJ("click",function(){return g.new_image()}),o._UZ(14,"ion-icon",6),o.qZA()(),o.TgZ(15,"td"),o.YNc(16,r,2,1,"div",7),o.YNc(17,_,2,1,"div",7),o.qZA(),o.TgZ(18,"td")(19,"div",5),o.NdJ("click",function(){return g.dismiss_draw()}),o._UZ(20,"ion-icon",8),o.qZA()()()()(),o.TgZ(21,"tr")(22,"td",9),o._UZ(23,"div",10),o.qZA()(),o.TgZ(24,"tr",4)(25,"table",4)(26,"tr",4)(27,"td")(28,"div",5),o.NdJ("click",function(){return g.act_history(-1)}),o._UZ(29,"ion-icon",11),o.qZA()(),o.TgZ(30,"td")(31,"div",5),o.NdJ("click",function(){return g.act_history(1)}),o._UZ(32,"ion-icon",12),o.qZA()(),o.TgZ(33,"td")(34,"div",5),o.NdJ("click",function(){return g.change_color()}),o._UZ(35,"ion-icon",13),o.qZA()(),o.TgZ(36,"td")(37,"div",5),o.NdJ("click",function(){return g.change_line_weight()}),o._UZ(38,"ion-icon",14),o.qZA()()()()()()()()),2&h&&(o.xp6(3),o.Oqu(g.lang.text.ChatRoom.voidDraw),o.xp6(11),o.Q6J("color",g.initialized?"dark":"medium"),o.xp6(2),o.Q6J("ngIf",!g.is_cropping),o.xp6(1),o.Q6J("ngIf",g.is_cropping),o.xp6(3),o.Q6J("color",g.initialized?"dark":"medium"),o.xp6(9),o.Q6J("color",g.global.godot_window&&g.global.godot_window.current_act&&0!=g.global.godot_window.current_act?"dark":"medium"),o.xp6(3),o.Q6J("color",g.global.godot_window&&g.global.godot_window.current_act!=g.global.godot_window.draw_length?"dark":"medium"),o.xp6(3),o.Q6J("color",g.initialized?"dark":"medium"),o.xp6(3),o.Q6J("color",g.initialized?"dark":"medium"))},directives:[e.Gu,e.sr,e.wd,e.Sm,e.oU,e.cs,e.W2,e.gu,s.O5],styles:["#interface_table[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;width:100%;height:100%}.button_panel[_ngcontent-%COMP%]{width:100%;height:56px;background-color:var(--voidDraw-menu-background)}.button_font[_ngcontent-%COMP%]{width:100%;display:inline-block;text-align:center;cursor:pointer}.icon_button[_ngcontent-%COMP%]{width:27px;height:27px;transform:translateY(50%)}"]}),d})()}}]);