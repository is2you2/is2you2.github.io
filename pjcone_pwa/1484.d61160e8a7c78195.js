"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(B,S,o)=>{o.r(S),o.d(S,{SettingsPageModule:()=>q});var x=o(9808),T=o(4182),e=o(3996),c=o(9705),M=o(655),C=o(4464),Z=o(5016),O=o(2722),P=o(428),U=o(6366),b=o(7898),y=o(8982),t=o(9863),J=o(4606),N=o(261),g=o(3496),_=o(2855),s=o(9040),r=o(5742),h=o(8677),p=o(1282);const A=["LangSel"];function k(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().setDisableBatteryOptimizations()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.lang.text.Settings.batteryOptimization)}}function E(a,d){if(1&a&&(t.TgZ(0,"ion-label",23),t._uU(1),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.hij("",n.client.address_override," ")}}function D(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("dedicated-settings")}),t._UZ(1,"div",10),t.TgZ(2,"ion-label",11),t._uU(3),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(1),t.Akn("background-color: "+n.statusBar.colors[n.statusBar.settings.dedicatedServer||"offline"]),t.xp6(2),t.Oqu(n.lang.text.Settings.useDeviceAsServer)}}function F(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){const u=t.CHM(n).index;return t.oxw(2).go_to_group_detail(u)}),t._UZ(2,"div",10),t.TgZ(3,"div",6),t._UZ(4,"img",7),t.qZA(),t.TgZ(5,"ion-label",11)(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"h2"),t._uU(9),t.qZA()()()()}if(2&a){const n=d.$implicit,i=t.oxw(2);t.xp6(2),t.Akn("background-color: "+i.statusBar.colors[n.status||"offline"]),t.xp6(2),t.Akn("filter: "+("online"==n.status?"grayscale(0) contrast(1);":"grayscale(.9) contrast(1.4);")),t.Q6J("src",n.img,t.LSH),t.xp6(3),t.Oqu(n.server.name),t.xp6(2),t.Oqu(n.name)}}function I(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",8),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("add-group")}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()(),t.YNc(7,F,10,7,"div",24),t.qZA()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.lang.text.Settings.ManageGroup),t.xp6(1),t.Q6J("disabled","online"!=n.statusBar.settings.groupServer),t.xp6(2),t.Oqu(n.lang.text.Settings.CreateGroup),t.xp6(1),t.Q6J("ngForOf",n.groups)}}function L(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("notification")}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("req-counter")}),t.TgZ(8,"ion-label"),t._uU(9),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.lang.text.Settings.admin_community_menu),t.xp6(3),t.Oqu(n.lang.text.Settings.admin_noti_all),t.xp6(3),t.Oqu(n.lang.text.Settings.admin_req_counter)}}function Y(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_tool_list()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.lang.text.Settings.ToolList)}}function Q(a,d){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("translator")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(2),t.Oqu(n.lang.text.Settings.AppTranslator)}}function H(a,d){1&a&&(t.TgZ(0,"ion-select-option",25),t._uU(1,"#"),t.qZA())}const $=[{path:"",component:(()=>{class a{constructor(n,i,l,u,m,v,f,R,W,j){this.modalCtrl=n,this.nav=i,this.statusBar=l,this.nakama=u,this.indexed=m,this.client=v,this.bgmode=f,this.lang=R,this.noti=W,this.app=j,this.cant_dedicated=!1,this.GroupServerCount=0,this.EventListenerAct=z=>{z.detail.register(10,K=>{this.go_back(),K()})},this.list_tools=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.groups=[],this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==Z.n$||"MobilePWA"==Z.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(n,i)=>{n&&i&&(this.nakama.users.self.img=i.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=Boolean(localStorage.getItem("ShowDisableBatteryOptimizations")),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.indexed.GetFileListFromDB("acts_local/",n=>{this.indexed.GetFileListFromDB("acts/",i=>{this.list_tools=[...n,...i]})})}go_to_tool_list(){this.modalCtrl.create({component:U.q,componentProps:{data:this.list_tools}}).then(n=>{n.onWillDismiss().then(()=>{this.indexed.GetFileListFromDB("acts_local/",i=>{this.indexed.GetFileListFromDB("acts/",l=>{this.list_tools=[...i,...l]})})}),n.present()})}checkAdsInfo(){return(0,M.mG)(this,void 0,void 0,function*(){try{let n=yield fetch(`${Z.Oy}pjcone_ads/${this.lang.lang}.txt`);if(n.ok){let i=yield(yield n.blob()).text();this.indexed.saveTextFileToUserPath(i,"ads_list.txt");let l=i.split("\n");this.listAvailableAds(l)}}catch(n){console.log(n),this.indexed.loadTextFromUserPath("ads_list.txt",(i,l)=>{i&&l&&this.listAvailableAds(l.split("\n"))})}})}listAvailableAds(n){let l,i=(new Date).getTime();this.availables.length=0;for(let m=0,v=n.length;m<v;m++){let f=n[m].split(",");Number(f[0])<i?i<Number(f[1])&&this.availables.push([Number(f[0]),Number(f[1]),f[2]]):l?Number(f[0])<l&&(l=Number(f[0])):l=Number(f[0])}let u=this.AD_Div.childNodes;this.isAdHiding=!0,u.forEach(m=>{m.remove()}),this.availables.length?this.displayRandomAds():l&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(m,v)=>{m&&v&&this.listAvailableAds(v.split("\n"))})},l-(new Date).getTime()))}displayRandomAds(){let n=Math.floor(Math.random()*this.availables.length),i=this.availables[n];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(u,m)=>{u&&m&&this.listAvailableAds(m.split("\n"))})},i[1]-(new Date).getTime());let l=document.createElement("iframe");l.id="AdFrame",l.setAttribute("src",i[2]),l.setAttribute("frameborder","0"),l.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(l)}open_link(n){window.open(n,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.GroupServerCount=this.nakama.get_all_server_info().length,this.nakama.socket_reactive.settings=this,this.profile_filter=this.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.groups=this.nakama.rearrange_group_list(),document.addEventListener("ionBackButton",this.EventListenerAct)}start_minimalchat(n){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:O.X,componentProps:{address:n,name:this.nakama.users.self.display_name}}).then(i=>{i.present(),this.lock_modal_open=!1})}}go_to_group_detail(n){this.lock_modal_open||(this.lock_modal_open=!0,delete this.nakama.socket_reactive.settings,this.modalCtrl.create({component:P.x,componentProps:{info:this.groups[n]}}).then(i=>{i.onWillDismiss().then(()=>{this.nakama.socket_reactive.settings=this,this.groups=this.nakama.rearrange_group_list()}),i.present(),this.lock_modal_open=!1}))}open_inapp_explorer(){this.modalCtrl.create({component:b.P}).then(n=>n.present())}LangClicked(){this.LangSel.open()}LanguageChanged(n){this.lang.lang=n.detail.value,this.lang.load_selected_lang()}go_to_page(n){this.nav.navigateForward(`settings/${n}`,{animation:C.Nn})}ionViewWillLeave(){delete this.nakama.socket_reactive.settings,document.removeEventListener("ionBackButton",this.EventListenerAct)}go_back(){this.nakama.rearrange_all_user().forEach(l=>{delete l.img}),this.nakama.rearrange_channels().forEach(l=>{2==l.redirect.type&&this.indexed.loadTextFromUserPath(`servers/${l.server.isOfficial}/${l.server.target}/users/${l.redirect.id}/profile.img`,(u,m)=>{u&&m&&(this.nakama.load_other_user(l.redirect.id,l.server.isOfficial,l.server.target).img=m.replace(/"|=|\\/g,""))})}),delete this.nakama.users.self.img,clearTimeout(this.refreshAds),this.app.CreateGodotIFrame("godot-todo",{local_url:"assets/data/godot/todo.pck",title:"Todo",add_todo_menu:l=>{this.modalCtrl.create({component:y.s,componentProps:{godot:this.app.godot_window,data:l}}).then(u=>u.present())}})}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(e.IN),t.Y36(e.SH),t.Y36(J.g),t.Y36(N.a),t.Y36(g.H),t.Y36(_.Z),t.Y36(s.z),t.Y36(r.b),t.Y36(h.J),t.Y36(p.A))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-settings"]],viewQuery:function(n,i){if(1&n&&t.Gf(A,5),2&n){let l;t.iGM(l=t.CRH())&&(i.LangSel=l.first)}},decls:89,vars:49,consts:[["slot","start",3,"click"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],["button","",3,"disabled","click"],[4,"ngIf"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["class","ion-text-right","color","medium",4,"ngIf"],["button","",3,"click",4,"ngIf"],["button","",3,"disabled"],[1,"ion-text-center",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["slot","start","name","language"],[2,"pointer-events","none",3,"value","placeholder","ionChange"],["LangSel",""],["value","#",4,"ngIf"],["value","en"],["value","ko"],["color","medium",1,"ion-text-right"],[4,"ngFor","ngForOf"],["value","#"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return i.go_back()}),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return i.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("profile")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t.TgZ(20,"ion-label"),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("noti-alert")}),t.TgZ(23,"ion-label"),t._uU(24),t.qZA()(),t.TgZ(25,"ion-item",8),t.NdJ("click",function(){return i.go_to_page("link-account")}),t.TgZ(26,"ion-label"),t._uU(27),t.qZA()(),t.YNc(28,k,4,1,"div",9),t.TgZ(29,"ion-item-divider")(30,"ion-label"),t._uU(31),t.qZA()(),t.TgZ(32,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("group-server")}),t._UZ(33,"div",10),t.TgZ(34,"ion-label",11),t._uU(35),t.qZA()(),t.TgZ(36,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("community-server")}),t._UZ(37,"div",10),t.TgZ(38,"ion-label",11),t._uU(39),t.qZA(),t.YNc(40,E,2,1,"ion-label",12),t.qZA(),t.YNc(41,D,4,3,"ion-item",13),t.YNc(42,I,8,4,"div",9),t.TgZ(43,"ion-item-divider")(44,"ion-label"),t._uU(45),t.qZA()(),t.TgZ(46,"ion-item",8),t.NdJ("click",function(){return i.start_minimalchat()}),t._UZ(47,"div",10),t.TgZ(48,"ion-label",11),t._uU(49),t.qZA()(),t.TgZ(50,"ion-item",14),t._UZ(51,"div",10),t.TgZ(52,"ion-label",11),t._uU(53),t.qZA(),t.TgZ(54,"ion-input",15),t.NdJ("ngModelChange",function(u){return i.chat_address=u}),t.qZA(),t.TgZ(55,"ion-button",16),t.NdJ("click",function(){return i.start_minimalchat(i.chat_address?"ws://"+i.chat_address:"ws://127.0.0.1")}),t._uU(56),t.qZA()(),t.TgZ(57,"ion-item",8),t.NdJ("click",function(){return i.go_to_page("qr-share")}),t.TgZ(58,"ion-label"),t._uU(59),t.qZA()(),t.YNc(60,L,10,3,"div",9),t.YNc(61,Y,4,1,"div",9),t.TgZ(62,"ion-item",5),t.NdJ("click",function(){return i.open_inapp_explorer()}),t.TgZ(63,"ion-label"),t._uU(64),t.qZA()(),t.TgZ(65,"ion-item-divider")(66,"ion-label"),t._uU(67),t.qZA()(),t.TgZ(68,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("creator")}),t.TgZ(69,"ion-label"),t._uU(70),t.qZA()(),t.YNc(71,Q,3,1,"ion-item",13),t.TgZ(72,"ion-item",5),t.NdJ("click",function(){return i.LangClicked()}),t._UZ(73,"ion-icon",17),t.TgZ(74,"ion-label"),t._uU(75),t.qZA(),t.TgZ(76,"ion-select",18,19),t.NdJ("ionChange",function(u){return i.LanguageChanged(u)}),t.YNc(78,H,2,0,"ion-select-option",20),t.TgZ(79,"ion-select-option",21),t._uU(80,"English"),t.qZA(),t.TgZ(81,"ion-select-option",22),t._uU(82,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(83,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("privacy")}),t.TgZ(84,"ion-label"),t._uU(85),t.qZA()(),t.TgZ(86,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("licenses")}),t.TgZ(87,"ion-label"),t._uU(88),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(i.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",i.isAdHiding),t.xp6(3),t.Oqu(i.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",i.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(i.lang.text.Settings.env_info),t.xp6(3),t.Akn(i.profile_filter),t.Q6J("src",i.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(i.lang.text.Settings.myInfo),t.xp6(3),t.Oqu(i.lang.text.Settings.NotificationSetting),t.xp6(1),t.Q6J("disabled","online"!=i.statusBar.settings.communityServer),t.xp6(2),t.Oqu(i.lang.text.Settings.takeOverUser),t.xp6(1),t.Q6J("ngIf",!i.cant_dedicated&&!i.isBatteryOptimizationsShowed),t.xp6(3),t.Oqu(i.lang.text.Settings.ManageServer),t.xp6(2),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.groupServer||"offline"]),t.xp6(2),t.Oqu(i.lang.text.Settings.groupServer),t.xp6(2),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.communityServer||"offline"]),t.xp6(2),t.Oqu(i.lang.text.Settings.commServer),t.xp6(1),t.Q6J("ngIf",i.client.address_override),t.xp6(1),t.Q6J("ngIf",!i.cant_dedicated),t.xp6(1),t.Q6J("ngIf",0!=i.GroupServerCount||i.groups.length),t.xp6(3),t.Oqu(i.lang.text.Settings.Community),t.xp6(1),t.Q6J("disabled","online"!=i.statusBar.settings.communityServer||i.will_enter),t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.community_ranchat||"offline"]),t.xp6(2),t.Oqu(i.lang.text.Settings.joinRanchat),t.xp6(1),t.Q6J("disabled",i.will_enter),t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.dedicated_groupchat||"offline"]),t.xp6(2),t.Oqu(i.lang.text.Settings.joinDediChat),t.xp6(1),t.Q6J("placeholder",i.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",i.chat_address),t.xp6(2),t.hij(" ",i.lang.text.Settings.joinDedi_button," "),t.xp6(1),t.Q6J("disabled","online"!=i.statusBar.settings.communityServer),t.xp6(2),t.Oqu(i.lang.text.Settings.quickQRshare),t.xp6(1),t.Q6J("ngIf",i.client.is_admin),t.xp6(1),t.Q6J("ngIf",i.list_tools.length),t.xp6(3),t.Oqu(i.lang.text.Settings.InAppExplorer),t.xp6(3),t.Oqu(i.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(i.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=i.lang.lang),t.xp6(4),t.Oqu(i.lang.text.Settings.AppLanguage),t.xp6(1),t.Q6J("value",i.lang.lang)("placeholder",i.lang.lang),t.xp6(2),t.Q6J("ngIf",i.client.is_admin),t.xp6(7),t.Oqu(i.lang.text.Settings.userPrivacyTerms),t.xp6(3),t.Oqu(i.lang.text.Settings.LicenseNotice))},directives:[e.Gu,e.sr,e.wd,e.Sm,e.oU,e.cs,e.W2,e.rH,e.Q$,e.YG,e.Ie,x.O5,x.sg,e.pK,e.j9,T.JJ,T.On,e.gu,e.t9,e.QI,e.n0],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}"]}),a})()},{path:"privacy",loadChildren:()=>o.e(6426).then(o.bind(o,6426)).then(a=>a.PrivacyPageModule)},{path:"licenses",loadChildren:()=>o.e(4189).then(o.bind(o,4189)).then(a=>a.LicensesPageModule)},{path:"profile",loadChildren:()=>o.e(3774).then(o.bind(o,3774)).then(a=>a.ProfilePageModule)},{path:"dedicated-settings",loadChildren:()=>o.e(1420).then(o.bind(o,1420)).then(a=>a.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>o.e(6955).then(o.bind(o,6955)).then(a=>a.GroupServerPageModule)},{path:"community-server",loadChildren:()=>o.e(634).then(o.bind(o,634)).then(a=>a.CommunityServerPageModule)},{path:"add-group",loadChildren:()=>o.e(6698).then(o.bind(o,6698)).then(a=>a.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>o.e(6167).then(o.bind(o,6167)).then(a=>a.GroupDetailPageModule)},{path:"link-account",loadChildren:()=>o.e(2056).then(o.bind(o,2056)).then(a=>a.LinkAccountPageModule)},{path:"translator",loadChildren:()=>o.e(747).then(o.bind(o,747)).then(a=>a.TranslatorPageModule)},{path:"creator",loadChildren:()=>o.e(3742).then(o.bind(o,3742)).then(a=>a.CreatorPageModule)},{path:"notification",loadChildren:()=>o.e(1254).then(o.bind(o,1254)).then(a=>a.NotificationPageModule)},{path:"tool-management",loadChildren:()=>o.e(7398).then(o.bind(o,7398)).then(a=>a.ToolManagementPageModule)},{path:"qr-share",loadChildren:()=>o.e(6250).then(o.bind(o,6250)).then(a=>a.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>o.e(6886).then(o.bind(o,6886)).then(a=>a.NotiAlertPageModule)},{path:"req-counter",loadChildren:()=>o.e(6333).then(o.bind(o,6333)).then(a=>a.ReqCounterPageModule)}];let G=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.Bz.forChild($)],c.Bz]}),a})(),q=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[x.ez,T.u5,e.Pc,G]]}),a})()},6366:(B,S,o)=>{o.d(S,{q:()=>N});var x=o(655),T=o(5016),e=o(9863),c=o(3996),M=o(3496),C=o(5742),Z=o(3336),O=o(1282),P=o(9808);function U(g,_){if(1&g){const s=e.EpF();e.TgZ(0,"ion-button",6),e.NdJ("click",function(){e.CHM(s);const h=e.oxw().index;return e.oxw(2).remove_local_tool(h)}),e._uU(1),e.qZA()}if(2&g){const s=e.oxw(3);e.xp6(1),e.hij(" ",s.lang.text.ToolManager.Sync," ")}}function b(g,_){if(1&g&&(e.TgZ(0,"ion-item",4)(1,"ion-label"),e._uU(2),e.qZA(),e.YNc(3,U,2,1,"ion-button",5),e.qZA()),2&g){const s=_.$implicit;e.xp6(2),e.Oqu(s.text),e.xp6(1),e.Q6J("ngIf",!s.toggle)}}function y(g,_){if(1&g&&(e.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),e._uU(3),e.qZA()(),e.YNc(4,b,4,2,"ion-item",3),e.qZA()),2&g){const s=e.oxw();e.xp6(3),e.Oqu(s.lang.text.ToolManager.Official),e.xp6(1),e.Q6J("ngForOf",s.list_local)}}function t(g,_){if(1&g){const s=e.EpF();e.TgZ(0,"ion-item",4)(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",7),e.NdJ("click",function(){const p=e.CHM(s).index;return e.oxw(2).redownload_tool(p)}),e._uU(4),e.qZA(),e.TgZ(5,"ion-button",6),e.NdJ("click",function(){const p=e.CHM(s).index;return e.oxw(2).remove_tool(p)}),e._uU(6),e.qZA()()}if(2&g){const s=_.$implicit,r=e.oxw(2);e.xp6(2),e.Oqu(s.text),e.xp6(1),e.Q6J("disabled",s.toggle),e.xp6(1),e.hij(" ",r.lang.text.ToolManager.Redownload," "),e.xp6(2),e.hij(" ",r.lang.text.ToolManager.removeTool," ")}}function J(g,_){if(1&g&&(e.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),e._uU(3),e.qZA()(),e.YNc(4,t,7,4,"ion-item",3),e.qZA()),2&g){const s=e.oxw();e.xp6(3),e.Oqu(s.lang.text.ToolManager.Unofficial),e.xp6(1),e.Q6J("ngForOf",s.list)}}let N=(()=>{class g{constructor(s,r,h,p,A,k){this.modalCtrl=s,this.navParams=r,this.indexed=h,this.lang=p,this.p5toast=A,this.global=k,this.list=[],this.list_local=[]}ngOnInit(){this.navParams.get("data").forEach(r=>{let h=r.substring(5);0==h.indexOf("local/")?this.list_local.push({text:h.substring(6),toggle:!1}):this.list.push({text:h,toggle:!1})})}redownload_tool(s){return(0,x.mG)(this,void 0,void 0,function*(){try{this.list[s].toggle=!0;let r=yield fetch(`${T.Oy}pjcone_pck/${this.list[s].text}`);if(!r.ok)throw"\uc5c6\ub294 \ud234\uc774\ub77c\uace0 \ud310\ub2e8\ub429\ub2c8\ub2e4.";{let h=yield r.blob(),p=yield this.global.GetBase64ThroughFileReader(h);this.indexed.saveFileToUserPath(p,`acts/${this.list[s].text}`,()=>{this.list[s].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadSucc}: ${this.list[s].text}`})})}}catch(r){console.log(r),this.list[s].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadFailed}: ${this.list[s].text}`})}})}remove_tool(s){this.indexed.removeFileFromUserPath(`acts/${this.list[s].text}`),this.list.splice(s,1)}remove_local_tool(s){this.indexed.removeFileFromUserPath(`acts_local/${this.list_local[s].text}`),this.list_local[s].toggle=!0,this.p5toast.show({text:`${this.lang.text.ToolManager.SyncWell}: ${this.list_local[s].text}`})}}return g.\u0275fac=function(s){return new(s||g)(e.Y36(c.IN),e.Y36(c.X1),e.Y36(M.H),e.Y36(C.b),e.Y36(Z.F),e.Y36(O.A))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-tool-management"]],decls:9,vars:3,consts:[["slot","start",3,"click"],["defaultHref","settings"],[4,"ngIf"],["button","",4,"ngFor","ngForOf"],["button",""],[3,"click",4,"ngIf"],[3,"click"],[3,"disabled","click"]],template:function(s,r){1&s&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0),e.NdJ("click",function(){return r.modalCtrl.dismiss()}),e._UZ(5,"ion-back-button",1),e.qZA()()(),e.TgZ(6,"ion-content"),e.YNc(7,y,5,2,"div",2),e.YNc(8,J,5,2,"div",2),e.qZA()),2&s&&(e.xp6(3),e.Oqu(r.lang.text.Settings.ToolList),e.xp6(4),e.Q6J("ngIf",r.list_local.length),e.xp6(1),e.Q6J("ngIf",r.list.length))},directives:[c.Gu,c.sr,c.wd,c.Sm,c.oU,c.cs,c.W2,P.O5,c.rH,c.Q$,P.sg,c.Ie,c.YG],styles:[""]}),g})()}}]);