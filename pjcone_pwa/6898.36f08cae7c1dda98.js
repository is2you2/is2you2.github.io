"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6898],{6898:(R,f,n)=>{n.r(f),n.d(f,{SettingsPageModule:()=>G});var _=n(6814),u=n(95),l=n(1325),v=n(5877),p=n(5861),S=n(1450),m=n(6845),T=n(4978),x=n(4156),Z=n(4688),t=n(9468),A=n(7488),C=n(9080),P=n(797),y=n(3857),b=n(4093),N=n(6052),M=n(2372),D=n(9376),k=n(1768);const J=["LangSel"];function U(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"ion-item",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.go_to_page("tts-export"))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&s){const o=t.oxw();t.xp6(2),t.Oqu(o.lang.text.Settings.TTSExport)}}function O(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"ion-item",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.start_minimalserver())}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&s){const o=t.oxw(2);t.xp6(2),t.Oqu(o.lang.text.Settings.joinDediChat)}}function B(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.go_to_page("admin-tools"))}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()(),t.YNc(7,O,3,1,"ion-item",11),t.qZA()}if(2&s){const o=t.oxw();t.xp6(3),t.Oqu(o.lang.text.Settings.admin_tools),t.xp6(3),t.Oqu(o.lang.text.Settings.ServerAdmin),t.xp6(1),t.Q6J("ngIf",!o.cant_dedicated&&o.can_use_http)}}function E(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"ion-item",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.go_to_page("translator"))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&s){const o=t.oxw();t.xp6(2),t.Oqu(o.lang.text.Settings.AppTranslator)}}function F(s,d){if(1&s){const o=t.EpF();t.TgZ(0,"ion-item",6),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.open_playstore())}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&s){const o=t.oxw();t.xp6(2),t.Oqu(o.lang.text.Settings.OpenPlayStore)}}const I=[{path:"",component:(()=>{var s;class d{constructor(e,i,a,g,r,c,h,Q,H,L,K,W){this.modalCtrl=e,this.nav=i,this.statusBar=a,this.nakama=g,this.indexed=r,this.lang=c,this.noti=h,this.global=Q,this.file=H,this.p5toast=L,this.loadingCtrl=K,this.server=W,this.cant_dedicated=!1,this.can_use_http=!1,this.is_nativefier=m.bS,this.as_admin=[],this.dont_use_test_server=!1,this.availables=[],this.isAdHiding=!0,this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){("DesktopPWA"==m.n$||"MobilePWA"==m.n$)&&(this.cant_dedicated=!0),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()},this.can_use_http="http:"==window.location.protocol||m.bS,this.dont_use_test_server=!!localStorage.getItem("dont_use_test_server")}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let e=this.as_admin.length-1;e>=0;e--)this.as_admin[e].is_admin||this.as_admin.splice(e,1)}start_minimalserver(){"offline"==this.statusBar.dedicated.official.groupchat?(this.statusBar.settings.dedicatedServer="pending",this.statusBar.dedicated.official.groupchat="pending",this.server.funcs.onStart=()=>{this.statusBar.settings.dedicatedServer="online",this.statusBar.dedicated.official.groupchat="online",this.start_minimalchat("ws://127.0.0.1")},this.server.funcs.onFailed=()=>{this.statusBar.settings.dedicatedServer="missing",this.statusBar.dedicated.official.groupchat="missing",setTimeout(()=>{this.statusBar.settings.dedicatedServer="offline",this.statusBar.dedicated.official.groupchat="offline"},1500)},this.server.initialize()):this.start_minimalchat("ws://127.0.0.1")}toggle_use_test_server(){this.dont_use_test_server?localStorage.setItem("dont_use_test_server","1"):localStorage.removeItem("dont_use_test_server")}checkAdsInfo(){var e=this;return(0,p.Z)(function*(){try{let i=yield fetch(`${m.Oy}pjcone_ads/${e.lang.lang}.txt`);if(i.ok){let a=yield(yield i.blob()).text();e.indexed.saveTextFileToUserPath(a,"ads_list.txt");let g=a.split("\n");e.listAvailableAds(g)}}catch{e.indexed.loadTextFromUserPath("ads_list.txt",(a,g)=>{a&&g&&e.listAvailableAds(g.split("\n"))})}})()}listAvailableAds(e){let a,i=(new Date).getTime();this.availables.length=0;for(let r=0,c=e.length;r<c;r++){let h=e[r].split(",");Number(h[0])<i?i<Number(h[1])&&this.availables.push([Number(h[0]),Number(h[1]),h[2]]):a?Number(h[0])<a&&(a=Number(h[0])):a=Number(h[0])}let g=this.AD_Div.childNodes;this.isAdHiding=!0,g.forEach(r=>{r.remove()}),this.availables.length?this.displayRandomAds():a&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(r,c)=>{r&&c&&this.listAvailableAds(c.split("\n"))})},a-(new Date).getTime()))}displayRandomAds(){let e=Math.floor(Math.random()*this.availables.length),i=this.availables[e];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(g,r)=>{g&&r&&this.listAvailableAds(r.split("\n"))})},i[1]-(new Date).getTime());let a=document.createElement("iframe");a.id="AdFrame",a.setAttribute("src",i[2]),a.setAttribute("frameborder","0"),a.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(a)}open_link(e){window.open(e,"_system")}ionViewWillEnter(){this.profile_filter="online"==this.statusBar.settings.groupServer?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin()}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.nav.pop()};let e=[];e.push(()=>{this.dont_use_test_server=!this.dont_use_test_server,this.toggle_use_test_server()}),e.push(()=>this.go_to_page("noti-alert")),e.push(()=>this.go_to_qr_share()),e.push(()=>this.open_inapp_explorer()),e.push(()=>this.go_to_webrtc_manager()),e.push(()=>this.go_to_page("weblink-gen")),e.push(()=>this.go_to_page("qrcode-gen")),this.is_nativefier||e.push(()=>this.go_to_page("tts-export")),e.push(()=>this.go_to_page("wsclient")),e.push(()=>this.download_serverfile()),this.as_admin.length&&(!this.cant_dedicated&&this.can_use_http&&e.push(()=>this.start_minimalserver()),e.push(()=>this.go_to_page("admin-tools"))),e.push(()=>this.go_to_page("creator")),"ko"!=this.lang.lang&&e.push(()=>this.go_to_page("translator")),e.push(()=>this.LangClicked()),e.push(()=>this.go_to_page("licenses")),this.cant_dedicated&&e.push(()=>this.open_playstore()),this.global.p5key.KeyShortCut.Digit=i=>{e[i]&&e[i]()}}start_minimalchat(e){var i=this;if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:T.X,componentProps:{address:e,name:this.nakama.users.self.display_name}}).then(function(){var a=(0,p.Z)(function*(g){yield g.present(),i.lock_modal_open=!1});return function(g){return a.apply(this,arguments)}}())}}open_inapp_explorer(){this.nav.navigateForward("user-fs-dir",{animation:S.Nn})}LangClicked(){this.LangSel.open()}LanguageChanged(e){this.lang.lang=e.detail.value,this.lang.load_selected_lang()}go_to_page(e){this.nav.navigateForward(`settings/${e}`,{animation:S.Nn})}download_serverfile(){var e=this;return(0,p.Z)(function*(){if("Android"==m.n$||"iOS"==m.n$){let i=yield e.loadingCtrl.create({message:e.lang.text.TodoDetail.WIP});i.present();let a="nakama.zip",g=yield fetch("assets/data/nakama.zip").then(r=>r.blob());try{yield e.file.writeFile(e.file.externalDataDirectory,a,g),i.dismiss(),e.p5toast.show({text:e.lang.text.ContentViewer.fileSaved})}catch(r){console.log("download_serverfile: ",r);try{yield e.file.writeExistingFile(e.file.externalDataDirectory,a,g),i.dismiss(),e.p5toast.show({text:e.lang.text.ContentViewer.fileSaved})}catch(c){console.log("download_serverfile_rewrite: ",c),i.dismiss(),e.p5toast.show({text:e.lang.text.ContentViewer.fileSaveFailed})}}}else{let i=document.createElement("a");i.download="nakama.zip",i.href="assets/data/nakama.zip",document.body.appendChild(i),i.click(),document.body.removeChild(i),i.remove(),e.p5toast.show({text:e.lang.text.ContentViewer.fileSaved})}})()}go_to_qr_share(){this.modalCtrl.create({component:Z.b,componentProps:{NoReturn:!0}}).then(e=>{delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit,e.onDidDismiss().then(()=>{this.ionViewDidEnter()}),e.present()})}go_to_webrtc_manager(){this.modalCtrl.create({component:x.$}).then(e=>{delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit,e.onDidDismiss().then(()=>{this.ionViewDidEnter()}),e.present()})}open_playstore(){window.open("https://play.google.com/store/apps/details?id=org.pjcone.portal","_system")}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit}ngOnDestroy(){delete this.nakama.on_socket_disconnected.settings_admin_check,clearTimeout(this.refreshAds)}}return(s=d).\u0275fac=function(e){return new(e||s)(t.Y36(l.IN),t.Y36(l.SH),t.Y36(A.g),t.Y36(C.a),t.Y36(P.H),t.Y36(y.b),t.Y36(b.J),t.Y36(N.AN),t.Y36(M.$),t.Y36(D.F),t.Y36(l.HT),t.Y36(k.A))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-settings"]],viewQuery:function(e,i){if(1&e&&t.Gf(J,5),2&e){let a;t.iGM(a=t.CRH())&&(i.LangSel=a.first)}},decls:71,vars:26,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[3,"ngModel","ngModelChange"],["value","Devkit"],["slot","header"],["slot","content"],["button","",3,"click",4,"ngIf"],[4,"ngIf"],["name","language",1,"icon_margin"],[2,"pointer-events","none",3,"label","value","placeholder","ionChange"],["LangSel",""],["value","en"],["value","ko"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button",2),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",3)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",4),t.NdJ("click",function(){return i.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",5),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",6),t.NdJ("click",function(){return i.toggle_use_test_server()}),t.TgZ(18,"ion-toggle",7),t.NdJ("ngModelChange",function(g){return i.dont_use_test_server=g}),t._uU(19),t.qZA()(),t.TgZ(20,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("noti-alert")}),t.TgZ(21,"ion-label"),t._uU(22),t.qZA()(),t.TgZ(23,"ion-item",6),t.NdJ("click",function(){return i.go_to_qr_share()}),t.TgZ(24,"ion-label"),t._uU(25),t.qZA()(),t.TgZ(26,"ion-item",6),t.NdJ("click",function(){return i.open_inapp_explorer()}),t.TgZ(27,"ion-label"),t._uU(28),t.qZA()(),t.TgZ(29,"ion-item",6),t.NdJ("click",function(){return i.go_to_webrtc_manager()}),t.TgZ(30,"ion-label"),t._uU(31),t.qZA()(),t.TgZ(32,"ion-accordion-group")(33,"ion-accordion",8)(34,"ion-item",9)(35,"ion-label"),t._uU(36),t.qZA()(),t.TgZ(37,"div",10)(38,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("weblink-gen")}),t.TgZ(39,"ion-label"),t._uU(40),t.qZA()(),t.TgZ(41,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("qrcode-gen")}),t.TgZ(42,"ion-label"),t._uU(43),t.qZA()(),t.YNc(44,U,3,1,"ion-item",11),t.TgZ(45,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("wsclient")}),t.TgZ(46,"ion-label"),t._uU(47),t.qZA()(),t.TgZ(48,"ion-item",6),t.NdJ("click",function(){return i.download_serverfile()}),t.TgZ(49,"ion-label"),t._uU(50),t.qZA()()()()(),t.YNc(51,B,8,3,"div",12),t.TgZ(52,"ion-item-divider")(53,"ion-label"),t._uU(54),t.qZA()(),t.TgZ(55,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("creator")}),t.TgZ(56,"ion-label"),t._uU(57),t.qZA()(),t.YNc(58,E,3,1,"ion-item",11),t.TgZ(59,"ion-item",6),t.NdJ("click",function(){return i.LangClicked()}),t._UZ(60,"ion-icon",13),t.TgZ(61,"ion-select",14,15),t.NdJ("ionChange",function(g){return i.LanguageChanged(g)}),t.TgZ(63,"ion-select-option",16),t._uU(64,"English"),t.qZA(),t.TgZ(65,"ion-select-option",17),t._uU(66,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(67,"ion-item",6),t.NdJ("click",function(){return i.go_to_page("licenses")}),t.TgZ(68,"ion-label"),t._uU(69),t.qZA()(),t.YNc(70,F,3,1,"ion-item",11),t.qZA()),2&e&&(t.xp6(3),t.Oqu(i.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",i.isAdHiding),t.xp6(3),t.Oqu(i.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",i.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(i.lang.text.Settings.env_info),t.xp6(2),t.Q6J("ngModel",i.dont_use_test_server),t.xp6(1),t.hij(" ",i.lang.text.Settings.dont_use_test_server," "),t.xp6(3),t.Oqu(i.lang.text.Settings.NotificationSetting),t.xp6(3),t.Oqu(i.lang.text.Settings.quickQRshare),t.xp6(3),t.Oqu(i.lang.text.Settings.InAppExplorer),t.xp6(3),t.Oqu(i.lang.text.WebRTCDevManager.Title),t.xp6(5),t.Oqu(i.lang.text.Settings.DevKit),t.xp6(4),t.Oqu(i.lang.text.Settings.WebLinkGen),t.xp6(3),t.Oqu(i.lang.text.Settings.QRCodeGen),t.xp6(1),t.Q6J("ngIf",!i.is_nativefier),t.xp6(3),t.Oqu(i.lang.text.Settings.WSClient),t.xp6(3),t.Oqu(i.lang.text.Settings.ServerFiles),t.xp6(1),t.Q6J("ngIf",i.as_admin.length),t.xp6(3),t.Oqu(i.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(i.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=i.lang.lang),t.xp6(3),t.Q6J("label",i.lang.text.Settings.AppLanguage)("value",i.lang.lang)("placeholder",i.lang.lang),t.xp6(8),t.Oqu(i.lang.text.Settings.LicenseNotice),t.xp6(1),t.Q6J("ngIf",i.cant_dedicated))},dependencies:[_.O5,u.JJ,u.On,l.We,l.eh,l.oU,l.YG,l.Sm,l.W2,l.Gu,l.gu,l.Ie,l.rH,l.Q$,l.t9,l.n0,l.wd,l.ho,l.sr,l.w,l.QI,l.cs],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}.img_icon_size[_ngcontent-%COMP%]{width:21px;height:21px;margin-right:16px}.icon_margin[_ngcontent-%COMP%]{margin-right:16px}"]}),d})()},{path:"licenses",loadChildren:()=>n.e(8944).then(n.bind(n,8944)).then(s=>s.LicensesPageModule)},{path:"group-server",loadChildren:()=>n.e(2503).then(n.bind(n,2503)).then(s=>s.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([n.e(6146),n.e(2098)]).then(n.bind(n,2098)).then(s=>s.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>n.e(4970).then(n.bind(n,4970)).then(s=>s.GroupDetailPageModule)},{path:"translator",loadChildren:()=>n.e(7661).then(n.bind(n,7661)).then(s=>s.TranslatorPageModule)},{path:"creator",loadChildren:()=>n.e(7178).then(n.bind(n,7178)).then(s=>s.CreatorPageModule)},{path:"qr-share",loadChildren:()=>n.e(8732).then(n.bind(n,8732)).then(s=>s.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>n.e(4622).then(n.bind(n,4622)).then(s=>s.NotiAlertPageModule)},{path:"admin-tools",loadChildren:()=>n.e(5229).then(n.bind(n,5229)).then(s=>s.AdminToolsPageModule)},{path:"qrcode-gen",loadChildren:()=>n.e(318).then(n.bind(n,318)).then(s=>s.QrcodeGenPageModule)},{path:"wsclient",loadChildren:()=>n.e(5174).then(n.bind(n,5174)).then(s=>s.WsclientPageModule)},{path:"weblink-gen",loadChildren:()=>n.e(8821).then(n.bind(n,8821)).then(s=>s.WeblinkGenPageModule)},{path:"tts-export",loadChildren:()=>Promise.all([n.e(8592),n.e(4595)]).then(n.bind(n,4595)).then(s=>s.TtsExportPageModule)}];let Y=(()=>{var s;class d{}return(s=d).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[v.Bz.forChild(I),v.Bz]}),d})(),G=(()=>{var s;class d{}return(s=d).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[_.ez,u.u5,l.Pc,Y]}),d})()}}]);