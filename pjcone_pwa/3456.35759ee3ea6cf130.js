"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3456],{3456:(T,h,o)=>{o.r(h),o.d(h,{ServerDetailPageModule:()=>F});var p=o(177),f=o(4341),l=o(5374),c=o(9858),v=o(467),_=o(92),e=o(3953),m=o(4234),D=o(9900),y=o(8065),C=o(755),j=o(4237),k=o(482),M=o(3656);const P=["ServerDetailuseSSL"];function b(n,g){if(1&n){const s=e.RV6();e.j41(0,"img",15),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.copy_startup_address())}),e.k0s()}if(2&n){const s=e.XpG();e.Y8G("src",s.QRCodeSRC,e.B4B)}}const R=[{path:"",component:(()=>{var n;class g{constructor(i,t,d,r,a,u,S,G,L){this.lang=i,this.p5toast=t,this.statusBar=d,this.indexed=r,this.nakama=a,this.global=u,this.route=S,this.router=G,this.navCtrl=L,this.isTargetAlreadyExist=!0,this.index=0}ngOnDestroy(){this.route.queryParams.unsubscribe(),this.global.PageDismissAct["quick-server-detail"]&&this.global.PageDismissAct["quick-server-detail"]()}ngOnInit(){this.route.queryParams.subscribe(i=>{const t=this.router.getCurrentNavigation().extras.state;this.dedicated_info=t.data}),this.FilteredInfo={name:this.dedicated_info.name,address:this.dedicated_info.address,port:this.dedicated_info.port,key:this.dedicated_info.key,useSSL:this.dedicated_info.useSSL},"192.168.0.1"==this.dedicated_info.address&&delete this.FilteredInfo.address,"defaultkey"==this.dedicated_info.key&&delete this.FilteredInfo.key,7350==this.dedicated_info.port&&delete this.FilteredInfo.port,this.dedicated_info.useSSL||delete this.FilteredInfo.useSSL,this.QRCodeSRC=this.global.readasQRCodeFromString(`${_.d2}pjcone_pwa/?server=${this.FilteredInfo.name||""},${this.FilteredInfo.address||""},${this.FilteredInfo.useSSL?"true":""},${this.FilteredInfo.port||""},${this.FilteredInfo.key||""}`),this.isTargetAlreadyExist=!!this.statusBar.groupServer.unofficial[this.dedicated_info.target]}ionViewDidEnter(){this.ServerDetailuseSSL.checked=this.dedicated_info.useSSL,this.global.p5KeyShortCut.Escape=()=>{this.navCtrl.pop()}}copy_startup_address(){this.global.WriteValueToClipboard("text/plain",`${_.d2}pjcone_pwa/?server=${this.FilteredInfo.name||""},${this.FilteredInfo.address||""},${this.FilteredInfo.useSSL?"true":""},${this.FilteredInfo.port||""},${this.FilteredInfo.key||""}`)}apply_changed_info(){var i=this;return(0,v.A)(function*(){if(!i.dedicated_info.name)return void i.p5toast.show({text:i.lang.text.GroupServer.NeedSetDIsplayName});i.dedicated_info.target=i.dedicated_info.target||i.dedicated_info.name,i.dedicated_info.address=i.dedicated_info.address||"192.168.0.1",i.dedicated_info.port=i.dedicated_info.port||7350,i.dedicated_info.useSSL=i.ServerDetailuseSSL.checked||!1,i.dedicated_info.isOfficial=i.dedicated_info.isOfficial||"unofficial",i.dedicated_info.key=i.dedicated_info.key||"defaultkey";let t=(new Date).getTime().toString();t+=`,${i.dedicated_info.isOfficial}`,t+=`,${i.dedicated_info.name}`,t+=`,${i.dedicated_info.target}`,t+=`,${i.dedicated_info.address}`,t+=`,${i.dedicated_info.port}`,t+=`,${i.dedicated_info.useSSL}`;let d=yield i.indexed.loadTextFromUserPath("servers/list_detail.csv"),r=[];if(d&&(r=d.split("\n")),i.isTargetAlreadyExist)for(let a=0,u=r.length;a<u;a++)if(r[a].split(",")[3]==i.dedicated_info.target){r.splice(a,1);break}r.push(t),yield i.indexed.saveTextFileToUserPath(r.join("\n"),"servers/list_detail.csv"),i.nakama.init_server(i.dedicated_info),i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].info={...i.dedicated_info};try{i.nakama.servers[i.dedicated_info.isOfficial][i.dedicated_info.target].socket.disconnect(!0)}catch{}i.global.PageDismissAct["quick-server-detail"]&&i.global.PageDismissAct["quick-server-detail"](),i.navCtrl.pop()})()}ionViewWillLeave(){delete this.global.p5KeyShortCut.Escape}}return(n=g).\u0275fac=function(i){return new(i||n)(e.rXU(m.y),e.rXU(D.G),e.rXU(y.j),e.rXU(C.n),e.rXU(j.X),e.rXU(k.z3),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(M.q9))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-server-detail"]],viewQuery:function(i,t){if(1&i&&e.GBs(P,5),2&i){let d;e.mGM(d=e.lsd())&&(t.ServerDetailuseSSL=d.first)}},decls:32,vars:19,consts:[["ServerDetailuseSSL",""],[1,"ion-no-border"],["slot","start"],["defaultHref",""],["style","width: 100%; height: auto; cursor: copy;","alt","Loading",3,"src","click",4,"ngIf"],["button",""],[1,"ion-text-right",3,"ngModelChange","label","ngModel","placeholder"],["button","",3,"disabled"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModelChange","label","ngModel"],["slot","end","name","open-outline",3,"click"],["placeholder","defaultkey",1,"ion-text-right",3,"ngModelChange","label","ngModel"],["type","number","placeholder","7350",1,"ion-text-right",3,"ngModelChange","label","ngModel"],["button","",3,"click"],[2,"pointer-events","none",3,"ngModelChange","ngModel"],[1,"ion-text-center"],["alt","Loading",2,"width","100%","height","auto","cursor","copy",3,"click","src"]],template:function(i,t){if(1&i){const d=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",2),e.nrm(5,"ion-back-button",3),e.k0s()()(),e.j41(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.EFF(9),e.k0s()(),e.DNE(10,b,1,1,"img",4),e.j41(11,"ion-item-divider")(12,"ion-label"),e.EFF(13,"\uc11c\ubc84 \uc124\uc815"),e.k0s()(),e.j41(14,"ion-item",5)(15,"ion-input",6),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.name,a)||(t.dedicated_info.name=a),e.Njj(a)}),e.k0s()(),e.j41(16,"ion-item",7)(17,"ion-input",6),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.target,a)||(t.dedicated_info.target=a),e.Njj(a)}),e.k0s()(),e.j41(18,"ion-item",5)(19,"ion-input",8),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.address,a)||(t.dedicated_info.address=a),e.Njj(a)}),e.k0s(),e.j41(20,"ion-icon",9),e.bIt("click",function(){return e.eBV(d),e.Njj(t.global.open_custom_site(t.dedicated_info.address))}),e.k0s()(),e.j41(21,"ion-item",5)(22,"ion-input",10),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.key,a)||(t.dedicated_info.key=a),e.Njj(a)}),e.k0s()(),e.j41(23,"ion-item",5)(24,"ion-input",11),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.port,a)||(t.dedicated_info.port=a),e.Njj(a)}),e.k0s()(),e.j41(25,"ion-item",12),e.bIt("click",function(){return e.eBV(d),e.Njj(t.dedicated_info.useSSL=!t.dedicated_info.useSSL)}),e.j41(26,"ion-toggle",13,0),e.mxI("ngModelChange",function(a){return e.eBV(d),e.DH7(t.dedicated_info.useSSL,a)||(t.dedicated_info.useSSL=a),e.Njj(a)}),e.EFF(28),e.k0s()(),e.j41(29,"ion-item",12),e.bIt("click",function(){return e.eBV(d),e.Njj(t.apply_changed_info())}),e.j41(30,"ion-label",14),e.EFF(31),e.k0s()()()}2&i&&(e.R7$(3),e.JRh(t.lang.text.GroupServer.ServerDetail),e.R7$(6),e.JRh(t.lang.text.ServerDetail.copy_scan_below),e.R7$(),e.Y8G("ngIf",t.QRCodeSRC),e.R7$(5),e.Y8G("label",t.lang.text.GroupServer.DisplayName),e.R50("ngModel",t.dedicated_info.name),e.Y8G("placeholder",t.lang.text.GroupServer.DisplayName_placeholder),e.R7$(),e.Y8G("disabled",t.isTargetAlreadyExist),e.R7$(),e.Y8G("label",t.lang.text.GroupServer.DivisionName),e.R50("ngModel",t.dedicated_info.target),e.Y8G("placeholder",t.dedicated_info.name||t.lang.text.GroupServer.DivisionName_placeholder),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Address),e.R50("ngModel",t.dedicated_info.address),e.R7$(3),e.Y8G("label",t.lang.text.GroupServer.Key),e.R50("ngModel",t.dedicated_info.key),e.R7$(2),e.Y8G("label",t.lang.text.GroupServer.Port),e.R50("ngModel",t.dedicated_info.port),e.R7$(2),e.R50("ngModel",t.dedicated_info.useSSL),e.R7$(2),e.JRh(t.lang.text.GroupServer.isSSL),e.R7$(3),e.JRh(t.lang.text.ServerDetail.ApplyChangeServerInfo))},dependencies:[p.bT,f.BC,f.vS,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.Dg,l.he,l.BC,l.BY,l.ai,l.hB,l.su,l.Gw,l.el],styles:[".icon_style[_ngcontent-%COMP%]{width:22px;height:22px;transform:translateY(2px);margin-left:4px;margin-right:4px}"]}),g})()}];let I=(()=>{var n;class g{}return(n=g).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[c.iI.forChild(R),c.iI]}),g})(),F=(()=>{var n;class g{}return(n=g).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.MD,f.YN,l.bv,I]}),g})()}}]);