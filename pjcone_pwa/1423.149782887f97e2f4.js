"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1423],{1423:(U,r,l)=>{l.r(r),l.d(r,{ToolManagementPageModule:()=>A});var g=l(9808),m=l(4182),a=l(3996),d=l(9705),u=l(655),x=l(5016),t=l(9863),_=l(3496),h=l(5742),f=l(3336),T=l(1282);function p(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"ion-button",6),t.NdJ("click",function(){t.CHM(o);const s=t.oxw().index;return t.oxw(2).remove_local_tool(s)}),t._uU(1),t.qZA()}if(2&e){const o=t.oxw(3);t.xp6(1),t.hij(" ",o.lang.text.ToolManager.Sync," ")}}function v(e,i){if(1&e&&(t.TgZ(0,"ion-item",4)(1,"ion-label"),t._uU(2),t.qZA(),t.YNc(3,p,2,1,"ion-button",5),t.qZA()),2&e){const o=i.$implicit;t.xp6(2),t.Oqu(o.text),t.xp6(1),t.Q6J("ngIf",!o.toggle)}}function M(e,i){if(1&e&&(t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.YNc(4,v,4,2,"ion-item",3),t.qZA()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.lang.text.ToolManager.Official),t.xp6(1),t.Q6J("ngForOf",o.list_local)}}function P(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"ion-item",4)(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-button",7),t.NdJ("click",function(){const c=t.CHM(o).index;return t.oxw(2).redownload_tool(c)}),t._uU(4),t.qZA(),t.TgZ(5,"ion-button",6),t.NdJ("click",function(){const c=t.CHM(o).index;return t.oxw(2).remove_tool(c)}),t._uU(6),t.qZA()()}if(2&e){const o=i.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(o.text),t.xp6(1),t.Q6J("disabled",o.toggle),t.xp6(1),t.hij(" ",n.lang.text.ToolManager.Redownload," "),t.xp6(2),t.hij(" ",n.lang.text.ToolManager.removeTool," ")}}function b(e,i){if(1&e&&(t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.YNc(4,P,7,4,"ion-item",3),t.qZA()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.lang.text.ToolManager.Unofficial),t.xp6(1),t.Q6J("ngForOf",o.list)}}const Z=[{path:"",component:(()=>{class e{constructor(o,n,s,c){this.indexed=o,this.lang=n,this.p5toast=s,this.global=c,this.list=[],this.list_local=[]}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){(yield this.indexed.GetFileListFromDB("acts/")).forEach(n=>{let s=n.substring(5);0==s.indexOf("local/")?this.list_local.push({text:s.substring(6),toggle:!1}):this.list.push({text:s,toggle:!1})})})}redownload_tool(o){return(0,u.mG)(this,void 0,void 0,function*(){try{this.list[o].toggle=!0;let n=yield fetch(`${x.Oy}pjcone_pck/${this.list[o].text}`);if(!n.ok)throw"\uc5c6\ub294 \ud234\uc774\ub77c\uace0 \ud310\ub2e8\ub429\ub2c8\ub2e4.";{let s=yield n.blob(),c=yield this.global.GetBase64ThroughFileReader(s);this.indexed.saveFileToUserPath(c,`acts/${this.list[o].text}`,()=>{this.list[o].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadSucc}: ${this.list[o].text}`})})}}catch(n){console.log(n),this.list[o].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadFailed}: ${this.list[o].text}`})}})}remove_tool(o){this.indexed.removeFileFromUserPath(`acts/${this.list[o].text}`),this.list.splice(o,1)}remove_local_tool(o){this.indexed.removeFileFromUserPath(`acts_local/${this.list_local[o].text}`),this.list_local[o].toggle=!0,this.p5toast.show({text:`${this.lang.text.ToolManager.SyncWell}: ${this.list_local[o].text}`})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.H),t.Y36(h.b),t.Y36(f.F),t.Y36(T.A))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tool-management"]],decls:9,vars:3,consts:[["slot","start"],["defaultHref","settings"],[4,"ngIf"],["button","",4,"ngFor","ngForOf"],["button",""],[3,"click",4,"ngIf"],[3,"click"],[3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content"),t.YNc(7,M,5,2,"div",2),t.YNc(8,b,5,2,"div",2),t.qZA()),2&o&&(t.xp6(3),t.Oqu(n.lang.text.Settings.PluginList),t.xp6(4),t.Q6J("ngIf",n.list_local.length),t.xp6(1),t.Q6J("ngIf",n.list.length))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.oU,a.cs,a.W2,g.O5,a.rH,a.Q$,g.sg,a.Ie,a.YG],styles:[""]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(Z)],d.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,m.u5,a.Pc,F]]}),e})()}}]);