"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(Y,u,i)=>{i.r(u),i.d(u,{SettingsPageModule:()=>_});var p=i(9808),m=i(4182),s=i(3996),f=i(9705),S=i(655),T=i(4464),c=i(5016),v=i(2722),Z=i(7898),t=i(9863),A=i(4606),P=i(9912),x=i(3496),C=i(9040),y=i(5742),N=i(8677),U=i(1282);const b=["LangSel"];function O(a,g){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().setDisableBatteryOptimizations()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(n.lang.text.Settings.batteryOptimization)}}function M(a,g){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("dedicated-settings")}),t._UZ(1,"div",9),t.TgZ(2,"ion-label",10),t._uU(3),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(1),t.Akn("background-color: "+n.statusBar.colors[n.statusBar.settings.dedicatedServer||"offline"]),t.xp6(2),t.Oqu(n.lang.text.Settings.useDeviceAsServer)}}function J(a,g){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("admin-tools")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(2),t.Oqu(n.lang.text.Settings.admin_tools)}}function B(a,g){if(1&a){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().go_to_page("translator")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(2),t.Oqu(n.lang.text.Settings.AppTranslator)}}const k=[{path:"",component:(()=>{class a{constructor(n,e,o,r,l,h,d,I,Q,F){this.modalCtrl=n,this.nav=e,this.statusBar=o,this.nakama=r,this.indexed=l,this.bgmode=h,this.lang=d,this.noti=I,this.app=Q,this.ngZone=F,this.cant_dedicated=!1,this.as_admin=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==c.n$||"MobilePWA"==c.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(n,e)=>{n&&e&&(this.nakama.users.self.img=e.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=Boolean(localStorage.getItem("ShowDisableBatteryOptimizations")),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()}}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let n=this.as_admin.length-1;n>=0;n--)this.as_admin[n].is_admin||this.as_admin.splice(n,1)}checkAdsInfo(){return(0,S.mG)(this,void 0,void 0,function*(){try{let n=yield fetch(`${c.Oy}pjcone_ads/${this.lang.lang}.txt`);if(n.ok){let e=yield(yield n.blob()).text();this.indexed.saveTextFileToUserPath(e,"ads_list.txt");let o=e.split("\n");this.listAvailableAds(o)}}catch(n){console.log(n),this.indexed.loadTextFromUserPath("ads_list.txt",(e,o)=>{e&&o&&this.listAvailableAds(o.split("\n"))})}})}listAvailableAds(n){let o,e=(new Date).getTime();this.availables.length=0;for(let l=0,h=n.length;l<h;l++){let d=n[l].split(",");Number(d[0])<e?e<Number(d[1])&&this.availables.push([Number(d[0]),Number(d[1]),d[2]]):o?Number(d[0])<o&&(o=Number(d[0])):o=Number(d[0])}let r=this.AD_Div.childNodes;this.isAdHiding=!0,r.forEach(l=>{l.remove()}),this.availables.length?this.displayRandomAds():o&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(l,h)=>{l&&h&&this.listAvailableAds(h.split("\n"))})},o-(new Date).getTime()))}displayRandomAds(){let n=Math.floor(Math.random()*this.availables.length),e=this.availables[n];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(r,l)=>{r&&l&&this.listAvailableAds(l.split("\n"))})},e[1]-(new Date).getTime());let o=document.createElement("iframe");o.id="AdFrame",o.setAttribute("src",e[2]),o.setAttribute("frameborder","0"),o.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(o)}open_link(n){window.open(n,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.profile_filter=this.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin()}start_minimalchat(n){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[n?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:v.X,componentProps:{address:n,name:this.nakama.users.self.display_name}}).then(e=>{e.present(),this.lock_modal_open=!1})}}open_inapp_explorer(){this.modalCtrl.create({component:Z.P}).then(n=>n.present())}LangClicked(){this.LangSel.open()}LanguageChanged(n){this.lang.lang=n.detail.value,this.lang.load_selected_lang()}go_to_page(n){this.nav.navigateForward(`settings/${n}`,{animation:T.Nn})}ngOnDestroy(){delete this.nakama.users.self.img,delete this.nakama.on_socket_disconnected.settings_admin_check,clearTimeout(this.refreshAds),this.app.CreateGodotIFrame("todo",{local_url:"assets/data/godot/todo.pck",title:"Todo",add_todo_menu:n=>{this.ngZone.run(()=>{this.nav.navigateForward("add-todo-menu",{animation:T.pg,state:{data:n}})})}})}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(s.IN),t.Y36(s.SH),t.Y36(A.g),t.Y36(P.a),t.Y36(x.H),t.Y36(C.z),t.Y36(y.b),t.Y36(N.J),t.Y36(U.A),t.Y36(t.R0b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-settings"]],viewQuery:function(n,e){if(1&n&&t.Gf(b,5),2&n){let o;t.iGM(o=t.CRH())&&(e.LangSel=o.first)}},decls:77,vars:37,consts:[["slot","start"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],[4,"ngIf"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["button","",3,"click",4,"ngIf"],["button","",3,"disabled"],[1,"ion-text-center",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["button","",3,"disabled","click"],["slot","start","name","language"],[2,"pointer-events","none",3,"value","placeholder","ionChange"],["LangSel",""],["value","en"],["value","ko"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return e.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("profile")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t.TgZ(20,"ion-label"),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("noti-alert")}),t.TgZ(23,"ion-label"),t._uU(24),t.qZA()(),t.YNc(25,O,4,1,"div",8),t.TgZ(26,"ion-item-divider")(27,"ion-label"),t._uU(28),t.qZA()(),t.TgZ(29,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("group-server")}),t._UZ(30,"div",9),t.TgZ(31,"ion-label",10),t._uU(32),t.qZA()(),t.YNc(33,M,4,3,"ion-item",11),t.TgZ(34,"ion-item",12),t._UZ(35,"div",9),t.TgZ(36,"ion-label",10),t._uU(37),t.qZA(),t.TgZ(38,"ion-input",13),t.NdJ("ngModelChange",function(r){return e.chat_address=r}),t.qZA(),t.TgZ(39,"ion-button",14),t.NdJ("click",function(){return e.start_minimalchat(e.chat_address?"ws://"+e.chat_address:"ws://127.0.0.1")}),t._uU(40),t.qZA()(),t.TgZ(41,"ion-item",15),t.NdJ("click",function(){return e.go_to_page("qr-share")}),t.TgZ(42,"ion-label"),t._uU(43),t.qZA()(),t.TgZ(44,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("qrcode-gen")}),t.TgZ(45,"ion-label"),t._uU(46),t.qZA()(),t.TgZ(47,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("wsclient")}),t.TgZ(48,"ion-label"),t._uU(49),t.qZA()(),t.TgZ(50,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("engineppt")}),t.TgZ(51,"ion-label"),t._uU(52),t.qZA()(),t.TgZ(53,"ion-item",5),t.NdJ("click",function(){return e.open_inapp_explorer()}),t.TgZ(54,"ion-label"),t._uU(55),t.qZA()(),t.YNc(56,J,3,1,"ion-item",11),t.TgZ(57,"ion-item-divider")(58,"ion-label"),t._uU(59),t.qZA()(),t.TgZ(60,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("creator")}),t.TgZ(61,"ion-label"),t._uU(62),t.qZA()(),t.YNc(63,B,3,1,"ion-item",11),t.TgZ(64,"ion-item",5),t.NdJ("click",function(){return e.LangClicked()}),t._UZ(65,"ion-icon",16),t.TgZ(66,"ion-label"),t._uU(67),t.qZA(),t.TgZ(68,"ion-select",17,18),t.NdJ("ionChange",function(r){return e.LanguageChanged(r)}),t.TgZ(70,"ion-select-option",19),t._uU(71,"English"),t.qZA(),t.TgZ(72,"ion-select-option",20),t._uU(73,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(74,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("licenses")}),t.TgZ(75,"ion-label"),t._uU(76),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(e.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",e.isAdHiding),t.xp6(3),t.Oqu(e.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",e.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(e.lang.text.Settings.env_info),t.xp6(3),t.Akn(e.profile_filter),t.Q6J("src",e.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(e.lang.text.Settings.myInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.NotificationSetting),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated&&!e.isBatteryOptimizationsShowed),t.xp6(3),t.Oqu(e.lang.text.Settings.ServerNTools),t.xp6(2),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.groupServer||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.groupServer),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated),t.xp6(1),t.Q6J("disabled",e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.dedicated_groupchat||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinDediChat),t.xp6(1),t.Q6J("placeholder",e.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",e.chat_address),t.xp6(2),t.hij(" ",e.lang.text.Settings.joinDedi_button," "),t.xp6(1),t.Q6J("disabled","offline"==e.statusBar.settings.groupServer),t.xp6(2),t.Oqu(e.lang.text.Settings.quickQRshare),t.xp6(3),t.Oqu(e.lang.text.Settings.QRCodeGen),t.xp6(3),t.Oqu(e.lang.text.Settings.WSClient),t.xp6(3),t.Oqu(e.lang.text.Settings.EnginePPT),t.xp6(3),t.Oqu(e.lang.text.Settings.InAppExplorer),t.xp6(1),t.Q6J("ngIf",e.as_admin.length),t.xp6(3),t.Oqu(e.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=e.lang.lang),t.xp6(4),t.Oqu(e.lang.text.Settings.AppLanguage),t.xp6(1),t.Q6J("value",e.lang.lang)("placeholder",e.lang.lang),t.xp6(8),t.Oqu(e.lang.text.Settings.LicenseNotice))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.oU,s.cs,s.W2,s.rH,s.Q$,s.YG,s.Ie,p.O5,s.pK,s.j9,m.JJ,m.On,s.gu,s.t9,s.QI,s.n0],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}"]}),a})()},{path:"licenses",loadChildren:()=>i.e(4189).then(i.bind(i,4189)).then(a=>a.LicensesPageModule)},{path:"profile",loadChildren:()=>i.e(3774).then(i.bind(i,3774)).then(a=>a.ProfilePageModule)},{path:"dedicated-settings",loadChildren:()=>i.e(1420).then(i.bind(i,1420)).then(a=>a.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>Promise.all([i.e(4896),i.e(9666)]).then(i.bind(i,9666)).then(a=>a.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([i.e(8592),i.e(160)]).then(i.bind(i,160)).then(a=>a.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>i.e(6167).then(i.bind(i,6167)).then(a=>a.GroupDetailPageModule)},{path:"translator",loadChildren:()=>i.e(747).then(i.bind(i,747)).then(a=>a.TranslatorPageModule)},{path:"creator",loadChildren:()=>i.e(3742).then(i.bind(i,3742)).then(a=>a.CreatorPageModule)},{path:"qr-share",loadChildren:()=>i.e(6250).then(i.bind(i,6250)).then(a=>a.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>i.e(6886).then(i.bind(i,6886)).then(a=>a.NotiAlertPageModule)},{path:"engineppt",loadChildren:()=>i.e(6526).then(i.bind(i,6526)).then(a=>a.EnginepptPageModule)},{path:"admin-tools",loadChildren:()=>i.e(9471).then(i.bind(i,9471)).then(a=>a.AdminToolsPageModule)},{path:"qrcode-gen",loadChildren:()=>i.e(7368).then(i.bind(i,7368)).then(a=>a.QrcodeGenPageModule)},{path:"wsclient",loadChildren:()=>i.e(4454).then(i.bind(i,4454)).then(a=>a.WsclientPageModule)}];let D=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[f.Bz.forChild(k)],f.Bz]}),a})(),_=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,m.u5,s.Pc,D]]}),a})()}}]);