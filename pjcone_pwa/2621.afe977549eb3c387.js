"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2621],{2621:(lt,A,m)=>{m.r(A),m.d(A,{AddTodoMenuPageModule:()=>nt});var b=m(9808),v=m(4182),h=m(3996),T=m(9705),_=m(655),k=m(6505),D=m(774),I=m(9912),g=m(5016),x=m(9805),C=m(5087),t=m(9863),M=m(5742),O=m(3336),Z=m(2313),P=m(3496),S=m(8677),U=m(4606),F=m(1282),J=m(5129);const q=["StartCalendar"],N=["Calendar"],j=["StoreAt"],W=["ImporantSel"];function $(l,c){if(1&l&&(t.TgZ(0,"ion-select-option",36),t._uU(1),t.qZA()),2&l){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e.name," ")}}function L(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-item",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().StoreAtSelClicked()}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-select",32,33),t.NdJ("ionChange",function(a){return t.CHM(e),t.oxw().StoreAtSelChanged(a)}),t.TgZ(5,"ion-select-option",34),t._uU(6),t.qZA(),t.YNc(7,$,2,2,"ion-select-option",35),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(2),t.Oqu(e.lang.text.TodoDetail.StoreAt),t.xp6(4),t.Oqu(e.lang.text.TodoDetail.OnThisDevice),t.xp6(1),t.Q6J("ngForOf",e.AvailableStorageList)}}function B(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"ion-item")(2,"ion-label",37),t._uU(3),t.qZA(),t.TgZ(4,"ion-label",38),t._uU(5),t.qZA()(),t.TgZ(6,"ion-grid",39)(7,"ion-row")(8,"ion-col",40)(9,"ion-item",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().doneTodo()}),t.TgZ(10,"ion-label",42),t._uU(11),t.qZA()()()()()()}if(2&l){const e=t.oxw();t.xp6(3),t.Oqu(e.userInput.display_store),t.xp6(2),t.Oqu(e.userInput.display_creator),t.xp6(4),t.Q6J("disabled",!e.isModifiable||e.isButtonClicked),t.xp6(2),t.Oqu(e.lang.text.TodoDetail.TodoComplete)}}function G(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-checkbox",47),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.todo_checked=a}),t.qZA()()}if(2&l){const e=c.$implicit;t.xp6(2),t.Oqu(e.display_name),t.xp6(1),t.Q6J("ngModel",e.todo_checked)}}function H(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-accordion",36)(1,"ion-item",44)(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-list",45)(5,"ion-item",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).toggle_all_user(s.id)}),t.TgZ(6,"ion-label"),t._uU(7),t.qZA()(),t.YNc(8,G,4,2,"ion-item",24),t.qZA()()}if(2&l){const e=c.$implicit,i=t.oxw(2);t.Q6J("value",e.id),t.xp6(3),t.Oqu(e.name),t.xp6(4),t.Oqu(i.lang.text.TodoDetail.ToggleWorkers),t.xp6(1),t.Q6J("ngForOf",i.AvailableWorker[e.id])}}function Q(l,c){if(1&l&&(t.TgZ(0,"div")(1,"ion-accordion-group",null,43)(3,"ion-accordion")(4,"ion-item",44)(5,"ion-label"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-list",45)(8,"ion-accordion-group",null,46),t.YNc(10,H,9,4,"ion-accordion",35),t.qZA()()()()()),2&l){const e=t.oxw();t.xp6(6),t.Oqu(e.lang.text.TodoDetail.ManageWorker),t.xp6(4),t.Q6J("ngForOf",e.WorkerGroups)}}function Y(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-item",50)(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-checkbox",47),t.NdJ("ngModelChange",function(a){return t.CHM(e).$implicit.todo_done=a}),t.qZA()()}if(2&l){const e=c.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngModel",e.todo_done)}}function E(l,c){if(1&l&&(t.TgZ(0,"div")(1,"ion-accordion-group",null,43)(3,"ion-accordion")(4,"ion-item",44)(5,"ion-label"),t._uU(6),t.qZA(),t.TgZ(7,"ion-label",48),t._uU(8),t.qZA()(),t.TgZ(9,"ion-list",45),t.YNc(10,Y,4,2,"ion-item",49),t.qZA()()()()),2&l){const e=t.oxw();t.xp6(6),t.Oqu(e.lang.text.TodoDetail.ManageWorker),t.xp6(2),t.Oqu(e.worker_done+" / "+e.userInput.workers.length),t.xp6(2),t.Q6J("ngForOf",e.userInput.workers)}}function R(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-label",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggle_custom_color()}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw();t.xp6(1),t.Oqu(e.lang.text.TodoDetail.SetCustomColor)}}function z(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggle_custom_color()}),t._uU(2),t.qZA(),t.TgZ(3,"input",53),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().userInput.custom_color=a}),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(2),t.hij(" ",e.lang.text.TodoDetail.remove," "),t.xp6(1),t.Q6J("ngModel",e.userInput.custom_color)}}function V(l,c){if(1&l&&t._UZ(0,"img",57),2&l){const e=t.oxw(2).$implicit;t.Q6J("src",e.thumbnail,t.LSH)("alt",e.filename)}}function K(l,c){if(1&l&&(t.TgZ(0,"ion-item",17)(1,"ion-label",37),t._uU(2),t.qZA()()),2&l){const e=t.oxw(3);t.xp6(2),t.Oqu(e.lang.text.TodoDetail.open_content_viewer)}}function X(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"div",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index;return t.oxw().open_content_viewer(a)}),t.YNc(1,V,1,2,"img",55),t.YNc(2,K,3,1,"ion-item",56),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.thumbnail),t.xp6(1),t.Q6J("ngIf",!e.thumbnail)}}function tt(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"ion-item")(2,"ion-label",54),t._uU(3),t.qZA(),t.TgZ(4,"ion-button",31),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().remove_attach(s)}),t._uU(5),t.qZA()(),t.YNc(6,X,3,2,"div",8),t.qZA()}if(2&l){const e=c.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.filename),t.xp6(2),t.hij(" ",i.lang.text.TodoDetail.delete_attach," "),t.xp6(1),t.Q6J("ngIf",e.viewer)}}function et(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"ion-button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().from_camera()}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.lang.text.TodoDetail.camera," ")}}function it(l,c){if(1&l){const e=t.EpF();t.TgZ(0,"td")(1,"ion-button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteData()}),t._uU(2),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.isModifiable||e.isButtonClicked),t.xp6(1),t.hij(" ",e.lang.text.TodoDetail.remove," ")}}const at=[{path:"",component:(()=>{class l{constructor(e,i,a,s,r,o,n,u,d,p,f,y,w,ot,rt){this.route=e,this.router=i,this.modalCtrl=a,this.lang=s,this.p5toast=r,this.sanitizer=o,this.indexed=n,this.nakama=u,this.alertCtrl=d,this.noti=p,this.statusBar=f,this.loadingCtrl=y,this.global=w,this.camera=ot,this.navCtrl=rt,this.userInput={id:void 0,storeAt:"local",display_store:"",title:void 0,create_at:void 0,written:void 0,startFrom:void 0,limit:void 0,custom_color:void 0,workers:void 0,importance:"0",description:void 0,remote:void 0,display_creator:void 0,attach:[],done:void 0,is_focus:void 0,noti_id:void 0},this.buttonDisplay={saveTodo:this.lang.text.TodoDetail.buttonDisplay_add},this.AmICreator=!0,this.isModify=!1,this.isModifiable=!1,this.isStartCalendarHidden=!0,this.isCalendarHidden=!0,this.isLimitChangable=!1,this.normal_color="#888b",this.alert_color="#0bbb",this.AlertLerpStartFrom=.8,this.file_sel_id="",this.AvailableStorageList=[],this.isManager=!1,this.AvailableWorker={},this.WorkerGroups=[],this.toggle_logs={},this.worker_done=0,this.isButtonClicked=!1}ngOnInit(){this.can_cordova="Android"==g.n$||"iOS"==g.n$,this.nakama.removeBanner(),this.route.queryParams.subscribe(e=>{const i=this.router.getCurrentNavigation().extras.state;i&&(this.received_data=i.data)}),this.nakama.AddTodoLinkAct=e=>(0,_.mG)(this,void 0,void 0,function*(){this.nakama.removeBanner(),this.p5timer.remove(),this.received_data=e,this.userInput=JSON.parse(this.received_data),yield this.ionViewWillEnter(),this.show_count_timer()}),"DesktopPWA"==g.n$&&setTimeout(()=>{this.CreateDrop()},0)}CreateDrop(){let e=document.getElementById("p5Drop_todo");this.p5canvas=new k(i=>{i.setup=()=>{let a=i.createCanvas(e.clientWidth,e.clientHeight);a.parent(e),a.drop(s=>(0,_.mG)(this,void 0,void 0,function*(){yield this.selected_blobFile_callback_act(s.file)}))},i.mouseMoved=a=>{e.style.pointerEvents=a.dataTransfer?"all":"none"}})}selected_blobFile_callback_act(e){return(0,_.mG)(this,void 0,void 0,function*(){let i=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});i.present();let a={};a.filename=e.name,a.file_ext=e.name.substring(e.name.lastIndexOf(".")+1),a.size=e.size,a.type=e.type,a.path=`tmp_files/todo/${a.filename}`,a.blob=e,a.content_related_creator=[{timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"loaded"}],a.content_creator={timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"loaded"};let s=!1;s=yield this.indexed.checkIfFileExist(a.path),this.userInput.id&&!s&&(s=yield this.indexed.checkIfFileExist(`todo/${this.userInput.id}/${a.filename}`)),s&&(a.filename=`${a.filename.substring(0,a.filename.lastIndexOf("."))}_.${a.file_ext}`),this.global.set_viewer_category(a);let r=URL.createObjectURL(e);"image"==a.viewer&&(a.thumbnail=this.sanitizer.bypassSecurityTrustUrl(r));try{yield this.indexed.saveBlobToUserPath(e,a.path),this.userInput.attach.push(a),setTimeout(()=>{URL.revokeObjectURL(r)},0),i.dismiss()}catch(o){console.error("\ud30c\uc77c \uc62c\ub9ac\uae30 \uc2e4\ud328: ",o),this.p5toast.show({text:this.lang.text.TodoDetail.load_failed}),i.dismiss()}})}ionViewWillEnter(){return(0,_.mG)(this,void 0,void 0,function*(){let s,e=[];if(Object.keys(this.nakama.servers).forEach(o=>{Object.keys(this.nakama.servers[o]).forEach(u=>{"online"==this.statusBar.groupServer[o][u]&&e.push({name:`${this.nakama.servers[o][u].info.name}`,isOfficial:o,target:u,type:`${o}/${u}`})})}),[...e].forEach(o=>{this.AvailableStorageList.push(o)}),this.received_data)this.buttonDisplay.saveTodo=this.lang.text.TodoDetail.buttonDisplay_modify,s=JSON.parse(this.received_data),this.userInput=Object.assign(Object.assign({},this.userInput),s),this.isModify=!0;else{let o=new Date((new Date).getTime()+864e5);this.userInput.limit=o.getTime()}if(this.file_sel_id=`todo_${this.userInput.id||"new_todo_id"}_${(new Date).getTime()}`,this.userInput.attach.length)for(let o=0,n=this.userInput.attach.length;o<n;o++){try{let u;if(this.userInput.remote){let p=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});p.present(),u=yield this.nakama.sync_load_file(this.userInput.attach[o],this.userInput.remote.isOfficial,this.userInput.remote.target,"todo_attach"),p.dismiss()}else{if("image"!=this.userInput.attach[o].viewer&&"text"!=this.userInput.attach[o].viewer)throw"\ubc88\uc678 \uc378\ub124\uc77c \ud544\uc694";u=yield this.indexed.loadBlobFromUserPath(this.userInput.attach[o].path,this.userInput.attach[o].type)}if(!u)continue;let d=URL.createObjectURL(u);this.global.modulate_thumbnail(this.userInput.attach[o],d)}catch(u){this.global.modulate_thumbnail(this.userInput.attach[o],"")}this.userInput.attach[o].exist=!0}try{if("local"==this.userInput.storeAt)this.isModify||(this.StoreAt.value=this.userInput.storeAt),this.userInput.display_store=this.lang.text.TodoDetail.OnThisDevice,this.userInput.display_creator=this.lang.text.TodoDetail.WrittenByMe,this.isModifiable=!0;else if(this.userInput.remote){if(this.isModify||(this.StoreAt.value=this.userInput.remote),this.userInput.display_store=this.userInput.remote.name,this.userInput.display_creator=this.lang.text.TodoDetail.Disconnected,!this.nakama.servers[this.userInput.remote.isOfficial]||!this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target])throw this.userInput.display_creator=this.lang.text.TodoDetail.DeletedServer,{text:"Server Deleted",isModifiable:!0};if(this.statusBar.groupServer[this.userInput.remote.isOfficial]&&"online"!=this.statusBar.groupServer[this.userInput.remote.isOfficial][this.userInput.remote.target])throw{text:"Server disconnected",isModifiable:!1};"online"==this.statusBar.groupServer[this.userInput.remote.isOfficial][this.userInput.remote.target]&&(this.isModifiable=!0),this.AmICreator=this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].session.user_id==this.userInput.remote.creator_id,this.userInput.display_creator=this.AmICreator?this.lang.text.TodoDetail.WrittenByMe:this.nakama.load_other_user(this.userInput.remote.creator_id,this.userInput.remote.isOfficial,this.userInput.remote.target).display_name,this.userInput.remote.group_id&&(this.isModifiable="online"==this.nakama.groups[this.userInput.remote.isOfficial][this.userInput.remote.target][this.userInput.remote.group_id].status)}}catch(o){this.isModifiable=o.isModifiable,console.log("Server issue: ",o)}this.noti.Current=this.userInput.id;let r=new Date(this.userInput.limit);if(this.Calendar.value=new Date(r.getTime()-60*r.getTimezoneOffset()*1e3).toISOString(),s&&(this.limitTimeP5Display=new Date(s.limit).getTime()),this.userInput.startFrom){let o=new Date(this.userInput.startFrom);this.startDisplay=o.toLocaleString(this.lang.lang),this.startDisplay=this.startDisplay.substring(0,this.startDisplay.lastIndexOf(":"))}if(this.limitDisplay=r.toLocaleString(this.lang.lang),this.limitDisplay=this.limitDisplay.substring(0,this.limitDisplay.lastIndexOf(":")),this.isLimitChangable=!0,this.userInput.workers){for(let o=0,n=this.userInput.workers.length;o<n;o++)try{this.userInput.workers[o].name=this.nakama.load_other_user(this.userInput.workers[o].id,this.userInput.remote.isOfficial,this.userInput.remote.target).display_name}catch(u){}this.isWorkerDone()}})}ionViewDidEnter(){this.show_count_timer()}toggle_start_calendar(){this.isStartCalendarHidden=!this.isStartCalendarHidden,this.isCalendarHidden=!0}toggle_calendar(){this.isCalendarHidden=!this.isCalendarHidden,this.isStartCalendarHidden=!0}start_change(e){!this.isLimitChangable||(this.userInput.startFrom=e.detail.value,this.startDisplay=new Date(e.detail.value).toLocaleString(this.lang.lang),this.startDisplay=this.startDisplay.substring(0,this.startDisplay.lastIndexOf(":")),this.startTimeP5Display=new Date(this.userInput.startFrom).getTime())}limit_change(e){!this.isLimitChangable||(this.userInput.limit=e.detail.value,this.limitDisplay=new Date(e.detail.value).toLocaleString(this.lang.lang),this.limitDisplay=this.limitDisplay.substring(0,this.limitDisplay.lastIndexOf(":")),this.limitTimeP5Display=new Date(this.userInput.limit).getTime())}remove_attach(e){this.userInput.attach.splice(e,1)}show_count_timer(){this.p5timer=new k(e=>{let i=0;this.startTimeP5Display=new Date(this.userInput.startFrom||this.userInput.written).getTime();let a,s=e.color(this.normal_color);e.setup=()=>{let d=document.getElementById("p5timer"),p=e.createCanvas(d.clientWidth,d.clientHeight);p.id("timer"),p.style("position","inherit"),p.style("width","100%"),p.style("height","100%"),p.parent(d),e.noStroke()};let r=0,o=()=>{a=(new Date).getTime(),r=this.limitTimeP5Display<a?1:e.map(a,this.startTimeP5Display,this.limitTimeP5Display,0,1,!0),r<=this.AlertLerpStartFrom?s=e.color(this.normal_color):r>this.AlertLerpStartFrom&&(s=e.lerpColor(e.color(this.normal_color),e.color(this.alert_color),e.map(r,this.AlertLerpStartFrom,1,0,1)*i))};e.draw=()=>{o(),e.clear(255,255,255,255),e.push(),e.fill(s),i<1?(i+=.04,i>=1&&(i=1),e.rect(0,0,e.lerp(0,e.width,r*n(i)),e.height)):e.rect(0,0,e.lerp(0,e.width,r),e.height),e.pop()};let n=d=>u(e.sq(u(d))),u=d=>1-d})}from_camera(){this.camera.getPicture({destinationType:0,correctOrientation:!0}).then(e=>(0,_.mG)(this,void 0,void 0,function*(){let i=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});i.present();let a={},s=new Date;a.filename=`Camera_${s.toLocaleString().replace(/[:|.|\/]/g,"_")}.jpeg`,a.file_ext="jpeg",a.base64="data:image/jpeg;base64,"+e,a.thumbnail=this.sanitizer.bypassSecurityTrustUrl(a.base64),a.type="image/jpeg",a.typeheader="image",a.content_related_creator=[{timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"camera"}],a.content_creator={timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"camera"},a.path=`tmp_files/todo/${a.filename}`,a.viewer="image";let r=yield this.indexed.saveBase64ToUserPath(a.base64,a.path);a.blob=new Blob([r],{type:a.type}),a.size=a.blob.size,i.dismiss(),this.userInput.attach.push(a)}))}new_attach(){this.modalCtrl.create({component:x.$}).then(e=>{e.onWillDismiss().then(i=>(0,_.mG)(this,void 0,void 0,function*(){i.data&&this.voidDraw_fileAct_callback(i)})),e.present()})}select_attach(){document.getElementById(this.file_sel_id).click()}inputImageSelected(e){return(0,_.mG)(this,void 0,void 0,function*(){!e.target.files.length||(yield this.selected_blobFile_callback_act(e.target.files[0]))})}StoreAtSelClicked(){this.StoreAt.open()}StoreAtSelChanged(e){let i=e.detail.value;"local"==i?(this.userInput.storeAt="local",this.userInput.remote=void 0,this.isManager=!1,this.userInput.workers=void 0):(this.userInput.storeAt=i.type,this.userInput.remote=i,this.userInput.workers=[],this.nakama.servers[i.isOfficial][i.target].client.getAccount(this.nakama.servers[i.isOfficial][i.target].session).then(a=>(0,_.mG)(this,void 0,void 0,function*(){let s=JSON.parse(a.user.metadata);if(this.WorkerGroups.length=0,this.AvailableWorker={},s.is_admin){let r=(yield this.nakama.servers[i.isOfficial][i.target].client.rpc(this.nakama.servers[i.isOfficial][i.target].session,"query_all_groups",{})).payload;for(let o=0,n=r.length;o<n;o++){this.AvailableWorker[r[o].id]||(this.AvailableWorker[r[o].id]=[]);for(let u=0,d=r[o].users.length;u<d;u++){let p=this.nakama.load_other_user(r[o].users[u].user.user_id,i.isOfficial,i.target);delete p.todo_checked,this.AvailableWorker[r[o].id].push(p)}this.WorkerGroups.push({id:r[o].id,name:r[o].name})}this.isManager=!0}else if(s.is_manager){for(let r=0,o=s.is_manager.length;r<o;r++){let n=this.nakama.groups[i.isOfficial][i.target][s.is_manager[r]];this.AvailableWorker[n.id]||(this.AvailableWorker[n.id]=[]);for(let u=0,d=n.users.length;u<d;u++){let p=this.nakama.load_other_user(n.users[u].user.user_id||n.users[u].user.id,i.isOfficial,i.target);delete p.todo_checked,this.AvailableWorker[n.id].push(p)}this.WorkerGroups.push({id:n.id,name:n.name})}this.isManager=!0}})))}toggle_all_user(e){this.toggle_logs[e]=!this.toggle_logs[e];for(let i=0,a=this.AvailableWorker[e].length;i<a;i++)this.AvailableWorker[e][i].todo_checked=this.toggle_logs[e]}isWorkerDone(){console.log("\uc791\uc5c5\uc790 \uc644\ub8cc \uc5ec\ubd80\ub97c \uac80\ud1a0\ud558\uc5ec worker_done\uc5d0 \ubc18\uc601\ud558\uae30")}ImporantSelClicked(){this.ImporantSel.open()}ImporantSelChanged(e){switch(this.userInput.importance=e.detail.value,this.userInput.importance){case"0":this.normal_color="#888b",this.alert_color="#0bbb",this.AlertLerpStartFrom=.8;break;case"1":this.normal_color="#888b",this.alert_color="#dddd0cbb",this.AlertLerpStartFrom=.5;break;case"2":this.normal_color="#dddd0cbb",this.alert_color="#800b",this.AlertLerpStartFrom=.4}}toggle_custom_color(){this.userInput.custom_color=this.userInput.custom_color?void 0:"#000000"}open_content_viewer(e){"godot"==this.userInput.attach[e].viewer?this.open_godot_viewer(e):this.open_ionic_viewer(e)}open_ionic_viewer(e){this.modalCtrl.create({component:D.B,componentProps:{info:this.userInput.attach[e],path:this.userInput.attach[e].path}}).then(i=>{i.onDidDismiss().then(a=>{if(a.data){let s=[];if(this.userInput.attach[e].content_related_creator&&(s=[...this.userInput.attach[e].content_related_creator]),this.userInput.attach[e].content_creator){let r=!1;for(let o=0,n=s.length;o<n;o++)if(void 0!==s[o].user_id&&void 0!==this.userInput.attach[e].content_creator.user_id&&s[o].user_id==this.userInput.attach[e].content_creator.user_id){r=!0;break}r||s.push(this.userInput.attach[e].content_creator)}return delete this.userInput.attach[e].exist,void this.modalCtrl.create({component:x.$,componentProps:{path:a.data.path||this.userInput.attach[e].path,width:a.data.width,height:a.data.height}}).then(r=>{r.onWillDismiss().then(o=>{o.data&&this.voidDraw_fileAct_callback(o,s,a.data.path?e+1:e)}),r.present()})}}),this.noti.Current="IonicViewerPage",i.present()})}open_godot_viewer(e){this.modalCtrl.create({component:C.r,componentProps:{info:this.userInput.attach[e],path:this.userInput.attach[e].path}}).then(i=>{i.onDidDismiss().then(a=>(0,_.mG)(this,void 0,void 0,function*(){if(a.data){let s=[];if(this.userInput.attach[e].content_related_creator&&(s=[...this.userInput.attach[e].content_related_creator]),this.userInput.attach[e].content_creator){let r=!1;for(let o=0,n=s.length;o<n;o++)if(void 0!==s[o].user_id&&void 0!==this.userInput.attach[o].content_creator.user_id&&s[o].user_id==this.userInput.attach[o].content_creator.user_id){r=!0;break}r||s.push(this.userInput.attach[e].content_creator)}delete this.userInput.attach[e].exist,yield this.indexed.saveBase64ToUserPath(a.data.base64,"tmp_files/modify_image.png"),this.modalCtrl.create({component:x.$,componentProps:{path:"tmp_files/modify_image.png",width:a.data.width,height:a.data.height}}).then(r=>{r.onWillDismiss().then(o=>{o.data&&this.voidDraw_fileAct_callback(o,s,e+1)}),r.present()})}})),this.noti.Current="GodotViewerPage",i.present()})}voidDraw_fileAct_callback(e,i,a){let s;try{if(s=this.userInput.attach[a],void 0===s)throw"undefined attach"}catch(r){s={},this.userInput.attach.push(s)}s.filename=e.data.name,s.file_ext="png",s.type="image/png",s.viewer="image",i?(s.content_related_creator=i,s.content_creator={timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"voidDraw"}):(s.content_related_creator=[{timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"voidDraw"}],s.content_creator={timestamp:(new Date).getTime(),display_name:this.nakama.users.self.display_name,various:"voidDraw"}),s.thumbnail=this.sanitizer.bypassSecurityTrustUrl(e.data.img),s.path=`tmp_files/todo/${s.filename}`,this.indexed.saveBase64ToUserPath(e.data.img,"tmp_files/todo/attach.jpeg",r=>{s.blob=new Blob([r],{type:s.type}),s.size=s.blob.size}),this.indexed.saveBase64ToUserPath(e.data.img,s.path,r=>{e.data.loadingCtrl.dismiss()})}doneTodo(){return(0,_.mG)(this,void 0,void 0,function*(){if(this.isButtonClicked=!0,this.userInput.done=!0,this.global.godot_window.add_todo&&this.global.godot_window.add_todo(JSON.stringify(this.userInput)),this.userInput.remote){let e=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});e.present(),this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target]&&(yield this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].socket.sendMatchState(this.nakama.self_match[this.userInput.remote.isOfficial][this.userInput.remote.target].match_id,I.B.ADD_TODO,encodeURIComponent(`done,${this.userInput.id}`))),e.dismiss()}this.deleteFromStorage(!1)})}saveData(){return(0,_.mG)(this,void 0,void 0,function*(){if(!this.userInput.title)return void this.p5toast.show({text:this.lang.text.TodoDetail.needDisplayName});this.isButtonClicked=!0;let e=Boolean(this.userInput.attach.length);if(delete this.userInput.display_store,delete this.userInput.display_creator,JSON.stringify(this.userInput)==this.received_data)return void this.navCtrl.back();this.userInput.create_at||(this.userInput.create_at=(new Date).getTime()),(!this.userInput.id||!this.isModify)&&(this.userInput.id=this.userInput.remote?`${this.userInput.remote.isOfficial}_${this.userInput.remote.target}_${new Date(this.userInput.create_at).toISOString().replace(/[:|.|\/]/g,"_")}`:new Date(this.userInput.create_at).toISOString().replace(/[:|.|\/]/g,"_")),this.userInput.noti_id&&(("DesktopPWA"==g.n$||"MobilePWA"==g.n$)&&(clearTimeout(this.nakama.web_noti_id[this.userInput.noti_id]),delete this.nakama.web_noti_id[this.userInput.noti_id]),this.noti.ClearNoti(this.userInput.noti_id)),this.userInput.noti_id=this.nakama.get_noti_id(),this.nakama.set_todo_notification(this.userInput);let a=this.received_data?JSON.parse(this.received_data):void 0,s=!1;if(this.userInput.workers){this.userInput.workers.length=0;let r=Object.keys(this.AvailableWorker),o=[];for(let n=0,u=r.length;n<u;n++)for(let d=0,p=this.AvailableWorker[r[n]].length;d<p;d++){let f=this.AvailableWorker[r[n]][d].id||this.AvailableWorker[r[n]][d].user_id;this.AvailableWorker[r[n]][d].todo_checked&&!o.includes(f)&&(this.userInput.workers.push({id:f,name:this.nakama.load_other_user(f,this.userInput.remote.isOfficial,this.userInput.remote.target).display_name}),o.push(f))}this.userInput.workers.length||(this.userInput.workers=void 0)}try{a.attach.forEach(n=>{delete n.exist,delete n.thumbnail,delete n.base64,delete n.blob});let r=JSON.stringify(a.attach),o=JSON.parse(JSON.stringify(this.userInput.attach));o.forEach(n=>{delete n.exist,delete n.thumbnail,delete n.base64,delete n.blob}),o=JSON.stringify(o),s=r!=o}catch(r){s=!0}if(e&&s){let o,r=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});if(r.present(),a){yield this.indexed.removeFileFromUserPath(`todo/${this.userInput.id}/thumbnail.png`);for(let n=0,u=a.attach.length;n<u;n++){for(let d=0,p=this.userInput.attach.length;d<p;d++)if(this.userInput.attach[d].path==a.attach[n].path){a.attach[n].exist=!0,a.attach[n].index=d;break}(!a.attach[n].exist||a.attach[n].exist&&!this.userInput.attach[a.attach[n].index])&&(yield this.indexed.removeFileFromUserPath(a.attach[n].path))}}for(let n=0,u=this.userInput.attach.length;n<u;n++){let d;!this.userInput.attach[n].exist||!o&&"image"==this.userInput.attach[n].viewer?(d=yield this.indexed.loadBlobFromUserPath(this.userInput.attach[n].path,this.userInput.attach[n].type),this.userInput.attach[n].path=`todo/${this.userInput.id}/${this.userInput.attach[n].filename}`,yield this.indexed.saveBlobToUserPath(d,this.userInput.attach[n].path)):delete this.userInput.attach[n].exist,!o&&"image"==this.userInput.attach[n].viewer&&(o=URL.createObjectURL(d))}o&&(yield new Promise(n=>{new k(u=>{u.setup=()=>{u.noCanvas(),u.loadImage(o,d=>{d.width>d.height?d.resize(d.width/d.height*128,128):d.resize(128,d.height/d.width*128),u.createCanvas(128,128).hide(),u.smooth(),u.image(d,-(d.width-128)/2,-(d.height-128)/2),u.saveFrames("","png",1,1,y=>{this.indexed.saveBase64ToUserPath(y[0].imageData.replace(/"|=|\\/g,""),`todo/${this.userInput.id}/thumbnail.png`,w=>{n()}),URL.revokeObjectURL(o),u.remove()})},d=>{console.error("Todo-\ub4f1\ub85d\ub41c \uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",d),n(),URL.revokeObjectURL(o),u.remove()})}})})),this.global.last_frame_name="",r.dismiss()}else if(!e&&a){yield this.indexed.removeFileFromUserPath(`todo/${this.userInput.id}/thumbnail.png`);for(let r=0,o=a.attach.length;r<o;r++)yield this.indexed.removeFileFromUserPath(a.attach[r].path)}if(this.userInput.attach.forEach(r=>{URL.revokeObjectURL(r.thumbnail),delete r.thumbnail,delete r.exist,delete r.base64}),this.userInput.written=(new Date).getTime(),this.userInput.startFrom){let r=new Date(this.userInput.startFrom).getTime();(new Date).getTime()>r?delete this.userInput.startFrom:this.userInput.startFrom=r}if(this.userInput.limit=new Date(this.userInput.limit).getTime(),this.isModify||this.userInput.remote&&!this.userInput.remote.creator_id&&(this.userInput.remote.creator_id=this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].session.user_id),this.userInput.remote){let r=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});r.present();let o={collection:"server_todo",key:this.userInput.id,permission_read:2,permission_write:1,value:this.userInput};try{if(this.userInput.attach.forEach(n=>{URL.revokeObjectURL(n.thumbnail),delete n.thumbnail,delete n.exist,delete n.base64}),this.userInput.workers?(console.log("\uc791\uc5c5\uc790\uc6a9 rpc \uc0ac\uc6a9 \ud544\uc694"),yield this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].client.writeStorageObjects(this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].session,[o]).then(n=>(0,_.mG)(this,void 0,void 0,function*(){yield this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].socket.sendMatchState(this.nakama.self_match[this.userInput.remote.isOfficial][this.userInput.remote.target].match_id,I.B.ADD_TODO,encodeURIComponent(`add,${n.acks[0].collection},${n.acks[0].key}`))}))):yield this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].client.writeStorageObjects(this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].session,[o]).then(n=>(0,_.mG)(this,void 0,void 0,function*(){yield this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target].socket.sendMatchState(this.nakama.self_match[this.userInput.remote.isOfficial][this.userInput.remote.target].match_id,I.B.ADD_TODO,encodeURIComponent(`add,${n.acks[0].collection},${n.acks[0].key}`))})),e&&s&&a)for(let n=0,u=a.attach.length;n<u;n++){for(let d=0,p=this.userInput.attach.length;d<p;d++)if(this.userInput.attach[d].path==a.attach[n].path){a.attach[n].exist=!0,a.attach[n].index=d;break}(!a.attach[n].exist||a.attach[n].exist&&!this.userInput.attach[a.attach[n].index])&&(yield this.nakama.sync_remove_file(a.attach[n].path,this.userInput.remote.isOfficial,this.userInput.remote.target,"todo_attach"))}for(let n=0,u=this.userInput.attach.length;n<u;n++)yield this.nakama.sync_save_file(this.userInput.attach[n],this.userInput.remote.isOfficial,this.userInput.remote.target,"todo_attach");r.dismiss()}catch(n){return console.error("\ud574\uc57c\ud560 \uc77c\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",n),this.p5toast.show({text:this.lang.text.TodoDetail.CanAddToServer}),this.isButtonClicked=!1,void r.dismiss()}}this.global.godot_window.add_todo&&this.global.godot_window.add_todo(JSON.stringify(this.userInput)),yield this.indexed.saveTextFileToUserPath(JSON.stringify(this.userInput),`todo/${this.userInput.id}/info.todo`),this.navCtrl.back()})}deleteData(){this.alertCtrl.create({header:this.lang.text.TodoDetail.remove,message:this.lang.text.TodoDetail.terminateTodo,buttons:[{text:this.lang.text.TodoDetail.remove,handler:()=>{this.deleteFromStorage()}}]}).then(e=>e.present())}deleteFromStorage(e=!0){return(0,_.mG)(this,void 0,void 0,function*(){this.isButtonClicked=!0;let i=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});if(i.present(),this.userInput.remote){let a={collection:"server_todo",key:this.userInput.id};try{if(!this.nakama.servers[this.userInput.remote.isOfficial][this.userInput.remote.target])throw"Server deleted.";let s=this.userInput.remote.isOfficial,r=this.userInput.remote.target;yield this.nakama.servers[s][r].client.deleteStorageObjects(this.nakama.servers[s][r].session,{object_ids:[a]});for(let o=0,n=this.userInput.attach.length;o<n;o++)yield this.nakama.sync_remove_file(this.userInput.attach[o].path,s,r,"todo_attach");e&&(yield this.nakama.servers[s][r].socket.sendMatchState(this.nakama.self_match[s][r].match_id,I.B.ADD_TODO,encodeURIComponent(`delete,${this.userInput.id}`)))}catch(s){console.error("\ud574\uc57c\ud560 \uc77c \uc0ad\uc81c \uc694\uccad\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",s)}}this.indexed.GetFileListFromDB(`todo/${this.userInput.id}`,a=>(0,_.mG)(this,void 0,void 0,function*(){a.forEach(s=>this.indexed.removeFileFromUserPath(s)),this.userInput.noti_id&&("DesktopPWA"==g.n$||"MobilePWA"==g.n$)&&(clearTimeout(this.nakama.web_noti_id[this.userInput.noti_id]),delete this.nakama.web_noti_id[this.userInput.noti_id]),this.noti.ClearNoti(this.userInput.noti_id),e&&this.global.godot_window.remove_todo&&this.global.godot_window.remove_todo(JSON.stringify(this.userInput)),i.dismiss(),this.navCtrl.back()}))})}ionViewWillLeave(){return(0,_.mG)(this,void 0,void 0,function*(){this.indexed.GetFileListFromDB("tmp_files",e=>{e.forEach(i=>this.indexed.removeFileFromUserPath(i))}),this.noti.Current="",this.p5timer&&this.p5timer.remove(),this.global.CreateGodotIFrame("todo",{local_url:"assets/data/godot/todo.pck",title:"Todo",add_todo_menu:e=>{this.nakama.open_add_todo_page(e)}})})}ngOnDestroy(){this.nakama.AddTodoLinkAct=void 0,this.p5canvas&&this.p5canvas.remove()}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(T.gz),t.Y36(T.F0),t.Y36(h.IN),t.Y36(M.b),t.Y36(O.F),t.Y36(Z.H7),t.Y36(P.H),t.Y36(I.a),t.Y36(h.Br),t.Y36(S.J),t.Y36(U.g),t.Y36(h.HT),t.Y36(F.AN),t.Y36(J.V1),t.Y36(h.SH))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-add-todo-menu"]],viewQuery:function(e,i){if(1&e&&(t.Gf(q,5),t.Gf(N,5),t.Gf(j,5),t.Gf(W,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.StartCalendar=a.first),t.iGM(a=t.CRH())&&(i.Calendar=a.first),t.iGM(a=t.CRH())&&(i.StoreAt=a.first),t.iGM(a=t.CRH())&&(i.ImporantSel=a.first)}},decls:71,vars:35,consts:[["slot","start"],["defaultHref","main"],["id","p5Drop_todo",2,"position","absolute","width","100%","height","100%","display","flex","pointer-events","none","z-index","500"],["id","main_table",2,"width","100%","height","100%"],[2,"height","100%"],[2,"vertical-align","top"],["id","p5timer",2,"position","absolute","width","100%","height","8px","z-index","2"],["id","main_div",1,"main",2,"max-width","100vw"],[3,"click",4,"ngIf"],[4,"ngIf"],[1,"ion-text-right",3,"ngModel","placeholder","ngModelChange"],["button","",3,"click"],[2,"pointer-events","none",3,"value","ionChange"],["ImporantSel",""],["value","2"],["value","1"],["value","0"],["button",""],["button","","color","medium","class","ion-text-end",3,"click",4,"ngIf"],[1,"ion-text-right","uneditable_data"],[2,"display","inline",3,"hidden","locale","ionChange"],["StartCalendar",""],["Calendar",""],[1,"infobox",3,"ngModel","placeholder","ngModelChange"],[4,"ngFor","ngForOf"],["class","ion-text-right",3,"click",4,"ngIf"],[1,"ion-text-right",3,"click"],["hidden","","type","file","accept","*",3,"id","change"],[2,"width","100%"],["id","bottom_buttons",2,"width","100%","background-color","black"],["expand","block",3,"disabled","click"],[3,"click"],[2,"pointer-events","none",3,"ionChange"],["StoreAt",""],["value","local"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","medium"],["color","medium",1,"ion-text-right"],["fixed",""],["col-33",""],["button","","color","success",3,"disabled","click"],[1,"ion-text-center"],["ManageWorker",""],["button","","slot","header"],["slot","content"],["Groups",""],["slot","end",3,"ngModel","ngModelChange"],[1,"ion-text-end"],["class","ignore_check",4,"ngFor","ngForOf"],[1,"ignore_check"],["button","","color","medium",1,"ion-text-end",3,"click"],[2,"height","27px","transform","translateY(-3px)",3,"click"],["type","color",2,"margin-right","8px","height","27px",3,"ngModel","ngModelChange"],["text-wrap",""],["class","image_thumbnail",3,"src","alt",4,"ngIf"],["button","",4,"ngIf"],[1,"image_thumbnail",3,"src","alt"],["color","danger","expand","block",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content"),t._UZ(7,"div",2),t.TgZ(8,"table",3)(9,"tr",4)(10,"td",5),t._UZ(11,"div",6),t.TgZ(12,"div",7),t.YNc(13,L,8,3,"ion-item",8),t.YNc(14,B,12,4,"div",9),t.TgZ(15,"ion-item")(16,"ion-label"),t._uU(17),t.qZA(),t.TgZ(18,"ion-input",10),t.NdJ("ngModelChange",function(s){return i.userInput.title=s}),t.qZA()(),t.YNc(19,Q,11,2,"div",9),t.TgZ(20,"ion-item",11),t.NdJ("click",function(){return i.ImporantSelClicked()}),t.TgZ(21,"ion-label"),t._uU(22),t.qZA(),t.TgZ(23,"ion-select",12,13),t.NdJ("ionChange",function(s){return i.ImporantSelChanged(s)}),t.TgZ(25,"ion-select-option",14),t._uU(26),t.qZA(),t.TgZ(27,"ion-select-option",15),t._uU(28),t.qZA(),t.TgZ(29,"ion-select-option",16),t._uU(30),t.qZA()()(),t.YNc(31,E,11,3,"div",9),t.TgZ(32,"ion-item",17)(33,"ion-label"),t._uU(34),t.qZA(),t.YNc(35,R,2,1,"ion-label",18),t.YNc(36,z,4,2,"div",9),t.qZA(),t.TgZ(37,"ion-item",11),t.NdJ("click",function(){return i.toggle_start_calendar()}),t.TgZ(38,"ion-label"),t._uU(39),t.qZA(),t.TgZ(40,"ion-label",19),t._uU(41),t.qZA()(),t.TgZ(42,"ion-datetime",20,21),t.NdJ("ionChange",function(s){return i.start_change(s)}),t.qZA(),t.TgZ(44,"ion-item",11),t.NdJ("click",function(){return i.toggle_calendar()}),t.TgZ(45,"ion-label"),t._uU(46),t.qZA(),t.TgZ(47,"ion-label",19),t._uU(48),t.qZA()(),t.TgZ(49,"ion-datetime",20,22),t.NdJ("ionChange",function(s){return i.limit_change(s)}),t.qZA(),t.TgZ(51,"textarea",23),t.NdJ("ngModelChange",function(s){return i.userInput.description=s}),t.qZA(),t.YNc(52,tt,7,3,"div",24),t.TgZ(53,"ion-item")(54,"ion-label"),t._uU(55),t.qZA(),t.YNc(56,et,2,1,"ion-button",25),t.TgZ(57,"ion-button",26),t.NdJ("click",function(){return i.new_attach()}),t._uU(58),t.qZA(),t.TgZ(59,"ion-button",26),t.NdJ("click",function(){return i.select_attach()}),t._uU(60),t.qZA()(),t.TgZ(61,"input",27),t.NdJ("change",function(s){return i.inputImageSelected(s)}),t.qZA()()()(),t.TgZ(62,"tr")(63,"td")(64,"div",28)(65,"table",29)(66,"tr")(67,"td")(68,"ion-button",30),t.NdJ("click",function(){return i.saveData()}),t._uU(69),t.qZA()(),t.YNc(70,it,3,2,"td",9),t.qZA()()()()()()()),2&e&&(t.xp6(3),t.Oqu(i.lang.text.TodoDetail.Title),t.xp6(10),t.Q6J("ngIf",!i.isModify),t.xp6(1),t.Q6J("ngIf",i.isModify),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.DisplayName),t.xp6(1),t.Q6J("ngModel",i.userInput.title)("placeholder",i.lang.text.TodoDetail.DisplayName_placeholder),t.xp6(1),t.Q6J("ngIf","local"!=i.userInput.storeAt&&i.isManager),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.Importance),t.xp6(1),t.Q6J("value",i.userInput.importance),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.Importance_2),t.xp6(2),t.Oqu(i.lang.text.TodoDetail.Importance_1),t.xp6(2),t.Oqu(i.lang.text.TodoDetail.Importance_0),t.xp6(1),t.Q6J("ngIf",i.isModify&&i.userInput.workers),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.CustomColor),t.xp6(1),t.Q6J("ngIf",!i.userInput.custom_color),t.xp6(1),t.Q6J("ngIf",i.userInput.custom_color),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.startFrom),t.xp6(2),t.Oqu(i.startDisplay||i.lang.text.TodoDetail.startImmediatly),t.xp6(1),t.Q6J("hidden",i.isStartCalendarHidden)("locale",i.lang.lang),t.xp6(4),t.Oqu(i.lang.text.TodoDetail.limit),t.xp6(2),t.Oqu(i.limitDisplay),t.xp6(1),t.Q6J("hidden",i.isCalendarHidden)("locale",i.lang.lang),t.xp6(2),t.Q6J("ngModel",i.userInput.description)("placeholder",i.lang.text.TodoDetail.description),t.xp6(1),t.Q6J("ngForOf",i.userInput.attach),t.xp6(3),t.Oqu(i.lang.text.TodoDetail.attachments),t.xp6(1),t.Q6J("ngIf",i.can_cordova),t.xp6(2),t.hij(" ",i.lang.text.TodoDetail.new_attach," "),t.xp6(2),t.hij(" ",i.lang.text.TodoDetail.add_attach," "),t.xp6(1),t.Q6J("id",i.file_sel_id),t.xp6(7),t.Q6J("disabled",!i.isModifiable||i.isButtonClicked),t.xp6(1),t.hij(" ",i.buttonDisplay.saveTodo," "),t.xp6(1),t.Q6J("ngIf",i.isModify))},directives:[h.Gu,h.sr,h.wd,h.Sm,h.oU,h.cs,h.W2,b.O5,h.Ie,h.Q$,h.t9,h.QI,h.n0,b.sg,h.jY,h.Nd,h.wI,h.pK,h.j9,v.JJ,v.On,h.eh,h.We,h.q_,h.nz,h.w,v.Fj,h.x4,h.YG],styles:[".uneditable_data[_ngcontent-%COMP%]{color:#888}.main[_ngcontent-%COMP%]{width:100%;height:100%;padding:8px;overflow-x:hidden;overflow-y:auto;scroll-behavior:smooth}.logs[_ngcontent-%COMP%]{background:var(--voidDraw-menu-background);border-radius:8px;margin:8px;padding:4px 8px;text-align:center}.image_thumbnail[_ngcontent-%COMP%]{width:auto;height:auto;object-fit:contain;display:block;margin:auto}.ignore_check[_ngcontent-%COMP%]{pointer-events:none}"]}),l})()}];let st=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[T.Bz.forChild(at)],T.Bz]}),l})(),nt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[b.ez,v.u5,h.Pc,st]]}),l})()}}]);