"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8821],{8821:(y,d,o)=>{o.r(d),o.d(d,{WeblinkGenPageModule:()=>W});var h=o(6814),p=o(95),i=o(1325),c=o(5877),_=o(5861),v=o(9761),g=o(6845),e=o(9468),m=o(3857),f=o(4663),b=o(9080),I=o(797),k=o(6052);function G(s,u){if(1&s&&(e.TgZ(0,"ion-select-option",11),e._uU(1),e.qZA()),2&s){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.hij("",l.name," ")}}function C(s,u){if(1&s&&(e.TgZ(0,"ion-select-option",11),e._uU(1),e.qZA()),2&s){const l=u.$implicit;e.Q6J("value",l),e.xp6(1),e.Oqu(l.name+" ("+l.server.name+")")}}const Z=[{path:"",component:(()=>{var s;class u{constructor(t,n,r,a,P,S){this.lang=t,this.mClipboard=n,this.nakama=r,this.indexed=a,this.global=P,this.navCtrl=S,this.userInput={root:void 0,servers:[],groups:[],group_dedi:void 0,open_prv_channel:"",open_channel:!1},this.servers=[],this.groups=[],this.rtcServer=[],this.isSSLConnect=!1,this.result_address=`${g.Oy}pjcone_pwa/`}ngOnInit(){this.isSSLConnect="https:"==window.location.protocol&&!g.bS,this.servers=this.nakama.get_all_server_info(),this.groups=this.nakama.rearrange_group_list(),this.indexed.loadTextFromUserPath("servers/webrtc_server.json",(t,n)=>{t&&n&&(this.rtcServer=JSON.parse(n))});for(let t=this.groups.length-1;t>=0;t--)"missing"==this.groups[t].status&&this.groups.splice(t,1)}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.pop()}}SelectGroupServer(t){this.userInput.servers=t.detail.value,this.information_changed()}SelectGroupChannel(t){this.userInput.groups=t.detail.value,this.information_changed()}baseURLChanged(t){t.detail.value||(this.userInput.root=void 0),this.information_changed()}information_changed(){this.result_address=this.userInput.root||`${g.Oy}pjcone_pwa/`;let t=0;for(let n=0,r=this.userInput.servers.length;n<r;n++)this.result_address+=t?"&":"?",this.result_address+="server=",this.result_address+=`${this.userInput.servers[n].name||""},${this.userInput.servers[n].address||""},${this.userInput.servers[n].useSSL||""},${this.userInput.servers[n].port||7350},${this.userInput.servers[n].key||""}`,t++;for(let n=0,r=this.userInput.groups.length;n<r;n++)this.result_address+=t?"&":"?",this.result_address+="group=",this.result_address+=`${this.userInput.groups[n].name},${this.userInput.groups[n].id}`,t++;if(this.userInput.open_prv_channel){this.result_address+=t?"&":"?",this.result_address+="open_prv_channel=";try{this.result_address+=`${this.userInput.open_prv_channel},${this.servers[0].isOfficial},${this.userInput.servers[0].target}`}catch{this.result_address+=`${this.userInput.open_prv_channel},,`}t++}this.userInput.open_channel&&(this.result_address+=t?"&":"?",this.result_address+="open_channel=",this.result_address+=`${this.userInput.groups[0].id},${this.userInput.groups[0].server.isOfficial},${this.userInput.groups[0].server.target}`,t++)}copy_result_address(){this.mClipboard.copy(this.result_address).catch(t=>v.Z.write(this.result_address))}paste_user_id(){var t=this;return(0,_.Z)(function*(){t.userInput.open_prv_channel?t.userInput.open_prv_channel="":yield t.mClipboard.paste().then(n=>t.userInput.open_prv_channel=n).catch(function(){var n=(0,_.Z)(function*(r){return t.userInput.open_prv_channel=yield v.Z.read()});return function(r){return n.apply(this,arguments)}}()),t.information_changed()})()}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape}}return(s=u).\u0275fac=function(t){return new(t||s)(e.Y36(m.b),e.Y36(f.T),e.Y36(b.a),e.Y36(I.H),e.Y36(k.AN),e.Y36(i.SH))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-weblink-gen"]],decls:34,vars:19,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","portal/settings"],[3,"click"],[1,"infobox",3,"ngModel","ngModelChange"],["placeholder","https://is2you2.github.io/pjcone_pwa/",1,"ion-text-end",3,"label","ngModel","ngModelChange","ionInput"],["multiple","true",3,"label","placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],["button","",3,"disabled","click"],[1,"ignore_toggles",3,"ngModel","ngModelChange"],["color","medium",1,"ion-text-end"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",1),e._UZ(5,"ion-back-button",2),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"div",3),e.NdJ("click",function(){return n.copy_result_address()}),e.TgZ(11,"textarea",4),e.NdJ("ngModelChange",function(a){return n.result_address=a}),e.qZA()(),e.TgZ(12,"ion-item-divider")(13,"ion-label"),e._uU(14),e.qZA()(),e.TgZ(15,"ion-item")(16,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.userInput.root=a})("ionInput",function(a){return n.baseURLChanged(a)}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-select",6),e.NdJ("ionChange",function(a){return n.SelectGroupServer(a)}),e.YNc(19,G,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-select",6),e.NdJ("ionChange",function(a){return n.SelectGroupChannel(a)}),e.YNc(22,C,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(23,"ion-item-divider")(24,"ion-label"),e._uU(25),e.qZA()(),e.TgZ(26,"ion-item",8),e.NdJ("click",function(){return n.userInput.open_channel=!n.userInput.open_channel,n.information_changed()}),e.TgZ(27,"ion-toggle",9),e.NdJ("ngModelChange",function(a){return n.userInput.open_channel=a}),e._uU(28),e.qZA()(),e.TgZ(29,"ion-item",8),e.NdJ("click",function(){return n.paste_user_id()}),e.TgZ(30,"ion-label"),e._uU(31),e.qZA(),e.TgZ(32,"ion-label",10),e._uU(33),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(n.lang.text.Settings.WebLinkGen),e.xp6(6),e.Oqu(n.lang.text.WebLinkGen.subtitle),e.xp6(2),e.Q6J("ngModel",n.result_address),e.xp6(3),e.Oqu(n.lang.text.WebLinkGen.CustomInfo),e.xp6(2),e.Q6J("label",n.lang.text.WebLinkGen.baseURL)("ngModel",n.userInput.root),e.xp6(2),e.Q6J("label",n.lang.text.QuickQRShare.GroupServer)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.xp6(1),e.Q6J("ngForOf",n.servers),e.xp6(2),e.Q6J("label",n.lang.text.QuickQRShare.Group)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.xp6(1),e.Q6J("ngForOf",n.groups),e.xp6(3),e.Oqu(n.lang.text.WebLinkGen.AutoOpenChannel),e.xp6(1),e.Q6J("disabled",!n.userInput.groups.length||""!=n.userInput.open_prv_channel),e.xp6(1),e.Q6J("ngModel",n.userInput.open_channel),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.OpenGroupChannel),e.xp6(1),e.Q6J("disabled",n.userInput.open_channel),e.xp6(2),e.Oqu(n.lang.text.WebLinkGen.OpenPrivateChannel),e.xp6(2),e.Oqu(n.userInput.open_prv_channel?n.userInput.open_prv_channel:n.lang.text.WebLinkGen.ClickToPaste))},dependencies:[h.sg,p.Fj,p.JJ,p.On,i.oU,i.Sm,i.W2,i.Gu,i.pK,i.Ie,i.rH,i.Q$,i.t9,i.n0,i.wd,i.ho,i.sr,i.w,i.QI,i.j9,i.cs],styles:[".ignore_toggles[_ngcontent-%COMP%]{pointer-events:none}"]}),u})()}];let T=(()=>{var s;class u{}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),u})(),W=(()=>{var s;class u{}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,p.u5,i.Pc,T]}),u})()}}]);