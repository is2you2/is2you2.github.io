"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3627],{3627:(R,g,o)=>{o.r(g),o.d(g,{SubscribesPageModule:()=>F});var l=o(9808),_=o(4182),s=o(3996),u=o(9705),m=o(5016),h=o(6638),p=o(4896),f=o(3041),b=o(6069),t=o(9863),x=o(9645),v=o(3336),P=o(9912),S=o(4606),Z=o(5742);function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",2),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit;return t.oxw(2).check_notifications(c)}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Oqu(i.nakama.notifications_rearrange[e].request)}}function C(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,T,3,1,"ion-item",10),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.nakama.notifications_rearrange.length>e)}}const k=function(){return[0,1,2]};function A(n,a){if(1&n&&(t.TgZ(0,"ion-accordion-group",4,5)(2,"ion-accordion",6)(3,"ion-item",7)(4,"ion-label"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-list",8),t.YNc(7,C,2,1,"div",9),t.qZA()()()),2&n){const e=t.oxw();t.Q6J("value",!1),t.xp6(5),t.Oqu(e.lang.text.Subscribes.has_noties),t.xp6(2),t.Q6J("ngForOf",t.DdM(3,k))}}function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",2),t.NdJ("click",function(){return t.CHM(e),t.oxw().scanQRCode()}),t.TgZ(5,"ion-label",3),t._uU(6),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.lang.text.Subscribes.almighty_link),t.xp6(3),t.Oqu(e.lang.text.Subscribes.almighty_button)}}function O(n,a){1&n&&t._UZ(0,"div",19)}function y(n,a){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw().$implicit;t.Akn("online"==e.status?"filter: grayscale(0) contrast(1)":"filter: grayscale(.9) contrast(1.4)"),t.Q6J("src",e.info.img,t.LSH)}}function J(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",2),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).go_to_chatroom(r)}),t.TgZ(1,"div",12),t.YNc(2,O,1,0,"div",13),t.qZA(),t.TgZ(3,"div",14),t.YNc(4,y,1,3,"img",15),t.qZA(),t.TgZ(5,"ion-label")(6,"div",16)(7,"table")(8,"tr")(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",17),t._uU(12),t.qZA()()()(),t.TgZ(13,"div",18),t._uU(14),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[e.status||"offline"]),t.xp6(1),t.Q6J("ngIf",e.is_new),t.xp6(2),t.Q6J("ngIf",e.info),t.xp6(6),t.hij(" ",e.info?e.info.name||e.info.display_name||i.lang.text.ChatRoom.noname_chatroom:e.title||i.lang.text.ChatRoom.noname_chatroom," "),t.xp6(2),t.hij(" ","("+e.server.target+")"," "),t.xp6(2),t.hij(" ",e.last_comment||e.noti||i.lang.text.Subscribes.noMessageHistory," ")}}function Q(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,J,15,7,"ion-item",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.nakama.channels)}}const I=[{path:"",component:(()=>{class n{constructor(e,i,c,r,d,N){this.modalCtrl=e,this.codescan=i,this.p5toast=c,this.nakama=r,this.statusBar=d,this.lang=N,this.cant_scan=!1,this.lock_chatroom=!1}ngOnInit(){("DesktopPWA"==m.n$||"MobilePWA"==m.n$)&&(this.cant_scan=!0)}ionViewDidEnter(){this.nakama.subscribe_lock=!0,this.nakama.resumeBanner()}scanQRCode(){this.codescan.scan({disableSuccessBeep:!0,disableAnimations:!0,resultDisplayDuration:0}).then(e=>{if(!e.cancelled)try{this.nakama.act_from_QRInfo(e.text.trim())}catch(i){console.log("scanQRCode_failed: ",i),this.modalCtrl.create({component:b.R,componentProps:{result:e}}).then(c=>c.present())}}).catch(e=>{console.log(e),this.p5toast.show({text:this.lang.text.Subscribes.CameraPermissionDenied})})}go_to_chatroom(e){this.lock_chatroom||(this.lock_chatroom=!0,this.modalCtrl.create({component:f.P,componentProps:{info:e}}).then(i=>{this.nakama.go_to_chatroom_without_admob_act(i),("online"!=e.status||"pending"!=e.status)&&delete e.is_new,this.nakama.rearrange_channels(),this.lock_chatroom=!1}))}check_notifications(e){let i=this.nakama.notifications_rearrange[e].server;this.nakama.check_notifications(this.nakama.notifications_rearrange[e],i.isOfficial,i.target)}add_new_group(){this.nakama.get_all_server_info(!0,!0).length?this.modalCtrl.create({component:h.B}).then(i=>i.present()):this.modalCtrl.create({component:p.Y}).then(i=>{this.p5toast.show({text:this.lang.text.Subscribes.Disconnected}),i.present()})}ionViewWillLeave(){this.nakama.subscribe_lock=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.IN),t.Y36(x.m),t.Y36(v.F),t.Y36(P.a),t.Y36(S.g),t.Y36(Z.b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subscribes"]],decls:14,vars:6,consts:[["value","colors","expand","inset",3,"value",4,"ngIf"],[4,"ngIf"],["button","",3,"click"],[1,"ion-text-center"],["value","colors","expand","inset",3,"value"],["accordionGroup",""],["value","colors"],["slot","header"],["slot","content"],[4,"ngFor","ngForOf"],["button","",3,"click",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],[1,"additional_form","status_bar_double"],["class","new_circle",4,"ngIf"],[1,"additional_form","bg_img_form"],["class","profile_img",3,"style","src",4,"ngIf"],[1,"form_margin","header"],[1,"server_target"],[1,"form_margin","content"],[1,"new_circle"],[1,"profile_img",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA()()(),t.TgZ(4,"ion-content"),t.YNc(5,A,8,4,"ion-accordion-group",0),t.YNc(6,M,7,2,"div",1),t.TgZ(7,"ion-item-divider")(8,"ion-label"),t._uU(9),t.qZA()(),t.YNc(10,Q,2,1,"div",1),t.TgZ(11,"ion-item",2),t.NdJ("click",function(){return i.add_new_group()}),t.TgZ(12,"ion-label",3),t._uU(13),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(i.lang.text.Subscribes.Title),t.xp6(2),t.Q6J("ngIf",i.nakama.notifications_rearrange.length),t.xp6(1),t.Q6J("ngIf",!i.cant_scan),t.xp6(3),t.Oqu(i.lang.text.Subscribes.Chat),t.xp6(1),t.Q6J("ngIf",i.nakama.channels.length),t.xp6(3),t.Oqu(i.lang.text.Subscribes.AddGroup))},directives:[s.Gu,s.sr,s.wd,s.W2,l.O5,s.eh,s.We,s.Ie,s.Q$,s.q_,l.sg,s.rH],styles:[".header[_ngcontent-%COMP%]{padding-bottom:4px}.content[_ngcontent-%COMP%]{color:#888;height:24px;display:table-cell;vertical-align:middle;padding:0 16px}.status_bar[_ngcontent-%COMP%]{width:5px;height:76%}.server_target[_ngcontent-%COMP%]{color:#888;padding-left:4px}.new_circle[_ngcontent-%COMP%]{position:relative;top:-5px;left:9px;width:8px;height:8px;border-radius:4px;background:#ff4961}"]}),n})()},{path:"chat-room",loadChildren:()=>o.e(9340).then(o.bind(o,9340)).then(n=>n.ChatRoomPageModule)},{path:"qrelse",loadChildren:()=>o.e(1388).then(o.bind(o,1388)).then(n=>n.QRelsePageModule)}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(I)],u.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,_.u5,s.Pc,Y]]}),n})()}}]);