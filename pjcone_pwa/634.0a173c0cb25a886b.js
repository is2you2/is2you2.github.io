"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[634],{634:(Z,g,i)=>{i.r(g),i.d(g,{CommunityServerPageModule:()=>p});var u=i(9808),l=i(4182),o=i(3996),m=i(9705),c=i(6505),e=i(9863),v=i(4606),h=i(2855),S=i(5742),C=i(1282);function _(t,a){if(1&t&&e._UZ(0,"img",10),2&t){const r=e.oxw();e.Q6J("src",r.QRCodeSRC,e.LSH)}}const f=[{path:"",component:(()=>{class t{constructor(r,s,d,n){this.statusBar=r,this.wsc=s,this.lang=d,this.global=n,this.info="",this.address_override="",this.useSSL=!1}ngOnInit(){this.address_override=this.wsc.address_override,this.useSSL="wss"==this.wsc.socket_header,new c(r=>{r.setup=()=>{r.loadStrings(`assets/data/infos/${this.lang.lang}/community-server.txt`,s=>{this.info=s.join("\n"),r.remove()})}}),this.QRCodeSRC=this.global.readasQRCodeFromId({type:"comm_server",value:{address_override:this.address_override.replace(/[^0-9.]/g,""),useSSL:this.useSSL}})}reconn_community_server(){"offline"==this.statusBar.settings.communityServer?this.wsc.initialize():this.wsc.client.close()}on_address_changed(r){r.detail.value!=this.wsc.address_override&&(this.wsc.address_override=this.address_override.replace(/[^0-9.]/g,""),this.wsc.address_override||(this.useSSL=!1,this.toggle_useSSL()),localStorage.setItem("wsc_address_override",this.wsc.address_override),this.wsc.client.close()),this.QRCodeSRC=this.global.readasQRCodeFromId({type:"comm_server",value:{address_override:this.address_override.replace(/[^0-9.]/g,""),useSSL:this.useSSL}})}toggle_useSSL(){this.useSSL=!this.useSSL,this.wsc.socket_header=this.useSSL?"wss":"ws",localStorage.setItem("wsc_socket_header",this.wsc.socket_header),this.wsc.client.close(),this.QRCodeSRC=this.global.readasQRCodeFromId({type:"comm_server",value:{address_override:this.address_override.replace(/[^0-9.]/g,""),useSSL:this.useSSL}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(v.g),e.Y36(h.Z),e.Y36(S.b),e.Y36(C.A))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-community-server"]],decls:24,vars:12,consts:[["slot","start"],["defaultHref","settings"],["disabled","",1,"infobox",2,"height","350px",3,"ngModel","ngModelChange"],["button","",3,"click"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["type","text",1,"ion-text-end",3,"ngModel","ngModelChange","ionChange"],["button","",3,"disabled","click"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],["style","width: 100%; height: auto;","alt","Loading",3,"src",4,"ngIf"],["alt","Loading",2,"width","100%","height","auto",3,"src"]],template:function(r,s){1&r&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button",1),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"textarea",2),e.NdJ("ngModelChange",function(n){return s.info=n}),e.qZA(),e.TgZ(11,"ion-item-divider")(12,"ion-label"),e._uU(13),e.qZA()(),e.TgZ(14,"ion-item",3),e.NdJ("click",function(){return s.reconn_community_server()}),e._UZ(15,"div",4),e.TgZ(16,"ion-label",5),e._uU(17),e.qZA(),e.TgZ(18,"ion-input",6),e.NdJ("ngModelChange",function(n){return s.address_override=n})("ionChange",function(n){return s.on_address_changed(n)}),e.qZA()(),e.TgZ(19,"ion-item",7),e.NdJ("click",function(){return s.toggle_useSSL()}),e.TgZ(20,"ion-label"),e._uU(21),e.qZA(),e.TgZ(22,"ion-toggle",8),e.NdJ("ngModelChange",function(n){return s.useSSL=n}),e.qZA()(),e.YNc(23,_,1,1,"img",9),e.qZA()),2&r&&(e.xp6(3),e.Oqu(s.lang.text.Settings.commServer),e.xp6(6),e.Oqu(s.lang.text.CommunityServer.AboutCommServer),e.xp6(1),e.Q6J("ngModel",s.info),e.xp6(3),e.Oqu(s.lang.text.CommunityServer.ServerStatus),e.xp6(2),e.Akn("background-color: "+s.statusBar.colors[s.statusBar.settings.communityServer]),e.xp6(2),e.Oqu(s.lang.text.CommunityServer.AddressInfo),e.xp6(1),e.Q6J("ngModel",s.address_override),e.xp6(1),e.Q6J("disabled",!s.address_override),e.xp6(2),e.Oqu(s.lang.text.CommunityServer.isSSL),e.xp6(1),e.Q6J("ngModel",s.useSSL),e.xp6(1),e.Q6J("ngIf",s.address_override))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.oU,o.cs,o.W2,o.rH,o.Q$,l.Fj,l.JJ,l.On,o.Ie,o.pK,o.j9,o.ho,o.w,u.O5],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(f)],m.Bz]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,l.u5,o.Pc,y]]}),t})()}}]);