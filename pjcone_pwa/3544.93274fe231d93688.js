"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3544],{3544:(S,h,o)=>{o.r(h),o.d(h,{WeblinkGenPageModule:()=>M});var d=o(1368),p=o(4716),a=o(5624),g=o(3332),c=o(1528),_=o(2272),m=o(5193),e=o(4496),I=o(4500),v=o(7756),G=o(7136),f=o(4668),k=o(5020),b=o(9240),C=o(3824);function y(s,u){if(1&s&&(e.I0R(0,"ion-select-option",11),e.OEk(1),e.C$Y()),2&s){const l=u.$implicit;e.E7m("value",l),e.yG2(),e.oRS("",l.name," ")}}function W(s,u){if(1&s&&(e.I0R(0,"ion-select-option",11),e.OEk(1),e.C$Y()),2&s){const l=u.$implicit;e.E7m("value",l),e.yG2(),e.cNF(l.name+" ("+l.server.name+")")}}const P=[{path:"",component:(()=>{var s;class u{constructor(t,n,r,i,E,$,O){this.lang=t,this.mClipboard=n,this.nakama=r,this.indexed=i,this.global=E,this.navCtrl=$,this.p5toast=O,this.userInput={root:void 0,servers:[],groups:[],group_dedi:void 0,open_prv_channel:"",open_channel:!1},this.servers=[],this.groups=[],this.rtcServer=[],this.BackButtonPressed=!1}InitBrowserBackButtonOverride(){window.history.pushState(null,null,window.location.href),window.onpopstate=()=>{this.BackButtonPressed||(this.BackButtonPressed=!0,this.navCtrl.back())}}ngOnInit(){this.targetBaseURL=0==location.host.indexOf("localhost")?`${m.uM}pjcone_pwa/`:`${location.protocol}//${location.host}${window.sub_path}`,this.result_address=this.targetBaseURL,this.InitBrowserBackButtonOverride(),this.servers=this.nakama.get_all_server_info(),this.groups=this.nakama.rearrange_group_list(),this.indexed.loadTextFromUserPath("servers/webrtc_server.json",(t,n)=>{t&&n&&(this.rtcServer=JSON.parse(n))});for(let t=this.groups.length-1;t>=0;t--)"missing"==this.groups[t].status&&this.groups.splice(t,1)}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.pop()}}SelectGroupServer(t){this.userInput.servers=t.detail.value,this.information_changed()}SelectGroupChannel(t){this.userInput.groups=t.detail.value,this.information_changed()}baseURLChanged(t){t.detail.value||(this.userInput.root=void 0),this.information_changed()}information_changed(){this.result_address=this.userInput.root||this.targetBaseURL;let t=0;for(let n=0,r=this.userInput.servers.length;n<r;n++)this.result_address+=t?"&":"?",this.result_address+="server=",this.result_address+=`${this.userInput.servers[n].name||""},${this.userInput.servers[n].address||""},${this.userInput.servers[n].useSSL||""},${this.userInput.servers[n].port||7350},${this.userInput.servers[n].key||""}`,t++;for(let n=0,r=this.userInput.groups.length;n<r;n++)this.result_address+=t?"&":"?",this.result_address+="group=",this.result_address+=`${this.userInput.groups[n].name},${this.userInput.groups[n].id}`,t++;if(this.userInput.open_prv_channel){this.result_address+=t?"&":"?",this.result_address+="open_prv_channel=";try{this.result_address+=`${this.userInput.open_prv_channel},${this.servers[0].isOfficial},${this.userInput.servers[0].target}`}catch{this.result_address+=`${this.userInput.open_prv_channel},,`}t++}this.userInput.open_channel&&(this.result_address+=t?"&":"?",this.result_address+="open_channel=",this.result_address+=`${this.userInput.groups[0].id},${this.userInput.groups[0].server.isOfficial},${this.userInput.groups[0].server.target}`,t++)}copy_result_address(){this.mClipboard.copy(this.result_address).catch(t=>{_.c.write(this.result_address).then(()=>{"DesktopPWA"==m.s1&&this.p5toast.show({text:`${this.lang.text.GlobalAct.PCClipboard}: ${this.result_address}`})}).catch(n=>{})})}paste_user_id(){var t=this;return(0,c.c)(function*(){t.userInput.open_prv_channel?t.userInput.open_prv_channel="":yield t.mClipboard.paste().then(n=>t.userInput.open_prv_channel=n).catch(function(){var n=(0,c.c)(function*(r){try{t.userInput.open_prv_channel=yield _.c.read()}catch{}});return function(r){return n.apply(this,arguments)}}()),t.information_changed()})()}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape}}return(s=u).\u0275fac=function(t){return new(t||s)(e.GI1(I.o),e.GI1(v._),e.GI1(G.h),e.GI1(f.k),e.GI1(k.A1),e.GI1(b.wX),e.GI1(C.O))},s.\u0275cmp=e.In1({type:s,selectors:[["app-weblink-gen"]],decls:31,vars:21,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","portal/settings"],[3,"click"],[1,"infobox",3,"ngModel","ngModelChange"],[1,"ion-text-end",3,"label","ngModel","placeholder","ngModelChange","ionInput"],["multiple","true",3,"label","placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],["button","",3,"disabled","click"],[1,"ignore_toggles",3,"ngModel","ngModelChange"],[1,"ion-text-right",3,"label","ngModel","placeholder","ngModelChange","ionInput"],[3,"value"]],template:function(t,n){1&t&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.OEk(3),e.C$Y(),e.I0R(4,"ion-buttons",1),e.wR5(5,"ion-back-button",2),e.C$Y()()(),e.I0R(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.OEk(9),e.C$Y()(),e.I0R(10,"div",3),e.qCj("click",function(){return n.copy_result_address()}),e.I0R(11,"textarea",4),e.iHE("ngModelChange",function(i){return e.kNx(n.result_address,i)||(n.result_address=i),i}),e.C$Y()(),e.I0R(12,"ion-item-divider")(13,"ion-label"),e.OEk(14),e.C$Y()(),e.I0R(15,"ion-item")(16,"ion-input",5),e.iHE("ngModelChange",function(i){return e.kNx(n.userInput.root,i)||(n.userInput.root=i),i}),e.qCj("ionInput",function(i){return n.baseURLChanged(i)}),e.C$Y()(),e.I0R(17,"ion-item")(18,"ion-select",6),e.qCj("ionChange",function(i){return n.SelectGroupServer(i)}),e.yuY(19,y,2,2,"ion-select-option",7),e.C$Y()(),e.I0R(20,"ion-item")(21,"ion-select",6),e.qCj("ionChange",function(i){return n.SelectGroupChannel(i)}),e.yuY(22,W,2,2,"ion-select-option",7),e.C$Y()(),e.I0R(23,"ion-item-divider")(24,"ion-label"),e.OEk(25),e.C$Y()(),e.I0R(26,"ion-item",8),e.qCj("click",function(){return n.userInput.open_channel=!n.userInput.open_channel,n.information_changed()}),e.I0R(27,"ion-toggle",9),e.iHE("ngModelChange",function(i){return e.kNx(n.userInput.open_channel,i)||(n.userInput.open_channel=i),i}),e.OEk(28),e.C$Y()(),e.I0R(29,"ion-item",8),e.qCj("click",function(){return n.paste_user_id()}),e.I0R(30,"ion-input",10),e.iHE("ngModelChange",function(i){return e.kNx(n.userInput.open_prv_channel,i)||(n.userInput.open_prv_channel=i),i}),e.qCj("ionInput",function(){return n.information_changed()}),e.C$Y()()()),2&t&&(e.yG2(3),e.cNF(n.lang.text.Settings.WebLinkGen),e.yG2(6),e.cNF(n.lang.text.WebLinkGen.subtitle),e.yG2(2),e.OKB("ngModel",n.result_address),e.yG2(3),e.cNF(n.lang.text.WebLinkGen.CustomInfo),e.yG2(2),e.E7m("label",n.lang.text.WebLinkGen.baseURL),e.OKB("ngModel",n.userInput.root),e.E7m("placeholder",n.targetBaseURL),e.yG2(2),e.E7m("label",n.lang.text.QuickQRShare.GroupServer)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.yG2(),e.E7m("ngForOf",n.servers),e.yG2(2),e.E7m("label",n.lang.text.QuickQRShare.Group)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.yG2(),e.E7m("ngForOf",n.groups),e.yG2(3),e.cNF(n.lang.text.WebLinkGen.AutoOpenChannel),e.yG2(),e.E7m("disabled",!n.userInput.groups.length||""!=n.userInput.open_prv_channel),e.yG2(),e.OKB("ngModel",n.userInput.open_channel),e.yG2(),e.cNF(n.lang.text.WebLinkGen.OpenGroupChannel),e.yG2(),e.E7m("disabled",n.userInput.open_channel),e.yG2(),e.E7m("label",n.lang.text.WebLinkGen.OpenPrivateChannel),e.OKB("ngModel",n.userInput.open_prv_channel),e.E7m("placeholder",n.lang.text.WebLinkGen.ClickToPaste))},dependencies:[d.ay,p.ot,p.ue,p._G,a.GS,a._i,a.wB,a.A5,a.Yb,a.S8,a.QR,a.Cy,a.gd,a.tM,a.E$,a.Md,a.UJ,a.IT,a.qG,a.Im],styles:[".ignore_toggles[_ngcontent-%COMP%]{pointer-events:none}"]}),u})()}];let R=(()=>{var s;class u{}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.a4G({type:s}),s.\u0275inj=e.s3X({imports:[g.qQ.forChild(P),g.qQ]}),u})(),M=(()=>{var s;class u{}return(s=u).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.a4G({type:s}),s.\u0275inj=e.s3X({imports:[d.MD,p.y,a.wZ,R]}),u})()}}]);