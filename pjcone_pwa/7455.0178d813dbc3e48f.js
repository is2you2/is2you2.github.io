"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7455],{2957:(O,v,a)=>{a.d(v,{G:()=>l});const l={FRONT:"front",BACK:"back"}},8181:(O,v,a)=>{a.d(v,{R:()=>Z});var e=a(9468),_=a(1325),l=a(3857),T=a(9080),C=a(6814),b=a(95);function k(t,m){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const g=e.oxw().$implicit;e.xp6(1),e.hij(" ",g.text," ")}}function f(t,m){if(1&t&&(e.TgZ(0,"a",8),e._uU(1),e.qZA()),2&t){const g=e.oxw().$implicit;e.Q6J("href",g.text,e.LSH),e.xp6(1),e.Oqu(g.text)}}function S(t,m){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,k,2,1,"span",6),e.YNc(2,f,2,2,"a",7),e.qZA()),2&t){const g=m.$implicit;e.xp6(1),e.Q6J("ngIf",!g.href),e.xp6(1),e.Q6J("ngIf",g.href)}}function P(t,m){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,S,3,2,"span",5),e.qZA()),2&t){const g=m.$implicit;e.xp6(1),e.Q6J("ngForOf",g)}}let Z=(()=>{var t;class m{constructor(r,u,p,x){this.navParams=r,this.modalCtrl=u,this.lang=p,this.nakama=x,this.info="QR\ucf54\ub4dc \ub610\ub294 \ubc14\ucf54\ub4dc\ub97c \uc778\uc2dd\ud558\uc600\uc73c\ub098 \uc774 \uc571\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uad6c\uc131\uc774 \uc544\ub2d9\ub2c8\ub2e4.",this.result={}}ngOnInit(){this.result=this.navParams.get("result"),this.result.text=this.result.content.split("\n");for(let r=0,u=this.result.text.length;r<u;r++){this.result.text[r]=this.result.text[r].split(" ");for(let p=0,x=this.result.text[r].length;p<x;p++){let A={};A.href=0==this.result.text[r][p].indexOf("http://")||0==this.result.text[r][p].indexOf("https://"),A.text=this.result.text[r][p],this.result.text[r][p]=A}}}}return(t=m).\u0275fac=function(r){return new(r||t)(e.Y36(_.X1),e.Y36(_.IN),e.Y36(l.b),e.Y36(T.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-qrelse"]],decls:23,vars:6,consts:[[1,"ion-no-border"],["slot","start",3,"click"],["defaultHref","subscribes"],["disabled","",1,"infobox",3,"ngModel","ngModelChange"],[1,"infobox","content_form"],[4,"ngFor","ngForOf"],[4,"ngIf"],["target","_system",3,"href",4,"ngIf"],["target","_system",3,"href"]],template:function(r,u){1&r&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"\ub0b4\uc6a9 \uc77d\uae30"),e.qZA(),e.TgZ(4,"ion-buttons",1),e.NdJ("click",function(){return u.modalCtrl.dismiss()}),e._UZ(5,"ion-back-button",2),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"textarea",3),e.NdJ("ngModelChange",function(x){return u.lang.text.QRElse.info=x}),e.qZA(),e._UZ(11,"ion-item-divider"),e.TgZ(12,"ion-item")(13,"ion-label")(14,"p"),e._uU(15),e.qZA(),e.TgZ(16,"h2"),e._uU(17),e.qZA()()(),e.TgZ(18,"ion-item-divider")(19,"ion-label"),e._uU(20),e.qZA()(),e.TgZ(21,"div",4),e.YNc(22,P,2,1,"div",5),e.qZA()()),2&r&&(e.xp6(9),e.Oqu(u.lang.text.QRElse.Title),e.xp6(1),e.Q6J("ngModel",u.lang.text.QRElse.info),e.xp6(5),e.Oqu(u.lang.text.QRElse.format),e.xp6(2),e.Oqu(u.result.format),e.xp6(3),e.Oqu(u.lang.text.QRElse.contents),e.xp6(2),e.Q6J("ngForOf",u.result.text))},dependencies:[C.sg,C.O5,b.Fj,b.JJ,b.On,_.oU,_.Sm,_.W2,_.Gu,_.Ie,_.rH,_.Q$,_.wd,_.sr,_.cs],styles:[".content_form[_ngcontent-%COMP%]{background-color:var(--ion-color-light);overflow-y:auto}"]}),m})()},7455:(O,v,a)=>{a.r(v),a.d(v,{SubscribesPageModule:()=>w});var e=a(6814),_=a(95),l=a(1325),T=a(5877),C=a(5861),b=a(2726);a(2957);const f=(0,b.fo)("BarcodeScanner",{web:()=>a.e(7606).then(a.bind(a,7606)).then(n=>new n.BarcodeScannerWeb)});var S=a(3641),P=a(6146),Z=a(8181),t=a(9468),m=a(9376),g=a(9080),r=a(7488),u=a(3857),p=a(6052),x=a(797);function A(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.scanQRCode())}),t._UZ(1,"ion-icon",7),t.qZA()}}function D(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(){t.CHM(i);const s=t.oxw().$implicit,d=t.oxw(3);return t.KtG(d.check_notifications(s))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&n){const i=t.oxw().$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(o.nakama.notifications_rearrange[i].request)}}function M(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,D,3,1,"ion-item",18),t.qZA()),2&n){const i=c.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.nakama.notifications_rearrange.length>i)}}const R=function(){return[0,1,2]};function Q(n,c){if(1&n&&(t.TgZ(0,"ion-accordion-group",12,13)(2,"ion-accordion",14)(3,"ion-item",15)(4,"ion-label"),t._uU(5),t.qZA()(),t.TgZ(6,"div",16),t.YNc(7,M,2,1,"div",17),t.qZA()()()),2&n){const i=t.oxw(2);t.Q6J("value",!1),t.xp6(5),t.Oqu(i.lang.text.Subscribes.has_noties),t.xp6(2),t.Q6J("ngForOf",t.DdM(3,R))}}function I(n,c){1&n&&t._UZ(0,"div",25)}function N(n,c){if(1&n&&t._UZ(0,"img",11),2&n){const i=t.oxw().$implicit;t.Akn("online"==i.status||3==i.redirect.type&&"pending"==i.status?"filter: grayscale(0) contrast(1)":"filter: grayscale(.9) contrast(1.4)"),t.Q6J("src",i.info.img,t.LSH)}}function U(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(){const d=t.CHM(i).$implicit,h=t.oxw(3);return t.KtG(h.go_to_chatroom(d))}),t.TgZ(1,"div",20),t.YNc(2,I,1,0,"div",21),t.qZA(),t.TgZ(3,"div",10),t.YNc(4,N,1,3,"img",22),t.qZA(),t.TgZ(5,"ion-label")(6,"div",23)(7,"table")(8,"tr")(9,"td"),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",24),t._uU(12),t.qZA()()()}if(2&n){const i=c.$implicit,o=t.oxw(3);t.xp6(1),t.Akn("background-color: "+o.statusBar.colors[i.status||"offline"]),t.xp6(1),t.Q6J("ngIf",i.is_new),t.xp6(2),t.Q6J("ngIf",i.info),t.xp6(6),t.hij(" ",i.info?i.info.name||i.info.display_name||o.lang.text.ChatRoom.noname_chatroom:i.title||o.lang.text.ChatRoom.noname_chatroom," "),t.xp6(2),t.hij(" ",i.last_comment||i.noti||o.lang.text.Subscribes.noMessageHistory," ")}}function B(n,c){if(1&n&&(t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.YNc(4,U,13,6,"ion-item",19),t.qZA()),2&n){const i=t.oxw(2);t.xp6(3),t.Oqu(i.lang.text.Subscribes.JoinedChannels),t.xp6(1),t.Q6J("ngForOf",i.nakama.channels)}}function F(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"div",26),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.add_new_group())}),t._UZ(2,"ion-icon",27),t.TgZ(3,"div")(4,"ion-label",28),t._uU(5),t.qZA()()()()}if(2&n){const i=t.oxw(2);t.xp6(5),t.Oqu(i.lang.text.Subscribes.NoChat)}}function J(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"ion-content"),t.YNc(1,Q,8,4,"ion-accordion-group",8),t.TgZ(2,"ion-item-divider")(3,"ion-label"),t._uU(4),t.qZA()(),t.TgZ(5,"ion-item",9),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.go_to_page("group-server"))}),t.TgZ(6,"div",10),t._UZ(7,"img",11),t.qZA(),t.TgZ(8,"ion-label"),t._uU(9),t.qZA()(),t.YNc(10,B,5,2,"div",5),t.YNc(11,F,6,1,"div",5),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.nakama.notifications_rearrange.length),t.xp6(3),t.Oqu(i.lang.text.Subscribes.myProfile),t.xp6(3),t.Akn(i.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);"),t.Q6J("src",i.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(i.nakama.users.self.display_name||i.lang.text.Profile.noname_user),t.xp6(1),t.Q6J("ngIf",i.nakama.channels.length),t.xp6(1),t.Q6J("ngIf",!i.nakama.channels.length)}}const Y=[{path:"",component:(()=>{var n;class c{constructor(o,s,d,h,y,E,L,$){this.modalCtrl=o,this.p5toast=s,this.nakama=d,this.statusBar=h,this.lang=y,this.global=E,this.nav=L,this.indexed=$,this.cant_dedicated=!1,this.EventListenerAct=W=>{W.detail.register(110,q=>{q(),this.StopScan(),document.removeEventListener("ionBackButton",this.EventListenerAct)})},this.StartScan=!1,this.lock_chatroom=!1}ngOnInit(){this.indexed.loadTextFromUserPath("servers/self/profile.img",(o,s)=>{o&&s&&(this.nakama.users.self.img=s.replace(/"|=|\\/g,""))})}ionViewWillEnter(){this.global.p5key&&this.global.p5key.KeyShortCut&&(this.global.p5key.KeyShortCut.Backquote=()=>{this.go_to_page("group-server")},this.global.p5key.KeyShortCut.Digit=o=>{this.nakama.channels.length>=o?this.go_to_chatroom(this.nakama.channels[o]):this.add_new_group()}),this.global.p5key&&this.global.p5key.KeyShortCut&&!this.global.p5key.KeyShortCut.AddAct&&(this.global.p5key.KeyShortCut.AddAct=()=>{this.add_new_group()})}ionViewDidEnter(){this.nakama.subscribe_lock=!0,this.nakama.resumeBanner(),("DesktopPWA"==S.n$||"MobilePWA"==S.n$)&&(this.cant_dedicated=!0)}go_to_page(o){this.nav.navigateForward(`settings/${o}`),this.nakama.removeBanner()}scanQRCode(){var o=this;return(0,C.Z)(function*(){let s=yield f.checkPermission({force:!0});const d="\uc628\uc804\ud55c \ub3d9\uc791 \ud6c4 \uc885\ub8cc";document.addEventListener("ionBackButton",o.EventListenerAct);try{if(!s.granted||o.StartScan)throw"\uc2dc\uc791 \ubd88\uac00\uc0c1\ud0dc";o.StartScan=!0,document.querySelector("body").classList.add("scanner-active"),yield f.hideBackground();const h=yield f.startScan();if(h.hasContent)try{if(0!=h.content.trim().indexOf(`${S.Oy}pjcone_pwa/?`))throw"\uc8fc\uc18c \uc2dc\uc791\uc774 \ub2e4\ub984";yield o.nakama.AddressToQRCodeAct(o.global.CatchGETs(h.content.trim()))}catch{o.modalCtrl.create({component:Z.R,componentProps:{result:h}}).then(E=>E.present())}throw d}catch(h){h!=d&&o.p5toast.show({text:o.lang.text.Subscribes.CameraPermissionDenied}),o.StopScan()}document.removeEventListener("ionBackButton",o.EventListenerAct)})()}StopScan(){this.StartScan=!1,document.querySelector("body").classList.remove("scanner-active"),f.showBackground(),f.stopScan()}go_to_chatroom(o){this.lock_chatroom||(this.lock_chatroom=!0,this.nakama.go_to_chatroom_without_admob_act(o),("online"!=o.status||"pending"!=o.status)&&delete o.is_new,this.lock_chatroom=!1)}check_notifications(o){let s=this.nakama.notifications_rearrange[o].server;this.nakama.check_notifications(this.nakama.notifications_rearrange[o],s.isOfficial,s.target)}add_new_group(){this.nakama.get_all_server_info(!0,!0).length?this.modalCtrl.create({component:P.B}).then(s=>{let d=this.global.p5key.KeyShortCut;this.global.p5key.KeyShortCut={},s.onDidDismiss().then(()=>{this.global.p5key.KeyShortCut=d,this.ionViewWillEnter()}),s.present()}):(this.p5toast.show({text:this.lang.text.Subscribes.Disconnected}),this.go_to_page("group-server"))}ionViewWillLeave(){this.nakama.subscribe_lock=!1,delete this.global.p5key.KeyShortCut.Backquote,delete this.global.p5key.KeyShortCut.Digit,delete this.global.p5key.KeyShortCut.AddAct,this.StopScan()}}return(n=c).\u0275fac=function(o){return new(o||n)(t.Y36(l.IN),t.Y36(m.F),t.Y36(g.a),t.Y36(r.g),t.Y36(u.b),t.Y36(p.AN),t.Y36(l.SH),t.Y36(x.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subscribes"]],decls:9,vars:5,consts:[[1,"ion-no-border"],["style","position: absolute; right: 116px; top: 16px; cursor: pointer;",3,"click",4,"ngIf"],[2,"position","absolute","right","68px","top","16px","cursor","pointer",3,"click"],["button","","name","add-circle-outline",2,"width","24px","height","24px"],[1,"header_online_circle",3,"click"],[4,"ngIf"],[2,"position","absolute","right","116px","top","16px","cursor","pointer",3,"click"],["name","scan-circle-outline",2,"width","24px","height","24px"],["value","colors","expand","inset",3,"value",4,"ngIf"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],["value","colors","expand","inset",3,"value"],["accordionGroup",""],["value","colors"],["slot","header"],["slot","content"],[4,"ngFor","ngForOf"],["button","",3,"click",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],[1,"additional_form","status_bar_double"],["class","new_circle",4,"ngIf"],["class","profile_img",3,"style","src",4,"ngIf"],[1,"form_margin","header"],[1,"form_margin","content"],[1,"new_circle"],[1,"disconnect_info",3,"click"],["color","medium","name","chatbubble-ellipses-outline",2,"width","60px","height","60px"],["color","medium"]],template:function(o,s){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.YNc(4,A,2,0,"div",1),t.TgZ(5,"div",2),t.NdJ("click",function(){return s.add_new_group()}),t._UZ(6,"ion-icon",3),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return s.nakama.toggle_all_session()}),t.qZA()()(),t.YNc(8,J,12,8,"ion-content",5)),2&o&&(t.xp6(3),t.Oqu(s.lang.text.Subscribes.Title),t.xp6(1),t.Q6J("ngIf",!s.cant_dedicated),t.xp6(3),t.Akn("background-color: "+s.statusBar.colors[s.statusBar.settings.groupServer]+"; cursor: pointer;"),t.xp6(1),t.Q6J("ngIf",!s.StartScan))},dependencies:[e.sg,e.O5,l.We,l.eh,l.W2,l.Gu,l.gu,l.Ie,l.rH,l.Q$,l.wd,l.sr],styles:[".header[_ngcontent-%COMP%]{padding-bottom:4px}.content[_ngcontent-%COMP%]{color:#888;height:24px;display:table-cell;vertical-align:middle;padding:0 16px}.status_bar[_ngcontent-%COMP%]{width:5px;height:76%}.server_target[_ngcontent-%COMP%]{color:#888;padding-left:4px}.new_circle[_ngcontent-%COMP%]{position:relative;top:-5px;left:9px;width:8px;height:8px;border-radius:4px;background:#ff4961}.disconnect_info[_ngcontent-%COMP%]{text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%) translateY(-50%)}"]}),c})()},{path:"chat-room",loadChildren:()=>Promise.all([a.e(4156),a.e(9745),a.e(7429),a.e(8592),a.e(4403)]).then(a.bind(a,4403)).then(n=>n.ChatRoomPageModule)},{path:"qrelse",loadChildren:()=>a.e(1936).then(a.bind(a,1936)).then(n=>n.QRelsePageModule)}];let K=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[T.Bz.forChild(Y),T.Bz]}),c})(),w=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[e.ez,_.u5,l.Pc,K]}),c})()}}]);