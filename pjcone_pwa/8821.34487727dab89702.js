"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8821],{8821:(O,h,u)=>{u.r(h),u.d(h,{WeblinkGenPageModule:()=>J});var g=u(6814),p=u(95),l=u(1325),c=u(5877),m=u(5861),f=u(9761),d=u(6845),e=u(9468),b=u(3857),I=u(4663),v=u(9080),k=u(797),G=u(9376),T=u(6052);function C(r,a){if(1&r&&(e.TgZ(0,"ion-select-option",13),e._uU(1),e.qZA()),2&r){const i=a.$implicit;e.Q6J("value",i),e.xp6(1),e.hij("",i.name," ")}}function M(r,a){if(1&r&&(e.TgZ(0,"ion-select-option",13),e._uU(1),e.qZA()),2&r){const i=a.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i.name+" ("+i.server.name+")")}}function Z(r,a){if(1&r){const i=e.EpF();e.TgZ(0,"div")(1,"ion-item")(2,"ion-input",14),e.NdJ("ionInput",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.information_changed())})("ngModelChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.userInput.tmp_user.email=n)}),e.qZA()(),e.TgZ(3,"ion-item")(4,"ion-input",15),e.NdJ("ionInput",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.information_changed())})("ngModelChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.userInput.tmp_user.password=n)}),e.qZA()(),e.TgZ(5,"ion-item")(6,"ion-input",15),e.NdJ("ionInput",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.information_changed())})("ngModelChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.userInput.tmp_user.display_name=n)}),e.qZA()()()}if(2&r){const i=e.oxw();e.xp6(2),e.Q6J("label",i.lang.text.Profile.email_address)("ngModel",i.userInput.tmp_user.email),e.xp6(2),e.Q6J("label",i.lang.text.Profile.password)("ngModel",i.userInput.tmp_user.password)("placeholder",i.userInput.tmp_user.pass_placeholder||i.lang.text.Profile.at_least),e.xp6(2),e.Q6J("label",i.lang.text.Profile.user_display_name)("ngModel",i.userInput.tmp_user.display_name)("placeholder",i.lang.text.Profile.name_placeholder)}}const W=[{path:"",component:(()=>{var r;class a{constructor(t,n,s,o,_,S,y){this.lang=t,this.mClipboard=n,this.nakama=s,this.indexed=o,this.p5toast=_,this.global=S,this.navCtrl=y,this.userInput={root:void 0,open_profile:!1,open_subscribes:!1,use_tmp_user:!1,use_test_server:!1,tmp_user:{email:void 0,password:void 0,pass_placeholder:void 0,display_name:void 0},servers:[],groups:[],group_dedi:void 0,open_prv_channel:"",open_channel:!1},this.servers=[],this.groups=[],this.rtcServer=[],this.isSSLConnect=!1,this.result_address=`${d.Oy}pjcone_pwa/`}ngOnInit(){this.isSSLConnect="https:"==window.location.protocol&&!d.bS,this.servers=this.nakama.get_all_server_info(),this.groups=this.nakama.rearrange_group_list(),this.indexed.loadTextFromUserPath("servers/webrtc_server.json",(t,n)=>{t&&n&&(this.rtcServer=JSON.parse(n))});for(let t=this.groups.length-1;t>=0;t--)"missing"==this.groups[t].status&&this.groups.splice(t,1)}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.pop()}}SelectGroupServer(t){this.userInput.servers=t.detail.value,this.information_changed()}SelectGroupChannel(t){this.userInput.groups=t.detail.value,this.information_changed(),!this.userInput.use_tmp_user&&this.userInput.groups.length&&this.p5toast.show({text:this.lang.text.WebLinkGen.CanMissedChnInfo})}baseURLChanged(t){t.detail.value||(this.userInput.root=void 0),this.information_changed()}information_changed(){this.result_address=this.userInput.root||`${d.Oy}pjcone_pwa/`;let t=0;this.userInput.use_test_server&&(this.result_address+=t?"&":"?",this.result_address+="use_test_server=true",t++);for(let n=0,s=this.userInput.servers.length;n<s;n++)this.result_address+=t?"&":"?",this.result_address+="server=",this.result_address+=`${this.userInput.servers[n].name||""},${this.userInput.servers[n].address||""},${this.userInput.servers[n].useSSL||""},${this.userInput.servers[n].port||7350},${this.userInput.servers[n].key||""}`,t++;this.userInput.open_profile&&(this.result_address+=t?"&":"?",this.result_address+="open_profile=true",t++);for(let n=0,s=this.userInput.groups.length;n<s;n++)this.result_address+=t?"&":"?",this.result_address+="group=",this.result_address+=`${this.userInput.groups[n].name},${this.userInput.groups[n].id}`,t++;if(this.userInput.open_subscribes&&(this.result_address+=t?"&":"?",this.result_address+="open_subscribes=true",t++),this.userInput.use_tmp_user){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=n.length;let o=8+Math.floor(8*Math.random());if(this.userInput.tmp_user.pass_placeholder="",!this.userInput.tmp_user.password)for(let _=0;_<o;_++)this.userInput.tmp_user.pass_placeholder+=n.charAt(Math.floor(Math.random()*s));this.result_address+=t?"&":"?",this.result_address+=`tmp_user=${this.userInput.tmp_user.email||"test@example.com"},${this.userInput.tmp_user.password||this.userInput.tmp_user.pass_placeholder||""},${this.userInput.tmp_user.display_name||""}`,t++}this.userInput.open_prv_channel&&(this.result_address+=t?"&":"?",this.result_address+="open_prv_channel=",this.result_address+=`${this.userInput.open_prv_channel},${this.servers[0].isOfficial},${this.userInput.servers[0].target}`,t++),this.userInput.open_channel&&(this.result_address+=t?"&":"?",this.result_address+="open_channel=",this.result_address+=`${this.userInput.groups[0].id},${this.userInput.groups[0].server.isOfficial},${this.userInput.groups[0].server.target}`,t++)}toggle_tmp_user(){this.userInput.use_tmp_user=!this.userInput.use_tmp_user,this.userInput.use_tmp_user||(this.userInput.tmp_user.display_name=void 0,this.userInput.tmp_user.email=void 0,this.userInput.tmp_user.password=void 0,this.userInput.tmp_user.pass_placeholder=void 0),this.information_changed()}copy_result_address(){this.mClipboard.copy(this.result_address).catch(t=>f.Z.write(this.result_address))}paste_user_id(){var t=this;return(0,m.Z)(function*(){t.userInput.open_prv_channel?t.userInput.open_prv_channel="":yield t.mClipboard.paste().then(n=>t.userInput.open_prv_channel=n).catch(function(){var n=(0,m.Z)(function*(s){return t.userInput.open_prv_channel=yield f.Z.read()});return function(s){return n.apply(this,arguments)}}()),t.information_changed()})()}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape}}return(r=a).\u0275fac=function(t){return new(t||r)(e.Y36(b.b),e.Y36(I.T),e.Y36(v.a),e.Y36(k.H),e.Y36(G.F),e.Y36(T.AN),e.Y36(l.SH))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-weblink-gen"]],decls:47,vars:28,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","portal/settings"],[3,"click"],[1,"infobox",3,"ngModel","ngModelChange"],["placeholder","https://is2you2.github.io/pjcone_pwa/",1,"ion-text-end",3,"label","ngModel","ngModelChange","ionInput"],["multiple","true",3,"label","placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],["button","",3,"click"],[1,"ignore_toggles",3,"ngModel","ngModelChange"],[4,"ngIf"],["button","",3,"disabled","click"],["color","medium",1,"ion-text-end"],[3,"value"],["placeholder","test@example.com",1,"ion-text-end",3,"label","ngModel","ionInput","ngModelChange"],[1,"ion-text-end",3,"label","ngModel","placeholder","ionInput","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",1),e._UZ(5,"ion-back-button",2),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"div",3),e.NdJ("click",function(){return n.copy_result_address()}),e.TgZ(11,"textarea",4),e.NdJ("ngModelChange",function(o){return n.result_address=o}),e.qZA()(),e.TgZ(12,"ion-item-divider")(13,"ion-label"),e._uU(14),e.qZA()(),e.TgZ(15,"ion-item")(16,"ion-input",5),e.NdJ("ngModelChange",function(o){return n.userInput.root=o})("ionInput",function(o){return n.baseURLChanged(o)}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-select",6),e.NdJ("ionChange",function(o){return n.SelectGroupServer(o)}),e.YNc(19,C,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(20,"ion-item",8),e.NdJ("click",function(){return n.userInput.use_test_server=!n.userInput.use_test_server,n.information_changed()}),e.TgZ(21,"ion-toggle",9),e.NdJ("ngModelChange",function(o){return n.userInput.use_test_server=o}),e._uU(22),e.qZA()(),e.TgZ(23,"ion-item",8),e.NdJ("click",function(){return n.userInput.open_profile=!n.userInput.open_profile,n.information_changed()}),e.TgZ(24,"ion-toggle",9),e.NdJ("ngModelChange",function(o){return n.userInput.open_profile=o}),e._uU(25),e.qZA()(),e.TgZ(26,"ion-item")(27,"ion-select",6),e.NdJ("ionChange",function(o){return n.SelectGroupChannel(o)}),e.YNc(28,M,2,2,"ion-select-option",7),e.qZA()(),e.TgZ(29,"ion-item",8),e.NdJ("click",function(){return n.userInput.open_subscribes=!n.userInput.open_subscribes,n.information_changed()}),e.TgZ(30,"ion-toggle",9),e.NdJ("ngModelChange",function(o){return n.userInput.open_subscribes=o}),e._uU(31),e.qZA()(),e.TgZ(32,"ion-item",8),e.NdJ("click",function(){return n.toggle_tmp_user()}),e.TgZ(33,"ion-toggle",9),e.NdJ("ngModelChange",function(o){return n.userInput.use_tmp_user=o}),e._uU(34),e.qZA()(),e.YNc(35,Z,7,8,"div",10),e.TgZ(36,"ion-item-divider")(37,"ion-label"),e._uU(38),e.qZA()(),e.TgZ(39,"ion-item",11),e.NdJ("click",function(){return n.userInput.open_channel=!n.userInput.open_channel,n.information_changed()}),e.TgZ(40,"ion-toggle",9),e.NdJ("ngModelChange",function(o){return n.userInput.open_channel=o}),e._uU(41),e.qZA()(),e.TgZ(42,"ion-item",11),e.NdJ("click",function(){return n.paste_user_id()}),e.TgZ(43,"ion-label"),e._uU(44),e.qZA(),e.TgZ(45,"ion-label",12),e._uU(46),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(n.lang.text.Settings.WebLinkGen),e.xp6(6),e.Oqu(n.lang.text.WebLinkGen.subtitle),e.xp6(2),e.Q6J("ngModel",n.result_address),e.xp6(3),e.Oqu(n.lang.text.WebLinkGen.CustomInfo),e.xp6(2),e.Q6J("label",n.lang.text.WebLinkGen.baseURL)("ngModel",n.userInput.root),e.xp6(2),e.Q6J("label",n.lang.text.QuickQRShare.GroupServer)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.xp6(1),e.Q6J("ngForOf",n.servers),e.xp6(2),e.Q6J("ngModel",n.userInput.use_test_server),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.UseTestServer),e.xp6(2),e.Q6J("ngModel",n.userInput.open_profile),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.OpenProfile),e.xp6(2),e.Q6J("label",n.lang.text.QuickQRShare.Group)("placeholder",n.lang.text.QuickQRShare.EmptyData),e.xp6(1),e.Q6J("ngForOf",n.groups),e.xp6(2),e.Q6J("ngModel",n.userInput.open_subscribes),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.OpenChannelTab),e.xp6(2),e.Q6J("ngModel",n.userInput.use_tmp_user),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.UseTempUser),e.xp6(1),e.Q6J("ngIf",n.userInput.use_tmp_user),e.xp6(3),e.Oqu(n.lang.text.WebLinkGen.AutoOpenChannel),e.xp6(1),e.Q6J("disabled",!n.userInput.servers.length||!n.userInput.groups.length||""!=n.userInput.open_prv_channel),e.xp6(1),e.Q6J("ngModel",n.userInput.open_channel),e.xp6(1),e.Oqu(n.lang.text.WebLinkGen.OpenGroupChannel),e.xp6(1),e.Q6J("disabled",!n.userInput.servers.length||n.userInput.open_channel),e.xp6(2),e.Oqu(n.lang.text.WebLinkGen.OpenPrivateChannel),e.xp6(2),e.Oqu(n.userInput.open_prv_channel?n.userInput.open_prv_channel:n.lang.text.WebLinkGen.ClickToPaste))},dependencies:[g.sg,g.O5,p.Fj,p.JJ,p.On,l.oU,l.Sm,l.W2,l.Gu,l.pK,l.Ie,l.rH,l.Q$,l.t9,l.n0,l.wd,l.ho,l.sr,l.w,l.QI,l.j9,l.cs],styles:[".ignore_toggles[_ngcontent-%COMP%]{pointer-events:none}"]}),a})()}];let P=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.Bz.forChild(W),c.Bz]}),a})(),J=(()=>{var r;class a{}return(r=a).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,p.u5,l.Pc,P]}),a})()}}]);