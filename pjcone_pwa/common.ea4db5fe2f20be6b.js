"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{7160:(b,C,g)=>{g.d(C,{c:()=>e});var M=g(2361),n=g(7683),t=g(3139);const e=(u,l)=>{let o,s;const a=(w,v,p)=>{if("undefined"==typeof document)return;const m=document.elementFromPoint(w,v);m&&l(m)?m!==o&&(f(),c(m,p)):f()},c=(w,v)=>{o=w,s||(s=o);const p=o;(0,M.c)(()=>p.classList.add("ion-activated")),v()},f=(w=!1)=>{if(!o)return;const v=o;(0,M.c)(()=>v.classList.remove("ion-activated")),w&&s!==o&&o.click(),o=void 0};return(0,t.createGesture)({el:u,gestureName:"buttonActiveDrag",threshold:0,onStart:w=>a(w.currentX,w.currentY,n.a),onMove:w=>a(w.currentX,w.currentY,n.b),onEnd:()=>{f(!0),(0,n.h)(),s=void 0}})}},8685:(b,C,g)=>{g.d(C,{g:()=>M});const M=(l,o,s,a,c)=>t(l[1],o[1],s[1],a[1],c).map(f=>n(l[0],o[0],s[0],a[0],f)),n=(l,o,s,a,c)=>c*(3*o*Math.pow(c-1,2)+c*(-3*s*c+3*s+a*c))-l*Math.pow(c-1,3),t=(l,o,s,a,c)=>u((a-=c)-3*(s-=c)+3*(o-=c)-(l-=c),3*s-6*o+3*l,3*o-3*l,l).filter(w=>w>=0&&w<=1),u=(l,o,s,a)=>{if(0===l)return((l,o,s)=>{const a=o*o-4*l*s;return a<0?[]:[(-o+Math.sqrt(a))/(2*l),(-o-Math.sqrt(a))/(2*l)]})(o,s,a);const c=(3*(s/=l)-(o/=l)*o)/3,f=(2*o*o*o-9*o*s+27*(a/=l))/27;if(0===c)return[Math.pow(-f,1/3)];if(0===f)return[Math.sqrt(-c),-Math.sqrt(-c)];const w=Math.pow(f/2,2)+Math.pow(c/3,3);if(0===w)return[Math.pow(f/2,.5)-o/3];if(w>0)return[Math.pow(-f/2+Math.sqrt(w),1/3)-Math.pow(f/2+Math.sqrt(w),1/3)-o/3];const v=Math.sqrt(Math.pow(-c/3,3)),p=Math.acos(-f/(2*Math.sqrt(Math.pow(-c/3,3)))),m=2*Math.pow(v,1/3);return[m*Math.cos(p/3)-o/3,m*Math.cos((p+2*Math.PI)/3)-o/3,m*Math.cos((p+4*Math.PI)/3)-o/3]}},5062:(b,C,g)=>{g.d(C,{i:()=>M});const M=n=>n&&""!==n.dir?"rtl"===n.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},1112:(b,C,g)=>{g.r(C),g.d(C,{startFocusVisible:()=>e});const M="ion-focused",t=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],e=u=>{let l=[],o=!0;const s=u?u.shadowRoot:document,a=u||document.body,c=E=>{l.forEach(_=>_.classList.remove(M)),E.forEach(_=>_.classList.add(M)),l=E},f=()=>{o=!1,c([])},w=E=>{o=t.includes(E.key),o||c([])},v=E=>{if(o&&E.composedPath){const _=E.composedPath().filter(i=>!!i.classList&&i.classList.contains("ion-focusable"));c(_)}},p=()=>{s.activeElement===a&&c([])};return s.addEventListener("keydown",w),s.addEventListener("focusin",v),s.addEventListener("focusout",p),s.addEventListener("touchstart",f),s.addEventListener("mousedown",f),{destroy:()=>{s.removeEventListener("keydown",w),s.removeEventListener("focusin",v),s.removeEventListener("focusout",p),s.removeEventListener("touchstart",f),s.removeEventListener("mousedown",f)},setFocus:c}}},4118:(b,C,g)=>{g.d(C,{C:()=>u,a:()=>t,d:()=>e});var M=g(5861),n=g(1643);const t=function(){var l=(0,M.Z)(function*(o,s,a,c,f,w){var v;if(o)return o.attachViewToDom(s,a,f,c);if(!(w||"string"==typeof a||a instanceof HTMLElement))throw new Error("framework delegate is missing");const p="string"==typeof a?null===(v=s.ownerDocument)||void 0===v?void 0:v.createElement(a):a;return c&&c.forEach(m=>p.classList.add(m)),f&&Object.assign(p,f),s.appendChild(p),yield new Promise(m=>(0,n.c)(p,m)),p});return function(s,a,c,f,w,v){return l.apply(this,arguments)}}(),e=(l,o)=>{if(o){if(l)return l.removeViewFromDom(o.parentElement,o);o.remove()}return Promise.resolve()},u=()=>{let l,o;return{attachViewToDom:function(){var c=(0,M.Z)(function*(f,w,v={},p=[]){var m,E;if(l=f,w){const i="string"==typeof w?null===(m=l.ownerDocument)||void 0===m?void 0:m.createElement(w):w;p.forEach(r=>i.classList.add(r)),Object.assign(i,v),l.appendChild(i),yield new Promise(r=>(0,n.c)(i,r))}else if(l.children.length>0){const i=null===(E=l.ownerDocument)||void 0===E?void 0:E.createElement("div");p.forEach(r=>i.classList.add(r)),i.append(...l.children),l.appendChild(i)}const _=document.querySelector("ion-app")||document.body;return o=document.createComment("ionic teleport"),l.parentNode.insertBefore(o,l),_.appendChild(l),l});return function(w,v){return c.apply(this,arguments)}}(),removeViewFromDom:()=>(l&&o&&(o.parentNode.insertBefore(l,o),o.remove()),Promise.resolve())}}},7683:(b,C,g)=>{g.d(C,{a:()=>t,b:()=>e,c:()=>n,d:()=>l,h:()=>u});const M={getEngine(){var o;const s=window;return s.TapticEngine||(null===(o=s.Capacitor)||void 0===o?void 0:o.isPluginAvailable("Haptics"))&&s.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(o){const s=this.getEngine();if(!s)return;const a=this.isCapacitor()?o.style.toUpperCase():o.style;s.impact({style:a})},notification(o){const s=this.getEngine();if(!s)return;const a=this.isCapacitor()?o.style.toUpperCase():o.style;s.notification({style:a})},selection(){this.impact({style:"light"})},selectionStart(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionStart():o.gestureSelectionStart())},selectionChanged(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionChanged():o.gestureSelectionChanged())},selectionEnd(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionEnd():o.gestureSelectionEnd())}},n=()=>{M.selection()},t=()=>{M.selectionStart()},e=()=>{M.selectionChanged()},u=()=>{M.selectionEnd()},l=o=>{M.impact(o)}},1473:(b,C,g)=>{g.d(C,{a:()=>c,b:()=>v,f:()=>f,g:()=>a,p:()=>p,s:()=>w});var M=g(5861),n=g(1643),t=g(7208);const u="ion-content",l=".ion-content-scroll-host",o=`${u}, ${l}`,s=m=>m&&"ION-CONTENT"===m.tagName,a=function(){var m=(0,M.Z)(function*(E){return s(E)?(yield new Promise(_=>(0,n.c)(E,_)),E.getScrollElement()):E});return function(_){return m.apply(this,arguments)}}(),c=m=>m.querySelector(l)||m.querySelector(o),f=m=>m.closest(o),w=(m,E)=>s(m)?m.scrollToTop(E):Promise.resolve(m.scrollTo({top:0,left:0,behavior:E>0?"smooth":"auto"})),v=(m,E,_,i)=>s(m)?m.scrollByPoint(E,_,i):Promise.resolve(m.scrollBy({top:_,left:E,behavior:i>0?"smooth":"auto"})),p=m=>(0,t.a)(m,u)},7208:(b,C,g)=>{g.d(C,{a:()=>t,b:()=>n,p:()=>M});const M=e=>console.warn(`[Ionic Warning]: ${e}`),n=(e,...u)=>console.error(`[Ionic Error]: ${e}`,...u),t=(e,...u)=>console.error(`<${e.tagName.toLowerCase()}> must be used inside ${u.join(" or ")}.`)},8439:(b,C,g)=>{g.d(C,{s:()=>M});const M=s=>{try{if(s instanceof class o{constructor(a){this.value=a}})return s.value;if(!e()||"string"!=typeof s||""===s)return s;const a=document.createDocumentFragment(),c=document.createElement("div");a.appendChild(c),c.innerHTML=s,l.forEach(p=>{const m=a.querySelectorAll(p);for(let E=m.length-1;E>=0;E--){const _=m[E];_.parentNode?_.parentNode.removeChild(_):a.removeChild(_);const i=t(_);for(let r=0;r<i.length;r++)n(i[r])}});const f=t(a);for(let p=0;p<f.length;p++)n(f[p]);const w=document.createElement("div");w.appendChild(a);const v=w.querySelector("div");return null!==v?v.innerHTML:w.innerHTML}catch(a){return console.error(a),""}},n=s=>{if(s.nodeType&&1!==s.nodeType)return;for(let c=s.attributes.length-1;c>=0;c--){const f=s.attributes.item(c),w=f.name;if(!u.includes(w.toLowerCase())){s.removeAttribute(w);continue}const v=f.value;null!=v&&v.toLowerCase().includes("javascript:")&&s.removeAttribute(w)}const a=t(s);for(let c=0;c<a.length;c++)n(a[c])},t=s=>null!=s.children?s.children:s.childNodes,e=()=>{var s;const a=window,c=null===(s=null==a?void 0:a.Ionic)||void 0===s?void 0:s.config;return!c||(c.get?c.get("sanitizerEnabled",!0):!0===c.sanitizerEnabled||void 0===c.sanitizerEnabled)},u=["class","id","href","src","name","slot"],l=["script","style","iframe","meta","link","object","embed"]},8117:(b,C,g)=>{g.d(C,{a:()=>M,b:()=>f,c:()=>l,d:()=>w,e:()=>r,f:()=>t,g:()=>n,h:()=>_,i:()=>o,j:()=>a,k:()=>v,l:()=>s,m:()=>u,n:()=>e,o:()=>c,p:()=>p,q:()=>m,r:()=>E,s:()=>i});const M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Back</title><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Back</title><path d='M368 64L144 256l224 192V64z'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close Circle</title><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",E="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Three</title><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Two</title><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},1316:(b,C,g)=>{g.r(C),g.d(C,{KEYBOARD_DID_CLOSE:()=>n,KEYBOARD_DID_OPEN:()=>M,copyVisualViewport:()=>i,keyboardDidClose:()=>p,keyboardDidOpen:()=>w,keyboardDidResize:()=>v,resetKeyboardAssist:()=>o,setKeyboardClose:()=>f,setKeyboardOpen:()=>c,startKeyboardAssist:()=>s,trackViewportChanges:()=>_});const M="ionKeyboardDidShow",n="ionKeyboardDidHide";let e={},u={},l=!1;const o=()=>{e={},u={},l=!1},s=r=>{a(r),r.visualViewport&&(u=i(r.visualViewport),r.visualViewport.onresize=()=>{_(r),w()||v(r)?c(r):p(r)&&f(r)})},a=r=>{r.addEventListener("keyboardDidShow",d=>c(r,d)),r.addEventListener("keyboardDidHide",()=>f(r))},c=(r,d)=>{m(r,d),l=!0},f=r=>{E(r),l=!1},w=()=>!l&&e.width===u.width&&(e.height-u.height)*u.scale>150,v=r=>l&&!p(r),p=r=>l&&u.height===r.innerHeight,m=(r,d)=>{const T=new CustomEvent(M,{detail:{keyboardHeight:d?d.keyboardHeight:r.innerHeight-u.height}});r.dispatchEvent(T)},E=r=>{const d=new CustomEvent(n);r.dispatchEvent(d)},_=r=>{e=Object.assign({},u),u=i(r.visualViewport)},i=r=>({width:Math.round(r.width),height:Math.round(r.height),offsetTop:r.offsetTop,offsetLeft:r.offsetLeft,pageTop:r.pageTop,pageLeft:r.pageLeft,scale:r.scale})},7741:(b,C,g)=>{g.d(C,{S:()=>n});const n={bubbles:{dur:1e3,circles:9,fn:(t,e,u)=>{const l=t*e/u-t+"ms",o=2*Math.PI*e/u;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":l}}}},circles:{dur:1e3,circles:8,fn:(t,e,u)=>{const l=e/u,o=t*l-t+"ms",s=2*Math.PI*l;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:8,fn:(t,e,u)=>({y1:14,y2:26,style:{transform:`rotate(${360/u*e+(e<u/2?180:-180)}deg)`,"animation-delay":t*e/u-t+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(t,e,u)=>({y1:12,y2:20,style:{transform:`rotate(${360/u*e+(e<u/2?180:-180)}deg)`,"animation-delay":t*e/u-t+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(t,e,u)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/u-t+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(t,e,u)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/u-t+"ms"}})}}},5713:(b,C,g)=>{g.r(C),g.d(C,{createSwipeBackGesture:()=>u});var M=g(1643),n=g(5062),t=g(3139);g(3509);const u=(l,o,s,a,c)=>{const f=l.ownerDocument.defaultView,w=(0,n.i)(l),p=r=>w?-r.deltaX:r.deltaX;return(0,t.createGesture)({el:l,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:r=>(r=>{const{startX:h}=r;return w?h>=f.innerWidth-50:h<=50})(r)&&o(),onStart:s,onMove:r=>{const h=p(r)/f.innerWidth;a(h)},onEnd:r=>{const d=p(r),h=f.innerWidth,T=d/h,k=(r=>w?-r.velocityX:r.velocityX)(r),D=k>=0&&(k>.2||d>h/2),O=(D?1-T:T)*h;let A=0;if(O>5){const P=O/Math.abs(k);A=Math.min(P,540)}c(D,T<=0?.01:(0,M.k)(0,T,.9999),A)}})}},2854:(b,C,g)=>{g.d(C,{c:()=>t,g:()=>u,h:()=>n,o:()=>o});var M=g(5861);const n=(s,a)=>null!==a.closest(s),t=(s,a)=>"string"==typeof s&&s.length>0?Object.assign({"ion-color":!0,[`ion-color-${s}`]:!0},a):a,u=s=>{const a={};return(s=>void 0!==s?(Array.isArray(s)?s:s.split(" ")).filter(c=>null!=c).map(c=>c.trim()).filter(c=>""!==c):[])(s).forEach(c=>a[c]=!0),a},l=/^[a-z][a-z0-9+\-.]*:/,o=function(){var s=(0,M.Z)(function*(a,c,f,w){if(null!=a&&"#"!==a[0]&&!l.test(a)){const v=document.querySelector("ion-router");if(v)return null!=c&&c.preventDefault(),v.push(a,f,w)}return!1});return function(c,f,w,v){return s.apply(this,arguments)}}()},6638:(b,C,g)=>{g.d(C,{B:()=>_});var M=g(655),n=g(5016),t=g(3260),e=g(9863),u=g(3996),l=g(3336),o=g(9912),s=g(4606),a=g(5742),c=g(1282),f=g(9808),w=g(4182);function v(i,r){if(1&i){const d=e.EpF();e.TgZ(0,"ion-item",25),e.NdJ("click",function(){const k=e.CHM(d).index;return e.oxw(2).select_server(k)}),e.TgZ(1,"ion-label"),e._uU(2),e.qZA()()}if(2&i){const d=r.$implicit;e.xp6(2),e.Oqu(d.name)}}function p(i,r){if(1&i){const d=e.EpF();e.TgZ(0,"ion-accordion-group",18,19),e.NdJ("click",function(){return e.CHM(d),e.oxw().isExpanded=!0}),e.TgZ(2,"ion-accordion",20)(3,"ion-item",21)(4,"ion-label"),e._uU(5),e.qZA(),e.TgZ(6,"ion-label",22),e._uU(7),e.qZA()(),e.TgZ(8,"ion-list",23),e.YNc(9,v,3,1,"ion-item",24),e.qZA()()()}if(2&i){const d=e.oxw();e.Q6J("disabled",d.isSaveClicked)("value",d.isExpanded),e.xp6(5),e.Oqu(d.lang.text.AddGroup.SelectServer),e.xp6(2),e.Oqu(d.servers[d.index].name),e.xp6(2),e.Q6J("ngForOf",d.servers)}}function m(i,r){if(1&i&&(e.TgZ(0,"ion-item",26)(1,"ion-label"),e._uU(2),e.qZA()()),2&i){const d=e.oxw();e.xp6(2),e.Oqu(d.lang.text.AddGroup.AfterCreateGroup)}}function E(i,r){if(1&i&&e._UZ(0,"img",27),2&i){const d=e.oxw();e.Q6J("src",d.QRCodeSRC,e.LSH)}}let _=(()=>{class i{constructor(d,h,T,k,x,D){this.modalCtrl=d,this.p5toast=h,this.nakama=T,this.statusBar=k,this.lang=x,this.global=D,this.userInput={server:void 0,id:void 0,name:void 0,description:void 0,max_count:void 0,lang_tag:void 0,open:!0,creator_id:void 0,img:void 0},this.servers=[],this.index=0,this.isExpanded=!0,this.cant_use_clipboard=!1,this.imageURL_disabled=!1,this.imageURL_placeholder=this.lang.text.Profile.pasteURI,this.isSaveClicked=!1,this.isSavedWell=!1,this.file_sel_id=""}ngOnInit(){let d=JSON.parse(localStorage.getItem("add-group"));d&&(this.userInput=d),this.servers=this.nakama.get_all_server_info(!0,!0),this.userInput.server=this.servers[this.index],this.cant_use_clipboard="DesktopPWA"!=n.n$,this.file_sel_id=`add_group_${(new Date).getTime()}`}select_server(d){this.index=d,this.userInput.server=this.servers[d],this.isExpanded=!1}imageURLPasted(){"DesktopPWA"==n.n$&&(this.imageURL_disabled=!0,t.Z.read().then(d=>{0==d.indexOf("http")?(this.userInput.img=d,this.imageURL_placeholder=d):0==d.indexOf("data:image")?this.nakama.limit_image_size(d,h=>this.userInput.img=h.canvas.toDataURL()):this.p5toast.show({text:this.lang.text.Profile.copyURIFirst})}),setTimeout(()=>{this.imageURL_disabled=!1},1500))}isPublicToggle(){this.userInput.open=!this.userInput.open}save(){if("online"!=this.statusBar.groupServer[this.servers[this.index].isOfficial][this.servers[this.index].target])return void this.p5toast.show({text:this.lang.text.AddGroup.cannot_use_selected_server});let d=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].client,h=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].session;this.userInput.owner=h.user_id,this.userInput.status="online",this.isSaveClicked=!0,this.userInput.lang_tag=this.userInput.lang_tag||this.lang.lang,this.userInput.max_count=this.userInput.max_count||2,d.createGroup(h,{name:this.userInput.name,lang_tag:this.userInput.lang_tag,description:this.userInput.description,max_count:this.userInput.max_count,open:this.userInput.open}).then(T=>{this.userInput.id=T.id,this.userInput.creator_id=this.nakama.servers[this.servers[this.index].isOfficial][this.servers[this.index].target].session.user_id,this.QRCodeSRC=this.global.readasQRCodeFromId({type:"group",id:this.userInput.id,title:this.userInput.name}),this.nakama.save_group_info(this.userInput,this.servers[this.index].isOfficial,this.servers[this.index].target),this.nakama.join_chat_with_modulation(T.id,3,this.servers[this.index].isOfficial,this.servers[this.index].target,k=>{this.isSavedWell=!0,localStorage.removeItem("add-group"),this.p5toast.show({text:this.lang.text.AddGroup.group_created}),setTimeout(()=>{this.modalCtrl.dismiss()},500)})}).catch(T=>{switch(console.error("\uadf8\ub8f9 \uc0dd\uc131 \uc2e4\ud328: ",T),T.status){case 400:setTimeout(()=>{this.p5toast.show({text:this.lang.text.AddGroup.NeedSetGroupName}),this.isSaveClicked=!1},500);break;case 409:setTimeout(()=>{this.p5toast.show({text:this.lang.text.AddGroup.AlreadyExist}),this.isSaveClicked=!1},500);break;default:setTimeout(()=>{this.p5toast.show({text:`${this.lang.text.AddGroup.UnexpectedErr}: ${T}`}),this.isSaveClicked=!1},500)}})}ionViewWillLeave(){this.isSavedWell||localStorage.setItem("add-group",JSON.stringify(this.userInput))}buttonClickLinkInputFile(){document.getElementById(this.file_sel_id).click()}inputImageSelected(d){return(0,M.mG)(this,void 0,void 0,function*(){let h=yield this.global.GetBase64ThroughFileReader(d.target.files[0]);this.nakama.limit_image_size(h,T=>this.userInput.img=T.canvas.toDataURL())})}go_back(){"AddGroupPageModule"!=this.modalCtrl.injector.source&&this.modalCtrl.dismiss()}}return i.\u0275fac=function(d){return new(d||i)(e.Y36(u.IN),e.Y36(l.F),e.Y36(o.a),e.Y36(s.g),e.Y36(a.b),e.Y36(c.A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group"]],decls:51,vars:34,consts:[["slot","start",3,"click"],["defaultHref",""],["value","colors","expand","inset",3,"disabled","value","click",4,"ngIf"],["button","",3,"disabled"],[1,"ion-text-right",3,"ngModel","placeholder","ngModelChange"],["button","",3,"disabled","click"],[1,"additional_form","bg_img_form"],[1,"profile_img",2,"filter","grayscale(0) contrast(1)",3,"src"],[3,"hidden","disabled","click"],["color","medium"],["hidden","","type","file","accept","image/*",3,"id","change"],["disabled","",4,"ngIf"],["style","width: 100%; height: auto;","alt","Loading",3,"src",4,"ngIf"],[1,"infobox",3,"disabled","ngModel","placeholder","ngModelChange"],[3,"disabled"],["type","number","min","2","placeholder","2",1,"ion-text-right",3,"ngModel","ngModelChange"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["value","colors","expand","inset",3,"disabled","value","click"],["accordionGroup",""],["value","colors"],["slot","header"],[1,"ion-text-right"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["disabled",""],["alt","Loading",2,"width","100%","height","auto",3,"src"]],template:function(d,h){1&d&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0),e.NdJ("click",function(){return h.go_back()}),e._UZ(5,"ion-back-button",1),e.qZA()()(),e.TgZ(6,"ion-content"),e.YNc(7,p,10,5,"ion-accordion-group",2),e.TgZ(8,"ion-item-divider")(9,"ion-label"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-item",3)(12,"ion-label"),e._uU(13),e.qZA(),e.TgZ(14,"ion-input",4),e.NdJ("ngModelChange",function(k){return h.userInput.name=k}),e.qZA()(),e.TgZ(15,"ion-item",5),e.NdJ("click",function(){return h.buttonClickLinkInputFile()}),e.TgZ(16,"div",6),e._UZ(17,"img",7),e.qZA(),e.TgZ(18,"ion-label")(19,"p"),e._uU(20),e.qZA(),e.TgZ(21,"h2"),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-item",8),e.NdJ("click",function(){return h.imageURLPasted()}),e.TgZ(24,"ion-label",9),e._uU(25),e.qZA()(),e.TgZ(26,"input",10),e.NdJ("change",function(k){return h.inputImageSelected(k)}),e.qZA(),e.TgZ(27,"ion-item-divider")(28,"ion-label"),e._uU(29),e.qZA()(),e.YNc(30,m,3,1,"ion-item",11),e.YNc(31,E,1,1,"img",12),e.TgZ(32,"ion-item-divider")(33,"ion-label"),e._uU(34),e.qZA()(),e.TgZ(35,"textarea",13),e.NdJ("ngModelChange",function(k){return h.userInput.description=k}),e.qZA(),e.TgZ(36,"ion-item",3)(37,"ion-label"),e._uU(38),e.qZA(),e.TgZ(39,"ion-input",4),e.NdJ("ngModelChange",function(k){return h.userInput.lang_tag=k}),e.qZA()(),e.TgZ(40,"ion-item",14)(41,"ion-label"),e._uU(42),e.qZA(),e.TgZ(43,"ion-input",15),e.NdJ("ngModelChange",function(k){return h.userInput.max_count=k}),e.qZA()(),e.TgZ(44,"ion-item",5),e.NdJ("click",function(){return h.isPublicToggle()}),e.TgZ(45,"ion-label"),e._uU(46),e.qZA(),e.TgZ(47,"ion-toggle",16),e.NdJ("ngModelChange",function(k){return h.userInput.open=k}),e.qZA()(),e.TgZ(48,"ion-item",5),e.NdJ("click",function(){return h.save()}),e.TgZ(49,"ion-label",17),e._uU(50),e.qZA()()()),2&d&&(e.xp6(3),e.Oqu(h.lang.text.AddGroup.Title),e.xp6(4),e.Q6J("ngIf",h.servers.length),e.xp6(3),e.Oqu(h.lang.text.AddGroup.GroupInfo),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Oqu(h.lang.text.AddGroup.DisplayName),e.xp6(1),e.Q6J("ngModel",h.userInput.name)("placeholder",h.lang.text.AddGroup.DisplayName_placeholder),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Q6J("src",h.userInput.img,e.LSH),e.xp6(3),e.Oqu((h.userInput.name||h.lang.text.AddGroup.DisplayName_placeholder)+" ("+h.userInput.server.target+")"),e.xp6(2),e.Oqu(h.lang.text.AddGroup.ClicktoChangeGroupImg),e.xp6(1),e.Q6J("hidden",h.cant_use_clipboard)("disabled",h.isSaveClicked||h.imageURL_disabled),e.xp6(2),e.Oqu(h.imageURL_placeholder),e.xp6(1),e.Q6J("id",h.file_sel_id),e.xp6(3),e.Oqu(h.lang.text.AddGroup.JoinThisGroup),e.xp6(1),e.Q6J("ngIf",!h.QRCodeSRC),e.xp6(1),e.Q6J("ngIf",h.QRCodeSRC),e.xp6(3),e.Oqu(h.lang.text.AddGroup.GroupDetail),e.xp6(1),e.Q6J("disabled",h.isSaveClicked)("ngModel",h.userInput.description)("placeholder",h.lang.text.AddGroup.GroupDetail_placeholder),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Oqu(h.lang.text.AddGroup.LanguageTag),e.xp6(1),e.Q6J("ngModel",h.userInput.lang_tag)("placeholder",h.lang.lang),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Oqu(h.lang.text.AddGroup.MemberMaxLimit),e.xp6(1),e.Q6J("ngModel",h.userInput.max_count),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Oqu(h.lang.text.AddGroup.IsOpen),e.xp6(1),e.Q6J("ngModel",h.userInput.open),e.xp6(1),e.Q6J("disabled",h.isSaveClicked),e.xp6(2),e.Oqu(h.lang.text.AddGroup.submit))},directives:[u.Gu,u.sr,u.wd,u.Sm,u.oU,u.cs,u.W2,f.O5,u.eh,u.We,u.Ie,u.Q$,u.q_,f.sg,u.rH,u.pK,u.j9,w.JJ,w.On,w.Fj,u.as,u.ho,u.w],styles:[""]}),i})()},4896:(b,C,g)=>{g.d(C,{Y:()=>p});var M=g(655),n=g(8888),t=g(9863),e=g(9912),u=g(3336),l=g(4606),o=g(3496),s=g(5742),a=g(3996),c=g(9808),f=g(4182);function w(m,E){if(1&m&&(t.TgZ(0,"ion-item-divider")(1,"ion-label"),t._uU(2),t.qZA()()),2&m){const _=t.oxw();t.xp6(2),t.Oqu(_.lang.text.GroupServer.JoinedServerList)}}function v(m,E){if(1&m){const _=t.EpF();t.TgZ(0,"ion-item",12),t.NdJ("click",function(){const d=t.CHM(_).$implicit;return t.oxw().link_group(d.isOfficial,d.target)}),t._UZ(1,"div",13),t.TgZ(2,"ion-label",14)(3,"h2"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-button",15),t.NdJ("click",function(){const d=t.CHM(_).$implicit;return t.oxw().view_detail(d)}),t._uU(8),t.qZA(),t.TgZ(9,"ion-button",15),t.NdJ("click",function(){const d=t.CHM(_).$implicit;return t.oxw().remove_server(d.isOfficial,d.target)}),t._uU(10),t.qZA()()}if(2&m){const _=E.$implicit,i=t.oxw();t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.groupServer[_.isOfficial][_.target]||"offline"]),t.xp6(3),t.Oqu(_.name),t.xp6(2),t.AsE("",_.target," (",_.address,")"),t.xp6(2),t.hij(" ",i.lang.text.GroupServer.ServerDetail," "),t.xp6(2),t.hij(" ","online"==i.statusBar.groupServer[_.isOfficial][_.target]?i.lang.text.GroupServer.RemoveAccount:i.lang.text.GroupServer.RemoveUnofficial," ")}}let p=(()=>{class m{constructor(_,i,r,d,h,T){this.nakama=_,this.p5toast=i,this.statusBar=r,this.indexed=d,this.lang=h,this.modalCtrl=T,this.dedicated_info={name:void 0,address:void 0,target:void 0,port:void 0,useSSL:void 0,isOfficial:void 0,key:void 0},this.add_custom_tog=!1,this.isOverrideButtonPressed=!1}ngOnInit(){this.servers=this.nakama.get_all_server_info(!0)}link_group(_,i){this.isOverrideButtonPressed?this.isOverrideButtonPressed=!1:("offline"==this.statusBar.groupServer[_][i]||"missing"==this.statusBar.groupServer[_][i]?(this.statusBar.groupServer[_][i]="pending",this.nakama.catch_group_server_header("pending"),this.nakama.users.self.online&&this.nakama.init_session(this.nakama.servers[_][i].info)):(this.nakama.on_socket_disconnected.group_unlink_by_user||(this.nakama.on_socket_disconnected.group_unlink_by_user=()=>{this.nakama.set_group_statusBar("offline",_,i)}),this.statusBar.groupServer[_][i]="offline",this.nakama.catch_group_server_header("offline"),this.nakama.servers[_][i].session&&this.nakama.servers[_][i].client.sessionLogout(this.nakama.servers[_][i].session,this.nakama.servers[_][i].session.token,this.nakama.servers[_][i].session.refresh_token).then(r=>{r||console.warn("\ub85c\uadf8\uc544\uc6c3 \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),this.nakama.noti_origin[_]&&this.nakama.noti_origin[_][i]&&delete this.nakama.noti_origin[_][i],this.nakama.rearrange_notifications()}),this.nakama.servers[_][i].socket&&this.nakama.servers[_][i].socket.disconnect(!0),this.nakama.channels_orig[_]&&this.nakama.channels_orig[_][i]&&Object.keys(this.nakama.channels_orig[_][i]).forEach(d=>{"missing"!=this.nakama.channels_orig[_][i][d].status&&delete this.nakama.channels_orig[_][i][d].status})),this.indexed.saveTextFileToUserPath(JSON.stringify(this.statusBar.groupServer),"servers/list.json"))}add_custom_dedicated(){if(!this.add_custom_tog){if(!this.dedicated_info.name)return void this.p5toast.show({text:this.lang.text.GroupServer.NeedSetDIsplayName});this.add_custom_tog=!0,this.dedicated_info.port=this.dedicated_info.port||7350,this.dedicated_info.useSSL=this.dedicated_info.useSSL||!1,this.dedicated_info.key=this.dedicated_info.key||"defaultkey",this.nakama.add_group_server(this.dedicated_info,()=>{this.servers=this.nakama.get_all_server_info(!0),this.dedicated_info.name=void 0,this.dedicated_info.address=void 0,this.dedicated_info.target=void 0,this.dedicated_info.port=void 0,this.dedicated_info.useSSL=void 0,this.dedicated_info.isOfficial=void 0}),setTimeout(()=>{this.add_custom_tog=!1},1e3)}}view_detail(_){this.isOverrideButtonPressed=!0,this.modalCtrl.create({component:n.P,componentProps:{data:_}}).then(i=>i.present())}remove_server(_,i){return(0,M.mG)(this,void 0,void 0,function*(){this.isOverrideButtonPressed=!0,yield this.nakama.remove_server(_,i),this.servers=this.nakama.get_all_server_info(!0)})}ionViewWillLeave(){this.nakama.on_socket_disconnected.group_unlink_by_user&&delete this.nakama.on_socket_disconnected.group_unlink_by_user,this.nakama.on_socket_disconnected.group_remove_by_user&&delete this.nakama.on_socket_disconnected.group_remove_by_user}go_back(){"GroupServerPageModule"!=this.modalCtrl.injector.source&&this.modalCtrl.dismiss()}}return m.\u0275fac=function(_){return new(_||m)(t.Y36(e.a),t.Y36(u.F),t.Y36(l.g),t.Y36(o.H),t.Y36(s.b),t.Y36(a.IN))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-group-server"]],decls:39,vars:26,consts:[["slot","start",3,"click"],["defaultHref",""],[4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"disabled"],[1,"ion-text-right",3,"ngModel","placeholder","ngModelChange"],["placeholder","192.168.0.1",1,"ion-text-right",3,"ngModel","ngModelChange"],["disabled","","placeholder","defaultkey",1,"ion-text-right",3,"ngModel","ngModelChange"],["disabled","","type","number","placeholder","7350",1,"ion-text-right",3,"ngModel","ngModelChange"],["button","",3,"disabled","click"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["button","",3,"click"],[1,"additional_form","status_bar_single"],[1,"form_margin"],[3,"click"]],template:function(_,i){1&_&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return i.go_back()}),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content"),t.YNc(7,w,3,1,"ion-item-divider",2),t.YNc(8,v,11,7,"ion-item",3),t.TgZ(9,"ion-item-divider")(10,"ion-label"),t._uU(11),t.qZA()(),t.TgZ(12,"ion-item",4)(13,"ion-label"),t._uU(14),t.qZA(),t.TgZ(15,"ion-input",5),t.NdJ("ngModelChange",function(d){return i.dedicated_info.name=d}),t.qZA()(),t.TgZ(16,"ion-item",4)(17,"ion-label"),t._uU(18),t.qZA(),t.TgZ(19,"ion-input",5),t.NdJ("ngModelChange",function(d){return i.dedicated_info.target=d}),t.qZA()(),t.TgZ(20,"ion-item",4)(21,"ion-label"),t._uU(22),t.qZA(),t.TgZ(23,"ion-input",6),t.NdJ("ngModelChange",function(d){return i.dedicated_info.address=d}),t.qZA()(),t.TgZ(24,"ion-item",4)(25,"ion-label"),t._uU(26),t.qZA(),t.TgZ(27,"ion-input",7),t.NdJ("ngModelChange",function(d){return i.dedicated_info.key=d}),t.qZA()(),t.TgZ(28,"ion-item",4)(29,"ion-label"),t._uU(30),t.qZA(),t.TgZ(31,"ion-input",8),t.NdJ("ngModelChange",function(d){return i.dedicated_info.port=d}),t.qZA()(),t.TgZ(32,"ion-item",9),t.NdJ("click",function(){return i.dedicated_info.useSSL=!i.dedicated_info.useSSL}),t.TgZ(33,"ion-label"),t._uU(34),t.qZA(),t.TgZ(35,"ion-toggle",10),t.NdJ("ngModelChange",function(d){return i.dedicated_info.useSSL=d}),t.qZA()(),t.TgZ(36,"ion-item",9),t.NdJ("click",function(){return i.add_custom_dedicated()}),t.TgZ(37,"ion-label",11),t._uU(38),t.qZA()()()),2&_&&(t.xp6(3),t.Oqu(i.lang.text.Settings.groupServer),t.xp6(4),t.Q6J("ngIf",i.nakama.servers.official.default||i.servers.length),t.xp6(1),t.Q6J("ngForOf",i.servers),t.xp6(3),t.Oqu(i.lang.text.GroupServer.RegisterServer),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.DisplayName),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.name)("placeholder",i.lang.text.GroupServer.DisplayName_placeholder),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.DivisionName),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.target)("placeholder",i.dedicated_info.name||i.lang.text.GroupServer.DivisionName_placeholder),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.Address),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.address),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.Key),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.key),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.Port),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.port),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.isSSL),t.xp6(1),t.Q6J("ngModel",i.dedicated_info.useSSL),t.xp6(1),t.Q6J("disabled",i.add_custom_tog),t.xp6(2),t.Oqu(i.lang.text.GroupServer.submit))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.oU,a.cs,a.W2,c.O5,a.rH,a.Q$,c.sg,a.Ie,a.YG,a.pK,a.j9,f.JJ,f.On,a.as,a.ho,a.w],styles:[""]}),m})()},9805:(b,C,g)=>{g.d(C,{$:()=>c});var M=g(655),n=g(9863),t=g(5742),e=g(3996),u=g(1282),l=g(3496),o=g(9808);function s(f,w){if(1&f){const v=n.EpF();n.TgZ(0,"div",5),n.NdJ("click",function(){return n.CHM(v),n.oxw().open_crop_tool()}),n._UZ(1,"ion-icon",15),n.qZA()}if(2&f){const v=n.oxw();n.xp6(1),n.Q6J("color",v.initialized?"dark":"medium")}}function a(f,w){if(1&f){const v=n.EpF();n.TgZ(0,"div",5),n.NdJ("click",function(){return n.CHM(v),n.oxw().apply_crop()}),n._UZ(1,"ion-icon",16),n.qZA()}if(2&f){const v=n.oxw();n.xp6(1),n.Q6J("color",v.initialized?"dark":"medium")}}let c=(()=>{class f{constructor(v,p,m,E,_,i,r){this.lang=v,this.modalCtrl=p,this.alertCtrl=m,this.loadingCtrl=E,this.global=_,this.navParams=i,this.indexed=r,this.initialized=!1,this.EventListenerAct=d=>{d.detail.register(130,h=>{})},this.is_cropping=!1,this.WithoutSave=!0}ngOnInit(){}ionViewDidEnter(){return(0,M.mG)(this,void 0,void 0,function*(){document.addEventListener("ionBackButton",this.EventListenerAct),this.mainLoading=yield this.loadingCtrl.create({message:this.lang.text.voidDraw.UseThisImage}),yield this.global.CreateGodotIFrame("voidDraw",{local_url:"assets/data/godot/voidDraw.pck",title:"voidDraw",image:Boolean(this.navParams.data.path),receive_image:(v,p=!1)=>{let m="data:image/png;base64,"+v.replace(/"|=|\\/g,""),E=new Date,_=E.getUTCFullYear(),i=("0"+(E.getMonth()+1)).slice(-2),r=("0"+E.getDate()).slice(-2),d=("0"+E.getHours()).slice(-2),h=("0"+E.getMinutes()).slice(-2),T=("0"+E.getSeconds()).slice(-2);this.modalCtrl.dismiss({name:`voidDraw_${_}-${i}-${r}_${d}-${h}-${T}.png`,img:m,loadingCtrl:this.mainLoading,is_modify:p})}},"new_canvas"),this.initialized=!0,this.navParams.data.path&&this.global.godot_window.new_canvas(JSON.stringify({width:this.navParams.data.width,height:this.navParams.data.height,path:"/userfs/"+this.navParams.data.path}))})}change_color(){this.initialized&&this.global.godot_window.change_color()}new_image(){if(!this.initialized)return;this.alertCtrl.create({header:this.lang.text.voidDraw.newDraw,inputs:[{name:"width",type:"number",placeholder:`${this.lang.text.voidDraw.width} (${this.lang.text.voidDraw.default_size}: 432)`},{name:"height",type:"number",placeholder:`${this.lang.text.voidDraw.height} (${this.lang.text.voidDraw.default_size}: 432)`}],buttons:[{text:this.lang.text.voidDraw.CreateNew,handler:p=>{p.width||(p.width=432),p.height||(p.height=432),this.global.godot_window.new_canvas(JSON.stringify(p))}}]}).then(p=>p.present())}change_line_weight(){!this.initialized||this.alertCtrl.create({header:this.lang.text.voidDraw.changeWeight,inputs:[{name:"weight",type:"number",placeholder:`${this.lang.text.voidDraw.weight} (${this.lang.text.voidDraw.default_size}: 1)`}],buttons:[{text:this.lang.text.voidDraw.apply,handler:v=>{this.global.godot_window.set_line_weight(v.weight||1)}}]}).then(v=>v.present())}act_history(v){switch(v){case-1:this.global.godot_window.undo_draw();break;case 1:this.global.godot_window.redo_draw();break;default:console.error("\uc788\uc744 \uc218 \uc5c6\ub294 \ub3d9\uc791 \uc694\uccad: ",v)}}open_crop_tool(){!this.initialized||(this.global.godot_window.open_crop_tool(),this.is_cropping=!0)}apply_crop(){!this.initialized||(this.global.godot_window.resize_canvas(),this.is_cropping=!1)}dismiss_draw(){this.is_cropping?(this.global.godot_window.resize_canvas(),this.is_cropping=!1):(this.mainLoading.present(),this.WithoutSave=!1,setTimeout(()=>{this.global.godot_window.save_image()},100))}ionViewDidLeave(){document.removeEventListener("ionBackButton",this.EventListenerAct),this.indexed.removeFileFromUserPath("tmp_files/modify_image.png"),this.WithoutSave&&this.mainLoading.remove()}}return f.\u0275fac=function(v){return new(v||f)(n.Y36(t.b),n.Y36(e.IN),n.Y36(e.Br),n.Y36(e.HT),n.Y36(u.A),n.Y36(e.X1),n.Y36(l.H))},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-void-draw"]],decls:39,vars:9,consts:[["slot","start",3,"click"],["defaultHref",""],["id","interface_table"],[2,"width","100%","height","100%"],[1,"button_panel"],[1,"button_panel","button_font",3,"click"],["slot","start","name","add",1,"icon_button",3,"color"],["class","button_panel button_font",3,"click",4,"ngIf"],["slot","start","name","checkmark",1,"icon_button",3,"color"],["colspan","6"],["id","voidDraw",1,"full_screen",2,"display","flex","background-color","grey","overflow","hidden"],["slot","start","name","arrow-undo",1,"icon_button",3,"color"],["slot","start","name","arrow-redo",1,"icon_button",3,"color"],["slot","start","name","color-palette",1,"icon_button",3,"color"],["slot","start","name","pencil",1,"icon_button",3,"color"],["slot","start","name","crop",1,"icon_button",3,"color"],["slot","start","name","checkmark-circle-outline",1,"icon_button",3,"color"]],template:function(v,p){1&v&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",0),n.NdJ("click",function(){return p.modalCtrl.dismiss()}),n._UZ(5,"ion-back-button",1),n.qZA()()(),n.TgZ(6,"ion-content")(7,"div",2)(8,"table",3)(9,"tr",4)(10,"table",4)(11,"tr",4)(12,"td")(13,"div",5),n.NdJ("click",function(){return p.new_image()}),n._UZ(14,"ion-icon",6),n.qZA()(),n.TgZ(15,"td"),n.YNc(16,s,2,1,"div",7),n.YNc(17,a,2,1,"div",7),n.qZA(),n.TgZ(18,"td")(19,"div",5),n.NdJ("click",function(){return p.dismiss_draw()}),n._UZ(20,"ion-icon",8),n.qZA()()()()(),n.TgZ(21,"tr")(22,"td",9),n._UZ(23,"div",10),n.qZA()(),n.TgZ(24,"tr",4)(25,"table",4)(26,"tr",4)(27,"td")(28,"div",5),n.NdJ("click",function(){return p.act_history(-1)}),n._UZ(29,"ion-icon",11),n.qZA()(),n.TgZ(30,"td")(31,"div",5),n.NdJ("click",function(){return p.act_history(1)}),n._UZ(32,"ion-icon",12),n.qZA()(),n.TgZ(33,"td")(34,"div",5),n.NdJ("click",function(){return p.change_color()}),n._UZ(35,"ion-icon",13),n.qZA()(),n.TgZ(36,"td")(37,"div",5),n.NdJ("click",function(){return p.change_line_weight()}),n._UZ(38,"ion-icon",14),n.qZA()()()()()()()()),2&v&&(n.xp6(3),n.Oqu(p.lang.text.ChatRoom.voidDraw),n.xp6(11),n.Q6J("color",p.initialized?"dark":"medium"),n.xp6(2),n.Q6J("ngIf",!p.is_cropping),n.xp6(1),n.Q6J("ngIf",p.is_cropping),n.xp6(3),n.Q6J("color",p.initialized?"dark":"medium"),n.xp6(9),n.Q6J("color",p.global.godot_window&&p.global.godot_window.current_act&&0!=p.global.godot_window.current_act?"dark":"medium"),n.xp6(3),n.Q6J("color",p.global.godot_window&&p.global.godot_window.current_act!=p.global.godot_window.draw_length?"dark":"medium"),n.xp6(3),n.Q6J("color",p.initialized?"dark":"medium"),n.xp6(3),n.Q6J("color",p.initialized?"dark":"medium"))},directives:[e.Gu,e.sr,e.wd,e.Sm,e.oU,e.cs,e.W2,e.gu,o.O5],styles:["#interface_table[_ngcontent-%COMP%]{position:absolute;top:0px;left:0px;width:100%;height:100%}.button_panel[_ngcontent-%COMP%]{width:100%;height:56px;background-color:var(--voidDraw-menu-background)}.button_font[_ngcontent-%COMP%]{width:100%;display:inline-block;text-align:center;cursor:pointer}.icon_button[_ngcontent-%COMP%]{width:27px;height:27px;transform:translateY(50%)}"]}),f})()}}]);