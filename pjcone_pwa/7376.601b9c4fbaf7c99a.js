"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7376],{6720:(T,E,a)=>{a.d(E,{w:()=>l});const l={FRONT:"front",BACK:"back"}},9892:(T,E,a)=>{a.d(E,{c:()=>y});var e=a(4496),x=a(9240),l=a(5624),k=a(4500),S=a(7136),R=a(1368),I=a(4716);function v(t,p){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const g=e.GaO().$implicit;e.yG2(),e.oRS(" ",g.text," ")}}function C(t,p){if(1&t&&(e.I0R(0,"a",8),e.OEk(1),e.C$Y()),2&t){const g=e.GaO().$implicit;e.E7m("href",g.text,e.K6U),e.yG2(),e.cNF(g.text)}}function A(t,p){if(1&t&&(e.I0R(0,"span"),e.yuY(1,v,2,1,"span",6)(2,C,2,2,"a",7),e.C$Y()),2&t){const g=p.$implicit;e.yG2(),e.E7m("ngIf",!g.href),e.yG2(),e.E7m("ngIf",g.href)}}function G(t,p){if(1&t&&(e.I0R(0,"div"),e.yuY(1,A,3,2,"span",5),e.C$Y()),2&t){const g=p.$implicit;e.yG2(),e.E7m("ngForOf",g)}}let y=(()=>{var t;class p{constructor(_,u,h,b){this.navParams=_,this.modalCtrl=u,this.lang=h,this.nakama=b,this.info="QR\ucf54\ub4dc \ub610\ub294 \ubc14\ucf54\ub4dc\ub97c \uc778\uc2dd\ud558\uc600\uc73c\ub098 \uc774 \uc571\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uad6c\uc131\uc774 \uc544\ub2d9\ub2c8\ub2e4.",this.result={},this.BackButtonPressed=!1}InitBrowserBackButtonOverride(){window.history.replaceState(null,null,window.location.href),window.onpopstate=()=>{this.BackButtonPressed||(this.BackButtonPressed=!0,this.modalCtrl.dismiss())}}ngOnInit(){this.InitBrowserBackButtonOverride(),this.result=this.navParams.get("result"),this.result.text=this.result.content.split("\n");for(let _=0,u=this.result.text.length;_<u;_++){this.result.text[_]=this.result.text[_].split(" ");for(let h=0,b=this.result.text[_].length;h<b;h++){let O={};O.href=0==this.result.text[_][h].indexOf("http://")||0==this.result.text[_][h].indexOf("https://"),O.text=this.result.text[_][h],this.result.text[_][h]=O}}}}return(t=p).\u0275fac=function(_){return new(_||t)(e.GI1(x.a6),e.GI1(l.qS),e.GI1(k.o),e.GI1(S.h))},t.\u0275cmp=e.In1({type:t,selectors:[["app-qrelse"]],decls:23,vars:6,consts:[[1,"ion-no-border"],["slot","start",3,"click"],["defaultHref","subscribes"],["disabled","",1,"infobox",3,"ngModel","ngModelChange"],[1,"infobox","content_form"],[4,"ngFor","ngForOf"],[4,"ngIf"],["target","_system",3,"href",4,"ngIf"],["target","_system",3,"href"]],template:function(_,u){1&_&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.OEk(3,"\ub0b4\uc6a9 \uc77d\uae30"),e.C$Y(),e.I0R(4,"ion-buttons",1),e.qCj("click",function(){return u.modalCtrl.dismiss()}),e.wR5(5,"ion-back-button",2),e.C$Y()()(),e.I0R(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e.OEk(9),e.C$Y()(),e.I0R(10,"textarea",3),e.iHE("ngModelChange",function(b){return e.kNx(u.lang.text.QRElse.info,b)||(u.lang.text.QRElse.info=b),b}),e.C$Y(),e.wR5(11,"ion-item-divider"),e.I0R(12,"ion-item")(13,"ion-label")(14,"p"),e.OEk(15),e.C$Y(),e.I0R(16,"h2"),e.OEk(17),e.C$Y()()(),e.I0R(18,"ion-item-divider")(19,"ion-label"),e.OEk(20),e.C$Y()(),e.I0R(21,"div",4),e.yuY(22,G,2,1,"div",5),e.C$Y()()),2&_&&(e.yG2(9),e.cNF(u.lang.text.QRElse.Title),e.yG2(),e.OKB("ngModel",u.lang.text.QRElse.info),e.yG2(5),e.cNF(u.lang.text.QRElse.format),e.yG2(2),e.cNF(u.result.format),e.yG2(3),e.cNF(u.lang.text.QRElse.contents),e.yG2(2),e.E7m("ngForOf",u.result.text))},dependencies:[R.ay,R.u_,I.ot,I.ue,I._G,l.GS,l._i,l.wB,l.Yb,l.S8,l.QR,l.tM,l.Md,l.Im],styles:[".content_form[_ngcontent-%COMP%]{background-color:var(--ion-color-light);overflow-y:auto}"]}),p})()},7376:(T,E,a)=>{a.r(E),a.d(E,{SubscribesPageModule:()=>j});var e=a(1368),x=a(4716),l=a(5624),k=a(3332),S=a(1528),R=a(6400);a(6720);const v=(0,R.C_)("BarcodeScanner",{web:()=>a.e(8456).then(a.bind(a,8456)).then(o=>new o.BarcodeScannerWeb)});var C=a(5193),A=a(9492),G=a(9892),y=a(3428),t=a(4496),p=a(9240),g=a(3824),_=a(7136),u=a(4180),h=a(4500),b=a(5020),O=a(4668);function M(o,d){if(1&o){const i=t.KQA();t.I0R(0,"div",6),t.qCj("click",function(){t.usT(i);const s=t.GaO();return t.CGJ(s.scanQRCode())}),t.wR5(1,"ion-icon",7),t.C$Y()}}function D(o,d){if(1&o){const i=t.KQA();t.I0R(0,"ion-item",12),t.qCj("click",function(){t.usT(i);const s=t.GaO().$implicit,r=t.GaO(3);return t.CGJ(r.check_notifications(s))}),t.I0R(1,"ion-label"),t.OEk(2),t.C$Y()()}if(2&o){const i=t.GaO().$implicit,n=t.GaO(3);t.yG2(2),t.cNF(n.nakama.notifications_rearrange[i].request)}}function B(o,d){if(1&o&&(t.I0R(0,"div"),t.yuY(1,D,3,1,"ion-item",21),t.C$Y()),2&o){const i=d.$implicit,n=t.GaO(3);t.yG2(),t.E7m("ngIf",n.nakama.notifications_rearrange.length>i)}}const Y=()=>[0,1,2];function $(o,d){if(1&o&&(t.I0R(0,"ion-accordion-group",15,16)(2,"ion-accordion",17)(3,"ion-item",18)(4,"ion-label"),t.OEk(5),t.C$Y()(),t.I0R(6,"div",19),t.yuY(7,B,2,1,"div",20),t.C$Y()()()),2&o){const i=t.GaO(2);t.E7m("value",!1),t.yG2(5),t.cNF(i.lang.text.Subscribes.has_noties),t.yG2(2),t.E7m("ngForOf",t.q4q(3,Y))}}function F(o,d){if(1&o&&t.wR5(0,"div",29),2&o){const i=t.GaO().$implicit;t.m_g("background-image: linear-gradient(to right, #0000, #"+(i.color||"abcdef")+"44)")}}function N(o,d){if(1&o){const i=t.KQA();t.I0R(0,"ion-item",12),t.qCj("click",function(){const r=t.usT(i).$implicit,c=t.GaO(3);return t.CGJ(c.go_to_chatroom(r))}),t.I0R(1,"div",23),t.wR5(2,"img",24)(3,"div",25),t.C$Y(),t.yuY(4,F,1,2,"div",26),t.I0R(5,"ion-label")(6,"div",27)(7,"table")(8,"tr")(9,"td"),t.OEk(10),t.C$Y()()()(),t.I0R(11,"div",28),t.OEk(12),t.C$Y()()()}if(2&o){const i=d.$implicit,n=t.GaO(3);t.yG2(2),t.m_g("online"==i.status||3==i.redirect.type&&"pending"==i.status?"filter: grayscale(0) contrast(1)":"filter: grayscale(.9) contrast(1.4)"),t.E7m("src",i.info&&i.info.img||(i.local?"assets/data/local.svg":"assets/data/channel.svg"),t.K6U),t.yG2(),t.m_g("background-color: "+n.statusBar.colors[i.status||"offline"]),t.yG2(),t.E7m("ngIf",i.is_new),t.yG2(6),t.oRS(" ",i.info?i.info.name||i.info.display_name||n.lang.text.ChatRoom.noname_chatroom:i.title||n.lang.text.ChatRoom.noname_chatroom," "),t.yG2(2),t.oRS(" ",i.last_comment||i.noti||n.lang.text.Subscribes.noMessageHistory," ")}}function w(o,d){if(1&o&&(t.I0R(0,"div")(1,"ion-item-divider")(2,"ion-label"),t.OEk(3),t.C$Y()(),t.yuY(4,N,13,8,"ion-item",22),t.C$Y()),2&o){const i=t.GaO(2);t.yG2(3),t.cNF(i.lang.text.Subscribes.JoinedChannels),t.yG2(),t.E7m("ngForOf",i.nakama.channels)}}function Q(o,d){if(1&o){const i=t.KQA();t.I0R(0,"div")(1,"div",30),t.qCj("click",function(){t.usT(i);const s=t.GaO(2);return t.CGJ(s.add_new_group())}),t.wR5(2,"ion-icon",31),t.I0R(3,"div")(4,"ion-label",32),t.OEk(5),t.C$Y()()()()}if(2&o){const i=t.GaO(2);t.yG2(5),t.cNF(i.lang.text.Subscribes.NoChat)}}function K(o,d){if(1&o){const i=t.KQA();t.I0R(0,"ion-content"),t.yuY(1,$,8,4,"ion-accordion-group",8),t.I0R(2,"div",9)(3,"ion-item-divider")(4,"ion-label"),t.OEk(5),t.C$Y(),t.I0R(6,"ion-button",10),t.qCj("click",function(){t.usT(i);const s=t.GaO();return t.CGJ(s.open_link("https://is2you2.github.io/"))}),t.OEk(7),t.C$Y()(),t.wR5(8,"div",11),t.C$Y(),t.I0R(9,"ion-item-divider")(10,"ion-label"),t.OEk(11),t.C$Y()(),t.I0R(12,"ion-item",12),t.qCj("click",function(){t.usT(i);const s=t.GaO();return t.CGJ(s.go_to_page("group-server"))}),t.I0R(13,"div",13),t.wR5(14,"img",14),t.C$Y(),t.I0R(15,"ion-label"),t.OEk(16),t.C$Y()(),t.yuY(17,w,5,2,"div",5)(18,Q,6,1,"div",5),t.C$Y()}if(2&o){const i=t.GaO();t.yG2(),t.E7m("ngIf",i.nakama.notifications_rearrange.length),t.yG2(),t.E7m("hidden",i.isAdHiding),t.yG2(3),t.cNF(i.lang.text.Settings.CommunityAds),t.yG2(2),t.oRS(" ",i.lang.text.Settings.AdsContact," "),t.yG2(4),t.cNF(i.lang.text.Subscribes.myProfile),t.yG2(3),t.m_g(i.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);"),t.E7m("src",i.nakama.users.self.img,t.K6U),t.yG2(2),t.cNF(i.nakama.users.self.display_name||i.lang.text.Profile.noname_user),t.yG2(),t.E7m("ngIf",i.nakama.channels.length),t.yG2(),t.E7m("ngIf",!i.nakama.channels.length)}}const U=[{path:"",component:(()=>{var o;class d{constructor(n,s,r,c,m,P,f,W){this.modalCtrl=n,this.p5toast=s,this.nakama=r,this.statusBar=c,this.lang=m,this.global=P,this.nav=f,this.indexed=W,this.availables=[],this.isAdHiding=!0,this.cant_dedicated=!1,this.EventListenerAct=X=>{X.detail.register(110,H=>{H(),this.StopScan(),document.removeEventListener("ionBackButton",this.EventListenerAct)})},this.StartScan=!1,this.lock_chatroom=!1}ngOnInit(){this.add_admob_banner(),this.indexed.loadTextFromUserPath("servers/self/profile.img",(n,s)=>{n&&s&&(this.nakama.users.self.img=s.replace(/"|=|\\/g,""))})}checkAdsInfo(){var n=this;return(0,S.c)(function*(){try{let s=yield fetch(`${C.uM}pjcone_ads/${n.lang.lang}.txt`);if(!s.ok)throw"\uad11\uace0\uac00 \uc5c6\ub294 \uac83\uc73c\ub85c \ub2e8\uc815\ud569\ub2c8\ub2e4";{let r=yield(yield s.blob()).text();n.indexed.saveTextFileToUserPath(r,"ads_list.txt");let c=r.split("\n");n.listAvailableAds(c)}}catch{n.indexed.loadTextFromUserPath("ads_list.txt",(r,c)=>{r&&c&&n.listAvailableAds(c.split("\n"))})}})()}listAvailableAds(n){let r,s=(new Date).getTime();this.availables.length=0;for(let m=0,P=n.length;m<P;m++){let f=n[m].split(",");Number(f[0])<s?s<Number(f[1])&&this.availables.push([Number(f[0]),Number(f[1]),f[2]]):r?Number(f[0])<r&&(r=Number(f[0])):r=Number(f[0])}this.AD_Div.childNodes.forEach(m=>{m.remove()}),this.availables.length?this.displayRandomAds():r&&(this.refreshAds=setTimeout(()=>{this.checkAdsInfo()},r-(new Date).getTime()))}displayRandomAds(){this.isAdHiding=!0;let n=Math.floor(Math.random()*this.availables.length),s=this.availables[n];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(c,m)=>{c&&m&&this.listAvailableAds(m.split("\n"))})},s[1]-(new Date).getTime());let r=document.createElement("iframe");r.id="AdFrame",r.setAttribute("src",s[2]),r.setAttribute("frameborder","0"),r.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(r)}open_link(n){window.open(n,"_system")}add_admob_banner(){var n=this;return(0,S.c)(function*(){y.i8.addListener(y.st.SizeChanged,r=>{n.nakama.appMargin=r.height;const c=document.querySelector("ion-router-outlet");0===n.nakama.appMargin?c.style.marginBottom="":n.nakama.appMargin>0&&(c.style.marginBottom=n.nakama.appMargin+"px")});const s={adId:"ca-app-pub-6577630868247944/4829889344",adSize:y.Ko.ADAPTIVE_BANNER,position:y.iq.BOTTOM_CENTER};try{if(n.nakama.isBannerShowing=!1,!(yield fetch(`${C.uM}pjcone_ads/admob.txt`)).ok)throw"\uc900\ube44\ub41c \uad11\uace0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4";y.i8.showBanner(s).then(()=>{n.nakama.isBannerShowing=!0})}catch(r){console.log(r)}})()}try_add_shortcut(){this.global.p5key&&this.global.p5key.KeyShortCut?this.AddShortcut():setTimeout(()=>{this.try_add_shortcut()},100)}AddShortcut(){this.global.p5key&&this.global.p5key.KeyShortCut&&(this.global.p5key.KeyShortCut.Backquote=()=>{this.go_to_page("group-server")},this.global.p5key.KeyShortCut.Digit=n=>{this.nakama.channels.length>n?this.go_to_chatroom(this.nakama.channels[n]):this.add_new_group()}),this.global.p5key&&this.global.p5key.KeyShortCut&&!this.global.p5key.KeyShortCut.AddAct&&(this.global.p5key.KeyShortCut.AddAct=()=>{this.add_new_group()})}ionViewWillEnter(){this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo()}ionViewDidEnter(){this.nakama.subscribe_lock=!0,this.nakama.resumeBanner(),("DesktopPWA"==C.s1||"MobilePWA"==C.s1)&&(this.cant_dedicated=!0),this.try_add_shortcut()}go_to_page(n){this.nav.navigateForward(`portal/settings/${n}`),this.nakama.removeBanner()}scanQRCode(){var n=this;return(0,S.c)(function*(){let s=yield v.checkPermission({force:!0});const r="\uc628\uc804\ud55c \ub3d9\uc791 \ud6c4 \uc885\ub8cc";document.addEventListener("ionBackButton",n.EventListenerAct);try{if(!s.granted||n.StartScan)throw"\uc2dc\uc791 \ubd88\uac00\uc0c1\ud0dc";n.StartScan=!0,document.querySelector("body").classList.add("scanner-active"),yield v.hideBackground();const c=yield v.startScan();if(c.hasContent)try{if(0!=c.content.trim().indexOf(`${C.uM}pjcone_pwa/?`))throw"\uc8fc\uc18c \uc2dc\uc791\uc774 \ub2e4\ub984";yield n.nakama.AddressToQRCodeAct(n.global.CatchGETs(c.content.trim()))}catch{n.modalCtrl.create({component:G.c,componentProps:{result:c}}).then(P=>P.present())}throw r}catch(c){c!=r&&n.p5toast.show({text:n.lang.text.Subscribes.CameraPermissionDenied}),n.StopScan()}document.removeEventListener("ionBackButton",n.EventListenerAct)})()}StopScan(){this.StartScan=!1,document.querySelector("body").classList.remove("scanner-active"),v.showBackground(),v.stopScan()}go_to_chatroom(n){this.lock_chatroom||(this.lock_chatroom=!0,this.nakama.go_to_chatroom_without_admob_act(n),("online"!=n.status||"pending"!=n.status)&&delete n.is_new,this.lock_chatroom=!1)}check_notifications(n){let s=this.nakama.notifications_rearrange[n].server;this.nakama.check_notifications(this.nakama.notifications_rearrange[n],s.isOfficial,s.target)}add_new_group(){this.modalCtrl.create({component:A.s}).then(n=>{let s=this.global.p5key.KeyShortCut;this.global.p5key.KeyShortCut={},n.onDidDismiss().then(()=>{this.global.p5key.KeyShortCut=s,this.try_add_shortcut()}),n.present()})}ionViewWillLeave(){this.nakama.subscribe_lock=!1,delete this.global.p5key.KeyShortCut.Backquote,delete this.global.p5key.KeyShortCut.Digit,delete this.global.p5key.KeyShortCut.AddAct,this.StopScan()}}return(o=d).\u0275fac=function(n){return new(n||o)(t.GI1(l.qS),t.GI1(g.O),t.GI1(_.h),t.GI1(u.Y),t.GI1(h.o),t.GI1(b.A1),t.GI1(p.wX),t.GI1(O.k))},o.\u0275cmp=t.In1({type:o,selectors:[["app-subscribes"]],decls:9,vars:5,consts:[[1,"ion-no-border"],["class","qr_code_scan",3,"click",4,"ngIf"],[1,"add_group",3,"click"],["button","","name","add-circle-outline",2,"width","24px","height","24px"],[1,"header_online_circle",3,"click"],[4,"ngIf"],[1,"qr_code_scan",3,"click"],["name","scan-circle-outline",2,"width","24px","height","24px"],["value","colors","expand","inset",3,"value",4,"ngIf"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],["value","colors","expand","inset",3,"value"],["accordionGroup",""],["value","colors"],["slot","header"],["slot","content"],[4,"ngFor","ngForOf"],["button","",3,"click",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],[1,"channel_image"],["alt","ch_img",1,"channel_image",3,"src"],[1,"status_circle"],["class","additional_form new_bg_form",3,"style",4,"ngIf"],[1,"channel_text_form","header"],[1,"channel_text_form","content"],[1,"additional_form","new_bg_form"],[1,"disconnect_info",3,"click"],["color","medium","name","chatbubble-ellipses-outline",2,"width","60px","height","60px"],["color","medium"]],template:function(n,s){1&n&&(t.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.OEk(3),t.C$Y(),t.yuY(4,M,2,0,"div",1),t.I0R(5,"div",2),t.qCj("click",function(){return s.add_new_group()}),t.wR5(6,"ion-icon",3),t.C$Y(),t.I0R(7,"div",4),t.qCj("click",function(){return s.nakama.toggle_all_session()}),t.C$Y()()(),t.yuY(8,K,19,11,"ion-content",5)),2&n&&(t.yG2(3),t.cNF(s.lang.text.Subscribes.Title),t.yG2(),t.E7m("ngIf",!s.cant_dedicated),t.yG2(3),t.m_g("background-color: "+s.statusBar.colors[s.statusBar.settings.groupServer]+"; cursor: pointer;"),t.yG2(),t.E7m("ngIf",!s.StartScan))},dependencies:[e.ay,e.u_,l.cm,l.qU,l.sn,l._i,l.wB,l.Ko,l.Yb,l.S8,l.QR,l.tM,l.Md],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}.header[_ngcontent-%COMP%]{padding-bottom:4px}.content[_ngcontent-%COMP%]{color:#888;height:24px;line-height:24px;vertical-align:middle;overflow:hidden}.channel_image[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:64px;object-fit:cover}.status_bar[_ngcontent-%COMP%]{width:5px;height:76%}.server_target[_ngcontent-%COMP%]{color:#888;padding-left:4px}.channel_text_form[_ngcontent-%COMP%]{margin-left:12px}.status_circle[_ngcontent-%COMP%]{position:relative;top:-56px;left:38px;width:12px;height:12px;border-radius:12px}.md[_ngcontent-%COMP%]   .qr_code_scan[_ngcontent-%COMP%]{position:absolute;right:116px;top:16px;cursor:pointer}.ios[_ngcontent-%COMP%]   .qr_code_scan[_ngcontent-%COMP%]{position:absolute;right:116px;top:10px;cursor:pointer}.md[_ngcontent-%COMP%]   .add_group[_ngcontent-%COMP%]{position:absolute;right:68px;top:16px;cursor:pointer}.ios[_ngcontent-%COMP%]   .add_group[_ngcontent-%COMP%]{position:absolute;right:68px;top:10px;cursor:pointer}"]}),d})()},{path:"chat-room",loadChildren:()=>Promise.all([a.e(7048),a.e(5929)]).then(a.bind(a,5929)).then(o=>o.ChatRoomPageModule)},{path:"qrelse",loadChildren:()=>a.e(6660).then(a.bind(a,6660)).then(o=>o.QRelsePageModule)}];let L=(()=>{var o;class d{}return(o=d).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.a4G({type:o}),o.\u0275inj=t.s3X({imports:[k.qQ.forChild(U),k.qQ]}),d})(),j=(()=>{var o;class d{}return(o=d).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.a4G({type:o}),o.\u0275inj=t.s3X({imports:[e.MD,x.y,l.wZ,L]}),d})()}}]);