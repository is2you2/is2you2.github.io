"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[767],{767:(E,u,i)=>{i.r(u),i.d(u,{SettingsPageModule:()=>T});var m=i(177),c=i(4341),l=i(5374),p=i(9858),f=i(467),k=i(617),d=i(9349),_=i(9159),v=i(2506),t=i(3953),S=i(3656),j=i(8065),B=i(4237),C=i(4234),b=i(3295);const F=["Devkit"],P=["LangSel"];function R(n,r){if(1&n){const s=t.RV6();t.j41(0,"ion-item",18),t.nrm(1,"ion-icon",19),t.j41(2,"ion-input",20),t.mxI("ngModelChange",function(e){t.eBV(s);const a=t.XpG();return t.DH7(a.FallbackServerAddress,e)||(a.FallbackServerAddress=e),t.Njj(e)}),t.bIt("ionInput",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.fallback_fs_input())}),t.k0s()()}if(2&n){const s=t.XpG();t.R7$(2),t.Y8G("label",s.lang.text.Settings.FallbackFS),t.R50("ngModel",s.FallbackServerAddress)}}function y(n,r){if(1&n){const s=t.RV6();t.j41(0,"div")(1,"ion-item-divider")(2,"ion-label"),t.EFF(3),t.k0s()(),t.j41(4,"ion-item",5),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.go_to_page("admin-tools"))}),t.j41(5,"ion-label"),t.EFF(6),t.k0s()()()}if(2&n){const s=t.XpG();t.R7$(3),t.JRh(s.lang.text.Settings.admin_tools),t.R7$(3),t.JRh(s.lang.text.Settings.ServerAdmin)}}function L(n,r){if(1&n){const s=t.RV6();t.j41(0,"ion-item",5),t.bIt("click",function(){t.eBV(s);const e=t.XpG();return t.Njj(e.go_to_page("translator"))}),t.j41(1,"ion-label"),t.EFF(2),t.k0s()()}if(2&n){const s=t.XpG();t.R7$(2),t.JRh(s.lang.text.Settings.AppTranslator)}}const I=[{path:"",component:(()=>{var n;class r{constructor(o,e,a,g,h,M){this.modalCtrl=o,this.navCtrl=e,this.statusBar=a,this.nakama=g,this.lang=h,this.global=M,this.cant_dedicated=!1,this.can_use_http=!1,this.is_nativefier=d.Yl,this.BackButtonPressed=!1,this.as_admin=[],this.FallbackServerAddress="",this.self={},this.LinkButton=[],this.will_enter=!1,this.lock_modal_open=!1,this.WillLeave=!1}InitBrowserBackButtonOverride(){window.history.pushState(null,null,window.location.href),window.onpopstate=()=>{this.BackButtonPressed||(this.BackButtonPressed=!0,this.navCtrl.back())}}ngOnInit(){("DesktopPWA"==d.aH||"MobilePWA"==d.aH)&&(this.cant_dedicated=!0),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()},this.can_use_http="http:"==window.location.protocol||d.Yl}toggle_ShowServer(){this.nakama.showServer?localStorage.setItem("showServer","1"):localStorage.removeItem("showServer")}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let o=this.as_admin.length-1;o>=0;o--)this.as_admin[o].is_admin||this.as_admin.splice(o,1)}JoinSmallTalk(){var o=this;if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings.dedicated_groupchat&&"certified"!=this.statusBar.settings.dedicated_groupchat&&(this.statusBar.settings.dedicated_groupchat="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:_.T,componentProps:{name:this.nakama.users.self.display_name}}).then(function(){var e=(0,f.A)(function*(a){o.RemoveKeyShortCut(),a.onDidDismiss().then(()=>{o.ionViewDidEnter()}),yield a.present(),o.lock_modal_open=!1});return function(a){return e.apply(this,arguments)}}())}}ionViewWillEnter(){this.InitBrowserBackButtonOverride(),this.profile_filter="online"==this.statusBar.settings.groupServer?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin(),this.FallbackServerAddress=localStorage.getItem("fallback_fs"),this.cant_dedicated&&(this.Fallback_FS_input_element=document.getElementById("fallback_fs_input").childNodes[1].childNodes[1].childNodes[1].childNodes[1],this.Fallback_FS_input_element.onfocus=()=>{delete this.global.p5key.KeyShortCut.Digit},this.WillLeave=!1,this.Fallback_FS_input_element.addEventListener("focusout",()=>{this.WillLeave||this.ionViewDidEnter()}))}focus_to_fallback_fs_input(){this.Devkit.value="Devkit",setTimeout(()=>{this.Fallback_FS_input_element.focus()},50)}fallback_fs_input(){this.FallbackServerAddress?localStorage.setItem("fallback_fs",this.FallbackServerAddress):localStorage.removeItem("fallback_fs")}ToggleAccordion(){this.Devkit.value?(this.LinkButton.splice(5,!this.cant_dedicated&&this.can_use_http?5:4),this.Devkit.value=void 0):(this.Devkit.value="Devkit",this.cant_dedicated?this.LinkButton.splice(4,0,()=>this.go_to_page("weblink-gen"),()=>this.focus_to_fallback_fs_input(),()=>this.go_to_webrtc_manager(),()=>this.JoinSmallTalk(),()=>this.download_serverfile()):this.LinkButton.splice(4,0,()=>this.go_to_page("weblink-gen"),()=>this.go_to_webrtc_manager(),()=>this.JoinSmallTalk(),()=>this.download_serverfile()))}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.pop()},this.LinkButton.length=0,this.LinkButton.push(()=>this.go_to_page("noti-alert")),this.LinkButton.push(()=>{this.nakama.showServer=!this.nakama.showServer,this.toggle_ShowServer()}),this.LinkButton.push(()=>this.open_inapp_explorer()),this.LinkButton.push(()=>this.ToggleAccordion()),this.Devkit.value&&(this.LinkButton.push(()=>this.go_to_page("weblink-gen")),this.cant_dedicated&&this.LinkButton.push(()=>this.focus_to_fallback_fs_input()),this.LinkButton.push(()=>this.go_to_webrtc_manager()),this.LinkButton.push(()=>this.JoinSmallTalk()),this.LinkButton.push(()=>this.download_serverfile())),this.as_admin.length&&this.LinkButton.push(()=>this.go_to_page("admin-tools")),this.LinkButton.push(()=>this.go_to_page("creator")),"ko"!=this.lang.lang&&this.LinkButton.push(()=>this.go_to_page("translator")),this.LinkButton.push(()=>this.LangClicked()),this.LinkButton.push(()=>this.go_to_page("licenses")),this.cant_dedicated&&this.LinkButton.push(()=>this.open_playstore()),this.global.p5key.KeyShortCut.Digit=o=>{this.LinkButton[o]&&this.LinkButton[o]()}}open_inapp_explorer(){this.navCtrl.navigateForward("user-fs-dir",{animation:k.NC})}LangClicked(){this.LangSel.open()}LanguageChanged(o){this.lang.lang=o.detail.value,this.lang.load_selected_lang()}go_to_page(o){this.navCtrl.navigateForward(`portal/settings/${o}`,{animation:k.NC})}download_serverfile(){var o=this;return(0,f.A)(function*(){"ko"==o.lang.lang?window.open("https://is2you2.github.io/posts/how-to-use-pjcone-server/","_system"):window.open("https://is2you2.github.io/posts/how-to-use-pjcone-server-en/","_system")})()}go_to_webrtc_manager(){this.modalCtrl.create({component:v.f}).then(o=>{this.RemoveKeyShortCut(),o.onDidDismiss().then(()=>{this.ionViewDidEnter()}),o.present()})}open_playstore(){window.open("https://play.google.com/store/apps/details?id=org.pjcone.portal","_system")}RemoveKeyShortCut(){delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit}ionViewWillLeave(){this.WillLeave=!0,this.RemoveKeyShortCut()}ngOnDestroy(){delete this.nakama.on_socket_disconnected.settings_admin_check}}return(n=r).\u0275fac=function(o){return new(o||n)(t.rXU(l.W3),t.rXU(S.q9),t.rXU(j.j),t.rXU(B.X),t.rXU(C.y),t.rXU(b.z3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-settings"]],viewQuery:function(o,e){if(1&o&&(t.GBs(F,5),t.GBs(P,5)),2&o){let a;t.mGM(a=t.lsd())&&(e.Devkit=a.first),t.mGM(a=t.lsd())&&(e.LangSel=a.first)}},decls:58,vars:20,consts:[["Devkit",""],["LangSel",""],[1,"ion-no-border"],["slot","start"],["defaultHref","portal/main"],["button","",3,"click"],["button","",3,"ionChange"],[2,"pointer-events","none",3,"ngModelChange","ngModel"],["value","Devkit"],["slot","header"],["slot","content"],["button","","id","fallback_fs_input",4,"ngIf"],[4,"ngIf"],["button","",3,"click",4,"ngIf"],["name","language",1,"icon_margin"],[2,"pointer-events","none",3,"ionChange","label","value","placeholder"],["value","en"],["value","ko"],["button","","id","fallback_fs_input"],["name","cloud-done-outline",1,"icon_margin"],["placeholder","0.0.0.0:0",1,"ion-text-right",3,"ngModelChange","ionInput","label","ngModel"]],template:function(o,e){if(1&o){const a=t.RV6();t.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",3),t.nrm(5,"ion-back-button",4),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),t.EFF(9),t.k0s()(),t.j41(10,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.go_to_page("noti-alert"))}),t.j41(11,"ion-label"),t.EFF(12),t.k0s()(),t.j41(13,"ion-item",6),t.bIt("ionChange",function(){return t.eBV(a),t.Njj(e.toggle_ShowServer())}),t.j41(14,"ion-toggle",7),t.mxI("ngModelChange",function(h){return t.eBV(a),t.DH7(e.nakama.showServer,h)||(e.nakama.showServer=h),t.Njj(h)}),t.EFF(15),t.k0s()(),t.j41(16,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.open_inapp_explorer())}),t.j41(17,"ion-label"),t.EFF(18),t.k0s()(),t.j41(19,"ion-accordion-group",null,0)(21,"ion-accordion",8)(22,"ion-item",9)(23,"ion-label"),t.EFF(24),t.k0s()(),t.j41(25,"div",10)(26,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.go_to_page("weblink-gen"))}),t.j41(27,"ion-label"),t.EFF(28),t.k0s()(),t.DNE(29,R,3,2,"ion-item",11),t.j41(30,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.go_to_webrtc_manager())}),t.j41(31,"ion-label"),t.EFF(32),t.k0s()(),t.j41(33,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.JoinSmallTalk())}),t.j41(34,"ion-label"),t.EFF(35),t.k0s()(),t.j41(36,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.download_serverfile())}),t.j41(37,"ion-label"),t.EFF(38),t.k0s()()()()(),t.DNE(39,y,7,2,"div",12),t.j41(40,"ion-item-divider")(41,"ion-label"),t.EFF(42),t.k0s()(),t.j41(43,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.go_to_page("creator"))}),t.j41(44,"ion-label"),t.EFF(45),t.k0s()(),t.DNE(46,L,3,1,"ion-item",13),t.j41(47,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.LangClicked())}),t.nrm(48,"ion-icon",14),t.j41(49,"ion-select",15,1),t.bIt("ionChange",function(h){return t.eBV(a),t.Njj(e.LanguageChanged(h))}),t.j41(51,"ion-select-option",16),t.EFF(52,"English"),t.k0s(),t.j41(53,"ion-select-option",17),t.EFF(54,"\ud55c\uad6d\uc5b4"),t.k0s()()(),t.j41(55,"ion-item",5),t.bIt("click",function(){return t.eBV(a),t.Njj(e.go_to_page("licenses"))}),t.j41(56,"ion-label"),t.EFF(57),t.k0s()()()}2&o&&(t.R7$(3),t.JRh(e.lang.text.Settings.Title),t.R7$(6),t.JRh(e.lang.text.Settings.env_info),t.R7$(3),t.JRh(e.lang.text.Settings.NotificationSetting),t.R7$(2),t.R50("ngModel",e.nakama.showServer),t.R7$(),t.JRh(e.lang.text.Settings.ShowChnServer),t.R7$(3),t.JRh(e.lang.text.Settings.InAppExplorer),t.R7$(6),t.JRh(e.lang.text.Settings.DevKit),t.R7$(4),t.JRh(e.lang.text.Settings.WebLinkGen),t.R7$(),t.Y8G("ngIf",e.cant_dedicated),t.R7$(3),t.JRh(e.lang.text.WebRTCDevManager.Title),t.R7$(3),t.JRh(e.lang.text.Settings.joinDediChat),t.R7$(3),t.JRh(e.lang.text.Settings.ServerFiles),t.R7$(),t.Y8G("ngIf",e.as_admin.length),t.R7$(3),t.JRh(e.lang.text.Settings.AppInfo),t.R7$(3),t.JRh(e.lang.text.Settings.AppCreator),t.R7$(),t.Y8G("ngIf","ko"!=e.lang.lang),t.R7$(3),t.Y8G("label",e.lang.text.Settings.AppLanguage)("value",e.lang.lang)("placeholder",e.lang.lang),t.R7$(8),t.JRh(e.lang.text.Settings.LicenseNotice))},dependencies:[m.bT,c.BC,c.vS,l.xk,l.YH,l.QW,l.W9,l.eU,l.iq,l.$w,l.uz,l.Dg,l.he,l.Nm,l.Ip,l.BC,l.BY,l.ai,l.hB,l.Je,l.Gw,l.el],styles:[".img_icon_size[_ngcontent-%COMP%]{width:21px;height:21px;margin-right:16px}.icon_margin[_ngcontent-%COMP%]{margin-right:16px}"]}),r})()},{path:"licenses",loadChildren:()=>i.e(3362).then(i.bind(i,3362)).then(n=>n.LicensesPageModule)},{path:"group-server",loadChildren:()=>i.e(5658).then(i.bind(i,420)).then(n=>n.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([i.e(3483),i.e(4962)]).then(i.bind(i,4962)).then(n=>n.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>i.e(8295).then(i.bind(i,8295)).then(n=>n.GroupDetailPageModule)},{path:"translator",loadChildren:()=>i.e(6749).then(i.bind(i,6749)).then(n=>n.TranslatorPageModule)},{path:"creator",loadChildren:()=>i.e(8036).then(i.bind(i,8036)).then(n=>n.CreatorPageModule)},{path:"noti-alert",loadChildren:()=>i.e(2635).then(i.bind(i,2635)).then(n=>n.NotiAlertPageModule)},{path:"admin-tools",loadChildren:()=>i.e(8989).then(i.bind(i,8989)).then(n=>n.AdminToolsPageModule)},{path:"weblink-gen",loadChildren:()=>i.e(1272).then(i.bind(i,1272)).then(n=>n.WeblinkGenPageModule)}];let D=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.iI.forChild(I),p.iI]}),r})(),T=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.MD,c.YN,l.bv,D]}),r})()}}]);