"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7759],{7759:(rt,L,g)=>{g.r(L),g.d(L,{AddPostPageModule:()=>lt});var F=g(177),R=g(4341),b=g(5374),C=g(9858),m=g(467),S=g(4237),$=g(5402),D=g(8326),j=g(92),A=g(9969),e=g(3953),U=g(7100),M=g(4234),B=g(3656),E=g(9900),V=g(755),G=g(345),N=g(7476),W=g(3307);const Y=()=>({offset:"304"}),X=r=>({value:"",params:r});function H(r,f){if(1&r&&(e.j41(0,"ion-title"),e.EFF(1),e.k0s()),2&r){const d=e.XpG();e.R7$(),e.JRh(d.lang.text.AddPost.EditTitle)}}function J(r,f){if(1&r&&(e.j41(0,"ion-title"),e.EFF(1),e.k0s()),2&r){const d=e.XpG();e.R7$(),e.JRh(d.lang.text.AddPost.Title)}}function z(r,f){if(1&r){const d=e.RV6();e.j41(0,"ion-item",9),e.bIt("click",function(){const i=e.eBV(d).index,a=e.XpG(2);return e.Njj(a.select_server(i,!0))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&r){const d=f.$implicit;e.R7$(2),e.JRh(d.name)}}function Q(r,f){if(1&r){const d=e.RV6();e.j41(0,"ion-accordion-group",28,0),e.bIt("click",function(){e.eBV(d);const i=e.XpG();return e.Njj(i.isExpanded=!0)}),e.j41(2,"ion-accordion",29)(3,"ion-item",30)(4,"ion-label",11),e.EFF(5),e.k0s(),e.j41(6,"ion-label",31),e.EFF(7),e.k0s(),e.nrm(8,"ion-icon",32),e.k0s(),e.j41(9,"div",33),e.DNE(10,z,3,1,"ion-item",34),e.k0s()()()}if(2&r){const d=e.XpG();e.Y8G("disabled",d.isSaveClicked)("value",d.isExpanded),e.R7$(5),e.JRh(d.lang.text.AddGroup.SelectServer),e.R7$(2),e.JRh(d.servers[d.index].name),e.R7$(3),e.Y8G("ngForOf",d.servers)}}function K(r,f){if(1&r){const d=e.RV6();e.j41(0,"div",35)(1,"ion-item",14)(2,"ion-toggle",36),e.mxI("ngModelChange",function(i){e.eBV(d);const a=e.XpG();return e.DH7(a.userInput.isNSFW,i)||(a.userInput.isNSFW=i),e.Njj(i)}),e.EFF(3),e.k0s()(),e.j41(4,"div",37),e.nrm(5,"img",38),e.k0s()()}if(2&r){const d=e.XpG();e.Y8G("@toggle_item",e.eq3(7,X,e.lJ4(6,Y))),e.R7$(2),e.R50("ngModel",d.userInput.isNSFW),e.R7$(),e.JRh(d.lang.text.AddPost.NSFW),e.R7$(2),e.Aen(d.userInput.isNSFW?"filter: blur(16px);":""),e.Y8G("src",d.MainPostImage,e.B4B)}}function Z(r,f){1&r&&(e.j41(0,"div",39),e.EFF(1,"Enter"),e.k0s())}function q(r,f){if(1&r&&e.nrm(0,"ion-icon",44),2&r){const d=e.XpG().$implicit;e.Y8G("name",d.icon||"close-circle")}}function tt(r,f){if(1&r&&e.nrm(0,"img",45),2&r){const d=e.XpG().$implicit;e.Y8G("src","assets/icon/"+d.icon_img,e.B4B)("alt",d.title)}}function et(r,f){if(1&r){const d=e.RV6();e.j41(0,"div",40)(1,"div",41),e.bIt("click",function(){const i=e.eBV(d).$implicit;return e.Njj(i.act())})("contextmenu",function(){const i=e.eBV(d).$implicit;return e.Njj(i.context?i.context():null)}),e.DNE(2,q,1,1,"ion-icon",42)(3,tt,1,2,"img",43),e.j41(4,"div"),e.EFF(5),e.k0s()()()}if(2&r){const d=f.$implicit;e.R7$(),e.Aen("cursor: "+(d.cursor||"pointer")+";"),e.Y8G("hidden",d.isHide),e.R7$(),e.Y8G("ngIf",d.icon),e.R7$(),e.Y8G("ngIf",d.icon_img),e.R7$(2),e.JRh(d.name)}}function it(r,f){if(1&r){const d=e.RV6();e.j41(0,"ion-item",48),e.bIt("click",function(){const i=e.eBV(d),a=i.$implicit,n=i.index,c=e.XpG(2);return e.Njj(c.open_viewer(a,n))})("contextmenu",function(){const i=e.eBV(d).index,a=e.XpG(2);return e.Njj(a.PostAttachContextMenu(i))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"div",49),e.nrm(4,"img",50),e.k0s()()}if(2&r){const d=f.$implicit,t=f.index,i=e.XpG(2);e.Y8G("@toggle_item",void 0)("disabled",i.isSaveClicked),e.R7$(2),e.JRh("{"+t+"} "+d.filename),e.R7$(2),e.Y8G("src",d.thumbnail,e.B4B)}}function nt(r,f){if(1&r){const d=e.RV6();e.j41(0,"ion-accordion-group",46,1),e.bIt("click",function(){e.eBV(d);const i=e.XpG();return e.Njj(i.isAttachExpanded=!0)}),e.j41(2,"ion-accordion",29)(3,"ion-item",30)(4,"ion-label",11),e.EFF(5),e.k0s()(),e.j41(6,"div",33),e.DNE(7,it,5,4,"ion-item",47),e.k0s()()()}if(2&r){const d=e.XpG();e.Y8G("@toggle_item",void 0)("disabled",d.isSaveClicked)("value",d.isAttachExpanded),e.R7$(5),e.JRh(d.lang.text.ChatRoom.attachments+" ("+d.userInput.attachments.length+")"),e.R7$(2),e.Y8G("ngForOf",d.userInput.attachments)}}function at(r,f){1&r&&(e.j41(0,"div",51),e.EFF(1,"Ctrl + Enter"),e.k0s())}const st=[{path:"",component:(()=>{var r;class f{constructor(t,i,a,n,c,s,p,u,o,_,y,T){var P,l=this;this.global=t,this.lang=i,this.navCtrl=a,this.nakama=n,this.p5toast=c,this.indexed=s,this.sanitizer=p,this.route=u,this.router=o,this.floatButton=_,this.alertCtrl=y,this.p5loading=T,this.servers=[],this.userInput={id:void 0,title:void 0,content:void 0,creator_id:void 0,creator_name:void 0,UserColor:void 0,create_time:void 0,modify_time:void 0,server:void 0,mainImage:void 0,attachments:[],OutSource:void 0,isNSFW:!1,CDN:void 0,offlineAct:void 0,originalInfo:void 0},this.index=0,this.CheckIfTitleInputFocus=!1,this.isModify=!1,this.voidDrawContextId="add_post_voiddraw",this.isExpanded=!1,this.isAttachExpanded=!1,this.isSaveClicked=!1,this.isServerChanged=!1,this.useVoiceRecording=!1,this.MainPostImage=null,this.extended_buttons=[{icon:"image-outline",name:this.lang.text.AddPost.MainPostImage,act:()=>{this.isSaveClicked||(this.MainPostImage?(URL.revokeObjectURL(this.MainPostImage),this.MainPostImage=null,this.userInput.mainImage=void 0,document.getElementById("PostMainImage_sel").value=""):document.getElementById("PostMainImage_sel").click())},context:()=>(function(){var I=(0,m.A)(function*(){let v;try{try{let x=yield l.global.GetValueFromClipboard("add_post");switch(x.type){case"text/plain":v=x.value;break;case"image/png":return void l.ChangeMainPostImage({target:{files:[x.value]}});case"error":throw x.value}}catch(x){throw x}try{let x=l.global.Base64ToBlob(v),k=v.split(";")[0].split(":")[1],O=new File([x],`${l.lang.text.ChatRoom.FileLink}.${k.split("/").pop()}`,{type:k});throw l.ChangeMainPostImage({target:{files:[O]}}),"done"}catch(x){if("done"===x)throw x}try{if(0!=v.indexOf("http:")&&0!=v.indexOf("https:"))throw"\uc62c\ubc14\ub978 \uc6f9 \uc8fc\uc18c\uac00 \uc544\ub2d8"}catch(x){throw x}let h={};h.url=v,h.content_related_creator=[],h.content_related_creator.push({user_id:"local"==l.isOfficial?"local":l.nakama.servers[l.isOfficial][l.target].session.user_id,timestamp:(new Date).getTime(),display_name:l.nakama.users.self.display_name,various:"link"}),h.content_creator={user_id:"local"==l.isOfficial?"local":l.nakama.servers[l.isOfficial][l.target].session.user_id,timestamp:(new Date).getTime(),display_name:l.nakama.users.self.display_name,various:"link"};let w=h.url.split(".");h.file_ext=w.pop().split("?").shift(),h.filename=decodeURIComponent(`${w.pop().split("/").pop()||l.lang.text.ChatRoom.ExternalLinkFile}.${h.file_ext}`),l.global.set_viewer_category_from_ext(h),h.type="",h.typeheader=h.viewer,l.global.modulate_thumbnail(h,h.url,l.cont),l.userInput.mainImage=h,l.MainPostImage=h.url}catch(h){throw"done"==h?h:`\uc778\uc2dd \ubd88\uac00\ub2a5\ud55c URL \uc815\ubcf4: ${(h.statusText?`${h.statusText}(${h.status})`:h.status)||h}`}});return function(){return I.apply(this,arguments)}}()(),!1)},{icon:"document-attach-outline",name:this.lang.text.ChatRoom.attachments,act:()=>{this.isSaveClicked||this.new_attach({detail:{value:"load"}})},context:()=>{if(!this.isSaveClicked)return this.new_attach({detail:{value:"link"}}),!1}},{icon_img:"voidDraw.png",name:this.lang.text.ChatRoom.voidDraw,act:(P=(0,m.A)(function*(){l.isSaveClicked||(l.WillLeavePageInside=!0,l.global.PageDismissAct["add-post-new-image"]=function(){var I=(0,m.A)(function*(v){v.data&&(l.AddAttachTextForm(),yield l.voidDraw_fileAct_callback(v)),delete l.global.PageDismissAct["add-post-new-image"]});return function(v){return I.apply(this,arguments)}}(),l.global.ActLikeModal("portal/community/add-post/void-draw",{dismiss:"add-post-new-image"}))}),function(){return P.apply(this,arguments)}),context:()=>(function(){var I=(0,m.A)(function*(){const v="voiddraw";let h=yield l.global.GetValueFromClipboard(v);switch(h.type){case"image/png":l.SelectVoidDrawBackgroundImage({target:{files:[h.value]}});break;case"text/plain":const x={file_ext:h.value.split(".").pop()};if(l.global.set_viewer_category_from_ext(x),"image"==x.viewer)try{l.p5loading.update({id:v,message:`${l.lang.text.Arcade.TryingDownload}: ${h.value.split("/").pop()}`,forceEnd:null});const k=yield fetch(h.value);if(!k.ok)throw`${k.statusText} (${k.status})`;const O=yield k.blob();l.p5loading.update({id:v,message:`${l.lang.text.Arcade.TryingDownload}: ${h.value.split("/").pop()}`,progress:1,forceEnd:350}),l.SelectVoidDrawBackgroundImage({target:{files:[O]}});break}catch(k){console.log("\uadf8\ub9bc\ud310 \ube60\ub978 \uc9c4\uc785 \uc624\ub958: ",k)}default:document.getElementById(l.voidDrawContextId).click()}});return function(){return I.apply(this,arguments)}}()(),!1)},{icon:"reader-outline",name:this.lang.text.ChatRoom.newText,act:function(){var P=(0,m.A)(function*(){let I={info:{content:{is_new:void 0,type:"text/plain",viewer:"text",filename:void 0,path:void 0}},no_edit:void 0,dismiss:"add-post-viewer"};I.info.content.is_new="text",I.info.content.filename=l.global.TextEditorNewFileName(),I.no_edit=!0,l.WillLeavePageInside=!0,l.global.PageDismissAct["add-post-viewer"]=v=>{if(v.data){let h=l.global.TextEditorAfterAct(v.data,{display_name:l.nakama.users.self.display_name});l.AddAttachTextForm(),l.userInput.attachments.push(h)}delete l.global.PageDismissAct["add-post-viewer"]},l.global.ActLikeModal("portal/community/add-post/ionic-viewer",I)});return function(){return P.apply(this,arguments)}}()},{icon:"camera-outline",name:this.lang.text.ChatRoom.Camera,act:function(){var P=(0,m.A)(function*(){if(!l.isSaveClicked)try{let I=yield l.global.from_camera("tmp_files/post/",{user_id:"local"==l.isOfficial?void 0:l.nakama.servers[l.isOfficial][l.target].session.user_id,display_name:l.nakama.users.self.display_name},"add_post");l.AddAttachTextForm(),l.userInput.attachments.push(I)}catch{}});return function(){return P.apply(this,arguments)}}()},{icon:"mic-circle-outline",name:this.lang.text.ChatRoom.Voice,act:function(){var P=(0,m.A)(function*(){if(!l.isSaveClicked){if(l.global.useVoiceRecording&&"PostRecording"!=l.global.useVoiceRecording)return void l.p5toast.show({text:l.lang.text.GlobalAct[l.global.useVoiceRecording]});l.useVoiceRecording=!l.useVoiceRecording,l.useVoiceRecording?(yield $.R.hasAudioRecordingPermission()).value?(l.global.useVoiceRecording="PostRecording",l.extended_buttons[5].icon="stop-circle-outline",l.p5loading.toast(l.lang.text.ChatRoom.StartVRecord,"add_post"),l.p5StartVoiceTimer(),yield $.R.startRecording(),l.CreateFloatingVoiceTimeHistoryAddButton()):(l.useVoiceRecording=!1,l.extended_buttons[5].icon="mic-circle-outline",yield $.R.requestAudioRecordingPermission()):yield l.StopAndSaveVoiceRecording()}});return function(){return P.apply(this,arguments)}}()},{icon:"cloud-done-outline",name:this.lang.text.ChatRoom.Detour,act:()=>{this.toggle_custom_attach()}},{icon:"globe-outline",name:this.lang.text.AddPost.NoOutLink,act:()=>{this.toggle_open_link()}}],this.lock_modal_open=!1,this.UseOutLink=!1,this.isApplyPostData=!1,this.WillLeavePage=!1,this.WillLeavePageInside=!1}ngOnDestroy(){this.isApplyPostData||this.userInput.server.local&&this.postData(),this.route.queryParams.unsubscribe(),this.TitleInput.onpaste=null,this.TitleInput.onfocus=null,this.TitleInput.onblur=null,this.ContentTextArea.onpaste=null,this.p5StartVoiceTimer=null,this.p5StopVoiceTimer=null,this.cont.abort("\uac8c\uc2dc\ubb3c \ud3b8\uc9d1 \ud398\uc774\uc9c0 \ubc97\uc5b4\ub0a8"),this.cont=null,this.p5canvas&&this.p5canvas.remove(),delete this.nakama.StatusBarChangedCallback,this.useVoiceRecording&&this.StopAndSaveVoiceRecording();try{this.MainPostImage&&setTimeout(()=>{URL.revokeObjectURL(this.MainPostImage)},1e3)}catch{}this.global.portalHint=!0}ngOnInit(){var t=this;this.voidDrawContextId=`add_post_voiddraw_${Date.now()}`,this.cont=new AbortController,this.UseOutLink=!0,this.toggle_open_link(this.UseOutLink),this.route.queryParams.subscribe(function(){var i=(0,m.A)(function*(a){const n=t.router.getCurrentNavigation().extras.state;let c=!1;var s;if(n&&(c=!!n.act,n.data&&(t.userInput=n.data),t.toggle_custom_attach((null===(s=t.userInput)||void 0===s?void 0:s.CDN)||0)),t.lock_modal_open=!1,c){if(t.LoadListServer(),t.servers.length>1&&(t.index=1),n&&n.data){const p=`${t.userInput.server.isOfficial}/${t.userInput.server.target}`;for(let u=0,o=t.servers.length;u<o;u++)if(`${t.servers[u].isOfficial}/${t.servers[u].target}`==p){t.index=u;break}if(t.userInput.mainImage){let u=t.userInput.mainImage.url;u||(u=URL.createObjectURL(t.userInput.mainImage.blob)),t.MainPostImage=u}for(let u=0,o=t.userInput.attachments.length;u<o;u++)if("image"==t.userInput.attachments[u].viewer)if(t.userInput.attachments[u].url)t.userInput.attachments[u].thumbnail=t.userInput.attachments[u].url;else{const _=yield t.indexed.loadBlobFromUserPath(t.userInput.attachments[u].path,t.userInput.attachments[u].type),y=URL.createObjectURL(_);t.userInput.attachments[u].thumbnail=y,setTimeout(()=>{URL.revokeObjectURL(y)},1e3)}t.UseOutLink=!!t.userInput.OutSource,t.toggle_open_link(t.UseOutLink),t.OriginalInfo=JSON.parse(JSON.stringify(t.userInput))}try{t.OriginalServerInfo=`${t.userInput.server.isOfficial}/${t.userInput.server.target}`}catch{}t.select_server(t.index)}});return function(a){return i.apply(this,arguments)}}()),setTimeout(()=>{this.WillLeavePage||this.CreateDrop()},100),this.nakama.StatusBarChangedCallback=()=>{this.LoadListServer(),this.select_server(0)}}LoadListServer(){this.servers=this.nakama.get_all_server_info(!0,!0),this.servers.unshift({name:this.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0})}WaitingCurrent(){var t=this;return(0,m.A)(function*(){for(;t.WillLeavePage;)yield new Promise(i=>setTimeout(i,0))})()}CreateDrop(){var t=this;let i=document.getElementById("p5Drop_addPost");this.p5canvas||(this.p5canvas=new D(a=>{let n=0;a.setup=()=>{let s=a.createCanvas(i.clientWidth,i.clientHeight);s.parent(i),a.pixelDensity(.1),s.drop(function(){var p=(0,m.A)(function*(u){yield t.selected_blobFile_callback_act(u.file)});return function(u){return p.apply(this,arguments)}}()),a.noLoop(),this.p5StartVoiceTimer=()=>{a.loop(),n=a.millis()},this.p5StopVoiceTimer=()=>{a.noLoop()}},a.draw=()=>{this.useVoiceRecording&&(this.extended_buttons[5].name=c(a.millis()-n))};let c=s=>{let p=s/1e3,u=a.floor(p)%60,o=p/60,_=a.floor(o)%60,y=a.floor(o/60);return y?`${y}:${a.nf(_,2)}:${a.nf(u,2)}`:`${_}:${a.nf(u,2)}`};a.mouseMoved=s=>{s.dataTransfer?(i.style.pointerEvents="all",i.style.backgroundColor="#0008"):(i.style.pointerEvents="none",i.style.backgroundColor="transparent")},a.keyPressed=function(){var s=(0,m.A)(function*(p){t.WillLeavePage||"Enter"!==p.key||(document.activeElement==t.TitleInput&&setTimeout(()=>{t.ContentTextArea.focus()},0),p.ctrlKey&&t.postData())});return function(p){return s.apply(this,arguments)}}()}))}ionViewWillEnter(){this.global.portalHint=!1,this.WillLeavePage=!1,this.TitleInput=document.getElementById("add_post_title").childNodes[1].childNodes[1].childNodes[1],this.TitleInput.onblur||(this.TitleInput.onblur=()=>{this.CheckIfTitleInputFocus=!1}),this.TitleInput.onfocus||(this.TitleInput.onfocus=()=>{this.CheckIfTitleInputFocus=!0}),this.TitleInput.onpaste||(this.TitleInput.onpaste=t=>{let i=[];for(const a of t.clipboardData.files)i.push({file:a});if(i.length)return 1==i.length&&this.ChangeMainPostImage({target:{files:[i[0].file]}}),!1}),this.ContentTextArea=document.getElementById("add_post_content"),setTimeout(()=>{"DesktopPWA"==j.aH&&(this.userInput.title?this.ContentTextArea.focus():this.TitleInput.focus())},200),this.isModify=!!this.userInput.id}postContentOnPasteAct(t){let i=[];for(const a of t.clipboardData.files)i.push({file:a});if(i.length){for(let a=0,n=i.length;a<n;a++)this.selected_blobFile_callback_act(i[a].file);return!1}}SelectVoidDrawBackgroundImage(t){var i=this;return(0,m.A)(function*(){const a="SelectVoidDrawBackgroundImage";i.p5loading.update({id:a,message:`${i.lang.text.ContentViewer.OnLoadContent}: ${t.target.files[0].name}`});const n=t.target.files[0],c=`tmp_files/add_post/${n.name}`;yield i.indexed.saveBlobToUserPath(n,c);const s=yield i.indexed.loadBlobFromUserPath(c,n.type),p=URL.createObjectURL(s);new D(u=>{u.setup=()=>{document.getElementById(i.voidDrawContextId).value="",u.noCanvas(),u.loadImage(p,o=>{i.global.PageDismissAct["add-post-new-image-quick"]=function(){var _=(0,m.A)(function*(y){y.data&&(i.AddAttachTextForm(),yield i.voidDraw_fileAct_callback(y)),delete i.global.PageDismissAct["add-post-new-image-quick"]});return function(y){return _.apply(this,arguments)}}(),i.global.ActLikeModal("portal/community/add-post/void-draw",{path:c,width:o.width,height:o.height,type:n.type,dismiss:"add-post-new-image-quick"}),URL.revokeObjectURL(p),i.p5loading.update({id:a,progress:1,forceEnd:0}),u.remove()},o=>{console.log("\ube60\ub978 \ud3b8\uc9d1\uae30 \uc774\ub3d9 \uc2e4\ud328: ",o),URL.revokeObjectURL(p),i.p5loading.update({id:a,message:`${o}`,progress:0,forceEnd:350}),u.remove()})}})})()}ionViewDidEnter(){this.WillLeavePageInside||this.global.StoreShortCutAct("AddPostPage"),this.WillLeavePageInside=!1}go_to_profile(){this.nakama.open_profile_page({isOfficial:this.isOfficial,target:this.target})}select_server(t,i=!1){this.index=t,this.userInput.server=this.servers[t],this.isExpanded=!1,this.isOfficial=this.servers[t].isOfficial,this.target=this.servers[t].target,i&&(this.isServerChanged=this.OriginalServerInfo!=`${this.isOfficial}/${this.target}`,delete this.userInput.originalInfo,delete this.userInput.offlineAct),this.userInput.creator_name=this.nakama.users.self.display_name;try{this.userInput.creator_id=this.nakama.servers[this.isOfficial][this.target].session.user_id,this.userInput.UserColor=(this.userInput.creator_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),this.extended_buttons[7].isHide=2==this.userInput.CDN}catch{this.userInput.creator_id="me",this.userInput.UserColor="888888",this.extended_buttons[7].isHide=!0,this.toggle_open_link(!0)}"DesktopPWA"==j.aH&&this.TitleInput&&this.TitleInput.focus()}AddVoiceTimeHistory(){let t=`{"i":"n","t":"${this.extended_buttons[5].name}"}`;const i=this.ContentTextArea.value,a=this.ContentTextArea.selectionStart,n=i.substring(0,a);0!=a&&("\n"!=n.charAt(n.length-1)&&(t="\n"+t),a>1&&"\n"!=n.charAt(n.length-2)&&(t="\n"+t));const c=i.substring(a);"\n"!=c.charAt(0)&&(t+="\n"),"\n"!=c.charAt(1)&&(t+="\n"),this.userInput.content=`${n}${t}${c}`,this.ContentTextArea.focus()}CreateFloatingVoiceTimeHistoryAddButton(){this.floatButton.RemoveFloatButton("addpost-timer"),this.floatButton.AddFloatButton("addpost-timer","timer-outline").mouseClicked(()=>{this.AddVoiceTimeHistory(),this.p5toast.show({text:`${this.lang.text.AddPost.RecordVoiceTime}: ${this.extended_buttons[5].name}`})})}StopAndSaveVoiceRecording(){var t=this;return(0,m.A)(function*(){t.floatButton.RemoveFloatButton("addpost-timer");const i="add_post";t.p5loading.update({id:i,message:t.lang.text.AddPost.SavingRecord});try{let a=yield t.global.StopAndSaveVoiceRecording();yield t.selected_blobFile_callback_act(a)}catch{}t.p5loading.remove(i),t.extended_buttons[5].icon="mic-circle-outline",t.extended_buttons[5].name=t.lang.text.ChatRoom.Voice,t.checkVoiceLinker()})()}checkVoiceLinker(){this.p5StopVoiceTimer&&this.p5StopVoiceTimer();let t=this.userInput.content.split("\n");for(let i=0,a=t.length;i<a;i++)try{let n=JSON.parse(t[i]);"n"==n.i&&(n.i=this.userInput.attachments.length-1),t[i]=JSON.stringify(n)}catch{}this.userInput.content=t.join("\n")}ChangeMainPostImage(t){this.p5loading.update({id:"add_post",message:`${this.lang.text.ContentViewer.OnLoadContent}: ${t.target.files[0].name}`});let i=t.target.files[0],a={};a.filename=i.name,a.file_ext=i.name.split(".").pop()||i.type||this.lang.text.ChatRoom.unknown_ext,a.size=i.size,a.type=i.type||i.type_override,a.blob=i,a.path=`tmp_files/post/MainImage.${a.file_ext}`,this.userInput.mainImage=a;const n=URL.createObjectURL(i);this.indexed.saveBlobToUserPath(i,a.path),this.MainPostImage=n,this.p5loading.update({id:"add_post",message:this.lang.text.AddPost.SyncMainImage,image:this.MainPostImage,forceEnd:1e3})}selected_blobFile_callback_act(t,i=[],a="loaded",n){var c=this;return(0,m.A)(function*(){let s=c.global.selected_blobFile_callback_act(t,"tmp_files/post/",{user_id:"local"==c.isOfficial?"local":c.nakama.servers[c.isOfficial][c.target].session.user_id,display_name:c.nakama.users.self.display_name},a,i);yield c.create_selected_thumbnail(s),void 0===n?(c.AddAttachTextForm(),c.userInput.attachments.push(s)):c.userInput.attachments[n]=s,c.indexed.saveBlobToUserPath(s.blob,s.path)})()}AddAttachTextForm(){let t=`{${this.userInput.attachments.length}}`;const i=this.ContentTextArea.value,a=this.ContentTextArea.selectionStart,n=i.substring(0,a);0!=a&&("\n"!=n.charAt(n.length-1)&&(t="\n"+t),a>1&&"\n"!=n.charAt(n.length-2)&&(t="\n"+t));const c=i.substring(a);"\n"!=c.charAt(0)&&(t+="\n"),"\n"!=c.charAt(1)&&(t+="\n"),this.userInput.content=`${n}${t}${c}`,this.ContentTextArea.focus()}create_selected_thumbnail(t){var i=this;return(0,m.A)(function*(){if(i.global.set_viewer_category_from_ext(t),t.url){try{(yield fetch(t.url,{method:"HEAD",signal:i.cont.signal})).ok&&(t.thumbnail=t.url)}catch{}return void(t.typeheader=t.viewer)}try{t.thumbnail=yield i.indexed.loadBlobFromUserPath(t.path,t.type)}catch{}const a=URL.createObjectURL(t.blob);"image"===(i.p5loading.update({id:"add_post",image:"image"==t.viewer?a:null},!0),t.typeheader=t.blob.type.split("/")[0]||t.viewer,setTimeout(()=>{URL.revokeObjectURL(a)},0),t.thumbnail=void 0,t.typeheader)&&(t.thumbnail=i.sanitizer.bypassSecurityTrustUrl(a))})()}voidDraw_fileAct_callback(t,i,a){var n=this;return(0,m.A)(function*(){let c=yield n.global.voidDraw_fileAct_callback(t,"tmp_files/post/",{user_id:"local"==n.isOfficial?"local":n.nakama.servers[n.isOfficial][n.target].session.user_id,display_name:n.nakama.users.self.display_name},i);const s=URL.createObjectURL(c.blob);c.thumbnail=s,setTimeout(()=>{URL.revokeObjectURL(s)},1e3),void 0!==a?n.userInput.attachments[a]=c:n.userInput.attachments.push(c),n.p5loading.remove(t.data.loadingCtrl)})()}new_attach(t){var i=this;return(0,m.A)(function*(){switch(t.detail.value){case"load":document.getElementById("add_post_input").click();break;case"link":let a;try{try{let s=yield i.global.GetValueFromClipboard("add_post");switch(s.type){case"text/plain":a=s.value;break;case"image/png":return void i.inputFileSelected({target:{files:[s.value]}});case"error":throw s.value}}catch(s){throw s}try{let s=i.global.Base64ToBlob(a),p=a.split(";")[0].split(":")[1],u=new File([s],`${i.lang.text.ChatRoom.FileLink}.${p.split("/").pop()}`,{type:p});throw yield i.selected_blobFile_callback_act(u),"done"}catch(s){if("done"===s)throw s}try{if(0!=a.indexOf("http:")&&0!=a.indexOf("https:"))throw"\uc62c\ubc14\ub978 \uc6f9 \uc8fc\uc18c\uac00 \uc544\ub2d8"}catch(s){throw s}let n={};n.url=a,n.content_related_creator=[],n.content_related_creator.push({user_id:"local"==i.isOfficial?"local":i.nakama.servers[i.isOfficial][i.target].session.user_id,timestamp:(new Date).getTime(),display_name:i.nakama.users.self.display_name,various:"link"}),n.content_creator={user_id:"local"==i.isOfficial?"local":i.nakama.servers[i.isOfficial][i.target].session.user_id,timestamp:(new Date).getTime(),display_name:i.nakama.users.self.display_name,various:"link"};let c=n.url.split(".");n.file_ext=c.pop().split("?").shift(),n.filename=decodeURIComponent(n.url.split("/").pop()||`${i.lang.text.ChatRoom.ExternalLinkFile}.${n.file_ext}`),i.global.set_viewer_category_from_ext(n),n.type="",n.typeheader=n.viewer,i.global.modulate_thumbnail(n,n.url,i.cont),i.AddAttachTextForm(),i.userInput.attachments.push(n)}catch(n){throw"done"==n?n:`\uc778\uc2dd \ubd88\uac00\ub2a5\ud55c URL \uc815\ubcf4: ${(n.statusText?`${n.statusText}(${n.status})`:n.status)||n}`}}})()}PostAttachContextMenu(t){return this.alertCtrl.create({header:this.lang.text.AddPost.RemoveAttach,message:`{${t}} ${this.userInput.attachments[t].filename}`,buttons:[{text:this.lang.text.UserFsDir.Delete,handler:()=>{this.nakama.RemoveCurrentPostAttach(t,this.userInput)},cssClass:"redfont"}]}).then(i=>i.present()),!1}inputFileSelected(t){var i=this;return(0,m.A)(function*(){var a;if(null!==(a=t.target)&&void 0!==a&&null!==(a=a.files)&&void 0!==a&&a.length){const n="add_post";if(1!=t.target.files.length){i.p5loading.update({id:n,message:i.lang.text.ContentViewer.OnLoadContent,progress:0});for(let s=0,p=t.target.files.length;s<p;s++)i.p5loading.update({id:n,message:`${i.lang.text.ContentViewer.OnLoadContent}: ${t.target.files[s].name}`,progress:s/p}),yield i.selected_blobFile_callback_act(t.target.files[s]);i.p5loading.remove(n),setTimeout(()=>{document.getElementById("add_post_input").value=""},300)}else i.p5loading.update({id:n}),yield i.selected_blobFile_callback_act(t.target.files[0]),i.p5loading.remove(n),document.getElementById("add_post_input").value=""}})()}open_viewer(t,i){var a=this;let n=[];for(let c=0,s=this.userInput.attachments.length;c<s;c++)n.push({content:this.userInput.attachments[c]});this.lock_modal_open||(this.lock_modal_open=!0,this.global.PageDismissAct["add-post-open-viewer"]=function(){var c=(0,m.A)(function*(s){if(s.data)switch(s.data.type){case"gif-export":{let u=new File([s.data.blob],s.data.name),o=[];s.data.msg.content.content_related_creator&&(o=[...s.data.msg.content.content_related_creator]),a.selected_blobFile_callback_act(u,o)}break;case"image":let p=[];if(s.data.msg.content.content_related_creator&&(p=[...s.data.msg.content.content_related_creator]),s.data.msg.content.content_creator){let u=!1;for(let o=0,_=p.length;o<_;o++)if(p[o].user_id==s.data.msg.content.content_creator.user_id){u=!0;break}u||p.push(s.data.msg.content.content_creator)}return a.global.PageDismissAct["add-post-modify-image"]=function(){var u=(0,m.A)(function*(o){o.data&&(yield a.voidDraw_fileAct_callback(o,p,i)),delete a.global.PageDismissAct["add-post-modify-image"]});return function(o){return u.apply(this,arguments)}}(),yield a.WaitingCurrent(),a.WillLeavePageInside=!0,void a.global.ActLikeModal("portal/community/add-post/void-draw",{path:s.data.path||t.path,width:s.data.width,height:s.data.height,type:s.data.filetype,isDarkMode:s.data.isDarkMode,scrollHeight:s.data.scrollHeight,dismiss:"add-post-modify-image"});case"text":yield a.selected_blobFile_callback_act(s.data.blob,s.data.contentRelated,"textedit",i)}delete a.global.PageDismissAct["add-post-open-viewer"]});return function(s){return c.apply(this,arguments)}}(),this.WillLeavePageInside=!0,this.global.ActLikeModal("portal/community/add-post/ionic-viewer",{info:{content:t},path:t.path,alt_path:t.path,isOfficial:this.isOfficial,target:this.target,relevance:n,dismiss:"add-post-open-viewer"}))}toggle_custom_attach(t){var i=this;return(0,m.A)(function*(){switch(i.userInput.CDN=(null!=t?t:i.userInput.CDN+1)%3,i.userInput.CDN){case 0:i.extended_buttons[6].icon="cloud-offline-outline",i.extended_buttons[6].name=i.lang.text.ChatRoom.Detour;break;case 1:i.extended_buttons[6].icon="cloud-done-outline",i.extended_buttons[6].name=i.lang.text.ChatRoom.useFSS;break;case 2:i.extended_buttons[6].icon="server-outline",i.extended_buttons[6].name=i.lang.text.ChatRoom.forceSQL}})()}toggle_open_link(t){var i=this;return(0,m.A)(function*(){i.UseOutLink=null!=t?t:!i.UseOutLink,i.UseOutLink?(i.extended_buttons[7].icon="link-outline",i.extended_buttons[7].name=i.lang.text.AddPost.UseOutLink):(i.extended_buttons[7].icon="globe-outline",i.extended_buttons[7].name=i.lang.text.AddPost.NoOutLink)})()}showPreview(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/community/add-post/post-viewer",{state:{data:this.userInput,index:-1}})})}postData(){var t=this;return(0,m.A)(function*(){var i;if(t.isApplyPostData)return!1;if(!t.userInput.title)return t.p5toast.show({text:t.lang.text.AddPost.NeedPostTitle}),void t.TitleInput.focus();if(t.isModify&&!t.isServerChanged&&t.OriginalServerInfo!=`${t.isOfficial}/${t.target}`&&!t.userInput.originalInfo){const o=JSON.parse(JSON.stringify(t.OriginalInfo));t.select_server(0,!0),t.userInput.originalInfo=o,t.userInput.offlineAct="edit",t.OriginalInfo.offlineAct="edit"}t.isApplyPostData=!0,t.navCtrl.navigateBack("portal/community");const n=`postData_${Date.now()}`;yield t.p5loading.update({id:n,message:`${t.lang.text.AddPost.WIP}: ${t.userInput.title}`,forceEnd:null}),t.useVoiceRecording&&(yield t.StopAndSaveVoiceRecording());let c=!!t.userInput.server.local;t.isSaveClicked=!0;let s=t.userInput.server.isOfficial,p=t.userInput.server.target,u=(null===(i=t.OriginalInfo)||void 0===i?void 0:i.CDN)!=t.userInput.CDN;if(delete t.userInput.router,t.isModify||u||t.isServerChanged){if(t.userInput.mainImage&&t.userInput.mainImage.url){try{let o=yield fetch(t.userInput.mainImage.url);o.ok&&(URL.revokeObjectURL(t.MainPostImage),t.userInput.mainImage.blob=yield o.blob(),t.MainPostImage=URL.createObjectURL(t.userInput.mainImage.blob))}catch{}if(delete t.userInput.mainImage.thumbnail,delete t.userInput.mainImage.alt_path,delete t.userInput.mainImage.MainThumbnail,t.userInput.mainImage.url){let o=t.userInput.mainImage.url.split("/");for(;"cdn"!=o.shift(););t.userInput.mainImage.override_name=o.pop(),t.userInput.mainImage.override_path=o.join("/"),delete t.userInput.mainImage.url}}for(let o=0,_=t.userInput.attachments.length;o<_;o++)if(!t.userInput.attachments[o].blob)if(t.userInput.attachments[o].url)try{const T=yield(yield fetch(t.userInput.attachments[o].url)).blob();if(t.userInput.attachments[o].blob=T,delete t.userInput.attachments[o].thumbnail,delete t.userInput.attachments[o].alt_path,t.userInput.attachments[o].url){let l=t.userInput.attachments[o].url.split("/");for(;"cdn"!=l.shift(););t.userInput.attachments[o].override_name=l.pop(),t.userInput.attachments[o].override_path=l.join("/"),delete t.userInput.attachments[o].url}}catch{continue}else{let y=yield t.indexed.loadBlobFromUserPath(t.userInput.attachments[o].path,t.userInput.attachments[o].type);t.userInput.attachments[o].blob=y}yield t.nakama.RemovePost(t.userInput,!1,n),t.OriginalInfo&&(yield t.nakama.RemovePost(t.OriginalInfo,!1,n))}t.p5loading.update({id:n,message:`${t.lang.text.AddPost.WIP}: ${t.userInput.title}`,progress:null});try{if(!t.isModify||t.isServerChanged)if(c){let o=Number(yield t.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;t.userInput.id=`LocalPost_${o}`;try{yield t.indexed.saveTextFileToUserPath(`${o+1}`,"servers/local/target/posts/me/counter.txt")}catch(_){t.p5toast.show({text:`${t.lang.text.AddPost.SyncErr}: ${(_.statusText?`${_.statusText}(${_.status})`:_.status)||_}`}),console.log(_)}}else try{let o=yield t.nakama.servers[s][p].client.readStorageObjects(t.nakama.servers[s][p].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:t.nakama.servers[s][p].session.user_id}]}),_=0;o.objects.length&&(_=o.objects[0].value.counter),t.userInput.id=`ServerPost_${_}`,yield t.nakama.servers[s][p].client.writeStorageObjects(t.nakama.servers[s][p].session,[{collection:"server_post",key:"Counter",permission_write:1,permission_read:2,value:{counter:_+1}}])}catch(o){t.p5toast.show({text:`${t.lang.text.AddPost.SyncErr}: ${(o.statusText?`${o.statusText}(${o.status})`:o.status)||o}`}),console.log(o)}t.isModify?t.userInput.modify_time=(new Date).getTime():(t.userInput.create_time=(new Date).getTime(),t.userInput.modify_time=t.userInput.create_time),yield t.nakama.AddPost(t.userInput,n,t.UseOutLink,c,t.MainPostImage),t.nakama.rearrange_posts()}catch(o){t.p5toast.show({text:`${t.lang.text.AddPost.SyncErr}: ${(o.statusText?`${o.statusText}(${o.status})`:o.status)||o}`}),console.warn("\uac8c\uc2dc\ubb3c \uc800\uc7a5 \ucc98\ub9ac \uc624\ub958: ",o)}try{let o=t.nakama.collectLinkedUser(t.nakama.servers[t.isOfficial][t.target]);yield t.nakama.servers[t.isOfficial][t.target].client.rpc(t.nakama.servers[t.isOfficial][t.target].session,"send_noti_fn",{code:S.I.MANAGE_POST,title:"post_add",receiver_id:o,content:{type:"add",user_id:t.userInput.creator_id,post_id:t.userInput.id},persistent:!1})}catch{}yield t.p5loading.update({id:n,message:`${t.lang.text.AddPost.WIP}: ${t.userInput.title}`,progress:1,forceEnd:1e3})})()}ionViewWillLeave(){if(this.p5loading.update({id:"add_post",forceEnd:0},!0),this.WillLeavePage=!0,this.WillLeavePageInside||this.global.RestoreShortCutAct("AddPostPage"),!this.isApplyPostData)try{this.nakama.posts_orig[this.isOfficial][this.target][this.userInput.creator_id][this.userInput.id]&&delete this.nakama.posts_orig[this.isOfficial][this.target][this.userInput.creator_id][this.userInput.id],this.nakama.load_local_post_with_id(this.userInput.id,this.userInput.server.isOfficial,this.userInput.server.target,this.userInput.creator_id),this.nakama.rearrange_posts()}catch{}}}return(r=f).\u0275fac=function(t){return new(t||r)(e.rXU(U.z3),e.rXU(M.y),e.rXU(B.q9),e.rXU(S.X),e.rXU(E.G),e.rXU(V.n),e.rXU(G.up),e.rXU(C.nX),e.rXU(C.Ix),e.rXU(N.u),e.rXU(b.hG),e.rXU(W.f))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-add-post"]],decls:36,vars:22,consts:[["accordionGroup",""],["AttachGroup",""],[1,"ion-no-border"],[4,"ngIf"],["slot","start"],["defaultHref","portal/community"],["slot","end","name","play-circle-outline",1,"top_icon",3,"click"],["id","p5Drop_addPost",2,"position","absolute","width","100%","height","100%","display","flex","z-index","500","pointer-events","none"],["value","colors","expand","inset",3,"disabled","value","click",4,"ngIf"],["button","",3,"click"],[1,"additional_form","new_bg_form"],[2,"display","contents"],[1,"ion-text-end"],["style","width: 100%; text-align: center; text-align: -webkit-center; padding: 8px;",4,"ngIf"],["button",""],["id","add_post_title",3,"ngModelChange","disabled","placeholder","ngModel"],[2,"position","relative"],["class","shortcut_hint","style","z-index: 32;",4,"ngIf"],["id","add_post_content",1,"infobox",2,"height","360px",3,"paste","ngModelChange","disabled","placeholder","ngModel"],["hidden","","type","file","id","add_post_input","accept","*","multiple","",3,"change"],["hidden","","type","file","id","PostMainImage_sel","accept","image/*",3,"change"],["hidden","","type","file","accept","image/*",3,"change","id"],[2,"width","100%","text-align","center","padding-bottom","16px"],["style","display: inline-block;",4,"ngFor","ngForOf"],["value","colors",3,"disabled","value","click",4,"ngIf"],["class","shortcut_hint",4,"ngIf"],["button","",3,"click","disabled"],[1,"ion-text-center"],["value","colors","expand","inset",3,"click","disabled","value"],["value","colors"],["slot","header"],[1,"ion-text-right"],[1,"ion-accordion-toggle-icon","hide_accordion_icon"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],[2,"width","100%","text-align","center","text-align","-webkit-center","padding","8px"],[2,"pointer-events","none",3,"ngModelChange","ngModel"],[1,"thumbnail_image",2,"width","400px","padding-top","8px"],["alt","MainPostImage",3,"src"],[1,"shortcut_hint",2,"z-index","32"],[2,"display","inline-block"],[1,"ext_button","ext_button_override",3,"click","contextmenu","hidden"],["slot","icon-only","style","width: 36px; height: 36px;",3,"name",4,"ngIf"],["class","ext_icon_img",3,"src","alt",4,"ngIf"],["slot","icon-only",2,"width","36px","height","36px",3,"name"],[1,"ext_icon_img",3,"src","alt"],["value","colors",3,"click","disabled","value"],["button","",3,"disabled","click","contextmenu",4,"ngFor","ngForOf"],["button","",3,"click","contextmenu","disabled"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],[1,"shortcut_hint"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",2)(1,"ion-toolbar"),e.DNE(2,H,2,1,"ion-title",3)(3,J,2,1,"ion-title",3),e.j41(4,"ion-buttons",4),e.nrm(5,"ion-back-button",5),e.k0s(),e.j41(6,"ion-icon",6),e.bIt("click",function(){return i.showPreview()}),e.k0s()()(),e.j41(7,"ion-content"),e.nrm(8,"div",7),e.DNE(9,Q,11,5,"ion-accordion-group",8),e.j41(10,"ion-item",9),e.bIt("click",function(){return i.go_to_profile()}),e.nrm(11,"div",10),e.j41(12,"ion-label",11),e.EFF(13),e.k0s(),e.j41(14,"ion-label",12),e.EFF(15),e.k0s()(),e.j41(16,"ion-item-divider")(17,"ion-label"),e.EFF(18),e.k0s()(),e.DNE(19,K,6,9,"div",13),e.j41(20,"ion-item",14)(21,"ion-input",15),e.mxI("ngModelChange",function(n){return e.DH7(i.userInput.title,n)||(i.userInput.title=n),n}),e.k0s()(),e.j41(22,"div",16),e.DNE(23,Z,2,0,"div",17),e.j41(24,"textarea",18),e.bIt("paste",function(n){return i.postContentOnPasteAct(n)}),e.mxI("ngModelChange",function(n){return e.DH7(i.userInput.content,n)||(i.userInput.content=n),n}),e.k0s()(),e.j41(25,"input",19),e.bIt("change",function(n){return i.inputFileSelected(n)}),e.k0s(),e.j41(26,"input",20),e.bIt("change",function(n){return i.ChangeMainPostImage(n)}),e.k0s(),e.j41(27,"input",21),e.bIt("change",function(n){return i.SelectVoidDrawBackgroundImage(n)}),e.k0s(),e.j41(28,"div",22),e.DNE(29,et,6,6,"div",23),e.k0s(),e.DNE(30,nt,8,5,"ion-accordion-group",24),e.j41(31,"div"),e.DNE(32,at,2,0,"div",25),e.j41(33,"ion-item",26),e.bIt("click",function(){return i.postData()}),e.j41(34,"ion-label",27),e.EFF(35),e.k0s()()()()),2&t&&(e.R7$(2),e.Y8G("ngIf",i.isModify),e.R7$(),e.Y8G("ngIf",!i.isModify),e.R7$(6),e.Y8G("ngIf",i.servers.length),e.R7$(2),e.Aen("background-image: linear-gradient(to right, #0000, #"+i.userInput.UserColor+"44)"),e.R7$(2),e.JRh(i.lang.text.AddPost.Creator),e.R7$(2),e.JRh(i.userInput.creator_name||i.lang.text.Profile.noname_user),e.R7$(3),e.JRh(i.lang.text.AddPost.AddNewPost),e.R7$(),e.Y8G("ngIf",i.MainPostImage),e.R7$(2),e.Y8G("disabled",i.isSaveClicked)("placeholder",i.lang.text.AddPost.TitlePlaceholder),e.R50("ngModel",i.userInput.title),e.R7$(2),e.Y8G("ngIf",i.global.ShowHint&&i.CheckIfTitleInputFocus),e.R7$(),e.Y8G("disabled",i.isSaveClicked)("placeholder",i.lang.text.AddPost.ContentPlaceHolder),e.R50("ngModel",i.userInput.content),e.R7$(3),e.Y8G("id",i.voidDrawContextId),e.R7$(2),e.Y8G("ngForOf",i.extended_buttons),e.R7$(),e.Y8G("ngIf",i.userInput.attachments.length),e.R7$(2),e.Y8G("ngIf",i.global.ShowHint),e.R7$(),e.Y8G("disabled",i.isSaveClicked),e.R7$(2),e.JRh(i.lang.text.AddPost.Post))},dependencies:[F.Sq,F.bT,R.me,R.BC,R.vS,b.xk,b.YH,b.QW,b.W9,b.eU,b.iq,b.$w,b.uz,b.Dg,b.he,b.BC,b.BY,b.ai,b.hB,b.Gw,b.el],styles:[".ext_button_override[_ngcontent-%COMP%]{margin:12px;cursor:pointer}.thumbnail_image[_ngcontent-%COMP%]{width:100%;max-height:240px;object-fit:cover;border-radius:16px;overflow:hidden}ion-input[_ngcontent-%COMP%]{--highlight-color-valid: var(--ion-color-primary)}"],data:{animation:[(0,A.hZ)("toggle_item",[(0,A.kY)(":enter",[(0,A.iF)({height:"0px",opacity:0}),(0,A.i0)(".5s ease-out",(0,A.iF)({height:"{{ offset }}px",opacity:1}))],{params:{offset:"48"}}),(0,A.kY)(":leave",[(0,A.i0)(".5s ease-in",(0,A.iF)({height:"0px",opacity:0}))])])]}}),f})()},{path:"void-draw",loadChildren:()=>Promise.all([g.e(6042),g.e(2655)]).then(g.bind(g,2655)).then(r=>r.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([g.e(6042),g.e(4803),g.e(222)]).then(g.bind(g,4803)).then(r=>r.IonicViewerPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([g.e(222),g.e(526)]).then(g.bind(g,526)).then(r=>r.PostViewerPageModule)}];let ot=(()=>{var r;class f{}return(r=f).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[C.iI.forChild(st),C.iI]}),f})(),lt=(()=>{var r;class f{}return(r=f).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[F.MD,R.YN,b.bv,ot]}),f})()}}]);