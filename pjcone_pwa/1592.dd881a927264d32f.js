"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1592],{1592:(R,g,a)=>{a.r(g),a.d(g,{AddPostPageModule:()=>A});var c=a(1368),u=a(4716),s=a(5624),m=a(3332),h=a(5020),p=a(340),e=a(4496),_=a(4500),f=a(9240),P=a(7136),v=a(3824);function C(t,d){if(1&t){const n=e.KQA();e.I0R(0,"ion-item",5),e.qCj("click",function(){const r=e.usT(n).index,l=e.GaO(2);return e.CGJ(l.select_server(r))}),e.I0R(1,"ion-label"),e.OEk(2),e.C$Y()()}if(2&t){const n=d.$implicit;e.yG2(2),e.cNF(n.name)}}function y(t,d){if(1&t){const n=e.KQA();e.I0R(0,"ion-accordion-group",15,16),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.isExpanded=!0)}),e.I0R(2,"ion-accordion",17)(3,"ion-item",18)(4,"ion-label"),e.OEk(5),e.C$Y(),e.I0R(6,"ion-label",19),e.OEk(7),e.C$Y(),e.wR5(8,"ion-icon",20),e.C$Y(),e.I0R(9,"div",21),e.yuY(10,C,3,1,"ion-item",22),e.C$Y()()()}if(2&t){const n=e.GaO();e.E7m("disabled",n.isSaveClicked)("value",n.isExpanded),e.yG2(5),e.cNF(n.lang.text.AddGroup.SelectServer),e.yG2(2),e.cNF(n.servers[n.index].name),e.yG2(3),e.E7m("ngForOf",n.servers)}}function I(t,d){if(1&t&&(e.I0R(0,"ion-item",23)(1,"ion-label"),e.OEk(2),e.C$Y()()),2&t){const n=d.index,i=e.GaO();e.E7m("disabled",i.isSaveClicked),e.yG2(2),e.cNF("["+n+"] Click me")}}const b=[{path:"",component:(()=>{var t;class d{constructor(i,o,r,l,G,E){this.global=i,this.lang=o,this.navCtrl=r,this.nakama=l,this.modalCtrl=G,this.p5toast=E,this.servers=[],this.userInput={title:void 0,titleImage:void 0,content:void 0,creator_id:void 0,creator_name:void 0,UserColor:void 0,create_time:void 0,modify_time:void 0,server:void 0,attachments:[]},this.index=0,this.isExpanded=!1,this.isSaveClicked=!1}ngOnInit(){this.servers=this.nakama.get_all_server_info(!0,!0),this.select_server(0),this.userInput.creator_name=this.nakama.users.self.display_name}catchBottomTabShortCut(){this.BottomTabShortcut=this.global.p5key.KeyShortCut.BottomTab,delete this.global.p5key.KeyShortCut.BottomTab}ionViewWillEnter(){this.AddShortcut(),this.catchBottomTabShortCut();let i=document.getElementById("add_post_title").childNodes[1].childNodes[1].childNodes[1];this.userInput.title?document.getElementById("add_post_content").focus():i.focus()}go_to_profile(){this.modalCtrl.create({component:p.w,componentProps:{isOfficial:this.isOfficial,target:this.target}}).then(i=>i.present())}select_server(i){this.index=i,this.userInput.server=this.servers[i],this.isExpanded=!1,this.isOfficial=this.servers[i].isOfficial,this.target=this.servers[i].target,this.userInput.creator_id=this.nakama.servers[this.isOfficial][this.target].session.user_id,this.userInput.UserColor=(this.userInput.creator_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6)}AddShortcut(){this.global.p5key&&this.global.p5key.KeyShortCut&&(this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.navigateBack("portal/community")})}add_attachment(){this.isSaveClicked||(console.log("\ucca8\ubd80\ud30c\uc77c \ucd94\uac00\ud558\uae30 \ud14c\uc2a4\ud2b8"),this.userInput.attachments.push({filename:"test.psd",datatype:"url"}))}postData(){this.p5toast.show({text:"\uac8c\uc2dc\ubb3c \uc791\uc131 \uae30\ub2a5 \uc900\ube44\uc911"}),this.isSaveClicked=!0,this.userInput.create_time?this.userInput.modify_time=(new Date).getTime():this.userInput.create_time=(new Date).getTime()}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape,this.global.p5key.KeyShortCut.BottomTab=this.BottomTabShortcut}}return(t=d).\u0275fac=function(i){return new(i||t)(e.GI1(h.A1),e.GI1(_.o),e.GI1(f.wX),e.GI1(P.h),e.GI1(s.qS),e.GI1(v.O))},t.\u0275cmp=e.In1({type:t,selectors:[["app-add-post"]],decls:27,vars:18,consts:[[3,"translucent"],["slot","start"],["defaultHref","portal/community"],[3,"fullscreen"],["value","colors","expand","inset",3,"disabled","value","click",4,"ngIf"],["button","",3,"click"],[1,"additional_form","new_bg_form"],[1,"ion-text-end"],["button",""],["id","add_post_title",3,"disabled","placeholder","ngModel","ngModelChange"],["id","add_post_content",1,"infobox",2,"height","50%",3,"disabled","placeholder"],[3,"click"],["button","",3,"disabled",4,"ngFor","ngForOf"],["button","",3,"disabled","click"],[1,"ion-text-center"],["value","colors","expand","inset",3,"disabled","value","click"],["accordionGroup",""],["value","colors"],["slot","header"],[1,"ion-text-right"],[1,"ion-accordion-toggle-icon","hide_accordion_icon"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"disabled"]],template:function(i,o){1&i&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.OEk(3),e.C$Y(),e.I0R(4,"ion-buttons",1),e.wR5(5,"ion-back-button",2),e.C$Y()()(),e.I0R(6,"ion-content",3),e.yuY(7,y,11,5,"ion-accordion-group",4),e.I0R(8,"ion-item",5),e.qCj("click",function(){return o.go_to_profile()}),e.wR5(9,"div",6),e.I0R(10,"ion-label"),e.OEk(11),e.C$Y(),e.I0R(12,"ion-label",7),e.OEk(13),e.C$Y()(),e.I0R(14,"ion-item-divider")(15,"ion-label"),e.OEk(16),e.C$Y()(),e.I0R(17,"ion-item",8)(18,"ion-input",9),e.iHE("ngModelChange",function(l){return e.kNx(o.userInput.title,l)||(o.userInput.title=l),l}),e.C$Y()(),e.wR5(19,"textarea",10),e.I0R(20,"ion-item-divider",11),e.qCj("click",function(){return o.add_attachment()}),e.I0R(21,"ion-label"),e.OEk(22),e.C$Y()(),e.yuY(23,I,3,2,"ion-item",12),e.I0R(24,"ion-item",13),e.qCj("click",function(){return o.postData()}),e.I0R(25,"ion-label",14),e.OEk(26),e.C$Y()()()),2&i&&(e.E7m("translucent",!0),e.yG2(3),e.cNF(o.lang.text.AddPost.Title),e.yG2(3),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",o.servers.length),e.yG2(2),e.m_g("background-image: linear-gradient(to right, #0000, #"+o.userInput.UserColor+"44)"),e.yG2(2),e.cNF(o.lang.text.AddPost.Creator),e.yG2(2),e.cNF(o.userInput.creator_name||o.lang.text.Profile.noname_user),e.yG2(3),e.cNF(o.lang.text.AddPost.AddNewPost),e.yG2(2),e.E7m("disabled",o.isSaveClicked)("placeholder",o.lang.text.AddPost.TitlePlaceholder),e.OKB("ngModel",o.userInput.title),e.yG2(),e.E7m("disabled",o.isSaveClicked)("placeholder",o.lang.text.AddPost.ContentPlaceHolder),e.yG2(3),e.cNF(o.lang.text.AddPost.AddAttaches),e.yG2(),e.E7m("ngForOf",o.userInput.attachments),e.yG2(),e.E7m("disabled",o.isSaveClicked),e.yG2(2),e.cNF(o.lang.text.AddPost.Post))},dependencies:[c.ay,c.u_,u.ue,u._G,s.cm,s.qU,s.GS,s._i,s.wB,s.Ko,s.A5,s.Yb,s.S8,s.QR,s.tM,s.Md,s.qG,s.Im]}),d})()}];let k=(()=>{var t;class d{}return(t=d).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[m.qQ.forChild(b),m.qQ]}),d})(),A=(()=>{var t;class d{}return(t=d).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[c.MD,u.y,s.wZ,k]}),d})()}}]);