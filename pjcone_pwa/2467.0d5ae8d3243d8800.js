"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2467],{2467:(U,c,n)=>{n.r(c),n.d(c,{DedicatedSettingsPageModule:()=>Z});var u=n(6814),g=n(95),a=n(1325),h=n(5877),f=n(9868),e=n(9468),v=n(1768),p=n(7488),m=n(3857);function S(i,r){if(1&i&&(e.TgZ(0,"ion-item",10),e._UZ(1,"div",7),e.TgZ(2,"ion-label",8),e._uU(3),e.qZA()()),2&i){const d=r.$implicit,t=e.oxw();e.xp6(1),e.Akn("background-color: "+t.statusBar.colors[t.statusBar.tools[d]||"offline"]),e.xp6(2),e.Oqu(t.lang.text.UseAsServer["Tool_"+d])}}const b=[{path:"",component:(()=>{var i;class r{constructor(t,s,o){this.server=t,this.statusBar=s,this.lang=o,this.addresses=this.lang.text.UseAsServer.LoadingAddresses,this.tools=[],this.block={groupchat:!1,webremote:!1}}ngOnInit(){new f(t=>{t.setup=()=>{t.noCanvas(),t.loadStrings(`assets/data/infos/${this.lang.lang}/dedicated.txt`,s=>{this.info=s.join("\n"),t.remove()},s=>{console.error("\uc0ac\uc124\uc11c\ubc84 \uc124\uc815 \ud30c\uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",s),t.remove()})}}),this.server.funcs.onCheck=t=>{let s=Object.keys(t),o=[];s.forEach(l=>{t[l].ipv4Addresses.length&&t[l].ipv4Addresses.forEach(T=>{o.push(`${T} (${l})`)})}),this.addresses=o.length?o.join("\n"):this.lang.text.UseAsServer.NoAddress},this.server.check_addresses(),this.CheckToolsServer()}CheckToolsServer(){let t=Object.keys(this.statusBar.tools);for(let s=0,o=t.length;s<o;s++)this.tools.push(t[s])}block_button(t){this.block[t]=!0,setTimeout(()=>{this.block[t]=!1},2e3)}start_minimalserver(){"offline"==this.statusBar.dedicated.official.groupchat?(this.block_button("groupchat"),this.statusBar.settings.dedicatedServer="pending",this.statusBar.dedicated.official.groupchat="pending",this.server.funcs.onStart=()=>{this.statusBar.settings.dedicatedServer="online",this.statusBar.dedicated.official.groupchat="online"},this.server.funcs.onFailed=()=>{this.statusBar.settings.dedicatedServer="missing",this.statusBar.dedicated.official.groupchat="missing",setTimeout(()=>{this.statusBar.settings.dedicatedServer="offline",this.statusBar.dedicated.official.groupchat="offline"},1500)},this.server.initialize()):(this.block_button("groupchat"),this.server.stop())}}return(i=r).\u0275fac=function(t){return new(t||i)(e.Y36(v.A),e.Y36(p.g),e.Y36(m.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dedicated-settings"]],decls:25,vars:12,consts:[["slot","start"],["defaultHref","settings"],["disabled","",1,"infobox",2,"height","250px",3,"ngModel","ngModelChange"],["color","medium"],[3,"click"],["disabled","",1,"infobox",2,"height","80px",3,"ngModel","ngModelChange"],["button","",3,"disabled","click"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["button","","disabled","",4,"ngFor","ngForOf"],["button","","disabled",""]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",0),e._UZ(5,"ion-back-button",1),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"textarea",2),e.NdJ("ngModelChange",function(l){return s.info=l}),e.qZA(),e.TgZ(11,"ion-list-header")(12,"ion-label",3),e._uU(13),e.qZA(),e.TgZ(14,"ion-button",4),e.NdJ("click",function(){return s.server.check_addresses()}),e._uU(15),e.qZA()(),e.TgZ(16,"textarea",5),e.NdJ("ngModelChange",function(l){return s.addresses=l}),e.qZA(),e.TgZ(17,"ion-item-divider")(18,"ion-label"),e._uU(19),e.qZA()(),e.TgZ(20,"ion-item",6),e.NdJ("click",function(){return s.start_minimalserver()}),e._UZ(21,"div",7),e.TgZ(22,"ion-label",8),e._uU(23),e.qZA()(),e.YNc(24,S,4,3,"ion-item",9),e.qZA()),2&t&&(e.xp6(3),e.Oqu(s.lang.text.UseAsServer.Title),e.xp6(6),e.Oqu(s.lang.text.UseAsServer.UserNotice),e.xp6(1),e.Q6J("ngModel",s.info),e.xp6(3),e.Oqu(s.lang.text.UseAsServer.ThisDeviceAddress),e.xp6(2),e.Oqu(s.lang.text.UseAsServer.RefreshAddress),e.xp6(1),e.Q6J("ngModel",s.addresses),e.xp6(3),e.Oqu(s.lang.text.UseAsServer.DedicatedServer),e.xp6(1),e.Q6J("disabled",s.block.groupchat),e.xp6(1),e.Akn("background-color: "+s.statusBar.colors[s.statusBar.dedicated.official.groupchat||"offline"]),e.xp6(2),e.Oqu(s.lang.text.UseAsServer.CustomGroupChat),e.xp6(1),e.Q6J("ngForOf",s.tools))},dependencies:[u.sg,g.Fj,g.JJ,g.On,a.oU,a.YG,a.Sm,a.W2,a.Gu,a.Ie,a.rH,a.Q$,a.yh,a.wd,a.sr,a.cs]}),r})()}];let A=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(b),h.Bz]}),r})(),Z=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,g.u5,a.Pc,A]}),r})()}}]);