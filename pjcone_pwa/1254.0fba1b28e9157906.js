"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1254],{1254:(T,u,a)=>{a.r(u),a.d(u,{NotificationPageModule:()=>I});var g=a(9808),d=a(4182),o=a(3996),c=a(9705),m=a(5016),p=a(3260),h=a(6505),t=a(9863),N=a(2855),_=a(3336),x=a(5742);function P(e,s){if(1&e&&t._UZ(0,"img",11),2&e){const n=t.oxw();t.Q6J("src",n.userInput.img_url,t.LSH)}}const f="ADMIN_NOTI",Z=[{path:"",component:(()=>{class e{constructor(n,i,l,r){this.client=n,this.p5toast=i,this.navCtrl=l,this.lang=r,this.userInput={img_url:void 0,text:void 0},this.info_text="",this.cant_use_clipboard=!1,this.imageURL_disabled=!1}ngOnInit(){this.client.disconnected[f]=()=>{this.navCtrl.back()},this.cant_use_clipboard="DesktopPWA"!=m.n$,this.client.is_admin||(this.p5toast.show({text:this.lang.text.Administrator.OnlyForAdmin}),this.navCtrl.back()),new h(n=>{n.setup=()=>{n.loadStrings(`assets/data/infos/${this.lang.lang}/administrator_notification.txt`,i=>{this.info_text=i.join("\n"),n.remove()},i=>{console.error("\uad00\ub9ac\uc790 \uc54c\ub9bc \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",i),n.remove()})}})}imageURLPasted(){this.imageURL_disabled=!0,p.Z.read().then(n=>{0==n.indexOf("http")?this.userInput.img_url=n:0==n.indexOf("data:image")?this.p5toast.show({text:this.lang.text.Administrator.CannotUseDataURL}):this.p5toast.show({text:this.lang.text.Profile.copyURIFirst})}),setTimeout(()=>{this.imageURL_disabled=!1},1500)}send(){!this.userInput.text||(this.client.send(JSON.stringify({act:"global_noti",img:this.userInput.img_url,text:this.userInput.text})),delete this.userInput.img_url,delete this.userInput.text)}ionViewWillLeave(){delete this.client.disconnected[f]}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(N.Z),t.Y36(_.F),t.Y36(o.SH),t.Y36(x.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification"]],decls:28,vars:16,consts:[["slot","start"],["defaultHref","portal/settings"],["disabled","",1,"infobox",3,"ngModel","ngModelChange"],["alt","",3,"src",4,"ngIf"],[3,"hidden","disabled","click"],["color","medium"],[3,"hidden"],["type","text",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["button",""],["expand","block",3,"click"],["alt","",3,"src"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"textarea",2),t.NdJ("ngModelChange",function(r){return i.info_text=r}),t.qZA(),t.TgZ(11,"ion-item-divider")(12,"ion-label"),t._uU(13),t.qZA()(),t.YNc(14,P,1,1,"img",3),t.TgZ(15,"ion-item",4),t.NdJ("click",function(){return i.imageURLPasted()}),t.TgZ(16,"ion-label",5),t._uU(17),t.qZA()(),t.TgZ(18,"ion-item",6)(19,"ion-input",7),t.NdJ("ngModelChange",function(r){return i.userInput.img_url=r}),t.qZA(),t.TgZ(20,"ion-button",8),t.NdJ("click",function(){return i.imageURLPasted()}),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",9)(23,"ion-label"),t._uU(24),t.qZA(),t.TgZ(25,"ion-input",7),t.NdJ("ngModelChange",function(r){return i.userInput.text=r}),t.qZA()(),t.TgZ(26,"ion-button",10),t.NdJ("click",function(){return i.send()}),t._uU(27),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(i.lang.text.Settings.admin_noti_all),t.xp6(6),t.Oqu(i.lang.text.Administrator.AboutThisNotification),t.xp6(1),t.Q6J("ngModel",i.info_text),t.xp6(3),t.Oqu(i.lang.text.Administrator.InputMessageInfo),t.xp6(1),t.Q6J("ngIf",i.userInput.img_url),t.xp6(1),t.Q6J("hidden",i.cant_use_clipboard)("disabled",i.imageURL_disabled),t.xp6(2),t.Oqu(i.lang.text.Profile.pasteURI),t.xp6(1),t.Q6J("hidden",!i.cant_use_clipboard),t.xp6(1),t.Q6J("placeholder",i.lang.text.Profile.enterURI)("ngModel",i.userInput.img_url),t.xp6(2),t.hij(" ",i.lang.text.Profile.change_img," "),t.xp6(3),t.Oqu(i.lang.text.Administrator.CommunityNotification),t.xp6(1),t.Q6J("placeholder",i.lang.text.Administrator.WriteContent)("ngModel",i.userInput.text),t.xp6(2),t.hij(" ",i.lang.text.Administrator.SendNotification," "))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.oU,o.cs,o.W2,o.rH,o.Q$,d.Fj,d.JJ,d.On,g.O5,o.Ie,o.pK,o.j9,o.YG],styles:[""]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Z)],c.Bz]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,d.u5,o.Pc,A]]}),e})()}}]);