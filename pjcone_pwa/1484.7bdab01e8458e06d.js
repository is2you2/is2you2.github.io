"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(U,S,s)=>{s.r(S),s.d(S,{SettingsPageModule:()=>H});var T=s(9808),Z=s(4182),o=s(3996),h=s(9705),x=s(655),P=s(4464),A=s(5016),k=s(2722),b=s(428),M=s(6366),t=s(9863),v=s(4606),g=s(9912),u=s(3496),p=s(2855),f=s(9040),_=s(5742),O=s(8677);const y=["LangSel"];function J(a,m){if(1&a&&(t.TgZ(0,"ion-label",26),t._uU(1),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.hij("",i.client.address_override," ")}}function N(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("dedicated-settings")}),t._UZ(1,"div",9),t.TgZ(2,"ion-label",10),t._uU(3),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.dedicatedServer]),t.xp6(2),t.Oqu(i.lang.text.Settings.useDeviceAsServer)}}function B(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){const l=t.CHM(i).index;return t.oxw().go_to_group_detail(l)}),t._UZ(1,"div",9),t.TgZ(2,"div",6),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"ion-label",10)(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"h2"),t._uU(8),t.qZA()()()}if(2&a){const i=m.$implicit,e=t.oxw();t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[i.status||"offline"]),t.xp6(2),t.Akn("filter: "+("online"==i.status?"grayscale(0) contrast(1);":"grayscale(.9) contrast(1.4);")),t.Q6J("src",i.img,t.LSH),t.xp6(3),t.Oqu(i.server.name+" ("+i.server.target+")"),t.xp6(2),t.Oqu(i.name)}}function E(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("notification")}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()()()}if(2&a){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.admin_community_menu),t.xp6(3),t.Oqu(i.lang.text.Settings.admin_noti_all)}}function D(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().setDisableBatteryOptimizations()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&a){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.batteryOptimization)}}function F(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_tool_list()}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()()()}if(2&a){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.ToolManage),t.xp6(3),t.Oqu(i.lang.text.Settings.ToolList)}}function I(a,m){if(1&a){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("translator")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(2),t.Oqu(i.lang.text.Settings.AppTranslator)}}function L(a,m){1&a&&(t.TgZ(0,"ion-select-option",27),t._uU(1,"#"),t.qZA())}const Y=[{path:"",component:(()=>{class a{constructor(i,e,n,l,r,c,d,C,j){this.modalCtrl=i,this.nav=e,this.statusBar=n,this.nakama=l,this.indexed=r,this.client=c,this.bgmode=d,this.lang=C,this.noti=j,this.cant_dedicated=!1,this.EventListenerAct=$=>{$.detail.register(10,G=>{this.go_back(),G()})},this.list_tools=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.groups=[],this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==A.n$||"MobilePWA"==A.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(i,e)=>{i&&e&&(this.nakama.users.self.img=e.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=Boolean(localStorage.getItem("ShowDisableBatteryOptimizations")),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.indexed.GetFileListFromDB("acts/",i=>{this.list_tools=i})}go_to_tool_list(){this.modalCtrl.create({component:M.q,componentProps:{data:this.list_tools}}).then(i=>{i.onWillDismiss().then(()=>{this.indexed.GetFileListFromDB("acts/",e=>{this.list_tools=e})}),i.present()})}checkAdsInfo(){return(0,x.mG)(this,void 0,void 0,function*(){try{let i=yield fetch(`${A.Oy}pjcone_ads/${this.lang.lang}.txt`);if(!i.ok)throw new Error("\uc5c6\ub294\uac70\ub098 \ub2e4\ub984\uc5c6\uc9c0");{let e=yield(yield i.blob()).text();this.indexed.saveTextFileToUserPath(e,"ads_list.txt");let n=e.split("\n");this.listAvailableAds(n)}}catch(i){this.indexed.loadTextFromUserPath("ads_list.txt",(e,n)=>{e&&n&&this.listAvailableAds(n.split("\n"))})}})}listAvailableAds(i){let n,e=(new Date).getTime();this.availables.length=0;for(let r=0,c=i.length;r<c;r++){let d=i[r].split(",");Number(d[0])<e?e<Number(d[1])&&this.availables.push([Number(d[0]),Number(d[1]),d[2]]):n?Number(d[0])<n&&(n=Number(d[0])):n=Number(d[0])}let l=this.AD_Div.childNodes;this.isAdHiding=!0,l.forEach(r=>{r.remove()}),this.availables.length?this.displayRandomAds():n&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(r,c)=>{r&&c&&this.listAvailableAds(c.split("\n"))})},n-(new Date).getTime()))}displayRandomAds(){let i=Math.floor(Math.random()*this.availables.length),e=this.availables[i];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(l,r)=>{l&&r&&this.listAvailableAds(r.split("\n"))})},e[1]-(new Date).getTime());let n=document.createElement("iframe");n.id="AdFrame",n.setAttribute("src",e[2]),n.setAttribute("frameborder","0"),n.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(n)}open_link(i){window.open(i,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.nakama.socket_reactive.settings=this,this.profile_filter=this.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.load_groups(),document.addEventListener("ionBackButton",this.EventListenerAct)}load_groups(){let i=this.nakama.rearrange_group_list();i.forEach(e=>(0,x.mG)(this,void 0,void 0,function*(){let n=e.server.isOfficial,l=e.server.target;"online"==this.statusBar.groupServer[n][l]&&"missing"!=this.nakama.groups[n][l][e.id].status&&(yield this.nakama.servers[n][l].client.listGroupUsers(this.nakama.servers[n][l].session,e.id).then(r=>{if(r.group_users.length){let c=!0;for(let d=0,C=r.group_users.length;d<C;d++)if(r.group_users[d].user.id==this.nakama.servers[n][l].session.user_id){switch(r.group_users[d].state){case 0:case 1:case 2:this.nakama.groups[n][l][e.id].status="online";break;case 3:this.nakama.groups[n][l][e.id].status="pending";break;default:console.warn("\uc774\ud574\ud560 \uc218 \uc5c6\ub294 \ucf54\ub4dc \ubc18\ud658: ",r.group_users[d].state),this.nakama.groups[n][l][e.id].status="missing"}c=!1,r.group_users[d].is_me=!0;break}c&&(this.nakama.groups[n][l][e.id].status="missing",e.channel_id&&(this.nakama.channels_orig[n][l][e.channel_id].status="missing"),this.nakama.save_channels_with_less_info())}else this.nakama.groups[n][l][e.id].status="missing",this.nakama.channels_orig[n][l][e.channel_id].status="missing",this.nakama.save_channels_with_less_info();r.group_users.length&&(e.users=r.group_users),r.group_users.forEach(c=>(0,x.mG)(this,void 0,void 0,function*(){c.is_me?c.user=this.nakama.users.self:this.nakama.load_other_user(c.user.id,n,l).avatar_url==c.user.avatar_url&&this.nakama.load_other_user(c.user.id,n,l).img?this.nakama.save_other_user(c.user,n,l):yield this.nakama.servers[n][l].client.readStorageObjects(this.nakama.servers[n][l].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:c.user.id}]}).then(d=>{d.objects.length&&(c.user.img=d.objects[0].value.img),this.nakama.save_other_user(c.user,n,l)})})),this.nakama.save_groups_with_less_info()}))})),this.groups=i}start_minimalchat(i){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:k.X,componentProps:{address:i,name:this.nakama.users.self.display_name}}).then(e=>{e.present(),this.lock_modal_open=!1})}}go_to_group_detail(i){this.lock_modal_open||(this.lock_modal_open=!0,delete this.nakama.socket_reactive.settings,this.modalCtrl.create({component:b.x,componentProps:{info:this.groups[i]}}).then(e=>{e.onWillDismiss().then(()=>{this.nakama.socket_reactive.settings=this,this.load_groups()}),e.present(),this.lock_modal_open=!1}))}LangClicked(){this.LangSel.open()}LanguageChanged(i){this.lang.lang=i.detail.value,this.lang.load_selected_lang()}go_to_page(i){this.nav.navigateForward(`settings/${i}`,{animation:P.Nn})}ionViewWillLeave(){delete this.nakama.socket_reactive.settings,document.removeEventListener("ionBackButton",this.EventListenerAct)}go_back(){this.nakama.rearrange_all_user().forEach(n=>{delete n.img}),this.nakama.rearrange_channels().forEach(n=>{2==n.redirect.type&&this.indexed.loadTextFromUserPath(`servers/${n.server.isOfficial}/${n.server.target}/users/${n.redirect.id}/profile.img`,(l,r)=>{l&&r&&(this.nakama.load_other_user(n.redirect.id,n.server.isOfficial,n.server.target).img=r.replace(/"|=|\\/g,""))})}),delete this.nakama.users.self.img,clearTimeout(this.refreshAds)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(o.IN),t.Y36(o.SH),t.Y36(v.g),t.Y36(g.a),t.Y36(u.H),t.Y36(p.Z),t.Y36(f.z),t.Y36(_.b),t.Y36(O.J))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-settings"]],viewQuery:function(i,e){if(1&i&&t.Gf(y,5),2&i){let n;t.iGM(n=t.CRH())&&(e.LangSel=n.first)}},decls:96,vars:52,consts:[["slot","start",3,"click"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],["button","",3,"disabled","click"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["class","ion-text-right","color","medium",4,"ngIf"],["button","",3,"click",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"disabled"],[1,"ion-text-center",3,"placeholder","ngModel","ngModelChange"],[3,"click"],[4,"ngIf"],["slot","end",2,"pointer-events","none",3,"ngModel","ngModelChange"],["slot","start","name","language"],[2,"pointer-events","none",3,"value","placeholder","ionChange"],["LangSel",""],["value","#",4,"ngIf"],["value","en"],["value","ko"],["disabled","","button","",3,"click"],["color","medium",1,"ion-text-right"],["value","#"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return e.go_back()}),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return e.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("profile")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t.TgZ(20,"ion-label"),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",8),t.NdJ("click",function(){return e.go_to_page("link-account")}),t.TgZ(23,"ion-label"),t._uU(24),t.qZA()(),t.TgZ(25,"ion-item-divider")(26,"ion-label"),t._uU(27),t.qZA()(),t.TgZ(28,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("group-server")}),t._UZ(29,"div",9),t.TgZ(30,"ion-label",10),t._uU(31),t.qZA()(),t.TgZ(32,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("community-server")}),t._UZ(33,"div",9),t.TgZ(34,"ion-label",10),t._uU(35),t.qZA(),t.YNc(36,J,2,1,"ion-label",11),t.qZA(),t.YNc(37,N,4,3,"ion-item",12),t.TgZ(38,"ion-item-divider")(39,"ion-label"),t._uU(40),t.qZA()(),t.TgZ(41,"ion-item",8),t.NdJ("click",function(){return e.go_to_page("add-group")}),t.TgZ(42,"ion-label"),t._uU(43),t.qZA()(),t.YNc(44,B,9,7,"ion-item",13),t.TgZ(45,"ion-item-divider")(46,"ion-label"),t._uU(47),t.qZA()(),t.TgZ(48,"ion-item",8),t.NdJ("click",function(){return e.start_minimalchat()}),t._UZ(49,"div",9),t.TgZ(50,"ion-label",10),t._uU(51),t.qZA()(),t.TgZ(52,"ion-item",14),t._UZ(53,"div",9),t.TgZ(54,"ion-label",10),t._uU(55),t.qZA(),t.TgZ(56,"ion-input",15),t.NdJ("ngModelChange",function(l){return e.chat_address=l}),t.qZA(),t.TgZ(57,"ion-button",16),t.NdJ("click",function(){return e.start_minimalchat(e.chat_address?"ws://"+e.chat_address:"ws://127.0.0.1")}),t._uU(58),t.qZA()(),t.YNc(59,E,7,2,"div",17),t.TgZ(60,"ion-item-divider")(61,"ion-label"),t._uU(62),t.qZA()(),t.TgZ(63,"ion-item",5),t.NdJ("click",function(){return e.noti.change_settings("silent",!e.noti.settings.silent)}),t.TgZ(64,"ion-label"),t._uU(65),t.qZA(),t.TgZ(66,"ion-toggle",18),t.NdJ("ngModelChange",function(l){return e.noti.settings.silent=l}),t.qZA()(),t.YNc(67,D,4,1,"div",17),t.YNc(68,F,7,2,"div",17),t.TgZ(69,"ion-item-divider")(70,"ion-label"),t._uU(71),t.qZA()(),t.TgZ(72,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("creator")}),t.TgZ(73,"ion-label"),t._uU(74),t.qZA()(),t.YNc(75,I,3,1,"ion-item",12),t.TgZ(76,"ion-item",5),t.NdJ("click",function(){return e.LangClicked()}),t._UZ(77,"ion-icon",19),t.TgZ(78,"ion-label"),t._uU(79),t.qZA(),t.TgZ(80,"ion-select",20,21),t.NdJ("ionChange",function(l){return e.LanguageChanged(l)}),t.YNc(82,L,2,0,"ion-select-option",22),t.TgZ(83,"ion-select-option",23),t._uU(84,"English"),t.qZA(),t.TgZ(85,"ion-select-option",24),t._uU(86,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(87,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("privacy")}),t.TgZ(88,"ion-label"),t._uU(89),t.qZA()(),t.TgZ(90,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("licenses")}),t.TgZ(91,"ion-label"),t._uU(92),t.qZA()(),t.TgZ(93,"ion-item",25),t.NdJ("click",function(){return e.open_link("https://is2you2.github.io/")}),t.TgZ(94,"ion-label"),t._uU(95),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(e.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",e.isAdHiding),t.xp6(3),t.Oqu(e.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",e.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(e.lang.text.Settings.UserInfo),t.xp6(3),t.Akn(e.profile_filter),t.Q6J("src",e.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(e.lang.text.Settings.myInfo),t.xp6(1),t.Q6J("disabled","online"!=e.statusBar.settings.communityServer),t.xp6(2),t.Oqu(e.lang.text.Settings.takeOverUser),t.xp6(3),t.Oqu(e.lang.text.Settings.ManageServer),t.xp6(2),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.groupServer]),t.xp6(2),t.Oqu(e.lang.text.Settings.groupServer),t.xp6(2),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.communityServer]),t.xp6(2),t.Oqu(e.lang.text.Settings.commServer),t.xp6(1),t.Q6J("ngIf",e.client.address_override),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated),t.xp6(3),t.Oqu(e.lang.text.Settings.ManageGroup),t.xp6(1),t.Q6J("disabled","online"!=e.statusBar.settings.groupServer),t.xp6(2),t.Oqu(e.lang.text.Settings.CreateGroup),t.xp6(1),t.Q6J("ngForOf",e.groups),t.xp6(3),t.Oqu(e.lang.text.Settings.Community),t.xp6(1),t.Q6J("disabled",e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.community_ranchat]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinRanchat),t.xp6(1),t.Q6J("disabled",e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.dedicated_groupchat]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinDediChat),t.xp6(1),t.Q6J("placeholder",e.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",e.chat_address),t.xp6(2),t.hij(" ",e.lang.text.Settings.joinDedi_button," "),t.xp6(1),t.Q6J("ngIf",e.client.is_admin),t.xp6(3),t.Oqu(e.lang.text.Settings.notifications),t.xp6(3),t.Oqu(e.lang.text.Settings.slient_noti),t.xp6(1),t.Q6J("ngModel",e.noti.settings.silent),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated&&!e.isBatteryOptimizationsShowed),t.xp6(1),t.Q6J("ngIf",e.list_tools.length),t.xp6(3),t.Oqu(e.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=e.lang.lang),t.xp6(4),t.Oqu(e.lang.text.Settings.AppLanguage),t.xp6(1),t.Q6J("value",e.lang.lang)("placeholder",e.lang.lang),t.xp6(2),t.Q6J("ngIf",e.client.is_admin),t.xp6(7),t.Oqu(e.lang.text.Settings.userPrivacyTerms),t.xp6(3),t.Oqu(e.lang.text.Settings.LicenseNotice),t.xp6(3),t.Oqu(e.lang.text.Settings.UserGuideLink))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.oU,o.cs,o.W2,o.rH,o.Q$,o.YG,o.Ie,T.O5,T.sg,o.pK,o.j9,Z.JJ,Z.On,o.ho,o.w,o.gu,o.t9,o.QI,o.n0],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}"]}),a})()},{path:"privacy",loadChildren:()=>s.e(6426).then(s.bind(s,6426)).then(a=>a.PrivacyPageModule)},{path:"licenses",loadChildren:()=>s.e(4189).then(s.bind(s,4189)).then(a=>a.LicensesPageModule)},{path:"profile",loadChildren:()=>s.e(3774).then(s.bind(s,3774)).then(a=>a.ProfilePageModule)},{path:"dedicated-settings",loadChildren:()=>s.e(1420).then(s.bind(s,1420)).then(a=>a.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>Promise.all([s.e(8592),s.e(6955)]).then(s.bind(s,6955)).then(a=>a.GroupServerPageModule)},{path:"community-server",loadChildren:()=>s.e(634).then(s.bind(s,634)).then(a=>a.CommunityServerPageModule)},{path:"add-group",loadChildren:()=>s.e(6698).then(s.bind(s,6698)).then(a=>a.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>s.e(6167).then(s.bind(s,6167)).then(a=>a.GroupDetailPageModule)},{path:"link-account",loadChildren:()=>s.e(2056).then(s.bind(s,2056)).then(a=>a.LinkAccountPageModule)},{path:"translator",loadChildren:()=>s.e(747).then(s.bind(s,747)).then(a=>a.TranslatorPageModule)},{path:"creator",loadChildren:()=>s.e(3742).then(s.bind(s,3742)).then(a=>a.CreatorPageModule)},{path:"notification",loadChildren:()=>s.e(1254).then(s.bind(s,1254)).then(a=>a.NotificationPageModule)},{path:"tool-management",loadChildren:()=>s.e(7398).then(s.bind(s,7398)).then(a=>a.ToolManagementPageModule)}];let Q=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[h.Bz.forChild(Y)],h.Bz]}),a})(),H=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[T.ez,Z.u5,o.Pc,Q]]}),a})()},6366:(U,S,s)=>{s.d(S,{q:()=>M});var T=s(655),Z=s(5016),o=s(9863),h=s(3996),x=s(3496),P=s(5742),A=s(3336),k=s(9808);function b(t,v){if(1&t){const g=o.EpF();o.TgZ(0,"ion-item",3)(1,"ion-label"),o._uU(2),o.qZA(),o.TgZ(3,"ion-button",4),o.NdJ("click",function(){const f=o.CHM(g).index;return o.oxw().redownload_tool(f)}),o._uU(4),o.qZA(),o.TgZ(5,"ion-button",4),o.NdJ("click",function(){const f=o.CHM(g).index;return o.oxw().remove_tool(f)}),o._uU(6),o.qZA()()}if(2&t){const g=v.$implicit,u=o.oxw();o.xp6(2),o.Oqu(g),o.xp6(2),o.hij(" ",u.lang.text.ToolManager.Redownload," "),o.xp6(2),o.hij(" ",u.lang.text.ToolManager.removeTool," ")}}let M=(()=>{class t{constructor(g,u,p,f,_){this.modalCtrl=g,this.navParams=u,this.indexed=p,this.lang=f,this.p5toast=_,this.list=[]}ngOnInit(){this.navParams.get("data").forEach(u=>{this.list.push(u.substring(5))})}redownload_tool(g){var u;return(0,T.mG)(this,void 0,void 0,function*(){try{let p=yield fetch(`${Z.Oy}pjcone_pck/${this.list[g]}`);if(!p.ok)throw new Error("\uc5c6\ub294\uac70\ub098 \ub2e4\ub984\uc5c6\uc9c0");{let f=yield p.blob(),_=new FileReader;_=null!==(u=_._realReader)&&void 0!==u?u:_,_.onload=O=>{this.indexed.saveFileToUserPath(O.target.result.replace(/"|\\|=/g,""),`acts/${this.list[g]}`,()=>{this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadSucc}: ${this.list[g]}`})})},_.readAsDataURL(f)}}catch(p){this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadFailed}: ${this.list[g]}`})}})}remove_tool(g){this.indexed.removeFileFromUserPath(`acts/${this.list[g]}`),this.list.splice(g,1)}}return t.\u0275fac=function(g){return new(g||t)(o.Y36(h.IN),o.Y36(h.X1),o.Y36(x.H),o.Y36(P.b),o.Y36(A.F))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-tool-management"]],decls:8,vars:2,consts:[["slot","start",3,"click"],["defaultHref","settings"],["button","",4,"ngFor","ngForOf"],["button",""],[3,"click"]],template:function(g,u){1&g&&(o.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o._uU(3),o.qZA(),o.TgZ(4,"ion-buttons",0),o.NdJ("click",function(){return u.modalCtrl.dismiss()}),o._UZ(5,"ion-back-button",1),o.qZA()()(),o.TgZ(6,"ion-content"),o.YNc(7,b,7,3,"ion-item",2),o.qZA()),2&g&&(o.xp6(3),o.Oqu(u.lang.text.Settings.ToolList),o.xp6(4),o.Q6J("ngForOf",u.list))},directives:[h.Gu,h.sr,h.wd,h.Sm,h.oU,h.cs,h.W2,k.sg,h.Ie,h.Q$,h.YG],styles:[""]}),t})()}}]);