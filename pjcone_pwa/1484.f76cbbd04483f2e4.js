"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(b,S,n)=>{n.r(S),n.d(S,{SettingsPageModule:()=>H});var T=n(9808),x=n(4182),a=n(3996),c=n(9705),A=n(655),P=n(4464),Z=n(5016),C=n(2722),M=n(428),U=n(6366),t=n(9863),f=n(4606),l=n(261),r=n(3496),h=n(2855),_=n(9040),u=n(5742),O=n(8677);const y=["LangSel"];function k(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().setDisableBatteryOptimizations()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&o){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.batteryOptimization)}}function J(o,g){if(1&o&&(t.TgZ(0,"ion-label",23),t._uU(1),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.hij("",i.client.address_override," ")}}function N(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("dedicated-settings")}),t._UZ(1,"div",9),t.TgZ(2,"ion-label",10),t._uU(3),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(1),t.Akn("background-color: "+i.statusBar.colors[i.statusBar.settings.dedicatedServer||"offline"]),t.xp6(2),t.Oqu(i.lang.text.Settings.useDeviceAsServer)}}function B(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){const m=t.CHM(i).index;return t.oxw(2).go_to_group_detail(m)}),t._UZ(1,"div",9),t.TgZ(2,"div",6),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"ion-label",10)(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"h2"),t._uU(8),t.qZA()()()}if(2&o){const i=g.$implicit,e=t.oxw(2);t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[i.status||"offline"]),t.xp6(2),t.Akn("filter: "+("online"==i.status?"grayscale(0) contrast(1);":"grayscale(.9) contrast(1.4);")),t.Q6J("src",i.img,t.LSH),t.xp6(3),t.Oqu(i.server.name+" ("+i.server.target+")"),t.xp6(2),t.Oqu(i.name)}}function E(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",13),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("add-group")}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()(),t.YNc(7,B,9,7,"ion-item",24),t.qZA()}if(2&o){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.ManageGroup),t.xp6(1),t.Q6J("disabled","online"!=i.statusBar.settings.groupServer),t.xp6(2),t.Oqu(i.lang.text.Settings.CreateGroup),t.xp6(1),t.Q6J("ngForOf",i.groups)}}function D(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("notification")}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("req-counter")}),t.TgZ(8,"ion-label"),t._uU(9),t.qZA()()()}if(2&o){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.admin_community_menu),t.xp6(3),t.Oqu(i.lang.text.Settings.admin_noti_all),t.xp6(3),t.Oqu(i.lang.text.Settings.admin_req_counter)}}function F(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_tool_list()}),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()()()}if(2&o){const i=t.oxw();t.xp6(3),t.Oqu(i.lang.text.Settings.ToolManage),t.xp6(3),t.Oqu(i.lang.text.Settings.ToolList)}}function I(o,g){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().go_to_page("translator")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.Oqu(i.lang.text.Settings.AppTranslator)}}function L(o,g){1&o&&(t.TgZ(0,"ion-select-option",25),t._uU(1,"#"),t.qZA())}const Q=[{path:"",component:(()=>{class o{constructor(i,e,s,m,d,v,p,R,$){this.modalCtrl=i,this.nav=e,this.statusBar=s,this.nakama=m,this.indexed=d,this.client=v,this.bgmode=p,this.lang=R,this.noti=$,this.cant_dedicated=!1,this.GroupServerCount=0,this.EventListenerAct=G=>{G.detail.register(10,W=>{this.go_back(),W()})},this.list_tools=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.groups=[],this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==Z.n$||"MobilePWA"==Z.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(i,e)=>{i&&e&&(this.nakama.users.self.img=e.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=Boolean(localStorage.getItem("ShowDisableBatteryOptimizations")),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.indexed.GetFileListFromDB("acts/",i=>{this.list_tools=i})}go_to_tool_list(){this.modalCtrl.create({component:U.q,componentProps:{data:this.list_tools}}).then(i=>{i.onWillDismiss().then(()=>{this.indexed.GetFileListFromDB("acts/",e=>{this.list_tools=e})}),i.present()})}checkAdsInfo(){return(0,A.mG)(this,void 0,void 0,function*(){try{let i=yield fetch(`${Z.Oy}pjcone_ads/${this.lang.lang}.txt`);if(!i.ok)throw new Error("\uc5c6\ub294\uac70\ub098 \ub2e4\ub984\uc5c6\uc9c0");{let e=yield(yield i.blob()).text();this.indexed.saveTextFileToUserPath(e,"ads_list.txt");let s=e.split("\n");this.listAvailableAds(s)}}catch(i){this.indexed.loadTextFromUserPath("ads_list.txt",(e,s)=>{e&&s&&this.listAvailableAds(s.split("\n"))})}})}listAvailableAds(i){let s,e=(new Date).getTime();this.availables.length=0;for(let d=0,v=i.length;d<v;d++){let p=i[d].split(",");Number(p[0])<e?e<Number(p[1])&&this.availables.push([Number(p[0]),Number(p[1]),p[2]]):s?Number(p[0])<s&&(s=Number(p[0])):s=Number(p[0])}let m=this.AD_Div.childNodes;this.isAdHiding=!0,m.forEach(d=>{d.remove()}),this.availables.length?this.displayRandomAds():s&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(d,v)=>{d&&v&&this.listAvailableAds(v.split("\n"))})},s-(new Date).getTime()))}displayRandomAds(){let i=Math.floor(Math.random()*this.availables.length),e=this.availables[i];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(m,d)=>{m&&d&&this.listAvailableAds(d.split("\n"))})},e[1]-(new Date).getTime());let s=document.createElement("iframe");s.id="AdFrame",s.setAttribute("src",e[2]),s.setAttribute("frameborder","0"),s.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(s)}open_link(i){window.open(i,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.GroupServerCount=this.nakama.get_all_server_info().length,this.nakama.socket_reactive.settings=this,this.profile_filter=this.nakama.users.self.online?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.groups=this.nakama.rearrange_group_list(),document.addEventListener("ionBackButton",this.EventListenerAct)}start_minimalchat(i){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:C.X,componentProps:{address:i,name:this.nakama.users.self.display_name}}).then(e=>{e.present(),this.lock_modal_open=!1})}}go_to_group_detail(i){this.lock_modal_open||(this.lock_modal_open=!0,delete this.nakama.socket_reactive.settings,this.modalCtrl.create({component:M.x,componentProps:{info:this.groups[i]}}).then(e=>{e.onWillDismiss().then(()=>{this.nakama.socket_reactive.settings=this,this.groups=this.nakama.rearrange_group_list()}),e.present(),this.lock_modal_open=!1}))}LangClicked(){this.LangSel.open()}LanguageChanged(i){this.lang.lang=i.detail.value,this.lang.load_selected_lang()}go_to_page(i){this.nav.navigateForward(`settings/${i}`,{animation:P.Nn})}ionViewWillLeave(){delete this.nakama.socket_reactive.settings,document.removeEventListener("ionBackButton",this.EventListenerAct)}go_back(){this.nakama.rearrange_all_user().forEach(s=>{delete s.img}),this.nakama.rearrange_channels().forEach(s=>{2==s.redirect.type&&this.indexed.loadTextFromUserPath(`servers/${s.server.isOfficial}/${s.server.target}/users/${s.redirect.id}/profile.img`,(m,d)=>{m&&d&&(this.nakama.load_other_user(s.redirect.id,s.server.isOfficial,s.server.target).img=d.replace(/"|=|\\/g,""))})}),delete this.nakama.users.self.img,clearTimeout(this.refreshAds)}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(a.IN),t.Y36(a.SH),t.Y36(f.g),t.Y36(l.a),t.Y36(r.H),t.Y36(h.Z),t.Y36(_.z),t.Y36(u.b),t.Y36(O.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],viewQuery:function(i,e){if(1&i&&t.Gf(y,5),2&i){let s;t.iGM(s=t.CRH())&&(e.LangSel=s.first)}},decls:86,vars:48,consts:[["slot","start",3,"click"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],[4,"ngIf"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["class","ion-text-right","color","medium",4,"ngIf"],["button","",3,"click",4,"ngIf"],["button","",3,"disabled","click"],["button","",3,"disabled"],[1,"ion-text-center",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["slot","start","name","language"],[2,"pointer-events","none",3,"value","placeholder","ionChange"],["LangSel",""],["value","#",4,"ngIf"],["value","en"],["value","ko"],["color","medium",1,"ion-text-right"],["button","",3,"click",4,"ngFor","ngForOf"],["value","#"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return e.go_back()}),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return e.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("profile")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t.TgZ(20,"ion-label"),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("noti-alert")}),t.TgZ(23,"ion-label"),t._uU(24),t.qZA()(),t.YNc(25,k,4,1,"div",8),t.TgZ(26,"ion-item-divider")(27,"ion-label"),t._uU(28),t.qZA()(),t.TgZ(29,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("group-server")}),t._UZ(30,"div",9),t.TgZ(31,"ion-label",10),t._uU(32),t.qZA()(),t.TgZ(33,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("community-server")}),t._UZ(34,"div",9),t.TgZ(35,"ion-label",10),t._uU(36),t.qZA(),t.YNc(37,J,2,1,"ion-label",11),t.qZA(),t.YNc(38,N,4,3,"ion-item",12),t.YNc(39,E,8,4,"div",8),t.TgZ(40,"ion-item-divider")(41,"ion-label"),t._uU(42),t.qZA()(),t.TgZ(43,"ion-item",13),t.NdJ("click",function(){return e.start_minimalchat()}),t._UZ(44,"div",9),t.TgZ(45,"ion-label",10),t._uU(46),t.qZA()(),t.TgZ(47,"ion-item",14),t._UZ(48,"div",9),t.TgZ(49,"ion-label",10),t._uU(50),t.qZA(),t.TgZ(51,"ion-input",15),t.NdJ("ngModelChange",function(m){return e.chat_address=m}),t.qZA(),t.TgZ(52,"ion-button",16),t.NdJ("click",function(){return e.start_minimalchat(e.chat_address?"ws://"+e.chat_address:"ws://127.0.0.1")}),t._uU(53),t.qZA()(),t.TgZ(54,"ion-item",13),t.NdJ("click",function(){return e.go_to_page("link-account")}),t.TgZ(55,"ion-label"),t._uU(56),t.qZA()(),t.TgZ(57,"ion-item",13),t.NdJ("click",function(){return e.go_to_page("qr-share")}),t.TgZ(58,"ion-label"),t._uU(59),t.qZA()(),t.YNc(60,D,10,3,"div",8),t.YNc(61,F,7,2,"div",8),t.TgZ(62,"ion-item-divider")(63,"ion-label"),t._uU(64),t.qZA()(),t.TgZ(65,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("creator")}),t.TgZ(66,"ion-label"),t._uU(67),t.qZA()(),t.YNc(68,I,3,1,"ion-item",12),t.TgZ(69,"ion-item",5),t.NdJ("click",function(){return e.LangClicked()}),t._UZ(70,"ion-icon",17),t.TgZ(71,"ion-label"),t._uU(72),t.qZA(),t.TgZ(73,"ion-select",18,19),t.NdJ("ionChange",function(m){return e.LanguageChanged(m)}),t.YNc(75,L,2,0,"ion-select-option",20),t.TgZ(76,"ion-select-option",21),t._uU(77,"English"),t.qZA(),t.TgZ(78,"ion-select-option",22),t._uU(79,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(80,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("privacy")}),t.TgZ(81,"ion-label"),t._uU(82),t.qZA()(),t.TgZ(83,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("licenses")}),t.TgZ(84,"ion-label"),t._uU(85),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(e.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",e.isAdHiding),t.xp6(3),t.Oqu(e.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",e.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(e.lang.text.Settings.env_info),t.xp6(3),t.Akn(e.profile_filter),t.Q6J("src",e.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(e.lang.text.Settings.myInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.NotificationSetting),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated&&!e.isBatteryOptimizationsShowed),t.xp6(3),t.Oqu(e.lang.text.Settings.ManageServer),t.xp6(2),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.groupServer||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.groupServer),t.xp6(2),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.communityServer||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.commServer),t.xp6(1),t.Q6J("ngIf",e.client.address_override),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated),t.xp6(1),t.Q6J("ngIf",0!=e.GroupServerCount||e.groups.length),t.xp6(3),t.Oqu(e.lang.text.Settings.Community),t.xp6(1),t.Q6J("disabled","online"!=e.statusBar.settings.communityServer||e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.community_ranchat||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinRanchat),t.xp6(1),t.Q6J("disabled",e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.dedicated_groupchat||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinDediChat),t.xp6(1),t.Q6J("placeholder",e.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",e.chat_address),t.xp6(2),t.hij(" ",e.lang.text.Settings.joinDedi_button," "),t.xp6(1),t.Q6J("disabled","online"!=e.statusBar.settings.communityServer),t.xp6(2),t.Oqu(e.lang.text.Settings.takeOverUser),t.xp6(1),t.Q6J("disabled","online"!=e.statusBar.settings.communityServer),t.xp6(2),t.Oqu(e.lang.text.Settings.quickQRshare),t.xp6(1),t.Q6J("ngIf",e.client.is_admin),t.xp6(1),t.Q6J("ngIf",e.list_tools.length),t.xp6(3),t.Oqu(e.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=e.lang.lang),t.xp6(4),t.Oqu(e.lang.text.Settings.AppLanguage),t.xp6(1),t.Q6J("value",e.lang.lang)("placeholder",e.lang.lang),t.xp6(2),t.Q6J("ngIf",e.client.is_admin),t.xp6(7),t.Oqu(e.lang.text.Settings.userPrivacyTerms),t.xp6(3),t.Oqu(e.lang.text.Settings.LicenseNotice))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.oU,a.cs,a.W2,a.rH,a.Q$,a.YG,a.Ie,T.O5,T.sg,a.pK,a.j9,x.JJ,x.On,a.gu,a.t9,a.QI,a.n0],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}"]}),o})()},{path:"privacy",loadChildren:()=>n.e(6426).then(n.bind(n,6426)).then(o=>o.PrivacyPageModule)},{path:"licenses",loadChildren:()=>n.e(4189).then(n.bind(n,4189)).then(o=>o.LicensesPageModule)},{path:"profile",loadChildren:()=>n.e(3774).then(n.bind(n,3774)).then(o=>o.ProfilePageModule)},{path:"dedicated-settings",loadChildren:()=>n.e(1420).then(n.bind(n,1420)).then(o=>o.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>n.e(6955).then(n.bind(n,6955)).then(o=>o.GroupServerPageModule)},{path:"community-server",loadChildren:()=>n.e(634).then(n.bind(n,634)).then(o=>o.CommunityServerPageModule)},{path:"add-group",loadChildren:()=>n.e(6698).then(n.bind(n,6698)).then(o=>o.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>n.e(6167).then(n.bind(n,6167)).then(o=>o.GroupDetailPageModule)},{path:"link-account",loadChildren:()=>n.e(2056).then(n.bind(n,2056)).then(o=>o.LinkAccountPageModule)},{path:"translator",loadChildren:()=>n.e(747).then(n.bind(n,747)).then(o=>o.TranslatorPageModule)},{path:"creator",loadChildren:()=>n.e(3742).then(n.bind(n,3742)).then(o=>o.CreatorPageModule)},{path:"notification",loadChildren:()=>n.e(1254).then(n.bind(n,1254)).then(o=>o.NotificationPageModule)},{path:"tool-management",loadChildren:()=>n.e(7398).then(n.bind(n,7398)).then(o=>o.ToolManagementPageModule)},{path:"qr-share",loadChildren:()=>n.e(6250).then(n.bind(n,6250)).then(o=>o.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>n.e(6886).then(n.bind(n,6886)).then(o=>o.NotiAlertPageModule)},{path:"req-counter",loadChildren:()=>n.e(6333).then(n.bind(n,6333)).then(o=>o.ReqCounterPageModule)}];let Y=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Q)],c.Bz]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[T.ez,x.u5,a.Pc,Y]]}),o})()},6366:(b,S,n)=>{n.d(S,{q:()=>U});var T=n(655),x=n(5016),a=n(9863),c=n(3996),A=n(3496),P=n(5742),Z=n(3336),C=n(9808);function M(t,f){if(1&t){const l=a.EpF();a.TgZ(0,"ion-item",3)(1,"ion-label"),a._uU(2),a.qZA(),a.TgZ(3,"ion-button",4),a.NdJ("click",function(){const _=a.CHM(l).index;return a.oxw().redownload_tool(_)}),a._uU(4),a.qZA(),a.TgZ(5,"ion-button",5),a.NdJ("click",function(){const _=a.CHM(l).index;return a.oxw().remove_tool(_)}),a._uU(6),a.qZA()()}if(2&t){const l=f.$implicit,r=a.oxw();a.xp6(2),a.Oqu(l.text),a.xp6(1),a.Q6J("disabled",l.toggle),a.xp6(1),a.hij(" ",r.lang.text.ToolManager.Redownload," "),a.xp6(2),a.hij(" ",r.lang.text.ToolManager.removeTool," ")}}let U=(()=>{class t{constructor(l,r,h,_,u){this.modalCtrl=l,this.navParams=r,this.indexed=h,this.lang=_,this.p5toast=u,this.list=[]}ngOnInit(){this.navParams.get("data").forEach(r=>{this.list.push({text:r.substring(5),toggle:!1})})}redownload_tool(l){var r;return(0,T.mG)(this,void 0,void 0,function*(){try{this.list[l].toggle=!0;let h=yield fetch(`${x.Oy}pjcone_pck/${this.list[l].text}`);if(!h.ok)throw new Error("\uc5c6\ub294\uac70\ub098 \ub2e4\ub984\uc5c6\uc9c0");{let _=yield h.blob(),u=new FileReader;u=null!==(r=u._realReader)&&void 0!==r?r:u,u.onload=O=>{this.indexed.saveFileToUserPath(O.target.result.replace(/"|\\|=/g,""),`acts/${this.list[l].text}`,()=>{this.list[l].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadSucc}: ${this.list[l].text}`})})},u.readAsDataURL(_)}}catch(h){this.list[l].toggle=!1,this.p5toast.show({text:`${this.lang.text.ToolManager.redownloadFailed}: ${this.list[l]}`})}})}remove_tool(l){this.indexed.removeFileFromUserPath(`acts/${this.list[l]}`),this.list.splice(l,1)}}return t.\u0275fac=function(l){return new(l||t)(a.Y36(c.IN),a.Y36(c.X1),a.Y36(A.H),a.Y36(P.b),a.Y36(Z.F))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-tool-management"]],decls:8,vars:2,consts:[["slot","start",3,"click"],["defaultHref","settings"],["button","",4,"ngFor","ngForOf"],["button",""],[3,"disabled","click"],[3,"click"]],template:function(l,r){1&l&&(a.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a._uU(3),a.qZA(),a.TgZ(4,"ion-buttons",0),a.NdJ("click",function(){return r.modalCtrl.dismiss()}),a._UZ(5,"ion-back-button",1),a.qZA()()(),a.TgZ(6,"ion-content"),a.YNc(7,M,7,4,"ion-item",2),a.qZA()),2&l&&(a.xp6(3),a.Oqu(r.lang.text.Settings.ToolList),a.xp6(4),a.Q6J("ngForOf",r.list))},directives:[c.Gu,c.sr,c.wd,c.Sm,c.oU,c.cs,c.W2,C.sg,c.Ie,c.Q$,c.YG],styles:[""]}),t})()}}]);