"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1592],{1592:(k,u,s)=>{s.r(u),s.d(u,{AddPostPageModule:()=>A});var l=s(1368),m=s(4716),n=s(5624),g=s(3332),f=s(340),e=s(4496),h=s(5020),p=s(4500),v=s(9240),P=s(7136);function _(t,a){if(1&t){const o=e.KQA();e.I0R(0,"ion-item",5),e.qCj("click",function(){const d=e.usT(o).index,c=e.GaO(2);return e.CGJ(c.select_server(d))}),e.I0R(1,"ion-label"),e.OEk(2),e.C$Y()()}if(2&t){const o=a.$implicit;e.yG2(2),e.cNF(o.name)}}function I(t,a){if(1&t){const o=e.KQA();e.I0R(0,"ion-accordion-group",8,9),e.qCj("click",function(){e.usT(o);const r=e.GaO();return e.CGJ(r.isExpanded=!0)}),e.I0R(2,"ion-accordion",10)(3,"ion-item",11)(4,"ion-label"),e.OEk(5),e.C$Y(),e.I0R(6,"ion-label",12),e.OEk(7),e.C$Y(),e.wR5(8,"ion-icon",13),e.C$Y(),e.I0R(9,"div",14),e.yuY(10,_,3,1,"ion-item",15),e.C$Y()()()}if(2&t){const o=e.GaO();e.E7m("disabled",o.isSaveClicked)("value",o.isExpanded),e.yG2(5),e.cNF(o.lang.text.AddGroup.SelectServer),e.yG2(2),e.cNF(o.servers[o.index].name),e.yG2(3),e.E7m("ngForOf",o.servers)}}const C=[{path:"",component:(()=>{var t;class a{constructor(i,r,d,c,G){this.global=i,this.lang=r,this.navCtrl=d,this.nakama=c,this.modalCtrl=G,this.servers=[],this.userInput={title:void 0,titleImage:void 0,content:void 0,creator_id:void 0,creator_name:void 0,UserColor:void 0,create_time:void 0,modify_time:void 0,server:void 0},this.index=0,this.isExpanded=!1,this.isSaveClicked=!1}ngOnInit(){this.servers=this.nakama.get_all_server_info(!0,!0),this.select_server(0),this.userInput.creator_name=this.nakama.users.self.display_name}ionViewWillEnter(){this.AddShortcut()}go_to_profile(){this.modalCtrl.create({component:f.w,componentProps:{isOfficial:this.isOfficial,target:this.target}}).then(i=>i.present())}select_server(i){this.index=i,this.userInput.server=this.servers[i],this.isExpanded=!1,this.isOfficial=this.servers[i].isOfficial,this.target=this.servers[i].target,this.userInput.creator_id=this.nakama.servers[this.isOfficial][this.target].session.user_id,this.userInput.UserColor=(this.userInput.creator_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6)}AddShortcut(){this.global.p5key&&this.global.p5key.KeyShortCut&&(this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.navigateBack("portal/community")})}UploadPost(){this.isSaveClicked=!0,this.userInput.create_time?this.userInput.modify_time=(new Date).getTime():this.userInput.create_time=(new Date).getTime()}ionViewWillLeave(){delete this.global.p5key.KeyShortCut.Escape}}return(t=a).\u0275fac=function(i){return new(i||t)(e.GI1(h.A1),e.GI1(p.o),e.GI1(v.wX),e.GI1(P.h),e.GI1(n.qS))},t.\u0275cmp=e.In1({type:t,selectors:[["app-add-post"]],decls:14,vars:8,consts:[[3,"translucent"],["slot","start"],["defaultHref","portal/community"],[3,"fullscreen"],["value","colors","expand","inset",3,"disabled","value","click",4,"ngIf"],["button","",3,"click"],[1,"additional_form","new_bg_form"],[1,"ion-text-end"],["value","colors","expand","inset",3,"disabled","value","click"],["accordionGroup",""],["value","colors"],["slot","header"],[1,"ion-text-right"],[1,"ion-accordion-toggle-icon","hide_accordion_icon"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.OEk(3),e.C$Y(),e.I0R(4,"ion-buttons",1),e.wR5(5,"ion-back-button",2),e.C$Y()()(),e.I0R(6,"ion-content",3),e.yuY(7,I,11,5,"ion-accordion-group",4),e.I0R(8,"ion-item",5),e.qCj("click",function(){return r.go_to_profile()}),e.wR5(9,"div",6),e.I0R(10,"ion-label"),e.OEk(11),e.C$Y(),e.I0R(12,"ion-label",7),e.OEk(13),e.C$Y()()()),2&i&&(e.E7m("translucent",!0),e.yG2(3),e.cNF(r.lang.text.AddPost.Title),e.yG2(3),e.E7m("fullscreen",!0),e.yG2(),e.E7m("ngIf",r.servers.length),e.yG2(2),e.m_g("background-image: linear-gradient(to right, #0000, #"+r.userInput.UserColor+"44)"),e.yG2(2),e.cNF(r.lang.text.AddPost.Creator),e.yG2(2),e.cNF(r.userInput.creator_name||r.lang.text.Profile.noname_user))},dependencies:[l.ay,l.u_,n.cm,n.qU,n.GS,n._i,n.wB,n.Ko,n.Yb,n.QR,n.tM,n.Md,n.Im]}),a})()}];let y=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[g.qQ.forChild(C),g.qQ]}),a})(),A=(()=>{var t;class a{}return(t=a).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({imports:[l.MD,m.y,n.wZ,y]}),a})()}}]);