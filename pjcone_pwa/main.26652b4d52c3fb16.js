(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8792],{5083:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{E_:()=>p,F3:()=>d,I9:()=>C});var F=Ge(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var M=function(H){return H.Unimplemented="UNIMPLEMENTED",H.Unavailable="UNAVAILABLE",H}(M||{});class C extends Error{constructor(te,Y,we){super(te),this.message=te,this.code=Y,this.data=we}}const w=H=>{var te,Y,we,Se,oe;const ge=H.CapacitorCustomPlatform||null,re=H.Capacitor||{},Q=re.Plugins=re.Plugins||{},fe=H.CapacitorPlatforms,it=(null===(te=null==fe?void 0:fe.currentPlatform)||void 0===te?void 0:te.getPlatform)||(()=>null!==ge?ge.name:(H=>{var te,Y;return null!=H&&H.androidBridge?"android":null!==(Y=null===(te=null==H?void 0:H.webkit)||void 0===te?void 0:te.messageHandlers)&&void 0!==Y&&Y.bridge?"ios":"web"})(H)),z=(null===(Y=null==fe?void 0:fe.currentPlatform)||void 0===Y?void 0:Y.isNativePlatform)||(()=>"web"!==it()),Ue=(null===(we=null==fe?void 0:fe.currentPlatform)||void 0===we?void 0:we.isPluginAvailable)||(mt=>{const Nt=_t.get(mt);return!!(null!=Nt&&Nt.platforms.has(it())||vt(mt))}),vt=(null===(Se=null==fe?void 0:fe.currentPlatform)||void 0===Se?void 0:Se.getPluginHeader)||(mt=>{var Nt;return null===(Nt=re.PluginHeaders)||void 0===Nt?void 0:Nt.find(kt=>kt.name===mt)}),_t=new Map,Wt=(null===(oe=null==fe?void 0:fe.currentPlatform)||void 0===oe?void 0:oe.registerPlugin)||((mt,Nt={})=>{const kt=_t.get(mt);if(kt)return console.warn(`Capacitor plugin "${mt}" already registered. Cannot register plugins twice.`),kt.proxy;const Ut=it(),Tt=vt(mt);let qt;const mn=function(){var ur=(0,F.A)(function*(){return!qt&&Ut in Nt?qt=qt="function"==typeof Nt[Ut]?yield Nt[Ut]():Nt[Ut]:null!==ge&&!qt&&"web"in Nt&&(qt=qt="function"==typeof Nt.web?yield Nt.web():Nt.web),qt});return function(){return ur.apply(this,arguments)}}(),An=ur=>{let vn;const er=(...Pn)=>{const gt=mn().then(wt=>{const rt=((ur,vn)=>{var er,Pn;if(!Tt){if(ur)return null===(Pn=ur[vn])||void 0===Pn?void 0:Pn.bind(ur);throw new C(`"${mt}" plugin is not implemented on ${Ut}`,M.Unimplemented)}{const gt=null==Tt?void 0:Tt.methods.find(wt=>vn===wt.name);if(gt)return"promise"===gt.rtype?wt=>re.nativePromise(mt,vn.toString(),wt):(wt,rt)=>re.nativeCallback(mt,vn.toString(),wt,rt);if(ur)return null===(er=ur[vn])||void 0===er?void 0:er.bind(ur)}})(wt,ur);if(rt){const bt=rt(...Pn);return vn=null==bt?void 0:bt.remove,bt}throw new C(`"${mt}.${ur}()" is not implemented on ${Ut}`,M.Unimplemented)});return"addListener"===ur&&(gt.remove=(0,F.A)(function*(){return vn()})),gt};return er.toString=()=>`${ur.toString()}() { [capacitor code] }`,Object.defineProperty(er,"name",{value:ur,writable:!1,configurable:!1}),er},Qn=An("addListener"),Rn=An("removeListener"),Er=(ur,vn)=>{const er=Qn({eventName:ur},vn),Pn=function(){var wt=(0,F.A)(function*(){const rt=yield er;Rn({eventName:ur,callbackId:rt},vn)});return function(){return wt.apply(this,arguments)}}(),gt=new Promise(wt=>er.then(()=>wt({remove:Pn})));return gt.remove=(0,F.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Pn()}),gt},Bn=new Proxy({},{get(ur,vn){switch(vn){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Tt?Er:Qn;case"removeListener":return Rn;default:return An(vn)}}});return Q[mt]=Bn,_t.set(mt,{name:mt,proxy:Bn,platforms:new Set([...Object.keys(Nt),...Tt?[Ut]:[]])}),Bn});return re.convertFileSrc||(re.convertFileSrc=mt=>mt),re.getPlatform=it,re.handleError=mt=>H.console.error(mt),re.isNativePlatform=z,re.isPluginAvailable=Ue,re.pluginMethodNoop=(mt,Nt,kt)=>Promise.reject(`${kt} does not have an implementation of "${Nt}".`),re.registerPlugin=Wt,re.Exception=C,re.DEBUG=!!re.DEBUG,re.isLoggingEnabled=!!re.isLoggingEnabled,re.platform=re.getPlatform(),re.isNative=re.isNativePlatform(),re},D=(H=>H.Capacitor=w(H))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),d=D.registerPlugin;class p{constructor(te){this.listeners={},this.retainedEventArguments={},this.windowListeners={},te&&(console.warn(`Capacitor WebPlugin "${te.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=te)}addListener(te,Y){var we=this;let Se=!1;this.listeners[te]||(this.listeners[te]=[],Se=!0),this.listeners[te].push(Y);const ge=this.windowListeners[te];ge&&!ge.registered&&this.addWindowListener(ge),Se&&this.sendRetainedArgumentsForEvent(te);const re=function(){var fe=(0,F.A)(function*(){return we.removeListener(te,Y)});return function(){return fe.apply(this,arguments)}}();return Promise.resolve({remove:re})}removeAllListeners(){var te=this;return(0,F.A)(function*(){te.listeners={};for(const Y in te.windowListeners)te.removeWindowListener(te.windowListeners[Y]);te.windowListeners={}})()}notifyListeners(te,Y,we){const Se=this.listeners[te];if(Se)Se.forEach(oe=>oe(Y));else if(we){let oe=this.retainedEventArguments[te];oe||(oe=[]),oe.push(Y),this.retainedEventArguments[te]=oe}}hasListeners(te){return!!this.listeners[te].length}registerWindowListener(te,Y){this.windowListeners[Y]={registered:!1,windowEventName:te,pluginEventName:Y,handler:we=>{this.notifyListeners(Y,we)}}}unimplemented(te="not implemented"){return new D.Exception(te,M.Unimplemented)}unavailable(te="not available"){return new D.Exception(te,M.Unavailable)}removeListener(te,Y){var we=this;return(0,F.A)(function*(){const Se=we.listeners[te];if(!Se)return;const oe=Se.indexOf(Y);we.listeners[te].splice(oe,1),we.listeners[te].length||we.removeWindowListener(we.windowListeners[te])})()}addWindowListener(te){window.addEventListener(te.windowEventName,te.handler),te.registered=!0}removeWindowListener(te){te&&(window.removeEventListener(te.windowEventName,te.handler),te.registered=!1)}sendRetainedArgumentsForEvent(te){const Y=this.retainedEventArguments[te];Y&&(delete this.retainedEventArguments[te],Y.forEach(we=>{this.notifyListeners(te,we)}))}}const g=H=>encodeURIComponent(H).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),x=H=>H.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class E extends p{getCookies(){return(0,F.A)(function*(){const te=document.cookie,Y={};return te.split(";").forEach(we=>{if(we.length<=0)return;let[Se,oe]=we.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Se=x(Se).trim(),oe=x(oe).trim(),Y[Se]=oe}),Y})()}setCookie(te){return(0,F.A)(function*(){try{const Y=g(te.key),we=g(te.value),Se=`; expires=${(te.expires||"").replace("expires=","")}`,oe=(te.path||"/").replace("path=",""),ge=null!=te.url&&te.url.length>0?`domain=${te.url}`:"";document.cookie=`${Y}=${we||""}${Se}; path=${oe}; ${ge};`}catch(Y){return Promise.reject(Y)}})()}deleteCookie(te){return(0,F.A)(function*(){try{document.cookie=`${te.key}=; Max-Age=0`}catch(Y){return Promise.reject(Y)}})()}clearCookies(){return(0,F.A)(function*(){try{const te=document.cookie.split(";")||[];for(const Y of te)document.cookie=Y.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(te){return Promise.reject(te)}})()}clearAllCookies(){var te=this;return(0,F.A)(function*(){try{yield te.clearCookies()}catch(Y){return Promise.reject(Y)}})()}}d("CapacitorCookies",{web:()=>new E});const L=function(){var H=(0,F.A)(function*(te){return new Promise((Y,we)=>{const Se=new FileReader;Se.onload=()=>{const oe=Se.result;Y(oe.indexOf(",")>=0?oe.split(",")[1]:oe)},Se.onerror=oe=>we(oe),Se.readAsDataURL(te)})});return function(Y){return H.apply(this,arguments)}}();class V extends p{request(te){return(0,F.A)(function*(){const Y=((H,te={})=>{const Y=Object.assign({method:H.method||"GET",headers:H.headers},te),Se=((H={})=>{const te=Object.keys(H);return Object.keys(H).map(Se=>Se.toLocaleLowerCase()).reduce((Se,oe,ge)=>(Se[oe]=H[te[ge]],Se),{})})(H.headers)["content-type"]||"";if("string"==typeof H.data)Y.body=H.data;else if(Se.includes("application/x-www-form-urlencoded")){const oe=new URLSearchParams;for(const[ge,re]of Object.entries(H.data||{}))oe.set(ge,re);Y.body=oe.toString()}else if(Se.includes("multipart/form-data")||H.data instanceof FormData){const oe=new FormData;if(H.data instanceof FormData)H.data.forEach((re,Q)=>{oe.append(Q,re)});else for(const re of Object.keys(H.data))oe.append(re,H.data[re]);Y.body=oe;const ge=new Headers(Y.headers);ge.delete("content-type"),Y.headers=ge}else(Se.includes("application/json")||"object"==typeof H.data)&&(Y.body=JSON.stringify(H.data));return Y})(te,te.webFetchExtra),we=((H,te=!0)=>H?Object.entries(H).reduce((we,Se)=>{const[oe,ge]=Se;let re,Q;return Array.isArray(ge)?(Q="",ge.forEach(fe=>{re=te?encodeURIComponent(fe):fe,Q+=`${oe}=${re}&`}),Q.slice(0,-1)):(re=te?encodeURIComponent(ge):ge,Q=`${oe}=${re}`),`${we}&${Q}`},"").substr(1):null)(te.params,te.shouldEncodeUrlParams),Se=we?`${te.url}?${we}`:te.url,oe=yield fetch(Se,Y),ge=oe.headers.get("content-type")||"";let Q,fe,{responseType:re="text"}=oe.ok?te:{};switch(ge.includes("application/json")&&(re="json"),re){case"arraybuffer":case"blob":fe=yield oe.blob(),Q=yield L(fe);break;case"json":Q=yield oe.json();break;default:Q=yield oe.text()}const De={};return oe.headers.forEach((it,le)=>{De[le]=it}),{data:Q,headers:De,status:oe.status,url:oe.url}})()}get(te){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},te),{method:"GET"}))})()}post(te){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},te),{method:"POST"}))})()}put(te){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},te),{method:"PUT"}))})()}patch(te){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},te),{method:"PATCH"}))})()}delete(te){var Y=this;return(0,F.A)(function*(){return Y.request(Object.assign(Object.assign({},te),{method:"DELETE"}))})()}}d("CapacitorHttp",{web:()=>new V})},4442:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{L:()=>l,a:()=>be,b:()=>Z,c:()=>M,d:()=>C,g:()=>oe}),Ge(5531);const l="ionViewWillEnter",be="ionViewDidEnter",Z="ionViewWillLeave",M="ionViewDidLeave",C="ionViewWillUnload",oe=ge=>ge.classList.contains("ion-page")?ge:ge.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ge},5531:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{a:()=>b,c:()=>j,g:()=>C});class F{constructor(){this.m=new Map}reset(ge){this.m=new Map(Object.entries(ge))}get(ge,re){const Q=this.m.get(ge);return void 0!==Q?Q:re}getBoolean(ge,re=!1){const Q=this.m.get(ge);return void 0===Q?re:"string"==typeof Q?"true"===Q:!!Q}getNumber(ge,re){const Q=parseFloat(this.m.get(ge));return isNaN(Q)?void 0!==re?re:NaN:Q}set(ge,re){this.m.set(ge,re)}}const j=new F,C=oe=>w(oe),b=(oe,ge)=>("string"==typeof oe&&(ge=oe,oe=void 0),C(oe).includes(ge)),w=(oe=window)=>{if(typeof oe>"u")return[];oe.Ionic=oe.Ionic||{};let ge=oe.Ionic.platforms;return null==ge&&(ge=oe.Ionic.platforms=I(oe),ge.forEach(re=>oe.document.documentElement.classList.add(`plt-${re}`))),ge},I=oe=>{const ge=j.get("platform");return Object.keys(te).filter(re=>{const Q=null==ge?void 0:ge[re];return"function"==typeof Q?Q(oe):te[re](oe)})},d=oe=>!!(K(oe,/iPad/i)||K(oe,/Macintosh/i)&&E(oe)),p=oe=>K(oe,/android|sink/i),E=oe=>H(oe,"(any-pointer:coarse)"),L=oe=>q(oe)||J(oe),q=oe=>!!(oe.cordova||oe.phonegap||oe.PhoneGap),J=oe=>{const ge=oe.Capacitor;return!(null==ge||!ge.isNative)},K=(oe,ge)=>ge.test(oe.navigator.userAgent),H=(oe,ge)=>{var re;return null===(re=oe.matchMedia)||void 0===re?void 0:re.call(oe,ge).matches},te={ipad:d,iphone:oe=>K(oe,/iPhone/i),ios:oe=>K(oe,/iPhone|iPod/i)||d(oe),android:p,phablet:oe=>{const ge=oe.innerWidth,re=oe.innerHeight,Q=Math.min(ge,re),fe=Math.max(ge,re);return Q>390&&Q<520&&fe>620&&fe<800},tablet:oe=>{const ge=oe.innerWidth,re=oe.innerHeight,Q=Math.min(ge,re),fe=Math.max(ge,re);return d(oe)||(oe=>p(oe)&&!K(oe,/mobile/i))(oe)||Q>460&&Q<820&&fe>780&&fe<1400},cordova:q,capacitor:J,electron:oe=>K(oe,/electron/i),pwa:oe=>{var ge;return!!(null!==(ge=oe.matchMedia)&&void 0!==ge&&ge.call(oe,"(display-mode: standalone)").matches||oe.navigator.standalone)},mobile:E,mobileweb:oe=>E(oe)&&!L(oe),desktop:oe=>!E(oe),hybrid:L}},9986:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{c:()=>be});var F=Ge(8476);let j;const rn=(Z,M,C)=>{const b=M.startsWith("animation")?(Z=>(void 0===j&&(j=void 0===Z.style.animationName&&void 0!==Z.style.webkitAnimationName?"-webkit-":""),j))(Z):"";Z.style.setProperty(b+M,C)},l=(Z=[],M)=>{if(void 0!==M){const C=Array.isArray(M)?M:[M];return[...Z,...C]}return Z},be=Z=>{let M,C,b,w,I,D,m,G,V,K,we,d=[],f=[],h=[],p=!1,g={},x=[],E=[],S={},L=0,q=!1,J=!1,H=!0,te=!1,Y=!0,Se=!1;const oe=Z,ge=[],re=[],Q=[],fe=[],De=[],it=[],le=[],z=[],ye=[],Ue=[],Je=[],vt="function"==typeof AnimationEffect||void 0!==F.w&&"function"==typeof F.w.AnimationEffect,Ct="function"==typeof Element&&"function"==typeof Element.prototype.animate&&vt,zt=()=>Je,Nt=(Fe,We)=>{const at=We.findIndex(Ze=>Ze.c===Fe);at>-1&&We.splice(at,1)},Ut=(Fe,We)=>((null!=We&&We.oneTimeCallback?re:ge).push({c:Fe,o:We}),we),qt=()=>{Ct&&(Je.forEach(Fe=>{Fe.cancel()}),Je.length=0)},mn=()=>{it.forEach(Fe=>{null!=Fe&&Fe.parentNode&&Fe.parentNode.removeChild(Fe)}),it.length=0},rt=()=>void 0!==I?I:m?m.getFill():"both",bt=()=>void 0!==G?G:void 0!==D?D:m?m.getDirection():"normal",gn=()=>q?"linear":void 0!==b?b:m?m.getEasing():"linear",On=()=>J?0:void 0!==V?V:void 0!==C?C:m?m.getDuration():0,$n=()=>void 0!==w?w:m?m.getIterations():1,sr=()=>void 0!==K?K:void 0!==M?M:m?m.getDelay():0,yr=()=>{0!==L&&(L--,0===L&&((()=>{ye.forEach(xt=>xt()),Ue.forEach(xt=>xt());const Fe=H?1:0,We=x,at=E,Ze=S;fe.forEach(xt=>{const Zt=xt.classList;We.forEach(En=>Zt.add(En)),at.forEach(En=>Zt.remove(En));for(const En in Ze)Ze.hasOwnProperty(En)&&rn(xt,En,Ze[En])}),V=void 0,G=void 0,K=void 0,ge.forEach(xt=>xt.c(Fe,we)),re.forEach(xt=>xt.c(Fe,we)),re.length=0,Y=!0,H&&(te=!0),H=!0})(),m&&m.animationFinish()))},Ur=()=>{(()=>{le.forEach(Ze=>Ze()),z.forEach(Ze=>Ze());const Fe=f,We=h,at=g;fe.forEach(Ze=>{const xt=Ze.classList;Fe.forEach(Zt=>xt.add(Zt)),We.forEach(Zt=>xt.remove(Zt));for(const Zt in at)at.hasOwnProperty(Zt)&&rn(Ze,Zt,at[Zt])})})(),d.length>0&&Ct&&(fe.forEach(Fe=>{const We=Fe.animate(d,{id:oe,delay:sr(),duration:On(),easing:gn(),iterations:$n(),fill:rt(),direction:bt()});We.pause(),Je.push(We)}),Je.length>0&&(Je[0].onfinish=()=>{yr()})),p=!0},vr=Fe=>{Fe=Math.min(Math.max(Fe,0),.9999),Ct&&Je.forEach(We=>{We.currentTime=We.effect.getComputedTiming().delay+On()*Fe,We.pause()})},ei=Fe=>{Je.forEach(We=>{We.effect.updateTiming({delay:sr(),duration:On(),easing:gn(),iterations:$n(),fill:rt(),direction:bt()})}),void 0!==Fe&&vr(Fe)},ne=(Fe=!1,We=!0,at)=>(Fe&&De.forEach(Ze=>{Ze.update(Fe,We,at)}),Ct&&ei(at),we),N=()=>{p&&(Ct?Je.forEach(Fe=>{Fe.pause()}):fe.forEach(Fe=>{rn(Fe,"animation-play-state","paused")}),Se=!0)},de=Fe=>new Promise(We=>{null!=Fe&&Fe.sync&&(J=!0,Ut(()=>J=!1,{oneTimeCallback:!0})),p||Ur(),te&&(Ct&&(vr(0),ei()),te=!1),Y&&(L=De.length+1,Y=!1);const at=()=>{Nt(Ze,re),We()},Ze=()=>{Nt(at,Q),We()};Ut(Ze,{oneTimeCallback:!0}),((Fe,We)=>{Q.push({c:Fe,o:{oneTimeCallback:!0}})})(at),De.forEach(xt=>{xt.play()}),Ct?(Je.forEach(Fe=>{Fe.play()}),(0===d.length||0===fe.length)&&yr()):yr(),Se=!1}),tt=(Fe,We)=>{const at=d[0];return void 0===at||void 0!==at.offset&&0!==at.offset?d=[{offset:0,[Fe]:We},...d]:at[Fe]=We,we};return we={parentAnimation:m,elements:fe,childAnimations:De,id:oe,animationFinish:yr,from:tt,to:(Fe,We)=>{const at=d[d.length-1];return void 0===at||void 0!==at.offset&&1!==at.offset?d=[...d,{offset:1,[Fe]:We}]:at[Fe]=We,we},fromTo:(Fe,We,at)=>tt(Fe,We).to(Fe,at),parent:Fe=>(m=Fe,we),play:de,pause:()=>(De.forEach(Fe=>{Fe.pause()}),N(),we),stop:()=>{De.forEach(Fe=>{Fe.stop()}),p&&(qt(),p=!1),q=!1,J=!1,Y=!0,G=void 0,V=void 0,K=void 0,L=0,te=!1,H=!0,Se=!1,Q.forEach(Fe=>Fe.c(0,we)),Q.length=0},destroy:Fe=>(De.forEach(We=>{We.destroy(Fe)}),(Fe=>{qt(),Fe&&mn()})(Fe),fe.length=0,De.length=0,d.length=0,ge.length=0,re.length=0,p=!1,Y=!0,we),keyframes:Fe=>{const We=d!==Fe;return d=Fe,We&&(Fe=>{Ct&&zt().forEach(We=>{const at=We.effect;if(at.setKeyframes)at.setKeyframes(Fe);else{const Ze=new KeyframeEffect(at.target,Fe,at.getTiming());We.effect=Ze}})})(d),we},addAnimation:Fe=>{if(null!=Fe)if(Array.isArray(Fe))for(const We of Fe)We.parent(we),De.push(We);else Fe.parent(we),De.push(Fe);return we},addElement:Fe=>{if(null!=Fe)if(1===Fe.nodeType)fe.push(Fe);else if(Fe.length>=0)for(let We=0;We<Fe.length;We++)fe.push(Fe[We]);else console.error("Invalid addElement value");return we},update:ne,fill:Fe=>(I=Fe,ne(!0),we),direction:Fe=>(D=Fe,ne(!0),we),iterations:Fe=>(w=Fe,ne(!0),we),duration:Fe=>(!Ct&&0===Fe&&(Fe=1),C=Fe,ne(!0),we),easing:Fe=>(b=Fe,ne(!0),we),delay:Fe=>(M=Fe,ne(!0),we),getWebAnimations:zt,getKeyframes:()=>d,getFill:rt,getDirection:bt,getDelay:sr,getIterations:$n,getEasing:gn,getDuration:On,afterAddRead:Fe=>(ye.push(Fe),we),afterAddWrite:Fe=>(Ue.push(Fe),we),afterClearStyles:(Fe=[])=>{for(const We of Fe)S[We]="";return we},afterStyles:(Fe={})=>(S=Fe,we),afterRemoveClass:Fe=>(E=l(E,Fe),we),afterAddClass:Fe=>(x=l(x,Fe),we),beforeAddRead:Fe=>(le.push(Fe),we),beforeAddWrite:Fe=>(z.push(Fe),we),beforeClearStyles:(Fe=[])=>{for(const We of Fe)g[We]="";return we},beforeStyles:(Fe={})=>(g=Fe,we),beforeRemoveClass:Fe=>(h=l(h,Fe),we),beforeAddClass:Fe=>(f=l(f,Fe),we),onFinish:Ut,isRunning:()=>0!==L&&!Se,progressStart:(Fe=!1,We)=>(De.forEach(at=>{at.progressStart(Fe,We)}),N(),q=Fe,p||Ur(),ne(!1,!0,We),we),progressStep:Fe=>(De.forEach(We=>{We.progressStep(Fe)}),vr(Fe),we),progressEnd:(Fe,We,at)=>(q=!1,De.forEach(Ze=>{Ze.progressEnd(Fe,We,at)}),void 0!==at&&(V=at),te=!1,H=!0,0===Fe?(G="reverse"===bt()?"normal":"reverse","reverse"===G&&(H=!1),Ct?(ne(),vr(1-We)):(K=(1-We)*On()*-1,ne(!1,!1))):1===Fe&&(Ct?(ne(),vr(We)):(K=We*On()*-1,ne(!1,!1))),void 0!==Fe&&!m&&de(),we)}}},464:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{E:()=>b,I:()=>Z,a:()=>F,s:()=>M});const F=w=>{try{if(w instanceof Z)return w.value;if(!rn()||"string"!=typeof w||""===w)return w;if(w.includes("onload="))return"";const I=document.createDocumentFragment(),D=document.createElement("div");I.appendChild(D),D.innerHTML=w,be.forEach(p=>{const m=I.querySelectorAll(p);for(let g=m.length-1;g>=0;g--){const x=m[g];x.parentNode?x.parentNode.removeChild(x):I.removeChild(x);const E=Rt(x);for(let S=0;S<E.length;S++)j(E[S])}});const d=Rt(I);for(let p=0;p<d.length;p++)j(d[p]);const f=document.createElement("div");f.appendChild(I);const h=f.querySelector("div");return null!==h?h.innerHTML:f.innerHTML}catch(I){return console.error(I),""}},j=w=>{if(w.nodeType&&1!==w.nodeType)return;if(typeof NamedNodeMap<"u"&&!(w.attributes instanceof NamedNodeMap))return void w.remove();for(let D=w.attributes.length-1;D>=0;D--){const d=w.attributes.item(D),f=d.name;if(!l.includes(f.toLowerCase())){w.removeAttribute(f);continue}const h=d.value,p=w[f];(null!=h&&h.toLowerCase().includes("javascript:")||null!=p&&p.toLowerCase().includes("javascript:"))&&w.removeAttribute(f)}const I=Rt(w);for(let D=0;D<I.length;D++)j(I[D])},Rt=w=>null!=w.children?w.children:w.childNodes,rn=()=>{var w;const I=window,D=null===(w=null==I?void 0:I.Ionic)||void 0===w?void 0:w.config;return!D||(D.get?D.get("sanitizerEnabled",!0):!0===D.sanitizerEnabled||void 0===D.sanitizerEnabled)},l=["class","id","href","src","name","slot"],be=["script","style","iframe","meta","link","object","embed"];class Z{constructor(I){this.value=I}}const M=w=>{const I=window,D=I.Ionic;if(!D||!D.config||"Object"===D.config.constructor.name)return I.Ionic=I.Ionic||{},I.Ionic.config=Object.assign(Object.assign({},I.Ionic.config),w),I.Ionic.config},b=!1},3351:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{g:()=>F});const F=(be,Z,M,C,b)=>Rt(be[1],Z[1],M[1],C[1],b).map(w=>j(be[0],Z[0],M[0],C[0],w)),j=(be,Z,M,C,b)=>b*(3*Z*Math.pow(b-1,2)+b*(-3*M*b+3*M+C*b))-be*Math.pow(b-1,3),Rt=(be,Z,M,C,b)=>l((C-=b)-3*(M-=b)+3*(Z-=b)-(be-=b),3*M-6*Z+3*be,3*Z-3*be,be).filter(I=>I>=0&&I<=1),l=(be,Z,M,C)=>{if(0===be)return((be,Z,M)=>{const C=Z*Z-4*be*M;return C<0?[]:[(-Z+Math.sqrt(C))/(2*be),(-Z-Math.sqrt(C))/(2*be)]})(Z,M,C);const b=(3*(M/=be)-(Z/=be)*Z)/3,w=(2*Z*Z*Z-9*Z*M+27*(C/=be))/27;if(0===b)return[Math.pow(-w,1/3)];if(0===w)return[Math.sqrt(-b),-Math.sqrt(-b)];const I=Math.pow(w/2,2)+Math.pow(b/3,3);if(0===I)return[Math.pow(w/2,.5)-Z/3];if(I>0)return[Math.pow(-w/2+Math.sqrt(I),1/3)-Math.pow(w/2+Math.sqrt(I),1/3)-Z/3];const D=Math.sqrt(Math.pow(-b/3,3)),d=Math.acos(-w/(2*Math.sqrt(Math.pow(-b/3,3)))),f=2*Math.pow(D,1/3);return[f*Math.cos(d/3)-Z/3,f*Math.cos((d+2*Math.PI)/3)-Z/3,f*Math.cos((d+4*Math.PI)/3)-Z/3]}},8621:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{C:()=>l,a:()=>Rt,d:()=>rn});var F=Ge(467),j=Ge(4920);const Rt=function(){var be=(0,F.A)(function*(Z,M,C,b,w,I){var D;if(Z)return Z.attachViewToDom(M,C,w,b);if(!(I||"string"==typeof C||C instanceof HTMLElement))throw new Error("framework delegate is missing");const d="string"==typeof C?null===(D=M.ownerDocument)||void 0===D?void 0:D.createElement(C):C;return b&&b.forEach(f=>d.classList.add(f)),w&&Object.assign(d,w),M.appendChild(d),yield new Promise(f=>(0,j.c)(d,f)),d});return function(M,C,b,w,I,D){return be.apply(this,arguments)}}(),rn=(be,Z)=>{if(Z){if(be)return be.removeViewFromDom(Z.parentElement,Z);Z.remove()}return Promise.resolve()},l=()=>{let be,Z;return{attachViewToDom:function(){var b=(0,F.A)(function*(w,I,D={},d=[]){var f,h;let p;if(be=w,I){const g="string"==typeof I?null===(f=be.ownerDocument)||void 0===f?void 0:f.createElement(I):I;d.forEach(x=>g.classList.add(x)),Object.assign(g,D),be.appendChild(g),p=g,yield new Promise(x=>(0,j.c)(g,x))}else if(be.children.length>0&&("ION-MODAL"===be.tagName||"ION-POPOVER"===be.tagName)&&!(p=be.children[0]).classList.contains("ion-delegate-host")){const x=null===(h=be.ownerDocument)||void 0===h?void 0:h.createElement("div");x.classList.add("ion-delegate-host"),d.forEach(E=>x.classList.add(E)),x.append(...be.children),be.appendChild(x),p=x}const m=document.querySelector("ion-app")||document.body;return Z=document.createComment("ionic teleport"),be.parentNode.insertBefore(Z,be),m.appendChild(be),null!=p?p:be});return function(I,D){return b.apply(this,arguments)}}(),removeViewFromDom:()=>(be&&Z&&(Z.parentNode.insertBefore(be,Z),Z.remove()),Promise.resolve())}}},1970:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B:()=>rn,G:()=>l});class j{constructor(Z,M,C,b,w){this.id=M,this.name=C,this.disableScroll=w,this.priority=1e6*b+M,this.ctrl=Z}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Z=this.ctrl.capture(this.name,this.id,this.priority);return Z&&this.disableScroll&&this.ctrl.disableScroll(this.id),Z}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Rt{constructor(Z,M,C,b){this.id=M,this.disable=C,this.disableScroll=b,this.ctrl=Z}block(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.disableGesture(Z,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Z of this.disable)this.ctrl.enableGesture(Z,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const rn="backdrop-no-scroll",l=new class F{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Z){var M;return new j(this,this.newID(),Z.name,null!==(M=Z.priority)&&void 0!==M?M:0,!!Z.disableScroll)}createBlocker(Z={}){return new Rt(this,this.newID(),Z.disable,!!Z.disableScroll)}start(Z,M,C){return this.canStart(Z)?(this.requestedStart.set(M,C),!0):(this.requestedStart.delete(M),!1)}capture(Z,M,C){if(!this.start(Z,M,C))return!1;const b=this.requestedStart;let w=-1e4;if(b.forEach(I=>{w=Math.max(w,I)}),w===C){this.capturedId=M,b.clear();const I=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Z}});return document.dispatchEvent(I),!0}return b.delete(M),!1}release(Z){this.requestedStart.delete(Z),this.capturedId===Z&&(this.capturedId=void 0)}disableGesture(Z,M){let C=this.disabledGestures.get(Z);void 0===C&&(C=new Set,this.disabledGestures.set(Z,C)),C.add(M)}enableGesture(Z,M){const C=this.disabledGestures.get(Z);void 0!==C&&C.delete(M)}disableScroll(Z){this.disabledScroll.add(Z),1===this.disabledScroll.size&&document.body.classList.add(rn)}enableScroll(Z){this.disabledScroll.delete(Z),0===this.disabledScroll.size&&document.body.classList.remove(rn)}canStart(Z){return!(void 0!==this.capturedId||this.isDisabled(Z))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Z){const M=this.disabledGestures.get(Z);return!!(M&&M.size>0)}newID(){return this.gestureId++,this.gestureId}}},8669:(Ir,Un,Ge)=>{"use strict";Ge.r(Un),Ge.d(Un,{MENU_BACK_BUTTON_PRIORITY:()=>C,OVERLAY_BACK_BUTTON_PRIORITY:()=>M,blockHardwareBackButton:()=>be,shouldUseCloseWatcher:()=>l,startHardwareBackButton:()=>Z});var F=Ge(467),j=Ge(8476),Rt=Ge(4921);Ge(8393);const l=()=>Rt.c.get("experimentalCloseWatcher",!1)&&void 0!==j.w&&"CloseWatcher"in j.w,be=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const b=document;let w=!1;const I=()=>{if(w)return;let D=0,d=[];const f=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(m,g){d.push({priority:m,handler:g,id:D++})}}});b.dispatchEvent(f);const h=function(){var m=(0,F.A)(function*(g){try{if(null!=g&&g.handler){const x=g.handler(p);null!=x&&(yield x)}}catch(x){console.error(x)}});return function(x){return m.apply(this,arguments)}}(),p=()=>{if(d.length>0){let m={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};d.forEach(g=>{g.priority>=m.priority&&(m=g)}),w=!0,d=d.filter(g=>g.id!==m.id),h(m).then(()=>w=!1)}};p()};if(l()){let D;const d=()=>{null==D||D.destroy(),D=new j.w.CloseWatcher,D.onclose=()=>{I(),d()}};d()}else b.addEventListener("backbutton",I)},M=100,C=99},4920:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{a:()=>M,b:()=>C,c:()=>Rt,d:()=>d,e:()=>g,f:()=>D,g:()=>b,h:()=>l,i:()=>Z,j:()=>f,k:()=>rn,l:()=>I,m:()=>h,n:()=>m,o:()=>x,p:()=>p,r:()=>w,s:()=>E,t:()=>F});const F=(S,L=0)=>new Promise(q=>{j(S,L,q)}),j=(S,L=0,q)=>{let J,G;const V={passive:!0},H=()=>{J&&J()},te=Y=>{(void 0===Y||S===Y.target)&&(H(),q(Y))};return S&&(S.addEventListener("webkitTransitionEnd",te,V),S.addEventListener("transitionend",te,V),G=setTimeout(te,L+500),J=()=>{void 0!==G&&(clearTimeout(G),G=void 0),S.removeEventListener("webkitTransitionEnd",te,V),S.removeEventListener("transitionend",te,V)}),H},Rt=(S,L)=>{S.componentOnReady?S.componentOnReady().then(q=>L(q)):w(()=>L(S))},rn=S=>void 0!==S.componentOnReady,l=(S,L=[])=>{const q={};return L.forEach(J=>{S.hasAttribute(J)&&(null!==S.getAttribute(J)&&(q[J]=S.getAttribute(J)),S.removeAttribute(J))}),q},be=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Z=(S,L)=>{let q=be;return L&&L.length>0&&(q=q.filter(J=>!L.includes(J))),l(S,q)},M=(S,L,q,J)=>{var G;if(typeof window<"u"){const V=window,K=null===(G=null==V?void 0:V.Ionic)||void 0===G?void 0:G.config;if(K){const H=K.get("_ael");if(H)return H(S,L,q,J);if(K._ael)return K._ael(S,L,q,J)}}return S.addEventListener(L,q,J)},C=(S,L,q,J)=>{var G;if(typeof window<"u"){const V=window,K=null===(G=null==V?void 0:V.Ionic)||void 0===G?void 0:G.config;if(K){const H=K.get("_rel");if(H)return H(S,L,q,J);if(K._rel)return K._rel(S,L,q,J)}}return S.removeEventListener(L,q,J)},b=(S,L=S)=>S.shadowRoot||L,w=S=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(S):"function"==typeof requestAnimationFrame?requestAnimationFrame(S):setTimeout(S),I=S=>!!S.shadowRoot&&!!S.attachShadow,D=S=>{if(S.focus(),S.classList.contains("ion-focusable")){const L=S.closest("ion-app");L&&L.setFocus([S])}},d=(S,L,q,J,G)=>{if(S||I(L)){let V=L.querySelector("input.aux-input");V||(V=L.ownerDocument.createElement("input"),V.type="hidden",V.classList.add("aux-input"),L.appendChild(V)),V.disabled=G,V.name=q,V.value=J||""}},f=(S,L,q)=>Math.max(S,Math.min(L,q)),h=(S,L)=>{if(!S){const q="ASSERT: "+L;throw console.error(q),new Error(q)}},p=S=>{if(S){const L=S.changedTouches;if(L&&L.length>0){const q=L[0];return{x:q.clientX,y:q.clientY}}if(void 0!==S.pageX)return{x:S.pageX,y:S.pageY}}return{x:0,y:0}},m=S=>{const L="rtl"===document.dir;switch(S){case"start":return L;case"end":return!L;default:throw new Error(`"${S}" is not a valid value for [side]. Use "start" or "end" instead.`)}},g=(S,L)=>{const q=S._original||S;return{_original:S,emit:x(q.emit.bind(q),L)}},x=(S,L=0)=>{let q;return(...J)=>{clearTimeout(q),q=setTimeout(S,L,...J)}},E=(S,L)=>{if(null!=S||(S={}),null!=L||(L={}),S===L)return!0;const q=Object.keys(S);if(q.length!==Object.keys(L).length)return!1;for(const J of q)if(!(J in L)||S[J]!==L[J])return!1;return!0}},8607:(Ir,Un,Ge)=>{"use strict";Ge.r(Un),Ge.d(Un,{GESTURE_CONTROLLER:()=>F.G,createGesture:()=>C});var F=Ge(1970);const j=(D,d,f,h)=>{const p=Rt(D)?{capture:!!h.capture,passive:!!h.passive}:!!h.capture;let m,g;return D.__zone_symbol__addEventListener?(m="__zone_symbol__addEventListener",g="__zone_symbol__removeEventListener"):(m="addEventListener",g="removeEventListener"),D[m](d,f,p),()=>{D[g](d,f,p)}},Rt=D=>{if(void 0===rn)try{const d=Object.defineProperty({},"passive",{get:()=>{rn=!0}});D.addEventListener("optsTest",()=>{},d)}catch{rn=!1}return!!rn};let rn;const Z=D=>D instanceof Document?D:D.ownerDocument,C=D=>{let d=!1,f=!1,h=!0,p=!1;const m=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},D),g=m.canStart,x=m.onWillStart,E=m.onStart,S=m.onEnd,L=m.notCaptured,q=m.onMove,J=m.threshold,G=m.passive,V=m.blurOnStart,K={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},H=((D,d,f)=>{const h=f*(Math.PI/180),p="x"===D,m=Math.cos(h),g=d*d;let x=0,E=0,S=!1,L=0;return{start(q,J){x=q,E=J,L=0,S=!0},detect(q,J){if(!S)return!1;const G=q-x,V=J-E,K=G*G+V*V;if(K<g)return!1;const H=Math.sqrt(K),te=(p?G:V)/H;return L=te>m?1:te<-m?-1:0,S=!1,!0},isGesture:()=>0!==L,getDirection:()=>L}})(m.direction,m.threshold,m.maxAngle),te=F.G.createGesture({name:D.gestureName,priority:D.gesturePriority,disableScroll:D.disableScroll}),Se=()=>{d&&(p=!1,q&&q(K))},oe=()=>!!te.capture()&&(d=!0,h=!1,K.startX=K.currentX,K.startY=K.currentY,K.startTime=K.currentTime,x?x(K).then(re):re(),!0),re=()=>{V&&(()=>{if(typeof document<"u"){const le=document.activeElement;null!=le&&le.blur&&le.blur()}})(),E&&E(K),h=!0},Q=()=>{d=!1,f=!1,p=!1,h=!0,te.release()},fe=le=>{const z=d,ye=h;if(Q(),ye){if(b(K,le),z)return void(S&&S(K));L&&L(K)}},De=((D,d,f,h,p)=>{let m,g,x,E,S,L,q,J=0;const G=ge=>{J=Date.now()+2e3,d(ge)&&(!g&&f&&(g=j(D,"touchmove",f,p)),x||(x=j(ge.target,"touchend",K,p)),E||(E=j(ge.target,"touchcancel",K,p)))},V=ge=>{J>Date.now()||d(ge)&&(!L&&f&&(L=j(Z(D),"mousemove",f,p)),q||(q=j(Z(D),"mouseup",H,p)))},K=ge=>{te(),h&&h(ge)},H=ge=>{Y(),h&&h(ge)},te=()=>{g&&g(),x&&x(),E&&E(),g=x=E=void 0},Y=()=>{L&&L(),q&&q(),L=q=void 0},we=()=>{te(),Y()},Se=(ge=!0)=>{ge?(m||(m=j(D,"touchstart",G,p)),S||(S=j(D,"mousedown",V,p))):(m&&m(),S&&S(),m=S=void 0,we())};return{enable:Se,stop:we,destroy:()=>{Se(!1),h=f=d=void 0}}})(m.el,le=>{const z=I(le);return!(f||!h||(w(le,K),K.startX=K.currentX,K.startY=K.currentY,K.startTime=K.currentTime=z,K.velocityX=K.velocityY=K.deltaX=K.deltaY=0,K.event=le,g&&!1===g(K))||(te.release(),!te.start()))&&(f=!0,0===J?oe():(H.start(K.startX,K.startY),!0))},le=>{d?!p&&h&&(p=!0,b(K,le),requestAnimationFrame(Se)):(b(K,le),H.detect(K.currentX,K.currentY)&&(!H.isGesture()||!oe())&&it())},fe,{capture:!1,passive:G}),it=()=>{Q(),De.stop(),L&&L(K)};return{enable(le=!0){le||(d&&fe(void 0),Q()),De.enable(le)},destroy(){te.destroy(),De.destroy()}}},b=(D,d)=>{if(!d)return;const f=D.currentX,h=D.currentY,p=D.currentTime;w(d,D);const m=D.currentX,g=D.currentY,E=(D.currentTime=I(d))-p;if(E>0&&E<100){const L=(g-h)/E;D.velocityX=(m-f)/E*.7+.3*D.velocityX,D.velocityY=.7*L+.3*D.velocityY}D.deltaX=m-D.startX,D.deltaY=g-D.startY,D.event=d},w=(D,d)=>{let f=0,h=0;if(D){const p=D.changedTouches;if(p&&p.length>0){const m=p[0];f=m.clientX,h=m.clientY}else void 0!==D.pageX&&(f=D.pageX,h=D.pageY)}d.currentX=f,d.currentY=h},I=D=>D.timeStamp||Date.now()},6073:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{m:()=>D});var F=Ge(467),j=Ge(8476),Rt=Ge(8669),rn=Ge(4929),l=Ge(4920),be=Ge(4921),Z=Ge(9986);const M=d=>(0,Z.c)().duration(d?400:300),C=d=>{let f,h;const p=d.width+8,m=(0,Z.c)(),g=(0,Z.c)();d.isEndSide?(f=p+"px",h="0px"):(f=-p+"px",h="0px"),m.addElement(d.menuInnerEl).fromTo("transform",`translateX(${f})`,`translateX(${h})`);const E="ios"===(0,be.b)(d),S=E?.2:.25;return g.addElement(d.backdropEl).fromTo("opacity",.01,S),M(E).addAnimation([m,g])},b=d=>{let f,h;const p=(0,be.b)(d),m=d.width;d.isEndSide?(f=-m+"px",h=m+"px"):(f=m+"px",h=-m+"px");const g=(0,Z.c)().addElement(d.menuInnerEl).fromTo("transform",`translateX(${h})`,"translateX(0px)"),x=(0,Z.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${f})`),E=(0,Z.c)().addElement(d.backdropEl).fromTo("opacity",.01,.32);return M("ios"===p).addAnimation([g,x,E])},w=d=>{const f=(0,be.b)(d),h=d.width*(d.isEndSide?-1:1)+"px",p=(0,Z.c)().addElement(d.contentEl).fromTo("transform","translateX(0px)",`translateX(${h})`);return M("ios"===f).addAnimation(p)},D=(()=>{const d=new Map,f=[],h=function(){var Q=(0,F.A)(function*(fe){const De=yield L(fe,!0);return!!De&&De.open()});return function(De){return Q.apply(this,arguments)}}(),p=function(){var Q=(0,F.A)(function*(fe){const De=yield void 0!==fe?L(fe,!0):q();return void 0!==De&&De.close()});return function(De){return Q.apply(this,arguments)}}(),m=function(){var Q=(0,F.A)(function*(fe){const De=yield L(fe,!0);return!!De&&De.toggle()});return function(De){return Q.apply(this,arguments)}}(),g=function(){var Q=(0,F.A)(function*(fe,De){const it=yield L(De);return it&&(it.disabled=!fe),it});return function(De,it){return Q.apply(this,arguments)}}(),x=function(){var Q=(0,F.A)(function*(fe,De){const it=yield L(De);return it&&(it.swipeGesture=fe),it});return function(De,it){return Q.apply(this,arguments)}}(),E=function(){var Q=(0,F.A)(function*(fe){if(null!=fe){const De=yield L(fe);return void 0!==De&&De.isOpen()}return void 0!==(yield q())});return function(De){return Q.apply(this,arguments)}}(),S=function(){var Q=(0,F.A)(function*(fe){const De=yield L(fe);return!!De&&!De.disabled});return function(De){return Q.apply(this,arguments)}}(),L=function(){var Q=(0,F.A)(function*(fe,De=!1){if(yield re(),"start"===fe||"end"===fe){const le=f.filter(ye=>ye.side===fe&&!ye.disabled);if(le.length>=1)return le.length>1&&De&&(0,rn.p)(`menuController queried for a menu on the "${fe}" side, but ${le.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,le.map(ye=>ye.el)),le[0].el;const z=f.filter(ye=>ye.side===fe);if(z.length>=1)return z.length>1&&De&&(0,rn.p)(`menuController queried for a menu on the "${fe}" side, but ${z.length} menus were found. The first menu reference will be used. If this is not the behavior you want then pass the ID of the menu instead of its side.`,z.map(ye=>ye.el)),z[0].el}else if(null!=fe)return ge(le=>le.menuId===fe);return ge(le=>!le.disabled)||(f.length>0?f[0].el:void 0)});return function(De){return Q.apply(this,arguments)}}(),q=function(){var Q=(0,F.A)(function*(){return yield re(),we()});return function(){return Q.apply(this,arguments)}}(),J=function(){var Q=(0,F.A)(function*(){return yield re(),Se()});return function(){return Q.apply(this,arguments)}}(),G=function(){var Q=(0,F.A)(function*(){return yield re(),oe()});return function(){return Q.apply(this,arguments)}}(),V=(Q,fe)=>{d.set(Q,fe)},te=function(){var Q=(0,F.A)(function*(fe,De,it){if(oe())return!1;if(De){const le=yield q();le&&fe.el!==le&&(yield le.setOpen(!1,!1))}return fe._setOpen(De,it)});return function(De,it,le){return Q.apply(this,arguments)}}(),we=()=>ge(Q=>Q._isOpen),Se=()=>f.map(Q=>Q.el),oe=()=>f.some(Q=>Q.isAnimating),ge=Q=>{const fe=f.find(Q);if(void 0!==fe)return fe.el},re=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Q=>new Promise(fe=>(0,l.c)(Q,fe))));return V("reveal",w),V("push",b),V("overlay",C),null==j.d||j.d.addEventListener("ionBackButton",Q=>{const fe=we();fe&&Q.detail.register(Rt.MENU_BACK_BUTTON_PRIORITY,()=>fe.close())}),{registerAnimation:V,get:L,getMenus:J,getOpen:q,isEnabled:S,swipeGesture:x,isAnimating:G,isOpen:E,enable:g,toggle:m,close:p,open:h,_getOpenSync:we,_createAnimation:(Q,fe)=>{const De=d.get(Q);if(!De)throw new Error("animation not registered");return De(fe)},_register:Q=>{f.indexOf(Q)<0&&f.push(Q)},_unregister:Q=>{const fe=f.indexOf(Q);fe>-1&&f.splice(fe,1)},_setOpen:te}})()},8393:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B:()=>be,a:()=>Y,b:()=>Qa,c:()=>rt,d:()=>$n,e:()=>ye,f:()=>Rn,g:()=>bt,h:()=>An,i:()=>On,j:()=>ws,k:()=>Je,r:()=>C,w:()=>Ue});var F=Ge(467);var rn=Object.defineProperty,be={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},Z=new WeakMap,M=ut=>Z.get(ut),C=(ut,Ot)=>Z.set(Ot.$lazyInstance$=ut,Ot),w=(ut,Ot)=>Ot in ut,I=(ut,Ot)=>(0,console.error)(ut,Ot),D=new Map,f=new Map,h=[],E="s-id",S="sty-id",L="c-id",J="slot-fb{display:contents}slot-fb[hidden]{display:none}",G="http://www.w3.org/1999/xlink",V=typeof window<"u"?window:{},K=V.document||{head:{}},te={$flags$:0,$resourcesUrl$:"",jmp:ut=>ut(),raf:ut=>requestAnimationFrame(ut),ael:(ut,Ot,fn,wn)=>ut.addEventListener(Ot,fn,wn),rel:(ut,Ot,fn,wn)=>ut.removeEventListener(Ot,fn,wn),ce:(ut,Ot)=>new CustomEvent(ut,Ot)},Y=ut=>{Object.assign(te,ut)},Se=(()=>{let ut=!1;try{K.addEventListener("e",null,Object.defineProperty({},"passive",{get(){ut=!0}}))}catch{}return ut})(),ge=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),re=!1,Q=[],fe=[],De=(ut,Ot)=>fn=>{ut.push(fn),re||(re=!0,Ot&&4&te.$flags$?z(le):te.raf(le))},it=ut=>{for(let Ot=0;Ot<ut.length;Ot++)try{ut[Ot](performance.now())}catch(fn){I(fn)}ut.length=0},le=()=>{it(Q),it(fe),(re=Q.length>0)&&te.raf(le)},z=ut=>Promise.resolve(void 0).then(ut),ye=De(Q,!1),Ue=De(fe,!0),Je=ut=>{const Ot=new URL(ut,te.$resourcesUrl$);return Ot.origin!==V.location.origin?Ot.href:Ot.pathname},vt={},Ft=ut=>"object"==(ut=typeof ut)||"function"===ut;function Wt(ut){var Ot,fn,wn;return null!=(wn=null==(fn=null==(Ot=ut.head)?void 0:Ot.querySelector('meta[name="csp-nonce"]'))?void 0:fn.getAttribute("content"))?wn:void 0}((ut,Ot)=>{for(var fn in Ot)rn(ut,fn,{get:Ot[fn],enumerable:!0})})({},{err:()=>kt,map:()=>Ut,ok:()=>Nt,unwrap:()=>Tt,unwrapErr:()=>qt});var Nt=ut=>({isOk:!0,isErr:!1,value:ut}),kt=ut=>({isOk:!1,isErr:!0,value:ut});function Ut(ut,Ot){if(ut.isOk){const fn=Ot(ut.value);return fn instanceof Promise?fn.then(wn=>Nt(wn)):Nt(fn)}if(ut.isErr)return kt(ut.value);throw"should never get here"}var Tt=ut=>{if(ut.isOk)return ut.value;throw ut.value},qt=ut=>{if(ut.isErr)return ut.value;throw ut.value},An=(ut,Ot,...fn)=>{let wn=null,Nn=null,jn=null,hr=!1,br=!1;const Mr=[],Pr=Jr=>{for(let vi=0;vi<Jr.length;vi++)wn=Jr[vi],Array.isArray(wn)?Pr(wn):null!=wn&&"boolean"!=typeof wn&&((hr="function"!=typeof ut&&!Ft(wn))&&(wn=String(wn)),hr&&br?Mr[Mr.length-1].$text$+=wn:Mr.push(hr?Qn(null,wn):wn),br=hr)};if(Pr(fn),Ot){Ot.key&&(Nn=Ot.key),Ot.name&&(jn=Ot.name);{const Jr=Ot.className||Ot.class;Jr&&(Ot.class="object"!=typeof Jr?Jr:Object.keys(Jr).filter(vi=>Jr[vi]).join(" "))}}if("function"==typeof ut)return ut(null===Ot?{}:Ot,Mr,Bn);const oi=Qn(ut,null);return oi.$attrs$=Ot,Mr.length>0&&(oi.$children$=Mr),oi.$key$=Nn,oi.$name$=jn,oi},Qn=(ut,Ot)=>({$flags$:0,$tag$:ut,$text$:Ot,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Rn={},Bn={forEach:(ut,Ot)=>ut.map(ur).forEach(Ot),map:(ut,Ot)=>ut.map(ur).map(Ot).map(vn)},ur=ut=>({vattrs:ut.$attrs$,vchildren:ut.$children$,vkey:ut.$key$,vname:ut.$name$,vtag:ut.$tag$,vtext:ut.$text$}),vn=ut=>{if("function"==typeof ut.vtag){const fn={...ut.vattrs};return ut.vkey&&(fn.key=ut.vkey),ut.vname&&(fn.name=ut.vname),An(ut.vtag,fn,...ut.vchildren||[])}const Ot=Qn(ut.vtag,ut.vtext);return Ot.$attrs$=ut.vattrs,Ot.$children$=ut.vchildren,Ot.$key$=ut.vkey,Ot.$name$=ut.vname,Ot},Pn=(ut,Ot,fn,wn,Nn,jn,hr)=>{let br,Mr,Pr,oi;if(1===jn.nodeType){for(br=jn.getAttribute(L),br&&(Mr=br.split("."),(Mr[0]===hr||"0"===Mr[0])&&(Pr={$flags$:0,$hostId$:Mr[0],$nodeId$:Mr[1],$depth$:Mr[2],$index$:Mr[3],$tag$:jn.tagName.toLowerCase(),$elm$:jn,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Ot.push(Pr),jn.removeAttribute(L),ut.$children$||(ut.$children$=[]),ut.$children$[Pr.$index$]=Pr,ut=Pr,wn&&"0"===Pr.$depth$&&(wn[Pr.$index$]=Pr.$elm$))),oi=jn.childNodes.length-1;oi>=0;oi--)Pn(ut,Ot,fn,wn,Nn,jn.childNodes[oi],hr);if(jn.shadowRoot)for(oi=jn.shadowRoot.childNodes.length-1;oi>=0;oi--)Pn(ut,Ot,fn,wn,Nn,jn.shadowRoot.childNodes[oi],hr)}else if(8===jn.nodeType)Mr=jn.nodeValue.split("."),(Mr[1]===hr||"0"===Mr[1])&&(br=Mr[0],Pr={$flags$:0,$hostId$:Mr[1],$nodeId$:Mr[2],$depth$:Mr[3],$index$:Mr[4],$elm$:jn,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===br?(Pr.$elm$=jn.nextSibling,Pr.$elm$&&3===Pr.$elm$.nodeType&&(Pr.$text$=Pr.$elm$.textContent,Ot.push(Pr),jn.remove(),ut.$children$||(ut.$children$=[]),ut.$children$[Pr.$index$]=Pr,wn&&"0"===Pr.$depth$&&(wn[Pr.$index$]=Pr.$elm$))):Pr.$hostId$===hr&&("s"===br?(Pr.$tag$="slot",jn["s-sn"]=Mr[5]?Pr.$name$=Mr[5]:"",jn["s-sr"]=!0,wn&&(Pr.$elm$=K.createElement(Pr.$tag$),Pr.$name$&&Pr.$elm$.setAttribute("name",Pr.$name$),jn.parentNode.insertBefore(Pr.$elm$,jn),jn.remove(),"0"===Pr.$depth$&&(wn[Pr.$index$]=Pr.$elm$)),fn.push(Pr),ut.$children$||(ut.$children$=[]),ut.$children$[Pr.$index$]=Pr):"r"===br&&(wn?jn.remove():(Nn["s-cr"]=jn,jn["s-cn"]=!0))));else if(ut&&"style"===ut.$tag$){const Jr=Qn(null,jn.textContent);Jr.$elm$=jn,Jr.$index$="0",ut.$children$=[Jr]}},gt=(ut,Ot)=>{if(1===ut.nodeType){let fn=0;for(;fn<ut.childNodes.length;fn++)gt(ut.childNodes[fn],Ot);if(ut.shadowRoot)for(fn=0;fn<ut.shadowRoot.childNodes.length;fn++)gt(ut.shadowRoot.childNodes[fn],Ot)}else if(8===ut.nodeType){const fn=ut.nodeValue.split(".");"o"===fn[0]&&(Ot.set(fn[1]+"."+fn[2],ut),ut.nodeValue="",ut["s-en"]=fn[3])}},rt=ut=>h.push(ut),bt=ut=>M(ut).$modeName$,On=ut=>M(ut).$hostElement$,$n=(ut,Ot,fn)=>{const wn=On(ut);return{emit:Nn=>sr(wn,Ot,{bubbles:!!(4&fn),composed:!!(2&fn),cancelable:!!(1&fn),detail:Nn})}},sr=(ut,Ot,fn)=>{const wn=te.ce(Ot,fn);return ut.dispatchEvent(wn),wn},Cr=new WeakMap,Rr=(ut,Ot,fn)=>{let wn=f.get(ut);ge&&fn?(wn=wn||new CSSStyleSheet,"string"==typeof wn?wn=Ot:wn.replaceSync(Ot)):wn=Ot,f.set(ut,wn)},Fr=(ut,Ot,fn)=>{var wn;const Nn=cn(Ot,fn),jn=f.get(Nn);if(ut=11===ut.nodeType?ut:K,jn)if("string"==typeof jn){let br,hr=Cr.get(ut=ut.head||ut);if(hr||Cr.set(ut,hr=new Set),!hr.has(Nn)){if(ut.host&&(br=ut.querySelector(`[${S}="${Nn}"]`)))br.innerHTML=jn;else{br=K.createElement("style"),br.innerHTML=jn;const Mr=null!=(wn=te.$nonce$)?wn:Wt(K);null!=Mr&&br.setAttribute("nonce",Mr),ut.insertBefore(br,ut.querySelector("link"))}4&Ot.$flags$&&(br.innerHTML+=J),hr&&hr.add(Nn)}}else ut.adoptedStyleSheets.includes(jn)||(ut.adoptedStyleSheets=[...ut.adoptedStyleSheets,jn]);return Nn},cn=(ut,Ot)=>"sc-"+(Ot&&32&ut.$flags$?ut.$tagName$+"-"+Ot:ut.$tagName$),Tn=ut=>ut.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),sn=(ut,Ot,fn,wn,Nn,jn)=>{if(fn!==wn){let hr=w(ut,Ot),br=Ot.toLowerCase();if("class"===Ot){const Mr=ut.classList,Pr=tr(fn),oi=tr(wn);Mr.remove(...Pr.filter(Jr=>Jr&&!oi.includes(Jr))),Mr.add(...oi.filter(Jr=>Jr&&!Pr.includes(Jr)))}else if("style"===Ot){for(const Mr in fn)(!wn||null==wn[Mr])&&(Mr.includes("-")?ut.style.removeProperty(Mr):ut.style[Mr]="");for(const Mr in wn)(!fn||wn[Mr]!==fn[Mr])&&(Mr.includes("-")?ut.style.setProperty(Mr,wn[Mr]):ut.style[Mr]=wn[Mr])}else if("key"!==Ot)if("ref"===Ot)wn&&wn(ut);else if(hr||"o"!==Ot[0]||"n"!==Ot[1]){const Mr=Ft(wn);if((hr||Mr&&null!==wn)&&!Nn)try{if(ut.tagName.includes("-"))ut[Ot]=wn;else{const oi=null==wn?"":wn;"list"===Ot?hr=!1:(null==fn||ut[Ot]!=oi)&&(ut[Ot]=oi)}}catch{}let Pr=!1;br!==(br=br.replace(/^xlink\:?/,""))&&(Ot=br,Pr=!0),null==wn||!1===wn?(!1!==wn||""===ut.getAttribute(Ot))&&(Pr?ut.removeAttributeNS(G,Ot):ut.removeAttribute(Ot)):(!hr||4&jn||Nn)&&!Mr&&(wn=!0===wn?"":wn,Pr?ut.setAttributeNS(G,Ot,wn):ut.setAttribute(Ot,wn))}else if(Ot="-"===Ot[2]?Ot.slice(3):w(V,br)?br.slice(2):br[2]+Ot.slice(3),fn||wn){const Mr=Ot.endsWith(Xt);Ot=Ot.replace(hn,""),fn&&te.rel(ut,Ot,fn,Mr),wn&&te.ael(ut,Ot,wn,Mr)}}},_n=/\s/,tr=ut=>ut?ut.split(_n):[],Xt="Capture",hn=new RegExp(Xt+"$"),Fn=(ut,Ot,fn)=>{const wn=11===Ot.$elm$.nodeType&&Ot.$elm$.host?Ot.$elm$.host:Ot.$elm$,Nn=ut&&ut.$attrs$||vt,jn=Ot.$attrs$||vt;for(const hr of Cn(Object.keys(Nn)))hr in jn||sn(wn,hr,Nn[hr],void 0,fn,Ot.$flags$);for(const hr of Cn(Object.keys(jn)))sn(wn,hr,Nn[hr],jn[hr],fn,Ot.$flags$)};function Cn(ut){return ut.includes("ref")?[...ut.filter(Ot=>"ref"!==Ot),"ref"]:ut}var Wn,yr,fr,Ur=!1,vr=!1,ei=!1,ne=!1,Pe=(ut,Ot,fn,wn)=>{var Nn;const jn=Ot.$children$[fn];let br,Mr,Pr,hr=0;if(Ur||(ei=!0,"slot"===jn.$tag$&&(Wn&&wn.classList.add(Wn+"-s"),jn.$flags$|=jn.$children$?2:1)),null!==jn.$text$)br=jn.$elm$=K.createTextNode(jn.$text$);else if(1&jn.$flags$)br=jn.$elm$=K.createTextNode("");else{if(ne||(ne="svg"===jn.$tag$),br=jn.$elm$=K.createElementNS(ne?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Ur&&2&jn.$flags$?"slot-fb":jn.$tag$),ne&&"foreignObject"===jn.$tag$&&(ne=!1),Fn(null,jn,ne),(ut=>null!=ut)(Wn)&&br["s-si"]!==Wn&&br.classList.add(br["s-si"]=Wn),xt(br,wn),jn.$children$)for(hr=0;hr<jn.$children$.length;++hr)Mr=Pe(ut,jn,hr,br),Mr&&br.appendChild(Mr);"svg"===jn.$tag$?ne=!1:"foreignObject"===br.tagName&&(ne=!0)}return br["s-hn"]=fr,3&jn.$flags$&&(br["s-sr"]=!0,br["s-cr"]=yr,br["s-sn"]=jn.$name$||"",br["s-rf"]=null==(Nn=jn.$attrs$)?void 0:Nn.ref,Pr=ut&&ut.$children$&&ut.$children$[fn],Pr&&Pr.$tag$===jn.$tag$&&ut.$elm$&&Qe(ut.$elm$)),br},Qe=ut=>{te.$flags$|=1;const Ot=ut.closest(fr.toLowerCase());if(null!=Ot){const fn=Array.from(Ot.childNodes).find(Nn=>Nn["s-cr"]),wn=Array.from(ut.childNodes);for(const Nn of fn?wn.reverse():wn)null!=Nn["s-sh"]&&(at(Ot,Nn,null!=fn?fn:null),Nn["s-sh"]=void 0,ei=!0)}te.$flags$&=-2},T=(ut,Ot)=>{te.$flags$|=1;const fn=Array.from(ut.childNodes);if(ut["s-sr"]){let wn=ut;for(;wn=wn.nextSibling;)wn&&wn["s-sn"]===ut["s-sn"]&&wn["s-sh"]===fr&&fn.push(wn)}for(let wn=fn.length-1;wn>=0;wn--){const Nn=fn[wn];Nn["s-hn"]!==fr&&Nn["s-ol"]&&(at(de(Nn),Nn,$(Nn)),Nn["s-ol"].remove(),Nn["s-ol"]=void 0,Nn["s-sh"]=void 0,ei=!0),Ot&&T(Nn,Ot)}te.$flags$&=-2},N=(ut,Ot,fn,wn,Nn,jn)=>{let br,hr=ut["s-cr"]&&ut["s-cr"].parentNode||ut;for(hr.shadowRoot&&hr.tagName===fr&&(hr=hr.shadowRoot);Nn<=jn;++Nn)wn[Nn]&&(br=Pe(null,fn,Nn,ut),br&&(wn[Nn].$elm$=br,at(hr,br,$(Ot))))},R=(ut,Ot,fn)=>{for(let wn=Ot;wn<=fn;++wn){const Nn=ut[wn];if(Nn){const jn=Nn.$elm$;We(Nn),jn&&(vr=!0,jn["s-ol"]?jn["s-ol"].remove():T(jn,!0),jn.remove())}}},ie=(ut,Ot,fn=!1)=>ut.$tag$===Ot.$tag$&&("slot"===ut.$tag$?ut.$name$===Ot.$name$:!!fn||ut.$key$===Ot.$key$),$=ut=>ut&&ut["s-ol"]||ut,de=ut=>(ut["s-ol"]?ut["s-ol"]:ut).parentNode,Ae=(ut,Ot,fn=!1)=>{const wn=Ot.$elm$=ut.$elm$,Nn=ut.$children$,jn=Ot.$children$,hr=Ot.$tag$,br=Ot.$text$;let Mr;null===br?(ne="svg"===hr||"foreignObject"!==hr&&ne,"slot"!==hr||Ur?Fn(ut,Ot,ne):ut.$name$!==Ot.$name$&&(Ot.$elm$["s-sn"]=Ot.$name$||"",Qe(Ot.$elm$.parentElement)),null!==Nn&&null!==jn?((ut,Ot,fn,wn,Nn=!1)=>{let ns,Ms,jn=0,hr=0,br=0,Mr=0,Pr=Ot.length-1,oi=Ot[0],Jr=Ot[Pr],vi=wn.length-1,Ei=wn[0],zi=wn[vi];for(;jn<=Pr&&hr<=vi;)if(null==oi)oi=Ot[++jn];else if(null==Jr)Jr=Ot[--Pr];else if(null==Ei)Ei=wn[++hr];else if(null==zi)zi=wn[--vi];else if(ie(oi,Ei,Nn))Ae(oi,Ei,Nn),oi=Ot[++jn],Ei=wn[++hr];else if(ie(Jr,zi,Nn))Ae(Jr,zi,Nn),Jr=Ot[--Pr],zi=wn[--vi];else if(ie(oi,zi,Nn))("slot"===oi.$tag$||"slot"===zi.$tag$)&&T(oi.$elm$.parentNode,!1),Ae(oi,zi,Nn),at(ut,oi.$elm$,Jr.$elm$.nextSibling),oi=Ot[++jn],zi=wn[--vi];else if(ie(Jr,Ei,Nn))("slot"===oi.$tag$||"slot"===zi.$tag$)&&T(Jr.$elm$.parentNode,!1),Ae(Jr,Ei,Nn),at(ut,Jr.$elm$,oi.$elm$),Jr=Ot[--Pr],Ei=wn[++hr];else{for(br=-1,Mr=jn;Mr<=Pr;++Mr)if(Ot[Mr]&&null!==Ot[Mr].$key$&&Ot[Mr].$key$===Ei.$key$){br=Mr;break}br>=0?(Ms=Ot[br],Ms.$tag$!==Ei.$tag$?ns=Pe(Ot&&Ot[hr],fn,br,ut):(Ae(Ms,Ei,Nn),Ot[br]=void 0,ns=Ms.$elm$),Ei=wn[++hr]):(ns=Pe(Ot&&Ot[hr],fn,hr,ut),Ei=wn[++hr]),ns&&at(de(oi.$elm$),ns,$(oi.$elm$))}jn>Pr?N(ut,null==wn[vi+1]?null:wn[vi+1].$elm$,fn,wn,hr,vi):hr>vi&&R(Ot,jn,Pr)})(wn,Nn,Ot,jn,fn):null!==jn?(null!==ut.$text$&&(wn.textContent=""),N(wn,null,Ot,jn,0,jn.length-1)):null!==Nn&&R(Nn,0,Nn.length-1),ne&&"svg"===hr&&(ne=!1)):(Mr=wn["s-cr"])?Mr.parentNode.textContent=br:ut.$text$!==br&&(wn.data=br)},tt=ut=>{const Ot=ut.childNodes;for(const fn of Ot)if(1===fn.nodeType){if(fn["s-sr"]){const wn=fn["s-sn"];fn.hidden=!1;for(const Nn of Ot)if(Nn!==fn)if(Nn["s-hn"]!==fn["s-hn"]||""!==wn){if(1===Nn.nodeType&&(wn===Nn.getAttribute("slot")||wn===Nn["s-sn"])||3===Nn.nodeType&&wn===Nn["s-sn"]){fn.hidden=!0;break}}else if(1===Nn.nodeType||3===Nn.nodeType&&""!==Nn.textContent.trim()){fn.hidden=!0;break}}tt(fn)}},pt=[],Kt=ut=>{let Ot,fn,wn;for(const Nn of ut.childNodes){if(Nn["s-sr"]&&(Ot=Nn["s-cr"])&&Ot.parentNode){fn=Ot.parentNode.childNodes;const jn=Nn["s-sn"];for(wn=fn.length-1;wn>=0;wn--)if(Ot=fn[wn],!(Ot["s-cn"]||Ot["s-nr"]||Ot["s-hn"]===Nn["s-hn"]||Ot["s-sh"]&&Ot["s-sh"]===Nn["s-hn"]))if(Fe(Ot,jn)){let hr=pt.find(br=>br.$nodeToRelocate$===Ot);vr=!0,Ot["s-sn"]=Ot["s-sn"]||jn,hr?(hr.$nodeToRelocate$["s-sh"]=Nn["s-hn"],hr.$slotRefNode$=Nn):(Ot["s-sh"]=Nn["s-hn"],pt.push({$slotRefNode$:Nn,$nodeToRelocate$:Ot})),Ot["s-sr"]&&pt.map(br=>{Fe(br.$nodeToRelocate$,Ot["s-sn"])&&(hr=pt.find(Mr=>Mr.$nodeToRelocate$===Ot),hr&&!br.$slotRefNode$&&(br.$slotRefNode$=hr.$slotRefNode$))})}else pt.some(hr=>hr.$nodeToRelocate$===Ot)||pt.push({$nodeToRelocate$:Ot})}1===Nn.nodeType&&Kt(Nn)}},Fe=(ut,Ot)=>1===ut.nodeType?null===ut.getAttribute("slot")&&""===Ot||ut.getAttribute("slot")===Ot:ut["s-sn"]===Ot||""===Ot,We=ut=>{ut.$attrs$&&ut.$attrs$.ref&&ut.$attrs$.ref(null),ut.$children$&&ut.$children$.map(We)},at=(ut,Ot,fn)=>{const wn=null==ut?void 0:ut.insertBefore(Ot,fn);return xt(Ot,ut),wn},Ze=ut=>{const Ot=[];return ut&&Ot.push(...ut["s-scs"]||[],ut["s-si"],ut["s-sc"],...Ze(ut.parentElement)),Ot},xt=(ut,Ot,fn=!1)=>{var wn;if(ut&&Ot&&1===ut.nodeType){const Nn=new Set(Ze(Ot).filter(Boolean));if(Nn.size&&(null==(wn=ut.classList)||wn.add(...ut["s-scs"]=[...Nn]),ut["s-ol"]||fn))for(const jn of Array.from(ut.childNodes))xt(jn,ut,!0)}},En=(ut,Ot)=>{Ot&&!ut.$onRenderResolve$&&Ot["s-p"]&&Ot["s-p"].push(new Promise(fn=>ut.$onRenderResolve$=fn))},zn=(ut,Ot)=>{if(ut.$flags$|=16,!(4&ut.$flags$))return En(ut,ut.$ancestorComponent$),Ue(()=>or(ut,Ot));ut.$flags$|=512},or=(ut,Ot)=>{const Nn=ut.$lazyInstance$;if(!Nn)throw new Error(`Can't render component <${ut.$hostElement$.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let jn;return Ot&&(ut.$flags$|=256,ut.$queuedListeners$&&(ut.$queuedListeners$.map(([hr,br])=>Ls(Nn,hr,br)),ut.$queuedListeners$=void 0),jn=Ls(Nn,"componentWillLoad")),jn=ii(jn,()=>Ls(Nn,"componentWillRender")),ii(jn,()=>Rs(ut,Nn,Ot))},ii=(ut,Ot)=>Bi(ut)?ut.then(Ot).catch(fn=>{console.error(fn),Ot()}):Ot(),Bi=ut=>ut instanceof Promise||ut&&ut.then&&"function"==typeof ut.then,Rs=function(){var ut=(0,F.A)(function*(Ot,fn,wn){var Nn;const jn=Ot.$hostElement$,br=jn["s-rc"];wn&&(ut=>{const Ot=ut.$cmpMeta$,fn=ut.$hostElement$,wn=Ot.$flags$,jn=Fr(fn.shadowRoot?fn.shadowRoot:fn.getRootNode(),Ot,ut.$modeName$);10&wn&&(fn["s-sc"]=jn,fn.classList.add(jn+"-h"),2&wn&&fn.classList.add(jn+"-s"))})(Ot);Ps(Ot,fn,jn,wn),br&&(br.map(Pr=>Pr()),jn["s-rc"]=void 0);{const Pr=null!=(Nn=jn["s-p"])?Nn:[],oi=()=>xi(Ot);0===Pr.length?oi():(Promise.all(Pr).then(oi),Ot.$flags$|=4,Pr.length=0)}});return function(fn,wn,Nn){return ut.apply(this,arguments)}}(),Ps=(ut,Ot,fn,wn)=>{try{Ot=Ot.render&&Ot.render(),ut.$flags$&=-17,ut.$flags$|=2,((ut,Ot,fn=!1)=>{var wn,Nn,jn,hr,br;const Mr=ut.$hostElement$,Pr=ut.$cmpMeta$,oi=ut.$vnode$||Qn(null,null),Jr=(ut=>ut&&ut.$tag$===Rn)(Ot)?Ot:An(null,null,Ot);if(fr=Mr.tagName,Pr.$attrsToReflect$&&(Jr.$attrs$=Jr.$attrs$||{},Pr.$attrsToReflect$.map(([vi,Ei])=>Jr.$attrs$[Ei]=Mr[vi])),fn&&Jr.$attrs$)for(const vi of Object.keys(Jr.$attrs$))Mr.hasAttribute(vi)&&!["key","ref","style","class"].includes(vi)&&(Jr.$attrs$[vi]=Mr[vi]);if(Jr.$tag$=null,Jr.$flags$|=4,ut.$vnode$=Jr,Jr.$elm$=oi.$elm$=Mr.shadowRoot||Mr,Wn=Mr["s-sc"],Ur=!!(1&Pr.$flags$),yr=Mr["s-cr"],vr=!1,Ae(oi,Jr,fn),te.$flags$|=1,ei){Kt(Jr.$elm$);for(const vi of pt){const Ei=vi.$nodeToRelocate$;if(!Ei["s-ol"]){const zi=K.createTextNode("");zi["s-nr"]=Ei,at(Ei.parentNode,Ei["s-ol"]=zi,Ei)}}for(const vi of pt){const Ei=vi.$nodeToRelocate$,zi=vi.$slotRefNode$;if(zi){const ns=zi.parentNode;let Ms=zi.nextSibling;if(Ms&&1===Ms.nodeType){let Ki=null==(wn=Ei["s-ol"])?void 0:wn.previousSibling;for(;Ki;){let Js=null!=(Nn=Ki["s-nr"])?Nn:null;if(Js&&Js["s-sn"]===Ei["s-sn"]&&ns===Js.parentNode){for(Js=Js.nextSibling;Js===Ei||null!=Js&&Js["s-sr"];)Js=null==Js?void 0:Js.nextSibling;if(!Js||!Js["s-nr"]){Ms=Js;break}}Ki=Ki.previousSibling}}(!Ms&&ns!==Ei.parentNode||Ei.nextSibling!==Ms)&&Ei!==Ms&&(at(ns,Ei,Ms),1===Ei.nodeType&&(Ei.hidden=null!=(jn=Ei["s-ih"])&&jn)),Ei&&"function"==typeof zi["s-rf"]&&zi["s-rf"](Ei)}else 1===Ei.nodeType&&(fn&&(Ei["s-ih"]=null!=(hr=Ei.hidden)&&hr),Ei.hidden=!0)}}if(vr&&tt(Jr.$elm$),te.$flags$&=-2,pt.length=0,2&Pr.$flags$)for(const vi of Jr.$elm$.childNodes)vi["s-hn"]!==fr&&!vi["s-sh"]&&(fn&&null==vi["s-ih"]&&(vi["s-ih"]=null!=(br=vi.hidden)&&br),vi.hidden=!0);yr=void 0})(ut,Ot,wn)}catch(Nn){I(Nn,ut.$hostElement$)}return null},xi=ut=>{const fn=ut.$hostElement$,Nn=ut.$lazyInstance$,jn=ut.$ancestorComponent$;Ls(Nn,"componentDidRender"),64&ut.$flags$?Ls(Nn,"componentDidUpdate"):(ut.$flags$|=64,so(fn),Ls(Nn,"componentDidLoad"),ut.$onReadyResolve$(fn),jn||co()),ut.$onInstanceResolve$(fn),ut.$onRenderResolve$&&(ut.$onRenderResolve$(),ut.$onRenderResolve$=void 0),512&ut.$flags$&&z(()=>zn(ut,!1)),ut.$flags$&=-517},ws=ut=>{{const Ot=M(ut),fn=Ot.$hostElement$.isConnected;return fn&&2==(18&Ot.$flags$)&&zn(Ot,!1),fn}},co=ut=>{so(K.documentElement),z(()=>sr(V,"appload",{detail:{namespace:"ionic"}}))},Ls=(ut,Ot,fn)=>{if(ut&&ut[Ot])try{return ut[Ot](fn)}catch(wn){I(wn)}},so=ut=>ut.classList.add(("hydrated","hydrated")),ca=(ut,Ot,fn)=>{var wn,Nn;const jn=ut.prototype;if(Ot.$members$||Ot.$watchers$||ut.watchers){ut.watchers&&!Ot.$watchers$&&(Ot.$watchers$=ut.watchers);const hr=Object.entries(null!=(wn=Ot.$members$)?wn:{});if(hr.map(([br,[Mr]])=>{31&Mr||2&fn&&32&Mr?Object.defineProperty(jn,br,{get(){return((ut,Ot)=>M(this).$instanceValues$.get(Ot))(0,br)},set(Pr){((ut,Ot,fn,wn)=>{const Nn=M(ut);if(!Nn)throw new Error(`Couldn't find host element for "${wn.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const jn=Nn.$hostElement$,hr=Nn.$instanceValues$.get(Ot),br=Nn.$flags$,Mr=Nn.$lazyInstance$;fn=((ut,Ot)=>null==ut||Ft(ut)?ut:4&Ot?"false"!==ut&&(""===ut||!!ut):2&Ot?parseFloat(ut):1&Ot?String(ut):ut)(fn,wn.$members$[Ot][0]);const Pr=Number.isNaN(hr)&&Number.isNaN(fn);if((!(8&br)||void 0===hr)&&fn!==hr&&!Pr&&(Nn.$instanceValues$.set(Ot,fn),Mr)){if(wn.$watchers$&&128&br){const Jr=wn.$watchers$[Ot];Jr&&Jr.map(vi=>{try{Mr[vi](fn,hr,Ot)}catch(Ei){I(Ei,jn)}})}2==(18&br)&&zn(Nn,!1)}})(this,br,Pr,Ot)},configurable:!0,enumerable:!0}):1&fn&&64&Mr&&Object.defineProperty(jn,br,{value(...Pr){var oi;const Jr=M(this);return null==(oi=null==Jr?void 0:Jr.$onInstancePromise$)?void 0:oi.then(()=>{var vi;return null==(vi=Jr.$lazyInstance$)?void 0:vi[br](...Pr)})}})}),1&fn){const br=new Map;jn.attributeChangedCallback=function(Mr,Pr,oi){te.jmp(()=>{var Jr;const vi=br.get(Mr);if(this.hasOwnProperty(vi))oi=this[vi],delete this[vi];else{if(jn.hasOwnProperty(vi)&&"number"==typeof this[vi]&&this[vi]==oi)return;if(null==vi){const Ei=M(this),zi=null==Ei?void 0:Ei.$flags$;if(zi&&!(8&zi)&&128&zi&&oi!==Pr){const ns=Ei.$lazyInstance$,Ms=null==(Jr=Ot.$watchers$)?void 0:Jr[Mr];null==Ms||Ms.forEach(Ki=>{null!=ns[Ki]&&ns[Ki].call(ns,oi,Pr,Mr)})}return}}this[vi]=(null!==oi||"boolean"!=typeof this[vi])&&oi})},ut.observedAttributes=Array.from(new Set([...Object.keys(null!=(Nn=Ot.$watchers$)?Nn:{}),...hr.filter(([Mr,Pr])=>15&Pr[0]).map(([Mr,Pr])=>{var oi;const Jr=Pr[1]||Mr;return br.set(Jr,Mr),512&Pr[0]&&(null==(oi=Ot.$attrsToReflect$)||oi.push([Mr,Jr])),Jr})]))}}return ut},ta=function(){var ut=(0,F.A)(function*(Ot,fn,wn,Nn){let jn;if(!(32&fn.$flags$)){if(fn.$flags$|=32,wn.$lazyBundleId$){const Pr=((ut,Ot,fn)=>{const wn=ut.$tagName$.replace(/-/g,"_"),Nn=ut.$lazyBundleId$;if(!Nn)return;const jn=D.get(Nn);return jn?jn[wn]:Ge(8996)(`./${Nn}.entry.js`).then(hr=>(D.set(Nn,hr),hr[wn]),I)})(wn);if(Pr&&"then"in Pr){const Jr=()=>{};jn=yield Pr,Jr()}else jn=Pr;if(!jn)throw new Error(`Constructor for "${wn.$tagName$}#${fn.$modeName$}" was not found`);jn.isProxied||(wn.$watchers$=jn.watchers,ca(jn,wn,2),jn.isProxied=!0);const oi=()=>{};fn.$flags$|=8;try{new jn(fn)}catch(Jr){I(Jr)}fn.$flags$&=-9,fn.$flags$|=128,oi(),qo(fn.$lazyInstance$)}else jn=Ot.constructor,customElements.whenDefined(Ot.localName).then(()=>fn.$flags$|=128);if(jn&&jn.style){let Pr;"string"==typeof jn.style?Pr=jn.style:"string"!=typeof jn.style&&(fn.$modeName$=(ut=>h.map(Ot=>Ot(ut)).find(Ot=>!!Ot))(Ot),fn.$modeName$&&(Pr=jn.style[fn.$modeName$]));const oi=cn(wn,fn.$modeName$);if(!f.has(oi)){const Jr=()=>{};Rr(oi,Pr,!!(1&wn.$flags$)),Jr()}}}const hr=fn.$ancestorComponent$,br=()=>zn(fn,!0);hr&&hr["s-rc"]?hr["s-rc"].push(br):br()});return function(fn,wn,Nn,jn){return ut.apply(this,arguments)}}(),qo=ut=>{Ls(ut,"connectedCallback")},mo=ut=>{const Ot=ut["s-cr"]=K.createComment("");Ot["s-cn"]=!0,at(ut,Ot,ut.firstChild)},Ta=ut=>{Ls(ut,"disconnectedCallback")},To=function(){var ut=(0,F.A)(function*(Ot){if(!(1&te.$flags$)){const fn=M(Ot);fn.$rmListeners$&&(fn.$rmListeners$.map(wn=>wn()),fn.$rmListeners$=void 0),null!=fn&&fn.$lazyInstance$?Ta(fn.$lazyInstance$):null!=fn&&fn.$onReadyPromise$&&fn.$onReadyPromise$.then(()=>Ta(fn.$lazyInstance$))}});return function(fn){return ut.apply(this,arguments)}}(),Va=ut=>{const Ot=ut.cloneNode;ut.cloneNode=function(fn){const wn=this,Nn=wn.shadowRoot&&true,jn=Ot.call(wn,!!Nn&&fn);if(!Nn&&fn){let br,Mr,hr=0;const Pr=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;hr<wn.childNodes.length;hr++)br=wn.childNodes[hr]["s-nr"],Mr=Pr.every(oi=>!wn.childNodes[hr][oi]),br&&(jn.__appendChild?jn.__appendChild(br.cloneNode(!0)):jn.appendChild(br.cloneNode(!0))),Mr&&jn.appendChild(wn.childNodes[hr].cloneNode(!0))}return jn}},Ne=ut=>{ut.__appendChild=ut.appendChild,ut.appendChild=function(Ot){const fn=Ot["s-sn"]=Ma(Ot),wn=Ko(this.childNodes,fn,this.tagName);if(wn){const Nn=La(wn,fn),jn=Nn[Nn.length-1],hr=at(jn.parentNode,Ot,jn.nextSibling);return tt(this),hr}return this.__appendChild(Ot)}},yt=ut=>{ut.__removeChild=ut.removeChild,ut.removeChild=function(Ot){if(Ot&&typeof Ot["s-sn"]<"u"){const fn=Ko(this.childNodes,Ot["s-sn"],this.tagName);if(fn){const Nn=La(fn,Ot["s-sn"]).find(jn=>jn===Ot);if(Nn)return Nn.remove(),void tt(this)}}return this.__removeChild(Ot)}},Bt=ut=>{const Ot=ut.prepend;ut.prepend=function(...fn){fn.forEach(wn=>{"string"==typeof wn&&(wn=this.ownerDocument.createTextNode(wn));const Nn=wn["s-sn"]=Ma(wn),jn=Ko(this.childNodes,Nn,this.tagName);if(jn){const hr=document.createTextNode("");hr["s-nr"]=wn,jn["s-cr"].parentNode.__appendChild(hr),wn["s-ol"]=hr;const Mr=La(jn,Nn)[0];return at(Mr.parentNode,wn,Mr.nextSibling)}return 1===wn.nodeType&&wn.getAttribute("slot")&&(wn.hidden=!0),Ot.call(this,wn)})}},He=ut=>{ut.append=function(...Ot){Ot.forEach(fn=>{"string"==typeof fn&&(fn=this.ownerDocument.createTextNode(fn)),this.appendChild(fn)})}},Ht=ut=>{const Ot=ut.insertAdjacentHTML;ut.insertAdjacentHTML=function(fn,wn){if("afterbegin"!==fn&&"beforeend"!==fn)return Ot.call(this,fn,wn);const Nn=this.ownerDocument.createElement("_");let jn;if(Nn.innerHTML=wn,"afterbegin"===fn)for(;jn=Nn.firstChild;)this.prepend(jn);else if("beforeend"===fn)for(;jn=Nn.firstChild;)this.append(jn)}},kn=ut=>{ut.insertAdjacentText=function(Ot,fn){this.insertAdjacentHTML(Ot,fn)}},fs=ut=>{const Ot=ut.insertAdjacentElement;ut.insertAdjacentElement=function(fn,wn){return"afterbegin"!==fn&&"beforeend"!==fn?Ot.call(this,fn,wn):"afterbegin"===fn?(this.prepend(wn),wn):("beforeend"===fn&&this.append(wn),wn)}},qs=ut=>{const Ot=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(ut,"__textContent",Ot),Object.defineProperty(ut,"textContent",{get(){return" "+Ga(this.childNodes).map(Nn=>{var jn,hr;const br=[];let Mr=Nn.nextSibling;for(;Mr&&Mr["s-sn"]===Nn["s-sn"];)(3===Mr.nodeType||1===Mr.nodeType)&&br.push(null!=(hr=null==(jn=Mr.textContent)?void 0:jn.trim())?hr:""),Mr=Mr.nextSibling;return br.filter(Pr=>""!==Pr).join(" ")}).filter(Nn=>""!==Nn).join(" ")+" "},set(fn){Ga(this.childNodes).forEach(Nn=>{let jn=Nn.nextSibling;for(;jn&&jn["s-sn"]===Nn["s-sn"];){const hr=jn;jn=jn.nextSibling,hr.remove()}if(""===Nn["s-sn"]){const hr=this.ownerDocument.createTextNode(fn);hr["s-sn"]="",at(Nn.parentElement,hr,Nn.nextSibling)}else Nn.remove()})}})},na=(ut,Ot)=>{class fn extends Array{item(Nn){return this[Nn]}}if(8&Ot.$flags$){const wn=ut.__lookupGetter__("childNodes");Object.defineProperty(ut,"children",{get(){return this.childNodes.map(Nn=>1===Nn.nodeType)}}),Object.defineProperty(ut,"childElementCount",{get:()=>ut.children.length}),Object.defineProperty(ut,"childNodes",{get(){const Nn=wn.call(this);if(!(1&te.$flags$)&&2&M(this).$flags$){const jn=new fn;for(let hr=0;hr<Nn.length;hr++){const br=Nn[hr]["s-nr"];br&&jn.push(br)}return jn}return fn.from(Nn)}})}},Ga=ut=>{const Ot=[];for(const fn of Array.from(ut))fn["s-sr"]&&Ot.push(fn),Ot.push(...Ga(fn.childNodes));return Ot},Ma=ut=>ut["s-sn"]||1===ut.nodeType&&ut.getAttribute("slot")||"",Ko=(ut,Ot,fn)=>{let Nn,wn=0;for(;wn<ut.length;wn++)if(Nn=ut[wn],Nn["s-sr"]&&Nn["s-sn"]===Ot&&Nn["s-hn"]===fn||(Nn=Ko(Nn.childNodes,Ot,fn),Nn))return Nn;return null},La=(ut,Ot)=>{const fn=[ut];for(;(ut=ut.nextSibling)&&ut["s-sn"]===Ot;)fn.push(ut);return fn},Qa=(ut,Ot={})=>{var fn;const Nn=[],jn=Ot.exclude||[],hr=V.customElements,br=K.head,Mr=br.querySelector("meta[charset]"),Pr=K.createElement("style"),oi=[],Jr=K.querySelectorAll(`[${S}]`);let vi,Ei=!0,zi=0;for(Object.assign(te,Ot),te.$resourcesUrl$=new URL(Ot.resourcesUrl||"./",K.baseURI).href,te.$flags$|=2;zi<Jr.length;zi++)Rr(Jr[zi].getAttribute(S),Tn(Jr[zi].innerHTML),!0);let ns=!1;if(ut.map(Ms=>{Ms[1].map(Ki=>{var Js;const Br={$flags$:Ki[0],$tagName$:Ki[1],$members$:Ki[2],$listeners$:Ki[3]};4&Br.$flags$&&(ns=!0),Br.$members$=Ki[2],Br.$listeners$=Ki[3],Br.$attrsToReflect$=[],Br.$watchers$=null!=(Js=Ki[4])?Js:{};const da=Br.$tagName$,Na=class extends HTMLElement{constructor(uo){if(super(uo),this.hasRegisteredEventListeners=!1,((ut,Ot)=>{const fn={$flags$:0,$hostElement$:ut,$cmpMeta$:Ot,$instanceValues$:new Map};fn.$onInstancePromise$=new Promise(wn=>fn.$onInstanceResolve$=wn),fn.$onReadyPromise$=new Promise(wn=>fn.$onReadyResolve$=wn),ut["s-p"]=[],ut["s-rc"]=[],Z.set(ut,fn)})(uo=this,Br),1&Br.$flags$)if(uo.shadowRoot){if("open"!==uo.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${Br.$tagName$}! Mode is set to ${uo.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else uo.attachShadow({mode:"open",delegatesFocus:!!(16&Br.$flags$)})}connectedCallback(){const uo=M(this);this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0,Bl(this,uo,Br.$listeners$)),vi&&(clearTimeout(vi),vi=null),Ei?oi.push(this):te.jmp(()=>(ut=>{if(!(1&te.$flags$)){const Ot=M(ut),fn=Ot.$cmpMeta$,wn=()=>{};if(1&Ot.$flags$)Bl(ut,Ot,fn.$listeners$),null!=Ot&&Ot.$lazyInstance$?qo(Ot.$lazyInstance$):null!=Ot&&Ot.$onReadyPromise$&&Ot.$onReadyPromise$.then(()=>qo(Ot.$lazyInstance$));else{let Nn;if(Ot.$flags$|=1,Nn=ut.getAttribute(E),Nn){if(1&fn.$flags$){const jn=Fr(ut.shadowRoot,fn,ut.getAttribute("s-mode"));ut.classList.remove(jn+"-h",jn+"-s")}((ut,Ot,fn,wn)=>{const jn=ut.shadowRoot,hr=[],Mr=jn?[]:null,Pr=wn.$vnode$=Qn(Ot,null);te.$orgLocNodes$||gt(K.body,te.$orgLocNodes$=new Map),ut[E]=fn,ut.removeAttribute(E),Pn(Pr,hr,[],Mr,ut,ut,fn),hr.map(oi=>{const Jr=oi.$hostId$+"."+oi.$nodeId$,vi=te.$orgLocNodes$.get(Jr),Ei=oi.$elm$;vi&&""===vi["s-en"]&&vi.parentNode.insertBefore(Ei,vi.nextSibling),jn||(Ei["s-hn"]=Ot,vi&&(Ei["s-ol"]=vi,Ei["s-ol"]["s-nr"]=Ei)),te.$orgLocNodes$.delete(Jr)}),jn&&Mr.map(oi=>{oi&&jn.appendChild(oi)})})(ut,fn.$tagName$,Nn,Ot)}Nn||12&fn.$flags$&&mo(ut);{let jn=ut;for(;jn=jn.parentNode||jn.host;)if(1===jn.nodeType&&jn.hasAttribute("s-id")&&jn["s-p"]||jn["s-p"]){En(Ot,Ot.$ancestorComponent$=jn);break}}fn.$members$&&Object.entries(fn.$members$).map(([jn,[hr]])=>{if(31&hr&&ut.hasOwnProperty(jn)){const br=ut[jn];delete ut[jn],ut[jn]=br}}),ta(ut,Ot,fn)}wn()}})(this))}disconnectedCallback(){te.jmp(()=>To(this))}componentOnReady(){return M(this).$onReadyPromise$}};2&Br.$flags$&&((ut,Ot)=>{Va(ut),Ne(ut),He(ut),Bt(ut),fs(ut),Ht(ut),kn(ut),qs(ut),na(ut,Ot),yt(ut)})(Na.prototype,Br),Br.$lazyBundleId$=Ms[0],!jn.includes(da)&&!hr.get(da)&&(Nn.push(da),hr.define(da,ca(Na,Br,1)))})}),Nn.length>0&&(ns&&(Pr.textContent+=J),Pr.textContent+=Nn.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",Pr.innerHTML.length)){Pr.setAttribute("data-styles","");const Ms=null!=(fn=te.$nonce$)?fn:Wt(K);null!=Ms&&Pr.setAttribute("nonce",Ms),br.insertBefore(Pr,Mr?Mr.nextSibling:br.firstChild)}Ei=!1,oi.length?oi.map(Ms=>Ms.connectedCallback()):te.jmp(()=>vi=setTimeout(co,30))},Bl=(ut,Ot,fn,wn)=>{fn&&fn.map(([Nn,jn,hr])=>{const br=Vo(ut,Nn),Mr=Ro(Ot,hr),Pr=oo(Nn);te.ael(br,jn,Mr,Pr),(Ot.$rmListeners$=Ot.$rmListeners$||[]).push(()=>te.rel(br,jn,Mr,Pr))})},Ro=(ut,Ot)=>fn=>{var wn;try{256&ut.$flags$?null==(wn=ut.$lazyInstance$)||wn[Ot](fn):(ut.$queuedListeners$=ut.$queuedListeners$||[]).push([Ot,fn])}catch(Nn){I(Nn)}},Vo=(ut,Ot)=>4&Ot?K:8&Ot?V:16&Ot?K.body:ut,oo=ut=>Se?{passive:!!(1&ut),capture:!!(2&ut)}:!!(2&ut)},1331:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{b:()=>M,c:()=>C,d:()=>b,e:()=>we,g:()=>ge,l:()=>te,s:()=>Se,t:()=>m,w:()=>Y});var F=Ge(467),j=Ge(4921),Rt=Ge(8393),rn=Ge(4929),l=Ge(4920);const M="ionViewWillLeave",C="ionViewDidLeave",b="ionViewWillUnload",w=re=>{re.tabIndex=-1,re.focus()},I=re=>null!==re.offsetParent,d="ion-last-focus",p_saveViewFocus=fe=>{if(j.c.get("focusManagerPriority",!1)){const it=document.activeElement;null!==it&&null!=fe&&fe.contains(it)&&it.setAttribute(d,"true")}},p_setViewFocus=fe=>{const De=j.c.get("focusManagerPriority",!1);if(Array.isArray(De)&&!fe.contains(document.activeElement)){const it=fe.querySelector(`[${d}]`);if(it&&I(it))return void w(it);for(const le of De)switch(le){case"content":const z=fe.querySelector('main, [role="main"]');if(z&&I(z))return void w(z);break;case"heading":const ye=fe.querySelector('h1, [role="heading"][aria-level="1"]');if(ye&&I(ye))return void w(ye);break;case"banner":const Ue=fe.querySelector('header, [role="banner"]');if(Ue&&I(Ue))return void w(Ue);break;default:(0,rn.p)(`Unrecognized focus manager priority value ${le}`)}w(fe)}},m=re=>new Promise((Q,fe)=>{(0,Rt.w)(()=>{g(re),x(re).then(De=>{De.animation&&De.animation.destroy(),E(re),Q(De)},De=>{E(re),fe(De)})})}),g=re=>{const Q=re.enteringEl,fe=re.leavingEl;p_saveViewFocus(fe),oe(Q,fe,re.direction),re.showGoBack?Q.classList.add("can-go-back"):Q.classList.remove("can-go-back"),Se(Q,!1),Q.style.setProperty("pointer-events","none"),fe&&(Se(fe,!1),fe.style.setProperty("pointer-events","none"))},x=function(){var re=(0,F.A)(function*(Q){const fe=yield S(Q);return fe&&Rt.B.isBrowser?L(fe,Q):q(Q)});return function(fe){return re.apply(this,arguments)}}(),E=re=>{const Q=re.enteringEl,fe=re.leavingEl;Q.classList.remove("ion-page-invisible"),Q.style.removeProperty("pointer-events"),void 0!==fe&&(fe.classList.remove("ion-page-invisible"),fe.style.removeProperty("pointer-events")),p_setViewFocus(Q)},S=function(){var re=(0,F.A)(function*(Q){return Q.leavingEl&&Q.animated&&0!==Q.duration?Q.animationBuilder?Q.animationBuilder:"ios"===Q.mode?(yield Promise.resolve().then(Ge.bind(Ge,9856))).iosTransitionAnimation:(yield Promise.resolve().then(Ge.bind(Ge,361))).mdTransitionAnimation:void 0});return function(fe){return re.apply(this,arguments)}}(),L=function(){var re=(0,F.A)(function*(Q,fe){yield J(fe,!0);const De=Q(fe.baseEl,fe);K(fe.enteringEl,fe.leavingEl);const it=yield V(De,fe);return fe.progressCallback&&fe.progressCallback(void 0),it&&H(fe.enteringEl,fe.leavingEl),{hasCompleted:it,animation:De}});return function(fe,De){return re.apply(this,arguments)}}(),q=function(){var re=(0,F.A)(function*(Q){const fe=Q.enteringEl,De=Q.leavingEl,it=j.c.get("focusManagerPriority",!1);return yield J(Q,it),K(fe,De),H(fe,De),{hasCompleted:!0}});return function(fe){return re.apply(this,arguments)}}(),J=function(){var re=(0,F.A)(function*(Q,fe){(void 0!==Q.deepWait?Q.deepWait:fe)&&(yield Promise.all([we(Q.enteringEl),we(Q.leavingEl)])),yield G(Q.viewIsReady,Q.enteringEl)});return function(fe,De){return re.apply(this,arguments)}}(),G=function(){var re=(0,F.A)(function*(Q,fe){Q&&(yield Q(fe))});return function(fe,De){return re.apply(this,arguments)}}(),V=(re,Q)=>{const fe=Q.progressCallback,De=new Promise(it=>{re.onFinish(le=>it(1===le))});return fe?(re.progressStart(!0),fe(re)):re.play(),De},K=(re,Q)=>{te(Q,M),te(re,"ionViewWillEnter")},H=(re,Q)=>{te(re,"ionViewDidEnter"),te(Q,C)},te=(re,Q)=>{if(re){const fe=new CustomEvent(Q,{bubbles:!1,cancelable:!1});re.dispatchEvent(fe)}},Y=()=>new Promise(re=>(0,l.r)(()=>(0,l.r)(()=>re()))),we=function(){var re=(0,F.A)(function*(Q){const fe=Q;if(fe){if(null!=fe.componentOnReady){if(null!=(yield fe.componentOnReady()))return}else if(null!=fe.__registerHost)return void(yield new Promise(it=>(0,l.r)(it)));yield Promise.all(Array.from(fe.children).map(we))}});return function(fe){return re.apply(this,arguments)}}(),Se=(re,Q)=>{Q?(re.setAttribute("aria-hidden","true"),re.classList.add("ion-page-hidden")):(re.hidden=!1,re.removeAttribute("aria-hidden"),re.classList.remove("ion-page-hidden"))},oe=(re,Q,fe)=>{void 0!==re&&(re.style.zIndex="back"===fe?"99":"101"),void 0!==Q&&(Q.style.zIndex="100")},ge=re=>re.classList.contains("ion-page")?re:re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||re},4929:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{a:()=>j,b:()=>Rt,p:()=>F});const F=(rn,...l)=>console.warn(`[Ionic Warning]: ${rn}`,...l),j=(rn,...l)=>console.error(`[Ionic Error]: ${rn}`,...l),Rt=(rn,...l)=>console.error(`<${rn.tagName.toLowerCase()}> must be used inside ${l.join(" or ")}.`)},8476:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{d:()=>j,w:()=>F});const F=typeof window<"u"?window:void 0,j=typeof document<"u"?document:void 0},617:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{FJ:()=>b.l,JI:()=>F.c,NC:()=>Rt.iosTransitionAnimation,OZ:()=>b.m,QX:()=>M.s,TN:()=>b.a,V5:()=>rn.mdTransitionAnimation,Vk:()=>M.I,mF:()=>b.c,sE:()=>l.g});var F=Ge(9986),Rt=(Ge(1331),Ge(9856)),rn=Ge(361),l=Ge(3351),M=(Ge(8607),Ge(4921),Ge(464)),b=(Ge(6073),Ge(1070));Ge(8476),Ge(8393),Ge(1970),Ge(8669)},4921:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{a:()=>w,b:()=>Se,c:()=>Rt,i:()=>oe});var F=Ge(8393);class j{constructor(){this.m=new Map}reset(re){this.m=new Map(Object.entries(re))}get(re,Q){const fe=this.m.get(re);return void 0!==fe?fe:Q}getBoolean(re,Q=!1){const fe=this.m.get(re);return void 0===fe?Q:"string"==typeof fe?"true"===fe:!!fe}getNumber(re,Q){const fe=parseFloat(this.m.get(re));return isNaN(fe)?void 0!==Q?Q:NaN:fe}set(re,Q){this.m.set(re,Q)}}const Rt=new j,M="ionic:",C="ionic-persist-config",w=(ge,re)=>("string"==typeof ge&&(re=ge,ge=void 0),(ge=>I(ge))(ge).includes(re)),I=(ge=window)=>{if(typeof ge>"u")return[];ge.Ionic=ge.Ionic||{};let re=ge.Ionic.platforms;return null==re&&(re=ge.Ionic.platforms=D(ge),re.forEach(Q=>ge.document.documentElement.classList.add(`plt-${Q}`))),re},D=ge=>{const re=Rt.get("platform");return Object.keys(Y).filter(Q=>{const fe=null==re?void 0:re[Q];return"function"==typeof fe?fe(ge):Y[Q](ge)})},f=ge=>!!(H(ge,/iPad/i)||H(ge,/Macintosh/i)&&S(ge)),m=ge=>H(ge,/android|sink/i),S=ge=>te(ge,"(any-pointer:coarse)"),q=ge=>J(ge)||G(ge),J=ge=>!!(ge.cordova||ge.phonegap||ge.PhoneGap),G=ge=>{const re=ge.Capacitor;return!(null==re||!re.isNative)},H=(ge,re)=>re.test(ge.navigator.userAgent),te=(ge,re)=>{var Q;return null===(Q=ge.matchMedia)||void 0===Q?void 0:Q.call(ge,re).matches},Y={ipad:f,iphone:ge=>H(ge,/iPhone/i),ios:ge=>H(ge,/iPhone|iPod/i)||f(ge),android:m,phablet:ge=>{const re=ge.innerWidth,Q=ge.innerHeight,fe=Math.min(re,Q),De=Math.max(re,Q);return fe>390&&fe<520&&De>620&&De<800},tablet:ge=>{const re=ge.innerWidth,Q=ge.innerHeight,fe=Math.min(re,Q),De=Math.max(re,Q);return f(ge)||(ge=>m(ge)&&!H(ge,/mobile/i))(ge)||fe>460&&fe<820&&De>780&&De<1400},cordova:J,capacitor:G,electron:ge=>H(ge,/electron/i),pwa:ge=>{var re;return!!(null!==(re=ge.matchMedia)&&void 0!==re&&re.call(ge,"(display-mode: standalone)").matches||ge.navigator.standalone)},mobile:S,mobileweb:ge=>S(ge)&&!q(ge),desktop:ge=>!S(ge),hybrid:q};let we;const Se=ge=>ge&&(0,F.g)(ge)||we,oe=(ge={})=>{if(typeof window>"u")return;const re=window.document,Q=window,fe=Q.Ionic=Q.Ionic||{},De={};ge._ael&&(De.ael=ge._ael),ge._rel&&(De.rel=ge._rel),ge._ce&&(De.ce=ge._ce),(0,F.a)(De);const it=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(ge=>{try{const re=ge.sessionStorage.getItem(C);return null!==re?JSON.parse(re):{}}catch{return{}}})(Q)),{persistConfig:!1}),fe.config),(ge=>{const re={};return ge.location.search.slice(1).split("&").map(Q=>Q.split("=")).map(([Q,fe])=>{try{return[decodeURIComponent(Q),decodeURIComponent(fe)]}catch{return["",""]}}).filter(([Q])=>((ge,re)=>ge.substr(0,re.length)===re)(Q,M)).map(([Q,fe])=>[Q.slice(6),fe]).forEach(([Q,fe])=>{re[Q]=fe}),re})(Q)),ge);Rt.reset(it),Rt.getBoolean("persistConfig")&&((ge,re)=>{try{ge.sessionStorage.setItem(C,JSON.stringify(re))}catch{return}})(Q,it),I(Q),fe.config=Rt,fe.mode=we=Rt.get("mode",re.documentElement.getAttribute("mode")||(w(Q,"ios")?"ios":"md")),Rt.set("mode",we),re.documentElement.setAttribute("mode",we),re.documentElement.classList.add(we),Rt.getBoolean("_testing")&&Rt.set("animated",!1);const le=ye=>{var Ue;return null===(Ue=ye.tagName)||void 0===Ue?void 0:Ue.startsWith("ION-")},z=ye=>["ios","md"].includes(ye);(0,F.c)(ye=>{for(;ye;){const Ue=ye.mode||ye.getAttribute("mode");if(Ue){if(z(Ue))return Ue;le(ye)&&console.warn('Invalid ionic mode: "'+Ue+'", expected: "ios" or "md"')}ye=ye.parentElement}return we})}},9856:(Ir,Un,Ge)=>{"use strict";Ge.r(Un),Ge.d(Un,{iosTransitionAnimation:()=>d,shadow:()=>M});var F=Ge(9986),j=Ge(1331);Ge(8476),Ge(4921),Ge(8393);const Z=h=>document.querySelector(`${h}.ion-cloned-element`),M=h=>h.shadowRoot||h,C=h=>{const p="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs"),m="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=p){const g=p.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=g?g.querySelector(m):null}return h.querySelector(m)},b=(h,p)=>{const m="ION-TABS"===h.tagName?h:h.querySelector("ion-tabs");let g=[];if(null!=m){const x=m.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=x&&(g=x.querySelectorAll("ion-buttons"))}else g=h.querySelectorAll("ion-buttons");for(const x of g){const E=x.closest("ion-header"),S=E&&!E.classList.contains("header-collapse-condense-inactive"),L=x.querySelector("ion-back-button"),q=x.classList.contains("buttons-collapse");if(null!==L&&("start"===x.slot||""===x.slot)&&(q&&S&&p||!q))return L}return null},I=(h,p,m,g,x,E,S,L,q)=>{var J,G;const V=p?`calc(100% - ${x.right+4}px)`:x.left-4+"px",K=p?"right":"left",H=p?"left":"right",te=p?"right":"left";let Y=1,we=1,Se=`scale(${we})`;const oe="scale(1)";if(E&&S){const Tt=(null===(J=E.textContent)||void 0===J?void 0:J.trim())===(null===(G=L.textContent)||void 0===G?void 0:G.trim());Y=q.width/S.width,we=(q.height-f)/S.height,Se=Tt?`scale(${Y}, ${we})`:`scale(${we})`}const re=M(g).querySelector("ion-icon").getBoundingClientRect(),Q=p?re.width/2-(re.right-x.right)+"px":x.left-re.width/2+"px",fe=p?`-${window.innerWidth-x.right}px`:`${x.left}px`,De=`${q.top}px`,it=`${x.top}px`,ye=m?[{offset:0,transform:`translate3d(${fe}, ${it}, 0)`},{offset:1,transform:`translate3d(${Q}, ${De}, 0)`}]:[{offset:0,transform:`translate3d(${Q}, ${De}, 0)`},{offset:1,transform:`translate3d(${fe}, ${it}, 0)`}],vt=m?[{offset:0,opacity:1,transform:oe},{offset:1,opacity:0,transform:Se}]:[{offset:0,opacity:0,transform:Se},{offset:1,opacity:1,transform:oe}],_t=m?[{offset:0,opacity:1,transform:"scale(1)"},{offset:.2,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:0,transform:"scale(0.6)"}]:[{offset:0,opacity:0,transform:"scale(0.6)"},{offset:.6,opacity:0,transform:"scale(0.6)"},{offset:1,opacity:1,transform:"scale(1)"}],Ft=(0,F.c)(),Wt=(0,F.c)(),mt=(0,F.c)(),Nt=Z("ion-back-button"),kt=M(Nt).querySelector(".button-text"),Ut=M(Nt).querySelector("ion-icon");Nt.text=g.text,Nt.mode=g.mode,Nt.icon=g.icon,Nt.color=g.color,Nt.disabled=g.disabled,Nt.style.setProperty("display","block"),Nt.style.setProperty("position","fixed"),Wt.addElement(Ut),Ft.addElement(kt),mt.addElement(Nt),mt.beforeStyles({position:"absolute",top:"0px",[te]:"0px"}).beforeAddWrite(()=>{g.style.setProperty("display","none"),Nt.style.setProperty(K,V)}).afterAddWrite(()=>{g.style.setProperty("display",""),Nt.style.setProperty("display","none"),Nt.style.removeProperty(K)}).keyframes(ye),Ft.beforeStyles({"transform-origin":`${K} top`}).keyframes(vt),Wt.beforeStyles({"transform-origin":`${H} center`}).keyframes(_t),h.addAnimation([Ft,Wt,mt])},D=(h,p,m,g,x,E,S,L,q)=>{var J,G;const V=p?"right":"left",K=p?`calc(100% - ${x.right}px)`:`${x.left}px`,te=`${x.top}px`;let we=p?`-${window.innerWidth-S.right-8}px`:`${S.x+8}px`,Se=.5;const oe="scale(1)";let ge=`scale(${Se})`;if(L&&q){we=p?`-${window.innerWidth-q.right-8}px`:q.x-8+"px";const Ue=(null===(J=L.textContent)||void 0===J?void 0:J.trim())===(null===(G=g.textContent)||void 0===G?void 0:G.trim());Se=q.height/(E.height-f),ge=Ue?`scale(${q.width/E.width}, ${Se})`:`scale(${Se})`}const fe=S.top+S.height/2-x.height*Se/2+"px",le=m?[{offset:0,opacity:0,transform:`translate3d(${we}, ${fe}, 0) ${ge}`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0px, ${te}, 0) ${oe}`}]:[{offset:0,opacity:.99,transform:`translate3d(0px, ${te}, 0) ${oe}`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${we}, ${fe}, 0) ${ge}`}],z=Z("ion-title"),ye=(0,F.c)();z.innerText=g.innerText,z.size=g.size,z.color=g.color,ye.addElement(z),ye.beforeStyles({"transform-origin":`${V} top`,height:`${x.height}px`,display:"",position:"relative",[V]:K}).beforeAddWrite(()=>{g.style.setProperty("opacity","0")}).afterAddWrite(()=>{g.style.setProperty("opacity",""),z.style.setProperty("display","none")}).keyframes(le),h.addAnimation(ye)},d=(h,p)=>{var m;try{const g="cubic-bezier(0.32,0.72,0,1)",x="opacity",E="transform",S="0%",q="rtl"===h.ownerDocument.dir,J=q?"-99.5%":"99.5%",G=q?"33%":"-33%",V=p.enteringEl,K=p.leavingEl,H="back"===p.direction,te=V.querySelector(":scope > ion-content"),Y=V.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),we=V.querySelectorAll(":scope > ion-header > ion-toolbar"),Se=(0,F.c)(),oe=(0,F.c)();if(Se.addElement(V).duration((null!==(m=p.duration)&&void 0!==m?m:0)||540).easing(p.easing||g).fill("both").beforeRemoveClass("ion-page-invisible"),K&&null!=h){const fe=(0,F.c)();fe.addElement(h),Se.addAnimation(fe)}if(te||0!==we.length||0!==Y.length?(oe.addElement(te),oe.addElement(Y)):oe.addElement(V.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(oe),H?oe.beforeClearStyles([x]).fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.8,1):oe.beforeClearStyles([x]).fromTo("transform",`translateX(${J})`,`translateX(${S})`),te){const fe=M(te).querySelector(".transition-effect");if(fe){const De=fe.querySelector(".transition-cover"),it=fe.querySelector(".transition-shadow"),le=(0,F.c)(),z=(0,F.c)(),ye=(0,F.c)();le.addElement(fe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),z.addElement(De).beforeClearStyles([x]).fromTo(x,0,.1),ye.addElement(it).beforeClearStyles([x]).fromTo(x,.03,.7),le.addAnimation([z,ye]),oe.addAnimation([le])}}const ge=V.querySelector("ion-header.header-collapse-condense"),{forward:re,backward:Q}=((h,p,m,g,x)=>{const E=b(g,m),S=C(x),L=C(g),q=b(x,m),J=null!==E&&null!==S&&!m,G=null!==L&&null!==q&&m;if(J){const V=S.getBoundingClientRect(),K=E.getBoundingClientRect(),H=M(E).querySelector(".button-text"),te=null==H?void 0:H.getBoundingClientRect(),we=M(S).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,S,V,we,K,H,te),I(h,p,m,E,K,H,te,S,we)}else if(G){const V=L.getBoundingClientRect(),K=q.getBoundingClientRect(),H=M(q).querySelector(".button-text"),te=null==H?void 0:H.getBoundingClientRect(),we=M(L).querySelector(".toolbar-title").getBoundingClientRect();D(h,p,m,L,V,we,K,H,te),I(h,p,m,q,K,H,te,L,we)}return{forward:J,backward:G}})(Se,q,H,V,K);if(we.forEach(fe=>{const De=(0,F.c)();De.addElement(fe),Se.addAnimation(De);const it=(0,F.c)();it.addElement(fe.querySelector("ion-title"));const le=(0,F.c)(),z=Array.from(fe.querySelectorAll("ion-buttons,[menuToggle]")),ye=fe.closest("ion-header"),Ue=null==ye?void 0:ye.classList.contains("header-collapse-condense-inactive");let Je;Je=z.filter(H?Ft=>{const Wt=Ft.classList.contains("buttons-collapse");return Wt&&!Ue||!Wt}:Ft=>!Ft.classList.contains("buttons-collapse")),le.addElement(Je);const vt=(0,F.c)();vt.addElement(fe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Ct=(0,F.c)();Ct.addElement(M(fe).querySelector(".toolbar-background"));const zt=(0,F.c)(),_t=fe.querySelector("ion-back-button");if(_t&&zt.addElement(_t),De.addAnimation([it,le,vt,Ct,zt]),le.fromTo(x,.01,1),vt.fromTo(x,.01,1),H)Ue||it.fromTo("transform",`translateX(${G})`,`translateX(${S})`).fromTo(x,.01,1),vt.fromTo("transform",`translateX(${G})`,`translateX(${S})`),zt.fromTo(x,.01,1);else if(ge||it.fromTo("transform",`translateX(${J})`,`translateX(${S})`).fromTo(x,.01,1),vt.fromTo("transform",`translateX(${J})`,`translateX(${S})`),Ct.beforeClearStyles([x,"transform"]),(null==ye?void 0:ye.translucent)?Ct.fromTo("transform",q?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Ct.fromTo(x,.01,"var(--opacity)"),re||zt.fromTo(x,.01,1),_t&&!re){const Wt=(0,F.c)();Wt.addElement(M(_t).querySelector(".button-text")).fromTo("transform",q?"translateX(-100px)":"translateX(100px)","translateX(0px)"),De.addAnimation(Wt)}}),K){const fe=(0,F.c)(),De=K.querySelector(":scope > ion-content"),it=K.querySelectorAll(":scope > ion-header > ion-toolbar"),le=K.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(De||0!==it.length||0!==le.length?(fe.addElement(De),fe.addElement(le)):fe.addElement(K.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(fe),H){fe.beforeClearStyles([x]).fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)");const z=(0,j.g)(K);Se.afterAddWrite(()=>{"normal"===Se.getDirection()&&z.style.setProperty("display","none")})}else fe.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,1,.8);if(De){const z=M(De).querySelector(".transition-effect");if(z){const ye=z.querySelector(".transition-cover"),Ue=z.querySelector(".transition-shadow"),Je=(0,F.c)(),vt=(0,F.c)(),Ct=(0,F.c)();Je.addElement(z).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),vt.addElement(ye).beforeClearStyles([x]).fromTo(x,.1,0),Ct.addElement(Ue).beforeClearStyles([x]).fromTo(x,.7,.03),Je.addAnimation([vt,Ct]),fe.addAnimation([Je])}}it.forEach(z=>{const ye=(0,F.c)();ye.addElement(z);const Ue=(0,F.c)();Ue.addElement(z.querySelector("ion-title"));const Je=(0,F.c)(),vt=z.querySelectorAll("ion-buttons,[menuToggle]"),Ct=z.closest("ion-header"),zt=null==Ct?void 0:Ct.classList.contains("header-collapse-condense-inactive"),_t=Array.from(vt).filter(Ut=>{const Tt=Ut.classList.contains("buttons-collapse");return Tt&&!zt||!Tt});Je.addElement(_t);const Ft=(0,F.c)(),Wt=z.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Wt.length>0&&Ft.addElement(Wt);const mt=(0,F.c)();mt.addElement(M(z).querySelector(".toolbar-background"));const Nt=(0,F.c)(),kt=z.querySelector("ion-back-button");if(kt&&Nt.addElement(kt),ye.addAnimation([Ue,Je,Ft,Nt,mt]),Se.addAnimation(ye),Nt.fromTo(x,.99,0),Je.fromTo(x,.99,0),Ft.fromTo(x,.99,0),H){if(zt||Ue.fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)").fromTo(x,.99,0),Ft.fromTo("transform",`translateX(${S})`,q?"translateX(-100%)":"translateX(100%)"),mt.beforeClearStyles([x,"transform"]),(null==Ct?void 0:Ct.translucent)?mt.fromTo("transform","translateX(0px)",q?"translateX(-100%)":"translateX(100%)"):mt.fromTo(x,"var(--opacity)",0),kt&&!Q){const Tt=(0,F.c)();Tt.addElement(M(kt).querySelector(".button-text")).fromTo("transform",`translateX(${S})`,`translateX(${(q?-124:124)+"px"})`),ye.addAnimation(Tt)}}else zt||Ue.fromTo("transform",`translateX(${S})`,`translateX(${G})`).fromTo(x,.99,0).afterClearStyles([E,x]),Ft.fromTo("transform",`translateX(${S})`,`translateX(${G})`).afterClearStyles([E,x]),Nt.afterClearStyles([x]),Ue.afterClearStyles([x]),Je.afterClearStyles([x])})}return Se}catch(g){throw g}},f=10},361:(Ir,Un,Ge)=>{"use strict";Ge.r(Un),Ge.d(Un,{mdTransitionAnimation:()=>be});var F=Ge(9986),j=Ge(1331);Ge(8476),Ge(4921),Ge(8393);const be=(Z,M)=>{var C,b,w;const I="40px",d="back"===M.direction,h=M.leavingEl,p=(0,j.g)(M.enteringEl),m=p.querySelector("ion-toolbar"),g=(0,F.c)();if(g.addElement(p).fill("both").beforeRemoveClass("ion-page-invisible"),d?g.duration((null!==(C=M.duration)&&void 0!==C?C:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):g.duration((null!==(b=M.duration)&&void 0!==b?b:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform",`translateY(${I})`,"translateY(0px)").fromTo("opacity",.01,1),m){const x=(0,F.c)();x.addElement(m),g.addAnimation(x)}if(h&&d){g.duration((null!==(w=M.duration)&&void 0!==w?w:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const x=(0,F.c)();x.addElement((0,j.g)(h)).onFinish(E=>{1===E&&x.elements.length>0&&x.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)",`translateY(${I})`).fromTo("opacity",1,0),g.addAnimation(x)}return g}},1070:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B:()=>vt,F:()=>Nt,G:()=>Ct,O:()=>zt,a:()=>p,b:()=>m,c:()=>S,d:()=>_t,e:()=>Ft,f:()=>re,g:()=>fe,h:()=>le,i:()=>ye,j:()=>q,k:()=>J,l:()=>g,m:()=>x,n:()=>b,o:()=>oe,q:()=>w,s:()=>Je});var F=Ge(467),j=Ge(8476),Rt=Ge(4920),rn=Ge(8669),l=Ge(4921),be=Ge(8621),Z=Ge(1970),M=Ge(4929);const C='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',b=(kt,Ut)=>{const Tt=kt.querySelector(C);I(Tt,null!=Ut?Ut:kt)},w=(kt,Ut)=>{const Tt=Array.from(kt.querySelectorAll(C));I(Tt.length>0?Tt[Tt.length-1]:null,null!=Ut?Ut:kt)},I=(kt,Ut)=>{let Tt=kt;const qt=null==kt?void 0:kt.shadowRoot;qt&&(Tt=qt.querySelector(C)||kt),Tt?(0,Rt.f)(Tt):Ut.focus()};let D=0,d=0;const f=new WeakMap,h=kt=>({create:Ut=>G(kt,Ut),dismiss:(Ut,Tt,qt)=>Y(document,Ut,Tt,kt,qt),getTop:()=>(0,F.A)(function*(){return oe(document,kt)})()}),p=h("ion-alert"),m=h("ion-action-sheet"),g=h("ion-loading"),x=h("ion-modal"),S=h("ion-popover"),q=kt=>{typeof document<"u"&&te(document);const Ut=D++;kt.overlayIndex=Ut},J=kt=>(kt.hasAttribute("id")||(kt.id="ion-overlay-"+ ++d),kt.id),G=(kt,Ut)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(kt).then(()=>{const Tt=document.createElement(kt);return Tt.classList.add("overlay-hidden"),Object.assign(Tt,Object.assign(Object.assign({},Ut),{hasController:!0})),De(document).appendChild(Tt),new Promise(qt=>(0,Rt.c)(Tt,qt))}):Promise.resolve(),K=(kt,Ut)=>{let Tt=kt;const qt=null==kt?void 0:kt.shadowRoot;qt&&(Tt=qt.querySelector(C)||kt),Tt?(0,Rt.f)(Tt):Ut.focus()},te=kt=>{0===D&&(D=1,kt.addEventListener("focus",Ut=>{((kt,Ut)=>{const Tt=oe(Ut,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover"),qt=kt.target;Tt&&qt&&!Tt.classList.contains(Nt)&&(Tt.shadowRoot?(()=>{if(Tt.contains(qt))Tt.lastFocus=qt;else if("ION-TOAST"===qt.tagName)K(Tt.lastFocus,Tt);else{const An=Tt.lastFocus;b(Tt),An===Ut.activeElement&&w(Tt),Tt.lastFocus=Ut.activeElement}})():(()=>{if(Tt===qt)Tt.lastFocus=void 0;else if("ION-TOAST"===qt.tagName)K(Tt.lastFocus,Tt);else{const An=(0,Rt.g)(Tt);if(!An.contains(qt))return;const Qn=An.querySelector(".ion-overlay-wrapper");if(!Qn)return;if(Qn.contains(qt)||qt===An.querySelector("ion-backdrop"))Tt.lastFocus=qt;else{const Rn=Tt.lastFocus;b(Qn,Tt),Rn===Ut.activeElement&&w(Qn,Tt),Tt.lastFocus=Ut.activeElement}}})())})(Ut,kt)},!0),kt.addEventListener("ionBackButton",Ut=>{const Tt=oe(kt);null!=Tt&&Tt.backdropDismiss&&Ut.detail.register(rn.OVERLAY_BACK_BUTTON_PRIORITY,()=>{Tt.dismiss(void 0,vt)})}),(0,rn.shouldUseCloseWatcher)()||kt.addEventListener("keydown",Ut=>{if("Escape"===Ut.key){const Tt=oe(kt);null!=Tt&&Tt.backdropDismiss&&Tt.dismiss(void 0,vt)}}))},Y=(kt,Ut,Tt,qt,mn)=>{const Zn=oe(kt,qt,mn);return Zn?Zn.dismiss(Ut,Tt):Promise.reject("overlay does not exist")},Se=(kt,Ut)=>((kt,Ut)=>(void 0===Ut&&(Ut="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker-legacy,ion-popover,ion-toast"),Array.from(kt.querySelectorAll(Ut)).filter(Tt=>Tt.overlayIndex>0)))(kt,Ut).filter(Tt=>!(kt=>kt.classList.contains("overlay-hidden"))(Tt)),oe=(kt,Ut,Tt)=>{const qt=Se(kt,Ut);return void 0===Tt?qt[qt.length-1]:qt.find(mn=>mn.id===Tt)},ge=(kt=!1)=>{const Tt=De(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Tt&&(kt?Tt.setAttribute("aria-hidden","true"):Tt.removeAttribute("aria-hidden"))},re=function(){var kt=(0,F.A)(function*(Ut,Tt,qt,mn,Zn){var An,Qn;if(Ut.presented)return;ge(!0),document.body.classList.add(Z.B),Wt(Ut.el),Ut.presented=!0,Ut.willPresent.emit(),null===(An=Ut.willPresentShorthand)||void 0===An||An.emit();const Rn=(0,l.b)(Ut),Er=Ut.enterAnimation?Ut.enterAnimation:l.c.get(Tt,"ios"===Rn?qt:mn);(yield it(Ut,Er,Ut.el,Zn))&&(Ut.didPresent.emit(),null===(Qn=Ut.didPresentShorthand)||void 0===Qn||Qn.emit()),"ION-TOAST"!==Ut.el.tagName&&Q(Ut.el),Ut.keyboardClose&&(null===document.activeElement||!Ut.el.contains(document.activeElement))&&Ut.el.focus(),Ut.el.removeAttribute("aria-hidden")});return function(Tt,qt,mn,Zn,An){return kt.apply(this,arguments)}}(),Q=function(){var kt=(0,F.A)(function*(Ut){let Tt=document.activeElement;if(!Tt)return;const qt=null==Tt?void 0:Tt.shadowRoot;qt&&(Tt=qt.querySelector(C)||Tt),yield Ut.onDidDismiss(),(null===document.activeElement||document.activeElement===document.body)&&Tt.focus()});return function(Tt){return kt.apply(this,arguments)}}(),fe=function(){var kt=(0,F.A)(function*(Ut,Tt,qt,mn,Zn,An,Qn){var Rn,Er;if(!Ut.presented)return!1;void 0!==j.d&&1===Se(j.d).length&&(ge(!1),document.body.classList.remove(Z.B)),Ut.presented=!1;try{Ut.el.style.setProperty("pointer-events","none"),Ut.willDismiss.emit({data:Tt,role:qt}),null===(Rn=Ut.willDismissShorthand)||void 0===Rn||Rn.emit({data:Tt,role:qt});const ur=(0,l.b)(Ut),vn=Ut.leaveAnimation?Ut.leaveAnimation:l.c.get(mn,"ios"===ur?Zn:An);qt!==Ct&&(yield it(Ut,vn,Ut.el,Qn)),Ut.didDismiss.emit({data:Tt,role:qt}),null===(Er=Ut.didDismissShorthand)||void 0===Er||Er.emit({data:Tt,role:qt}),(f.get(Ut)||[]).forEach(Pn=>Pn.destroy()),f.delete(Ut),Ut.el.classList.add("overlay-hidden"),Ut.el.style.removeProperty("pointer-events"),void 0!==Ut.el.lastFocus&&(Ut.el.lastFocus=void 0)}catch(ur){console.error(ur)}return Ut.el.remove(),mt(),!0});return function(Tt,qt,mn,Zn,An,Qn,Rn){return kt.apply(this,arguments)}}(),De=kt=>kt.querySelector("ion-app")||kt.body,it=function(){var kt=(0,F.A)(function*(Ut,Tt,qt,mn){qt.classList.remove("overlay-hidden");const An=Tt(Ut.el,mn);(!Ut.animated||!l.c.getBoolean("animated",!0))&&An.duration(0),Ut.keyboardClose&&An.beforeAddWrite(()=>{const Rn=qt.ownerDocument.activeElement;null!=Rn&&Rn.matches("input,ion-input, ion-textarea")&&Rn.blur()});const Qn=f.get(Ut)||[];return f.set(Ut,[...Qn,An]),yield An.play(),!0});return function(Tt,qt,mn,Zn){return kt.apply(this,arguments)}}(),le=(kt,Ut)=>{let Tt;const qt=new Promise(mn=>Tt=mn);return z(kt,Ut,mn=>{Tt(mn.detail)}),qt},z=(kt,Ut,Tt)=>{const qt=mn=>{(0,Rt.b)(kt,Ut,qt),Tt(mn)};(0,Rt.a)(kt,Ut,qt)},ye=kt=>"cancel"===kt||kt===vt,Ue=kt=>kt(),Je=(kt,Ut)=>{if("function"==typeof kt)return l.c.get("_zoneGate",Ue)(()=>{try{return kt(Ut)}catch(qt){throw qt}})},vt="backdrop",Ct="gesture",zt=39,_t=kt=>{let Tt,Ut=!1;const qt=(0,be.C)(),mn=(Qn=!1)=>{if(Tt&&!Qn)return{delegate:Tt,inline:Ut};const{el:Rn,hasController:Er,delegate:Bn}=kt;return Ut=null!==Rn.parentNode&&!Er,Tt=Ut?Bn||qt:Bn,{inline:Ut,delegate:Tt}};return{attachViewToDom:function(){var Qn=(0,F.A)(function*(Rn){const{delegate:Er}=mn(!0);if(Er)return yield Er.attachViewToDom(kt.el,Rn);const{hasController:Bn}=kt;if(Bn&&void 0!==Rn)throw new Error("framework delegate is missing");return null});return function(Er){return Qn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Qn}=mn();Qn&&void 0!==kt.el&&Qn.removeViewFromDom(kt.el.parentElement,kt.el)}}},Ft=()=>{let kt;const Ut=()=>{kt&&(kt(),kt=void 0)};return{addClickListener:(qt,mn)=>{Ut();const Zn=void 0!==mn?document.getElementById(mn):null;Zn?kt=((Qn,Rn)=>{const Er=()=>{Rn.present()};return Qn.addEventListener("click",Er),()=>{Qn.removeEventListener("click",Er)}})(Zn,qt):(0,M.p)(`A trigger element with the ID "${mn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,qt)},removeClickListener:Ut}},Wt=kt=>{var Ut;if(void 0===j.d)return;const Tt=Se(j.d);for(let qt=Tt.length-1;qt>=0;qt--){const mn=Tt[qt],Zn=null!==(Ut=Tt[qt+1])&&void 0!==Ut?Ut:kt;(Zn.hasAttribute("aria-hidden")||"ION-TOAST"!==Zn.tagName)&&mn.setAttribute("aria-hidden","true")}},mt=()=>{if(void 0===j.d)return;const kt=Se(j.d);for(let Ut=kt.length-1;Ut>=0;Ut--){const Tt=kt[Ut];if(Tt.removeAttribute("aria-hidden"),"ION-TOAST"!==Tt.tagName)break}},Nt="ion-disable-focus-trap"},1288:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{H:()=>m,b:()=>Zn,c:()=>S,f:()=>_t,g:()=>E,h:()=>h,p:()=>Cr,r:()=>er});var F=Ge(467);let Rt,rn,l=!1,be=!1;const b={},d=Xt=>"object"==(Xt=typeof Xt)||"function"===Xt;function f(Xt){var hn,Fn,Cn;return null!==(Cn=null===(Fn=null===(hn=Xt.head)||void 0===hn?void 0:hn.querySelector('meta[name="csp-nonce"]'))||void 0===Fn?void 0:Fn.getAttribute("content"))&&void 0!==Cn?Cn:void 0}const h=(Xt,hn,...Fn)=>{let Cn=null,Wn=!1,yr=!1;const fr=[],Ur=ei=>{for(let ne=0;ne<ei.length;ne++)Cn=ei[ne],Array.isArray(Cn)?Ur(Cn):null!=Cn&&"boolean"!=typeof Cn&&((Wn="function"!=typeof Xt&&!d(Cn))&&(Cn=String(Cn)),Wn&&yr?fr[fr.length-1].$text$+=Cn:fr.push(Wn?p(null,Cn):Cn),yr=Wn)};if(Ur(Fn),hn){const ei=hn.className||hn.class;ei&&(hn.class="object"!=typeof ei?ei:Object.keys(ei).filter(ne=>ei[ne]).join(" "))}const vr=p(Xt,null);return vr.$attrs$=hn,fr.length>0&&(vr.$children$=fr),vr},p=(Xt,hn)=>({$flags$:0,$tag$:Xt,$text$:hn,$elm$:null,$children$:null,$attrs$:null}),m={},E=Xt=>vn(Xt).$hostElement$,S=(Xt,hn,Fn)=>{const Cn=E(Xt);return{emit:Wn=>L(Cn,hn,{bubbles:!!(4&Fn),composed:!!(2&Fn),cancelable:!!(1&Fn),detail:Wn})}},L=(Xt,hn,Fn)=>{const Cn=sr.ce(hn,Fn);return Xt.dispatchEvent(Cn),Cn},q=new WeakMap,K=(Xt,hn)=>"sc-"+Xt.$tagName$,H=(Xt,hn,Fn,Cn,Wn,yr)=>{if(Fn!==Cn){let fr=gt(Xt,hn),Ur=hn.toLowerCase();if("class"===hn){const vr=Xt.classList,ei=Y(Fn),ne=Y(Cn);vr.remove(...ei.filter(Pe=>Pe&&!ne.includes(Pe))),vr.add(...ne.filter(Pe=>Pe&&!ei.includes(Pe)))}else if("style"===hn){for(const vr in Fn)(!Cn||null==Cn[vr])&&(vr.includes("-")?Xt.style.removeProperty(vr):Xt.style[vr]="");for(const vr in Cn)(!Fn||Cn[vr]!==Fn[vr])&&(vr.includes("-")?Xt.style.setProperty(vr,Cn[vr]):Xt.style[vr]=Cn[vr])}else if("ref"===hn)Cn&&Cn(Xt);else if(fr||"o"!==hn[0]||"n"!==hn[1]){const vr=d(Cn);if((fr||vr&&null!==Cn)&&!Wn)try{if(Xt.tagName.includes("-"))Xt[hn]=Cn;else{const ei=null==Cn?"":Cn;"list"===hn?fr=!1:(null==Fn||Xt[hn]!=ei)&&(Xt[hn]=ei)}}catch{}null==Cn||!1===Cn?(!1!==Cn||""===Xt.getAttribute(hn))&&Xt.removeAttribute(hn):(!fr||4&yr||Wn)&&!vr&&Xt.setAttribute(hn,Cn=!0===Cn?"":Cn)}else hn="-"===hn[2]?hn.slice(3):gt(On,Ur)?Ur.slice(2):Ur[2]+hn.slice(3),Fn&&sr.rel(Xt,hn,Fn,!1),Cn&&sr.ael(Xt,hn,Cn,!1)}},te=/\s/,Y=Xt=>Xt?Xt.split(te):[],we=(Xt,hn,Fn,Cn)=>{const Wn=11===hn.$elm$.nodeType&&hn.$elm$.host?hn.$elm$.host:hn.$elm$,yr=Xt&&Xt.$attrs$||b,fr=hn.$attrs$||b;for(Cn in yr)Cn in fr||H(Wn,Cn,yr[Cn],void 0,Fn,hn.$flags$);for(Cn in fr)H(Wn,Cn,yr[Cn],fr[Cn],Fn,hn.$flags$)},Se=(Xt,hn,Fn,Cn)=>{const Wn=hn.$children$[Fn];let fr,Ur,yr=0;if(null!==Wn.$text$)fr=Wn.$elm$=$n.createTextNode(Wn.$text$);else{if(l||(l="svg"===Wn.$tag$),fr=Wn.$elm$=$n.createElementNS(l?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Wn.$tag$),l&&"foreignObject"===Wn.$tag$&&(l=!1),we(null,Wn,l),(Xt=>null!=Xt)(Rt)&&fr["s-si"]!==Rt&&fr.classList.add(fr["s-si"]=Rt),Wn.$children$)for(yr=0;yr<Wn.$children$.length;++yr)Ur=Se(Xt,Wn,yr),Ur&&fr.appendChild(Ur);"svg"===Wn.$tag$?l=!1:"foreignObject"===fr.tagName&&(l=!0)}return fr},oe=(Xt,hn,Fn,Cn,Wn,yr)=>{let Ur,fr=Xt;for(fr.shadowRoot&&fr.tagName===rn&&(fr=fr.shadowRoot);Wn<=yr;++Wn)Cn[Wn]&&(Ur=Se(null,Fn,Wn),Ur&&(Cn[Wn].$elm$=Ur,fr.insertBefore(Ur,hn)))},ge=(Xt,hn,Fn)=>{for(let Cn=hn;Cn<=Fn;++Cn){const Wn=Xt[Cn];if(Wn){const yr=Wn.$elm$;De(Wn),yr&&yr.remove()}}},Q=(Xt,hn)=>Xt.$tag$===hn.$tag$,fe=(Xt,hn)=>{const Fn=hn.$elm$=Xt.$elm$,Cn=Xt.$children$,Wn=hn.$children$,yr=hn.$tag$,fr=hn.$text$;null===fr?(l="svg"===yr||"foreignObject"!==yr&&l,we(Xt,hn,l),null!==Cn&&null!==Wn?((Xt,hn,Fn,Cn)=>{let Qe,Wn=0,yr=0,fr=hn.length-1,Ur=hn[0],vr=hn[fr],ei=Cn.length-1,ne=Cn[0],Pe=Cn[ei];for(;Wn<=fr&&yr<=ei;)null==Ur?Ur=hn[++Wn]:null==vr?vr=hn[--fr]:null==ne?ne=Cn[++yr]:null==Pe?Pe=Cn[--ei]:Q(Ur,ne)?(fe(Ur,ne),Ur=hn[++Wn],ne=Cn[++yr]):Q(vr,Pe)?(fe(vr,Pe),vr=hn[--fr],Pe=Cn[--ei]):Q(Ur,Pe)?(fe(Ur,Pe),Xt.insertBefore(Ur.$elm$,vr.$elm$.nextSibling),Ur=hn[++Wn],Pe=Cn[--ei]):Q(vr,ne)?(fe(vr,ne),Xt.insertBefore(vr.$elm$,Ur.$elm$),vr=hn[--fr],ne=Cn[++yr]):(Qe=Se(hn&&hn[yr],Fn,yr),ne=Cn[++yr],Qe&&Ur.$elm$.parentNode.insertBefore(Qe,Ur.$elm$));Wn>fr?oe(Xt,null==Cn[ei+1]?null:Cn[ei+1].$elm$,Fn,Cn,yr,ei):yr>ei&&ge(hn,Wn,fr)})(Fn,Cn,hn,Wn):null!==Wn?(null!==Xt.$text$&&(Fn.textContent=""),oe(Fn,null,hn,Wn,0,Wn.length-1)):null!==Cn&&ge(Cn,0,Cn.length-1),l&&"svg"===yr&&(l=!1)):Xt.$text$!==fr&&(Fn.data=fr)},De=Xt=>{Xt.$attrs$&&Xt.$attrs$.ref&&Xt.$attrs$.ref(null),Xt.$children$&&Xt.$children$.map(De)},le=(Xt,hn)=>{hn&&!Xt.$onRenderResolve$&&hn["s-p"]&&hn["s-p"].push(new Promise(Fn=>Xt.$onRenderResolve$=Fn))},z=(Xt,hn)=>{if(Xt.$flags$|=16,!(4&Xt.$flags$))return le(Xt,Xt.$ancestorComponent$),tr(()=>ye(Xt,hn));Xt.$flags$|=512},ye=(Xt,hn)=>{const Cn=Xt.$lazyInstance$;return hn&&(Xt.$flags$|=256,Xt.$queuedListeners$&&(Xt.$queuedListeners$.map(([yr,fr])=>Wt(Cn,yr,fr)),Xt.$queuedListeners$=void 0)),Ue(void 0,()=>vt(Xt,Cn,hn))},Ue=(Xt,hn)=>Je(Xt)?Xt.then(hn):hn(),Je=Xt=>Xt instanceof Promise||Xt&&Xt.then&&"function"==typeof Xt.then,vt=function(){var Xt=(0,F.A)(function*(hn,Fn,Cn){var Wn;const yr=hn.$hostElement$,Ur=yr["s-rc"];Cn&&(Xt=>{const hn=Xt.$cmpMeta$,Fn=Xt.$hostElement$,Cn=hn.$flags$,yr=((Xt,hn,Fn,Cn)=>{var Wn;let yr=K(hn);const fr=gn.get(yr);if(Xt=11===Xt.nodeType?Xt:$n,fr)if("string"==typeof fr){let vr,Ur=q.get(Xt=Xt.head||Xt);if(Ur||q.set(Xt,Ur=new Set),!Ur.has(yr)){{vr=$n.createElement("style"),vr.innerHTML=fr;const ei=null!==(Wn=sr.$nonce$)&&void 0!==Wn?Wn:f($n);null!=ei&&vr.setAttribute("nonce",ei),Xt.insertBefore(vr,Xt.querySelector("link"))}Ur&&Ur.add(yr)}}else Xt.adoptedStyleSheets.includes(fr)||(Xt.adoptedStyleSheets=[...Xt.adoptedStyleSheets,fr]);return yr})(Fn.shadowRoot?Fn.shadowRoot:Fn.getRootNode(),hn);10&Cn&&(Fn["s-sc"]=yr,Fn.classList.add(yr+"-h"))})(hn);Ct(hn,Fn),Ur&&(Ur.map(ei=>ei()),yr["s-rc"]=void 0);{const ei=null!==(Wn=yr["s-p"])&&void 0!==Wn?Wn:[],ne=()=>zt(hn);0===ei.length?ne():(Promise.all(ei).then(ne),hn.$flags$|=4,ei.length=0)}});return function(Fn,Cn,Wn){return Xt.apply(this,arguments)}}(),Ct=(Xt,hn,Fn)=>{try{hn=hn.render(),Xt.$flags$&=-17,Xt.$flags$|=2,((Xt,hn)=>{const Fn=Xt.$hostElement$,Cn=Xt.$vnode$||p(null,null),Wn=(Xt=>Xt&&Xt.$tag$===m)(hn)?hn:h(null,null,hn);rn=Fn.tagName,Wn.$tag$=null,Wn.$flags$|=4,Xt.$vnode$=Wn,Wn.$elm$=Cn.$elm$=Fn.shadowRoot||Fn,Rt=Fn["s-sc"],fe(Cn,Wn)})(Xt,hn)}catch(Cn){wt(Cn,Xt.$hostElement$)}return null},zt=Xt=>{const Fn=Xt.$hostElement$,Wn=Xt.$lazyInstance$,yr=Xt.$ancestorComponent$;64&Xt.$flags$||(Xt.$flags$|=64,mt(Fn),Wt(Wn,"componentDidLoad"),Xt.$onReadyResolve$(Fn),yr||Ft()),Xt.$onInstanceResolve$(Fn),Xt.$onRenderResolve$&&(Xt.$onRenderResolve$(),Xt.$onRenderResolve$=void 0),512&Xt.$flags$&&_n(()=>z(Xt,!1)),Xt.$flags$&=-517},_t=Xt=>{{const hn=vn(Xt),Fn=hn.$hostElement$.isConnected;return Fn&&2==(18&hn.$flags$)&&z(hn,!1),Fn}},Ft=Xt=>{mt($n.documentElement),_n(()=>L(On,"appload",{detail:{namespace:"ionicpwaelements"}}))},Wt=(Xt,hn,Fn)=>{if(Xt&&Xt[hn])try{return Xt[hn](Fn)}catch(Cn){wt(Cn)}},mt=Xt=>Xt.classList.add("hydrated"),Ut=(Xt,hn,Fn)=>{if(hn.$members$){const Cn=Object.entries(hn.$members$),Wn=Xt.prototype;if(Cn.map(([yr,[fr]])=>{31&fr||2&Fn&&32&fr?Object.defineProperty(Wn,yr,{get(){return((Xt,hn)=>vn(this).$instanceValues$.get(hn))(0,yr)},set(Ur){((Xt,hn,Fn,Cn)=>{const Wn=vn(Xt),yr=Wn.$instanceValues$.get(hn),fr=Wn.$flags$,Ur=Wn.$lazyInstance$;Fn=((Xt,hn)=>null==Xt||d(Xt)?Xt:4&hn?"false"!==Xt&&(""===Xt||!!Xt):2&hn?parseFloat(Xt):1&hn?String(Xt):Xt)(Fn,Cn.$members$[hn][0]);const vr=Number.isNaN(yr)&&Number.isNaN(Fn);(!(8&fr)||void 0===yr)&&Fn!==yr&&!vr&&(Wn.$instanceValues$.set(hn,Fn),Ur&&2==(18&fr)&&z(Wn,!1))})(this,yr,Ur,hn)},configurable:!0,enumerable:!0}):1&Fn&&64&fr&&Object.defineProperty(Wn,yr,{value(...Ur){const vr=vn(this);return vr.$onInstancePromise$.then(()=>vr.$lazyInstance$[yr](...Ur))}})}),1&Fn){const yr=new Map;Wn.attributeChangedCallback=function(fr,Ur,vr){sr.jmp(()=>{const ei=yr.get(fr);if(this.hasOwnProperty(ei))vr=this[ei],delete this[ei];else if(Wn.hasOwnProperty(ei)&&"number"==typeof this[ei]&&this[ei]==vr)return;this[ei]=(null!==vr||"boolean"!=typeof this[ei])&&vr})},Xt.observedAttributes=Cn.filter(([fr,Ur])=>15&Ur[0]).map(([fr,Ur])=>{const vr=Ur[1]||fr;return yr.set(vr,fr),vr})}}return Xt},Tt=function(){var Xt=(0,F.A)(function*(hn,Fn,Cn,Wn,yr){if(!(32&Fn.$flags$)){Fn.$flags$|=32;{if((yr=bt(Cn)).then){const ei=()=>{};yr=yield yr,ei()}yr.isProxied||(Ut(yr,Cn,2),yr.isProxied=!0);const vr=()=>{};Fn.$flags$|=8;try{new yr(Fn)}catch(ei){wt(ei)}Fn.$flags$&=-9,vr()}if(yr.style){let vr=yr.style;const ei=K(Cn);if(!gn.has(ei)){const ne=()=>{};((Xt,hn,Fn)=>{let Cn=gn.get(Xt);Rr&&Fn?(Cn=Cn||new CSSStyleSheet,"string"==typeof Cn?Cn=hn:Cn.replaceSync(hn)):Cn=hn,gn.set(Xt,Cn)})(ei,vr,!!(1&Cn.$flags$)),ne()}}}const fr=Fn.$ancestorComponent$,Ur=()=>z(Fn,!0);fr&&fr["s-rc"]?fr["s-rc"].push(Ur):Ur()});return function(Fn,Cn,Wn,yr,fr){return Xt.apply(this,arguments)}}(),Zn=(Xt,hn={})=>{var Fn;const Wn=[],yr=hn.exclude||[],fr=On.customElements,Ur=$n.head,vr=Ur.querySelector("meta[charset]"),ei=$n.createElement("style"),ne=[];let Pe,Qe=!0;Object.assign(sr,hn),sr.$resourcesUrl$=new URL(hn.resourcesUrl||"./",$n.baseURI).href,Xt.map(T=>{T[1].map(N=>{const R={$flags$:N[0],$tagName$:N[1],$members$:N[2],$listeners$:N[3]};R.$members$=N[2],R.$listeners$=N[3];const U=R.$tagName$,ie=class extends HTMLElement{constructor($){super($),Pn($=this,R),1&R.$flags$&&$.attachShadow({mode:"open"})}connectedCallback(){Pe&&(clearTimeout(Pe),Pe=null),Qe?ne.push(this):sr.jmp(()=>(Xt=>{if(!(1&sr.$flags$)){const hn=vn(Xt),Fn=hn.$cmpMeta$,Cn=()=>{};if(1&hn.$flags$)An(Xt,hn,Fn.$listeners$);else{hn.$flags$|=1;{let Wn=Xt;for(;Wn=Wn.parentNode||Wn.host;)if(Wn["s-p"]){le(hn,hn.$ancestorComponent$=Wn);break}}Fn.$members$&&Object.entries(Fn.$members$).map(([Wn,[yr]])=>{if(31&yr&&Xt.hasOwnProperty(Wn)){const fr=Xt[Wn];delete Xt[Wn],Xt[Wn]=fr}}),Tt(Xt,hn,Fn)}Cn()}})(this))}disconnectedCallback(){sr.jmp(()=>(Xt=>{if(!(1&sr.$flags$)){const hn=vn(this),Fn=hn.$lazyInstance$;hn.$rmListeners$&&(hn.$rmListeners$.map(Cn=>Cn()),hn.$rmListeners$=void 0),Wt(Fn,"disconnectedCallback")}})())}componentOnReady(){return vn(this).$onReadyPromise$}};R.$lazyBundleId$=T[0],!yr.includes(U)&&!fr.get(U)&&(Wn.push(U),fr.define(U,Ut(ie,R,1)))})});{ei.innerHTML=Wn+"{visibility:hidden}.hydrated{visibility:inherit}",ei.setAttribute("data-styles","");const T=null!==(Fn=sr.$nonce$)&&void 0!==Fn?Fn:f($n);null!=T&&ei.setAttribute("nonce",T),Ur.insertBefore(ei,vr?vr.nextSibling:Ur.firstChild)}Qe=!1,ne.length?ne.map(T=>T.connectedCallback()):sr.jmp(()=>Pe=setTimeout(Ft,30))},An=(Xt,hn,Fn,Cn)=>{Fn&&Fn.map(([Wn,yr,fr])=>{const Ur=Rn(Xt,Wn),vr=Qn(hn,fr),ei=Er(Wn);sr.ael(Ur,yr,vr,ei),(hn.$rmListeners$=hn.$rmListeners$||[]).push(()=>sr.rel(Ur,yr,vr,ei))})},Qn=(Xt,hn)=>Fn=>{try{256&Xt.$flags$?Xt.$lazyInstance$[hn](Fn):(Xt.$queuedListeners$=Xt.$queuedListeners$||[]).push([hn,Fn])}catch(Cn){wt(Cn)}},Rn=(Xt,hn)=>16&hn?$n.body:Xt,Er=Xt=>!!(2&Xt),ur=new WeakMap,vn=Xt=>ur.get(Xt),er=(Xt,hn)=>ur.set(hn.$lazyInstance$=Xt,hn),Pn=(Xt,hn)=>{const Fn={$flags$:0,$hostElement$:Xt,$cmpMeta$:hn,$instanceValues$:new Map};return Fn.$onInstancePromise$=new Promise(Cn=>Fn.$onInstanceResolve$=Cn),Fn.$onReadyPromise$=new Promise(Cn=>Fn.$onReadyResolve$=Cn),Xt["s-p"]=[],Xt["s-rc"]=[],An(Xt,Fn,hn.$listeners$),ur.set(Xt,Fn)},gt=(Xt,hn)=>hn in Xt,wt=(Xt,hn)=>(0,console.error)(Xt,hn),rt=new Map,bt=(Xt,hn,Fn)=>{const Cn=Xt.$tagName$.replace(/-/g,"_"),Wn=Xt.$lazyBundleId$,yr=rt.get(Wn);if(yr)return yr[Cn];if(!Fn||!BUILD.hotModuleReplacement){const fr=Ur=>(rt.set(Wn,Ur),Ur[Cn]);switch(Wn){case"pwa-action-sheet":return Ge.e(6301).then(Ge.bind(Ge,6301)).then(fr,wt);case"pwa-camera-modal":return Ge.e(2982).then(Ge.bind(Ge,2982)).then(fr,wt);case"pwa-toast":return Ge.e(3574).then(Ge.bind(Ge,3574)).then(fr,wt);case"pwa-camera-modal-instance":return Ge.e(5640).then(Ge.bind(Ge,5640)).then(fr,wt);case"pwa-camera":return Ge.e(6086).then(Ge.bind(Ge,6086)).then(fr,wt)}}return Ge(5235)(`./${Wn}.entry.js`).then(fr=>(rt.set(Wn,fr),fr[Cn]),wt)},gn=new Map,On=typeof window<"u"?window:{},$n=On.document||{head:{}},sr={$flags$:0,$resourcesUrl$:"",jmp:Xt=>Xt(),raf:Xt=>requestAnimationFrame(Xt),ael:(Xt,hn,Fn,Cn)=>Xt.addEventListener(hn,Fn,Cn),rel:(Xt,hn,Fn,Cn)=>Xt.removeEventListener(hn,Fn,Cn),ce:(Xt,hn)=>new CustomEvent(Xt,hn)},Cr=Xt=>Promise.resolve(Xt),Rr=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),Fr=[],In=[],cn=(Xt,hn)=>Fn=>{Xt.push(Fn),be||(be=!0,hn&&4&sr.$flags$?_n(sn):sr.raf(sn))},Tn=Xt=>{for(let hn=0;hn<Xt.length;hn++)try{Xt[hn](performance.now())}catch(Fn){wt(Fn)}Xt.length=0},sn=()=>{Tn(Fr),Tn(In),(be=Fr.length>0)&&sr.raf(sn)},_n=Xt=>Cr().then(Xt),tr=cn(In,!0)},5402:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{R:()=>j});const j=(0,Ge(5083).F3)("VoiceRecorder",{web:()=>Ge.e(9888).then(Ge.bind(Ge,9888)).then(Rt=>new Rt.VoiceRecorderWeb)})},92:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Yl:()=>d,ZL:()=>f,aH:()=>D});var F=Ge(467),j=Ge(8326),rn=Ge(3953),l=Ge(3656),be=Ge(5374),Z=Ge(5547),M=Ge(4237),C=Ge(755),b=Ge(4234),w=Ge(7100),I=Ge(3307),D="MobilePWA",d=!1;window.p5=j;let f=(()=>{var h;class p{constructor(g,x,E,S,L,q,J){D=g.is("desktop")?"DesktopPWA":"MobilePWA",(d=g.is("electron"))&&(localStorage.removeItem("useChannelSpeaker"),localStorage.getItem("useCache")||localStorage.setItem("useCache","1"));const G="init";J.update({id:G,message:"Initialize..."}).then(()=>{S.initialize((0,F.A)(function*(){L.Callback_nakama=()=>{J.update({id:G,message:`${L.text.Nakama.Initialize}...`,forceEnd:350}),E.initialize(),q.afterLangInit(),L.Callback_nakama=null};try{let K=yield S.loadBlobFromUserPath("translate.csv",""),H=URL.createObjectURL(K);L.load_selected_lang(H)}catch{L.load_selected_lang()}let V=q.CatchGETs(location.href)||{};q.initialize(),E.AddressToQRCodeAct(V),x.initialize(),x.load_settings(),S.GetFileListFromDB("tmp_files").then(K=>{K.forEach(H=>S.removeFileFromUserPath(H))})}))})}}return(h=p).\u0275fac=function(g){return new(g||h)(rn.rXU(l.OD),rn.rXU(Z.r),rn.rXU(M.X),rn.rXU(C.n),rn.rXU(b.y),rn.rXU(w.z3),rn.rXU(I.f))},h.\u0275cmp=rn.VBU({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(g,x){1&g&&(rn.j41(0,"ion-app"),rn.nrm(1,"ion-router-outlet"),rn.k0s())},dependencies:[be.U1,be.Rg]}),p})()},7100:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{xM:()=>_h,z3:()=>Hx,ud:()=>Mu});var F=Ge(467),j=Ge(4023),Rt=Ge(8326),rn=Ge(617),l=Ge(92),be=Ge(5083),Z=function(v){return v.Prompt="PROMPT",v.Camera="CAMERA",v.Photos="PHOTOS",v}(Z||{}),M=function(v){return v.Rear="REAR",v.Front="FRONT",v}(M||{}),C=function(v){return v.Uri="uri",v.Base64="base64",v.DataUrl="dataUrl",v}(C||{});class b extends be.E_{getPhoto(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(a,u){if(t.webUseInput||t.source===Z.Photos)r.fileInputExperience(t,a,u);else if(t.source===Z.Prompt){let _=document.querySelector("pwa-action-sheet");_||(_=document.createElement("pwa-action-sheet"),document.body.appendChild(_)),_.header=t.promptLabelHeader||"Photo",_.cancelable=!1,_.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],_.addEventListener("onSelection",function(){var A=(0,F.A)(function*(k){0===k.detail?r.fileInputExperience(t,a,u):r.cameraExperience(t,a,u)});return function(k){return A.apply(this,arguments)}}())}else r.cameraExperience(t,a,u)});return function(a,u){return s.apply(this,arguments)}}())})()}pickImages(t){var r=this;return(0,F.A)(function*(){return new Promise(function(){var s=(0,F.A)(function*(a,u){r.multipleFileInputExperience(a,u)});return function(a,u){return s.apply(this,arguments)}}())})()}cameraExperience(t,r,s){var a=this;return(0,F.A)(function*(){if(customElements.get("pwa-camera-modal")){const u=document.createElement("pwa-camera-modal");u.facingMode=t.direction===M.Front?"user":"environment",document.body.appendChild(u);try{yield u.componentOnReady(),u.addEventListener("onPhoto",function(){var _=(0,F.A)(function*(A){const k=A.detail;null===k?s(new be.I9("User cancelled photos app")):k instanceof Error?s(k):r(yield a._getCameraPhoto(k,t)),u.dismiss(),document.body.removeChild(u)});return function(A){return _.apply(this,arguments)}}()),u.present()}catch{a.fileInputExperience(t,r,s)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),a.fileInputExperience(t,r,s)})()}fileInputExperience(t,r,s){let a=document.querySelector("#_capacitor-camera-input");const u=()=>{var _;null===(_=a.parentNode)||void 0===_||_.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",_=>{const A=a.files[0];let k="jpeg";if("image/png"===A.type?k="png":"image/gif"===A.type&&(k="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const B=new FileReader;B.addEventListener("load",()=>{if("dataUrl"===t.resultType)r({dataUrl:B.result,format:k});else if("base64"===t.resultType){const ee=B.result.split(",")[1];r({base64String:ee,format:k})}u()}),B.readAsDataURL(A)}else r({webPath:URL.createObjectURL(A),format:k}),u()}),a.addEventListener("cancel",_=>{s(new be.I9("User cancelled photos app")),u()})),a.accept="image/*",a.capture=!0,t.source===Z.Photos||t.source===Z.Prompt?a.removeAttribute("capture"):t.direction===M.Front?a.capture="user":t.direction===M.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(t,r){let s=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var u;null===(u=s.parentNode)||void 0===u||u.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input-multiple",s.type="file",s.hidden=!0,s.multiple=!0,document.body.appendChild(s),s.addEventListener("change",u=>{const _=[];for(let A=0;A<s.files.length;A++){const k=s.files[A];let B="jpeg";"image/png"===k.type?B="png":"image/gif"===k.type&&(B="gif"),_.push({webPath:URL.createObjectURL(k),format:B})}t({photos:_}),a()}),s.addEventListener("cancel",u=>{r(new be.I9("User cancelled photos app")),a()})),s.accept="image/*",s.click()}_getCameraPhoto(t,r){return new Promise((s,a)=>{const u=new FileReader,_=t.type.split("/")[1];"uri"===r.resultType?s({webPath:URL.createObjectURL(t),format:_,saved:!1}):(u.readAsDataURL(t),u.onloadend=()=>{const A=u.result;s("dataUrl"===r.resultType?{dataUrl:A,format:_,saved:!1}:{base64String:A.split(",")[1],format:_,saved:!1})},u.onerror=A=>{a(A)})})}checkPermissions(){var t=this;return(0,F.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,F.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,F.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new b;const I=(0,be.F3)("Camera",{web:()=>new b});var D=Ge(5402);const d="174",S=1,L=2,q=3,Rn=0,Er=1,Bn=2,ur=0,vn=1,er=2,Pn=3,gt=4,wt=5,rt=6,bt=7,gn="attached",sr=301,Cr=302,In=306,cn=1e3,Tn=1001,_n=1003,hn=1005,Cn=1006,fr=1008,vr=1009,ei=1010,ne=1011,Pe=1012,Qe=1013,T=1014,N=1015,R=1016,U=1017,ie=1018,$=1020,de=35902,Ae=1021,tt=1022,pt=1023,Kt=1024,Fe=1025,We=1026,at=1027,Ze=1028,xt=1029,Zt=1030,En=1031,or=1033,ii=33776,Bi=33777,Rs=33778,Ps=33779,xi=35840,ws=35841,co=35842,Ls=35843,so=36196,ea=37492,So=37496,ca=37808,ta=37809,qo=37810,ua=37811,mo=37812,Ta=37813,To=37814,Ja=37815,Va=37816,Ne=37817,yt=37818,Bt=37819,He=37820,Ht=37821,kn=36492,fs=36494,qs=36495,na=36283,Ga=36284,Ma=36285,Ko=36286,Ro=2300,Vo=2301,jo=2400,ut=2401,zi="srgb",ns="srgb-linear",Ms="linear",Ki="srgb",Br=7680,nt="300 es",At=2e3;class Mn{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(r)&&s[t].push(r)}hasEventListener(t,r){const s=this._listeners;return void 0!==s&&void 0!==s[t]&&-1!==s[t].indexOf(r)}removeEventListener(t,r){const s=this._listeners;if(void 0===s)return;const a=s[t];if(void 0!==a){const u=a.indexOf(r);-1!==u&&a.splice(u,1)}}dispatchEvent(t){const r=this._listeners;if(void 0===r)return;const s=r[t.type];if(void 0!==s){t.target=this;const a=s.slice(0);for(let u=0,_=a.length;u<_;u++)a[u].call(this,t);t.target=null}}}const je=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ve=Math.PI/180,ke=180/Math.PI;function ht(){const v=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(je[255&v]+je[v>>8&255]+je[v>>16&255]+je[v>>24&255]+"-"+je[255&t]+je[t>>8&255]+"-"+je[t>>16&15|64]+je[t>>24&255]+"-"+je[63&r|128]+je[r>>8&255]+"-"+je[r>>16&255]+je[r>>24&255]+je[255&s]+je[s>>8&255]+je[s>>16&255]+je[s>>24&255]).toLowerCase()}function on(v,t,r){return Math.max(t,Math.min(r,v))}function Dn(v,t){return(v%t+t)%t}function Zr(v,t,r){return(1-r)*v+r*t}function js(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return v/4294967295;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int32Array:return Math.max(v/2147483647,-1);case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function bi(v,t){switch(t.constructor){case Float32Array:return v;case Uint32Array:return Math.round(4294967295*v);case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int32Array:return Math.round(2147483647*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}const Fo_DEG2RAD=Ve,Fo_radToDeg=function Vs(v){return v*ke};class pr{constructor(t=0,r=0){pr.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,s=this.y,a=t.elements;return this.x=a[0]*r+a[3]*s+a[6],this.y=a[1]*r+a[4]*s+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=on(this.x,t.x,r.x),this.y=on(this.y,t.y,r.y),this}clampScalar(t,r){return this.x=on(this.x,t,r),this.y=on(this.y,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(on(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(on(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y;return r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const s=Math.cos(r),a=Math.sin(r),u=this.x-t.x,_=this.y-t.y;return this.x=u*s-_*a+t.x,this.y=u*a+_*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yi{constructor(t,r,s,a,u,_,A,k,B){Yi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,r,s,a,u,_,A,k,B)}set(t,r,s,a,u,_,A,k,B){const ee=this.elements;return ee[0]=t,ee[1]=a,ee[2]=A,ee[3]=r,ee[4]=u,ee[5]=k,ee[6]=s,ee[7]=_,ee[8]=B,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this}extractBasis(t,r,s){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,a=r.elements,u=this.elements,_=s[0],A=s[3],k=s[6],B=s[1],ee=s[4],ae=s[7],pe=s[2],_e=s[5],Re=s[8],Be=a[0],Le=a[3],Oe=a[6],ft=a[1],dt=a[4],st=a[7],Yt=a[2],Mt=a[5],Gt=a[8];return u[0]=_*Be+A*ft+k*Yt,u[3]=_*Le+A*dt+k*Mt,u[6]=_*Oe+A*st+k*Gt,u[1]=B*Be+ee*ft+ae*Yt,u[4]=B*Le+ee*dt+ae*Mt,u[7]=B*Oe+ee*st+ae*Gt,u[2]=pe*Be+_e*ft+Re*Yt,u[5]=pe*Le+_e*dt+Re*Mt,u[8]=pe*Oe+_e*st+Re*Gt,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],A=t[5],k=t[6],B=t[7],ee=t[8];return r*_*ee-r*A*B-s*u*ee+s*A*k+a*u*B-a*_*k}invert(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],A=t[5],k=t[6],B=t[7],ee=t[8],ae=ee*_-A*B,pe=A*k-ee*u,_e=B*u-_*k,Re=r*ae+s*pe+a*_e;if(0===Re)return this.set(0,0,0,0,0,0,0,0,0);const Be=1/Re;return t[0]=ae*Be,t[1]=(a*B-ee*s)*Be,t[2]=(A*s-a*_)*Be,t[3]=pe*Be,t[4]=(ee*r-a*k)*Be,t[5]=(a*u-A*r)*Be,t[6]=_e*Be,t[7]=(s*k-B*r)*Be,t[8]=(_*r-s*u)*Be,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,s,a,u,_,A){const k=Math.cos(u),B=Math.sin(u);return this.set(s*k,s*B,-s*(k*_+B*A)+_+t,-a*B,a*k,-a*(-B*_+k*A)+A+r,0,0,1),this}scale(t,r){return this.premultiply(jc.makeScale(t,r)),this}rotate(t){return this.premultiply(jc.makeRotation(-t)),this}translate(t,r){return this.premultiply(jc.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,s,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,s=t.elements;for(let a=0;a<9;a++)if(r[a]!==s[a])return!1;return!0}fromArray(t,r=0){for(let s=0;s<9;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const jc=new Yi;function Od(v){for(let t=v.length-1;t>=0;--t)if(v[t]>=65535)return!0;return!1}function yl(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function cc(){const v=yl("canvas");return v.style.display="block",v}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Fc={};function $a(v){v in Fc||(Fc[v]=!0,console.warn(v))}const os=(new Yi).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ys=(new Yi).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Eh(){const v={enabled:!0,workingColorSpace:ns,spaces:{},convert:function(a,u,_){return!1===this.enabled||u===_||!u||!_||(this.spaces[u].transfer===Ki&&(a.r=Ml(a.r),a.g=Ml(a.g),a.b=Ml(a.b)),this.spaces[u].primaries!==this.spaces[_].primaries&&(a.applyMatrix3(this.spaces[u].toXYZ),a.applyMatrix3(this.spaces[_].fromXYZ)),this.spaces[_].transfer===Ki&&(a.r=wc(a.r),a.g=wc(a.g),a.b=wc(a.b))),a},fromWorkingColorSpace:function(a,u){return this.convert(a,this.workingColorSpace,u)},toWorkingColorSpace:function(a,u){return this.convert(a,u,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return""===a?Ms:this.spaces[a].transfer},getLuminanceCoefficients:function(a,u=this.workingColorSpace){return a.fromArray(this.spaces[u].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,u,_){return a.copy(this.spaces[u].toXYZ).multiply(this.spaces[_].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],s=[.3127,.329];return v.define({[ns]:{primaries:t,whitePoint:s,transfer:Ms,toXYZ:os,fromXYZ:Ys,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:zi},outputColorSpaceConfig:{drawingBufferColorSpace:zi}},[zi]:{primaries:t,whitePoint:s,transfer:Ki,toXYZ:os,fromXYZ:Ys,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:zi}}}),v}const xs=Eh();function Ml(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function wc(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}let Ql;class ou{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Ql&&(Ql=yl("canvas")),Ql.width=t.width,Ql.height=t.height;const s=Ql.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),r=Ql}return r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=yl("canvas");r.width=t.width,r.height=t.height;const s=r.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const a=s.getImageData(0,0,t.width,t.height),u=a.data;for(let _=0;_<u.length;_++)u[_]=255*Ml(u[_]/255);return s.putImageData(a,0,0),r}if(t.data){const r=t.data.slice(0);for(let s=0;s<r.length;s++)r[s]=r instanceof Uint8Array||r instanceof Uint8ClampedArray?Math.floor(255*Ml(r[s]/255)):Ml(r[s]);return{data:r,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let As=0;class Ha{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:As++}),this.uuid=ht(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.images[this.uuid])return t.images[this.uuid];const s={uuid:this.uuid,url:""},a=this.data;if(null!==a){let u;if(Array.isArray(a)){u=[];for(let _=0,A=a.length;_<A;_++)u.push(ec(a[_].isDataTexture?a[_].image:a[_]))}else u=ec(a);s.url=u}return r||(t.images[this.uuid]=s),s}}function ec(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?ou.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ia=0,_o=(()=>{class v extends Mn{constructor(r=v.DEFAULT_IMAGE,s=v.DEFAULT_MAPPING,a=Tn,u=Tn,_=Cn,A=fr,k=pt,B=vr,ee=v.DEFAULT_ANISOTROPY,ae=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ia++}),this.uuid=ht(),this.name="",this.source=new Ha(r),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=a,this.wrapT=u,this.magFilter=_,this.minFilter=A,this.anisotropy=ee,this.format=k,this.internalFormat=null,this.type=B,this.offset=new pr(0,0),this.repeat=new pr(1,1),this.center=new pr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ae,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(r=null){this.source.data=r}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.source=r.source,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.channel=r.channel,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.colorSpace=r.colorSpace,this.renderTarget=r.renderTarget,this.isRenderTargetTexture=r.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(r.userData)),this.needsUpdate=!0,this}toJSON(r){const s=void 0===r||"string"==typeof r;if(!s&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(r).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),s||(r.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case cn:r.x=r.x-Math.floor(r.x);break;case Tn:r.x=r.x<0?0:1;break;case 1002:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case cn:r.y=r.y-Math.floor(r.y);break;case Tn:r.y=r.y<0?0:1;break;case 1002:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(r){!0===r&&this.pmremVersion++}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v.DEFAULT_ANISOTROPY=1,v})();class Gs{constructor(t=0,r=0,s=0,a=1){Gs.prototype.isVector4=!0,this.x=t,this.y=r,this.z=s,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,s,a){return this.x=t,this.y=r,this.z=s,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,s=this.y,a=this.z,u=this.w,_=t.elements;return this.x=_[0]*r+_[4]*s+_[8]*a+_[12]*u,this.y=_[1]*r+_[5]*s+_[9]*a+_[13]*u,this.z=_[2]*r+_[6]*s+_[10]*a+_[14]*u,this.w=_[3]*r+_[7]*s+_[11]*a+_[15]*u,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,s,a,u;const k=t.elements,B=k[0],ee=k[4],ae=k[8],pe=k[1],_e=k[5],Re=k[9],Be=k[2],Le=k[6],Oe=k[10];if(Math.abs(ee-pe)<.01&&Math.abs(ae-Be)<.01&&Math.abs(Re-Le)<.01){if(Math.abs(ee+pe)<.1&&Math.abs(ae+Be)<.1&&Math.abs(Re+Le)<.1&&Math.abs(B+_e+Oe-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const dt=(B+1)/2,st=(_e+1)/2,Yt=(Oe+1)/2,Mt=(ee+pe)/4,Gt=(ae+Be)/4,tn=(Re+Le)/4;return dt>st&&dt>Yt?dt<.01?(s=0,a=.707106781,u=.707106781):(s=Math.sqrt(dt),a=Mt/s,u=Gt/s):st>Yt?st<.01?(s=.707106781,a=0,u=.707106781):(a=Math.sqrt(st),s=Mt/a,u=tn/a):Yt<.01?(s=.707106781,a=.707106781,u=0):(u=Math.sqrt(Yt),s=Gt/u,a=tn/u),this.set(s,a,u,r),this}let ft=Math.sqrt((Le-Re)*(Le-Re)+(ae-Be)*(ae-Be)+(pe-ee)*(pe-ee));return Math.abs(ft)<.001&&(ft=1),this.x=(Le-Re)/ft,this.y=(ae-Be)/ft,this.z=(pe-ee)/ft,this.w=Math.acos((B+_e+Oe-1)/2),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=on(this.x,t.x,r.x),this.y=on(this.y,t.y,r.y),this.z=on(this.z,t.z,r.z),this.w=on(this.w,t.w,r.w),this}clampScalar(t,r){return this.x=on(this.x,t,r),this.y=on(this.y,t,r),this.z=on(this.z,t,r),this.w=on(this.w,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(on(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this.w=t.w+(r.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class au extends Mn{constructor(t=1,r=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new Gs(0,0,t,r),this.scissorTest=!1,this.viewport=new Gs(0,0,t,r);const a={width:t,height:r,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Cn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const u=new _o(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);u.flipY=!1,u.generateMipmaps=s.generateMipmaps,u.internalFormat=s.internalFormat,this.textures=[];const _=s.count;for(let A=0;A<_;A++)this.textures[A]=u.clone(),this.textures[A].isRenderTargetTexture=!0,this.textures[A].renderTarget=this;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,r,s=1){if(this.width!==t||this.height!==r||this.depth!==s){this.width=t,this.height=r,this.depth=s;for(let a=0,u=this.textures.length;a<u;a++)this.textures[a].image.width=t,this.textures[a].image.height=r,this.textures[a].image.depth=s;this.dispose()}this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,s=t.textures.length;r<s;r++){this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const a=Object.assign({},t.textures[r].image);this.textures[r].source=new Ha(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Te extends au{constructor(t=1,r=1,s={}){super(t,r,s),this.isWebGLRenderTarget=!0}}class et extends _o{constructor(t=null,r=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:s,depth:a},this.magFilter=_n,this.minFilter=_n,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ye extends _o{constructor(t=null,r=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:s,depth:a},this.magFilter=_n,this.minFilter=_n,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class an{constructor(t=0,r=0,s=0,a=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=s,this._w=a}static slerpFlat(t,r,s,a,u,_,A){let k=s[a+0],B=s[a+1],ee=s[a+2],ae=s[a+3];const pe=u[_+0],_e=u[_+1],Re=u[_+2],Be=u[_+3];if(0===A)return t[r+0]=k,t[r+1]=B,t[r+2]=ee,void(t[r+3]=ae);if(1===A)return t[r+0]=pe,t[r+1]=_e,t[r+2]=Re,void(t[r+3]=Be);if(ae!==Be||k!==pe||B!==_e||ee!==Re){let Le=1-A;const Oe=k*pe+B*_e+ee*Re+ae*Be,ft=Oe>=0?1:-1,dt=1-Oe*Oe;if(dt>Number.EPSILON){const Yt=Math.sqrt(dt),Mt=Math.atan2(Yt,Oe*ft);Le=Math.sin(Le*Mt)/Yt,A=Math.sin(A*Mt)/Yt}const st=A*ft;if(k=k*Le+pe*st,B=B*Le+_e*st,ee=ee*Le+Re*st,ae=ae*Le+Be*st,Le===1-A){const Yt=1/Math.sqrt(k*k+B*B+ee*ee+ae*ae);k*=Yt,B*=Yt,ee*=Yt,ae*=Yt}}t[r]=k,t[r+1]=B,t[r+2]=ee,t[r+3]=ae}static multiplyQuaternionsFlat(t,r,s,a,u,_){const A=s[a],k=s[a+1],B=s[a+2],ee=s[a+3],ae=u[_],pe=u[_+1],_e=u[_+2],Re=u[_+3];return t[r]=A*Re+ee*ae+k*_e-B*pe,t[r+1]=k*Re+ee*pe+B*ae-A*_e,t[r+2]=B*Re+ee*_e+A*pe-k*ae,t[r+3]=ee*Re-A*ae-k*pe-B*_e,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,s,a){return this._x=t,this._y=r,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){const s=t._x,a=t._y,u=t._z,_=t._order,A=Math.cos,k=Math.sin,B=A(s/2),ee=A(a/2),ae=A(u/2),pe=k(s/2),_e=k(a/2),Re=k(u/2);switch(_){case"XYZ":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"YXZ":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;case"ZXY":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"ZYX":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;case"YZX":this._x=pe*ee*ae+B*_e*Re,this._y=B*_e*ae+pe*ee*Re,this._z=B*ee*Re-pe*_e*ae,this._w=B*ee*ae-pe*_e*Re;break;case"XZY":this._x=pe*ee*ae-B*_e*Re,this._y=B*_e*ae-pe*ee*Re,this._z=B*ee*Re+pe*_e*ae,this._w=B*ee*ae+pe*_e*Re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return!0===r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const s=r/2,a=Math.sin(s);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,s=r[0],a=r[4],u=r[8],_=r[1],A=r[5],k=r[9],B=r[2],ee=r[6],ae=r[10],pe=s+A+ae;if(pe>0){const _e=.5/Math.sqrt(pe+1);this._w=.25/_e,this._x=(ee-k)*_e,this._y=(u-B)*_e,this._z=(_-a)*_e}else if(s>A&&s>ae){const _e=2*Math.sqrt(1+s-A-ae);this._w=(ee-k)/_e,this._x=.25*_e,this._y=(a+_)/_e,this._z=(u+B)/_e}else if(A>ae){const _e=2*Math.sqrt(1+A-s-ae);this._w=(u-B)/_e,this._x=(a+_)/_e,this._y=.25*_e,this._z=(k+ee)/_e}else{const _e=2*Math.sqrt(1+ae-s-A);this._w=(_-a)/_e,this._x=(u+B)/_e,this._y=(k+ee)/_e,this._z=.25*_e}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let s=t.dot(r)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(on(this.dot(t),-1,1)))}rotateTowards(t,r){const s=this.angleTo(t);if(0===s)return this;const a=Math.min(1,r/s);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const s=t._x,a=t._y,u=t._z,_=t._w,A=r._x,k=r._y,B=r._z,ee=r._w;return this._x=s*ee+_*A+a*B-u*k,this._y=a*ee+_*k+u*A-s*B,this._z=u*ee+_*B+s*k-a*A,this._w=_*ee-s*A-a*k-u*B,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const s=this._x,a=this._y,u=this._z,_=this._w;let A=_*t._w+s*t._x+a*t._y+u*t._z;if(A<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,A=-A):this.copy(t),A>=1)return this._w=_,this._x=s,this._y=a,this._z=u,this;const k=1-A*A;if(k<=Number.EPSILON){const _e=1-r;return this._w=_e*_+r*this._w,this._x=_e*s+r*this._x,this._y=_e*a+r*this._y,this._z=_e*u+r*this._z,this.normalize(),this}const B=Math.sqrt(k),ee=Math.atan2(B,A),ae=Math.sin((1-r)*ee)/B,pe=Math.sin(r*ee)/B;return this._w=_*ae+this._w*pe,this._x=s*ae+this._x*pe,this._y=a*ae+this._y*pe,this._z=u*ae+this._z*pe,this._onChangeCallback(),this}slerpQuaternions(t,r,s){return this.copy(t).slerp(r,s)}random(){const t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),s=Math.random(),a=Math.sqrt(1-s),u=Math.sqrt(s);return this.set(a*Math.sin(t),a*Math.cos(t),u*Math.sin(r),u*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class St{constructor(t=0,r=0,s=0){St.prototype.isVector3=!0,this.x=t,this.y=r,this.z=s}set(t,r,s){return void 0===s&&(s=this.z),this.x=t,this.y=r,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(rs.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(rs.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,s=this.y,a=this.z,u=t.elements;return this.x=u[0]*r+u[3]*s+u[6]*a,this.y=u[1]*r+u[4]*s+u[7]*a,this.z=u[2]*r+u[5]*s+u[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,s=this.y,a=this.z,u=t.elements,_=1/(u[3]*r+u[7]*s+u[11]*a+u[15]);return this.x=(u[0]*r+u[4]*s+u[8]*a+u[12])*_,this.y=(u[1]*r+u[5]*s+u[9]*a+u[13])*_,this.z=(u[2]*r+u[6]*s+u[10]*a+u[14])*_,this}applyQuaternion(t){const r=this.x,s=this.y,a=this.z,u=t.x,_=t.y,A=t.z,k=t.w,B=2*(_*a-A*s),ee=2*(A*r-u*a),ae=2*(u*s-_*r);return this.x=r+k*B+_*ae-A*ee,this.y=s+k*ee+A*B-u*ae,this.z=a+k*ae+u*ee-_*B,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,s=this.y,a=this.z,u=t.elements;return this.x=u[0]*r+u[4]*s+u[8]*a,this.y=u[1]*r+u[5]*s+u[9]*a,this.z=u[2]*r+u[6]*s+u[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=on(this.x,t.x,r.x),this.y=on(this.y,t.y,r.y),this.z=on(this.z,t.z,r.z),this}clampScalar(t,r){return this.x=on(this.x,t,r),this.y=on(this.y,t,r),this.z=on(this.z,t,r),this}clampLength(t,r){const s=this.length();return this.divideScalar(s||1).multiplyScalar(on(s,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,s){return this.x=t.x+(r.x-t.x)*s,this.y=t.y+(r.y-t.y)*s,this.z=t.z+(r.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const s=t.x,a=t.y,u=t.z,_=r.x,A=r.y,k=r.z;return this.x=a*k-u*A,this.y=u*_-s*k,this.z=s*A-a*_,this}projectOnVector(t){const r=t.lengthSq();if(0===r)return this.set(0,0,0);const s=t.dot(this)/r;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Nr.copy(this).projectOnVector(t),this.sub(Nr)}reflect(t){return this.sub(Nr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const s=this.dot(t)/r;return Math.acos(on(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,s=this.y-t.y,a=this.z-t.z;return r*r+s*s+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,s){const a=Math.sin(r)*t;return this.x=a*Math.sin(s),this.y=Math.cos(r)*t,this.z=a*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,s){return this.x=t*Math.sin(r),this.y=s,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=s,this.z=a,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,r=2*Math.random()-1,s=Math.sqrt(1-r*r);return this.x=s*Math.cos(t),this.y=r,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nr=new St,rs=new an;class ot{constructor(t=new St(1/0,1/0,1/0),r=new St(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r+=3)this.expandByPoint(ve.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,s=t.count;r<s;r++)this.expandByPoint(ve.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,s=t.length;r<s;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const s=ve.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(void 0!==s){const u=s.getAttribute("position");if(!0===r&&void 0!==u&&!0!==t.isInstancedMesh)for(let _=0,A=u.count;_<A;_++)!0===t.isMesh?t.getVertexPosition(_,ve):ve.fromBufferAttribute(u,_),ve.applyMatrix4(t.matrixWorld),this.expandByPoint(ve);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),ze.copy(t.boundingBox)):(null===s.boundingBox&&s.computeBoundingBox(),ze.copy(s.boundingBox)),ze.applyMatrix4(t.matrixWorld),this.union(ze)}const a=t.children;for(let u=0,_=a.length;u<_;u++)this.expandByObject(a[u],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ve),ve.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,s;return t.normal.x>0?(r=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),r<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Wr),ai.subVectors(this.max,Wr),lt.subVectors(t.a,Wr),Lt.subVectors(t.b,Wr),Sn.subVectors(t.c,Wr),xn.subVectors(Lt,lt),Hn.subVectors(Sn,Lt),ar.subVectors(lt,Sn);let r=[0,-xn.z,xn.y,0,-Hn.z,Hn.y,0,-ar.z,ar.y,xn.z,0,-xn.x,Hn.z,0,-Hn.x,ar.z,0,-ar.x,-xn.y,xn.x,0,-Hn.y,Hn.x,0,-ar.y,ar.x,0];return!(!Xi(r,lt,Lt,Sn,ai)||(r=[1,0,0,0,1,0,0,0,1],!Xi(r,lt,Lt,Sn,ai)))&&(ki.crossVectors(xn,Hn),r=[ki.x,ki.y,ki.z],Xi(r,lt,Lt,Sn,ai))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ve).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ve).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ue[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ue[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ue[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ue[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ue[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ue[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ue[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ue[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ue)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ue=[new St,new St,new St,new St,new St,new St,new St,new St],ve=new St,ze=new ot,lt=new St,Lt=new St,Sn=new St,xn=new St,Hn=new St,ar=new St,Wr=new St,ai=new St,ki=new St,Qi=new St;function Xi(v,t,r,s,a){for(let u=0,_=v.length-3;u<=_;u+=3){Qi.fromArray(v,u);const A=a.x*Math.abs(Qi.x)+a.y*Math.abs(Qi.y)+a.z*Math.abs(Qi.z),k=t.dot(Qi),B=r.dot(Qi),ee=s.dot(Qi);if(Math.max(-Math.max(k,B,ee),Math.min(k,B,ee))>A)return!1}return!0}const is=new ot,Ks=new St,Go=new St;class us{constructor(t=new St,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const s=this.center;void 0!==r?s.copy(r):is.setFromPoints(t).getCenter(s);let a=0;for(let u=0,_=t.length;u<_;u++)a=Math.max(a,s.distanceToSquared(t[u]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const s=this.center.distanceToSquared(t);return r.copy(t),s>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ks.subVectors(t,this.center);const r=Ks.lengthSq();if(r>this.radius*this.radius){const s=Math.sqrt(r),a=.5*(s-this.radius);this.center.addScaledVector(Ks,a/s),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Go.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ks.copy(t.center).add(Go)),this.expandByPoint(Ks.copy(t.center).sub(Go))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const po=new St,ia=new St,ll=new St,sa=new St,fa=new St,cl=new St,ul=new St;class zo{constructor(t=new St,r=new St(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,po)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const s=r.dot(this.direction);return s<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=po.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(po.copy(this.origin).addScaledVector(this.direction,r),po.distanceToSquared(t))}distanceSqToSegment(t,r,s,a){ia.copy(t).add(r).multiplyScalar(.5),ll.copy(r).sub(t).normalize(),sa.copy(this.origin).sub(ia);const u=.5*t.distanceTo(r),_=-this.direction.dot(ll),A=sa.dot(this.direction),k=-sa.dot(ll),B=sa.lengthSq(),ee=Math.abs(1-_*_);let ae,pe,_e,Re;if(ee>0)if(ae=_*k-A,pe=_*A-k,Re=u*ee,ae>=0)if(pe>=-Re)if(pe<=Re){const Be=1/ee;ae*=Be,pe*=Be,_e=ae*(ae+_*pe+2*A)+pe*(_*ae+pe+2*k)+B}else pe=u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*k)+B;else pe=-u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*k)+B;else pe<=-Re?(ae=Math.max(0,-(-_*u+A)),pe=ae>0?-u:Math.min(Math.max(-u,-k),u),_e=-ae*ae+pe*(pe+2*k)+B):pe<=Re?(ae=0,pe=Math.min(Math.max(-u,-k),u),_e=pe*(pe+2*k)+B):(ae=Math.max(0,-(_*u+A)),pe=ae>0?u:Math.min(Math.max(-u,-k),u),_e=-ae*ae+pe*(pe+2*k)+B);else pe=_>0?-u:u,ae=Math.max(0,-(_*pe+A)),_e=-ae*ae+pe*(pe+2*k)+B;return s&&s.copy(this.origin).addScaledVector(this.direction,ae),a&&a.copy(ia).addScaledVector(ll,pe),_e}intersectSphere(t,r){po.subVectors(t.center,this.origin);const s=po.dot(this.direction),a=po.dot(po)-s*s,u=t.radius*t.radius;if(a>u)return null;const _=Math.sqrt(u-a),A=s-_,k=s+_;return k<0?null:this.at(A<0?k:A,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/r;return s>=0?s:null}intersectPlane(t,r){const s=this.distanceToPlane(t);return null===s?null:this.at(s,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return 0===r||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let s,a,u,_,A,k;const B=1/this.direction.x,ee=1/this.direction.y,ae=1/this.direction.z,pe=this.origin;return B>=0?(s=(t.min.x-pe.x)*B,a=(t.max.x-pe.x)*B):(s=(t.max.x-pe.x)*B,a=(t.min.x-pe.x)*B),ee>=0?(u=(t.min.y-pe.y)*ee,_=(t.max.y-pe.y)*ee):(u=(t.max.y-pe.y)*ee,_=(t.min.y-pe.y)*ee),s>_||u>a||((u>s||isNaN(s))&&(s=u),(_<a||isNaN(a))&&(a=_),ae>=0?(A=(t.min.z-pe.z)*ae,k=(t.max.z-pe.z)*ae):(A=(t.max.z-pe.z)*ae,k=(t.min.z-pe.z)*ae),s>k||A>a)||((A>s||s!=s)&&(s=A),(k<a||a!=a)&&(a=k),a<0)?null:this.at(s>=0?s:a,r)}intersectsBox(t){return null!==this.intersectBox(t,po)}intersectTriangle(t,r,s,a,u){fa.subVectors(r,t),cl.subVectors(s,t),ul.crossVectors(fa,cl);let A,_=this.direction.dot(ul);if(_>0){if(a)return null;A=1}else{if(!(_<0))return null;A=-1,_=-_}sa.subVectors(this.origin,t);const k=A*this.direction.dot(cl.crossVectors(sa,cl));if(k<0)return null;const B=A*this.direction.dot(fa.cross(sa));if(B<0||k+B>_)return null;const ee=-A*sa.dot(ul);return ee<0?null:this.at(ee/_,u)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Li{constructor(t,r,s,a,u,_,A,k,B,ee,ae,pe,_e,Re,Be,Le){Li.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,r,s,a,u,_,A,k,B,ee,ae,pe,_e,Re,Be,Le)}set(t,r,s,a,u,_,A,k,B,ee,ae,pe,_e,Re,Be,Le){const Oe=this.elements;return Oe[0]=t,Oe[4]=r,Oe[8]=s,Oe[12]=a,Oe[1]=u,Oe[5]=_,Oe[9]=A,Oe[13]=k,Oe[2]=B,Oe[6]=ee,Oe[10]=ae,Oe[14]=pe,Oe[3]=_e,Oe[7]=Re,Oe[11]=Be,Oe[15]=Le,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Li).fromArray(this.elements)}copy(t){const r=this.elements,s=t.elements;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],this}copyPosition(t){const r=this.elements,s=t.elements;return r[12]=s[12],r[13]=s[13],r[14]=s[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,s){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,r,s){return this.set(t.x,r.x,s.x,0,t.y,r.y,s.y,0,t.z,r.z,s.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,s=t.elements,a=1/Al.setFromMatrixColumn(t,0).length(),u=1/Al.setFromMatrixColumn(t,1).length(),_=1/Al.setFromMatrixColumn(t,2).length();return r[0]=s[0]*a,r[1]=s[1]*a,r[2]=s[2]*a,r[3]=0,r[4]=s[4]*u,r[5]=s[5]*u,r[6]=s[6]*u,r[7]=0,r[8]=s[8]*_,r[9]=s[9]*_,r[10]=s[10]*_,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,s=t.x,a=t.y,u=t.z,_=Math.cos(s),A=Math.sin(s),k=Math.cos(a),B=Math.sin(a),ee=Math.cos(u),ae=Math.sin(u);if("XYZ"===t.order){const pe=_*ee,_e=_*ae,Re=A*ee,Be=A*ae;r[0]=k*ee,r[4]=-k*ae,r[8]=B,r[1]=_e+Re*B,r[5]=pe-Be*B,r[9]=-A*k,r[2]=Be-pe*B,r[6]=Re+_e*B,r[10]=_*k}else if("YXZ"===t.order){const pe=k*ee,_e=k*ae,Re=B*ee,Be=B*ae;r[0]=pe+Be*A,r[4]=Re*A-_e,r[8]=_*B,r[1]=_*ae,r[5]=_*ee,r[9]=-A,r[2]=_e*A-Re,r[6]=Be+pe*A,r[10]=_*k}else if("ZXY"===t.order){const pe=k*ee,_e=k*ae,Re=B*ee,Be=B*ae;r[0]=pe-Be*A,r[4]=-_*ae,r[8]=Re+_e*A,r[1]=_e+Re*A,r[5]=_*ee,r[9]=Be-pe*A,r[2]=-_*B,r[6]=A,r[10]=_*k}else if("ZYX"===t.order){const pe=_*ee,_e=_*ae,Re=A*ee,Be=A*ae;r[0]=k*ee,r[4]=Re*B-_e,r[8]=pe*B+Be,r[1]=k*ae,r[5]=Be*B+pe,r[9]=_e*B-Re,r[2]=-B,r[6]=A*k,r[10]=_*k}else if("YZX"===t.order){const pe=_*k,_e=_*B,Re=A*k,Be=A*B;r[0]=k*ee,r[4]=Be-pe*ae,r[8]=Re*ae+_e,r[1]=ae,r[5]=_*ee,r[9]=-A*ee,r[2]=-B*ee,r[6]=_e*ae+Re,r[10]=pe-Be*ae}else if("XZY"===t.order){const pe=_*k,_e=_*B,Re=A*k,Be=A*B;r[0]=k*ee,r[4]=-ae,r[8]=B*ee,r[1]=pe*ae+Be,r[5]=_*ee,r[9]=_e*ae-Re,r[2]=Re*ae-_e,r[6]=A*ee,r[10]=Be*ae+pe}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Gf,t,Ou)}lookAt(t,r,s){const a=this.elements;return mi.subVectors(t,r),0===mi.lengthSq()&&(mi.z=1),mi.normalize(),ci.crossVectors(s,mi),0===ci.lengthSq()&&(1===Math.abs(s.z)?mi.x+=1e-4:mi.z+=1e-4,mi.normalize(),ci.crossVectors(s,mi)),ci.normalize(),Qr.crossVectors(mi,ci),a[0]=ci.x,a[4]=Qr.x,a[8]=mi.x,a[1]=ci.y,a[5]=Qr.y,a[9]=mi.y,a[2]=ci.z,a[6]=Qr.z,a[10]=mi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const s=t.elements,a=r.elements,u=this.elements,_=s[0],A=s[4],k=s[8],B=s[12],ee=s[1],ae=s[5],pe=s[9],_e=s[13],Re=s[2],Be=s[6],Le=s[10],Oe=s[14],ft=s[3],dt=s[7],st=s[11],Yt=s[15],Mt=a[0],Gt=a[4],tn=a[8],It=a[12],Dt=a[1],bn=a[5],Yn=a[9],Kn=a[13],rr=a[2],wr=a[6],nr=a[10],Hr=a[14],cr=a[3],Yr=a[7],fi=a[11],Oi=a[15];return u[0]=_*Mt+A*Dt+k*rr+B*cr,u[4]=_*Gt+A*bn+k*wr+B*Yr,u[8]=_*tn+A*Yn+k*nr+B*fi,u[12]=_*It+A*Kn+k*Hr+B*Oi,u[1]=ee*Mt+ae*Dt+pe*rr+_e*cr,u[5]=ee*Gt+ae*bn+pe*wr+_e*Yr,u[9]=ee*tn+ae*Yn+pe*nr+_e*fi,u[13]=ee*It+ae*Kn+pe*Hr+_e*Oi,u[2]=Re*Mt+Be*Dt+Le*rr+Oe*cr,u[6]=Re*Gt+Be*bn+Le*wr+Oe*Yr,u[10]=Re*tn+Be*Yn+Le*nr+Oe*fi,u[14]=Re*It+Be*Kn+Le*Hr+Oe*Oi,u[3]=ft*Mt+dt*Dt+st*rr+Yt*cr,u[7]=ft*Gt+dt*bn+st*wr+Yt*Yr,u[11]=ft*tn+dt*Yn+st*nr+Yt*fi,u[15]=ft*It+dt*Kn+st*Hr+Yt*Oi,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],s=t[4],a=t[8],u=t[12],_=t[1],A=t[5],k=t[9],B=t[13],ee=t[2],ae=t[6],pe=t[10],_e=t[14];return t[3]*(+u*k*ae-a*B*ae-u*A*pe+s*B*pe+a*A*_e-s*k*_e)+t[7]*(+r*k*_e-r*B*pe+u*_*pe-a*_*_e+a*B*ee-u*k*ee)+t[11]*(+r*B*ae-r*A*_e-u*_*ae+s*_*_e+u*A*ee-s*B*ee)+t[15]*(-a*A*ee-r*k*ae+r*A*pe+a*_*ae-s*_*pe+s*k*ee)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,s){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=r,a[14]=s),this}invert(){const t=this.elements,r=t[0],s=t[1],a=t[2],u=t[3],_=t[4],A=t[5],k=t[6],B=t[7],ee=t[8],ae=t[9],pe=t[10],_e=t[11],Re=t[12],Be=t[13],Le=t[14],Oe=t[15],ft=ae*Le*B-Be*pe*B+Be*k*_e-A*Le*_e-ae*k*Oe+A*pe*Oe,dt=Re*pe*B-ee*Le*B-Re*k*_e+_*Le*_e+ee*k*Oe-_*pe*Oe,st=ee*Be*B-Re*ae*B+Re*A*_e-_*Be*_e-ee*A*Oe+_*ae*Oe,Yt=Re*ae*k-ee*Be*k-Re*A*pe+_*Be*pe+ee*A*Le-_*ae*Le,Mt=r*ft+s*dt+a*st+u*Yt;if(0===Mt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Gt=1/Mt;return t[0]=ft*Gt,t[1]=(Be*pe*u-ae*Le*u-Be*a*_e+s*Le*_e+ae*a*Oe-s*pe*Oe)*Gt,t[2]=(A*Le*u-Be*k*u+Be*a*B-s*Le*B-A*a*Oe+s*k*Oe)*Gt,t[3]=(ae*k*u-A*pe*u-ae*a*B+s*pe*B+A*a*_e-s*k*_e)*Gt,t[4]=dt*Gt,t[5]=(ee*Le*u-Re*pe*u+Re*a*_e-r*Le*_e-ee*a*Oe+r*pe*Oe)*Gt,t[6]=(Re*k*u-_*Le*u-Re*a*B+r*Le*B+_*a*Oe-r*k*Oe)*Gt,t[7]=(_*pe*u-ee*k*u+ee*a*B-r*pe*B-_*a*_e+r*k*_e)*Gt,t[8]=st*Gt,t[9]=(Re*ae*u-ee*Be*u-Re*s*_e+r*Be*_e+ee*s*Oe-r*ae*Oe)*Gt,t[10]=(_*Be*u-Re*A*u+Re*s*B-r*Be*B-_*s*Oe+r*A*Oe)*Gt,t[11]=(ee*A*u-_*ae*u-ee*s*B+r*ae*B+_*s*_e-r*A*_e)*Gt,t[12]=Yt*Gt,t[13]=(ee*Be*a-Re*ae*a+Re*s*pe-r*Be*pe-ee*s*Le+r*ae*Le)*Gt,t[14]=(Re*A*a-_*Be*a-Re*s*k+r*Be*k+_*s*Le-r*A*Le)*Gt,t[15]=(_*ae*a-ee*A*a+ee*s*k-r*ae*k-_*s*pe+r*A*pe)*Gt,this}scale(t){const r=this.elements,s=t.x,a=t.y,u=t.z;return r[0]*=s,r[4]*=a,r[8]*=u,r[1]*=s,r[5]*=a,r[9]*=u,r[2]*=s,r[6]*=a,r[10]*=u,r[3]*=s,r[7]*=a,r[11]*=u,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,r,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,s,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,r,-s,0,0,s,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,0,s,0,0,1,0,0,-s,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),s=Math.sin(t);return this.set(r,-s,0,0,s,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const s=Math.cos(r),a=Math.sin(r),u=1-s,_=t.x,A=t.y,k=t.z,B=u*_,ee=u*A;return this.set(B*_+s,B*A-a*k,B*k+a*A,0,B*A+a*k,ee*A+s,ee*k-a*_,0,B*k-a*A,ee*k+a*_,u*k*k+s,0,0,0,0,1),this}makeScale(t,r,s){return this.set(t,0,0,0,0,r,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,r,s,a,u,_){return this.set(1,s,u,0,t,1,_,0,r,a,1,0,0,0,0,1),this}compose(t,r,s){const a=this.elements,u=r._x,_=r._y,A=r._z,k=r._w,B=u+u,ee=_+_,ae=A+A,pe=u*B,_e=u*ee,Re=u*ae,Be=_*ee,Le=_*ae,Oe=A*ae,ft=k*B,dt=k*ee,st=k*ae,Yt=s.x,Mt=s.y,Gt=s.z;return a[0]=(1-(Be+Oe))*Yt,a[1]=(_e+st)*Yt,a[2]=(Re-dt)*Yt,a[3]=0,a[4]=(_e-st)*Mt,a[5]=(1-(pe+Oe))*Mt,a[6]=(Le+ft)*Mt,a[7]=0,a[8]=(Re+dt)*Gt,a[9]=(Le-ft)*Gt,a[10]=(1-(pe+Be))*Gt,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,r,s){const a=this.elements;let u=Al.set(a[0],a[1],a[2]).length();const _=Al.set(a[4],a[5],a[6]).length(),A=Al.set(a[8],a[9],a[10]).length();this.determinant()<0&&(u=-u),t.x=a[12],t.y=a[13],t.z=a[14],Yo.copy(this);const B=1/u,ee=1/_,ae=1/A;return Yo.elements[0]*=B,Yo.elements[1]*=B,Yo.elements[2]*=B,Yo.elements[4]*=ee,Yo.elements[5]*=ee,Yo.elements[6]*=ee,Yo.elements[8]*=ae,Yo.elements[9]*=ae,Yo.elements[10]*=ae,r.setFromRotationMatrix(Yo),s.x=u,s.y=_,s.z=A,this}makePerspective(t,r,s,a,u,_,A=At){const k=this.elements,B=2*u/(r-t),ee=2*u/(s-a),ae=(r+t)/(r-t),pe=(s+a)/(s-a);let _e,Re;if(A===At)_e=-(_+u)/(_-u),Re=-2*_*u/(_-u);else{if(2001!==A)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+A);_e=-_/(_-u),Re=-_*u/(_-u)}return k[0]=B,k[4]=0,k[8]=ae,k[12]=0,k[1]=0,k[5]=ee,k[9]=pe,k[13]=0,k[2]=0,k[6]=0,k[10]=_e,k[14]=Re,k[3]=0,k[7]=0,k[11]=-1,k[15]=0,this}makeOrthographic(t,r,s,a,u,_,A=At){const k=this.elements,B=1/(r-t),ee=1/(s-a),ae=1/(_-u),pe=(r+t)*B,_e=(s+a)*ee;let Re,Be;if(A===At)Re=(_+u)*ae,Be=-2*ae;else{if(2001!==A)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+A);Re=u*ae,Be=-1*ae}return k[0]=2*B,k[4]=0,k[8]=0,k[12]=-pe,k[1]=0,k[5]=2*ee,k[9]=0,k[13]=-_e,k[2]=0,k[6]=0,k[10]=Be,k[14]=-Re,k[3]=0,k[7]=0,k[11]=0,k[15]=1,this}equals(t){const r=this.elements,s=t.elements;for(let a=0;a<16;a++)if(r[a]!==s[a])return!1;return!0}fromArray(t,r=0){for(let s=0;s<16;s++)this.elements[s]=t[s+r];return this}toArray(t=[],r=0){const s=this.elements;return t[r]=s[0],t[r+1]=s[1],t[r+2]=s[2],t[r+3]=s[3],t[r+4]=s[4],t[r+5]=s[5],t[r+6]=s[6],t[r+7]=s[7],t[r+8]=s[8],t[r+9]=s[9],t[r+10]=s[10],t[r+11]=s[11],t[r+12]=s[12],t[r+13]=s[13],t[r+14]=s[14],t[r+15]=s[15],t}}const Al=new St,Yo=new Li,Gf=new St(0,0,0),Ou=new St(1,1,1),ci=new St,Qr=new St,mi=new St,Ss=new Li,Oo=new an;let $o=(()=>{class v{constructor(r=0,s=0,a=0,u=v.DEFAULT_ORDER){this.isEuler=!0,this._x=r,this._y=s,this._z=a,this._order=u}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,s,a,u=this._order){return this._x=r,this._y=s,this._z=a,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,s=this._order,a=!0){const u=r.elements,_=u[0],A=u[4],k=u[8],B=u[1],ee=u[5],ae=u[9],pe=u[2],_e=u[6],Re=u[10];switch(s){case"XYZ":this._y=Math.asin(on(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(-ae,Re),this._z=Math.atan2(-A,_)):(this._x=Math.atan2(_e,ee),this._z=0);break;case"YXZ":this._x=Math.asin(-on(ae,-1,1)),Math.abs(ae)<.9999999?(this._y=Math.atan2(k,Re),this._z=Math.atan2(B,ee)):(this._y=Math.atan2(-pe,_),this._z=0);break;case"ZXY":this._x=Math.asin(on(_e,-1,1)),Math.abs(_e)<.9999999?(this._y=Math.atan2(-pe,Re),this._z=Math.atan2(-A,ee)):(this._y=0,this._z=Math.atan2(B,_));break;case"ZYX":this._y=Math.asin(-on(pe,-1,1)),Math.abs(pe)<.9999999?(this._x=Math.atan2(_e,Re),this._z=Math.atan2(B,_)):(this._x=0,this._z=Math.atan2(-A,ee));break;case"YZX":this._z=Math.asin(on(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(-ae,ee),this._y=Math.atan2(-pe,_)):(this._x=0,this._y=Math.atan2(k,Re));break;case"XZY":this._z=Math.asin(-on(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(_e,ee),this._y=Math.atan2(k,_)):(this._x=Math.atan2(-ae,Re),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===a&&this._onChangeCallback(),this}setFromQuaternion(r,s,a){return Ss.makeRotationFromQuaternion(r),this.setFromRotationMatrix(Ss,s,a)}setFromVector3(r,s=this._order){return this.set(r.x,r.y,r.z,s)}reorder(r){return Oo.setFromEuler(this),this.setFromQuaternion(Oo,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],s=0){return r[s]=this._x,r[s+1]=this._y,r[s+2]=this._z,r[s+3]=this._order,r}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return v.DEFAULT_ORDER="XYZ",v})();class _a{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return!!(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let nl=0;const ao=new St,Uc=new an,Cl=new Li,oa=new St,Dl=new St,Ra=new St,lu=new an,cu=new St(1,0,0),zf=new St(0,1,0),kd=new St(0,0,1),$f={type:"added"},Bm={type:"removed"},rl={type:"childadded",child:null},Ld={type:"childremoved",child:null};let Eo=(()=>{class v extends Mn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nl++}),this.uuid=ht(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DEFAULT_UP.clone();const r=new St,s=new $o,a=new an,u=new St(1,1,1);s._onChange(function _(){a.setFromEuler(s,!1)}),a._onChange(function A(){s.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Li},normalMatrix:{value:new Yi}}),this.matrix=new Li,this.matrixWorld=new Li,this.matrixAutoUpdate=v.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _a,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,s){this.quaternion.setFromAxisAngle(r,s)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,s){return Uc.setFromAxisAngle(r,s),this.quaternion.multiply(Uc),this}rotateOnWorldAxis(r,s){return Uc.setFromAxisAngle(r,s),this.quaternion.premultiply(Uc),this}rotateX(r){return this.rotateOnAxis(cu,r)}rotateY(r){return this.rotateOnAxis(zf,r)}rotateZ(r){return this.rotateOnAxis(kd,r)}translateOnAxis(r,s){return ao.copy(r).applyQuaternion(this.quaternion),this.position.add(ao.multiplyScalar(s)),this}translateX(r){return this.translateOnAxis(cu,r)}translateY(r){return this.translateOnAxis(zf,r)}translateZ(r){return this.translateOnAxis(kd,r)}localToWorld(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return this.updateWorldMatrix(!0,!1),r.applyMatrix4(Cl.copy(this.matrixWorld).invert())}lookAt(r,s,a){r.isVector3?oa.copy(r):oa.set(r,s,a);const u=this.parent;this.updateWorldMatrix(!0,!1),Dl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cl.lookAt(Dl,oa,this.up):Cl.lookAt(oa,Dl,this.up),this.quaternion.setFromRotationMatrix(Cl),u&&(Cl.extractRotation(u.matrixWorld),Uc.setFromRotationMatrix(Cl),this.quaternion.premultiply(Uc.invert()))}add(r){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(r.removeFromParent(),r.parent=this,this.children.push(r),r.dispatchEvent($f),rl.child=r,this.dispatchEvent(rl),rl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const s=this.children.indexOf(r);return-1!==s&&(r.parent=null,this.children.splice(s,1),r.dispatchEvent(Bm),Ld.child=r,this.dispatchEvent(Ld),Ld.child=null),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){return this.remove(...this.children)}attach(r){return this.updateWorldMatrix(!0,!1),Cl.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),Cl.multiply(r.parent.matrixWorld)),r.applyMatrix4(Cl),r.removeFromParent(),r.parent=this,this.children.push(r),r.updateWorldMatrix(!1,!0),r.dispatchEvent($f),rl.child=r,this.dispatchEvent(rl),rl.child=null,this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,s){if(this[r]===s)return this;for(let a=0,u=this.children.length;a<u;a++){const A=this.children[a].getObjectByProperty(r,s);if(void 0!==A)return A}}getObjectsByProperty(r,s,a=[]){this[r]===s&&a.push(this);const u=this.children;for(let _=0,A=u.length;_<A;_++)u[_].getObjectsByProperty(r,s,a);return a}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dl,r,Ra),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dl,lu,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return r.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(r){r(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].traverseVisible(r)}traverseAncestors(r){const s=this.parent;null!==s&&(r(s),s.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,r=!0);const s=this.children;for(let a=0,u=s.length;a<u;a++)s[a].updateMatrixWorld(r)}updateWorldMatrix(r,s){const a=this.parent;if(!0===r&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===s){const u=this.children;for(let _=0,A=u.length;_<A;_++)u[_].updateWorldMatrix(!1,!0)}}toJSON(r){const s=void 0===r||"string"==typeof r,a={};s&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const u={};function _(k,B){return void 0===k[B.uuid]&&(k[B.uuid]=B.toJSON(r)),B.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(k=>({boxInitialized:k.boxInitialized,boxMin:k.box.min.toArray(),boxMax:k.box.max.toArray(),sphereInitialized:k.sphereInitialized,sphereRadius:k.sphere.radius,sphereCenter:k.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(r),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(r)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=_(r.geometries,this.geometry);const k=this.geometry.parameters;if(void 0!==k&&void 0!==k.shapes){const B=k.shapes;if(Array.isArray(B))for(let ee=0,ae=B.length;ee<ae;ee++)_(r.shapes,B[ee]);else _(r.shapes,B)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(_(r.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const k=[];for(let B=0,ee=this.material.length;B<ee;B++)k.push(_(r.materials,this.material[B]));u.material=k}else u.material=_(r.materials,this.material);if(this.children.length>0){u.children=[];for(let k=0;k<this.children.length;k++)u.children.push(this.children[k].toJSON(r).object)}if(this.animations.length>0){u.animations=[];for(let k=0;k<this.animations.length;k++)u.animations.push(_(r.animations,this.animations[k]))}if(s){const k=A(r.geometries),B=A(r.materials),ee=A(r.textures),ae=A(r.images),pe=A(r.shapes),_e=A(r.skeletons),Re=A(r.animations),Be=A(r.nodes);k.length>0&&(a.geometries=k),B.length>0&&(a.materials=B),ee.length>0&&(a.textures=ee),ae.length>0&&(a.images=ae),pe.length>0&&(a.shapes=pe),_e.length>0&&(a.skeletons=_e),Re.length>0&&(a.animations=Re),Be.length>0&&(a.nodes=Be)}return a.object=u,a;function A(k){const B=[];for(const ee in k){const ae=k[ee];delete ae.metadata,B.push(ae)}return B}}clone(r){return(new this.constructor).copy(this,r)}copy(r,s=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldAutoUpdate=r.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.animations=r.animations.slice(),this.userData=JSON.parse(JSON.stringify(r.userData)),!0===s)for(let a=0;a<r.children.length;a++)this.add(r.children[a].clone());return this}}return v.DEFAULT_UP=new St(0,1,0),v.DEFAULT_MATRIX_AUTO_UPDATE=!0,v.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,v})();const dc=new St,Bc=new St,Hf=new St,Vc=new St,ku=new St,rd=new St,me=new St,Ce=new St,$e=new St,Me=new St,qe=new Gs,Pt=new Gs,Vt=new Gs;class Vn{constructor(t=new St,r=new St,s=new St){this.a=t,this.b=r,this.c=s}static getNormal(t,r,s,a){a.subVectors(s,r),dc.subVectors(t,r),a.cross(dc);const u=a.lengthSq();return u>0?a.multiplyScalar(1/Math.sqrt(u)):a.set(0,0,0)}static getBarycoord(t,r,s,a,u){dc.subVectors(a,r),Bc.subVectors(s,r),Hf.subVectors(t,r);const _=dc.dot(dc),A=dc.dot(Bc),k=dc.dot(Hf),B=Bc.dot(Bc),ee=Bc.dot(Hf),ae=_*B-A*A;if(0===ae)return u.set(0,0,0),null;const pe=1/ae,_e=(B*k-A*ee)*pe,Re=(_*ee-A*k)*pe;return u.set(1-_e-Re,Re,_e)}static containsPoint(t,r,s,a){return null!==this.getBarycoord(t,r,s,a,Vc)&&Vc.x>=0&&Vc.y>=0&&Vc.x+Vc.y<=1}static getInterpolation(t,r,s,a,u,_,A,k){return null===this.getBarycoord(t,r,s,a,Vc)?(k.x=0,k.y=0,"z"in k&&(k.z=0),"w"in k&&(k.w=0),null):(k.setScalar(0),k.addScaledVector(u,Vc.x),k.addScaledVector(_,Vc.y),k.addScaledVector(A,Vc.z),k)}static getInterpolatedAttribute(t,r,s,a,u,_){return qe.setScalar(0),Pt.setScalar(0),Vt.setScalar(0),qe.fromBufferAttribute(t,r),Pt.fromBufferAttribute(t,s),Vt.fromBufferAttribute(t,a),_.setScalar(0),_.addScaledVector(qe,u.x),_.addScaledVector(Pt,u.y),_.addScaledVector(Vt,u.z),_}static isFrontFacing(t,r,s,a){return dc.subVectors(s,r),Bc.subVectors(t,r),dc.cross(Bc).dot(a)<0}set(t,r,s){return this.a.copy(t),this.b.copy(r),this.c.copy(s),this}setFromPointsAndIndices(t,r,s,a){return this.a.copy(t[r]),this.b.copy(t[s]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,r,s,a){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,a),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return dc.subVectors(this.c,this.b),Bc.subVectors(this.a,this.b),.5*dc.cross(Bc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Vn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return Vn.getBarycoord(t,this.a,this.b,this.c,r)}getInterpolation(t,r,s,a,u){return Vn.getInterpolation(t,this.a,this.b,this.c,r,s,a,u)}containsPoint(t){return Vn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Vn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const s=this.a,a=this.b,u=this.c;let _,A;ku.subVectors(a,s),rd.subVectors(u,s),Ce.subVectors(t,s);const k=ku.dot(Ce),B=rd.dot(Ce);if(k<=0&&B<=0)return r.copy(s);$e.subVectors(t,a);const ee=ku.dot($e),ae=rd.dot($e);if(ee>=0&&ae<=ee)return r.copy(a);const pe=k*ae-ee*B;if(pe<=0&&k>=0&&ee<=0)return _=k/(k-ee),r.copy(s).addScaledVector(ku,_);Me.subVectors(t,u);const _e=ku.dot(Me),Re=rd.dot(Me);if(Re>=0&&_e<=Re)return r.copy(u);const Be=_e*B-k*Re;if(Be<=0&&B>=0&&Re<=0)return A=B/(B-Re),r.copy(s).addScaledVector(rd,A);const Le=ee*Re-_e*ae;if(Le<=0&&ae-ee>=0&&_e-Re>=0)return me.subVectors(u,a),A=(ae-ee)/(ae-ee+(_e-Re)),r.copy(a).addScaledVector(me,A);const Oe=1/(Le+Be+pe);return _=Be*Oe,A=pe*Oe,r.copy(s).addScaledVector(ku,_).addScaledVector(rd,A)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ln={h:0,s:0,l:0},Gr={h:0,s:0,l:0};function Ci(v,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?v+6*(t-v)*r:r<.5?t:r<2/3?v+6*(t-v)*(2/3-r):v}class kr{constructor(t,r,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,s)}set(t,r,s){if(void 0===r&&void 0===s){const a=t;a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a)}else this.setRGB(t,r,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=zi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,xs.toWorkingColorSpace(this,r),this}setRGB(t,r,s,a=xs.workingColorSpace){return this.r=t,this.g=r,this.b=s,xs.toWorkingColorSpace(this,a),this}setHSL(t,r,s,a=xs.workingColorSpace){if(t=Dn(t,1),r=on(r,0,1),s=on(s,0,1),0===r)this.r=this.g=this.b=s;else{const u=s<=.5?s*(1+r):s+r-s*r,_=2*s-u;this.r=Ci(_,u,t+1/3),this.g=Ci(_,u,t),this.b=Ci(_,u,t-1/3)}return xs.toWorkingColorSpace(this,a),this}setStyle(t,r=zi){function s(u){void 0!==u&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let u;const A=a[2];switch(a[1]){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,r);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,r);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return s(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const u=a[1],_=u.length;if(3===_)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,r);if(6===_)return this.setHex(parseInt(u,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=zi){const s=xr[t.toLowerCase()];return void 0!==s?this.setHex(s,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ml(t.r),this.g=Ml(t.g),this.b=Ml(t.b),this}copyLinearToSRGB(t){return this.r=wc(t.r),this.g=wc(t.g),this.b=wc(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=zi){return xs.fromWorkingColorSpace(gi.copy(this),t),65536*Math.round(on(255*gi.r,0,255))+256*Math.round(on(255*gi.g,0,255))+Math.round(on(255*gi.b,0,255))}getHexString(t=zi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=xs.workingColorSpace){xs.fromWorkingColorSpace(gi.copy(this),r);const s=gi.r,a=gi.g,u=gi.b,_=Math.max(s,a,u),A=Math.min(s,a,u);let k,B;const ee=(A+_)/2;if(A===_)k=0,B=0;else{const ae=_-A;switch(B=ee<=.5?ae/(_+A):ae/(2-_-A),_){case s:k=(a-u)/ae+(a<u?6:0);break;case a:k=(u-s)/ae+2;break;case u:k=(s-a)/ae+4}k/=6}return t.h=k,t.s=B,t.l=ee,t}getRGB(t,r=xs.workingColorSpace){return xs.fromWorkingColorSpace(gi.copy(this),r),t.r=gi.r,t.g=gi.g,t.b=gi.b,t}getStyle(t=zi){xs.fromWorkingColorSpace(gi.copy(this),t);const r=gi.r,s=gi.g,a=gi.b;return t!==zi?`color(${t} ${r.toFixed(3)} ${s.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*a)})`}offsetHSL(t,r,s){return this.getHSL(Ln),this.setHSL(Ln.h+t,Ln.s+r,Ln.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(Ln),t.getHSL(Gr);const s=Zr(Ln.h,Gr.h,r),a=Zr(Ln.s,Gr.s,r),u=Zr(Ln.l,Gr.l,r);return this.setHSL(s,a,u),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const r=this.r,s=this.g,a=this.b,u=t.elements;return this.r=u[0]*r+u[3]*s+u[6]*a,this.g=u[1]*r+u[4]*s+u[7]*a,this.b=u[2]*r+u[5]*s+u[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const gi=new kr;kr.NAMES=xr;let Zo=0;class Zs extends Mn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zo++}),this.uuid=ht(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kr(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Br,this.stencilZFail=Br,this.stencilZPass=Br,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){const s=t[r];if(void 0===s){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const a=this[r];void 0!==a?a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[r]=s:console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`)}}toJSON(t){const r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function a(u){const _=[];for(const A in u){const k=u[A];delete k.metadata,_.push(k)}return _}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),void 0!==this.sheen&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(s.dispersion=this.dispersion),void 0!==this.iridescence&&(s.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(s.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(s.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(s.combine=this.combine)),void 0!==this.envMapRotation&&(s.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(s.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(s.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(s.size=this.size),null!==this.shadowSide&&(s.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(s.blending=this.blending),0!==this.side&&(s.side=this.side),!0===this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=!0),204!==this.blendSrc&&(s.blendSrc=this.blendSrc),205!==this.blendDst&&(s.blendDst=this.blendDst),100!==this.blendEquation&&(s.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(s.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(s.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(s.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(s.depthFunc=this.depthFunc),!1===this.depthTest&&(s.depthTest=this.depthTest),!1===this.depthWrite&&(s.depthWrite=this.depthWrite),!1===this.colorWrite&&(s.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(s.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(s.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(s.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Br&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Br&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Br&&(s.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(s.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.alphaHash&&(s.alphaHash=!0),!0===this.alphaToCoverage&&(s.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=!0),!0===this.forceSinglePass&&(s.forceSinglePass=!0),!0===this.wireframe&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(s.flatShading=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),!1===this.fog&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData),r){const u=a(t.textures),_=a(t.images);u.length>0&&(s.textures=u),_.length>0&&(s.images=_)}return s}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let s=null;if(null!==r){const a=r.length;s=new Array(a);for(let u=0;u!==a;++u)s[u]=r[u].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Co extends Zs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ma=new St,hc=new pr;let nE=0;class to{constructor(t,r,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:nE++}),this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=s,this.usage=35044,this.updateRanges=[],this.gpuType=N,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,r,s){t*=this.itemSize,s*=r.itemSize;for(let a=0,u=this.itemSize;a<u;a++)this.array[t+a]=r.array[s+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,s=this.count;r<s;r++)hc.fromBufferAttribute(this,r),hc.applyMatrix3(t),this.setXY(r,hc.x,hc.y);else if(3===this.itemSize)for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyMatrix3(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}applyMatrix4(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyMatrix4(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.applyNormalMatrix(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)ma.fromBufferAttribute(this,r),ma.transformDirection(t),this.setXYZ(r,ma.x,ma.y,ma.z);return this}set(t,r=0){return this.array.set(t,r),this}getComponent(t,r){let s=this.array[t*this.itemSize+r];return this.normalized&&(s=js(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=bi(s,this.array)),this.array[t*this.itemSize+r]=s,this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=js(r,this.array)),r}setX(t,r){return this.normalized&&(r=bi(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=js(r,this.array)),r}setY(t,r){return this.normalized&&(r=bi(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=js(r,this.array)),r}setZ(t,r){return this.normalized&&(r=bi(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=js(r,this.array)),r}setW(t,r){return this.normalized&&(r=bi(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,s){return t*=this.itemSize,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array)),this.array[t+0]=r,this.array[t+1]=s,this}setXYZ(t,r,s,a){return t*=this.itemSize,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array),a=bi(a,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=a,this}setXYZW(t,r,s,a,u){return t*=this.itemSize,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array),a=bi(a,this.array),u=bi(u,this.array)),this.array[t+0]=r,this.array[t+1]=s,this.array[t+2]=a,this.array[t+3]=u,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class Lu extends to{constructor(t,r,s){super(new Uint16Array(t),r,s)}}class Wf extends to{constructor(t,r,s){super(new Uint32Array(t),r,s)}}class Ni extends to{constructor(t,r,s){super(new Float32Array(t),r,s)}}let Gm=0;const Rl=new Li,Hl=new Eo,xc=new St,Pl=new ot,Th=new ot,il=new St;class gs extends Mn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gm++}),this.uuid=ht(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(Od(t)?Wf:Lu)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,s=0){this.groups.push({start:t,count:r,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const u=(new Yi).getNormalMatrix(t);s.applyNormalMatrix(u),s.needsUpdate=!0}const a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(t),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Rl.makeRotationFromQuaternion(t),this.applyMatrix4(Rl),this}rotateX(t){return Rl.makeRotationX(t),this.applyMatrix4(Rl),this}rotateY(t){return Rl.makeRotationY(t),this.applyMatrix4(Rl),this}rotateZ(t){return Rl.makeRotationZ(t),this.applyMatrix4(Rl),this}translate(t,r,s){return Rl.makeTranslation(t,r,s),this.applyMatrix4(Rl),this}scale(t,r,s){return Rl.makeScale(t,r,s),this.applyMatrix4(Rl),this}lookAt(t){return Hl.lookAt(t),Hl.updateMatrix(),this.applyMatrix4(Hl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xc).negate(),this.translate(xc.x,xc.y,xc.z),this}setFromPoints(t){const r=this.getAttribute("position");if(void 0===r){const s=[];for(let a=0,u=t.length;a<u;a++){const _=t[a];s.push(_.x,_.y,_.z||0)}this.setAttribute("position",new Ni(s,3))}else{const s=Math.min(t.length,r.count);for(let a=0;a<s;a++){const u=t[a];r.setXYZ(a,u.x,u.y,u.z||0)}t.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ot);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new St(-1/0,-1/0,-1/0),new St(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let s=0,a=r.length;s<a;s++)Pl.setFromBufferAttribute(r[s]),this.morphTargetsRelative?(il.addVectors(this.boundingBox.min,Pl.min),this.boundingBox.expandByPoint(il),il.addVectors(this.boundingBox.max,Pl.max),this.boundingBox.expandByPoint(il)):(this.boundingBox.expandByPoint(Pl.min),this.boundingBox.expandByPoint(Pl.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new us);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new St,1/0);if(t){const s=this.boundingSphere.center;if(Pl.setFromBufferAttribute(t),r)for(let u=0,_=r.length;u<_;u++)Th.setFromBufferAttribute(r[u]),this.morphTargetsRelative?(il.addVectors(Pl.min,Th.min),Pl.expandByPoint(il),il.addVectors(Pl.max,Th.max),Pl.expandByPoint(il)):(Pl.expandByPoint(Th.min),Pl.expandByPoint(Th.max));Pl.getCenter(s);let a=0;for(let u=0,_=t.count;u<_;u++)il.fromBufferAttribute(t,u),a=Math.max(a,s.distanceToSquared(il));if(r)for(let u=0,_=r.length;u<_;u++){const A=r[u],k=this.morphTargetsRelative;for(let B=0,ee=A.count;B<ee;B++)il.fromBufferAttribute(A,B),k&&(xc.fromBufferAttribute(t,B),il.add(xc)),a=Math.max(a,s.distanceToSquared(il))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=r.position,a=r.normal,u=r.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new to(new Float32Array(4*s.count),4));const _=this.getAttribute("tangent"),A=[],k=[];for(let tn=0;tn<s.count;tn++)A[tn]=new St,k[tn]=new St;const B=new St,ee=new St,ae=new St,pe=new pr,_e=new pr,Re=new pr,Be=new St,Le=new St;function Oe(tn,It,Dt){B.fromBufferAttribute(s,tn),ee.fromBufferAttribute(s,It),ae.fromBufferAttribute(s,Dt),pe.fromBufferAttribute(u,tn),_e.fromBufferAttribute(u,It),Re.fromBufferAttribute(u,Dt),ee.sub(B),ae.sub(B),_e.sub(pe),Re.sub(pe);const bn=1/(_e.x*Re.y-Re.x*_e.y);isFinite(bn)&&(Be.copy(ee).multiplyScalar(Re.y).addScaledVector(ae,-_e.y).multiplyScalar(bn),Le.copy(ae).multiplyScalar(_e.x).addScaledVector(ee,-Re.x).multiplyScalar(bn),A[tn].add(Be),A[It].add(Be),A[Dt].add(Be),k[tn].add(Le),k[It].add(Le),k[Dt].add(Le))}let ft=this.groups;0===ft.length&&(ft=[{start:0,count:t.count}]);for(let tn=0,It=ft.length;tn<It;++tn){const Dt=ft[tn],bn=Dt.start;for(let Kn=bn,rr=bn+Dt.count;Kn<rr;Kn+=3)Oe(t.getX(Kn+0),t.getX(Kn+1),t.getX(Kn+2))}const dt=new St,st=new St,Yt=new St,Mt=new St;function Gt(tn){Yt.fromBufferAttribute(a,tn),Mt.copy(Yt);const It=A[tn];dt.copy(It),dt.sub(Yt.multiplyScalar(Yt.dot(It))).normalize(),st.crossVectors(Mt,It);const bn=st.dot(k[tn])<0?-1:1;_.setXYZW(tn,dt.x,dt.y,dt.z,bn)}for(let tn=0,It=ft.length;tn<It;++tn){const Dt=ft[tn],bn=Dt.start;for(let Kn=bn,rr=bn+Dt.count;Kn<rr;Kn+=3)Gt(t.getX(Kn+0)),Gt(t.getX(Kn+1)),Gt(t.getX(Kn+2))}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(void 0!==r){let s=this.getAttribute("normal");if(void 0===s)s=new to(new Float32Array(3*r.count),3),this.setAttribute("normal",s);else for(let pe=0,_e=s.count;pe<_e;pe++)s.setXYZ(pe,0,0,0);const a=new St,u=new St,_=new St,A=new St,k=new St,B=new St,ee=new St,ae=new St;if(t)for(let pe=0,_e=t.count;pe<_e;pe+=3){const Re=t.getX(pe+0),Be=t.getX(pe+1),Le=t.getX(pe+2);a.fromBufferAttribute(r,Re),u.fromBufferAttribute(r,Be),_.fromBufferAttribute(r,Le),ee.subVectors(_,u),ae.subVectors(a,u),ee.cross(ae),A.fromBufferAttribute(s,Re),k.fromBufferAttribute(s,Be),B.fromBufferAttribute(s,Le),A.add(ee),k.add(ee),B.add(ee),s.setXYZ(Re,A.x,A.y,A.z),s.setXYZ(Be,k.x,k.y,k.z),s.setXYZ(Le,B.x,B.y,B.z)}else for(let pe=0,_e=r.count;pe<_e;pe+=3)a.fromBufferAttribute(r,pe+0),u.fromBufferAttribute(r,pe+1),_.fromBufferAttribute(r,pe+2),ee.subVectors(_,u),ae.subVectors(a,u),ee.cross(ae),s.setXYZ(pe+0,ee.x,ee.y,ee.z),s.setXYZ(pe+1,ee.x,ee.y,ee.z),s.setXYZ(pe+2,ee.x,ee.y,ee.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let r=0,s=t.count;r<s;r++)il.fromBufferAttribute(t,r),il.normalize(),t.setXYZ(r,il.x,il.y,il.z)}toNonIndexed(){function t(A,k){const B=A.array,ee=A.itemSize,ae=A.normalized,pe=new B.constructor(k.length*ee);let _e=0,Re=0;for(let Be=0,Le=k.length;Be<Le;Be++){_e=A.isInterleavedBufferAttribute?k[Be]*A.data.stride+A.offset:k[Be]*ee;for(let Oe=0;Oe<ee;Oe++)pe[Re++]=B[_e++]}return new to(pe,ee,ae)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new gs,s=this.index.array,a=this.attributes;for(const A in a){const B=t(a[A],s);r.setAttribute(A,B)}const u=this.morphAttributes;for(const A in u){const k=[],B=u[A];for(let ee=0,ae=B.length;ee<ae;ee++){const _e=t(B[ee],s);k.push(_e)}r.morphAttributes[A]=k}r.morphTargetsRelative=this.morphTargetsRelative;const _=this.groups;for(let A=0,k=_.length;A<k;A++){const B=_[A];r.addGroup(B.start,B.count,B.materialIndex)}return r}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const k=this.parameters;for(const B in k)void 0!==k[B]&&(t[B]=k[B]);return t}t.data={attributes:{}};const r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const s=this.attributes;for(const k in s)t.data.attributes[k]=s[k].toJSON(t.data);const a={};let u=!1;for(const k in this.morphAttributes){const B=this.morphAttributes[k],ee=[];for(let ae=0,pe=B.length;ae<pe;ae++)ee.push(B[ae].toJSON(t.data));ee.length>0&&(a[k]=ee,u=!0)}u&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(t.data.groups=JSON.parse(JSON.stringify(_)));const A=this.boundingSphere;return null!==A&&(t.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const s=t.index;null!==s&&this.setIndex(s.clone(r));const a=t.attributes;for(const B in a)this.setAttribute(B,a[B].clone(r));const u=t.morphAttributes;for(const B in u){const ee=[],ae=u[B];for(let pe=0,_e=ae.length;pe<_e;pe++)ee.push(ae[pe].clone(r));this.morphAttributes[B]=ee}this.morphTargetsRelative=t.morphTargetsRelative;const _=t.groups;for(let B=0,ee=_.length;B<ee;B++){const ae=_[B];this.addGroup(ae.start,ae.count,ae.materialIndex)}const A=t.boundingBox;null!==A&&(this.boundingBox=A.clone());const k=t.boundingSphere;return null!==k&&(this.boundingSphere=k.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const id=new Li,sd=new zo,Xf=new us,qy=new St,jd=new St,Mh=new St,Ah=new St,Fd=new St,du=new St,Ky=new St,qf=new St;class ks extends Eo{constructor(t=new gs,r=new Co){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const A=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}getVertexPosition(t,r){const s=this.geometry,u=s.morphAttributes.position,_=s.morphTargetsRelative;r.fromBufferAttribute(s.attributes.position,t);const A=this.morphTargetInfluences;if(u&&A){du.set(0,0,0);for(let k=0,B=u.length;k<B;k++){const ee=A[k];0!==ee&&(Fd.fromBufferAttribute(u[k],t),du.addScaledVector(_?Fd:Fd.sub(r),ee))}r.add(du)}return r}raycast(t,r){const s=this.geometry,u=this.matrixWorld;void 0!==this.material&&(null===s.boundingSphere&&s.computeBoundingSphere(),Xf.copy(s.boundingSphere),Xf.applyMatrix4(u),sd.copy(t.ray).recast(t.near),(!1!==Xf.containsPoint(sd.origin)||!(null===sd.intersectSphere(Xf,qy)||sd.origin.distanceToSquared(qy)>(t.far-t.near)**2))&&(id.copy(u).invert(),sd.copy(t.ray).applyMatrix4(id),(null===s.boundingBox||!1!==sd.intersectsBox(s.boundingBox))&&this._computeIntersections(t,r,sd)))}_computeIntersections(t,r,s){let a;const u=this.geometry,_=this.material,A=u.index,k=u.attributes.position,B=u.attributes.uv,ee=u.attributes.uv1,ae=u.attributes.normal,pe=u.groups,_e=u.drawRange;if(null!==A)if(Array.isArray(_))for(let Re=0,Be=pe.length;Re<Be;Re++){const Le=pe[Re],Oe=_[Le.materialIndex];for(let st=Math.max(Le.start,_e.start),Yt=Math.min(A.count,Math.min(Le.start+Le.count,_e.start+_e.count));st<Yt;st+=3)a=Kf(this,Oe,t,s,B,ee,ae,A.getX(st),A.getX(st+1),A.getX(st+2)),a&&(a.faceIndex=Math.floor(st/3),a.face.materialIndex=Le.materialIndex,r.push(a))}else for(let Le=Math.max(0,_e.start),Oe=Math.min(A.count,_e.start+_e.count);Le<Oe;Le+=3)a=Kf(this,_,t,s,B,ee,ae,A.getX(Le),A.getX(Le+1),A.getX(Le+2)),a&&(a.faceIndex=Math.floor(Le/3),r.push(a));else if(void 0!==k)if(Array.isArray(_))for(let Re=0,Be=pe.length;Re<Be;Re++){const Le=pe[Re],Oe=_[Le.materialIndex];for(let st=Math.max(Le.start,_e.start),Yt=Math.min(k.count,Math.min(Le.start+Le.count,_e.start+_e.count));st<Yt;st+=3)a=Kf(this,Oe,t,s,B,ee,ae,st,st+1,st+2),a&&(a.faceIndex=Math.floor(st/3),a.face.materialIndex=Le.materialIndex,r.push(a))}else for(let Le=Math.max(0,_e.start),Oe=Math.min(k.count,_e.start+_e.count);Le<Oe;Le+=3)a=Kf(this,_,t,s,B,ee,ae,Le,Le+1,Le+2),a&&(a.faceIndex=Math.floor(Le/3),r.push(a))}}function Kf(v,t,r,s,a,u,_,A,k,B){v.getVertexPosition(A,jd),v.getVertexPosition(k,Mh),v.getVertexPosition(B,Ah);const ee=function Yy(v,t,r,s,a,u,_,A){let k;if(k=1===t.side?s.intersectTriangle(_,u,a,!0,A):s.intersectTriangle(a,u,_,0===t.side,A),null===k)return null;qf.copy(A),qf.applyMatrix4(v.matrixWorld);const B=r.ray.origin.distanceTo(qf);return B<r.near||B>r.far?null:{distance:B,point:qf.clone(),object:v}}(v,t,r,s,jd,Mh,Ah,Ky);if(ee){const ae=new St;Vn.getBarycoord(Ky,jd,Mh,Ah,ae),a&&(ee.uv=Vn.getInterpolatedAttribute(a,A,k,B,ae,new pr)),u&&(ee.uv1=Vn.getInterpolatedAttribute(u,A,k,B,ae,new pr)),_&&(ee.normal=Vn.getInterpolatedAttribute(_,A,k,B,ae,new St),ee.normal.dot(s.direction)>0&&ee.normal.multiplyScalar(-1));const pe={a:A,b:k,c:B,normal:new St,materialIndex:0};Vn.getNormal(jd,Mh,Ah,pe.normal),ee.face=pe,ee.barycoord=ae}return ee}class Gc extends gs{constructor(t=1,r=1,s=1,a=1,u=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:s,widthSegments:a,heightSegments:u,depthSegments:_};const A=this;a=Math.floor(a),u=Math.floor(u),_=Math.floor(_);const k=[],B=[],ee=[],ae=[];let pe=0,_e=0;function Re(Be,Le,Oe,ft,dt,st,Yt,Mt,Gt,tn,It){const Dt=st/Gt,bn=Yt/tn,Yn=st/2,Kn=Yt/2,rr=Mt/2,wr=Gt+1,nr=tn+1;let Hr=0,cr=0;const Yr=new St;for(let fi=0;fi<nr;fi++){const Oi=fi*bn-Kn;for(let as=0;as<wr;as++)Yr[Be]=(as*Dt-Yn)*ft,Yr[Le]=Oi*dt,Yr[Oe]=rr,B.push(Yr.x,Yr.y,Yr.z),Yr[Be]=0,Yr[Le]=0,Yr[Oe]=Mt>0?1:-1,ee.push(Yr.x,Yr.y,Yr.z),ae.push(as/Gt),ae.push(1-fi/tn),Hr+=1}for(let fi=0;fi<tn;fi++)for(let Oi=0;Oi<Gt;Oi++){const Ts=pe+Oi+wr*(fi+1),Tr=pe+(Oi+1)+wr*(fi+1),ti=pe+(Oi+1)+wr*fi;k.push(pe+Oi+wr*fi,Ts,ti),k.push(Ts,Tr,ti),cr+=6}A.addGroup(_e,cr,It),_e+=cr,pe+=Hr}Re("z","y","x",-1,-1,s,r,t,_,u,0),Re("z","y","x",1,-1,s,r,-t,_,u,1),Re("x","z","y",1,1,t,s,r,a,_,2),Re("x","z","y",1,-1,t,s,-r,a,_,3),Re("x","y","z",1,-1,t,r,s,a,u,4),Re("x","y","z",-1,-1,t,r,-s,a,u,5),this.setIndex(k),this.setAttribute("position",new Ni(B,3)),this.setAttribute("normal",new Ni(ee,3)),this.setAttribute("uv",new Ni(ae,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Gc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ud(v){const t={};for(const r in v){t[r]={};for(const s in v[r]){const a=v[r][s];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][s]=null):t[r][s]=a.clone():t[r][s]=Array.isArray(a)?a.slice():a}}return t}function Ol(v){const t={};for(let r=0;r<v.length;r++){const s=Ud(v[r]);for(const a in s)t[a]=s[a]}return t}function Zy(v){const t=v.getRenderTarget();return null===t?v.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:xs.workingColorSpace}const kb={clone:Ud,merge:Ol};class tc extends Zs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ud(t.uniforms),this.uniformsGroups=function Ob(v){const t=[];for(let r=0;r<v.length;r++)t.push(v[r].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const _=this.uniforms[a].value;r.uniforms[a]=_&&_.isTexture?{type:"t",value:_.toJSON(t).uuid}:_&&_.isColor?{type:"c",value:_.getHex()}:_&&_.isVector2?{type:"v2",value:_.toArray()}:_&&_.isVector3?{type:"v3",value:_.toArray()}:_&&_.isVector4?{type:"v4",value:_.toArray()}:_&&_.isMatrix3?{type:"m3",value:_.toArray()}:_&&_.isMatrix4?{type:"m4",value:_.toArray()}:{value:_}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const s={};for(const a in this.extensions)!0===this.extensions[a]&&(s[a]=!0);return Object.keys(s).length>0&&(r.extensions=s),r}}class Ho extends Eo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Li,this.projectionMatrix=new Li,this.projectionMatrixInverse=new Li,this.coordinateSystem=At}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Xr=new St,es=new pr,Pa=new pr;class ko extends Ho{constructor(t=50,r=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=2*ke*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Ve*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ke*Math.atan(Math.tan(.5*Ve*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,r,s){Xr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Xr.x,Xr.y).multiplyScalar(-t/Xr.z),Xr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(Xr.x,Xr.y).multiplyScalar(-t/Xr.z)}getViewSize(t,r){return this.getViewBounds(t,es,Pa),r.subVectors(Pa,es)}setViewOffset(t,r,s,a,u,_){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(.5*Ve*this.fov)/this.zoom,s=2*r,a=this.aspect*s,u=-.5*a;const _=this.view;if(null!==this.view&&this.view.enabled){const k=_.fullWidth,B=_.fullHeight;u+=_.offsetX*a/k,r-=_.offsetY*s/B,a*=_.width/k,s*=_.height/B}const A=this.filmOffset;0!==A&&(u+=t*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+a,r,r-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class od extends Eo{constructor(t,r,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ko(-90,1,t,r);a.layers=this.layers,this.add(a);const u=new ko(-90,1,t,r);u.layers=this.layers,this.add(u);const _=new ko(-90,1,t,r);_.layers=this.layers,this.add(_);const A=new ko(-90,1,t,r);A.layers=this.layers,this.add(A);const k=new ko(-90,1,t,r);k.layers=this.layers,this.add(k);const B=new ko(-90,1,t,r);B.layers=this.layers,this.add(B)}updateCoordinateSystem(){const t=this.coordinateSystem,r=this.children.concat(),[s,a,u,_,A,k]=r;for(const B of r)this.remove(B);if(t===At)s.up.set(0,1,0),s.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),_.up.set(0,0,1),_.lookAt(0,-1,0),A.up.set(0,1,0),A.lookAt(0,0,1),k.up.set(0,1,0),k.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);s.up.set(0,-1,0),s.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),_.up.set(0,0,-1),_.lookAt(0,-1,0),A.up.set(0,-1,0),A.lookAt(0,0,1),k.up.set(0,-1,0),k.lookAt(0,0,-1)}for(const B of r)this.add(B),B.updateMatrixWorld()}update(t,r){null===this.parent&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[u,_,A,k,B,ee]=this.children,ae=t.getRenderTarget(),pe=t.getActiveCubeFace(),_e=t.getActiveMipmapLevel(),Re=t.xr.enabled;t.xr.enabled=!1;const Be=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,a),t.render(r,u),t.setRenderTarget(s,1,a),t.render(r,_),t.setRenderTarget(s,2,a),t.render(r,A),t.setRenderTarget(s,3,a),t.render(r,k),t.setRenderTarget(s,4,a),t.render(r,B),s.texture.generateMipmaps=Be,t.setRenderTarget(s,5,a),t.render(r,ee),t.setRenderTarget(ae,pe,_e),t.xr.enabled=Re,s.texture.needsPMREMUpdate=!0}}class Do extends _o{constructor(t,r,s,a,u,_,A,k,B,ee){super(t=void 0!==t?t:[],r=void 0!==r?r:sr,s,a,u,_,A,k,B,ee),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fa extends Te{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1};this.texture=new Do([s,s,s,s,s,s],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Cn}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s_uniforms={tEquirect:{value:null}},s_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",s_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Gc(5,5,5),u=new tc({name:"CubemapFromEquirect",uniforms:Ud(s_uniforms),vertexShader:s_vertexShader,fragmentShader:s_fragmentShader,side:1,blending:0});u.uniforms.tEquirect.value=r;const _=new ks(a,u),A=r.minFilter;return r.minFilter===fr&&(r.minFilter=Cn),new od(1,10,this).update(t,_),r.minFilter=A,_.geometry.dispose(),_.material.dispose(),this}clear(t,r,s,a){const u=t.getRenderTarget();for(let _=0;_<6;_++)t.setRenderTarget(this,_),t.clear(r,s,a);t.setRenderTarget(u)}}class sl extends Eo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ps={type:"move"};class ad{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new sl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new sl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new St,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new St),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new sl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new St,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new St),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const s of t.hand.values())this._getHandJoint(r,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,s){let a=null,u=null,_=null;const A=this._targetRay,k=this._grip,B=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState){if(B&&t.hand){_=!0;for(const Be of t.hand.values()){const Le=r.getJointPose(Be,s),Oe=this._getHandJoint(B,Be);null!==Le&&(Oe.matrix.fromArray(Le.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.rotation,Oe.scale),Oe.matrixWorldNeedsUpdate=!0,Oe.jointRadius=Le.radius),Oe.visible=null!==Le}const pe=B.joints["index-finger-tip"].position.distanceTo(B.joints["thumb-tip"].position),_e=.02,Re=.005;B.inputState.pinching&&pe>_e+Re?(B.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!B.inputState.pinching&&pe<=_e-Re&&(B.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==k&&t.gripSpace&&(u=r.getPose(t.gripSpace,s),null!==u&&(k.matrix.fromArray(u.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.matrixWorldNeedsUpdate=!0,u.linearVelocity?(k.hasLinearVelocity=!0,k.linearVelocity.copy(u.linearVelocity)):k.hasLinearVelocity=!1,u.angularVelocity?(k.hasAngularVelocity=!0,k.angularVelocity.copy(u.angularVelocity)):k.hasAngularVelocity=!1));null!==A&&(a=r.getPose(t.targetRaySpace,s),null===a&&null!==u&&(a=u),null!==a&&(A.matrix.fromArray(a.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,a.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(a.linearVelocity)):A.hasLinearVelocity=!1,a.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(a.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(ps)))}return null!==A&&(A.visible=null!==a),null!==k&&(k.visible=null!==u),null!==B&&(B.visible=null!==_),this}_getHandJoint(t,r){if(void 0===t.joints[r.jointName]){const s=new sl;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[r.jointName]=s,t.add(s)}return t.joints[r.jointName]}}class Jo extends Eo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $o,this.environmentIntensity=1,this.environmentRotation=new $o,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class zc{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=ht()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,r){this.updateRanges.push({start:t,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,s){t*=this.stride,s*=r.stride;for(let a=0,u=this.stride;a<u;a++)this.array[t+a]=r.array[s+a];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ht()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(r,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ht()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ua=new St;class _l{constructor(t,r,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=s,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,s=this.data.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.applyMatrix4(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}applyNormalMatrix(t){for(let r=0,s=this.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.applyNormalMatrix(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}transformDirection(t){for(let r=0,s=this.count;r<s;r++)Ua.fromBufferAttribute(this,r),Ua.transformDirection(t),this.setXYZ(r,Ua.x,Ua.y,Ua.z);return this}getComponent(t,r){let s=this.array[t*this.data.stride+this.offset+r];return this.normalized&&(s=js(s,this.array)),s}setComponent(t,r,s){return this.normalized&&(s=bi(s,this.array)),this.data.array[t*this.data.stride+this.offset+r]=s,this}setX(t,r){return this.normalized&&(r=bi(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=bi(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=bi(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=bi(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=js(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=js(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=js(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=js(r,this.array)),r}setXY(t,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this}setXYZ(t,r,s,a){return t=t*this.data.stride+this.offset,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array),a=bi(a,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=a,this}setXYZW(t,r,s,a,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=bi(r,this.array),s=bi(s,this.array),a=bi(a,this.array),u=bi(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=s,this.data.array[t+2]=a,this.data.array[t+3]=u,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[a+u])}return new to(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new _l(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let s=0;s<this.count;s++){const a=s*this.data.stride+this.offset;for(let u=0;u<this.itemSize;u++)r.push(this.data.array[a+u])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const zd=new St,Jy=new Gs,Qy=new Gs,$m=new St,Hm=new Li,Zf=new St,Dh=new us,Nb=new Li,ev=new zo;class jb extends ks{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=gn,this.bindMatrix=new Li,this.bindMatrixInverse=new Li,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new ot),this.boundingBox.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Zf),this.boundingBox.expandByPoint(Zf)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new us),this.boundingSphere.makeEmpty();const r=t.getAttribute("position");for(let s=0;s<r.count;s++)this.getVertexPosition(s,Zf),this.boundingSphere.expandByPoint(Zf)}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,r){const a=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Dh.copy(this.boundingSphere),Dh.applyMatrix4(a),!1!==t.ray.intersectsSphere(Dh)&&(Nb.copy(a).invert(),ev.copy(t.ray).applyMatrix4(Nb),(null===this.boundingBox||!1!==ev.intersectsBox(this.boundingBox))&&this._computeIntersections(t,r,ev)))}getVertexPosition(t,r){return super.getVertexPosition(t,r),this.applyBoneTransform(t,r),r}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Gs,r=this.geometry.attributes.skinWeight;for(let s=0,a=r.count;s<a;s++){t.fromBufferAttribute(r,s);const u=1/t.manhattanLength();u!==1/0?t.multiplyScalar(u):t.set(1,0,0,0),r.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===gn?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,r){const s=this.skeleton,a=this.geometry;Jy.fromBufferAttribute(a.attributes.skinIndex,t),Qy.fromBufferAttribute(a.attributes.skinWeight,t),zd.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let u=0;u<4;u++){const _=Qy.getComponent(u);if(0!==_){const A=Jy.getComponent(u);Hm.multiplyMatrices(s.bones[A].matrixWorld,s.boneInverses[A]),r.addScaledVector($m.copy(zd).applyMatrix4(Hm),_)}}return r.applyMatrix4(this.bindMatrixInverse)}}class tv extends Eo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends _o{constructor(t=null,r=1,s=1,a,u,_,A,k,B=_n,ee=_n,ae,pe){super(null,_,A,k,B,ee,a,u,ae,pe),this.isDataTexture=!0,this.image={data:t,width:r,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fb=new Li,sE=new Li;class Wm{constructor(t=[],r=[]){this.uuid=ht(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,a=this.bones.length;s<a;s++)this.boneInverses.push(new Li)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const s=new Li;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,r=this.boneInverses,s=this.boneMatrices,a=this.boneTexture;for(let u=0,_=t.length;u<_;u++)Fb.multiplyMatrices(t[u]?t[u].matrixWorld:sE,r[u]),Fb.toArray(s,16*u);null!==a&&(a.needsUpdate=!0)}clone(){return new Wm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const s=new Fu(r,t,t,pt,N);return s.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=s,this}getBoneByName(t){for(let r=0,s=this.bones.length;r<s;r++){const a=this.bones[r];if(a.name===t)return a}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let s=0,a=t.bones.length;s<a;s++){const u=t.bones[s];let _=r[u];void 0===_&&(console.warn("THREE.Skeleton: No bone found with UUID:",u),_=new tv),this.bones.push(_),this.boneInverses.push((new Li).fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,s=this.boneInverses;for(let a=0,u=r.length;a<u;a++)t.bones.push(r[a].uuid),t.boneInverses.push(s[a].toArray());return t}}class Ih extends to{constructor(t,r,s,a=1){super(t,r,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Rh=new Li,Ub=new Li,Xm=[],qm=new ot,nv=new Li,Jf=new ks,Qf=new us;class Bb extends ks{constructor(t,r,s){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Ih(new Float32Array(16*s),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<s;a++)this.setMatrixAt(a,nv)}computeBoundingBox(){const t=this.geometry,r=this.count;null===this.boundingBox&&(this.boundingBox=new ot),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Rh),qm.copy(t.boundingBox).applyMatrix4(Rh),this.boundingBox.union(qm)}computeBoundingSphere(){const t=this.geometry,r=this.count;null===this.boundingSphere&&(this.boundingSphere=new us),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<r;s++)this.getMatrixAt(s,Rh),Qf.copy(t.boundingSphere).applyMatrix4(Rh),this.boundingSphere.union(Qf)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,r){const s=r.morphTargetInfluences,a=this.morphTexture.source.data.data,_=t*(s.length+1)+1;for(let A=0;A<s.length;A++)s[A]=a[_+A]}raycast(t,r){const s=this.matrixWorld,a=this.count;if(Jf.geometry=this.geometry,Jf.material=this.material,void 0!==Jf.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Qf.copy(this.boundingSphere),Qf.applyMatrix4(s),!1!==t.ray.intersectsSphere(Qf)))for(let u=0;u<a;u++){this.getMatrixAt(u,Rh),Ub.multiplyMatrices(s,Rh),Jf.matrixWorld=Ub,Jf.raycast(t,Xm);for(let _=0,A=Xm.length;_<A;_++){const k=Xm[_];k.instanceId=u,k.object=this,r.push(k)}Xm.length=0}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new Ih(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,r){const s=r.morphTargetInfluences,a=s.length+1;null===this.morphTexture&&(this.morphTexture=new Fu(new Float32Array(a*this.count),a,this.count,Ze,N));const u=this.morphTexture.source.data.data;let _=0;for(let B=0;B<s.length;B++)_+=s[B];const k=a*t;u[k]=this.geometry.morphTargetsRelative?1:1-_,u.set(s,k+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const rv=new St,Vb=new St,iv=new Yi;class Wc{constructor(t=new St(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,s,a){return this.normal.set(t,r,s),this.constant=a,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,s){const a=rv.subVectors(s,r).cross(Vb.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,r){const s=t.delta(rv),a=this.normal.dot(s);if(0===a)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;const u=-(t.start.dot(this.normal)+this.constant)/a;return u<0||u>1?null:r.copy(t.start).addScaledVector(s,u)}intersectsLine(t){const r=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return r<0&&s>0||s<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const s=r||iv.getNormalMatrix(t),a=this.coplanarPoint(rv).applyMatrix4(t),u=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(u),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Uu=new us,ep=new St;class tp{constructor(t=new Wc,r=new Wc,s=new Wc,a=new Wc,u=new Wc,_=new Wc){this.planes=[t,r,s,a,u,_]}set(t,r,s,a,u,_){const A=this.planes;return A[0].copy(t),A[1].copy(r),A[2].copy(s),A[3].copy(a),A[4].copy(u),A[5].copy(_),this}copy(t){const r=this.planes;for(let s=0;s<6;s++)r[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,r=At){const s=this.planes,a=t.elements,u=a[0],_=a[1],A=a[2],k=a[3],B=a[4],ee=a[5],ae=a[6],pe=a[7],_e=a[8],Re=a[9],Be=a[10],Le=a[11],Oe=a[12],ft=a[13],dt=a[14],st=a[15];if(s[0].setComponents(k-u,pe-B,Le-_e,st-Oe).normalize(),s[1].setComponents(k+u,pe+B,Le+_e,st+Oe).normalize(),s[2].setComponents(k+_,pe+ee,Le+Re,st+ft).normalize(),s[3].setComponents(k-_,pe-ee,Le-Re,st-ft).normalize(),s[4].setComponents(k-A,pe-ae,Le-Be,st-dt).normalize(),r===At)s[5].setComponents(k+A,pe+ae,Le+Be,st+dt).normalize();else{if(2001!==r)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);s[5].setComponents(A,ae,Be,dt).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Uu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const r=t.geometry;null===r.boundingSphere&&r.computeBoundingSphere(),Uu.copy(r.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Uu)}intersectsSprite(t){return Uu.center.set(0,0,0),Uu.radius=.7071067811865476,Uu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Uu)}intersectsSphere(t){const r=this.planes,s=t.center,a=-t.radius;for(let u=0;u<6;u++)if(r[u].distanceToPoint(s)<a)return!1;return!0}intersectsBox(t){const r=this.planes;for(let s=0;s<6;s++){const a=r[s];if(ep.x=a.normal.x>0?t.max.x:t.min.x,ep.y=a.normal.y>0?t.max.y:t.min.y,ep.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(ep)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let s=0;s<6;s++)if(r[s].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class ol extends Zs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Ll=new St,Oh=new St,Jm=new Li,Hd=new zo,Bu=new us,kh=new St,Lh=new St;class Ec extends Eo{constructor(t=new gs,r=new ol){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[0];for(let a=1,u=r.count;a<u;a++)Ll.fromBufferAttribute(r,a-1),Oh.fromBufferAttribute(r,a),s[a]=s[a-1],s[a]+=Ll.distanceTo(Oh);t.setAttribute("lineDistance",new Ni(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const s=this.geometry,a=this.matrixWorld,u=t.params.Line.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),Bu.copy(s.boundingSphere),Bu.applyMatrix4(a),Bu.radius+=u,!1===t.ray.intersectsSphere(Bu))return;Jm.copy(a).invert(),Hd.copy(t.ray).applyMatrix4(Jm);const A=u/((this.scale.x+this.scale.y+this.scale.z)/3),k=A*A,B=this.isLineSegments?2:1,ee=s.index,pe=s.attributes.position;if(null!==ee){const _e=Math.max(0,_.start),Re=Math.min(ee.count,_.start+_.count);for(let Be=_e,Le=Re-1;Be<Le;Be+=B){const Oe=ee.getX(Be),ft=ee.getX(Be+1),dt=Wd(this,t,Hd,k,Oe,ft,Be);dt&&r.push(dt)}if(this.isLineLoop){const Be=ee.getX(Re-1),Le=ee.getX(_e),Oe=Wd(this,t,Hd,k,Be,Le,Re-1);Oe&&r.push(Oe)}}else{const _e=Math.max(0,_.start),Re=Math.min(pe.count,_.start+_.count);for(let Be=_e,Le=Re-1;Be<Le;Be+=B){const Oe=Wd(this,t,Hd,k,Be,Be+1,Be);Oe&&r.push(Oe)}if(this.isLineLoop){const Be=Wd(this,t,Hd,k,Re-1,_e,Re-1);Be&&r.push(Be)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const A=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}}function Wd(v,t,r,s,a,u,_){const A=v.geometry.attributes.position;if(Ll.fromBufferAttribute(A,a),Oh.fromBufferAttribute(A,u),r.distanceSqToSegment(Ll,Oh,kh,Lh)>s)return;kh.applyMatrix4(v.matrixWorld);const B=t.ray.origin.distanceTo(kh);return B<t.near||B>t.far?void 0:{distance:B,point:Lh.clone().applyMatrix4(v.matrixWorld),index:_,face:null,faceIndex:null,barycoord:null,object:v}}const Kc=new St,ds=new St;class Nl extends Ec{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const r=t.attributes.position,s=[];for(let a=0,u=r.count;a<u;a+=2)Kc.fromBufferAttribute(r,a),ds.fromBufferAttribute(r,a+1),s[a]=0===a?0:s[a-1],s[a+1]=s[a]+Kc.distanceTo(ds);t.setAttribute("lineDistance",new Ni(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ip extends Ec{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Vu extends Zs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const zb=new Li,Qm=new zo,sp=new us,op=new St;class Xd extends Eo{constructor(t=new gs,r=new Vu){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,r){const s=this.geometry,a=this.matrixWorld,u=t.params.Points.threshold,_=s.drawRange;if(null===s.boundingSphere&&s.computeBoundingSphere(),sp.copy(s.boundingSphere),sp.applyMatrix4(a),sp.radius+=u,!1===t.ray.intersectsSphere(sp))return;zb.copy(a).invert(),Qm.copy(t.ray).applyMatrix4(zb);const A=u/((this.scale.x+this.scale.y+this.scale.z)/3),k=A*A,B=s.index,ae=s.attributes.position;if(null!==B)for(let Re=Math.max(0,_.start),Be=Math.min(B.count,_.start+_.count);Re<Be;Re++){const Le=B.getX(Re);op.fromBufferAttribute(ae,Le),Gu(op,Le,k,a,t,r,this)}else for(let Re=Math.max(0,_.start),Be=Math.min(ae.count,_.start+_.count);Re<Be;Re++)op.fromBufferAttribute(ae,Re),Gu(op,Re,k,a,t,r,this)}updateMorphTargets(){const r=this.geometry.morphAttributes,s=Object.keys(r);if(s.length>0){const a=r[s[0]];if(void 0!==a){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,_=a.length;u<_;u++){const A=a[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=u}}}}}function Gu(v,t,r,s,a,u,_){const A=Qm.distanceSqToPoint(v);if(A<r){const k=new St;Qm.closestPointToPoint(v,k),k.applyMatrix4(s);const B=a.ray.origin.distanceTo(k);if(B<a.near||B>a.far)return;u.push({distance:B,distanceToRay:Math.sqrt(A),point:k,index:t,face:null,faceIndex:null,barycoord:null,object:_})}}class tg extends _o{constructor(t,r,s,a,u,_,A,k,B,ee=We){if(ee!==We&&ee!==at)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&ee===We&&(s=T),void 0===s&&ee===at&&(s=$),super(null,a,u,_,A,k,ee,s,B),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=void 0!==A?A:_n,this.minFilter=void 0!==k?k:_n,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Ha(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const r=super.toJSON(t);return null!==this.compareFunction&&(r.compareFunction=this.compareFunction),r}}class gd extends gs{constructor(t=1,r=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:s,heightSegments:a};const u=t/2,_=r/2,A=Math.floor(s),k=Math.floor(a),B=A+1,ee=k+1,ae=t/A,pe=r/k,_e=[],Re=[],Be=[],Le=[];for(let Oe=0;Oe<ee;Oe++){const ft=Oe*pe-_;for(let dt=0;dt<B;dt++)Re.push(dt*ae-u,-ft,0),Be.push(0,0,1),Le.push(dt/A),Le.push(1-Oe/k)}for(let Oe=0;Oe<k;Oe++)for(let ft=0;ft<A;ft++){const st=ft+B*(Oe+1),Yt=ft+1+B*(Oe+1),Mt=ft+1+B*Oe;_e.push(ft+B*Oe,st,Mt),_e.push(st,Yt,Mt)}this.setIndex(_e),this.setAttribute("position",new Ni(Re,3)),this.setAttribute("normal",new Ni(Be,3)),this.setAttribute("uv",new Ni(Le,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gd(t.width,t.height,t.widthSegments,t.heightSegments)}}class ga extends Zs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new kr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new pr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Dc extends ga{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return on(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class pg extends Zs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new kr(16777215),this.specular=new kr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new pr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $o,this.combine=Rn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class qh extends Zs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Sv extends Zs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function Qc(v,t,r){return!v||!r&&v.constructor===t?v:"number"==typeof t.BYTES_PER_ELEMENT?new t(v):Array.prototype.slice.call(v)}function Tv(v){const r=v.length,s=new Array(r);for(let a=0;a!==r;++a)s[a]=a;return s.sort(function t(a,u){return v[a]-v[u]}),s}function vg(v,t,r){const s=v.length,a=new v.constructor(s);for(let u=0,_=0;_!==s;++u){const A=r[u]*t;for(let k=0;k!==t;++k)a[_++]=v[A+k]}return a}function _g(v,t,r,s){let a=1,u=v[0];for(;void 0!==u&&void 0===u[s];)u=v[a++];if(void 0===u)return;let _=u[s];if(void 0!==_)if(Array.isArray(_))do{_=u[s],void 0!==_&&(t.push(u.time),r.push(..._)),u=v[a++]}while(void 0!==u);else if(void 0!==_.toArray)do{_=u[s],void 0!==_&&(t.push(u.time),_.toArray(r,r.length)),u=v[a++]}while(void 0!==u);else do{_=u[s],void 0!==_&&(t.push(u.time),r.push(_)),u=v[a++]}while(void 0!==u)}class Kh{constructor(t,r,s,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new r.constructor(s),this.sampleValues=r,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let s=this._cachedIndex,a=r[s],u=r[s-1];e:{t:{let _;n:{r:if(!(t<a)){for(let A=s+2;;){if(void 0===a){if(t<u)break r;return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===A)break;if(u=a,a=r[++s],t<a)break t}_=r.length;break n}if(t>=u)break e;{const A=r[1];t<A&&(s=2,u=A);for(let k=s-2;;){if(void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(s===k)break;if(a=u,u=r[--s-1],t>=u)break t}_=s,s=0}}for(;s<_;){const A=s+_>>>1;t<r[A]?_=A:s=A+1}if(a=r[s],u=r[s-1],void 0===u)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return s=r.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,u,a)}return this.interpolate_(s,u,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=t*a;for(let _=0;_!==a;++_)r[_]=s[u+_];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n1 extends Kh{constructor(t,r,s,a){super(t,r,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jo,endingEnd:jo}}intervalChanged_(t,r,s){const a=this.parameterPositions;let u=t-2,_=t+1,A=a[u],k=a[_];if(void 0===A)switch(this.getSettings_().endingStart){case ut:u=t,A=2*r-s;break;case 2402:u=a.length-2,A=r+a[u]-a[u+1];break;default:u=t,A=s}if(void 0===k)switch(this.getSettings_().endingEnd){case ut:_=t,k=2*s-r;break;case 2402:_=1,k=s+a[1]-a[0];break;default:_=t-1,k=r}const B=.5*(s-r),ee=this.valueSize;this._weightPrev=B/(r-A),this._weightNext=B/(k-s),this._offsetPrev=u*ee,this._offsetNext=_*ee}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,k=t*A,B=k-A,ee=this._offsetPrev,ae=this._offsetNext,pe=this._weightPrev,_e=this._weightNext,Re=(s-r)/(a-r),Be=Re*Re,Le=Be*Re,Oe=-pe*Le+2*pe*Be-pe*Re,ft=(1+pe)*Le+(-1.5-2*pe)*Be+(-.5+pe)*Re+1,dt=(-1-_e)*Le+(1.5+_e)*Be+.5*Re,st=_e*Le-_e*Be;for(let Yt=0;Yt!==A;++Yt)u[Yt]=Oe*_[ee+Yt]+ft*_[B+Yt]+dt*_[k+Yt]+st*_[ae+Yt];return u}}class r1 extends Kh{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,k=t*A,B=k-A,ee=(s-r)/(a-r),ae=1-ee;for(let pe=0;pe!==A;++pe)u[pe]=_[B+pe]*ae+_[k+pe]*ee;return u}}class Av extends Kh{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ic{constructor(t,r,s,a){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Qc(r,this.TimeBufferType),this.values=Qc(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let s;if(r.toJSON!==this.toJSON)s=r.toJSON(t);else{s={name:t.name,times:Qc(t.times,Array),values:Qc(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(s.interpolation=a)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Av(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new r1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new n1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Ro:r=this.InterpolantFactoryMethodDiscrete;break;case Vo:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(s);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ro;case this.InterpolantFactoryMethodLinear:return Vo;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]+=t}return this}scale(t){if(1!==t){const r=this.times;for(let s=0,a=r.length;s!==a;++s)r[s]*=t}return this}trim(t,r){const s=this.times,a=s.length;let u=0,_=a-1;for(;u!==a&&s[u]<t;)++u;for(;-1!==_&&s[_]>r;)--_;if(++_,0!==u||_!==a){u>=_&&(_=Math.max(_,1),u=_-1);const A=this.getValueSize();this.times=s.slice(u,_),this.values=this.values.slice(u*A,_*A)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,a=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let _=null;for(let A=0;A!==u;A++){const k=s[A];if("number"==typeof k&&isNaN(k)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,A,k),t=!1;break}if(null!==_&&_>k){console.error("THREE.KeyframeTrack: Out of order keys.",this,A,k,_),t=!1;break}_=k}if(void 0!==a&&function yg(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}(a))for(let A=0,k=a.length;A!==k;++A){const B=a[A];if(isNaN(B)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,A,B),t=!1;break}}return t}optimize(){const t=this.times.slice(),r=this.values.slice(),s=this.getValueSize(),a=2302===this.getInterpolation(),u=t.length-1;let _=1;for(let A=1;A<u;++A){let k=!1;const B=t[A];if(B!==t[A+1]&&(1!==A||B!==t[0]))if(a)k=!0;else{const ae=A*s,pe=ae-s,_e=ae+s;for(let Re=0;Re!==s;++Re){const Be=r[ae+Re];if(Be!==r[pe+Re]||Be!==r[_e+Re]){k=!0;break}}}if(k){if(A!==_){t[_]=t[A];const ae=A*s,pe=_*s;for(let _e=0;_e!==s;++_e)r[pe+_e]=r[ae+_e]}++_}}if(u>0){t[_]=t[u];for(let A=u*s,k=_*s,B=0;B!==s;++B)r[k+B]=r[A+B];++_}return _!==t.length?(this.times=t.slice(0,_),this.values=r.slice(0,_*s)):(this.times=t,this.values=r),this}clone(){const t=this.times.slice(),r=this.values.slice(),a=new(0,this.constructor)(this.name,t,r);return a.createInterpolant=this.createInterpolant,a}}Ic.prototype.TimeBufferType=Float32Array,Ic.prototype.ValueBufferType=Float32Array,Ic.prototype.DefaultInterpolation=Vo;class ya extends Ic{constructor(t,r,s){super(t,r,s)}}ya.prototype.ValueTypeName="bool",ya.prototype.ValueBufferType=Array,ya.prototype.DefaultInterpolation=Ro,ya.prototype.InterpolantFactoryMethodLinear=void 0,ya.prototype.InterpolantFactoryMethodSmooth=void 0;class i1 extends Ic{}i1.prototype.ValueTypeName="color";class rh extends Ic{}rh.prototype.ValueTypeName="number";class uE extends Kh{constructor(t,r,s,a){super(t,r,s,a)}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,k=(s-r)/(a-r);let B=t*A;for(let ee=B+A;B!==ee;B+=4)an.slerpFlat(u,0,_,B-A,_,B,k);return u}}class yd extends Ic{InterpolantFactoryMethodLinear(t){return new uE(this.times,this.values,this.getValueSize(),t)}}yd.prototype.ValueTypeName="quaternion",yd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends Ic{constructor(t,r,s){super(t,r,s)}}Yh.prototype.ValueTypeName="string",Yh.prototype.ValueBufferType=Array,Yh.prototype.DefaultInterpolation=Ro,Yh.prototype.InterpolantFactoryMethodLinear=void 0,Yh.prototype.InterpolantFactoryMethodSmooth=void 0;class $u extends Ic{}$u.prototype.ValueTypeName="vector";class gu{constructor(t="",r=-1,s=[],a=2500){this.name=t,this.tracks=s,this.duration=r,this.blendMode=a,this.uuid=ht(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],s=t.tracks,a=1/(t.fps||1);for(let _=0,A=s.length;_!==A;++_)r.push(o1(s[_]).scale(a));const u=new this(t.name,t.duration,r,t.blendMode);return u.uuid=t.uuid,u}static toJSON(t){const r=[],s=t.tracks,a={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let u=0,_=s.length;u!==_;++u)r.push(Ic.toJSON(s[u]));return a}static CreateFromMorphTargetSequence(t,r,s,a){const u=r.length,_=[];for(let A=0;A<u;A++){let k=[],B=[];k.push((A+u-1)%u,A,(A+1)%u),B.push(0,1,0);const ee=Tv(k);k=vg(k,1,ee),B=vg(B,1,ee),!a&&0===k[0]&&(k.push(u),B.push(B[0])),_.push(new rh(".morphTargetInfluences["+r[A].name+"]",k,B).scale(1/s))}return new this(t,-1,_)}static findByName(t,r){let s=t;Array.isArray(t)||(s=t.geometry&&t.geometry.animations||t.animations);for(let a=0;a<s.length;a++)if(s[a].name===r)return s[a];return null}static CreateClipsFromMorphTargetSequences(t,r,s){const a={},u=/^([\w-]*?)([\d]+)$/;for(let A=0,k=t.length;A<k;A++){const B=t[A],ee=B.name.match(u);if(ee&&ee.length>1){const ae=ee[1];let pe=a[ae];pe||(a[ae]=pe=[]),pe.push(B)}}const _=[];for(const A in a)_.push(this.CreateFromMorphTargetSequence(A,a[A],r,s));return _}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(ae,pe,_e,Re,Be){if(0!==_e.length){const Le=[],Oe=[];_g(_e,Le,Oe,Re),0!==Le.length&&Be.push(new ae(pe,Le,Oe))}},a=[],u=t.name||"default",_=t.fps||30,A=t.blendMode;let k=t.length||-1;const B=t.hierarchy||[];for(let ae=0;ae<B.length;ae++){const pe=B[ae].keys;if(pe&&0!==pe.length)if(pe[0].morphTargets){const _e={};let Re;for(Re=0;Re<pe.length;Re++)if(pe[Re].morphTargets)for(let Be=0;Be<pe[Re].morphTargets.length;Be++)_e[pe[Re].morphTargets[Be]]=-1;for(const Be in _e){const Le=[],Oe=[];for(let ft=0;ft!==pe[Re].morphTargets.length;++ft){const dt=pe[Re];Le.push(dt.time),Oe.push(dt.morphTarget===Be?1:0)}a.push(new rh(".morphTargetInfluence["+Be+"]",Le,Oe))}k=_e.length*_}else{const _e=".bones["+r[ae].name+"]";s($u,_e+".position",pe,"pos",a),s(yd,_e+".quaternion",pe,"rot",a),s($u,_e+".scale",pe,"scl",a)}}return 0===a.length?null:new this(u,k,a,A)}resetDuration(){let r=0;for(let s=0,a=this.tracks.length;s!==a;++s){const u=this.tracks[s];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o1(v){if(void 0===v.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function s1(v){switch(v.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rh;case"vector":case"vector2":case"vector3":case"vector4":return $u;case"color":return i1;case"quaternion":return yd;case"bool":case"boolean":return ya;case"string":return Yh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+v)}(v.type);if(void 0===v.times){const r=[],s=[];_g(v.keys,r,s,"value"),v.times=r,v.values=s}return void 0!==t.parse?t.parse(v):new t(v.name,v.times,v.values,v.interpolation)}const Kl={enabled:!1,files:{},add:function(v,t){!1!==this.enabled&&(this.files[v]=t)},get:function(v){if(!1!==this.enabled)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class a1{constructor(t,r,s){const a=this;let k,u=!1,_=0,A=0;const B=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=s,this.itemStart=function(ee){A++,!1===u&&void 0!==a.onStart&&a.onStart(ee,_,A),u=!0},this.itemEnd=function(ee){_++,void 0!==a.onProgress&&a.onProgress(ee,_,A),_===A&&(u=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(ee){void 0!==a.onError&&a.onError(ee)},this.resolveURL=function(ee){return k?k(ee):ee},this.setURLModifier=function(ee){return k=ee,this},this.addHandler=function(ee,ae){return B.push(ee,ae),this},this.removeHandler=function(ee){const ae=B.indexOf(ee);return-1!==ae&&B.splice(ae,2),this},this.getHandler=function(ee){for(let ae=0,pe=B.length;ae<pe;ae+=2){const _e=B[ae],Re=B[ae+1];if(_e.global&&(_e.lastIndex=0),_e.test(ee))return Re}return null}}}const l1=new a1;let aa=(()=>{class v{constructor(r){this.manager=void 0!==r?r:l1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,s){const a=this;return new Promise(function(u,_){a.load(r,u,s,_)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}return v.DEFAULT_MATERIAL_NAME="__DEFAULT",v})();const pc={};class Cv extends Error{constructor(t,r){super(t),this.response=r}}class ic extends aa{constructor(t){super(t)}load(t,r,s,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=Kl.get(t);if(void 0!==u)return this.manager.itemStart(t),setTimeout(()=>{r&&r(u),this.manager.itemEnd(t)},0),u;if(void 0!==pc[t])return void pc[t].push({onLoad:r,onProgress:s,onError:a});pc[t]=[],pc[t].push({onLoad:r,onProgress:s,onError:a});const _=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,k=this.responseType;fetch(_).then(B=>{if(200===B.status||0===B.status){if(0===B.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===B.body||void 0===B.body.getReader)return B;const ee=pc[t],ae=B.body.getReader(),pe=B.headers.get("X-File-Size")||B.headers.get("Content-Length"),_e=pe?parseInt(pe):0,Re=0!==_e;let Be=0;const Le=new ReadableStream({start(Oe){!function ft(){ae.read().then(({done:dt,value:st})=>{if(dt)Oe.close();else{Be+=st.byteLength;const Yt=new ProgressEvent("progress",{lengthComputable:Re,loaded:Be,total:_e});for(let Mt=0,Gt=ee.length;Mt<Gt;Mt++){const tn=ee[Mt];tn.onProgress&&tn.onProgress(Yt)}Oe.enqueue(st),ft()}},dt=>{Oe.error(dt)})}()}});return new Response(Le)}throw new Cv(`fetch for "${B.url}" responded with ${B.status}: ${B.statusText}`,B)}).then(B=>{switch(k){case"arraybuffer":return B.arrayBuffer();case"blob":return B.blob();case"document":return B.text().then(ee=>(new DOMParser).parseFromString(ee,A));case"json":return B.json();default:if(void 0===A)return B.text();{const ae=/charset="?([^;"\s]*)"?/i.exec(A),pe=ae&&ae[1]?ae[1].toLowerCase():void 0,_e=new TextDecoder(pe);return B.arrayBuffer().then(Re=>_e.decode(Re))}}}).then(B=>{Kl.add(t,B);const ee=pc[t];delete pc[t];for(let ae=0,pe=ee.length;ae<pe;ae++){const _e=ee[ae];_e.onLoad&&_e.onLoad(B)}}).catch(B=>{const ee=pc[t];if(void 0===ee)throw this.manager.itemError(t),B;delete pc[t];for(let ae=0,pe=ee.length;ae<pe;ae++){const _e=ee[ae];_e.onError&&_e.onError(B)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Sp extends aa{constructor(t){super(t)}load(t,r,s,a){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=Kl.get(t);if(void 0!==_)return u.manager.itemStart(t),setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_;const A=yl("img");function k(){ee(),Kl.add(t,this),r&&r(this),u.manager.itemEnd(t)}function B(ae){ee(),a&&a(ae),u.manager.itemError(t),u.manager.itemEnd(t)}function ee(){A.removeEventListener("load",k,!1),A.removeEventListener("error",B,!1)}return A.addEventListener("load",k,!1),A.addEventListener("error",B,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(A.crossOrigin=this.crossOrigin),u.manager.itemStart(t),A.src=t,A}}class c1 extends aa{constructor(t){super(t)}load(t,r,s,a){const u=new _o,_=new Sp(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(t,function(A){u.image=A,u.needsUpdate=!0,void 0!==r&&r(u)},s,a),u}}class yu extends Eo{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new kr(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(r.object.target=this.target.uuid),r}}const Ep=new Li,Tp=new St,Rv=new St;class bg{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pr(512,512),this.map=null,this.mapPass=null,this.matrix=new Li,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tp,this._frameExtents=new pr(1,1),this._viewportCount=1,this._viewports=[new Gs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,s=this.matrix;Tp.setFromMatrixPosition(t.matrixWorld),r.position.copy(Tp),Rv.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Rv),r.updateMatrixWorld(),Ep.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ep),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Ep)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Pv extends bg{constructor(){super(new ko(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,s=2*ke*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height,u=t.distance||r.far;(s!==r.fov||a!==r.aspect||u!==r.far)&&(r.fov=s,r.aspect=a,r.far=u,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Ov extends yu{constructor(t,r,s=0,a=Math.PI/3,u=0,_=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Eo.DEFAULT_UP),this.updateMatrix(),this.target=new Eo,this.distance=s,this.angle=a,this.penumbra=u,this.decay=_,this.map=null,this.shadow=new Pv}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Rc=new Li,Zh=new St,Mp=new St;class hE extends bg{constructor(){super(new ko(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pr(4,2),this._viewportCount=6,this._viewports=[new Gs(2,1,1,1),new Gs(0,1,1,1),new Gs(3,1,1,1),new Gs(1,1,1,1),new Gs(3,0,1,1),new Gs(1,0,1,1)],this._cubeDirections=[new St(1,0,0),new St(-1,0,0),new St(0,0,1),new St(0,0,-1),new St(0,1,0),new St(0,-1,0)],this._cubeUps=[new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,1,0),new St(0,0,1),new St(0,0,-1)]}updateMatrices(t,r=0){const s=this.camera,a=this.matrix,u=t.distance||s.far;u!==s.far&&(s.far=u,s.updateProjectionMatrix()),Zh.setFromMatrixPosition(t.matrixWorld),s.position.copy(Zh),Mp.copy(s.position),Mp.add(this._cubeDirections[r]),s.up.copy(this._cubeUps[r]),s.lookAt(Mp),s.updateMatrixWorld(),a.makeTranslation(-Zh.x,-Zh.y,-Zh.z),Rc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rc)}}class u1 extends yu{constructor(t,r,s=0,a=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=a,this.shadow=new hE}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class wg extends Ho{constructor(t=-1,r=1,s=1,a=-1,u=.1,_=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=s,this.bottom=a,this.near=u,this.far=_,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,s,a,u,_){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=s,this.view.offsetY=a,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let u=s-t,_=s+t,A=a+r,k=a-r;if(null!==this.view&&this.view.enabled){const B=(this.right-this.left)/this.view.fullWidth/this.zoom,ee=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=B*this.view.offsetX,_=u+B*this.view.width,A-=ee*this.view.offsetY,k=A-ee*this.view.height}this.projectionMatrix.makeOrthographic(u,_,A,k,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}class fE extends bg{constructor(){super(new wg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kv extends yu{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Eo.DEFAULT_UP),this.updateMatrix(),this.target=new Eo,this.shadow=new fE}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Lv extends yu{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class vu{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let r="";for(let s=0,a=t.length;s<a;s++)r+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return-1===r?"./":t.slice(0,r+1)}static resolveURL(t,r){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class Sg extends aa{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,s,a){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const u=this,_=Kl.get(t);if(void 0!==_)return u.manager.itemStart(t),_.then?void _.then(B=>{r&&r(B),u.manager.itemEnd(t)}).catch(B=>{a&&a(B)}):(setTimeout(function(){r&&r(_),u.manager.itemEnd(t)},0),_);const A={};A.credentials="anonymous"===this.crossOrigin?"same-origin":"include",A.headers=this.requestHeader;const k=fetch(t,A).then(function(B){return B.blob()}).then(function(B){return createImageBitmap(B,Object.assign(u.options,{colorSpaceConversion:"none"}))}).then(function(B){return Kl.add(t,B),r&&r(B),u.manager.itemEnd(t),B}).catch(function(B){a&&a(B),Kl.remove(t),u.manager.itemError(t),u.manager.itemEnd(t)});Kl.add(t,k),u.manager.itemStart(t)}}class Tg extends ko{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class y1{constructor(t,r,s){let a,u,_;switch(this.binding=t,this.valueSize=s,r){case"quaternion":a=this._slerp,u=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":a=this._select,u=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:a=this._lerp,u=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=u,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const s=this.buffer,a=this.valueSize,u=t*a+a;let _=this.cumulativeWeight;if(0===_){for(let A=0;A!==a;++A)s[u+A]=s[A];_=r}else _+=r,this._mixBufferRegion(s,u,0,r/_,a);this.cumulativeWeight=_}accumulateAdditive(t){const r=this.buffer,s=this.valueSize,a=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,a,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,s=this.buffer,a=t*r+r,u=this.cumulativeWeight,_=this.cumulativeWeightAdditive,A=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(s,a,r*this._origIndex,1-u,r),_>0&&this._mixBufferRegionAdditive(s,a,this._addIndex*r,1,r);for(let k=r,B=r+r;k!==B;++k)if(s[k]!==s[k+r]){A.setValue(s,a);break}}saveOriginalState(){const r=this.buffer,s=this.valueSize,a=s*this._origIndex;this.binding.getValue(r,a);for(let u=s,_=a;u!==_;++u)r[u]=r[a+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let s=t;s<r;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[r+s]=this.buffer[t+s]}_select(t,r,s,a,u){if(a>=.5)for(let _=0;_!==u;++_)t[r+_]=t[s+_]}_slerp(t,r,s,a){an.slerpFlat(t,r,t,r,t,s,a)}_slerpAdditive(t,r,s,a,u){const _=this._workIndex*u;an.multiplyQuaternionsFlat(t,_,t,r,t,s),an.slerpFlat(t,r,t,r,t,_,a)}_lerp(t,r,s,a,u){const _=1-a;for(let A=0;A!==u;++A){const k=r+A;t[k]=t[k]*_+t[s+A]*a}}_lerpAdditive(t,r,s,a,u){for(let _=0;_!==u;++_){const A=r+_;t[A]=t[A]+t[s+_]*a}}}const Ag="\\[\\]\\.:\\/",v1=new RegExp("["+Ag+"]","g"),Cg="[^"+Ag+"]",Gv="[^"+Ag.replace("\\.","")+"]",Wv=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Cg)+/(WCOD+)?/.source.replace("WCOD",Gv)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cg)+"$"),Xv=["material","materials","bones","map"];class qv{constructor(t,r,s){const a=s||Wo.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,a)}getValue(t,r){this.bind();const a=this._bindings[this._targetGroup.nCachedObjects_];void 0!==a&&a.getValue(t,r)}setValue(t,r){const s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,u=s.length;a!==u;++a)s[a].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=t.length;r!==s;++r)t[r].unbind()}}let Wo=(()=>{class v{constructor(r,s,a){this.path=s,this.parsedPath=a||v.parseTrackName(s),this.node=v.findNode(r,this.parsedPath.nodeName),this.rootNode=r,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(r,s,a){return r&&r.isAnimationObjectGroup?new v.Composite(r,s,a):new v(r,s,a)}static sanitizeNodeName(r){return r.replace(/\s/g,"_").replace(v1,"")}static parseTrackName(r){const s=Wv.exec(r);if(null===s)throw new Error("PropertyBinding: Cannot parse trackName: "+r);const a={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},u=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==u&&-1!==u){const _=a.nodeName.substring(u+1);-1!==Xv.indexOf(_)&&(a.nodeName=a.nodeName.substring(0,u),a.objectName=_)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+r);return a}static findNode(r,s){if(void 0===s||""===s||"."===s||-1===s||s===r.name||s===r.uuid)return r;if(r.skeleton){const a=r.skeleton.getBoneByName(s);if(void 0!==a)return a}if(r.children){const a=function(_){for(let A=0;A<_.length;A++){const k=_[A];if(k.name===s||k.uuid===s)return k;const B=a(k.children);if(B)return B}return null},u=a(r.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(r,s){r[s]=this.targetObject[this.propertyName]}_getValue_array(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)r[s++]=a[u]}_getValue_arrayElement(r,s){r[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(r,s){this.resolvedProperty.toArray(r,s)}_setValue_direct(r,s){this.targetObject[this.propertyName]=r[s]}_setValue_direct_setNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(r,s){this.targetObject[this.propertyName]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++]}_setValue_array_setNeedsUpdate(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(r,s){const a=this.resolvedProperty;for(let u=0,_=a.length;u!==_;++u)a[u]=r[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(r,s){this.resolvedProperty[this.propertyIndex]=r[s]}_setValue_arrayElement_setNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty[this.propertyIndex]=r[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(r,s){this.resolvedProperty.fromArray(r,s)}_setValue_fromArray_setNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(r,s){this.resolvedProperty.fromArray(r,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(r,s){this.bind(),this.getValue(r,s)}_setValue_unbound(r,s){this.bind(),this.setValue(r,s)}bind(){let r=this.node;const s=this.parsedPath,a=s.objectName,u=s.propertyName;let _=s.propertyIndex;if(r||(r=v.findNode(this.rootNode,s.nodeName),this.node=r),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!r)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(a){let ee=s.objectIndex;switch(a){case"materials":if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);r=r.material.materials;break;case"bones":if(!r.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);r=r.skeleton.bones;for(let ae=0;ae<r.length;ae++)if(r[ae].name===ee){ee=ae;break}break;case"map":if("map"in r){r=r.map;break}if(!r.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!r.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);r=r.material.map;break;default:if(void 0===r[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);r=r[a]}if(void 0!==ee){if(void 0===r[ee])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,r);r=r[ee]}}const A=r[u];if(void 0===A)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s.nodeName+"."+u+" but it wasn't found.",r);let k=this.Versioning.None;this.targetObject=r,!0===r.isMaterial?k=this.Versioning.NeedsUpdate:!0===r.isObject3D&&(k=this.Versioning.MatrixWorldNeedsUpdate);let B=this.BindingType.Direct;if(void 0!==_){if("morphTargetInfluences"===u){if(!r.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!r.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==r.morphTargetDictionary[_]&&(_=r.morphTargetDictionary[_])}B=this.BindingType.ArrayElement,this.resolvedProperty=A,this.propertyIndex=_}else void 0!==A.fromArray&&void 0!==A.toArray?(B=this.BindingType.HasFromToArray,this.resolvedProperty=A):Array.isArray(A)?(B=this.BindingType.EntireArray,this.resolvedProperty=A):this.propertyName=u;this.getValue=this.GetterByBindingType[B],this.setValue=this.SetterByBindingTypeAndVersioning[B][k]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return v.Composite=qv,v})();Wo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wo.prototype.GetterByBindingType=[Wo.prototype._getValue_direct,Wo.prototype._getValue_array,Wo.prototype._getValue_arrayElement,Wo.prototype._getValue_toArray],Wo.prototype.SetterByBindingTypeAndVersioning=[[Wo.prototype._setValue_direct,Wo.prototype._setValue_direct_setNeedsUpdate,Wo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_array,Wo.prototype._setValue_array_setNeedsUpdate,Wo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_arrayElement,Wo.prototype._setValue_arrayElement_setNeedsUpdate,Wo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wo.prototype._setValue_fromArray,Wo.prototype._setValue_fromArray_setNeedsUpdate,Wo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _1{constructor(t,r,s=null,a=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=s,this.blendMode=a;const u=r.tracks,_=u.length,A=new Array(_),k={endingStart:jo,endingEnd:jo};for(let B=0;B!==_;++B){const ee=u[B].createInterpolant(null);A[B]=ee,ee.settings=k}this._interpolantSettings=k,this._interpolants=A,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,s){if(t.fadeOut(r),this.fadeIn(r),s){const a=this._clip.duration,u=t._clip.duration,A=a/u;t.warp(1,u/a,r),this.warp(A,1,r)}return this}crossFadeTo(t,r,s){return t.crossFadeFrom(this,r,s)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,s){const a=this._mixer,u=a.time,_=this.timeScale;let A=this._timeScaleInterpolant;null===A&&(A=a._lendControlInterpolant(),this._timeScaleInterpolant=A);const k=A.parameterPositions,B=A.sampleValues;return k[0]=u,k[1]=u+s,B[0]=t/_,B[1]=r/_,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,s,a){if(!this.enabled)return void this._updateWeight(t);const u=this._startTime;if(null!==u){const k=(t-u)*s;k<0||0===s?r=0:(this._startTime=null,r=s*k)}r*=this._updateTimeScale(t);const _=this._updateTime(r),A=this._updateWeight(t);if(A>0){const k=this._interpolants,B=this._propertyBindings;if(2501===this.blendMode)for(let ee=0,ae=k.length;ee!==ae;++ee)k[ee].evaluate(_),B[ee].accumulateAdditive(A);else for(let ee=0,ae=k.length;ee!==ae;++ee)k[ee].evaluate(_),B[ee].accumulate(a,A)}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const s=this._weightInterpolant;if(null!==s){const a=s.evaluate(t)[0];r*=a,t>s.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(r*=s.evaluate(t)[0],t>s.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,s=this.loop;let a=this.time+t,u=this._loopCount;const _=2202===s;if(0===t)return-1===u||!_||1&~u?a:r-a;if(2200===s){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=r)a=r;else{if(!(a<0)){this.time=a;break e}a=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===u&&(t>=0?(u=0,this._setEndings(!0,0===this.repetitions,_)):this._setEndings(0===this.repetitions,!0,_)),a>=r||a<0){const A=Math.floor(a/r);a-=r*A,u+=Math.abs(A);const k=this.repetitions-u;if(k<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?r:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===k){const B=t<0;this._setEndings(B,!B,_)}else this._setEndings(!1,!1,_);this._loopCount=u,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=a;if(_&&!(1&~u))return r-a}return a}_setEndings(t,r,s){const a=this._interpolantSettings;s?(a.endingStart=ut,a.endingEnd=ut):(a.endingStart=t?this.zeroSlopeAtStart?ut:jo:2402,a.endingEnd=r?this.zeroSlopeAtEnd?ut:jo:2402)}_scheduleFading(t,r,s){const a=this._mixer,u=a.time;let _=this._weightInterpolant;null===_&&(_=a._lendControlInterpolant(),this._weightInterpolant=_);const A=_.parameterPositions,k=_.sampleValues;return A[0]=u,k[0]=r,A[1]=u+t,k[1]=s,this}}const b1=new Float32Array(1);class Kv extends Mn{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const s=t._localRoot||this._root,a=t._clip.tracks,u=a.length,_=t._propertyBindings,A=t._interpolants,k=s.uuid,B=this._bindingsByRootAndName;let ee=B[k];void 0===ee&&(ee={},B[k]=ee);for(let ae=0;ae!==u;++ae){const pe=a[ae],_e=pe.name;let Re=ee[_e];if(void 0!==Re)++Re.referenceCount,_[ae]=Re;else{if(Re=_[ae],void 0!==Re){null===Re._cacheIndex&&(++Re.referenceCount,this._addInactiveBinding(Re,k,_e));continue}Re=new y1(Wo.create(s,_e,r&&r._propertyBindings[ae].binding.parsedPath),pe.ValueTypeName,pe.getValueSize()),++Re.referenceCount,this._addInactiveBinding(Re,k,_e),_[ae]=Re}A[ae].resultBuffer=Re.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const s=(t._localRoot||this._root).uuid,a=t._clip.uuid,u=this._actionsByClip[a];this._bindAction(t,u&&u.knownActions[0]),this._addInactiveAction(t,a,s)}const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==u.useCount++&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==--u.useCount&&(u.restoreOriginalState(),this._takeBackBinding(u))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,s){const a=this._actions,u=this._actionsByClip;let _=u[r];if(void 0===_)_={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,u[r]=_;else{const A=_.knownActions;t._byClipCacheIndex=A.length,A.push(t)}t._cacheIndex=a.length,a.push(t),_.actionByRoot[s]=t}_removeInactiveAction(t){const r=this._actions,s=r[r.length-1],a=t._cacheIndex;s._cacheIndex=a,r[a]=s,r.pop(),t._cacheIndex=null;const u=t._clip.uuid,_=this._actionsByClip,A=_[u],k=A.knownActions,B=k[k.length-1],ee=t._byClipCacheIndex;B._byClipCacheIndex=ee,k[ee]=B,k.pop(),t._byClipCacheIndex=null,delete A.actionByRoot[(t._localRoot||this._root).uuid],0===k.length&&delete _[u],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let s=0,a=r.length;s!==a;++s){const u=r[s];0==--u.referenceCount&&this._removeInactiveBinding(u)}}_lendAction(t){const r=this._actions,s=t._cacheIndex,a=this._nActiveActions++,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_takeBackAction(t){const r=this._actions,s=t._cacheIndex,a=--this._nActiveActions,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_addInactiveBinding(t,r,s){const a=this._bindingsByRootAndName,u=this._bindings;let _=a[r];void 0===_&&(_={},a[r]=_),_[s]=t,t._cacheIndex=u.length,u.push(t)}_removeInactiveBinding(t){const r=this._bindings,s=t.binding,a=s.rootNode.uuid,u=s.path,_=this._bindingsByRootAndName,A=_[a],k=r[r.length-1],B=t._cacheIndex;k._cacheIndex=B,r[B]=k,r.pop(),delete A[u],0===Object.keys(A).length&&delete _[a]}_lendBinding(t){const r=this._bindings,s=t._cacheIndex,a=this._nActiveBindings++,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_takeBackBinding(t){const r=this._bindings,s=t._cacheIndex,a=--this._nActiveBindings,u=r[a];t._cacheIndex=a,r[a]=t,u._cacheIndex=s,r[s]=u}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let s=t[r];return void 0===s&&(s=new r1(new Float32Array(2),new Float32Array(2),1,b1),s.__cacheIndex=r,t[r]=s),s}_takeBackControlInterpolant(t){const r=this._controlInterpolants,s=t.__cacheIndex,a=--this._nActiveControlInterpolants,u=r[a];t.__cacheIndex=a,r[a]=t,u.__cacheIndex=s,r[s]=u}clipAction(t,r,s){const a=r||this._root,u=a.uuid;let _="string"==typeof t?gu.findByName(a,t):t;const A=null!==_?_.uuid:t,k=this._actionsByClip[A];let B=null;if(void 0===s&&(s=null!==_?_.blendMode:2500),void 0!==k){const ae=k.actionByRoot[u];if(void 0!==ae&&ae.blendMode===s)return ae;B=k.knownActions[0],null===_&&(_=B._clip)}if(null===_)return null;const ee=new _1(this,_,r,s);return this._bindAction(ee,B),this._addInactiveAction(ee,A,u),ee}existingAction(t,r){const s=r||this._root,a=s.uuid,u="string"==typeof t?gu.findByName(s,t):t,A=this._actionsByClip[u?u.uuid:t];return void 0!==A&&A.actionByRoot[a]||null}stopAllAction(){const t=this._actions;for(let s=this._nActiveActions-1;s>=0;--s)t[s].stop();return this}update(t){const r=this._actions,s=this._nActiveActions,a=this.time+=t*=this.timeScale,u=Math.sign(t),_=this._accuIndex^=1;for(let B=0;B!==s;++B)r[B]._update(a,t,u,_);const A=this._bindings,k=this._nActiveBindings;for(let B=0;B!==k;++B)A[B].apply(_);return this}setTime(t){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,s=t.uuid,a=this._actionsByClip,u=a[s];if(void 0!==u){const _=u.knownActions;for(let A=0,k=_.length;A!==k;++A){const B=_[A];this._deactivateAction(B);const ee=B._cacheIndex,ae=r[r.length-1];B._cacheIndex=null,B._byClipCacheIndex=null,ae._cacheIndex=ee,r[ee]=ae,r.pop(),this._removeInactiveBindingsForAction(B)}delete a[s]}}uncacheRoot(t){const r=t.uuid,s=this._actionsByClip;for(const _ in s){const k=s[_].actionByRoot[r];void 0!==k&&(this._deactivateAction(k),this._removeInactiveAction(k))}const u=this._bindingsByRootAndName[r];if(void 0!==u)for(const _ in u){const A=u[_];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(t,r){const s=this.existingAction(t,r);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class Zv{constructor(t=1,r=0,s=0){this.radius=t,this.phi=r,this.theta=s}set(t,r,s){return this.radius=t,this.phi=r,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=on(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,s){return this.radius=Math.sqrt(t*t+r*r+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(on(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Pc=new St,Pp=new Li,rf=new Li;class Dg extends Nl{constructor(t){const r=bd(t),s=new gs,a=[],u=[],_=new kr(0,0,1),A=new kr(0,1,0);for(let B=0;B<r.length;B++){const ee=r[B];ee.parent&&ee.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),u.push(_.r,_.g,_.b),u.push(A.r,A.g,A.b))}s.setAttribute("position",new Ni(a,3)),s.setAttribute("color",new Ni(u,3)),super(s,new ol({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,s=this.geometry,a=s.getAttribute("position");rf.copy(this.root.matrixWorld).invert();for(let u=0,_=0;u<r.length;u++){const A=r[u];A.parent&&A.parent.isBone&&(Pp.multiplyMatrices(rf,A.matrixWorld),Pc.setFromMatrixPosition(Pp),a.setXYZ(_,Pc.x,Pc.y,Pc.z),Pp.multiplyMatrices(rf,A.parent.matrixWorld),Pc.setFromMatrixPosition(Pp),a.setXYZ(_+1,Pc.x,Pc.y,Pc.z),_+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bd(v){const t=[];!0===v.isBone&&t.push(v);for(let r=0;r<v.children.length;r++)t.push(...bd(v.children[r]));return t}class Ig extends Nl{constructor(t=10,r=10,s=4473924,a=8947848){s=new kr(s),a=new kr(a);const u=r/2,_=t/r,A=t/2,k=[],B=[];for(let pe=0,_e=0,Re=-A;pe<=r;pe++,Re+=_){k.push(-A,0,Re,A,0,Re),k.push(Re,0,-A,Re,0,A);const Be=pe===u?s:a;Be.toArray(B,_e),_e+=3,Be.toArray(B,_e),_e+=3,Be.toArray(B,_e),_e+=3,Be.toArray(B,_e),_e+=3}const ee=new gs;ee.setAttribute("position",new Ni(k,3)),ee.setAttribute("color",new Ni(B,3)),super(ee,new ol({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xd=new St,Sd=new St,A1=new St;class Rg extends Eo{constructor(t,r,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",void 0===r&&(r=1);let a=new gs;a.setAttribute("position",new Ni([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const u=new ol({fog:!1,toneMapped:!1});this.lightPlane=new Ec(a,u),this.add(this.lightPlane),a=new gs,a.setAttribute("position",new Ni([0,0,0,0,0,1],3)),this.targetLine=new Ec(a,u),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xd.setFromMatrixPosition(this.light.matrixWorld),Sd.setFromMatrixPosition(this.light.target.matrixWorld),A1.subVectors(Sd,xd),this.lightPlane.lookAt(Sd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sd),this.targetLine.scale.z=A1.length()}}class I1 extends Nl{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],a=new gs;a.setAttribute("position",new Ni(r,3)),a.setAttribute("color",new Ni([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(a,new ol({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,s){const a=new kr,u=this.geometry.attributes.color.array;return a.set(t),a.toArray(u,0),a.toArray(u,3),a.set(r),a.toArray(u,6),a.toArray(u,9),a.set(s),a.toArray(u,12),a.toArray(u,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class xE extends Mn{constructor(t,r=null){super(),this.object=t,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function lf(v,t,r,s){const a=function n0(v){switch(v){case vr:case ei:return{byteLength:1,components:1};case Pe:case ne:case R:return{byteLength:2,components:1};case U:case ie:return{byteLength:2,components:4};case T:case Qe:case N:return{byteLength:4,components:1};case de:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${v}.`)}(s);switch(r){case Ae:case Kt:return v*t;case Fe:return v*t*2;case Ze:case xt:return v*t/a.components*a.byteLength;case Zt:case En:return v*t*2/a.components*a.byteLength;case tt:return v*t*3/a.components*a.byteLength;case pt:case or:return v*t*4/a.components*a.byteLength;case ii:case Bi:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case Rs:case Ps:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ws:case Ls:return Math.max(v,16)*Math.max(t,8)/4;case xi:case co:return Math.max(v,8)*Math.max(t,8)/2;case so:case ea:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*8;case So:case ca:return Math.floor((v+3)/4)*Math.floor((t+3)/4)*16;case ta:return Math.floor((v+4)/5)*Math.floor((t+3)/4)*16;case qo:return Math.floor((v+4)/5)*Math.floor((t+4)/5)*16;case ua:return Math.floor((v+5)/6)*Math.floor((t+4)/5)*16;case mo:return Math.floor((v+5)/6)*Math.floor((t+5)/6)*16;case Ta:return Math.floor((v+7)/8)*Math.floor((t+4)/5)*16;case To:return Math.floor((v+7)/8)*Math.floor((t+5)/6)*16;case Ja:return Math.floor((v+7)/8)*Math.floor((t+7)/8)*16;case Va:return Math.floor((v+9)/10)*Math.floor((t+4)/5)*16;case Ne:return Math.floor((v+9)/10)*Math.floor((t+5)/6)*16;case yt:return Math.floor((v+9)/10)*Math.floor((t+7)/8)*16;case Bt:return Math.floor((v+9)/10)*Math.floor((t+9)/10)*16;case He:return Math.floor((v+11)/12)*Math.floor((t+9)/10)*16;case Ht:return Math.floor((v+11)/12)*Math.floor((t+11)/12)*16;case kn:case fs:case qs:return Math.ceil(v/4)*Math.ceil(t/4)*16;case na:case Ga:return Math.ceil(v/4)*Math.ceil(t/4)*8;case Ma:case Ko:return Math.ceil(v/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Pg(){let v=null,t=!1,r=null,s=null;function a(u,_){r(u,_),s=v.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==r&&(s=v.requestAnimationFrame(a),t=!0)},stop:function(){v.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(u){r=u},setContext:function(u){v=u}}}function Og(v){const t=new WeakMap;return{get:function a(A){return A.isInterleavedBufferAttribute&&(A=A.data),t.get(A)},remove:function u(A){A.isInterleavedBufferAttribute&&(A=A.data);const k=t.get(A);k&&(v.deleteBuffer(k.buffer),t.delete(A))},update:function _(A,k){if(A.isInterleavedBufferAttribute&&(A=A.data),A.isGLBufferAttribute){const ee=t.get(A);return void((!ee||ee.version<A.version)&&t.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version}))}const B=t.get(A);if(void 0===B)t.set(A,function r(A,k){const B=A.array,ee=A.usage,ae=B.byteLength,pe=v.createBuffer();let _e;if(v.bindBuffer(k,pe),v.bufferData(k,B,ee),A.onUploadCallback(),B instanceof Float32Array)_e=v.FLOAT;else if(B instanceof Uint16Array)_e=A.isFloat16BufferAttribute?v.HALF_FLOAT:v.UNSIGNED_SHORT;else if(B instanceof Int16Array)_e=v.SHORT;else if(B instanceof Uint32Array)_e=v.UNSIGNED_INT;else if(B instanceof Int32Array)_e=v.INT;else if(B instanceof Int8Array)_e=v.BYTE;else if(B instanceof Uint8Array)_e=v.UNSIGNED_BYTE;else{if(!(B instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+B);_e=v.UNSIGNED_BYTE}return{buffer:pe,type:_e,bytesPerElement:B.BYTES_PER_ELEMENT,version:A.version,size:ae}}(A,k));else if(B.version<A.version){if(B.size!==A.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(A,k,B){const ee=k.array,ae=k.updateRanges;if(v.bindBuffer(B,A),0===ae.length)v.bufferSubData(B,0,ee);else{ae.sort((_e,Re)=>_e.start-Re.start);let pe=0;for(let _e=1;_e<ae.length;_e++){const Re=ae[pe],Be=ae[_e];Be.start<=Re.start+Re.count+1?Re.count=Math.max(Re.count,Be.start+Be.count-Re.start):(++pe,ae[pe]=Be)}ae.length=pe+1;for(let _e=0,Re=ae.length;_e<Re;_e++){const Be=ae[_e];v.bufferSubData(B,Be.start*ee.BYTES_PER_ELEMENT,ee,Be.start,Be.count)}k.clearUpdateRanges()}k.onUploadCallback()})(B.buffer,A,k),B.version=A.version}}}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d);const Cs={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},wi={common:{diffuse:{value:new kr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yi},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yi}},envmap:{envMap:{value:null},envMapRotation:{value:new Yi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yi},normalScale:{value:new pr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0},uvTransform:{value:new Yi}},sprite:{diffuse:{value:new kr(16777215)},opacity:{value:1},center:{value:new pr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yi},alphaMap:{value:null},alphaMapTransform:{value:new Yi},alphaTest:{value:0}}},xl={basic:{uniforms:Ol([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.fog]),vertexShader:Cs.meshbasic_vert,fragmentShader:Cs.meshbasic_frag},lambert:{uniforms:Ol([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.fog,wi.lights,{emissive:{value:new kr(0)}}]),vertexShader:Cs.meshlambert_vert,fragmentShader:Cs.meshlambert_frag},phong:{uniforms:Ol([wi.common,wi.specularmap,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.fog,wi.lights,{emissive:{value:new kr(0)},specular:{value:new kr(1118481)},shininess:{value:30}}]),vertexShader:Cs.meshphong_vert,fragmentShader:Cs.meshphong_frag},standard:{uniforms:Ol([wi.common,wi.envmap,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.roughnessmap,wi.metalnessmap,wi.fog,wi.lights,{emissive:{value:new kr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag},toon:{uniforms:Ol([wi.common,wi.aomap,wi.lightmap,wi.emissivemap,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.gradientmap,wi.fog,wi.lights,{emissive:{value:new kr(0)}}]),vertexShader:Cs.meshtoon_vert,fragmentShader:Cs.meshtoon_frag},matcap:{uniforms:Ol([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,wi.fog,{matcap:{value:null}}]),vertexShader:Cs.meshmatcap_vert,fragmentShader:Cs.meshmatcap_frag},points:{uniforms:Ol([wi.points,wi.fog]),vertexShader:Cs.points_vert,fragmentShader:Cs.points_frag},dashed:{uniforms:Ol([wi.common,wi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cs.linedashed_vert,fragmentShader:Cs.linedashed_frag},depth:{uniforms:Ol([wi.common,wi.displacementmap]),vertexShader:Cs.depth_vert,fragmentShader:Cs.depth_frag},normal:{uniforms:Ol([wi.common,wi.bumpmap,wi.normalmap,wi.displacementmap,{opacity:{value:1}}]),vertexShader:Cs.meshnormal_vert,fragmentShader:Cs.meshnormal_frag},sprite:{uniforms:Ol([wi.sprite,wi.fog]),vertexShader:Cs.sprite_vert,fragmentShader:Cs.sprite_frag},background:{uniforms:{uvTransform:{value:new Yi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cs.background_vert,fragmentShader:Cs.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Yi}},vertexShader:Cs.backgroundCube_vert,fragmentShader:Cs.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cs.cube_vert,fragmentShader:Cs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cs.equirect_vert,fragmentShader:Cs.equirect_frag},distanceRGBA:{uniforms:Ol([wi.common,wi.displacementmap,{referencePosition:{value:new St},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cs.distanceRGBA_vert,fragmentShader:Cs.distanceRGBA_frag},shadow:{uniforms:Ol([wi.lights,wi.fog,{color:{value:new kr(0)},opacity:{value:1}}]),vertexShader:Cs.shadow_vert,fragmentShader:Cs.shadow_frag}};xl.physical={uniforms:Ol([xl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yi},clearcoatNormalScale:{value:new pr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yi},sheen:{value:0},sheenColor:{value:new kr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yi},transmissionSamplerSize:{value:new pr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yi},attenuationDistance:{value:0},attenuationColor:{value:new kr(0)},specularColor:{value:new kr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yi},anisotropyVector:{value:new pr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yi}}]),vertexShader:Cs.meshphysical_vert,fragmentShader:Cs.meshphysical_frag};const pf={r:0,b:0,g:0},qu=new $o,Aw=new Li;function qE(v,t,r,s,a,u,_){const A=new kr(0);let B,ee,k=!0===u?0:1,ae=null,pe=0,_e=null;function Re(dt){let st=!0===dt.isScene?dt.background:null;return st&&st.isTexture&&(st=(dt.backgroundBlurriness>0?r:t).get(st)),st}function Oe(dt,st){dt.getRGB(pf,Zy(v)),s.buffers.color.setClear(pf.r,pf.g,pf.b,st,_)}return{getClearColor:function(){return A},setClearColor:function(dt,st=1){A.set(dt),k=st,Oe(A,k)},getClearAlpha:function(){return k},setClearAlpha:function(dt){k=dt,Oe(A,k)},render:function Be(dt){let st=!1;const Yt=Re(dt);null===Yt?Oe(A,k):Yt&&Yt.isColor&&(Oe(Yt,1),st=!0);const Mt=v.xr.getEnvironmentBlendMode();"additive"===Mt?s.buffers.color.setClear(0,0,0,1,_):"alpha-blend"===Mt&&s.buffers.color.setClear(0,0,0,0,_),(v.autoClear||st)&&(s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil))},addToRenderList:function Le(dt,st){const Yt=Re(st);Yt&&(Yt.isCubeTexture||Yt.mapping===In)?(void 0===ee&&(ee=new ks(new Gc(1,1,1),new tc({name:"BackgroundCubeMaterial",uniforms:Ud(xl.backgroundCube.uniforms),vertexShader:xl.backgroundCube.vertexShader,fragmentShader:xl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),ee.geometry.deleteAttribute("normal"),ee.geometry.deleteAttribute("uv"),ee.onBeforeRender=function(Mt,Gt,tn){this.matrixWorld.copyPosition(tn.matrixWorld)},Object.defineProperty(ee.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(ee)),qu.copy(st.backgroundRotation),qu.x*=-1,qu.y*=-1,qu.z*=-1,Yt.isCubeTexture&&!1===Yt.isRenderTargetTexture&&(qu.y*=-1,qu.z*=-1),ee.material.uniforms.envMap.value=Yt,ee.material.uniforms.flipEnvMap.value=Yt.isCubeTexture&&!1===Yt.isRenderTargetTexture?-1:1,ee.material.uniforms.backgroundBlurriness.value=st.backgroundBlurriness,ee.material.uniforms.backgroundIntensity.value=st.backgroundIntensity,ee.material.uniforms.backgroundRotation.value.setFromMatrix4(Aw.makeRotationFromEuler(qu)),ee.material.toneMapped=xs.getTransfer(Yt.colorSpace)!==Ki,(ae!==Yt||pe!==Yt.version||_e!==v.toneMapping)&&(ee.material.needsUpdate=!0,ae=Yt,pe=Yt.version,_e=v.toneMapping),ee.layers.enableAll(),dt.unshift(ee,ee.geometry,ee.material,0,0,null)):Yt&&Yt.isTexture&&(void 0===B&&(B=new ks(new gd(2,2),new tc({name:"BackgroundMaterial",uniforms:Ud(xl.background.uniforms),vertexShader:xl.background.vertexShader,fragmentShader:xl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),B.geometry.deleteAttribute("normal"),Object.defineProperty(B.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(B)),B.material.uniforms.t2D.value=Yt,B.material.uniforms.backgroundIntensity.value=st.backgroundIntensity,B.material.toneMapped=xs.getTransfer(Yt.colorSpace)!==Ki,!0===Yt.matrixAutoUpdate&&Yt.updateMatrix(),B.material.uniforms.uvTransform.value.copy(Yt.matrix),(ae!==Yt||pe!==Yt.version||_e!==v.toneMapping)&&(B.material.needsUpdate=!0,ae=Yt,pe=Yt.version,_e=v.toneMapping),B.layers.enableAll(),dt.unshift(B,B.geometry,B.material,0,0,null))},dispose:function ft(){void 0!==ee&&(ee.geometry.dispose(),ee.material.dispose(),ee=void 0),void 0!==B&&(B.geometry.dispose(),B.material.dispose(),B=void 0)}}}function qp(v,t){const r=v.getParameter(v.MAX_VERTEX_ATTRIBS),s={},a=pe(null);let u=a,_=!1;function B(Dt){return v.bindVertexArray(Dt)}function ee(Dt){return v.deleteVertexArray(Dt)}function pe(Dt){const bn=[],Yn=[],Kn=[];for(let rr=0;rr<r;rr++)bn[rr]=0,Yn[rr]=0,Kn[rr]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:bn,enabledAttributes:Yn,attributeDivisors:Kn,object:Dt,attributes:{},index:null}}function Be(){const Dt=u.newAttributes;for(let bn=0,Yn=Dt.length;bn<Yn;bn++)Dt[bn]=0}function Le(Dt){Oe(Dt,0)}function Oe(Dt,bn){const Kn=u.enabledAttributes,rr=u.attributeDivisors;u.newAttributes[Dt]=1,0===Kn[Dt]&&(v.enableVertexAttribArray(Dt),Kn[Dt]=1),rr[Dt]!==bn&&(v.vertexAttribDivisor(Dt,bn),rr[Dt]=bn)}function ft(){const Dt=u.newAttributes,bn=u.enabledAttributes;for(let Yn=0,Kn=bn.length;Yn<Kn;Yn++)bn[Yn]!==Dt[Yn]&&(v.disableVertexAttribArray(Yn),bn[Yn]=0)}function dt(Dt,bn,Yn,Kn,rr,wr,nr){!0===nr?v.vertexAttribIPointer(Dt,bn,Yn,rr,wr):v.vertexAttribPointer(Dt,bn,Yn,Kn,rr,wr)}function tn(){It(),_=!0,u!==a&&(u=a,B(u.object))}function It(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function A(Dt,bn,Yn,Kn,rr){let wr=!1;const nr=function ae(Dt,bn,Yn){const Kn=!0===Yn.wireframe;let rr=s[Dt.id];void 0===rr&&(rr={},s[Dt.id]=rr);let wr=rr[bn.id];void 0===wr&&(wr={},rr[bn.id]=wr);let nr=wr[Kn];return void 0===nr&&(nr=pe(function k(){return v.createVertexArray()}()),wr[Kn]=nr),nr}(Kn,Yn,bn);u!==nr&&(u=nr,B(u.object)),wr=function _e(Dt,bn,Yn,Kn){const rr=u.attributes,wr=bn.attributes;let nr=0;const Hr=Yn.getAttributes();for(const cr in Hr)if(Hr[cr].location>=0){const fi=rr[cr];let Oi=wr[cr];if(void 0===Oi&&("instanceMatrix"===cr&&Dt.instanceMatrix&&(Oi=Dt.instanceMatrix),"instanceColor"===cr&&Dt.instanceColor&&(Oi=Dt.instanceColor)),void 0===fi||fi.attribute!==Oi||Oi&&fi.data!==Oi.data)return!0;nr++}return u.attributesNum!==nr||u.index!==Kn}(Dt,Kn,Yn,rr),wr&&function Re(Dt,bn,Yn,Kn){const rr={},wr=bn.attributes;let nr=0;const Hr=Yn.getAttributes();for(const cr in Hr)if(Hr[cr].location>=0){let fi=wr[cr];void 0===fi&&("instanceMatrix"===cr&&Dt.instanceMatrix&&(fi=Dt.instanceMatrix),"instanceColor"===cr&&Dt.instanceColor&&(fi=Dt.instanceColor));const Oi={};Oi.attribute=fi,fi&&fi.data&&(Oi.data=fi.data),rr[cr]=Oi,nr++}u.attributes=rr,u.attributesNum=nr,u.index=Kn}(Dt,Kn,Yn,rr),null!==rr&&t.update(rr,v.ELEMENT_ARRAY_BUFFER),(wr||_)&&(_=!1,function st(Dt,bn,Yn,Kn){Be();const rr=Kn.attributes,wr=Yn.getAttributes(),nr=bn.defaultAttributeValues;for(const Hr in wr){const cr=wr[Hr];if(cr.location>=0){let Yr=rr[Hr];if(void 0===Yr&&("instanceMatrix"===Hr&&Dt.instanceMatrix&&(Yr=Dt.instanceMatrix),"instanceColor"===Hr&&Dt.instanceColor&&(Yr=Dt.instanceColor)),void 0!==Yr){const fi=Yr.normalized,Oi=Yr.itemSize,as=t.get(Yr);if(void 0===as)continue;const Ts=as.buffer,Tr=as.type,ti=as.bytesPerElement,Ii=Tr===v.INT||Tr===v.UNSIGNED_INT||Yr.gpuType===Qe;if(Yr.isInterleavedBufferAttribute){const ri=Yr.data,Gi=ri.stride,Hs=Yr.offset;if(ri.isInstancedInterleavedBuffer){for(let Ui=0;Ui<cr.locationSize;Ui++)Oe(cr.location+Ui,ri.meshPerAttribute);!0!==Dt.isInstancedMesh&&void 0===Kn._maxInstanceCount&&(Kn._maxInstanceCount=ri.meshPerAttribute*ri.count)}else for(let Ui=0;Ui<cr.locationSize;Ui++)Le(cr.location+Ui);v.bindBuffer(v.ARRAY_BUFFER,Ts);for(let Ui=0;Ui<cr.locationSize;Ui++)dt(cr.location+Ui,Oi/cr.locationSize,Tr,fi,Gi*ti,(Hs+Oi/cr.locationSize*Ui)*ti,Ii)}else{if(Yr.isInstancedBufferAttribute){for(let ri=0;ri<cr.locationSize;ri++)Oe(cr.location+ri,Yr.meshPerAttribute);!0!==Dt.isInstancedMesh&&void 0===Kn._maxInstanceCount&&(Kn._maxInstanceCount=Yr.meshPerAttribute*Yr.count)}else for(let ri=0;ri<cr.locationSize;ri++)Le(cr.location+ri);v.bindBuffer(v.ARRAY_BUFFER,Ts);for(let ri=0;ri<cr.locationSize;ri++)dt(cr.location+ri,Oi/cr.locationSize,Tr,fi,Oi*ti,Oi/cr.locationSize*ri*ti,Ii)}}else if(void 0!==nr){const fi=nr[Hr];if(void 0!==fi)switch(fi.length){case 2:v.vertexAttrib2fv(cr.location,fi);break;case 3:v.vertexAttrib3fv(cr.location,fi);break;case 4:v.vertexAttrib4fv(cr.location,fi);break;default:v.vertexAttrib1fv(cr.location,fi)}}}}ft()}(Dt,bn,Yn,Kn),null!==rr&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.get(rr).buffer))},reset:tn,resetDefaultState:It,dispose:function Yt(){tn();for(const Dt in s){const bn=s[Dt];for(const Yn in bn){const Kn=bn[Yn];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete bn[Yn]}delete s[Dt]}},releaseStatesOfGeometry:function Mt(Dt){if(void 0===s[Dt.id])return;const bn=s[Dt.id];for(const Yn in bn){const Kn=bn[Yn];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete bn[Yn]}delete s[Dt.id]},releaseStatesOfProgram:function Gt(Dt){for(const bn in s){const Yn=s[bn];if(void 0===Yn[Dt.id])continue;const Kn=Yn[Dt.id];for(const rr in Kn)ee(Kn[rr].object),delete Kn[rr];delete Yn[Dt.id]}},initAttributes:Be,enableAttribute:Le,disableUnusedAttributes:ft}}function Cw(v,t,r){let s;function _(B,ee,ae){0!==ae&&(v.drawArraysInstanced(s,B,ee,ae),r.update(ee,s,ae))}this.setMode=function a(B){s=B},this.render=function u(B,ee){v.drawArrays(s,B,ee),r.update(ee,s,1)},this.renderInstances=_,this.renderMultiDraw=function A(B,ee,ae){if(0===ae)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(s,B,0,ee,0,ae);let _e=0;for(let Re=0;Re<ae;Re++)_e+=ee[Re];r.update(_e,s,1)},this.renderMultiDrawInstances=function k(B,ee,ae,pe){if(0===ae)return;const _e=t.get("WEBGL_multi_draw");if(null===_e)for(let Re=0;Re<B.length;Re++)_(B[Re],ee[Re],pe[Re]);else{_e.multiDrawArraysInstancedWEBGL(s,B,0,ee,0,pe,0,ae);let Re=0;for(let Be=0;Be<ae;Be++)Re+=ee[Be]*pe[Be];r.update(Re,s,1)}}}function k0(v,t,r,s){let a;function k(Gt){if("highp"===Gt){if(v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.HIGH_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.HIGH_FLOAT).precision>0)return"highp";Gt="mediump"}return"mediump"===Gt&&v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.MEDIUM_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let B=void 0!==r.precision?r.precision:"highp";const ee=k(B);ee!==B&&(console.warn("THREE.WebGLRenderer:",B,"not supported, using",ee,"instead."),B=ee);const ae=!0===r.logarithmicDepthBuffer,pe=!0===r.reverseDepthBuffer&&t.has("EXT_clip_control"),_e=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS),Re=v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function u(){if(void 0!==a)return a;if(!0===t.has("EXT_texture_filter_anisotropic")){const Gt=t.get("EXT_texture_filter_anisotropic");a=v.getParameter(Gt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:k,textureFormatReadable:function _(Gt){return!(Gt!==pt&&s.convert(Gt)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function A(Gt){const tn=Gt===R&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(Gt!==vr&&s.convert(Gt)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)&&Gt!==N&&!tn)},precision:B,logarithmicDepthBuffer:ae,reverseDepthBuffer:pe,maxTextures:_e,maxVertexTextures:Re,maxTextureSize:v.getParameter(v.MAX_TEXTURE_SIZE),maxCubemapSize:v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:v.getParameter(v.MAX_VERTEX_ATTRIBS),maxVertexUniforms:v.getParameter(v.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:v.getParameter(v.MAX_VARYING_VECTORS),maxFragmentUniforms:v.getParameter(v.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:Re>0,maxSamples:v.getParameter(v.MAX_SAMPLES)}}function L0(v){const t=this;let r=null,s=0,a=!1,u=!1;const _=new Wc,A=new Yi,k={value:null,needsUpdate:!1};function ee(ae,pe,_e,Re){const Be=null!==ae?ae.length:0;let Le=null;if(0!==Be){if(Le=k.value,!0!==Re||null===Le){const Oe=_e+4*Be,ft=pe.matrixWorldInverse;A.getNormalMatrix(ft),(null===Le||Le.length<Oe)&&(Le=new Float32Array(Oe));for(let dt=0,st=_e;dt!==Be;++dt,st+=4)_.copy(ae[dt]).applyMatrix4(ft,A),_.normal.toArray(Le,st),Le[st+3]=_.constant}k.value=Le,k.needsUpdate=!0}return t.numPlanes=Be,t.numIntersection=0,Le}this.uniform=k,this.numPlanes=0,this.numIntersection=0,this.init=function(ae,pe){const _e=0!==ae.length||pe||0!==s||a;return a=pe,s=ae.length,_e},this.beginShadows=function(){u=!0,ee(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(ae,pe){r=ee(ae,pe,0)},this.setState=function(ae,pe,_e){const Re=ae.clippingPlanes,Be=ae.clipIntersection,Le=ae.clipShadows,Oe=v.get(ae);if(!a||null===Re||0===Re.length||u&&!Le)u?ee(null):function B(){k.value!==r&&(k.value=r,k.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}();else{const ft=u?0:s,dt=4*ft;let st=Oe.clippingState||null;k.value=st,st=ee(Re,pe,dt,_e);for(let Yt=0;Yt!==dt;++Yt)st[Yt]=r[Yt];Oe.clippingState=st,this.numIntersection=Be?this.numPlanes:0,this.numPlanes+=ft}}}function N0(v){let t=new WeakMap;function r(_,A){return 303===A?_.mapping=sr:304===A&&(_.mapping=Cr),_}function a(_){const A=_.target;A.removeEventListener("dispose",a);const k=t.get(A);void 0!==k&&(t.delete(A),k.dispose())}return{get:function s(_){if(_&&_.isTexture){const A=_.mapping;if(303===A||304===A){if(t.has(_))return r(t.get(_).texture,_.mapping);{const k=_.image;if(k&&k.height>0){const B=new Fa(k.height);return B.fromEquirectangularTexture(v,_),t.set(_,B),_.addEventListener("dispose",a),r(B.texture,_.mapping)}return null}}}return _},dispose:function u(){t=new WeakMap}}}const Wg=[.125,.215,.35,.446,.526,.582],xu=new wg,Xg=new kr;let mf=null,Md=0,Kp=0,gf=!1;const tu=(1+Math.sqrt(5))/2,uh=1/tu,qg=[new St(-tu,uh,0),new St(tu,uh,0),new St(-uh,0,tu),new St(uh,0,tu),new St(0,tu,-uh),new St(0,tu,uh),new St(-1,1,-1),new St(1,1,-1),new St(-1,1,1),new St(1,1,1)],Dw=new St;class j0{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,s=.1,a=100,u={}){const{size:_=256,position:A=Dw}=u;mf=this._renderer.getRenderTarget(),Md=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),gf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(_);const k=this._allocateTargets();return k.depthBuffer=!0,this._sceneToCubeUV(t,s,a,k,A),r>0&&this._blur(k,0,0,r),this._applyPMREM(k),this._cleanup(k),k}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Zg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Yg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(mf,Md,Kp),this._renderer.xr.enabled=gf,t.scissorTest=!1,yf(t,0,0,t.width,t.height)}_fromTexture(t,r){this._setSize(t.mapping===sr||t.mapping===Cr?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),mf=this._renderer.getRenderTarget(),Md=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),gf=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const s=r||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,s={magFilter:Cn,minFilter:Cn,generateMipmaps:!1,type:R,format:pt,colorSpace:ns,depthBuffer:!1},a=Kg(t,r,s);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==r){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Kg(t,r,s);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Iw(v){const t=[],r=[],s=[];let a=v;const u=v-4+1+Wg.length;for(let _=0;_<u;_++){const A=Math.pow(2,a);r.push(A);let k=1/A;_>v-4?k=Wg[_-v+4-1]:0===_&&(k=0),s.push(k);const B=1/(A-2),ee=-B,ae=1+B,pe=[ee,ee,ae,ee,ae,ae,ee,ee,ae,ae,ee,ae],_e=6,Re=6,Be=3,Le=2,Oe=1,ft=new Float32Array(Be*Re*_e),dt=new Float32Array(Le*Re*_e),st=new Float32Array(Oe*Re*_e);for(let Mt=0;Mt<_e;Mt++){const Gt=Mt%3*2/3-1,tn=Mt>2?0:-1;ft.set([Gt,tn,0,Gt+2/3,tn,0,Gt+2/3,tn+1,0,Gt,tn,0,Gt+2/3,tn+1,0,Gt,tn+1,0],Be*Re*Mt),dt.set(pe,Le*Re*Mt),st.set([Mt,Mt,Mt,Mt,Mt,Mt],Oe*Re*Mt)}const Yt=new gs;Yt.setAttribute("position",new to(ft,Be)),Yt.setAttribute("uv",new to(dt,Le)),Yt.setAttribute("faceIndex",new to(st,Oe)),t.push(Yt),a>4&&a--}return{lodPlanes:t,sizeLods:r,sigmas:s}}(u)),this._blurMaterial=function ys(v,t,r){const s=new Float32Array(20),a=new St(0,1,0);return new tc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(u,t,r)}return a}_compileMaterial(t){const r=new ks(this._lodPlanes[0],t);this._renderer.compile(r,xu)}_sceneToCubeUV(t,r,s,a,u){const k=new ko(90,1,r,s),B=[1,-1,1,1,1,1],ee=[1,1,1,-1,-1,-1],ae=this._renderer,pe=ae.autoClear,_e=ae.toneMapping;ae.getClearColor(Xg),ae.toneMapping=ur,ae.autoClear=!1;const Re=new Co({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Be=new ks(new Gc,Re);let Le=!1;const Oe=t.background;Oe?Oe.isColor&&(Re.color.copy(Oe),t.background=null,Le=!0):(Re.color.copy(Xg),Le=!0);for(let ft=0;ft<6;ft++){const dt=ft%3;0===dt?(k.up.set(0,B[ft],0),k.position.set(u.x,u.y,u.z),k.lookAt(u.x+ee[ft],u.y,u.z)):1===dt?(k.up.set(0,0,B[ft]),k.position.set(u.x,u.y,u.z),k.lookAt(u.x,u.y+ee[ft],u.z)):(k.up.set(0,B[ft],0),k.position.set(u.x,u.y,u.z),k.lookAt(u.x,u.y,u.z+ee[ft]));const st=this._cubeSize;yf(a,dt*st,ft>2?st:0,st,st),ae.setRenderTarget(a),Le&&ae.render(Be,k),ae.render(t,k)}Be.geometry.dispose(),Be.material.dispose(),ae.toneMapping=_e,ae.autoClear=pe,t.background=Oe}_textureToCubeUV(t,r){const s=this._renderer,a=t.mapping===sr||t.mapping===Cr;a?(null===this._cubemapMaterial&&(this._cubemapMaterial=Zg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Yg());const u=a?this._cubemapMaterial:this._equirectMaterial,_=new ks(this._lodPlanes[0],u);u.uniforms.envMap.value=t;const k=this._cubeSize;yf(r,0,0,3*k,2*k),s.setRenderTarget(r),s.render(_,xu)}_applyPMREM(t){const r=this._renderer,s=r.autoClear;r.autoClear=!1;const a=this._lodPlanes.length;for(let u=1;u<a;u++){const _=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]);this._blur(t,u-1,u,_,qg[(a-u-1)%qg.length])}r.autoClear=s}_blur(t,r,s,a,u){const _=this._pingPongRenderTarget;this._halfBlur(t,_,r,s,a,"latitudinal",u),this._halfBlur(_,t,s,s,a,"longitudinal",u)}_halfBlur(t,r,s,a,u,_,A){const k=this._renderer,B=this._blurMaterial;"latitudinal"!==_&&"longitudinal"!==_&&console.error("blur direction must be either latitudinal or longitudinal!");const ae=new ks(this._lodPlanes[a],B),pe=B.uniforms,_e=this._sizeLods[s]-1,Re=isFinite(u)?Math.PI/(2*_e):2*Math.PI/39,Be=u/Re,Le=isFinite(u)?1+Math.floor(3*Be):20;Le>20&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${Le} samples when the maximum is set to 20`);const Oe=[];let ft=0;for(let Gt=0;Gt<20;++Gt){const tn=Gt/Be,It=Math.exp(-tn*tn/2);Oe.push(It),0===Gt?ft+=It:Gt<Le&&(ft+=2*It)}for(let Gt=0;Gt<Oe.length;Gt++)Oe[Gt]=Oe[Gt]/ft;pe.envMap.value=t.texture,pe.samples.value=Le,pe.weights.value=Oe,pe.latitudinal.value="latitudinal"===_,A&&(pe.poleAxis.value=A);const{_lodMax:dt}=this;pe.dTheta.value=Re,pe.mipInt.value=dt-s;const st=this._sizeLods[a];yf(r,3*st*(a>dt-4?a-dt+4:0),4*(this._cubeSize-st),3*st,2*st),k.setRenderTarget(r),k.render(ae,xu)}}function Kg(v,t,r){const s=new Te(v,t,r);return s.texture.mapping=In,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function yf(v,t,r,s,a){v.viewport.set(t,r,s,a),v.scissor.set(t,r,s,a)}function Yg(){return new tc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zg(){return new tc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function F0(v){let t=new WeakMap,r=null;function u(A){const k=A.target;k.removeEventListener("dispose",u);const B=t.get(k);void 0!==B&&(t.delete(k),B.dispose())}return{get:function s(A){if(A&&A.isTexture){const k=A.mapping,B=303===k||304===k,ee=k===sr||k===Cr;if(B||ee){let ae=t.get(A);if(A.isRenderTargetTexture&&A.pmremVersion!==(void 0!==ae?ae.texture.pmremVersion:0))return null===r&&(r=new j0(v)),ae=B?r.fromEquirectangular(A,ae):r.fromCubemap(A,ae),ae.texture.pmremVersion=A.pmremVersion,t.set(A,ae),ae.texture;if(void 0!==ae)return ae.texture;{const _e=A.image;return B&&_e&&_e.height>0||ee&&_e&&function a(A){let k=0;for(let ee=0;ee<6;ee++)void 0!==A[ee]&&k++;return 6===k}(_e)?(null===r&&(r=new j0(v)),ae=B?r.fromEquirectangular(A):r.fromCubemap(A),ae.texture.pmremVersion=A.pmremVersion,t.set(A,ae),A.addEventListener("dispose",u),ae.texture):null}}}return A},dispose:function _(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function U0(v){const t={};function r(s){if(void 0!==t[s])return t[s];let a;switch(s){case"WEBGL_depth_texture":a=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=v.getExtension(s)}return t[s]=a,a}return{has:function(s){return null!==r(s)},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(s){const a=r(s);return null===a&&$a("THREE.WebGLRenderer: "+s+" extension not supported."),a}}}function Rw(v,t,r,s){const a={},u=new WeakMap;function _(ae){const pe=ae.target;null!==pe.index&&t.remove(pe.index);for(const Re in pe.attributes)t.remove(pe.attributes[Re]);pe.removeEventListener("dispose",_),delete a[pe.id];const _e=u.get(pe);_e&&(t.remove(_e),u.delete(pe)),s.releaseStatesOfGeometry(pe),!0===pe.isInstancedBufferGeometry&&delete pe._maxInstanceCount,r.memory.geometries--}function B(ae){const pe=[],_e=ae.index,Re=ae.attributes.position;let Be=0;if(null!==_e){const ft=_e.array;Be=_e.version;for(let dt=0,st=ft.length;dt<st;dt+=3){const Yt=ft[dt+0],Mt=ft[dt+1],Gt=ft[dt+2];pe.push(Yt,Mt,Mt,Gt,Gt,Yt)}}else{if(void 0===Re)return;Be=Re.version;for(let dt=0,st=Re.array.length/3-1;dt<st;dt+=3){const Yt=dt+0,Mt=dt+1,Gt=dt+2;pe.push(Yt,Mt,Mt,Gt,Gt,Yt)}}const Le=new(Od(pe)?Wf:Lu)(pe,1);Le.version=Be;const Oe=u.get(ae);Oe&&t.remove(Oe),u.set(ae,Le)}return{get:function A(ae,pe){return!0===a[pe.id]||(pe.addEventListener("dispose",_),a[pe.id]=!0,r.memory.geometries++),pe},update:function k(ae){const pe=ae.attributes;for(const _e in pe)t.update(pe[_e],v.ARRAY_BUFFER)},getWireframeAttribute:function ee(ae){const pe=u.get(ae);if(pe){const _e=ae.index;null!==_e&&pe.version<_e.version&&B(ae)}else B(ae);return u.get(ae)}}}function Yp(v,t,r){let s,u,_;function B(pe,_e,Re){0!==Re&&(v.drawElementsInstanced(s,_e,u,pe*_,Re),r.update(_e,s,Re))}this.setMode=function a(pe){s=pe},this.setIndex=function A(pe){u=pe.type,_=pe.bytesPerElement},this.render=function k(pe,_e){v.drawElements(s,_e,u,pe*_),r.update(_e,s,1)},this.renderInstances=B,this.renderMultiDraw=function ee(pe,_e,Re){if(0===Re)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(s,_e,0,u,pe,0,Re);let Le=0;for(let Oe=0;Oe<Re;Oe++)Le+=_e[Oe];r.update(Le,s,1)},this.renderMultiDrawInstances=function ae(pe,_e,Re,Be){if(0===Re)return;const Le=t.get("WEBGL_multi_draw");if(null===Le)for(let Oe=0;Oe<pe.length;Oe++)B(pe[Oe]/_,_e[Oe],Be[Oe]);else{Le.multiDrawElementsInstancedWEBGL(s,_e,0,u,pe,0,Be,0,Re);let Oe=0;for(let ft=0;ft<Re;ft++)Oe+=_e[ft]*Be[ft];r.update(Oe,s,1)}}}function Ad(v){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function a(){r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function s(u,_,A){switch(r.calls++,_){case v.TRIANGLES:r.triangles+=A*(u/3);break;case v.LINES:r.lines+=A*(u/2);break;case v.LINE_STRIP:r.lines+=A*(u-1);break;case v.LINE_LOOP:r.lines+=A*u;break;case v.POINTS:r.points+=A*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",_)}}}}function Jg(v,t,r){const s=new WeakMap,a=new Gs;return{update:function u(_,A,k){const B=_.morphTargetInfluences,ee=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,ae=void 0!==ee?ee.length:0;let pe=s.get(A);if(void 0===pe||pe.count!==ae){let It=function(){Gt.dispose(),s.delete(A),A.removeEventListener("dispose",It)};void 0!==pe&&pe.texture.dispose();const _e=void 0!==A.morphAttributes.position,Re=void 0!==A.morphAttributes.normal,Be=void 0!==A.morphAttributes.color,Le=A.morphAttributes.position||[],Oe=A.morphAttributes.normal||[],ft=A.morphAttributes.color||[];let dt=0;!0===_e&&(dt=1),!0===Re&&(dt=2),!0===Be&&(dt=3);let st=A.attributes.position.count*dt,Yt=1;st>t.maxTextureSize&&(Yt=Math.ceil(st/t.maxTextureSize),st=t.maxTextureSize);const Mt=new Float32Array(st*Yt*4*ae),Gt=new et(Mt,st,Yt,ae);Gt.type=N,Gt.needsUpdate=!0;const tn=4*dt;for(let Dt=0;Dt<ae;Dt++){const bn=Le[Dt],Yn=Oe[Dt],Kn=ft[Dt],rr=st*Yt*4*Dt;for(let wr=0;wr<bn.count;wr++){const nr=wr*tn;!0===_e&&(a.fromBufferAttribute(bn,wr),Mt[rr+nr+0]=a.x,Mt[rr+nr+1]=a.y,Mt[rr+nr+2]=a.z,Mt[rr+nr+3]=0),!0===Re&&(a.fromBufferAttribute(Yn,wr),Mt[rr+nr+4]=a.x,Mt[rr+nr+5]=a.y,Mt[rr+nr+6]=a.z,Mt[rr+nr+7]=0),!0===Be&&(a.fromBufferAttribute(Kn,wr),Mt[rr+nr+8]=a.x,Mt[rr+nr+9]=a.y,Mt[rr+nr+10]=a.z,Mt[rr+nr+11]=4===Kn.itemSize?a.w:1)}}pe={count:ae,texture:Gt,size:new pr(st,Yt)},s.set(A,pe),A.addEventListener("dispose",It)}if(!0===_.isInstancedMesh&&null!==_.morphTexture)k.getUniforms().setValue(v,"morphTexture",_.morphTexture,r);else{let _e=0;for(let Be=0;Be<B.length;Be++)_e+=B[Be];const Re=A.morphTargetsRelative?1:1-_e;k.getUniforms().setValue(v,"morphTargetBaseInfluence",Re),k.getUniforms().setValue(v,"morphTargetInfluences",B)}k.getUniforms().setValue(v,"morphTargetsTexture",pe.texture,r),k.getUniforms().setValue(v,"morphTargetsTextureSize",pe.size)}}}function vf(v,t,r,s){let a=new WeakMap;function A(k){const B=k.target;B.removeEventListener("dispose",A),r.remove(B.instanceMatrix),null!==B.instanceColor&&r.remove(B.instanceColor)}return{update:function u(k){const B=s.render.frame,ae=t.get(k,k.geometry);if(a.get(ae)!==B&&(t.update(ae),a.set(ae,B)),k.isInstancedMesh&&(!1===k.hasEventListener("dispose",A)&&k.addEventListener("dispose",A),a.get(k)!==B&&(r.update(k.instanceMatrix,v.ARRAY_BUFFER),null!==k.instanceColor&&r.update(k.instanceColor,v.ARRAY_BUFFER),a.set(k,B))),k.isSkinnedMesh){const pe=k.skeleton;a.get(pe)!==B&&(pe.update(),a.set(pe,B))}return ae},dispose:function _(){a=new WeakMap}}}const Qg=new _o,Zp=new tg(1,1),Jp=new et,Qp=new Ye,ey=new Do,em=[],B0=[],V0=new Float32Array(16),G0=new Float32Array(9),ty=new Float32Array(4);function dh(v,t,r){const s=v[0];if(s<=0||s>0)return v;const a=t*r;let u=em[a];if(void 0===u&&(u=new Float32Array(a),em[a]=u),0!==t){s.toArray(u,0);for(let _=1,A=0;_!==t;++_)A+=r,v[_].toArray(u,A)}return u}function Ka(v,t){if(v.length!==t.length)return!1;for(let r=0,s=v.length;r<s;r++)if(v[r]!==t[r])return!1;return!0}function Ya(v,t){for(let r=0,s=t.length;r<s;r++)v[r]=t[r]}function tm(v,t){let r=B0[t];void 0===r&&(r=new Int32Array(t),B0[t]=r);for(let s=0;s!==t;++s)r[s]=v.allocateTextureUnit();return r}function z0(v,t){const r=this.cache;r[0]!==t&&(v.uniform1f(this.addr,t),r[0]=t)}function $0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2fv(this.addr,t),Ya(r,t)}}function Pw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(v.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Ka(r,t))return;v.uniform3fv(this.addr,t),Ya(r,t)}}function Ow(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4fv(this.addr,t),Ya(r,t)}}function Yl(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix2fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;ty.set(s),v.uniformMatrix2fv(this.addr,!1,ty),Ya(r,s)}}function kw(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix3fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;G0.set(s),v.uniformMatrix3fv(this.addr,!1,G0),Ya(r,s)}}function Lw(v,t){const r=this.cache,s=t.elements;if(void 0===s){if(Ka(r,t))return;v.uniformMatrix4fv(this.addr,!1,t),Ya(r,t)}else{if(Ka(r,s))return;V0.set(s),v.uniformMatrix4fv(this.addr,!1,V0),Ya(r,s)}}function KE(v,t){const r=this.cache;r[0]!==t&&(v.uniform1i(this.addr,t),r[0]=t)}function ny(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2iv(this.addr,t),Ya(r,t)}}function H0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Ka(r,t))return;v.uniform3iv(this.addr,t),Ya(r,t)}}function Nw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4iv(this.addr,t),Ya(r,t)}}function jw(v,t){const r=this.cache;r[0]!==t&&(v.uniform1ui(this.addr,t),r[0]=t)}function Fw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(v.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Ka(r,t))return;v.uniform2uiv(this.addr,t),Ya(r,t)}}function W0(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(v.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Ka(r,t))return;v.uniform3uiv(this.addr,t),Ya(r,t)}}function Uw(v,t){const r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(v.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Ka(r,t))return;v.uniform4uiv(this.addr,t),Ya(r,t)}}function Bw(v,t,r){const s=this.cache,a=r.allocateTextureUnit();let u;s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),this.type===v.SAMPLER_2D_SHADOW?(Zp.compareFunction=515,u=Zp):u=Qg,r.setTexture2D(t||u,a)}function ry(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTexture3D(t||Qp,a)}function Vw(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTextureCube(t||ey,a)}function Gw(v,t,r){const s=this.cache,a=r.allocateTextureUnit();s[0]!==a&&(v.uniform1i(this.addr,a),s[0]=a),r.setTexture2DArray(t||Jp,a)}function $w(v,t){v.uniform1fv(this.addr,t)}function Hw(v,t){const r=dh(t,this.size,2);v.uniform2fv(this.addr,r)}function nu(v,t){const r=dh(t,this.size,3);v.uniform3fv(this.addr,r)}function iy(v,t){const r=dh(t,this.size,4);v.uniform4fv(this.addr,r)}function Ww(v,t){const r=dh(t,this.size,4);v.uniformMatrix2fv(this.addr,!1,r)}function Xw(v,t){const r=dh(t,this.size,9);v.uniformMatrix3fv(this.addr,!1,r)}function X0(v,t){const r=dh(t,this.size,16);v.uniformMatrix4fv(this.addr,!1,r)}function q0(v,t){v.uniform1iv(this.addr,t)}function nm(v,t){v.uniform2iv(this.addr,t)}function sy(v,t){v.uniform3iv(this.addr,t)}function YE(v,t){v.uniform4iv(this.addr,t)}function K0(v,t){v.uniform1uiv(this.addr,t)}function Y0(v,t){v.uniform2uiv(this.addr,t)}function Z0(v,t){v.uniform3uiv(this.addr,t)}function rm(v,t){v.uniform4uiv(this.addr,t)}function oy(v,t,r){const s=this.cache,a=t.length,u=tm(r,a);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==a;++_)r.setTexture2D(t[_]||Qg,u[_])}function Su(v,t,r){const s=this.cache,a=t.length,u=tm(r,a);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==a;++_)r.setTexture3D(t[_]||Qp,u[_])}function qw(v,t,r){const s=this.cache,a=t.length,u=tm(r,a);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==a;++_)r.setTextureCube(t[_]||ey,u[_])}function Kw(v,t,r){const s=this.cache,a=t.length,u=tm(r,a);Ka(s,u)||(v.uniform1iv(this.addr,u),Ya(s,u));for(let _=0;_!==a;++_)r.setTexture2DArray(t[_]||Jp,u[_])}class Yw{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.setValue=function zw(v){switch(v){case 5126:return z0;case 35664:return $0;case 35665:return Pw;case 35666:return Ow;case 35674:return Yl;case 35675:return kw;case 35676:return Lw;case 5124:case 35670:return KE;case 35667:case 35671:return ny;case 35668:case 35672:return H0;case 35669:case 35673:return Nw;case 5125:return jw;case 36294:return Fw;case 36295:return W0;case 36296:return Uw;case 35678:case 36198:case 36298:case 36306:case 35682:return Bw;case 35679:case 36299:case 36307:return ry;case 35680:case 36300:case 36308:case 36293:return Vw;case 36289:case 36303:case 36311:case 36292:return Gw}}(r.type)}}class hh{constructor(t,r,s){this.id=t,this.addr=s,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=function ay(v){switch(v){case 5126:return $w;case 35664:return Hw;case 35665:return nu;case 35666:return iy;case 35674:return Ww;case 35675:return Xw;case 35676:return X0;case 5124:case 35670:return q0;case 35667:case 35671:return nm;case 35668:case 35672:return sy;case 35669:case 35673:return YE;case 5125:return K0;case 36294:return Y0;case 36295:return Z0;case 36296:return rm;case 35678:case 36198:case 36298:case 36306:case 35682:return oy;case 35679:case 36299:case 36307:return Su;case 35680:case 36300:case 36308:case 36293:return qw;case 36289:case 36303:case 36311:case 36292:return Kw}}(r.type)}}class J0{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,s){const a=this.seq;for(let u=0,_=a.length;u!==_;++u){const A=a[u];A.setValue(t,r[A.id],s)}}}const Eu=/(\w+)(\])?(\[|\.)?/g;function Cd(v,t){v.seq.push(t),v.map[t.id]=t}function ly(v,t,r){const s=v.name,a=s.length;for(Eu.lastIndex=0;;){const u=Eu.exec(s);let A=u[1];const B=u[3];if("]"===u[2]&&(A|=0),void 0===B||"["===B&&Eu.lastIndex+2===a){Cd(r,void 0===B?new Yw(A,v,t):new hh(A,v,t));break}{let ae=r.map[A];void 0===ae&&(ae=new J0(A),Cd(r,ae)),r=ae}}}class Zu{constructor(t,r){this.seq=[],this.map={};const s=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let a=0;a<s;++a){const u=t.getActiveUniform(r,a);ly(u,t.getUniformLocation(r,u.name),this)}}setValue(t,r,s,a){const u=this.map[r];void 0!==u&&u.setValue(t,s,a)}setOptional(t,r,s){const a=r[s];void 0!==a&&this.setValue(t,s,a)}static upload(t,r,s,a){for(let u=0,_=r.length;u!==_;++u){const A=r[u],k=s[A.id];!1!==k.needsUpdate&&A.setValue(t,k.value,a)}}static seqWithValue(t,r){const s=[];for(let a=0,u=t.length;a!==u;++a){const _=t[a];_.id in r&&s.push(_)}return s}}function cy(v,t,r){const s=v.createShader(t);return v.shaderSource(s,r),v.compileShader(s),s}const Q0=37297;let Zw=0;const e_=new Yi;function t_(v,t,r){const s=v.getShaderParameter(t,v.COMPILE_STATUS),a=v.getShaderInfoLog(t).trim();if(s&&""===a)return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const _=parseInt(u[1]);return r.toUpperCase()+"\n\n"+a+"\n\n"+function Jw(v,t){const r=v.split("\n"),s=[],a=Math.max(t-6,0),u=Math.min(t+6,r.length);for(let _=a;_<u;_++){const A=_+1;s.push(`${A===t?">":" "} ${A}: ${r[_]}`)}return s.join("\n")}(v.getShaderSource(t),_)}return a}function ex(v,t){const r=function Qw(v){xs._getMatrix(e_,xs.workingColorSpace,v);const t=`mat3( ${e_.elements.map(r=>r.toFixed(4))} )`;switch(xs.getTransfer(v)){case Ms:return[t,"LinearTransferOETF"];case Ki:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",v),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${v}( vec4 value ) {`,`\treturn ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join("\n")}function n_(v,t){let r;switch(t){case vn:r="Linear";break;case er:r="Reinhard";break;case Pn:r="Cineon";break;case gt:r="ACESFilmic";break;case rt:r="AgX";break;case bt:r="Neutral";break;case wt:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+v+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const im=new St;function fh(v){return""!==v}function i_(v,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function s_(v,t){return v.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const o_=/^[ \t]*#include +<([\w\d./]+)>/gm;function _f(v){return v.replace(o_,bf)}const a_=new Map;function bf(v,t){let r=Cs[t];if(void 0===r){const s=a_.get(t);if(void 0===s)throw new Error("Can not resolve #include <"+t+">");r=Cs[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s)}return _f(r)}const wf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ph(v){return v.replace(wf,rx)}function rx(v,t,r,s){let a="";for(let u=parseInt(t);u<parseInt(r);u++)a+=s.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return a}function l_(v){let t=`precision ${v.precision} float;\n\tprecision ${v.precision} int;\n\tprecision ${v.precision} sampler2D;\n\tprecision ${v.precision} samplerCube;\n\tprecision ${v.precision} sampler3D;\n\tprecision ${v.precision} sampler2DArray;\n\tprecision ${v.precision} sampler2DShadow;\n\tprecision ${v.precision} samplerCubeShadow;\n\tprecision ${v.precision} sampler2DArrayShadow;\n\tprecision ${v.precision} isampler2D;\n\tprecision ${v.precision} isampler3D;\n\tprecision ${v.precision} isamplerCube;\n\tprecision ${v.precision} isampler2DArray;\n\tprecision ${v.precision} usampler2D;\n\tprecision ${v.precision} usampler3D;\n\tprecision ${v.precision} usamplerCube;\n\tprecision ${v.precision} usampler2DArray;\n\t`;return"highp"===v.precision?t+="\n#define HIGH_PRECISION":"mediump"===v.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(t+="\n#define LOW_PRECISION"),t}function JE(v,t,r,s){const a=v.getContext(),u=r.defines;let _=r.vertexShader,A=r.fragmentShader;const k=function ix(v){let t="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===S?t="SHADOWMAP_TYPE_PCF":v.shadowMapType===L?t="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===q&&(t="SHADOWMAP_TYPE_VSM"),t}(r),B=function om(v){let t="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case sr:case Cr:t="ENVMAP_TYPE_CUBE";break;case In:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),ee=function uy(v){let t="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===Cr&&(t="ENVMAP_MODE_REFRACTION"),t}(r),ae=function sx(v){let t="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Rn:t="ENVMAP_BLENDING_MULTIPLY";break;case Er:t="ENVMAP_BLENDING_MIX";break;case Bn:t="ENVMAP_BLENDING_ADD"}return t}(r),pe=function ZE(v){const t=v.envMapCubeUVHeight;if(null===t)return null;const r=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:s,maxMip:r}}(r),_e=function tx(v){return[v.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",v.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(fh).join("\n")}(r),Re=function r_(v){const t=[];for(const r in v){const s=v[r];!1!==s&&t.push("#define "+r+" "+s)}return t.join("\n")}(u),Be=a.createProgram();let Le,Oe,ft=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(Le=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re].filter(fh).join("\n"),Le.length>0&&(Le+="\n"),Oe=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re].filter(fh).join("\n"),Oe.length>0&&(Oe+="\n")):(Le=[l_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+ee:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+k:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fh).join("\n"),Oe=[l_(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,Re,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+B:"",r.envMap?"#define "+ee:"",r.envMap?"#define "+ae:"",pe?"#define CUBEUV_TEXEL_WIDTH "+pe.texelWidth:"",pe?"#define CUBEUV_TEXEL_HEIGHT "+pe.texelHeight:"",pe?"#define CUBEUV_MAX_MIP "+pe.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+k:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ur?"#define TONE_MAPPING":"",r.toneMapping!==ur?Cs.tonemapping_pars_fragment:"",r.toneMapping!==ur?n_("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Cs.colorspace_pars_fragment,ex("linearToOutputTexel",r.outputColorSpace),(xs.getLuminanceCoefficients(im),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${im.x.toFixed(4)}, ${im.y.toFixed(4)}, ${im.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(fh).join("\n")),_=_f(_),_=i_(_,r),_=s_(_,r),A=_f(A),A=i_(A,r),A=s_(A,r),_=ph(_),A=ph(A),!0!==r.isRawShaderMaterial&&(ft="#version 300 es\n",Le=[_e,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Le,Oe=["#define varying in",r.glslVersion===nt?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===nt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Oe);const st=ft+Oe+A,Yt=cy(a,a.VERTEX_SHADER,ft+Le+_),Mt=cy(a,a.FRAGMENT_SHADER,st);function Gt(bn){if(v.debug.checkShaderErrors){const Yn=a.getProgramInfoLog(Be).trim(),Kn=a.getShaderInfoLog(Yt).trim(),rr=a.getShaderInfoLog(Mt).trim();let wr=!0,nr=!0;if(!1===a.getProgramParameter(Be,a.LINK_STATUS))if(wr=!1,"function"==typeof v.debug.onShaderError)v.debug.onShaderError(a,Be,Yt,Mt);else{const Hr=t_(a,Yt,"vertex"),cr=t_(a,Mt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(Be,a.VALIDATE_STATUS)+"\n\nMaterial Name: "+bn.name+"\nMaterial Type: "+bn.type+"\n\nProgram Info Log: "+Yn+"\n"+Hr+"\n"+cr)}else""!==Yn?console.warn("THREE.WebGLProgram: Program Info Log:",Yn):(""===Kn||""===rr)&&(nr=!1);nr&&(bn.diagnostics={runnable:wr,programLog:Yn,vertexShader:{log:Kn,prefix:Le},fragmentShader:{log:rr,prefix:Oe}})}a.deleteShader(Yt),a.deleteShader(Mt),tn=new Zu(a,Be),It=function nx(v,t){const r={},s=v.getProgramParameter(t,v.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const u=v.getActiveAttrib(t,a),_=u.name;let A=1;u.type===v.FLOAT_MAT2&&(A=2),u.type===v.FLOAT_MAT3&&(A=3),u.type===v.FLOAT_MAT4&&(A=4),r[_]={type:u.type,location:v.getAttribLocation(t,_),locationSize:A}}return r}(a,Be)}let tn,It;a.attachShader(Be,Yt),a.attachShader(Be,Mt),void 0!==r.index0AttributeName?a.bindAttribLocation(Be,0,r.index0AttributeName):!0===r.morphTargets&&a.bindAttribLocation(Be,0,"position"),a.linkProgram(Be),this.getUniforms=function(){return void 0===tn&&Gt(this),tn},this.getAttributes=function(){return void 0===It&&Gt(this),It};let Dt=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===Dt&&(Dt=a.getProgramParameter(Be,Q0)),Dt},this.destroy=function(){s.releaseStatesOfProgram(this),a.deleteProgram(Be),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Zw++,this.cacheKey=t,this.usedTimes=1,this.program=Be,this.vertexShader=Yt,this.fragmentShader=Mt,this}let ox=0;class ax{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const s=t.fragmentShader,a=this._getShaderStage(t.vertexShader),u=this._getShaderStage(s),_=this._getShaderCacheForMaterial(t);return!1===_.has(a)&&(_.add(a),a.usedTimes++),!1===_.has(u)&&(_.add(u),u.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const s of r)s.usedTimes--,0===s.usedTimes&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let s=r.get(t);return void 0===s&&(s=new Set,r.set(t,s)),s}_getShaderStage(t){const r=this.shaderCache;let s=r.get(t);return void 0===s&&(s=new QE(t),r.set(t,s)),s}}class QE{constructor(t){this.id=ox++,this.code=t,this.usedTimes=0}}function lx(v,t,r,s,a,u,_){const A=new _a,k=new ax,B=new Set,ee=[],ae=a.logarithmicDepthBuffer,pe=a.vertexTextures;let _e=a.precision;const Re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Be(It){return B.add(It),0===It?"uv":`uv${It}`}return{getParameters:function Le(It,Dt,bn,Yn,Kn){const rr=Yn.fog,wr=Kn.geometry,Hr=(It.isMeshStandardMaterial?r:t).get(It.envMap||(It.isMeshStandardMaterial?Yn.environment:null)),cr=Hr&&Hr.mapping===In?Hr.image.height:null,Yr=Re[It.type];null!==It.precision&&(_e=a.getMaxPrecision(It.precision),_e!==It.precision&&console.warn("THREE.WebGLProgram.getParameters:",It.precision,"not supported, using",_e,"instead."));const fi=wr.morphAttributes.position||wr.morphAttributes.normal||wr.morphAttributes.color,Oi=void 0!==fi?fi.length:0;let Ts,Tr,ti,Ii,as=0;if(void 0!==wr.morphAttributes.position&&(as=1),void 0!==wr.morphAttributes.normal&&(as=2),void 0!==wr.morphAttributes.color&&(as=3),Yr){const wo=xl[Yr];Ts=wo.vertexShader,Tr=wo.fragmentShader}else Ts=It.vertexShader,Tr=It.fragmentShader,k.update(It),ti=k.getVertexShaderID(It),Ii=k.getFragmentShaderID(It);const ri=v.getRenderTarget(),Gi=v.state.buffers.depth.getReversed(),Hs=!0===Kn.isInstancedMesh,Ui=!0===Kn.isBatchedMesh,hs=!!It.map,Dr=!!Hr,dn=!!It.aoMap,Di=!!It.lightMap,Vr=!!It.bumpMap,yi=!!It.normalMap,qr=!!It.displacementMap,qi=!!It.emissiveMap,ui=!!It.metalnessMap,ln=!!It.roughnessMap,$t=It.anisotropy>0,lr=It.clearcoat>0,Kr=It.iridescence>0,jr=It.sheen>0,Zi=It.transmission>0,Mi=$t&&!!It.anisotropyMap,Ri=lr&&!!It.clearcoatMap,Fs=lr&&!!It.clearcoatNormalMap,si=lr&&!!It.clearcoatRoughnessMap,Hi=Kr&&!!It.iridescenceMap,ms=Kr&&!!It.iridescenceThicknessMap,vs=jr&&!!It.sheenColorMap,Wi=jr&&!!It.sheenRoughnessMap,lo=!!It.specularMap,Us=!!It.specularColorMap,Xo=!!It.specularIntensityMap,Xn=Zi&&!!It.transmissionMap,Ai=Zi&&!!It.thicknessMap,zr=!!It.alphaMap,Bs=!!It.extensions;let Ea=ur;It.toneMapped&&(null===ri||!0===ri.isXRRenderTarget)&&(Ea=v.toneMapping);const hl={shaderID:Yr,shaderType:It.type,shaderName:It.name,vertexShader:Ts,fragmentShader:Tr,defines:It.defines,customVertexShaderID:ti,customFragmentShaderID:Ii,isRawShaderMaterial:!0===It.isRawShaderMaterial,glslVersion:It.glslVersion,precision:_e,batching:Ui,batchingColor:Ui&&null!==Kn._colorsTexture,instancing:Hs,instancingColor:Hs&&null!==Kn.instanceColor,instancingMorph:Hs&&null!==Kn.morphTexture,supportsVertexTextures:pe,outputColorSpace:null===ri?v.outputColorSpace:!0===ri.isXRRenderTarget?ri.texture.colorSpace:ns,alphaToCoverage:!!It.alphaToCoverage,map:hs,matcap:!!It.matcap,envMap:Dr,envMapMode:Dr&&Hr.mapping,envMapCubeUVHeight:cr,aoMap:dn,lightMap:Di,bumpMap:Vr,normalMap:yi,displacementMap:pe&&qr,emissiveMap:qi,normalMapObjectSpace:yi&&1===It.normalMapType,normalMapTangentSpace:yi&&0===It.normalMapType,metalnessMap:ui,roughnessMap:ln,anisotropy:$t,anisotropyMap:Mi,clearcoat:lr,clearcoatMap:Ri,clearcoatNormalMap:Fs,clearcoatRoughnessMap:si,dispersion:It.dispersion>0,iridescence:Kr,iridescenceMap:Hi,iridescenceThicknessMap:ms,sheen:jr,sheenColorMap:vs,sheenRoughnessMap:Wi,specularMap:lo,specularColorMap:Us,specularIntensityMap:Xo,transmission:Zi,transmissionMap:Xn,thicknessMap:Ai,gradientMap:!!It.gradientMap,opaque:!1===It.transparent&&1===It.blending&&!1===It.alphaToCoverage,alphaMap:zr,alphaTest:It.alphaTest>0,alphaHash:!!It.alphaHash,combine:It.combine,mapUv:hs&&Be(It.map.channel),aoMapUv:dn&&Be(It.aoMap.channel),lightMapUv:Di&&Be(It.lightMap.channel),bumpMapUv:Vr&&Be(It.bumpMap.channel),normalMapUv:yi&&Be(It.normalMap.channel),displacementMapUv:qr&&Be(It.displacementMap.channel),emissiveMapUv:qi&&Be(It.emissiveMap.channel),metalnessMapUv:ui&&Be(It.metalnessMap.channel),roughnessMapUv:ln&&Be(It.roughnessMap.channel),anisotropyMapUv:Mi&&Be(It.anisotropyMap.channel),clearcoatMapUv:Ri&&Be(It.clearcoatMap.channel),clearcoatNormalMapUv:Fs&&Be(It.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:si&&Be(It.clearcoatRoughnessMap.channel),iridescenceMapUv:Hi&&Be(It.iridescenceMap.channel),iridescenceThicknessMapUv:ms&&Be(It.iridescenceThicknessMap.channel),sheenColorMapUv:vs&&Be(It.sheenColorMap.channel),sheenRoughnessMapUv:Wi&&Be(It.sheenRoughnessMap.channel),specularMapUv:lo&&Be(It.specularMap.channel),specularColorMapUv:Us&&Be(It.specularColorMap.channel),specularIntensityMapUv:Xo&&Be(It.specularIntensityMap.channel),transmissionMapUv:Xn&&Be(It.transmissionMap.channel),thicknessMapUv:Ai&&Be(It.thicknessMap.channel),alphaMapUv:zr&&Be(It.alphaMap.channel),vertexTangents:!!wr.attributes.tangent&&(yi||$t),vertexColors:It.vertexColors,vertexAlphas:!0===It.vertexColors&&!!wr.attributes.color&&4===wr.attributes.color.itemSize,pointsUvs:!0===Kn.isPoints&&!!wr.attributes.uv&&(hs||zr),fog:!!rr,useFog:!0===It.fog,fogExp2:!!rr&&rr.isFogExp2,flatShading:!0===It.flatShading,sizeAttenuation:!0===It.sizeAttenuation,logarithmicDepthBuffer:ae,reverseDepthBuffer:Gi,skinning:!0===Kn.isSkinnedMesh,morphTargets:void 0!==wr.morphAttributes.position,morphNormals:void 0!==wr.morphAttributes.normal,morphColors:void 0!==wr.morphAttributes.color,morphTargetsCount:Oi,morphTextureStride:as,numDirLights:Dt.directional.length,numPointLights:Dt.point.length,numSpotLights:Dt.spot.length,numSpotLightMaps:Dt.spotLightMap.length,numRectAreaLights:Dt.rectArea.length,numHemiLights:Dt.hemi.length,numDirLightShadows:Dt.directionalShadowMap.length,numPointLightShadows:Dt.pointShadowMap.length,numSpotLightShadows:Dt.spotShadowMap.length,numSpotLightShadowsWithMaps:Dt.numSpotLightShadowsWithMaps,numLightProbes:Dt.numLightProbes,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:It.dithering,shadowMapEnabled:v.shadowMap.enabled&&bn.length>0,shadowMapType:v.shadowMap.type,toneMapping:Ea,decodeVideoTexture:hs&&!0===It.map.isVideoTexture&&xs.getTransfer(It.map.colorSpace)===Ki,decodeVideoTextureEmissive:qi&&!0===It.emissiveMap.isVideoTexture&&xs.getTransfer(It.emissiveMap.colorSpace)===Ki,premultipliedAlpha:It.premultipliedAlpha,doubleSided:2===It.side,flipSided:1===It.side,useDepthPacking:It.depthPacking>=0,depthPacking:It.depthPacking||0,index0AttributeName:It.index0AttributeName,extensionClipCullDistance:Bs&&!0===It.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Bs&&!0===It.extensions.multiDraw||Ui)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:It.customProgramCacheKey()};return hl.vertexUv1s=B.has(1),hl.vertexUv2s=B.has(2),hl.vertexUv3s=B.has(3),B.clear(),hl},getProgramCacheKey:function Oe(It){const Dt=[];if(It.shaderID?Dt.push(It.shaderID):(Dt.push(It.customVertexShaderID),Dt.push(It.customFragmentShaderID)),void 0!==It.defines)for(const bn in It.defines)Dt.push(bn),Dt.push(It.defines[bn]);return!1===It.isRawShaderMaterial&&(function ft(It,Dt){It.push(Dt.precision),It.push(Dt.outputColorSpace),It.push(Dt.envMapMode),It.push(Dt.envMapCubeUVHeight),It.push(Dt.mapUv),It.push(Dt.alphaMapUv),It.push(Dt.lightMapUv),It.push(Dt.aoMapUv),It.push(Dt.bumpMapUv),It.push(Dt.normalMapUv),It.push(Dt.displacementMapUv),It.push(Dt.emissiveMapUv),It.push(Dt.metalnessMapUv),It.push(Dt.roughnessMapUv),It.push(Dt.anisotropyMapUv),It.push(Dt.clearcoatMapUv),It.push(Dt.clearcoatNormalMapUv),It.push(Dt.clearcoatRoughnessMapUv),It.push(Dt.iridescenceMapUv),It.push(Dt.iridescenceThicknessMapUv),It.push(Dt.sheenColorMapUv),It.push(Dt.sheenRoughnessMapUv),It.push(Dt.specularMapUv),It.push(Dt.specularColorMapUv),It.push(Dt.specularIntensityMapUv),It.push(Dt.transmissionMapUv),It.push(Dt.thicknessMapUv),It.push(Dt.combine),It.push(Dt.fogExp2),It.push(Dt.sizeAttenuation),It.push(Dt.morphTargetsCount),It.push(Dt.morphAttributeCount),It.push(Dt.numDirLights),It.push(Dt.numPointLights),It.push(Dt.numSpotLights),It.push(Dt.numSpotLightMaps),It.push(Dt.numHemiLights),It.push(Dt.numRectAreaLights),It.push(Dt.numDirLightShadows),It.push(Dt.numPointLightShadows),It.push(Dt.numSpotLightShadows),It.push(Dt.numSpotLightShadowsWithMaps),It.push(Dt.numLightProbes),It.push(Dt.shadowMapType),It.push(Dt.toneMapping),It.push(Dt.numClippingPlanes),It.push(Dt.numClipIntersection),It.push(Dt.depthPacking)}(Dt,It),function dt(It,Dt){A.disableAll(),Dt.supportsVertexTextures&&A.enable(0),Dt.instancing&&A.enable(1),Dt.instancingColor&&A.enable(2),Dt.instancingMorph&&A.enable(3),Dt.matcap&&A.enable(4),Dt.envMap&&A.enable(5),Dt.normalMapObjectSpace&&A.enable(6),Dt.normalMapTangentSpace&&A.enable(7),Dt.clearcoat&&A.enable(8),Dt.iridescence&&A.enable(9),Dt.alphaTest&&A.enable(10),Dt.vertexColors&&A.enable(11),Dt.vertexAlphas&&A.enable(12),Dt.vertexUv1s&&A.enable(13),Dt.vertexUv2s&&A.enable(14),Dt.vertexUv3s&&A.enable(15),Dt.vertexTangents&&A.enable(16),Dt.anisotropy&&A.enable(17),Dt.alphaHash&&A.enable(18),Dt.batching&&A.enable(19),Dt.dispersion&&A.enable(20),Dt.batchingColor&&A.enable(21),It.push(A.mask),A.disableAll(),Dt.fog&&A.enable(0),Dt.useFog&&A.enable(1),Dt.flatShading&&A.enable(2),Dt.logarithmicDepthBuffer&&A.enable(3),Dt.reverseDepthBuffer&&A.enable(4),Dt.skinning&&A.enable(5),Dt.morphTargets&&A.enable(6),Dt.morphNormals&&A.enable(7),Dt.morphColors&&A.enable(8),Dt.premultipliedAlpha&&A.enable(9),Dt.shadowMapEnabled&&A.enable(10),Dt.doubleSided&&A.enable(11),Dt.flipSided&&A.enable(12),Dt.useDepthPacking&&A.enable(13),Dt.dithering&&A.enable(14),Dt.transmission&&A.enable(15),Dt.sheen&&A.enable(16),Dt.opaque&&A.enable(17),Dt.pointsUvs&&A.enable(18),Dt.decodeVideoTexture&&A.enable(19),Dt.decodeVideoTextureEmissive&&A.enable(20),Dt.alphaToCoverage&&A.enable(21),It.push(A.mask)}(Dt,It),Dt.push(v.outputColorSpace)),Dt.push(It.customProgramCacheKey),Dt.join()},getUniforms:function st(It){const Dt=Re[It.type];let bn;return bn=Dt?kb.clone(xl[Dt].uniforms):It.uniforms,bn},acquireProgram:function Yt(It,Dt){let bn;for(let Yn=0,Kn=ee.length;Yn<Kn;Yn++){const rr=ee[Yn];if(rr.cacheKey===Dt){bn=rr,++bn.usedTimes;break}}return void 0===bn&&(bn=new JE(v,Dt,It,u),ee.push(bn)),bn},releaseProgram:function Mt(It){if(0==--It.usedTimes){const Dt=ee.indexOf(It);ee[Dt]=ee[ee.length-1],ee.pop(),It.destroy()}},releaseShaderCache:function Gt(It){k.remove(It)},programs:ee,dispose:function tn(){k.dispose()}}}function eT(){let v=new WeakMap;return{has:function t(_){return v.has(_)},get:function r(_){let A=v.get(_);return void 0===A&&(A={},v.set(_,A)),A},remove:function s(_){v.delete(_)},update:function a(_,A,k){v.get(_)[A]=k},dispose:function u(){v=new WeakMap}}}function cx(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.material.id!==t.material.id?v.material.id-t.material.id:v.z!==t.z?v.z-t.z:v.id-t.id}function c_(v,t){return v.groupOrder!==t.groupOrder?v.groupOrder-t.groupOrder:v.renderOrder!==t.renderOrder?v.renderOrder-t.renderOrder:v.z!==t.z?t.z-v.z:v.id-t.id}function u_(){const v=[];let t=0;const r=[],s=[],a=[];function _(ae,pe,_e,Re,Be,Le){let Oe=v[t];return void 0===Oe?(Oe={id:ae.id,object:ae,geometry:pe,material:_e,groupOrder:Re,renderOrder:ae.renderOrder,z:Be,group:Le},v[t]=Oe):(Oe.id=ae.id,Oe.object=ae,Oe.geometry=pe,Oe.material=_e,Oe.groupOrder=Re,Oe.renderOrder=ae.renderOrder,Oe.z=Be,Oe.group=Le),t++,Oe}return{opaque:r,transmissive:s,transparent:a,init:function u(){t=0,r.length=0,s.length=0,a.length=0},push:function A(ae,pe,_e,Re,Be,Le){const Oe=_(ae,pe,_e,Re,Be,Le);_e.transmission>0?s.push(Oe):!0===_e.transparent?a.push(Oe):r.push(Oe)},unshift:function k(ae,pe,_e,Re,Be,Le){const Oe=_(ae,pe,_e,Re,Be,Le);_e.transmission>0?s.unshift(Oe):!0===_e.transparent?a.unshift(Oe):r.unshift(Oe)},finish:function ee(){for(let ae=t,pe=v.length;ae<pe;ae++){const _e=v[ae];if(null===_e.id)break;_e.id=null,_e.object=null,_e.geometry=null,_e.material=null,_e.group=null}},sort:function B(ae,pe){r.length>1&&r.sort(ae||cx),s.length>1&&s.sort(pe||c_),a.length>1&&a.sort(pe||c_)}}}function dy(){let v=new WeakMap;return{get:function t(s,a){const u=v.get(s);let _;return void 0===u?(_=new u_,v.set(s,[_])):a>=u.length?(_=new u_,u.push(_)):_=u[a],_},dispose:function r(){v=new WeakMap}}}function xf(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new St,color:new kr};break;case"SpotLight":r={position:new St,direction:new St,color:new kr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new St,color:new kr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new St,skyColor:new kr,groundColor:new kr};break;case"RectAreaLight":r={color:new kr,position:new St,halfWidth:new St,halfHeight:new St}}return v[t.id]=r,r}}}let am=0;function d_(v,t){return(t.castShadow?2:0)-(v.castShadow?2:0)+(t.map?1:0)-(v.map?1:0)}function Sf(v){const t=new xf,r=function hy(){const v={};return{get:function(t){if(void 0!==v[t.id])return v[t.id];let r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pr};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pr,shadowCameraNear:1,shadowCameraFar:1e3}}return v[t.id]=r,r}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let B=0;B<9;B++)s.probe.push(new St);const a=new St,u=new Li,_=new Li;return{setup:function A(B){let ee=0,ae=0,pe=0;for(let It=0;It<9;It++)s.probe[It].set(0,0,0);let _e=0,Re=0,Be=0,Le=0,Oe=0,ft=0,dt=0,st=0,Yt=0,Mt=0,Gt=0;B.sort(d_);for(let It=0,Dt=B.length;It<Dt;It++){const bn=B[It],Yn=bn.color,Kn=bn.intensity,rr=bn.distance,wr=bn.shadow&&bn.shadow.map?bn.shadow.map.texture:null;if(bn.isAmbientLight)ee+=Yn.r*Kn,ae+=Yn.g*Kn,pe+=Yn.b*Kn;else if(bn.isLightProbe){for(let nr=0;nr<9;nr++)s.probe[nr].addScaledVector(bn.sh.coefficients[nr],Kn);Gt++}else if(bn.isDirectionalLight){const nr=t.get(bn);if(nr.color.copy(bn.color).multiplyScalar(bn.intensity),bn.castShadow){const Hr=bn.shadow,cr=r.get(bn);cr.shadowIntensity=Hr.intensity,cr.shadowBias=Hr.bias,cr.shadowNormalBias=Hr.normalBias,cr.shadowRadius=Hr.radius,cr.shadowMapSize=Hr.mapSize,s.directionalShadow[_e]=cr,s.directionalShadowMap[_e]=wr,s.directionalShadowMatrix[_e]=bn.shadow.matrix,ft++}s.directional[_e]=nr,_e++}else if(bn.isSpotLight){const nr=t.get(bn);nr.position.setFromMatrixPosition(bn.matrixWorld),nr.color.copy(Yn).multiplyScalar(Kn),nr.distance=rr,nr.coneCos=Math.cos(bn.angle),nr.penumbraCos=Math.cos(bn.angle*(1-bn.penumbra)),nr.decay=bn.decay,s.spot[Be]=nr;const Hr=bn.shadow;if(bn.map&&(s.spotLightMap[Yt]=bn.map,Yt++,Hr.updateMatrices(bn),bn.castShadow&&Mt++),s.spotLightMatrix[Be]=Hr.matrix,bn.castShadow){const cr=r.get(bn);cr.shadowIntensity=Hr.intensity,cr.shadowBias=Hr.bias,cr.shadowNormalBias=Hr.normalBias,cr.shadowRadius=Hr.radius,cr.shadowMapSize=Hr.mapSize,s.spotShadow[Be]=cr,s.spotShadowMap[Be]=wr,st++}Be++}else if(bn.isRectAreaLight){const nr=t.get(bn);nr.color.copy(Yn).multiplyScalar(Kn),nr.halfWidth.set(.5*bn.width,0,0),nr.halfHeight.set(0,.5*bn.height,0),s.rectArea[Le]=nr,Le++}else if(bn.isPointLight){const nr=t.get(bn);if(nr.color.copy(bn.color).multiplyScalar(bn.intensity),nr.distance=bn.distance,nr.decay=bn.decay,bn.castShadow){const Hr=bn.shadow,cr=r.get(bn);cr.shadowIntensity=Hr.intensity,cr.shadowBias=Hr.bias,cr.shadowNormalBias=Hr.normalBias,cr.shadowRadius=Hr.radius,cr.shadowMapSize=Hr.mapSize,cr.shadowCameraNear=Hr.camera.near,cr.shadowCameraFar=Hr.camera.far,s.pointShadow[Re]=cr,s.pointShadowMap[Re]=wr,s.pointShadowMatrix[Re]=bn.shadow.matrix,dt++}s.point[Re]=nr,Re++}else if(bn.isHemisphereLight){const nr=t.get(bn);nr.skyColor.copy(bn.color).multiplyScalar(Kn),nr.groundColor.copy(bn.groundColor).multiplyScalar(Kn),s.hemi[Oe]=nr,Oe++}}Le>0&&(!0===v.has("OES_texture_float_linear")?(s.rectAreaLTC1=wi.LTC_FLOAT_1,s.rectAreaLTC2=wi.LTC_FLOAT_2):(s.rectAreaLTC1=wi.LTC_HALF_1,s.rectAreaLTC2=wi.LTC_HALF_2)),s.ambient[0]=ee,s.ambient[1]=ae,s.ambient[2]=pe;const tn=s.hash;(tn.directionalLength!==_e||tn.pointLength!==Re||tn.spotLength!==Be||tn.rectAreaLength!==Le||tn.hemiLength!==Oe||tn.numDirectionalShadows!==ft||tn.numPointShadows!==dt||tn.numSpotShadows!==st||tn.numSpotMaps!==Yt||tn.numLightProbes!==Gt)&&(s.directional.length=_e,s.spot.length=Be,s.rectArea.length=Le,s.point.length=Re,s.hemi.length=Oe,s.directionalShadow.length=ft,s.directionalShadowMap.length=ft,s.pointShadow.length=dt,s.pointShadowMap.length=dt,s.spotShadow.length=st,s.spotShadowMap.length=st,s.directionalShadowMatrix.length=ft,s.pointShadowMatrix.length=dt,s.spotLightMatrix.length=st+Yt-Mt,s.spotLightMap.length=Yt,s.numSpotLightShadowsWithMaps=Mt,s.numLightProbes=Gt,tn.directionalLength=_e,tn.pointLength=Re,tn.spotLength=Be,tn.rectAreaLength=Le,tn.hemiLength=Oe,tn.numDirectionalShadows=ft,tn.numPointShadows=dt,tn.numSpotShadows=st,tn.numSpotMaps=Yt,tn.numLightProbes=Gt,s.version=am++)},setupView:function k(B,ee){let ae=0,pe=0,_e=0,Re=0,Be=0;const Le=ee.matrixWorldInverse;for(let Oe=0,ft=B.length;Oe<ft;Oe++){const dt=B[Oe];if(dt.isDirectionalLight){const st=s.directional[ae];st.direction.setFromMatrixPosition(dt.matrixWorld),a.setFromMatrixPosition(dt.target.matrixWorld),st.direction.sub(a),st.direction.transformDirection(Le),ae++}else if(dt.isSpotLight){const st=s.spot[_e];st.position.setFromMatrixPosition(dt.matrixWorld),st.position.applyMatrix4(Le),st.direction.setFromMatrixPosition(dt.matrixWorld),a.setFromMatrixPosition(dt.target.matrixWorld),st.direction.sub(a),st.direction.transformDirection(Le),_e++}else if(dt.isRectAreaLight){const st=s.rectArea[Re];st.position.setFromMatrixPosition(dt.matrixWorld),st.position.applyMatrix4(Le),_.identity(),u.copy(dt.matrixWorld),u.premultiply(Le),_.extractRotation(u),st.halfWidth.set(.5*dt.width,0,0),st.halfHeight.set(0,.5*dt.height,0),st.halfWidth.applyMatrix4(_),st.halfHeight.applyMatrix4(_),Re++}else if(dt.isPointLight){const st=s.point[pe];st.position.setFromMatrixPosition(dt.matrixWorld),st.position.applyMatrix4(Le),pe++}else if(dt.isHemisphereLight){const st=s.hemi[Be];st.direction.setFromMatrixPosition(dt.matrixWorld),st.direction.transformDirection(Le),Be++}}},state:s}}function fy(v){const t=new Sf(v),r=[],s=[],B={lightsArray:r,shadowsArray:s,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function a(ee){B.camera=ee,r.length=0,s.length=0},state:B,setupLights:function A(){t.setup(r)},setupLightsView:function k(ee){t.setupView(r,ee)},pushLight:function u(ee){r.push(ee)},pushShadow:function _(ee){s.push(ee)}}}function ux(v){let t=new WeakMap;return{get:function r(a,u=0){const _=t.get(a);let A;return void 0===_?(A=new fy(v),t.set(a,[A])):u>=_.length?(A=new fy(v),_.push(A)):A=_[u],A},dispose:function s(){t=new WeakMap}}}function f_(v,t,r){let s=new tp;const a=new pr,u=new pr,_=new Gs,A=new qh({depthPacking:3201}),k=new Sv,B={},ee=r.maxTextureSize,ae={0:1,1:0,2:2},pe=new tc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_e=pe.clone();_e.defines.HORIZONTAL_PASS=1;const Re=new gs;Re.setAttribute("position",new to(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Be=new ks(Re,pe),Le=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S;let Oe=this.type;function ft(Mt,Gt){const tn=t.update(Be);pe.defines.VSM_SAMPLES!==Mt.blurSamples&&(pe.defines.VSM_SAMPLES=Mt.blurSamples,_e.defines.VSM_SAMPLES=Mt.blurSamples,pe.needsUpdate=!0,_e.needsUpdate=!0),null===Mt.mapPass&&(Mt.mapPass=new Te(a.x,a.y)),pe.uniforms.shadow_pass.value=Mt.map.texture,pe.uniforms.resolution.value=Mt.mapSize,pe.uniforms.radius.value=Mt.radius,v.setRenderTarget(Mt.mapPass),v.clear(),v.renderBufferDirect(Gt,null,tn,pe,Be,null),_e.uniforms.shadow_pass.value=Mt.mapPass.texture,_e.uniforms.resolution.value=Mt.mapSize,_e.uniforms.radius.value=Mt.radius,v.setRenderTarget(Mt.map),v.clear(),v.renderBufferDirect(Gt,null,tn,_e,Be,null)}function dt(Mt,Gt,tn,It){let Dt=null;const bn=!0===tn.isPointLight?Mt.customDistanceMaterial:Mt.customDepthMaterial;if(void 0!==bn)Dt=bn;else if(Dt=!0===tn.isPointLight?k:A,v.localClippingEnabled&&!0===Gt.clipShadows&&Array.isArray(Gt.clippingPlanes)&&0!==Gt.clippingPlanes.length||Gt.displacementMap&&0!==Gt.displacementScale||Gt.alphaMap&&Gt.alphaTest>0||Gt.map&&Gt.alphaTest>0){const Yn=Dt.uuid,Kn=Gt.uuid;let rr=B[Yn];void 0===rr&&(rr={},B[Yn]=rr);let wr=rr[Kn];void 0===wr&&(wr=Dt.clone(),rr[Kn]=wr,Gt.addEventListener("dispose",Yt)),Dt=wr}return Dt.visible=Gt.visible,Dt.wireframe=Gt.wireframe,Dt.side=It===q?null!==Gt.shadowSide?Gt.shadowSide:Gt.side:null!==Gt.shadowSide?Gt.shadowSide:ae[Gt.side],Dt.alphaMap=Gt.alphaMap,Dt.alphaTest=Gt.alphaTest,Dt.map=Gt.map,Dt.clipShadows=Gt.clipShadows,Dt.clippingPlanes=Gt.clippingPlanes,Dt.clipIntersection=Gt.clipIntersection,Dt.displacementMap=Gt.displacementMap,Dt.displacementScale=Gt.displacementScale,Dt.displacementBias=Gt.displacementBias,Dt.wireframeLinewidth=Gt.wireframeLinewidth,Dt.linewidth=Gt.linewidth,!0===tn.isPointLight&&!0===Dt.isMeshDistanceMaterial&&(v.properties.get(Dt).light=tn),Dt}function st(Mt,Gt,tn,It,Dt){if(!1===Mt.visible)return;if(Mt.layers.test(Gt.layers)&&(Mt.isMesh||Mt.isLine||Mt.isPoints)&&(Mt.castShadow||Mt.receiveShadow&&Dt===q)&&(!Mt.frustumCulled||s.intersectsObject(Mt))){Mt.modelViewMatrix.multiplyMatrices(tn.matrixWorldInverse,Mt.matrixWorld);const Kn=t.update(Mt),rr=Mt.material;if(Array.isArray(rr)){const wr=Kn.groups;for(let nr=0,Hr=wr.length;nr<Hr;nr++){const cr=wr[nr],Yr=rr[cr.materialIndex];if(Yr&&Yr.visible){const fi=dt(Mt,Yr,It,Dt);Mt.onBeforeShadow(v,Mt,Gt,tn,Kn,fi,cr),v.renderBufferDirect(tn,null,Kn,fi,Mt,cr),Mt.onAfterShadow(v,Mt,Gt,tn,Kn,fi,cr)}}}else if(rr.visible){const wr=dt(Mt,rr,It,Dt);Mt.onBeforeShadow(v,Mt,Gt,tn,Kn,wr,null),v.renderBufferDirect(tn,null,Kn,wr,Mt,null),Mt.onAfterShadow(v,Mt,Gt,tn,Kn,wr,null)}}const Yn=Mt.children;for(let Kn=0,rr=Yn.length;Kn<rr;Kn++)st(Yn[Kn],Gt,tn,It,Dt)}function Yt(Mt){Mt.target.removeEventListener("dispose",Yt);for(const tn in B){const It=B[tn],Dt=Mt.target.uuid;Dt in It&&(It[Dt].dispose(),delete It[Dt])}}this.render=function(Mt,Gt,tn){if(!1===Le.enabled||!1===Le.autoUpdate&&!1===Le.needsUpdate||0===Mt.length)return;const It=v.getRenderTarget(),Dt=v.getActiveCubeFace(),bn=v.getActiveMipmapLevel(),Yn=v.state;Yn.setBlending(0),Yn.buffers.color.setClear(1,1,1,1),Yn.buffers.depth.setTest(!0),Yn.setScissorTest(!1);const Kn=Oe!==q&&this.type===q,rr=Oe===q&&this.type!==q;for(let wr=0,nr=Mt.length;wr<nr;wr++){const Hr=Mt[wr],cr=Hr.shadow;if(void 0===cr){console.warn("THREE.WebGLShadowMap:",Hr,"has no shadow.");continue}if(!1===cr.autoUpdate&&!1===cr.needsUpdate)continue;a.copy(cr.mapSize);const Yr=cr.getFrameExtents();if(a.multiply(Yr),u.copy(cr.mapSize),(a.x>ee||a.y>ee)&&(a.x>ee&&(u.x=Math.floor(ee/Yr.x),a.x=u.x*Yr.x,cr.mapSize.x=u.x),a.y>ee&&(u.y=Math.floor(ee/Yr.y),a.y=u.y*Yr.y,cr.mapSize.y=u.y)),null===cr.map||!0===Kn||!0===rr){const Oi=this.type!==q?{minFilter:_n,magFilter:_n}:{};null!==cr.map&&cr.map.dispose(),cr.map=new Te(a.x,a.y,Oi),cr.map.texture.name=Hr.name+".shadowMap",cr.camera.updateProjectionMatrix()}v.setRenderTarget(cr.map),v.clear();const fi=cr.getViewportCount();for(let Oi=0;Oi<fi;Oi++){const as=cr.getViewport(Oi);_.set(u.x*as.x,u.y*as.y,u.x*as.z,u.y*as.w),Yn.viewport(_),cr.updateMatrices(Hr,Oi),s=cr.getFrustum(),st(Gt,tn,cr.camera,Hr,this.type)}!0!==cr.isPointLightShadow&&this.type===q&&ft(cr,tn),cr.needsUpdate=!1}Oe=this.type,Le.needsUpdate=!1,v.setRenderTarget(It,Dt,bn)}}const p_={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function m_(v,t){const u=new function r(){let Xn=!1;const Ai=new Gs;let Ar=null;const zr=new Gs(0,0,0,0);return{setMask:function(ji){Ar!==ji&&!Xn&&(v.colorMask(ji,ji,ji,ji),Ar=ji)},setLocked:function(ji){Xn=ji},setClear:function(ji,Pi,Bs,Ea,hl){!0===hl&&(ji*=Ea,Pi*=Ea,Bs*=Ea),Ai.set(ji,Pi,Bs,Ea),!1===zr.equals(Ai)&&(v.clearColor(ji,Pi,Bs,Ea),zr.copy(Ai))},reset:function(){Xn=!1,Ar=null,zr.set(-1,0,0,0)}}},_=new function s(){let Xn=!1,Ai=!1,Ar=null,zr=null,ji=null;return{setReversed:function(Pi){if(Ai!==Pi){const Bs=t.get("EXT_clip_control");Bs.clipControlEXT(Bs.LOWER_LEFT_EXT,Ai?Bs.ZERO_TO_ONE_EXT:Bs.NEGATIVE_ONE_TO_ONE_EXT);const Ea=ji;ji=null,this.setClear(Ea)}Ai=Pi},getReversed:function(){return Ai},setTest:function(Pi){Pi?ri(v.DEPTH_TEST):Gi(v.DEPTH_TEST)},setMask:function(Pi){Ar!==Pi&&!Xn&&(v.depthMask(Pi),Ar=Pi)},setFunc:function(Pi){if(Ai&&(Pi=p_[Pi]),zr!==Pi){switch(Pi){case 0:v.depthFunc(v.NEVER);break;case 1:v.depthFunc(v.ALWAYS);break;case 2:v.depthFunc(v.LESS);break;case 3:default:v.depthFunc(v.LEQUAL);break;case 4:v.depthFunc(v.EQUAL);break;case 5:v.depthFunc(v.GEQUAL);break;case 6:v.depthFunc(v.GREATER);break;case 7:v.depthFunc(v.NOTEQUAL)}zr=Pi}},setLocked:function(Pi){Xn=Pi},setClear:function(Pi){ji!==Pi&&(Ai&&(Pi=1-Pi),v.clearDepth(Pi),ji=Pi)},reset:function(){Xn=!1,Ar=null,zr=null,ji=null,Ai=!1}}},A=new function a(){let Xn=!1,Ai=null,Ar=null,zr=null,ji=null,Pi=null,Bs=null,Ea=null,hl=null;return{setTest:function(wo){Xn||(wo?ri(v.STENCIL_TEST):Gi(v.STENCIL_TEST))},setMask:function(wo){Ai!==wo&&!Xn&&(v.stencilMask(wo),Ai=wo)},setFunc:function(wo,Oc,Au){(Ar!==wo||zr!==Oc||ji!==Au)&&(v.stencilFunc(wo,Oc,Au),Ar=wo,zr=Oc,ji=Au)},setOp:function(wo,Oc,Au){(Pi!==wo||Bs!==Oc||Ea!==Au)&&(v.stencilOp(wo,Oc,Au),Pi=wo,Bs=Oc,Ea=Au)},setLocked:function(wo){Xn=wo},setClear:function(wo){hl!==wo&&(v.clearStencil(wo),hl=wo)},reset:function(){Xn=!1,Ai=null,Ar=null,zr=null,ji=null,Pi=null,Bs=null,Ea=null,hl=null}}},k=new WeakMap,B=new WeakMap;let ee={},ae={},pe=new WeakMap,_e=[],Re=null,Be=!1,Le=null,Oe=null,ft=null,dt=null,st=null,Yt=null,Mt=null,Gt=new kr(0,0,0),tn=0,It=!1,Dt=null,bn=null,Yn=null,Kn=null,rr=null;const wr=v.getParameter(v.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let nr=!1,Hr=0;const cr=v.getParameter(v.VERSION);-1!==cr.indexOf("WebGL")?(Hr=parseFloat(/^WebGL (\d)/.exec(cr)[1]),nr=Hr>=1):-1!==cr.indexOf("OpenGL ES")&&(Hr=parseFloat(/^OpenGL ES (\d)/.exec(cr)[1]),nr=Hr>=2);let Yr=null,fi={};const Oi=v.getParameter(v.SCISSOR_BOX),as=v.getParameter(v.VIEWPORT),Ts=(new Gs).fromArray(Oi),Tr=(new Gs).fromArray(as);function ti(Xn,Ai,Ar,zr){const ji=new Uint8Array(4),Pi=v.createTexture();v.bindTexture(Xn,Pi),v.texParameteri(Xn,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(Xn,v.TEXTURE_MAG_FILTER,v.NEAREST);for(let Bs=0;Bs<Ar;Bs++)Xn===v.TEXTURE_3D||Xn===v.TEXTURE_2D_ARRAY?v.texImage3D(Ai,0,v.RGBA,1,1,zr,0,v.RGBA,v.UNSIGNED_BYTE,ji):v.texImage2D(Ai+Bs,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,ji);return Pi}const Ii={};function ri(Xn){!0!==ee[Xn]&&(v.enable(Xn),ee[Xn]=!0)}function Gi(Xn){!1!==ee[Xn]&&(v.disable(Xn),ee[Xn]=!1)}Ii[v.TEXTURE_2D]=ti(v.TEXTURE_2D,v.TEXTURE_2D,1),Ii[v.TEXTURE_CUBE_MAP]=ti(v.TEXTURE_CUBE_MAP,v.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ii[v.TEXTURE_2D_ARRAY]=ti(v.TEXTURE_2D_ARRAY,v.TEXTURE_2D_ARRAY,1,1),Ii[v.TEXTURE_3D]=ti(v.TEXTURE_3D,v.TEXTURE_3D,1,1),u.setClear(0,0,0,1),_.setClear(1),A.setClear(0),ri(v.DEPTH_TEST),_.setFunc(3),Vr(!1),yi(1),ri(v.CULL_FACE),dn(0);const _r={100:v.FUNC_ADD,101:v.FUNC_SUBTRACT,102:v.FUNC_REVERSE_SUBTRACT};_r[103]=v.MIN,_r[104]=v.MAX;const Dr={200:v.ZERO,201:v.ONE,202:v.SRC_COLOR,204:v.SRC_ALPHA,210:v.SRC_ALPHA_SATURATE,208:v.DST_COLOR,206:v.DST_ALPHA,203:v.ONE_MINUS_SRC_COLOR,205:v.ONE_MINUS_SRC_ALPHA,209:v.ONE_MINUS_DST_COLOR,207:v.ONE_MINUS_DST_ALPHA,211:v.CONSTANT_COLOR,212:v.ONE_MINUS_CONSTANT_COLOR,213:v.CONSTANT_ALPHA,214:v.ONE_MINUS_CONSTANT_ALPHA};function dn(Xn,Ai,Ar,zr,ji,Pi,Bs,Ea,hl,wo){if(0!==Xn){if(!1===Be&&(ri(v.BLEND),Be=!0),5===Xn)ji=ji||Ai,Pi=Pi||Ar,Bs=Bs||zr,(Ai!==Oe||ji!==st)&&(v.blendEquationSeparate(_r[Ai],_r[ji]),Oe=Ai,st=ji),(Ar!==ft||zr!==dt||Pi!==Yt||Bs!==Mt)&&(v.blendFuncSeparate(Dr[Ar],Dr[zr],Dr[Pi],Dr[Bs]),ft=Ar,dt=zr,Yt=Pi,Mt=Bs),(!1===Ea.equals(Gt)||hl!==tn)&&(v.blendColor(Ea.r,Ea.g,Ea.b,hl),Gt.copy(Ea),tn=hl),Le=Xn,It=!1;else if(Xn!==Le||wo!==It){if((100!==Oe||100!==st)&&(v.blendEquation(v.FUNC_ADD),Oe=100,st=100),wo)switch(Xn){case 1:v.blendFuncSeparate(v.ONE,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.ONE,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFuncSeparate(v.ZERO,v.SRC_COLOR,v.ZERO,v.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xn)}else switch(Xn){case 1:v.blendFuncSeparate(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case 2:v.blendFunc(v.SRC_ALPHA,v.ONE);break;case 3:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case 4:v.blendFunc(v.ZERO,v.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xn)}ft=null,dt=null,Yt=null,Mt=null,Gt.set(0,0,0),tn=0,Le=Xn,It=wo}}else!0===Be&&(Gi(v.BLEND),Be=!1)}function Vr(Xn){Dt!==Xn&&(v.frontFace(Xn?v.CW:v.CCW),Dt=Xn)}function yi(Xn){0!==Xn?(ri(v.CULL_FACE),Xn!==bn&&v.cullFace(1===Xn?v.BACK:2===Xn?v.FRONT:v.FRONT_AND_BACK)):Gi(v.CULL_FACE),bn=Xn}function qi(Xn,Ai,Ar){Xn?(ri(v.POLYGON_OFFSET_FILL),(Kn!==Ai||rr!==Ar)&&(v.polygonOffset(Ai,Ar),Kn=Ai,rr=Ar)):Gi(v.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:_,stencil:A},enable:ri,disable:Gi,bindFramebuffer:function Hs(Xn,Ai){return ae[Xn]!==Ai&&(v.bindFramebuffer(Xn,Ai),ae[Xn]=Ai,Xn===v.DRAW_FRAMEBUFFER&&(ae[v.FRAMEBUFFER]=Ai),Xn===v.FRAMEBUFFER&&(ae[v.DRAW_FRAMEBUFFER]=Ai),!0)},drawBuffers:function Ui(Xn,Ai){let Ar=_e,zr=!1;if(Xn){Ar=pe.get(Ai),void 0===Ar&&(Ar=[],pe.set(Ai,Ar));const ji=Xn.textures;if(Ar.length!==ji.length||Ar[0]!==v.COLOR_ATTACHMENT0){for(let Pi=0,Bs=ji.length;Pi<Bs;Pi++)Ar[Pi]=v.COLOR_ATTACHMENT0+Pi;Ar.length=ji.length,zr=!0}}else Ar[0]!==v.BACK&&(Ar[0]=v.BACK,zr=!0);zr&&v.drawBuffers(Ar)},useProgram:function hs(Xn){return Re!==Xn&&(v.useProgram(Xn),Re=Xn,!0)},setBlending:dn,setMaterial:function Di(Xn,Ai){2===Xn.side?Gi(v.CULL_FACE):ri(v.CULL_FACE);let Ar=1===Xn.side;Ai&&(Ar=!Ar),Vr(Ar),1===Xn.blending&&!1===Xn.transparent?dn(0):dn(Xn.blending,Xn.blendEquation,Xn.blendSrc,Xn.blendDst,Xn.blendEquationAlpha,Xn.blendSrcAlpha,Xn.blendDstAlpha,Xn.blendColor,Xn.blendAlpha,Xn.premultipliedAlpha),_.setFunc(Xn.depthFunc),_.setTest(Xn.depthTest),_.setMask(Xn.depthWrite),u.setMask(Xn.colorWrite);const zr=Xn.stencilWrite;A.setTest(zr),zr&&(A.setMask(Xn.stencilWriteMask),A.setFunc(Xn.stencilFunc,Xn.stencilRef,Xn.stencilFuncMask),A.setOp(Xn.stencilFail,Xn.stencilZFail,Xn.stencilZPass)),qi(Xn.polygonOffset,Xn.polygonOffsetFactor,Xn.polygonOffsetUnits),!0===Xn.alphaToCoverage?ri(v.SAMPLE_ALPHA_TO_COVERAGE):Gi(v.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Vr,setCullFace:yi,setLineWidth:function qr(Xn){Xn!==Yn&&(nr&&v.lineWidth(Xn),Yn=Xn)},setPolygonOffset:qi,setScissorTest:function ui(Xn){Xn?ri(v.SCISSOR_TEST):Gi(v.SCISSOR_TEST)},activeTexture:function ln(Xn){void 0===Xn&&(Xn=v.TEXTURE0+wr-1),Yr!==Xn&&(v.activeTexture(Xn),Yr=Xn)},bindTexture:function $t(Xn,Ai,Ar){void 0===Ar&&(Ar=null===Yr?v.TEXTURE0+wr-1:Yr);let zr=fi[Ar];void 0===zr&&(zr={type:void 0,texture:void 0},fi[Ar]=zr),(zr.type!==Xn||zr.texture!==Ai)&&(Yr!==Ar&&(v.activeTexture(Ar),Yr=Ar),v.bindTexture(Xn,Ai||Ii[Xn]),zr.type=Xn,zr.texture=Ai)},unbindTexture:function lr(){const Xn=fi[Yr];void 0!==Xn&&void 0!==Xn.type&&(v.bindTexture(Xn.type,null),Xn.type=void 0,Xn.texture=void 0)},compressedTexImage2D:function Lr(){try{v.compressedTexImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexImage3D:function Kr(){try{v.compressedTexImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texImage2D:function Hi(){try{v.texImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texImage3D:function ms(){try{v.texImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},updateUBOMapping:function lo(Xn,Ai){let Ar=B.get(Ai);void 0===Ar&&(Ar=new WeakMap,B.set(Ai,Ar));let zr=Ar.get(Xn);void 0===zr&&(zr=v.getUniformBlockIndex(Ai,Xn.name),Ar.set(Xn,zr))},uniformBlockBinding:function Us(Xn,Ai){const zr=B.get(Ai).get(Xn);k.get(Ai)!==zr&&(v.uniformBlockBinding(Ai,zr,Xn.__bindingPointIndex),k.set(Ai,zr))},texStorage2D:function Fs(){try{v.texStorage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texStorage3D:function si(){try{v.texStorage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texSubImage2D:function jr(){try{v.texSubImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},texSubImage3D:function Zi(){try{v.texSubImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexSubImage2D:function Mi(){try{v.compressedTexSubImage2D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},compressedTexSubImage3D:function Ri(){try{v.compressedTexSubImage3D(...arguments)}catch(Xn){console.error("THREE.WebGLState:",Xn)}},scissor:function vs(Xn){!1===Ts.equals(Xn)&&(v.scissor(Xn.x,Xn.y,Xn.z,Xn.w),Ts.copy(Xn))},viewport:function Wi(Xn){!1===Tr.equals(Xn)&&(v.viewport(Xn.x,Xn.y,Xn.z,Xn.w),Tr.copy(Xn))},reset:function Xo(){v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.POLYGON_OFFSET_FILL),v.disable(v.SCISSOR_TEST),v.disable(v.STENCIL_TEST),v.disable(v.SAMPLE_ALPHA_TO_COVERAGE),v.blendEquation(v.FUNC_ADD),v.blendFunc(v.ONE,v.ZERO),v.blendFuncSeparate(v.ONE,v.ZERO,v.ONE,v.ZERO),v.blendColor(0,0,0,0),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(v.LESS),_.setReversed(!1),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(v.ALWAYS,0,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),v.clearStencil(0),v.cullFace(v.BACK),v.frontFace(v.CCW),v.polygonOffset(0,0),v.activeTexture(v.TEXTURE0),v.bindFramebuffer(v.FRAMEBUFFER,null),v.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),v.bindFramebuffer(v.READ_FRAMEBUFFER,null),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),ee={},Yr=null,fi={},ae={},pe=new WeakMap,_e=[],Re=null,Be=!1,Le=null,Oe=null,ft=null,dt=null,st=null,Yt=null,Mt=null,Gt=new kr(0,0,0),tn=0,It=!1,Dt=null,bn=null,Yn=null,Kn=null,rr=null,Ts.set(0,0,v.canvas.width,v.canvas.height),Tr.set(0,0,v.canvas.width,v.canvas.height),u.reset(),_.reset(),A.reset()}}}function dx(v,t,r,s,a,u,_){const A=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,k=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),B=new pr,ee=new WeakMap;let ae;const pe=new WeakMap;let _e=!1;try{_e=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Re(ln,$t){return _e?new OffscreenCanvas(ln,$t):yl("canvas")}function Be(ln,$t,lr){let Lr=1;const Kr=ui(ln);if((Kr.width>lr||Kr.height>lr)&&(Lr=lr/Math.max(Kr.width,Kr.height)),Lr<1){if(typeof HTMLImageElement<"u"&&ln instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ln instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ln instanceof ImageBitmap||typeof VideoFrame<"u"&&ln instanceof VideoFrame){const jr=Math.floor(Lr*Kr.width),Zi=Math.floor(Lr*Kr.height);void 0===ae&&(ae=Re(jr,Zi));const Mi=$t?Re(jr,Zi):ae;return Mi.width=jr,Mi.height=Zi,Mi.getContext("2d").drawImage(ln,0,0,jr,Zi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Kr.width+"x"+Kr.height+") to ("+jr+"x"+Zi+")."),Mi}return"data"in ln&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Kr.width+"x"+Kr.height+")."),ln}return ln}function Le(ln){return ln.generateMipmaps}function Oe(ln){v.generateMipmap(ln)}function ft(ln){return ln.isWebGLCubeRenderTarget?v.TEXTURE_CUBE_MAP:ln.isWebGL3DRenderTarget?v.TEXTURE_3D:ln.isWebGLArrayRenderTarget||ln.isCompressedArrayTexture?v.TEXTURE_2D_ARRAY:v.TEXTURE_2D}function dt(ln,$t,lr,Lr,Kr=!1){if(null!==ln){if(void 0!==v[ln])return v[ln];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ln+"'")}let jr=$t;if($t===v.RED&&(lr===v.FLOAT&&(jr=v.R32F),lr===v.HALF_FLOAT&&(jr=v.R16F),lr===v.UNSIGNED_BYTE&&(jr=v.R8)),$t===v.RED_INTEGER&&(lr===v.UNSIGNED_BYTE&&(jr=v.R8UI),lr===v.UNSIGNED_SHORT&&(jr=v.R16UI),lr===v.UNSIGNED_INT&&(jr=v.R32UI),lr===v.BYTE&&(jr=v.R8I),lr===v.SHORT&&(jr=v.R16I),lr===v.INT&&(jr=v.R32I)),$t===v.RG&&(lr===v.FLOAT&&(jr=v.RG32F),lr===v.HALF_FLOAT&&(jr=v.RG16F),lr===v.UNSIGNED_BYTE&&(jr=v.RG8)),$t===v.RG_INTEGER&&(lr===v.UNSIGNED_BYTE&&(jr=v.RG8UI),lr===v.UNSIGNED_SHORT&&(jr=v.RG16UI),lr===v.UNSIGNED_INT&&(jr=v.RG32UI),lr===v.BYTE&&(jr=v.RG8I),lr===v.SHORT&&(jr=v.RG16I),lr===v.INT&&(jr=v.RG32I)),$t===v.RGB_INTEGER&&(lr===v.UNSIGNED_BYTE&&(jr=v.RGB8UI),lr===v.UNSIGNED_SHORT&&(jr=v.RGB16UI),lr===v.UNSIGNED_INT&&(jr=v.RGB32UI),lr===v.BYTE&&(jr=v.RGB8I),lr===v.SHORT&&(jr=v.RGB16I),lr===v.INT&&(jr=v.RGB32I)),$t===v.RGBA_INTEGER&&(lr===v.UNSIGNED_BYTE&&(jr=v.RGBA8UI),lr===v.UNSIGNED_SHORT&&(jr=v.RGBA16UI),lr===v.UNSIGNED_INT&&(jr=v.RGBA32UI),lr===v.BYTE&&(jr=v.RGBA8I),lr===v.SHORT&&(jr=v.RGBA16I),lr===v.INT&&(jr=v.RGBA32I)),$t===v.RGB&&lr===v.UNSIGNED_INT_5_9_9_9_REV&&(jr=v.RGB9_E5),$t===v.RGBA){const Zi=Kr?Ms:xs.getTransfer(Lr);lr===v.FLOAT&&(jr=v.RGBA32F),lr===v.HALF_FLOAT&&(jr=v.RGBA16F),lr===v.UNSIGNED_BYTE&&(jr=Zi===Ki?v.SRGB8_ALPHA8:v.RGBA8),lr===v.UNSIGNED_SHORT_4_4_4_4&&(jr=v.RGBA4),lr===v.UNSIGNED_SHORT_5_5_5_1&&(jr=v.RGB5_A1)}return(jr===v.R16F||jr===v.R32F||jr===v.RG16F||jr===v.RG32F||jr===v.RGBA16F||jr===v.RGBA32F)&&t.get("EXT_color_buffer_float"),jr}function st(ln,$t){let lr;return ln?null===$t||$t===T||$t===$?lr=v.DEPTH24_STENCIL8:$t===N?lr=v.DEPTH32F_STENCIL8:$t===Pe&&(lr=v.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===$t||$t===T||$t===$?lr=v.DEPTH_COMPONENT24:$t===N?lr=v.DEPTH_COMPONENT32F:$t===Pe&&(lr=v.DEPTH_COMPONENT16),lr}function Yt(ln,$t){return!0===Le(ln)||ln.isFramebufferTexture&&ln.minFilter!==_n&&ln.minFilter!==Cn?Math.log2(Math.max($t.width,$t.height))+1:void 0!==ln.mipmaps&&ln.mipmaps.length>0?ln.mipmaps.length:ln.isCompressedTexture&&Array.isArray(ln.image)?$t.mipmaps.length:1}function Mt(ln){const $t=ln.target;$t.removeEventListener("dispose",Mt),function tn(ln){const $t=s.get(ln);if(void 0===$t.__webglInit)return;const lr=ln.source,Lr=pe.get(lr);if(Lr){const Kr=Lr[$t.__cacheKey];Kr.usedTimes--,0===Kr.usedTimes&&It(ln),0===Object.keys(Lr).length&&pe.delete(lr)}s.remove(ln)}($t),$t.isVideoTexture&&ee.delete($t)}function Gt(ln){const $t=ln.target;$t.removeEventListener("dispose",Gt),function Dt(ln){const $t=s.get(ln);if(ln.depthTexture&&(ln.depthTexture.dispose(),s.remove(ln.depthTexture)),ln.isWebGLCubeRenderTarget)for(let Lr=0;Lr<6;Lr++){if(Array.isArray($t.__webglFramebuffer[Lr]))for(let Kr=0;Kr<$t.__webglFramebuffer[Lr].length;Kr++)v.deleteFramebuffer($t.__webglFramebuffer[Lr][Kr]);else v.deleteFramebuffer($t.__webglFramebuffer[Lr]);$t.__webglDepthbuffer&&v.deleteRenderbuffer($t.__webglDepthbuffer[Lr])}else{if(Array.isArray($t.__webglFramebuffer))for(let Lr=0;Lr<$t.__webglFramebuffer.length;Lr++)v.deleteFramebuffer($t.__webglFramebuffer[Lr]);else v.deleteFramebuffer($t.__webglFramebuffer);if($t.__webglDepthbuffer&&v.deleteRenderbuffer($t.__webglDepthbuffer),$t.__webglMultisampledFramebuffer&&v.deleteFramebuffer($t.__webglMultisampledFramebuffer),$t.__webglColorRenderbuffer)for(let Lr=0;Lr<$t.__webglColorRenderbuffer.length;Lr++)$t.__webglColorRenderbuffer[Lr]&&v.deleteRenderbuffer($t.__webglColorRenderbuffer[Lr]);$t.__webglDepthRenderbuffer&&v.deleteRenderbuffer($t.__webglDepthRenderbuffer)}const lr=ln.textures;for(let Lr=0,Kr=lr.length;Lr<Kr;Lr++){const jr=s.get(lr[Lr]);jr.__webglTexture&&(v.deleteTexture(jr.__webglTexture),_.memory.textures--),s.remove(lr[Lr])}s.remove(ln)}($t)}function It(ln){const $t=s.get(ln);v.deleteTexture($t.__webglTexture),delete pe.get(ln.source)[$t.__cacheKey],_.memory.textures--}let bn=0;function wr(ln,$t){const lr=s.get(ln);if(ln.isVideoTexture&&function qr(ln){const $t=_.render.frame;ee.get(ln)!==$t&&(ee.set(ln,$t),ln.update())}(ln),!1===ln.isRenderTargetTexture&&ln.version>0&&lr.__version!==ln.version){const Lr=ln.image;if(null===Lr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Lr.complete)return void Tr(lr,ln,$t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.bindTexture(v.TEXTURE_2D,lr.__webglTexture,v.TEXTURE0+$t)}const Yr={[cn]:v.REPEAT,[Tn]:v.CLAMP_TO_EDGE,1002:v.MIRRORED_REPEAT},fi={[_n]:v.NEAREST,1004:v.NEAREST_MIPMAP_NEAREST,[hn]:v.NEAREST_MIPMAP_LINEAR,[Cn]:v.LINEAR,1007:v.LINEAR_MIPMAP_NEAREST,[fr]:v.LINEAR_MIPMAP_LINEAR},Oi={512:v.NEVER,519:v.ALWAYS,513:v.LESS,515:v.LEQUAL,514:v.EQUAL,518:v.GEQUAL,516:v.GREATER,517:v.NOTEQUAL};function as(ln,$t){if($t.type===N&&!1===t.has("OES_texture_float_linear")&&($t.magFilter===Cn||1007===$t.magFilter||$t.magFilter===hn||$t.magFilter===fr||$t.minFilter===Cn||1007===$t.minFilter||$t.minFilter===hn||$t.minFilter===fr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),v.texParameteri(ln,v.TEXTURE_WRAP_S,Yr[$t.wrapS]),v.texParameteri(ln,v.TEXTURE_WRAP_T,Yr[$t.wrapT]),(ln===v.TEXTURE_3D||ln===v.TEXTURE_2D_ARRAY)&&v.texParameteri(ln,v.TEXTURE_WRAP_R,Yr[$t.wrapR]),v.texParameteri(ln,v.TEXTURE_MAG_FILTER,fi[$t.magFilter]),v.texParameteri(ln,v.TEXTURE_MIN_FILTER,fi[$t.minFilter]),$t.compareFunction&&(v.texParameteri(ln,v.TEXTURE_COMPARE_MODE,v.COMPARE_REF_TO_TEXTURE),v.texParameteri(ln,v.TEXTURE_COMPARE_FUNC,Oi[$t.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if($t.magFilter===_n||$t.minFilter!==hn&&$t.minFilter!==fr||$t.type===N&&!1===t.has("OES_texture_float_linear"))return;if($t.anisotropy>1||s.get($t).__currentAnisotropy){const lr=t.get("EXT_texture_filter_anisotropic");v.texParameterf(ln,lr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($t.anisotropy,a.getMaxAnisotropy())),s.get($t).__currentAnisotropy=$t.anisotropy}}}function Ts(ln,$t){let lr=!1;void 0===ln.__webglInit&&(ln.__webglInit=!0,$t.addEventListener("dispose",Mt));const Lr=$t.source;let Kr=pe.get(Lr);void 0===Kr&&(Kr={},pe.set(Lr,Kr));const jr=function rr(ln){const $t=[];return $t.push(ln.wrapS),$t.push(ln.wrapT),$t.push(ln.wrapR||0),$t.push(ln.magFilter),$t.push(ln.minFilter),$t.push(ln.anisotropy),$t.push(ln.internalFormat),$t.push(ln.format),$t.push(ln.type),$t.push(ln.generateMipmaps),$t.push(ln.premultiplyAlpha),$t.push(ln.flipY),$t.push(ln.unpackAlignment),$t.push(ln.colorSpace),$t.join()}($t);if(jr!==ln.__cacheKey){void 0===Kr[jr]&&(Kr[jr]={texture:v.createTexture(),usedTimes:0},_.memory.textures++,lr=!0),Kr[jr].usedTimes++;const Zi=Kr[ln.__cacheKey];void 0!==Zi&&(Kr[ln.__cacheKey].usedTimes--,0===Zi.usedTimes&&It($t)),ln.__cacheKey=jr,ln.__webglTexture=Kr[jr].texture}return lr}function Tr(ln,$t,lr){let Lr=v.TEXTURE_2D;($t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(Lr=v.TEXTURE_2D_ARRAY),$t.isData3DTexture&&(Lr=v.TEXTURE_3D);const Kr=Ts(ln,$t),jr=$t.source;r.bindTexture(Lr,ln.__webglTexture,v.TEXTURE0+lr);const Zi=s.get(jr);if(jr.version!==Zi.__version||!0===Kr){r.activeTexture(v.TEXTURE0+lr);const Mi=xs.getPrimaries(xs.workingColorSpace),Ri=""===$t.colorSpace?null:xs.getPrimaries($t.colorSpace),Fs=""===$t.colorSpace||Mi===Ri?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,$t.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,$t.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fs);let si=Be($t.image,!1,a.maxTextureSize);si=qi($t,si);const Hi=u.convert($t.format,$t.colorSpace),ms=u.convert($t.type);let Wi,vs=dt($t.internalFormat,Hi,ms,$t.colorSpace,$t.isVideoTexture);as(Lr,$t);const lo=$t.mipmaps,Us=!0!==$t.isVideoTexture,Xo=void 0===Zi.__version||!0===Kr,Xn=jr.dataReady,Ai=Yt($t,si);if($t.isDepthTexture)vs=st($t.format===at,$t.type),Xo&&(Us?r.texStorage2D(v.TEXTURE_2D,1,vs,si.width,si.height):r.texImage2D(v.TEXTURE_2D,0,vs,si.width,si.height,0,Hi,ms,null));else if($t.isDataTexture)if(lo.length>0){Us&&Xo&&r.texStorage2D(v.TEXTURE_2D,Ai,vs,lo[0].width,lo[0].height);for(let Ar=0,zr=lo.length;Ar<zr;Ar++)Wi=lo[Ar],Us?Xn&&r.texSubImage2D(v.TEXTURE_2D,Ar,0,0,Wi.width,Wi.height,Hi,ms,Wi.data):r.texImage2D(v.TEXTURE_2D,Ar,vs,Wi.width,Wi.height,0,Hi,ms,Wi.data);$t.generateMipmaps=!1}else Us?(Xo&&r.texStorage2D(v.TEXTURE_2D,Ai,vs,si.width,si.height),Xn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,si.width,si.height,Hi,ms,si.data)):r.texImage2D(v.TEXTURE_2D,0,vs,si.width,si.height,0,Hi,ms,si.data);else if($t.isCompressedTexture)if($t.isCompressedArrayTexture){Us&&Xo&&r.texStorage3D(v.TEXTURE_2D_ARRAY,Ai,vs,lo[0].width,lo[0].height,si.depth);for(let Ar=0,zr=lo.length;Ar<zr;Ar++)if(Wi=lo[Ar],$t.format!==pt)if(null!==Hi)if(Us){if(Xn)if($t.layerUpdates.size>0){const ji=lf(Wi.width,Wi.height,$t.format,$t.type);for(const Pi of $t.layerUpdates){const Bs=Wi.data.subarray(Pi*ji/Wi.data.BYTES_PER_ELEMENT,(Pi+1)*ji/Wi.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Ar,0,0,Pi,Wi.width,Wi.height,1,Hi,Bs)}$t.clearLayerUpdates()}else r.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Ar,0,0,0,Wi.width,Wi.height,si.depth,Hi,Wi.data)}else r.compressedTexImage3D(v.TEXTURE_2D_ARRAY,Ar,vs,Wi.width,Wi.height,si.depth,0,Wi.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Us?Xn&&r.texSubImage3D(v.TEXTURE_2D_ARRAY,Ar,0,0,0,Wi.width,Wi.height,si.depth,Hi,ms,Wi.data):r.texImage3D(v.TEXTURE_2D_ARRAY,Ar,vs,Wi.width,Wi.height,si.depth,0,Hi,ms,Wi.data)}else{Us&&Xo&&r.texStorage2D(v.TEXTURE_2D,Ai,vs,lo[0].width,lo[0].height);for(let Ar=0,zr=lo.length;Ar<zr;Ar++)Wi=lo[Ar],$t.format!==pt?null!==Hi?Us?Xn&&r.compressedTexSubImage2D(v.TEXTURE_2D,Ar,0,0,Wi.width,Wi.height,Hi,Wi.data):r.compressedTexImage2D(v.TEXTURE_2D,Ar,vs,Wi.width,Wi.height,0,Wi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Us?Xn&&r.texSubImage2D(v.TEXTURE_2D,Ar,0,0,Wi.width,Wi.height,Hi,ms,Wi.data):r.texImage2D(v.TEXTURE_2D,Ar,vs,Wi.width,Wi.height,0,Hi,ms,Wi.data)}else if($t.isDataArrayTexture)if(Us){if(Xo&&r.texStorage3D(v.TEXTURE_2D_ARRAY,Ai,vs,si.width,si.height,si.depth),Xn)if($t.layerUpdates.size>0){const Ar=lf(si.width,si.height,$t.format,$t.type);for(const zr of $t.layerUpdates){const ji=si.data.subarray(zr*Ar/si.data.BYTES_PER_ELEMENT,(zr+1)*Ar/si.data.BYTES_PER_ELEMENT);r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,zr,si.width,si.height,1,Hi,ms,ji)}$t.clearLayerUpdates()}else r.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,0,si.width,si.height,si.depth,Hi,ms,si.data)}else r.texImage3D(v.TEXTURE_2D_ARRAY,0,vs,si.width,si.height,si.depth,0,Hi,ms,si.data);else if($t.isData3DTexture)Us?(Xo&&r.texStorage3D(v.TEXTURE_3D,Ai,vs,si.width,si.height,si.depth),Xn&&r.texSubImage3D(v.TEXTURE_3D,0,0,0,0,si.width,si.height,si.depth,Hi,ms,si.data)):r.texImage3D(v.TEXTURE_3D,0,vs,si.width,si.height,si.depth,0,Hi,ms,si.data);else if($t.isFramebufferTexture){if(Xo)if(Us)r.texStorage2D(v.TEXTURE_2D,Ai,vs,si.width,si.height);else{let Ar=si.width,zr=si.height;for(let ji=0;ji<Ai;ji++)r.texImage2D(v.TEXTURE_2D,ji,vs,Ar,zr,0,Hi,ms,null),Ar>>=1,zr>>=1}}else if(lo.length>0){if(Us&&Xo){const Ar=ui(lo[0]);r.texStorage2D(v.TEXTURE_2D,Ai,vs,Ar.width,Ar.height)}for(let Ar=0,zr=lo.length;Ar<zr;Ar++)Wi=lo[Ar],Us?Xn&&r.texSubImage2D(v.TEXTURE_2D,Ar,0,0,Hi,ms,Wi):r.texImage2D(v.TEXTURE_2D,Ar,vs,Hi,ms,Wi);$t.generateMipmaps=!1}else if(Us){if(Xo){const Ar=ui(si);r.texStorage2D(v.TEXTURE_2D,Ai,vs,Ar.width,Ar.height)}Xn&&r.texSubImage2D(v.TEXTURE_2D,0,0,0,Hi,ms,si)}else r.texImage2D(v.TEXTURE_2D,0,vs,Hi,ms,si);Le($t)&&Oe(Lr),Zi.__version=jr.version,$t.onUpdate&&$t.onUpdate($t)}ln.__version=$t.version}function Ii(ln,$t,lr,Lr,Kr,jr){const Zi=u.convert(lr.format,lr.colorSpace),Mi=u.convert(lr.type),Ri=dt(lr.internalFormat,Zi,Mi,lr.colorSpace),Fs=s.get($t),si=s.get(lr);if(si.__renderTarget=$t,!Fs.__hasExternalTextures){const Hi=Math.max(1,$t.width>>jr),ms=Math.max(1,$t.height>>jr);Kr===v.TEXTURE_3D||Kr===v.TEXTURE_2D_ARRAY?r.texImage3D(Kr,jr,Ri,Hi,ms,$t.depth,0,Zi,Mi,null):r.texImage2D(Kr,jr,Ri,Hi,ms,0,Zi,Mi,null)}r.bindFramebuffer(v.FRAMEBUFFER,ln),yi($t)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,Lr,Kr,si.__webglTexture,0,Vr($t)):(Kr===v.TEXTURE_2D||Kr>=v.TEXTURE_CUBE_MAP_POSITIVE_X&&Kr<=v.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&v.framebufferTexture2D(v.FRAMEBUFFER,Lr,Kr,si.__webglTexture,jr),r.bindFramebuffer(v.FRAMEBUFFER,null)}function ri(ln,$t,lr){if(v.bindRenderbuffer(v.RENDERBUFFER,ln),$t.depthBuffer){const Lr=$t.depthTexture,jr=st($t.stencilBuffer,Lr&&Lr.isDepthTexture?Lr.type:null),Zi=$t.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Mi=Vr($t);yi($t)?A.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Mi,jr,$t.width,$t.height):lr?v.renderbufferStorageMultisample(v.RENDERBUFFER,Mi,jr,$t.width,$t.height):v.renderbufferStorage(v.RENDERBUFFER,jr,$t.width,$t.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,Zi,v.RENDERBUFFER,ln)}else{const Lr=$t.textures;for(let Kr=0;Kr<Lr.length;Kr++){const jr=Lr[Kr],Zi=u.convert(jr.format,jr.colorSpace),Mi=u.convert(jr.type),Ri=dt(jr.internalFormat,Zi,Mi,jr.colorSpace),Fs=Vr($t);lr&&!1===yi($t)?v.renderbufferStorageMultisample(v.RENDERBUFFER,Fs,Ri,$t.width,$t.height):yi($t)?A.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Fs,Ri,$t.width,$t.height):v.renderbufferStorage(v.RENDERBUFFER,Ri,$t.width,$t.height)}}v.bindRenderbuffer(v.RENDERBUFFER,null)}function Hs(ln){const $t=s.get(ln),lr=!0===ln.isWebGLCubeRenderTarget;if($t.__boundDepthTexture!==ln.depthTexture){const Lr=ln.depthTexture;if($t.__depthDisposeCallback&&$t.__depthDisposeCallback(),Lr){const Kr=()=>{delete $t.__boundDepthTexture,delete $t.__depthDisposeCallback,Lr.removeEventListener("dispose",Kr)};Lr.addEventListener("dispose",Kr),$t.__depthDisposeCallback=Kr}$t.__boundDepthTexture=Lr}if(ln.depthTexture&&!$t.__autoAllocateDepthBuffer){if(lr)throw new Error("target.depthTexture not supported in Cube render targets");!function Gi(ln,$t){if($t&&$t.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(v.FRAMEBUFFER,ln),!$t.depthTexture||!$t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Lr=s.get($t.depthTexture);Lr.__renderTarget=$t,(!Lr.__webglTexture||$t.depthTexture.image.width!==$t.width||$t.depthTexture.image.height!==$t.height)&&($t.depthTexture.image.width=$t.width,$t.depthTexture.image.height=$t.height,$t.depthTexture.needsUpdate=!0),wr($t.depthTexture,0);const Kr=Lr.__webglTexture,jr=Vr($t);if($t.depthTexture.format===We)yi($t)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Kr,0,jr):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Kr,0);else{if($t.depthTexture.format!==at)throw new Error("Unknown depthTexture format");yi($t)?A.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Kr,0,jr):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Kr,0)}}($t.__webglFramebuffer,ln)}else if(lr){$t.__webglDepthbuffer=[];for(let Lr=0;Lr<6;Lr++)if(r.bindFramebuffer(v.FRAMEBUFFER,$t.__webglFramebuffer[Lr]),void 0===$t.__webglDepthbuffer[Lr])$t.__webglDepthbuffer[Lr]=v.createRenderbuffer(),ri($t.__webglDepthbuffer[Lr],ln,!1);else{const Kr=ln.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,jr=$t.__webglDepthbuffer[Lr];v.bindRenderbuffer(v.RENDERBUFFER,jr),v.framebufferRenderbuffer(v.FRAMEBUFFER,Kr,v.RENDERBUFFER,jr)}}else if(r.bindFramebuffer(v.FRAMEBUFFER,$t.__webglFramebuffer),void 0===$t.__webglDepthbuffer)$t.__webglDepthbuffer=v.createRenderbuffer(),ri($t.__webglDepthbuffer,ln,!1);else{const Lr=ln.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Kr=$t.__webglDepthbuffer;v.bindRenderbuffer(v.RENDERBUFFER,Kr),v.framebufferRenderbuffer(v.FRAMEBUFFER,Lr,v.RENDERBUFFER,Kr)}r.bindFramebuffer(v.FRAMEBUFFER,null)}const Dr=[],dn=[];function Vr(ln){return Math.min(a.maxSamples,ln.samples)}function yi(ln){const $t=s.get(ln);return ln.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==$t.__useRenderToTexture}function qi(ln,$t){const lr=ln.colorSpace,Lr=ln.format,Kr=ln.type;return!0===ln.isCompressedTexture||!0===ln.isVideoTexture||lr!==ns&&""!==lr&&(xs.getTransfer(lr)===Ki?(Lr!==pt||Kr!==vr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lr)),$t}function ui(ln){return typeof HTMLImageElement<"u"&&ln instanceof HTMLImageElement?(B.width=ln.naturalWidth||ln.width,B.height=ln.naturalHeight||ln.height):typeof VideoFrame<"u"&&ln instanceof VideoFrame?(B.width=ln.displayWidth,B.height=ln.displayHeight):(B.width=ln.width,B.height=ln.height),B}this.allocateTextureUnit=function Kn(){const ln=bn;return ln>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ln+" texture units while this GPU supports only "+a.maxTextures),bn+=1,ln},this.resetTextureUnits=function Yn(){bn=0},this.setTexture2D=wr,this.setTexture2DArray=function nr(ln,$t){const lr=s.get(ln);ln.version>0&&lr.__version!==ln.version?Tr(lr,ln,$t):r.bindTexture(v.TEXTURE_2D_ARRAY,lr.__webglTexture,v.TEXTURE0+$t)},this.setTexture3D=function Hr(ln,$t){const lr=s.get(ln);ln.version>0&&lr.__version!==ln.version?Tr(lr,ln,$t):r.bindTexture(v.TEXTURE_3D,lr.__webglTexture,v.TEXTURE0+$t)},this.setTextureCube=function cr(ln,$t){const lr=s.get(ln);ln.version>0&&lr.__version!==ln.version?function ti(ln,$t,lr){if(6!==$t.image.length)return;const Lr=Ts(ln,$t),Kr=$t.source;r.bindTexture(v.TEXTURE_CUBE_MAP,ln.__webglTexture,v.TEXTURE0+lr);const jr=s.get(Kr);if(Kr.version!==jr.__version||!0===Lr){r.activeTexture(v.TEXTURE0+lr);const Zi=xs.getPrimaries(xs.workingColorSpace),Mi=""===$t.colorSpace?null:xs.getPrimaries($t.colorSpace),Ri=""===$t.colorSpace||Zi===Mi?v.NONE:v.BROWSER_DEFAULT_WEBGL;v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,$t.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,$t.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ri);const Fs=$t.isCompressedTexture||$t.image[0].isCompressedTexture,si=$t.image[0]&&$t.image[0].isDataTexture,Hi=[];for(let zr=0;zr<6;zr++)Hi[zr]=Fs||si?si?$t.image[zr].image:$t.image[zr]:Be($t.image[zr],!0,a.maxCubemapSize),Hi[zr]=qi($t,Hi[zr]);const ms=Hi[0],vs=u.convert($t.format,$t.colorSpace),Wi=u.convert($t.type),lo=dt($t.internalFormat,vs,Wi,$t.colorSpace),Us=!0!==$t.isVideoTexture,Xo=void 0===jr.__version||!0===Lr,Xn=Kr.dataReady;let Ar,Ai=Yt($t,ms);if(as(v.TEXTURE_CUBE_MAP,$t),Fs){Us&&Xo&&r.texStorage2D(v.TEXTURE_CUBE_MAP,Ai,lo,ms.width,ms.height);for(let zr=0;zr<6;zr++){Ar=Hi[zr].mipmaps;for(let ji=0;ji<Ar.length;ji++){const Pi=Ar[ji];$t.format!==pt?null!==vs?Us?Xn&&r.compressedTexSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji,0,0,Pi.width,Pi.height,vs,Pi.data):r.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji,lo,Pi.width,Pi.height,0,Pi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Us?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji,0,0,Pi.width,Pi.height,vs,Wi,Pi.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji,lo,Pi.width,Pi.height,0,vs,Wi,Pi.data)}}}else{if(Ar=$t.mipmaps,Us&&Xo){Ar.length>0&&Ai++;const zr=ui(Hi[0]);r.texStorage2D(v.TEXTURE_CUBE_MAP,Ai,lo,zr.width,zr.height)}for(let zr=0;zr<6;zr++)if(si){Us?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,0,0,0,Hi[zr].width,Hi[zr].height,vs,Wi,Hi[zr].data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,0,lo,Hi[zr].width,Hi[zr].height,0,vs,Wi,Hi[zr].data);for(let ji=0;ji<Ar.length;ji++){const Bs=Ar[ji].image[zr].image;Us?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji+1,0,0,Bs.width,Bs.height,vs,Wi,Bs.data):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji+1,lo,Bs.width,Bs.height,0,vs,Wi,Bs.data)}}else{Us?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,0,0,0,vs,Wi,Hi[zr]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,0,lo,vs,Wi,Hi[zr]);for(let ji=0;ji<Ar.length;ji++){const Pi=Ar[ji];Us?Xn&&r.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji+1,0,0,vs,Wi,Pi.image[zr]):r.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+zr,ji+1,lo,vs,Wi,Pi.image[zr])}}}Le($t)&&Oe(v.TEXTURE_CUBE_MAP),jr.__version=Kr.version,$t.onUpdate&&$t.onUpdate($t)}ln.__version=$t.version}(lr,ln,$t):r.bindTexture(v.TEXTURE_CUBE_MAP,lr.__webglTexture,v.TEXTURE0+$t)},this.rebindTextures=function Ui(ln,$t,lr){const Lr=s.get(ln);void 0!==$t&&Ii(Lr.__webglFramebuffer,ln,ln.texture,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,0),void 0!==lr&&Hs(ln)},this.setupRenderTarget=function hs(ln){const $t=ln.texture,lr=s.get(ln),Lr=s.get($t);ln.addEventListener("dispose",Gt);const Kr=ln.textures,jr=!0===ln.isWebGLCubeRenderTarget,Zi=Kr.length>1;if(Zi||(void 0===Lr.__webglTexture&&(Lr.__webglTexture=v.createTexture()),Lr.__version=$t.version,_.memory.textures++),jr){lr.__webglFramebuffer=[];for(let Mi=0;Mi<6;Mi++)if($t.mipmaps&&$t.mipmaps.length>0){lr.__webglFramebuffer[Mi]=[];for(let Ri=0;Ri<$t.mipmaps.length;Ri++)lr.__webglFramebuffer[Mi][Ri]=v.createFramebuffer()}else lr.__webglFramebuffer[Mi]=v.createFramebuffer()}else{if($t.mipmaps&&$t.mipmaps.length>0){lr.__webglFramebuffer=[];for(let Mi=0;Mi<$t.mipmaps.length;Mi++)lr.__webglFramebuffer[Mi]=v.createFramebuffer()}else lr.__webglFramebuffer=v.createFramebuffer();if(Zi)for(let Mi=0,Ri=Kr.length;Mi<Ri;Mi++){const Fs=s.get(Kr[Mi]);void 0===Fs.__webglTexture&&(Fs.__webglTexture=v.createTexture(),_.memory.textures++)}if(ln.samples>0&&!1===yi(ln)){lr.__webglMultisampledFramebuffer=v.createFramebuffer(),lr.__webglColorRenderbuffer=[],r.bindFramebuffer(v.FRAMEBUFFER,lr.__webglMultisampledFramebuffer);for(let Mi=0;Mi<Kr.length;Mi++){const Ri=Kr[Mi];lr.__webglColorRenderbuffer[Mi]=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,lr.__webglColorRenderbuffer[Mi]);const Fs=u.convert(Ri.format,Ri.colorSpace),si=u.convert(Ri.type),Hi=dt(Ri.internalFormat,Fs,si,Ri.colorSpace,!0===ln.isXRRenderTarget),ms=Vr(ln);v.renderbufferStorageMultisample(v.RENDERBUFFER,ms,Hi,ln.width,ln.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Mi,v.RENDERBUFFER,lr.__webglColorRenderbuffer[Mi])}v.bindRenderbuffer(v.RENDERBUFFER,null),ln.depthBuffer&&(lr.__webglDepthRenderbuffer=v.createRenderbuffer(),ri(lr.__webglDepthRenderbuffer,ln,!0)),r.bindFramebuffer(v.FRAMEBUFFER,null)}}if(jr){r.bindTexture(v.TEXTURE_CUBE_MAP,Lr.__webglTexture),as(v.TEXTURE_CUBE_MAP,$t);for(let Mi=0;Mi<6;Mi++)if($t.mipmaps&&$t.mipmaps.length>0)for(let Ri=0;Ri<$t.mipmaps.length;Ri++)Ii(lr.__webglFramebuffer[Mi][Ri],ln,$t,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Mi,Ri);else Ii(lr.__webglFramebuffer[Mi],ln,$t,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Mi,0);Le($t)&&Oe(v.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Zi){for(let Mi=0,Ri=Kr.length;Mi<Ri;Mi++){const Fs=Kr[Mi],si=s.get(Fs);r.bindTexture(v.TEXTURE_2D,si.__webglTexture),as(v.TEXTURE_2D,Fs),Ii(lr.__webglFramebuffer,ln,Fs,v.COLOR_ATTACHMENT0+Mi,v.TEXTURE_2D,0),Le(Fs)&&Oe(v.TEXTURE_2D)}r.unbindTexture()}else{let Mi=v.TEXTURE_2D;if((ln.isWebGL3DRenderTarget||ln.isWebGLArrayRenderTarget)&&(Mi=ln.isWebGL3DRenderTarget?v.TEXTURE_3D:v.TEXTURE_2D_ARRAY),r.bindTexture(Mi,Lr.__webglTexture),as(Mi,$t),$t.mipmaps&&$t.mipmaps.length>0)for(let Ri=0;Ri<$t.mipmaps.length;Ri++)Ii(lr.__webglFramebuffer[Ri],ln,$t,v.COLOR_ATTACHMENT0,Mi,Ri);else Ii(lr.__webglFramebuffer,ln,$t,v.COLOR_ATTACHMENT0,Mi,0);Le($t)&&Oe(Mi),r.unbindTexture()}ln.depthBuffer&&Hs(ln)},this.updateRenderTargetMipmap=function _r(ln){const $t=ln.textures;for(let lr=0,Lr=$t.length;lr<Lr;lr++){const Kr=$t[lr];if(Le(Kr)){const jr=ft(ln),Zi=s.get(Kr).__webglTexture;r.bindTexture(jr,Zi),Oe(jr),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function Di(ln){if(ln.samples>0)if(!1===yi(ln)){const $t=ln.textures,lr=ln.width,Lr=ln.height;let Kr=v.COLOR_BUFFER_BIT;const jr=ln.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Zi=s.get(ln),Mi=$t.length>1;if(Mi)for(let Ri=0;Ri<$t.length;Ri++)r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ri,v.RENDERBUFFER,null),r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ri,v.TEXTURE_2D,null,0);r.bindFramebuffer(v.READ_FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Zi.__webglFramebuffer);for(let Ri=0;Ri<$t.length;Ri++){if(ln.resolveDepthBuffer&&(ln.depthBuffer&&(Kr|=v.DEPTH_BUFFER_BIT),ln.stencilBuffer&&ln.resolveStencilBuffer&&(Kr|=v.STENCIL_BUFFER_BIT)),Mi){v.framebufferRenderbuffer(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,Zi.__webglColorRenderbuffer[Ri]);const Fs=s.get($t[Ri]).__webglTexture;v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,Fs,0)}v.blitFramebuffer(0,0,lr,Lr,0,0,lr,Lr,Kr,v.NEAREST),!0===k&&(Dr.length=0,dn.length=0,Dr.push(v.COLOR_ATTACHMENT0+Ri),ln.depthBuffer&&!1===ln.resolveDepthBuffer&&(Dr.push(jr),dn.push(jr),v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,dn)),v.invalidateFramebuffer(v.READ_FRAMEBUFFER,Dr))}if(r.bindFramebuffer(v.READ_FRAMEBUFFER,null),r.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),Mi)for(let Ri=0;Ri<$t.length;Ri++){r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ri,v.RENDERBUFFER,Zi.__webglColorRenderbuffer[Ri]);const Fs=s.get($t[Ri]).__webglTexture;r.bindFramebuffer(v.FRAMEBUFFER,Zi.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+Ri,v.TEXTURE_2D,Fs,0)}r.bindFramebuffer(v.DRAW_FRAMEBUFFER,Zi.__webglMultisampledFramebuffer)}else ln.depthBuffer&&!1===ln.resolveDepthBuffer&&k&&v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,[ln.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Hs,this.setupFrameBufferTexture=Ii,this.useMultisampledRTT=yi}function hx(v,t){return{convert:function r(s,a=""){let u;const _=xs.getTransfer(a);if(s===vr)return v.UNSIGNED_BYTE;if(s===U)return v.UNSIGNED_SHORT_4_4_4_4;if(s===ie)return v.UNSIGNED_SHORT_5_5_5_1;if(s===de)return v.UNSIGNED_INT_5_9_9_9_REV;if(s===ei)return v.BYTE;if(s===ne)return v.SHORT;if(s===Pe)return v.UNSIGNED_SHORT;if(s===Qe)return v.INT;if(s===T)return v.UNSIGNED_INT;if(s===N)return v.FLOAT;if(s===R)return v.HALF_FLOAT;if(s===Ae)return v.ALPHA;if(s===tt)return v.RGB;if(s===pt)return v.RGBA;if(s===Kt)return v.LUMINANCE;if(s===Fe)return v.LUMINANCE_ALPHA;if(s===We)return v.DEPTH_COMPONENT;if(s===at)return v.DEPTH_STENCIL;if(s===Ze)return v.RED;if(s===xt)return v.RED_INTEGER;if(s===Zt)return v.RG;if(s===En)return v.RG_INTEGER;if(s===or)return v.RGBA_INTEGER;if(s===ii||s===Bi||s===Rs||s===Ps)if(_===Ki){if(u=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(s===ii)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Bi)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Rs)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Ps)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=t.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(s===ii)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Bi)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Rs)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Ps)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===xi||s===ws||s===co||s===Ls){if(u=t.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(s===xi)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ws)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===co)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Ls)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===so||s===ea||s===So){if(u=t.get("WEBGL_compressed_texture_etc"),null===u)return null;if(s===so||s===ea)return _===Ki?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(s===So)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(s===ca||s===ta||s===qo||s===ua||s===mo||s===Ta||s===To||s===Ja||s===Va||s===Ne||s===yt||s===Bt||s===He||s===Ht){if(u=t.get("WEBGL_compressed_texture_astc"),null===u)return null;if(s===ca)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ta)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===qo)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ua)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===mo)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Ta)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===To)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Ja)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Va)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Ne)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===yt)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Bt)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===He)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ht)return _===Ki?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===kn||s===fs||s===qs){if(u=t.get("EXT_texture_compression_bptc"),null===u)return null;if(s===kn)return _===Ki?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===fs)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===qs)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===na||s===Ga||s===Ma||s===Ko){if(u=t.get("EXT_texture_compression_rgtc"),null===u)return null;if(s===kn)return u.COMPRESSED_RED_RGTC1_EXT;if(s===Ga)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Ma)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Ko)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===$?v.UNSIGNED_INT_24_8:void 0!==v[s]?v[s]:null}}}class px{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,r,s){if(null===this.texture){const a=new _o;t.properties.get(a).__webglTexture=r.texture,(r.depthNear!==s.depthNear||r.depthFar!==s.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=a}}getMesh(t){if(null!==this.texture&&null===this.mesh){const r=t.cameras[0].viewport,s=new tc({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new ks(new gd(20,20),s)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class mx extends Mn{constructor(t,r){super();const s=this;let a=null,u=1,_=null,A="local-floor",k=1,B=null,ee=null,ae=null,pe=null,_e=null,Re=null;const Be=new px,Le=r.getContextAttributes();let Oe=null,ft=null;const dt=[],st=[],Yt=new pr;let Mt=null;const Gt=new ko;Gt.viewport=new Gs;const tn=new ko;tn.viewport=new Gs;const It=[Gt,tn],Dt=new Tg;let bn=null,Yn=null;function Kn(Tr){const ti=st.indexOf(Tr.inputSource);if(-1===ti)return;const Ii=dt[ti];void 0!==Ii&&(Ii.update(Tr.inputSource,Tr.frame,B||_),Ii.dispatchEvent({type:Tr.type,data:Tr.inputSource}))}function rr(){a.removeEventListener("select",Kn),a.removeEventListener("selectstart",Kn),a.removeEventListener("selectend",Kn),a.removeEventListener("squeeze",Kn),a.removeEventListener("squeezestart",Kn),a.removeEventListener("squeezeend",Kn),a.removeEventListener("end",rr),a.removeEventListener("inputsourceschange",wr);for(let Tr=0;Tr<dt.length;Tr++){const ti=st[Tr];null!==ti&&(st[Tr]=null,dt[Tr].disconnect(ti))}bn=null,Yn=null,Be.reset(),t.setRenderTarget(Oe),_e=null,pe=null,ae=null,a=null,ft=null,Ts.stop(),s.isPresenting=!1,t.setPixelRatio(Mt),t.setSize(Yt.width,Yt.height,!1),s.dispatchEvent({type:"sessionend"})}function wr(Tr){for(let ti=0;ti<Tr.removed.length;ti++){const Ii=Tr.removed[ti],ri=st.indexOf(Ii);ri>=0&&(st[ri]=null,dt[ri].disconnect(Ii))}for(let ti=0;ti<Tr.added.length;ti++){const Ii=Tr.added[ti];let ri=st.indexOf(Ii);if(-1===ri){for(let Hs=0;Hs<dt.length;Hs++){if(Hs>=st.length){st.push(Ii),ri=Hs;break}if(null===st[Hs]){st[Hs]=Ii,ri=Hs;break}}if(-1===ri)break}const Gi=dt[ri];Gi&&Gi.connect(Ii)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Tr){let ti=dt[Tr];return void 0===ti&&(ti=new ad,dt[Tr]=ti),ti.getTargetRaySpace()},this.getControllerGrip=function(Tr){let ti=dt[Tr];return void 0===ti&&(ti=new ad,dt[Tr]=ti),ti.getGripSpace()},this.getHand=function(Tr){let ti=dt[Tr];return void 0===ti&&(ti=new ad,dt[Tr]=ti),ti.getHandSpace()},this.setFramebufferScaleFactor=function(Tr){u=Tr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Tr){A=Tr,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return B||_},this.setReferenceSpace=function(Tr){B=Tr},this.getBaseLayer=function(){return null!==pe?pe:_e},this.getBinding=function(){return ae},this.getFrame=function(){return Re},this.getSession=function(){return a},this.setSession=function(){var Tr=(0,F.A)(function*(ti){if(a=ti,null!==a){if(Oe=t.getRenderTarget(),a.addEventListener("select",Kn),a.addEventListener("selectstart",Kn),a.addEventListener("selectend",Kn),a.addEventListener("squeeze",Kn),a.addEventListener("squeezestart",Kn),a.addEventListener("squeezeend",Kn),a.addEventListener("end",rr),a.addEventListener("inputsourceschange",wr),!0!==Le.xrCompatible&&(yield r.makeXRCompatible()),Mt=t.getPixelRatio(),t.getSize(Yt),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ri=null,Gi=null,Hs=null;Le.depth&&(Hs=Le.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,ri=Le.stencil?at:We,Gi=Le.stencil?$:T);const Ui={colorFormat:r.RGBA8,depthFormat:Hs,scaleFactor:u};ae=new XRWebGLBinding(a,r),pe=ae.createProjectionLayer(Ui),a.updateRenderState({layers:[pe]}),t.setPixelRatio(1),t.setSize(pe.textureWidth,pe.textureHeight,!1),ft=new Te(pe.textureWidth,pe.textureHeight,{format:pt,type:vr,depthTexture:new tg(pe.textureWidth,pe.textureHeight,Gi,void 0,void 0,void 0,void 0,void 0,void 0,ri),stencilBuffer:Le.stencil,colorSpace:t.outputColorSpace,samples:Le.antialias?4:0,resolveDepthBuffer:!1===pe.ignoreDepthValues,resolveStencilBuffer:!1===pe.ignoreDepthValues})}else _e=new XRWebGLLayer(a,r,{antialias:Le.antialias,alpha:!0,depth:Le.depth,stencil:Le.stencil,framebufferScaleFactor:u}),a.updateRenderState({baseLayer:_e}),t.setPixelRatio(1),t.setSize(_e.framebufferWidth,_e.framebufferHeight,!1),ft=new Te(_e.framebufferWidth,_e.framebufferHeight,{format:pt,type:vr,colorSpace:t.outputColorSpace,stencilBuffer:Le.stencil,resolveDepthBuffer:!1===_e.ignoreDepthValues,resolveStencilBuffer:!1===_e.ignoreDepthValues});ft.isXRRenderTarget=!0,this.setFoveation(k),B=null,_=yield a.requestReferenceSpace(A),Ts.setContext(a),Ts.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(ti){return Tr.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return Be.getDepthTexture()};const nr=new St,Hr=new St;function Yr(Tr,ti){null===ti?Tr.matrixWorld.copy(Tr.matrix):Tr.matrixWorld.multiplyMatrices(ti.matrixWorld,Tr.matrix),Tr.matrixWorldInverse.copy(Tr.matrixWorld).invert()}this.updateCamera=function(Tr){if(null===a)return;let ti=Tr.near,Ii=Tr.far;null!==Be.texture&&(Be.depthNear>0&&(ti=Be.depthNear),Be.depthFar>0&&(Ii=Be.depthFar)),Dt.near=tn.near=Gt.near=ti,Dt.far=tn.far=Gt.far=Ii,(bn!==Dt.near||Yn!==Dt.far)&&(a.updateRenderState({depthNear:Dt.near,depthFar:Dt.far}),bn=Dt.near,Yn=Dt.far),Gt.layers.mask=2|Tr.layers.mask,tn.layers.mask=4|Tr.layers.mask,Dt.layers.mask=Gt.layers.mask|tn.layers.mask;const ri=Tr.parent,Gi=Dt.cameras;Yr(Dt,ri);for(let Hs=0;Hs<Gi.length;Hs++)Yr(Gi[Hs],ri);2===Gi.length?function cr(Tr,ti,Ii){nr.setFromMatrixPosition(ti.matrixWorld),Hr.setFromMatrixPosition(Ii.matrixWorld);const ri=nr.distanceTo(Hr),Gi=ti.projectionMatrix.elements,Hs=Ii.projectionMatrix.elements,Ui=Gi[14]/(Gi[10]-1),hs=Gi[14]/(Gi[10]+1),_r=(Gi[9]+1)/Gi[5],Dr=(Gi[9]-1)/Gi[5],dn=(Gi[8]-1)/Gi[0],Di=(Hs[8]+1)/Hs[0],Vr=Ui*dn,yi=Ui*Di,qr=ri/(-dn+Di),qi=qr*-dn;if(ti.matrixWorld.decompose(Tr.position,Tr.quaternion,Tr.scale),Tr.translateX(qi),Tr.translateZ(qr),Tr.matrixWorld.compose(Tr.position,Tr.quaternion,Tr.scale),Tr.matrixWorldInverse.copy(Tr.matrixWorld).invert(),-1===Gi[10])Tr.projectionMatrix.copy(ti.projectionMatrix),Tr.projectionMatrixInverse.copy(ti.projectionMatrixInverse);else{const ui=Ui+qr,ln=hs+qr;Tr.projectionMatrix.makePerspective(Vr-qi,yi+(ri-qi),_r*hs/ln*ui,Dr*hs/ln*ui,ui,ln),Tr.projectionMatrixInverse.copy(Tr.projectionMatrix).invert()}}(Dt,Gt,tn):Dt.projectionMatrix.copy(Gt.projectionMatrix),function fi(Tr,ti,Ii){null===Ii?Tr.matrix.copy(ti.matrixWorld):(Tr.matrix.copy(Ii.matrixWorld),Tr.matrix.invert(),Tr.matrix.multiply(ti.matrixWorld)),Tr.matrix.decompose(Tr.position,Tr.quaternion,Tr.scale),Tr.updateMatrixWorld(!0),Tr.projectionMatrix.copy(ti.projectionMatrix),Tr.projectionMatrixInverse.copy(ti.projectionMatrixInverse),Tr.isPerspectiveCamera&&(Tr.fov=2*ke*Math.atan(1/Tr.projectionMatrix.elements[5]),Tr.zoom=1)}(Tr,Dt,ri)},this.getCamera=function(){return Dt},this.getFoveation=function(){if(null!==pe||null!==_e)return k},this.setFoveation=function(Tr){k=Tr,null!==pe&&(pe.fixedFoveation=Tr),null!==_e&&void 0!==_e.fixedFoveation&&(_e.fixedFoveation=Tr)},this.hasDepthSensing=function(){return null!==Be.texture},this.getDepthSensingMesh=function(){return Be.getMesh(Dt)};let Oi=null;const Ts=new Pg;Ts.setAnimationLoop(function as(Tr,ti){if(ee=ti.getViewerPose(B||_),Re=ti,null!==ee){const Ii=ee.views;null!==_e&&(t.setRenderTargetFramebuffer(ft,_e.framebuffer),t.setRenderTarget(ft));let ri=!1;Ii.length!==Dt.cameras.length&&(Dt.cameras.length=0,ri=!0);for(let Ui=0;Ui<Ii.length;Ui++){const hs=Ii[Ui];let _r=null;if(null!==_e)_r=_e.getViewport(hs);else{const dn=ae.getViewSubImage(pe,hs);_r=dn.viewport,0===Ui&&(t.setRenderTargetTextures(ft,dn.colorTexture,pe.ignoreDepthValues?void 0:dn.depthStencilTexture),t.setRenderTarget(ft))}let Dr=It[Ui];void 0===Dr&&(Dr=new ko,Dr.layers.enable(Ui),Dr.viewport=new Gs,It[Ui]=Dr),Dr.matrix.fromArray(hs.transform.matrix),Dr.matrix.decompose(Dr.position,Dr.quaternion,Dr.scale),Dr.projectionMatrix.fromArray(hs.projectionMatrix),Dr.projectionMatrixInverse.copy(Dr.projectionMatrix).invert(),Dr.viewport.set(_r.x,_r.y,_r.width,_r.height),0===Ui&&(Dt.matrix.copy(Dr.matrix),Dt.matrix.decompose(Dt.position,Dt.quaternion,Dt.scale)),!0===ri&&Dt.cameras.push(Dr)}const Gi=a.enabledFeatures;if(Gi&&Gi.includes("depth-sensing")&&"gpu-optimized"==a.depthUsage&&ae){const Ui=ae.getDepthInformation(Ii[0]);Ui&&Ui.isValid&&Ui.texture&&Be.init(t,Ui,a.renderState)}}for(let Ii=0;Ii<dt.length;Ii++){const ri=st[Ii],Gi=dt[Ii];null!==ri&&void 0!==Gi&&Gi.update(ri,ti,B||_)}Oi&&Oi(Tr,ti),ti.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:ti}),Re=null}),this.setAnimationLoop=function(Tr){Oi=Tr},this.dispose=function(){}}}const Dd=new $o,lm=new Li;function g_(v,t){function r(Le,Oe){!0===Le.matrixAutoUpdate&&Le.updateMatrix(),Oe.value.copy(Le.matrix)}function u(Le,Oe){Le.opacity.value=Oe.opacity,Oe.color&&Le.diffuse.value.copy(Oe.color),Oe.emissive&&Le.emissive.value.copy(Oe.emissive).multiplyScalar(Oe.emissiveIntensity),Oe.map&&(Le.map.value=Oe.map,r(Oe.map,Le.mapTransform)),Oe.alphaMap&&(Le.alphaMap.value=Oe.alphaMap,r(Oe.alphaMap,Le.alphaMapTransform)),Oe.bumpMap&&(Le.bumpMap.value=Oe.bumpMap,r(Oe.bumpMap,Le.bumpMapTransform),Le.bumpScale.value=Oe.bumpScale,1===Oe.side&&(Le.bumpScale.value*=-1)),Oe.normalMap&&(Le.normalMap.value=Oe.normalMap,r(Oe.normalMap,Le.normalMapTransform),Le.normalScale.value.copy(Oe.normalScale),1===Oe.side&&Le.normalScale.value.negate()),Oe.displacementMap&&(Le.displacementMap.value=Oe.displacementMap,r(Oe.displacementMap,Le.displacementMapTransform),Le.displacementScale.value=Oe.displacementScale,Le.displacementBias.value=Oe.displacementBias),Oe.emissiveMap&&(Le.emissiveMap.value=Oe.emissiveMap,r(Oe.emissiveMap,Le.emissiveMapTransform)),Oe.specularMap&&(Le.specularMap.value=Oe.specularMap,r(Oe.specularMap,Le.specularMapTransform)),Oe.alphaTest>0&&(Le.alphaTest.value=Oe.alphaTest);const ft=t.get(Oe),dt=ft.envMap,st=ft.envMapRotation;dt&&(Le.envMap.value=dt,Dd.copy(st),Dd.x*=-1,Dd.y*=-1,Dd.z*=-1,dt.isCubeTexture&&!1===dt.isRenderTargetTexture&&(Dd.y*=-1,Dd.z*=-1),Le.envMapRotation.value.setFromMatrix4(lm.makeRotationFromEuler(Dd)),Le.flipEnvMap.value=dt.isCubeTexture&&!1===dt.isRenderTargetTexture?-1:1,Le.reflectivity.value=Oe.reflectivity,Le.ior.value=Oe.ior,Le.refractionRatio.value=Oe.refractionRatio),Oe.lightMap&&(Le.lightMap.value=Oe.lightMap,Le.lightMapIntensity.value=Oe.lightMapIntensity,r(Oe.lightMap,Le.lightMapTransform)),Oe.aoMap&&(Le.aoMap.value=Oe.aoMap,Le.aoMapIntensity.value=Oe.aoMapIntensity,r(Oe.aoMap,Le.aoMapTransform))}return{refreshFogUniforms:function s(Le,Oe){Oe.color.getRGB(Le.fogColor.value,Zy(v)),Oe.isFog?(Le.fogNear.value=Oe.near,Le.fogFar.value=Oe.far):Oe.isFogExp2&&(Le.fogDensity.value=Oe.density)},refreshMaterialUniforms:function a(Le,Oe,ft,dt,st){Oe.isMeshBasicMaterial||Oe.isMeshLambertMaterial?u(Le,Oe):Oe.isMeshToonMaterial?(u(Le,Oe),function ae(Le,Oe){Oe.gradientMap&&(Le.gradientMap.value=Oe.gradientMap)}(Le,Oe)):Oe.isMeshPhongMaterial?(u(Le,Oe),function ee(Le,Oe){Le.specular.value.copy(Oe.specular),Le.shininess.value=Math.max(Oe.shininess,1e-4)}(Le,Oe)):Oe.isMeshStandardMaterial?(u(Le,Oe),function pe(Le,Oe){Le.metalness.value=Oe.metalness,Oe.metalnessMap&&(Le.metalnessMap.value=Oe.metalnessMap,r(Oe.metalnessMap,Le.metalnessMapTransform)),Le.roughness.value=Oe.roughness,Oe.roughnessMap&&(Le.roughnessMap.value=Oe.roughnessMap,r(Oe.roughnessMap,Le.roughnessMapTransform)),Oe.envMap&&(Le.envMapIntensity.value=Oe.envMapIntensity)}(Le,Oe),Oe.isMeshPhysicalMaterial&&function _e(Le,Oe,ft){Le.ior.value=Oe.ior,Oe.sheen>0&&(Le.sheenColor.value.copy(Oe.sheenColor).multiplyScalar(Oe.sheen),Le.sheenRoughness.value=Oe.sheenRoughness,Oe.sheenColorMap&&(Le.sheenColorMap.value=Oe.sheenColorMap,r(Oe.sheenColorMap,Le.sheenColorMapTransform)),Oe.sheenRoughnessMap&&(Le.sheenRoughnessMap.value=Oe.sheenRoughnessMap,r(Oe.sheenRoughnessMap,Le.sheenRoughnessMapTransform))),Oe.clearcoat>0&&(Le.clearcoat.value=Oe.clearcoat,Le.clearcoatRoughness.value=Oe.clearcoatRoughness,Oe.clearcoatMap&&(Le.clearcoatMap.value=Oe.clearcoatMap,r(Oe.clearcoatMap,Le.clearcoatMapTransform)),Oe.clearcoatRoughnessMap&&(Le.clearcoatRoughnessMap.value=Oe.clearcoatRoughnessMap,r(Oe.clearcoatRoughnessMap,Le.clearcoatRoughnessMapTransform)),Oe.clearcoatNormalMap&&(Le.clearcoatNormalMap.value=Oe.clearcoatNormalMap,r(Oe.clearcoatNormalMap,Le.clearcoatNormalMapTransform),Le.clearcoatNormalScale.value.copy(Oe.clearcoatNormalScale),1===Oe.side&&Le.clearcoatNormalScale.value.negate())),Oe.dispersion>0&&(Le.dispersion.value=Oe.dispersion),Oe.iridescence>0&&(Le.iridescence.value=Oe.iridescence,Le.iridescenceIOR.value=Oe.iridescenceIOR,Le.iridescenceThicknessMinimum.value=Oe.iridescenceThicknessRange[0],Le.iridescenceThicknessMaximum.value=Oe.iridescenceThicknessRange[1],Oe.iridescenceMap&&(Le.iridescenceMap.value=Oe.iridescenceMap,r(Oe.iridescenceMap,Le.iridescenceMapTransform)),Oe.iridescenceThicknessMap&&(Le.iridescenceThicknessMap.value=Oe.iridescenceThicknessMap,r(Oe.iridescenceThicknessMap,Le.iridescenceThicknessMapTransform))),Oe.transmission>0&&(Le.transmission.value=Oe.transmission,Le.transmissionSamplerMap.value=ft.texture,Le.transmissionSamplerSize.value.set(ft.width,ft.height),Oe.transmissionMap&&(Le.transmissionMap.value=Oe.transmissionMap,r(Oe.transmissionMap,Le.transmissionMapTransform)),Le.thickness.value=Oe.thickness,Oe.thicknessMap&&(Le.thicknessMap.value=Oe.thicknessMap,r(Oe.thicknessMap,Le.thicknessMapTransform)),Le.attenuationDistance.value=Oe.attenuationDistance,Le.attenuationColor.value.copy(Oe.attenuationColor)),Oe.anisotropy>0&&(Le.anisotropyVector.value.set(Oe.anisotropy*Math.cos(Oe.anisotropyRotation),Oe.anisotropy*Math.sin(Oe.anisotropyRotation)),Oe.anisotropyMap&&(Le.anisotropyMap.value=Oe.anisotropyMap,r(Oe.anisotropyMap,Le.anisotropyMapTransform))),Le.specularIntensity.value=Oe.specularIntensity,Le.specularColor.value.copy(Oe.specularColor),Oe.specularColorMap&&(Le.specularColorMap.value=Oe.specularColorMap,r(Oe.specularColorMap,Le.specularColorMapTransform)),Oe.specularIntensityMap&&(Le.specularIntensityMap.value=Oe.specularIntensityMap,r(Oe.specularIntensityMap,Le.specularIntensityMapTransform))}(Le,Oe,st)):Oe.isMeshMatcapMaterial?(u(Le,Oe),function Re(Le,Oe){Oe.matcap&&(Le.matcap.value=Oe.matcap)}(Le,Oe)):Oe.isMeshDepthMaterial?u(Le,Oe):Oe.isMeshDistanceMaterial?(u(Le,Oe),function Be(Le,Oe){const ft=t.get(Oe).light;Le.referencePosition.value.setFromMatrixPosition(ft.matrixWorld),Le.nearDistance.value=ft.shadow.camera.near,Le.farDistance.value=ft.shadow.camera.far}(Le,Oe)):Oe.isMeshNormalMaterial?u(Le,Oe):Oe.isLineBasicMaterial?(function _(Le,Oe){Le.diffuse.value.copy(Oe.color),Le.opacity.value=Oe.opacity,Oe.map&&(Le.map.value=Oe.map,r(Oe.map,Le.mapTransform))}(Le,Oe),Oe.isLineDashedMaterial&&function A(Le,Oe){Le.dashSize.value=Oe.dashSize,Le.totalSize.value=Oe.dashSize+Oe.gapSize,Le.scale.value=Oe.scale}(Le,Oe)):Oe.isPointsMaterial?function k(Le,Oe,ft,dt){Le.diffuse.value.copy(Oe.color),Le.opacity.value=Oe.opacity,Le.size.value=Oe.size*ft,Le.scale.value=.5*dt,Oe.map&&(Le.map.value=Oe.map,r(Oe.map,Le.uvTransform)),Oe.alphaMap&&(Le.alphaMap.value=Oe.alphaMap,r(Oe.alphaMap,Le.alphaMapTransform)),Oe.alphaTest>0&&(Le.alphaTest.value=Oe.alphaTest)}(Le,Oe,ft,dt):Oe.isSpriteMaterial?function B(Le,Oe){Le.diffuse.value.copy(Oe.color),Le.opacity.value=Oe.opacity,Le.rotation.value=Oe.rotation,Oe.map&&(Le.map.value=Oe.map,r(Oe.map,Le.mapTransform)),Oe.alphaMap&&(Le.alphaMap.value=Oe.alphaMap,r(Oe.alphaMap,Le.alphaMapTransform)),Oe.alphaTest>0&&(Le.alphaTest.value=Oe.alphaTest)}(Le,Oe):Oe.isShadowMaterial?(Le.color.value.copy(Oe.color),Le.opacity.value=Oe.opacity):Oe.isShaderMaterial&&(Oe.uniformsNeedUpdate=!1)}}}function y_(v,t,r,s){let a={},u={},_=[];const A=v.getParameter(v.MAX_UNIFORM_BUFFER_BINDINGS);function _e(ft,dt,st,Yt){const Mt=ft.value,Gt=dt+"_"+st;if(void 0===Yt[Gt])return Yt[Gt]="number"==typeof Mt||"boolean"==typeof Mt?Mt:Mt.clone(),!0;{const tn=Yt[Gt];if("number"==typeof Mt||"boolean"==typeof Mt){if(tn!==Mt)return Yt[Gt]=Mt,!0}else if(!1===tn.equals(Mt))return tn.copy(Mt),!0}return!1}function Be(ft){const dt={boundary:0,storage:0};return"number"==typeof ft||"boolean"==typeof ft?(dt.boundary=4,dt.storage=4):ft.isVector2?(dt.boundary=8,dt.storage=8):ft.isVector3||ft.isColor?(dt.boundary=16,dt.storage=12):ft.isVector4?(dt.boundary=16,dt.storage=16):ft.isMatrix3?(dt.boundary=48,dt.storage=48):ft.isMatrix4?(dt.boundary=64,dt.storage=64):ft.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ft),dt}function Le(ft){const dt=ft.target;dt.removeEventListener("dispose",Le);const st=_.indexOf(dt.__bindingPointIndex);_.splice(st,1),v.deleteBuffer(a[dt.id]),delete a[dt.id],delete u[dt.id]}return{bind:function k(ft,dt){s.uniformBlockBinding(ft,dt.program)},update:function B(ft,dt){let st=a[ft.id];void 0===st&&(function Re(ft){const dt=ft.uniforms;let st=0;for(let Gt=0,tn=dt.length;Gt<tn;Gt++){const It=Array.isArray(dt[Gt])?dt[Gt]:[dt[Gt]];for(let Dt=0,bn=It.length;Dt<bn;Dt++){const Yn=It[Dt],Kn=Array.isArray(Yn.value)?Yn.value:[Yn.value];for(let rr=0,wr=Kn.length;rr<wr;rr++){const Hr=Be(Kn[rr]),cr=st%16,Yr=cr%Hr.boundary,fi=cr+Yr;st+=Yr,0!==fi&&16-fi<Hr.storage&&(st+=16-fi),Yn.__data=new Float32Array(Hr.storage/Float32Array.BYTES_PER_ELEMENT),Yn.__offset=st,st+=Hr.storage}}}const Mt=st%16;Mt>0&&(st+=16-Mt),ft.__size=st,ft.__cache={}}(ft),st=function ee(ft){const dt=function ae(){for(let ft=0;ft<A;ft++)if(-1===_.indexOf(ft))return _.push(ft),ft;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();ft.__bindingPointIndex=dt;const st=v.createBuffer(),Yt=ft.__size,Mt=ft.usage;return v.bindBuffer(v.UNIFORM_BUFFER,st),v.bufferData(v.UNIFORM_BUFFER,Yt,Mt),v.bindBuffer(v.UNIFORM_BUFFER,null),v.bindBufferBase(v.UNIFORM_BUFFER,dt,st),st}(ft),a[ft.id]=st,ft.addEventListener("dispose",Le)),s.updateUBOMapping(ft,dt.program);const Mt=t.render.frame;u[ft.id]!==Mt&&(function pe(ft){const st=ft.uniforms,Yt=ft.__cache;v.bindBuffer(v.UNIFORM_BUFFER,a[ft.id]);for(let Mt=0,Gt=st.length;Mt<Gt;Mt++){const tn=Array.isArray(st[Mt])?st[Mt]:[st[Mt]];for(let It=0,Dt=tn.length;It<Dt;It++){const bn=tn[It];if(!0===_e(bn,Mt,It,Yt)){const Yn=bn.__offset,Kn=Array.isArray(bn.value)?bn.value:[bn.value];let rr=0;for(let wr=0;wr<Kn.length;wr++){const nr=Kn[wr],Hr=Be(nr);"number"==typeof nr||"boolean"==typeof nr?(bn.__data[0]=nr,v.bufferSubData(v.UNIFORM_BUFFER,Yn+rr,bn.__data)):nr.isMatrix3?(bn.__data[0]=nr.elements[0],bn.__data[1]=nr.elements[1],bn.__data[2]=nr.elements[2],bn.__data[3]=0,bn.__data[4]=nr.elements[3],bn.__data[5]=nr.elements[4],bn.__data[6]=nr.elements[5],bn.__data[7]=0,bn.__data[8]=nr.elements[6],bn.__data[9]=nr.elements[7],bn.__data[10]=nr.elements[8],bn.__data[11]=0):(nr.toArray(bn.__data,rr),rr+=Hr.storage/Float32Array.BYTES_PER_ELEMENT)}v.bufferSubData(v.UNIFORM_BUFFER,Yn,bn.__data)}}}v.bindBuffer(v.UNIFORM_BUFFER,null)}(ft),u[ft.id]=Mt)},dispose:function Oe(){for(const ft in a)v.deleteBuffer(a[ft]);_=[],a={},u={}}}}class v_{constructor(t={}){const{canvas:r=cc(),context:s=null,depth:a=!0,stencil:u=!1,alpha:_=!1,antialias:A=!1,premultipliedAlpha:k=!0,preserveDrawingBuffer:B=!1,powerPreference:ee="default",failIfMajorPerformanceCaveat:ae=!1,reverseDepthBuffer:pe=!1}=t;let _e;if(this.isWebGLRenderer=!0,null!==s){if(typeof WebGLRenderingContext<"u"&&s instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_e=s.getContextAttributes().alpha}else _e=_;const Re=new Uint32Array(4),Be=new Int32Array(4);let Le=null,Oe=null;const ft=[],dt=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=zi,this.toneMapping=ur,this.toneMappingExposure=1;const st=this;let Yt=!1,Mt=0,Gt=0,tn=null,It=-1,Dt=null;const bn=new Gs,Yn=new Gs;let Kn=null;const rr=new kr(0);let wr=0,nr=r.width,Hr=r.height,cr=1,Yr=null,fi=null;const Oi=new Gs(0,0,nr,Hr),as=new Gs(0,0,nr,Hr);let Ts=!1;const Tr=new tp;let ti=!1,Ii=!1;this.transmissionResolutionScale=1;const ri=new Li,Gi=new Li,Hs=new St,Ui=new Gs,hs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let _r=!1;function Dr(){return null===tn?cr:1}let Vr,yi,qr,qi,ui,ln,$t,lr,Lr,Kr,jr,Zi,Mi,Ri,Fs,si,Hi,ms,vs,Wi,lo,Us,Xo,Xn,dn=s;function Di(en,qn){return r.getContext(en,qn)}try{const en={alpha:!0,depth:a,stencil:u,antialias:A,premultipliedAlpha:k,preserveDrawingBuffer:B,powerPreference:ee,failIfMajorPerformanceCaveat:ae};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${d}`),r.addEventListener("webglcontextlost",zr,!1),r.addEventListener("webglcontextrestored",ji,!1),r.addEventListener("webglcontextcreationerror",Pi,!1),null===dn){const qn="webgl2";if(dn=Di(qn,en),null===dn)throw Di(qn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(en){throw console.error("THREE.WebGLRenderer: "+en.message),en}function Ai(){Vr=new U0(dn),Vr.init(),Us=new hx(dn,Vr),yi=new k0(dn,Vr,t,Us),qr=new m_(dn,Vr),yi.reverseDepthBuffer&&pe&&qr.buffers.depth.setReversed(!0),qi=new Ad(dn),ui=new eT,ln=new dx(dn,Vr,qr,ui,yi,Us,qi),$t=new N0(st),lr=new F0(st),Lr=new Og(dn),Xo=new qp(dn,Lr),Kr=new Rw(dn,Lr,qi,Xo),jr=new vf(dn,Kr,Lr,qi),vs=new Jg(dn,yi,ln),si=new L0(ui),Zi=new lx(st,$t,lr,Vr,yi,Xo,si),Mi=new g_(st,ui),Ri=new dy,Fs=new ux(Vr),ms=new qE(st,$t,lr,qr,jr,_e,k),Hi=new f_(st,jr,yi),Xn=new y_(dn,qi,yi,qr),Wi=new Cw(dn,Vr,qi),lo=new Yp(dn,Vr,qi),qi.programs=Zi.programs,st.capabilities=yi,st.extensions=Vr,st.properties=ui,st.renderLists=Ri,st.shadowMap=Hi,st.state=qr,st.info=qi}Ai();const Ar=new mx(st,dn);function zr(en){en.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Yt=!0}function ji(){console.log("THREE.WebGLRenderer: Context Restored."),Yt=!1;const en=qi.autoReset,qn=Hi.enabled,dr=Hi.autoUpdate,mr=Hi.needsUpdate,Jn=Hi.type;Ai(),qi.autoReset=en,Hi.enabled=qn,Hi.autoUpdate=dr,Hi.needsUpdate=mr,Hi.type=Jn}function Pi(en){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",en.statusMessage)}function Bs(en){const qn=en.target;qn.removeEventListener("dispose",Bs),function Ea(en){(function hl(en){const qn=ui.get(en).programs;void 0!==qn&&(qn.forEach(function(dr){Zi.releaseProgram(dr)}),en.isShaderMaterial&&Zi.releaseShaderCache(en))})(en),ui.remove(en)}(qn)}function wo(en,qn,dr){!0===en.transparent&&2===en.side&&!1===en.forceSinglePass?(en.side=1,en.needsUpdate=!0,Nf(en,qn,dr),en.side=0,en.needsUpdate=!0,Nf(en,qn,dr),en.side=2):Nf(en,qn,dr)}this.xr=Ar,this.getContext=function(){return dn},this.getContextAttributes=function(){return dn.getContextAttributes()},this.forceContextLoss=function(){const en=Vr.get("WEBGL_lose_context");en&&en.loseContext()},this.forceContextRestore=function(){const en=Vr.get("WEBGL_lose_context");en&&en.restoreContext()},this.getPixelRatio=function(){return cr},this.setPixelRatio=function(en){void 0!==en&&(cr=en,this.setSize(nr,Hr,!1))},this.getSize=function(en){return en.set(nr,Hr)},this.setSize=function(en,qn,dr=!0){Ar.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(nr=en,Hr=qn,r.width=Math.floor(en*cr),r.height=Math.floor(qn*cr),!0===dr&&(r.style.width=en+"px",r.style.height=qn+"px"),this.setViewport(0,0,en,qn))},this.getDrawingBufferSize=function(en){return en.set(nr*cr,Hr*cr).floor()},this.setDrawingBufferSize=function(en,qn,dr){nr=en,Hr=qn,cr=dr,r.width=Math.floor(en*dr),r.height=Math.floor(qn*dr),this.setViewport(0,0,en,qn)},this.getCurrentViewport=function(en){return en.copy(bn)},this.getViewport=function(en){return en.copy(Oi)},this.setViewport=function(en,qn,dr,mr){en.isVector4?Oi.set(en.x,en.y,en.z,en.w):Oi.set(en,qn,dr,mr),qr.viewport(bn.copy(Oi).multiplyScalar(cr).round())},this.getScissor=function(en){return en.copy(as)},this.setScissor=function(en,qn,dr,mr){en.isVector4?as.set(en.x,en.y,en.z,en.w):as.set(en,qn,dr,mr),qr.scissor(Yn.copy(as).multiplyScalar(cr).round())},this.getScissorTest=function(){return Ts},this.setScissorTest=function(en){qr.setScissorTest(Ts=en)},this.setOpaqueSort=function(en){Yr=en},this.setTransparentSort=function(en){fi=en},this.getClearColor=function(en){return en.copy(ms.getClearColor())},this.setClearColor=function(){ms.setClearColor(...arguments)},this.getClearAlpha=function(){return ms.getClearAlpha()},this.setClearAlpha=function(){ms.setClearAlpha(...arguments)},this.clear=function(en=!0,qn=!0,dr=!0){let mr=0;if(en){let Jn=!1;if(null!==tn){const ni=tn.texture.format;Jn=ni===or||ni===En||ni===xt}if(Jn){const ni=tn.texture.type,Ti=ni===vr||ni===T||ni===Pe||ni===$||ni===U||ni===ie,$i=ms.getClearColor(),Fi=ms.getClearAlpha(),_s=$i.r,bs=$i.g,ss=$i.b;Ti?(Re[0]=_s,Re[1]=bs,Re[2]=ss,Re[3]=Fi,dn.clearBufferuiv(dn.COLOR,0,Re)):(Be[0]=_s,Be[1]=bs,Be[2]=ss,Be[3]=Fi,dn.clearBufferiv(dn.COLOR,0,Be))}else mr|=dn.COLOR_BUFFER_BIT}qn&&(mr|=dn.DEPTH_BUFFER_BIT),dr&&(mr|=dn.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),dn.clear(mr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",zr,!1),r.removeEventListener("webglcontextrestored",ji,!1),r.removeEventListener("webglcontextcreationerror",Pi,!1),ms.dispose(),Ri.dispose(),Fs.dispose(),ui.dispose(),$t.dispose(),lr.dispose(),jr.dispose(),Xo.dispose(),Xn.dispose(),Zi.dispose(),Ar.dispose(),Ar.removeEventListener("sessionstart",Lf),Ar.removeEventListener("sessionend",W_),Rd.stop()},this.renderBufferDirect=function(en,qn,dr,mr,Jn,ni){null===qn&&(qn=hs);const Ti=Jn.isMesh&&Jn.matrixWorld.determinant()<0,$i=function cT(en,qn,dr,mr,Jn){!0!==qn.isScene&&(qn=hs),ln.resetTextureUnits();const ni=qn.fog,$i=null===tn?st.outputColorSpace:!0===tn.isXRRenderTarget?tn.texture.colorSpace:ns,Fi=(mr.isMeshStandardMaterial?lr:$t).get(mr.envMap||(mr.isMeshStandardMaterial?qn.environment:null)),_s=!0===mr.vertexColors&&!!dr.attributes.color&&4===dr.attributes.color.itemSize,bs=!!dr.attributes.tangent&&(!!mr.normalMap||mr.anisotropy>0),ss=!!dr.morphAttributes.position,no=!!dr.morphAttributes.normal,Ws=!!dr.morphAttributes.color;let Uo=ur;mr.toneMapped&&(null===tn||!0===tn.isXRRenderTarget)&&(Uo=st.toneMapping);const Ds=dr.morphAttributes.position||dr.morphAttributes.normal||dr.morphAttributes.color,Xs=void 0!==Ds?Ds.length:0,ts=ui.get(mr),No=Oe.state.lights;!0!==ti||!0!==Ii&&en===Dt||si.setState(mr,en,en===Dt&&mr.id===It);let ro=!1;mr.version===ts.__version?(ts.needsLights&&ts.lightsStateVersion!==No.state.version||ts.outputColorSpace!==$i||Jn.isBatchedMesh&&!1===ts.batching||!Jn.isBatchedMesh&&!0===ts.batching||Jn.isBatchedMesh&&!0===ts.batchingColor&&null===Jn.colorTexture||Jn.isBatchedMesh&&!1===ts.batchingColor&&null!==Jn.colorTexture||Jn.isInstancedMesh&&!1===ts.instancing||!Jn.isInstancedMesh&&!0===ts.instancing||Jn.isSkinnedMesh&&!1===ts.skinning||!Jn.isSkinnedMesh&&!0===ts.skinning||Jn.isInstancedMesh&&!0===ts.instancingColor&&null===Jn.instanceColor||Jn.isInstancedMesh&&!1===ts.instancingColor&&null!==Jn.instanceColor||Jn.isInstancedMesh&&!0===ts.instancingMorph&&null===Jn.morphTexture||Jn.isInstancedMesh&&!1===ts.instancingMorph&&null!==Jn.morphTexture||ts.envMap!==Fi||!0===mr.fog&&ts.fog!==ni||void 0!==ts.numClippingPlanes&&(ts.numClippingPlanes!==si.numPlanes||ts.numIntersection!==si.numIntersection)||ts.vertexAlphas!==_s||ts.vertexTangents!==bs||ts.morphTargets!==ss||ts.morphNormals!==no||ts.morphColors!==Ws||ts.toneMapping!==Uo||ts.morphTargetsCount!==Xs)&&(ro=!0):(ro=!0,ts.__version=mr.version);let kc=ts.currentProgram;!0===ro&&(kc=Nf(mr,qn,Jn));let iu=!1,jl=!1,bh=!1;const Qo=kc.getUniforms(),yc=ts.uniforms;if(qr.useProgram(kc.program)&&(iu=!0,jl=!0,bh=!0),mr.id!==It&&(It=mr.id,jl=!0),iu||Dt!==en){qr.buffers.depth.getReversed()?(ri.copy(en.projectionMatrix),function uc(v){const t=v.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(ri),function su(v){const t=v.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(ri),Qo.setValue(dn,"projectionMatrix",ri)):Qo.setValue(dn,"projectionMatrix",en.projectionMatrix),Qo.setValue(dn,"viewMatrix",en.matrixWorldInverse);const Fl=Qo.map.cameraPosition;void 0!==Fl&&Fl.setValue(dn,Hs.setFromMatrixPosition(en.matrixWorld)),yi.logarithmicDepthBuffer&&Qo.setValue(dn,"logDepthBufFC",2/(Math.log(en.far+1)/Math.LN2)),(mr.isMeshPhongMaterial||mr.isMeshToonMaterial||mr.isMeshLambertMaterial||mr.isMeshBasicMaterial||mr.isMeshStandardMaterial||mr.isShaderMaterial)&&Qo.setValue(dn,"isOrthographic",!0===en.isOrthographicCamera),Dt!==en&&(Dt=en,jl=!0,bh=!0)}if(Jn.isSkinnedMesh){Qo.setOptional(dn,Jn,"bindMatrix"),Qo.setOptional(dn,Jn,"bindMatrixInverse");const io=Jn.skeleton;io&&(null===io.boneTexture&&io.computeBoneTexture(),Qo.setValue(dn,"boneTexture",io.boneTexture,ln))}Jn.isBatchedMesh&&(Qo.setOptional(dn,Jn,"batchingTexture"),Qo.setValue(dn,"batchingTexture",Jn._matricesTexture,ln),Qo.setOptional(dn,Jn,"batchingIdTexture"),Qo.setValue(dn,"batchingIdTexture",Jn._indirectTexture,ln),Qo.setOptional(dn,Jn,"batchingColorTexture"),null!==Jn._colorsTexture&&Qo.setValue(dn,"batchingColorTexture",Jn._colorsTexture,ln));const vc=dr.morphAttributes;if((void 0!==vc.position||void 0!==vc.normal||void 0!==vc.color)&&vs.update(Jn,dr,kc),(jl||ts.receiveShadow!==Jn.receiveShadow)&&(ts.receiveShadow=Jn.receiveShadow,Qo.setValue(dn,"receiveShadow",Jn.receiveShadow)),mr.isMeshGouraudMaterial&&null!==mr.envMap&&(yc.envMap.value=Fi,yc.flipEnvMap.value=Fi.isCubeTexture&&!1===Fi.isRenderTargetTexture?-1:1),mr.isMeshStandardMaterial&&null===mr.envMap&&null!==qn.environment&&(yc.envMapIntensity.value=qn.environmentIntensity),jl&&(Qo.setValue(dn,"toneMappingExposure",st.toneMappingExposure),ts.needsLights&&function Z_(en,qn){en.ambientLightColor.needsUpdate=qn,en.lightProbe.needsUpdate=qn,en.directionalLights.needsUpdate=qn,en.directionalLightShadows.needsUpdate=qn,en.pointLights.needsUpdate=qn,en.pointLightShadows.needsUpdate=qn,en.spotLights.needsUpdate=qn,en.spotLightShadows.needsUpdate=qn,en.rectAreaLights.needsUpdate=qn,en.hemisphereLights.needsUpdate=qn}(yc,bh),ni&&!0===mr.fog&&Mi.refreshFogUniforms(yc,ni),Mi.refreshMaterialUniforms(yc,mr,cr,Hr,Oe.state.transmissionRenderTarget[en.id]),Zu.upload(dn,Ay(ts),yc,ln)),mr.isShaderMaterial&&!0===mr.uniformsNeedUpdate&&(Zu.upload(dn,Ay(ts),yc,ln),mr.uniformsNeedUpdate=!1),mr.isSpriteMaterial&&Qo.setValue(dn,"center",Jn.center),Qo.setValue(dn,"modelViewMatrix",Jn.modelViewMatrix),Qo.setValue(dn,"normalMatrix",Jn.normalMatrix),Qo.setValue(dn,"modelMatrix",Jn.matrixWorld),mr.isShaderMaterial||mr.isRawShaderMaterial){const io=mr.uniformsGroups;for(let Fl=0,Cy=io.length;Fl<Cy;Fl++){const Bo=io[Fl];Xn.update(Bo,kc),Xn.bind(Bo,kc)}}return kc}(en,qn,dr,mr,Jn);qr.setMaterial(mr,Ti);let Fi=dr.index,_s=1;if(!0===mr.wireframe){if(Fi=Kr.getWireframeAttribute(dr),void 0===Fi)return;_s=2}const bs=dr.drawRange,ss=dr.attributes.position;let no=bs.start*_s,Ws=(bs.start+bs.count)*_s;null!==ni&&(no=Math.max(no,ni.start*_s),Ws=Math.min(Ws,(ni.start+ni.count)*_s)),null!==Fi?(no=Math.max(no,0),Ws=Math.min(Ws,Fi.count)):null!=ss&&(no=Math.max(no,0),Ws=Math.min(Ws,ss.count));const Uo=Ws-no;if(Uo<0||Uo===1/0)return;Xo.setup(Jn,mr,$i,dr,Fi);let Ds,Xs=Wi;if(null!==Fi&&(Ds=Lr.get(Fi),Xs=lo,Xs.setIndex(Ds)),Jn.isMesh)!0===mr.wireframe?(qr.setLineWidth(mr.wireframeLinewidth*Dr()),Xs.setMode(dn.LINES)):Xs.setMode(dn.TRIANGLES);else if(Jn.isLine){let ts=mr.linewidth;void 0===ts&&(ts=1),qr.setLineWidth(ts*Dr()),Xs.setMode(Jn.isLineSegments?dn.LINES:Jn.isLineLoop?dn.LINE_LOOP:dn.LINE_STRIP)}else Jn.isPoints?Xs.setMode(dn.POINTS):Jn.isSprite&&Xs.setMode(dn.TRIANGLES);if(Jn.isBatchedMesh)if(null!==Jn._multiDrawInstances)$a("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Xs.renderMultiDrawInstances(Jn._multiDrawStarts,Jn._multiDrawCounts,Jn._multiDrawCount,Jn._multiDrawInstances);else if(Vr.get("WEBGL_multi_draw"))Xs.renderMultiDraw(Jn._multiDrawStarts,Jn._multiDrawCounts,Jn._multiDrawCount);else{const ts=Jn._multiDrawStarts,No=Jn._multiDrawCounts,ro=Jn._multiDrawCount,kc=Fi?Lr.get(Fi).bytesPerElement:1,iu=ui.get(mr).currentProgram.getUniforms();for(let jl=0;jl<ro;jl++)iu.setValue(dn,"_gl_DrawID",jl),Xs.render(ts[jl]/kc,No[jl])}else if(Jn.isInstancedMesh)Xs.renderInstances(no,Uo,Jn.count);else if(dr.isInstancedBufferGeometry){const No=Math.min(dr.instanceCount,void 0!==dr._maxInstanceCount?dr._maxInstanceCount:1/0);Xs.renderInstances(no,Uo,No)}else Xs.render(no,Uo)},this.compile=function(en,qn,dr=null){null===dr&&(dr=en),Oe=Fs.get(dr),Oe.init(qn),dt.push(Oe),dr.traverseVisible(function(Jn){Jn.isLight&&Jn.layers.test(qn.layers)&&(Oe.pushLight(Jn),Jn.castShadow&&Oe.pushShadow(Jn))}),en!==dr&&en.traverseVisible(function(Jn){Jn.isLight&&Jn.layers.test(qn.layers)&&(Oe.pushLight(Jn),Jn.castShadow&&Oe.pushShadow(Jn))}),Oe.setupLights();const mr=new Set;return en.traverse(function(Jn){if(!(Jn.isMesh||Jn.isPoints||Jn.isLine||Jn.isSprite))return;const ni=Jn.material;if(ni)if(Array.isArray(ni))for(let Ti=0;Ti<ni.length;Ti++){const $i=ni[Ti];wo($i,dr,Jn),mr.add($i)}else wo(ni,dr,Jn),mr.add(ni)}),Oe=dt.pop(),mr},this.compileAsync=function(en,qn,dr=null){const mr=this.compile(en,qn,dr);return new Promise(Jn=>{function ni(){mr.forEach(function(Ti){ui.get(Ti).currentProgram.isReady()&&mr.delete(Ti)}),0!==mr.size?setTimeout(ni,10):Jn(en)}null!==Vr.get("KHR_parallel_shader_compile")?ni():setTimeout(ni,10)})};let Oc=null;function Lf(){Rd.stop()}function W_(){Rd.start()}const Rd=new Pg;function My(en,qn,dr,mr){if(!1===en.visible)return;if(en.layers.test(qn.layers))if(en.isGroup)dr=en.renderOrder;else if(en.isLOD)!0===en.autoUpdate&&en.update(qn);else if(en.isLight)Oe.pushLight(en),en.castShadow&&Oe.pushShadow(en);else if(en.isSprite){if(!en.frustumCulled||Tr.intersectsSprite(en)){mr&&Ui.setFromMatrixPosition(en.matrixWorld).applyMatrix4(Gi);const Ti=jr.update(en),$i=en.material;$i.visible&&Le.push(en,Ti,$i,dr,Ui.z,null)}}else if((en.isMesh||en.isLine||en.isPoints)&&(!en.frustumCulled||Tr.intersectsObject(en))){const Ti=jr.update(en),$i=en.material;if(mr&&(void 0!==en.boundingSphere?(null===en.boundingSphere&&en.computeBoundingSphere(),Ui.copy(en.boundingSphere.center)):(null===Ti.boundingSphere&&Ti.computeBoundingSphere(),Ui.copy(Ti.boundingSphere.center)),Ui.applyMatrix4(en.matrixWorld).applyMatrix4(Gi)),Array.isArray($i)){const Fi=Ti.groups;for(let _s=0,bs=Fi.length;_s<bs;_s++){const ss=Fi[_s],no=$i[ss.materialIndex];no&&no.visible&&Le.push(en,Ti,no,dr,Ui.z,ss)}}else $i.visible&&Le.push(en,Ti,$i,dr,Ui.z,null)}const ni=en.children;for(let Ti=0,$i=ni.length;Ti<$i;Ti++)My(ni[Ti],qn,dr,mr)}function X_(en,qn,dr,mr){const Jn=en.opaque,ni=en.transmissive,Ti=en.transparent;Oe.setupLightsView(dr),!0===ti&&si.setGlobalState(st.clippingPlanes,dr),mr&&qr.viewport(bn.copy(mr)),Jn.length>0&&vm(Jn,qn,dr),ni.length>0&&vm(ni,qn,dr),Ti.length>0&&vm(Ti,qn,dr),qr.buffers.depth.setTest(!0),qr.buffers.depth.setMask(!0),qr.buffers.color.setMask(!0),qr.setPolygonOffset(!1)}function q_(en,qn,dr,mr){if(null!==(!0===dr.isScene?dr.overrideMaterial:null))return;void 0===Oe.state.transmissionRenderTarget[mr.id]&&(Oe.state.transmissionRenderTarget[mr.id]=new Te(1,1,{generateMipmaps:!0,type:Vr.has("EXT_color_buffer_half_float")||Vr.has("EXT_color_buffer_float")?R:vr,minFilter:fr,samples:4,stencilBuffer:u,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xs.workingColorSpace}));const ni=Oe.state.transmissionRenderTarget[mr.id],Ti=mr.viewport||bn;ni.setSize(Ti.z*st.transmissionResolutionScale,Ti.w*st.transmissionResolutionScale);const $i=st.getRenderTarget();st.setRenderTarget(ni),st.getClearColor(rr),wr=st.getClearAlpha(),wr<1&&st.setClearColor(16777215,.5),st.clear(),_r&&ms.render(dr);const Fi=st.toneMapping;st.toneMapping=ur;const _s=mr.viewport;if(void 0!==mr.viewport&&(mr.viewport=void 0),Oe.setupLightsView(mr),!0===ti&&si.setGlobalState(st.clippingPlanes,mr),vm(en,dr,mr),ln.updateMultisampleRenderTarget(ni),ln.updateRenderTargetMipmap(ni),!1===Vr.has("WEBGL_multisampled_render_to_texture")){let bs=!1;for(let ss=0,no=qn.length;ss<no;ss++){const Ws=qn[ss],Uo=Ws.object,Ds=Ws.geometry,Xs=Ws.material,ts=Ws.group;if(2===Xs.side&&Uo.layers.test(mr.layers)){const No=Xs.side;Xs.side=1,Xs.needsUpdate=!0,K_(Uo,dr,mr,Ds,Xs,ts),Xs.side=No,Xs.needsUpdate=!0,bs=!0}}!0===bs&&(ln.updateMultisampleRenderTarget(ni),ln.updateRenderTargetMipmap(ni))}st.setRenderTarget($i),st.setClearColor(rr,wr),void 0!==_s&&(mr.viewport=_s),st.toneMapping=Fi}function vm(en,qn,dr){const mr=!0===qn.isScene?qn.overrideMaterial:null;for(let Jn=0,ni=en.length;Jn<ni;Jn++){const Ti=en[Jn],$i=Ti.object,Fi=Ti.geometry,_s=null===mr?Ti.material:mr,bs=Ti.group;$i.layers.test(dr.layers)&&K_($i,qn,dr,Fi,_s,bs)}}function K_(en,qn,dr,mr,Jn,ni){en.onBeforeRender(st,qn,dr,mr,Jn,ni),en.modelViewMatrix.multiplyMatrices(dr.matrixWorldInverse,en.matrixWorld),en.normalMatrix.getNormalMatrix(en.modelViewMatrix),Jn.onBeforeRender(st,qn,dr,mr,en,ni),!0===Jn.transparent&&2===Jn.side&&!1===Jn.forceSinglePass?(Jn.side=1,Jn.needsUpdate=!0,st.renderBufferDirect(dr,qn,mr,Jn,en,ni),Jn.side=0,Jn.needsUpdate=!0,st.renderBufferDirect(dr,qn,mr,Jn,en,ni),Jn.side=2):st.renderBufferDirect(dr,qn,mr,Jn,en,ni),en.onAfterRender(st,qn,dr,mr,Jn,ni)}function Nf(en,qn,dr){!0!==qn.isScene&&(qn=hs);const mr=ui.get(en),Jn=Oe.state.lights,Ti=Jn.state.version,$i=Zi.getParameters(en,Jn.state,Oe.state.shadowsArray,qn,dr),Fi=Zi.getProgramCacheKey($i);let _s=mr.programs;mr.environment=en.isMeshStandardMaterial?qn.environment:null,mr.fog=qn.fog,mr.envMap=(en.isMeshStandardMaterial?lr:$t).get(en.envMap||mr.environment),mr.envMapRotation=null!==mr.environment&&null===en.envMap?qn.environmentRotation:en.envMapRotation,void 0===_s&&(en.addEventListener("dispose",Bs),_s=new Map,mr.programs=_s);let bs=_s.get(Fi);if(void 0!==bs){if(mr.currentProgram===bs&&mr.lightsStateVersion===Ti)return Y_(en,$i),bs}else $i.uniforms=Zi.getUniforms(en),en.onBeforeCompile($i,st),bs=Zi.acquireProgram($i,Fi),_s.set(Fi,bs),mr.uniforms=$i.uniforms;const ss=mr.uniforms;return(!en.isShaderMaterial&&!en.isRawShaderMaterial||!0===en.clipping)&&(ss.clippingPlanes=si.uniform),Y_(en,$i),mr.needsLights=function J_(en){return en.isMeshLambertMaterial||en.isMeshToonMaterial||en.isMeshPhongMaterial||en.isMeshStandardMaterial||en.isShadowMaterial||en.isShaderMaterial&&!0===en.lights}(en),mr.lightsStateVersion=Ti,mr.needsLights&&(ss.ambientLightColor.value=Jn.state.ambient,ss.lightProbe.value=Jn.state.probe,ss.directionalLights.value=Jn.state.directional,ss.directionalLightShadows.value=Jn.state.directionalShadow,ss.spotLights.value=Jn.state.spot,ss.spotLightShadows.value=Jn.state.spotShadow,ss.rectAreaLights.value=Jn.state.rectArea,ss.ltc_1.value=Jn.state.rectAreaLTC1,ss.ltc_2.value=Jn.state.rectAreaLTC2,ss.pointLights.value=Jn.state.point,ss.pointLightShadows.value=Jn.state.pointShadow,ss.hemisphereLights.value=Jn.state.hemi,ss.directionalShadowMap.value=Jn.state.directionalShadowMap,ss.directionalShadowMatrix.value=Jn.state.directionalShadowMatrix,ss.spotShadowMap.value=Jn.state.spotShadowMap,ss.spotLightMatrix.value=Jn.state.spotLightMatrix,ss.spotLightMap.value=Jn.state.spotLightMap,ss.pointShadowMap.value=Jn.state.pointShadowMap,ss.pointShadowMatrix.value=Jn.state.pointShadowMatrix),mr.currentProgram=bs,mr.uniformsList=null,bs}function Ay(en){if(null===en.uniformsList){const qn=en.currentProgram.getUniforms();en.uniformsList=Zu.seqWithValue(qn.seq,en.uniforms)}return en.uniformsList}function Y_(en,qn){const dr=ui.get(en);dr.outputColorSpace=qn.outputColorSpace,dr.batching=qn.batching,dr.batchingColor=qn.batchingColor,dr.instancing=qn.instancing,dr.instancingColor=qn.instancingColor,dr.instancingMorph=qn.instancingMorph,dr.skinning=qn.skinning,dr.morphTargets=qn.morphTargets,dr.morphNormals=qn.morphNormals,dr.morphColors=qn.morphColors,dr.morphTargetsCount=qn.morphTargetsCount,dr.numClippingPlanes=qn.numClippingPlanes,dr.numIntersection=qn.numClipIntersection,dr.vertexAlphas=qn.vertexAlphas,dr.vertexTangents=qn.vertexTangents,dr.toneMapping=qn.toneMapping}Rd.setAnimationLoop(function Au(en){Oc&&Oc(en)}),typeof self<"u"&&Rd.setContext(self),this.setAnimationLoop=function(en){Oc=en,Ar.setAnimationLoop(en),null===en?Rd.stop():Rd.start()},Ar.addEventListener("sessionstart",Lf),Ar.addEventListener("sessionend",W_),this.render=function(en,qn){if(void 0!==qn&&!0!==qn.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Yt)return;if(!0===en.matrixWorldAutoUpdate&&en.updateMatrixWorld(),null===qn.parent&&!0===qn.matrixWorldAutoUpdate&&qn.updateMatrixWorld(),!0===Ar.enabled&&!0===Ar.isPresenting&&(!0===Ar.cameraAutoUpdate&&Ar.updateCamera(qn),qn=Ar.getCamera()),!0===en.isScene&&en.onBeforeRender(st,en,qn,tn),Oe=Fs.get(en,dt.length),Oe.init(qn),dt.push(Oe),Gi.multiplyMatrices(qn.projectionMatrix,qn.matrixWorldInverse),Tr.setFromProjectionMatrix(Gi),Ii=this.localClippingEnabled,ti=si.init(this.clippingPlanes,Ii),Le=Ri.get(en,ft.length),Le.init(),ft.push(Le),!0===Ar.enabled&&!0===Ar.isPresenting){const ni=st.xr.getDepthSensingMesh();null!==ni&&My(ni,qn,-1/0,st.sortObjects)}My(en,qn,0,st.sortObjects),Le.finish(),!0===st.sortObjects&&Le.sort(Yr,fi),_r=!1===Ar.enabled||!1===Ar.isPresenting||!1===Ar.hasDepthSensing(),_r&&ms.addToRenderList(Le,en),this.info.render.frame++,!0===ti&&si.beginShadows(),Hi.render(Oe.state.shadowsArray,en,qn),!0===ti&&si.endShadows(),!0===this.info.autoReset&&this.info.reset();const mr=Le.opaque,Jn=Le.transmissive;if(Oe.setupLights(),qn.isArrayCamera){const ni=qn.cameras;if(Jn.length>0)for(let Ti=0,$i=ni.length;Ti<$i;Ti++)q_(mr,Jn,en,ni[Ti]);_r&&ms.render(en);for(let Ti=0,$i=ni.length;Ti<$i;Ti++){const Fi=ni[Ti];X_(Le,en,Fi,Fi.viewport)}}else Jn.length>0&&q_(mr,Jn,en,qn),_r&&ms.render(en),X_(Le,en,qn);null!==tn&&0===Gt&&(ln.updateMultisampleRenderTarget(tn),ln.updateRenderTargetMipmap(tn)),!0===en.isScene&&en.onAfterRender(st,en,qn),Xo.resetDefaultState(),It=-1,Dt=null,dt.pop(),dt.length>0?(Oe=dt[dt.length-1],!0===ti&&si.setGlobalState(st.clippingPlanes,Oe.state.camera)):Oe=null,ft.pop(),Le=ft.length>0?ft[ft.length-1]:null},this.getActiveCubeFace=function(){return Mt},this.getActiveMipmapLevel=function(){return Gt},this.getRenderTarget=function(){return tn},this.setRenderTargetTextures=function(en,qn,dr){ui.get(en.texture).__webglTexture=qn,ui.get(en.depthTexture).__webglTexture=dr;const mr=ui.get(en);mr.__hasExternalTextures=!0,mr.__autoAllocateDepthBuffer=void 0===dr,mr.__autoAllocateDepthBuffer||!0===Vr.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mr.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(en,qn){const dr=ui.get(en);dr.__webglFramebuffer=qn,dr.__useDefaultFramebuffer=void 0===qn};const Pd=dn.createFramebuffer();this.setRenderTarget=function(en,qn=0,dr=0){tn=en,Mt=qn,Gt=dr;let mr=!0,Jn=null,ni=!1,Ti=!1;if(en){const Fi=ui.get(en);if(void 0!==Fi.__useDefaultFramebuffer)qr.bindFramebuffer(dn.FRAMEBUFFER,null),mr=!1;else if(void 0===Fi.__webglFramebuffer)ln.setupRenderTarget(en);else if(Fi.__hasExternalTextures)ln.rebindTextures(en,ui.get(en.texture).__webglTexture,ui.get(en.depthTexture).__webglTexture);else if(en.depthBuffer){const ss=en.depthTexture;if(Fi.__boundDepthTexture!==ss){if(null!==ss&&ui.has(ss)&&(en.width!==ss.image.width||en.height!==ss.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ln.setupDepthRenderbuffer(en)}}const _s=en.texture;(_s.isData3DTexture||_s.isDataArrayTexture||_s.isCompressedArrayTexture)&&(Ti=!0);const bs=ui.get(en).__webglFramebuffer;en.isWebGLCubeRenderTarget?(Jn=Array.isArray(bs[qn])?bs[qn][dr]:bs[qn],ni=!0):Jn=en.samples>0&&!1===ln.useMultisampledRTT(en)?ui.get(en).__webglMultisampledFramebuffer:Array.isArray(bs)?bs[dr]:bs,bn.copy(en.viewport),Yn.copy(en.scissor),Kn=en.scissorTest}else bn.copy(Oi).multiplyScalar(cr).floor(),Yn.copy(as).multiplyScalar(cr).floor(),Kn=Ts;if(0!==dr&&(Jn=Pd),qr.bindFramebuffer(dn.FRAMEBUFFER,Jn)&&mr&&qr.drawBuffers(en,Jn),qr.viewport(bn),qr.scissor(Yn),qr.setScissorTest(Kn),ni){const Fi=ui.get(en.texture);dn.framebufferTexture2D(dn.FRAMEBUFFER,dn.COLOR_ATTACHMENT0,dn.TEXTURE_CUBE_MAP_POSITIVE_X+qn,Fi.__webglTexture,dr)}else if(Ti){const Fi=ui.get(en.texture);dn.framebufferTextureLayer(dn.FRAMEBUFFER,dn.COLOR_ATTACHMENT0,Fi.__webglTexture,dr,qn)}else if(null!==en&&0!==dr){const Fi=ui.get(en.texture);dn.framebufferTexture2D(dn.FRAMEBUFFER,dn.COLOR_ATTACHMENT0,dn.TEXTURE_2D,Fi.__webglTexture,dr)}It=-1},this.readRenderTargetPixels=function(en,qn,dr,mr,Jn,ni,Ti){if(!en||!en.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let $i=ui.get(en).__webglFramebuffer;if(en.isWebGLCubeRenderTarget&&void 0!==Ti&&($i=$i[Ti]),$i){qr.bindFramebuffer(dn.FRAMEBUFFER,$i);try{const Fi=en.texture,_s=Fi.format,bs=Fi.type;if(!yi.textureFormatReadable(_s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!yi.textureTypeReadable(bs))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");qn>=0&&qn<=en.width-mr&&dr>=0&&dr<=en.height-Jn&&dn.readPixels(qn,dr,mr,Jn,Us.convert(_s),Us.convert(bs),ni)}finally{const Fi=null!==tn?ui.get(tn).__webglFramebuffer:null;qr.bindFramebuffer(dn.FRAMEBUFFER,Fi)}}},this.readRenderTargetPixelsAsync=function(){var en=(0,F.A)(function*(qn,dr,mr,Jn,ni,Ti,$i){if(!qn||!qn.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Fi=ui.get(qn).__webglFramebuffer;if(qn.isWebGLCubeRenderTarget&&void 0!==$i&&(Fi=Fi[$i]),Fi){const _s=qn.texture,bs=_s.format,ss=_s.type;if(!yi.textureFormatReadable(bs))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!yi.textureTypeReadable(ss))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(dr>=0&&dr<=qn.width-Jn&&mr>=0&&mr<=qn.height-ni){qr.bindFramebuffer(dn.FRAMEBUFFER,Fi);const no=dn.createBuffer();dn.bindBuffer(dn.PIXEL_PACK_BUFFER,no),dn.bufferData(dn.PIXEL_PACK_BUFFER,Ti.byteLength,dn.STREAM_READ),dn.readPixels(dr,mr,Jn,ni,Us.convert(bs),Us.convert(ss),0);const Ws=null!==tn?ui.get(tn).__webglFramebuffer:null;qr.bindFramebuffer(dn.FRAMEBUFFER,Ws);const Uo=dn.fenceSync(dn.SYNC_GPU_COMMANDS_COMPLETE,0);return dn.flush(),yield function vl(v,t,r){return new Promise(function(s,a){setTimeout(function u(){switch(v.clientWaitSync(t,v.SYNC_FLUSH_COMMANDS_BIT,0)){case v.WAIT_FAILED:a();break;case v.TIMEOUT_EXPIRED:setTimeout(u,r);break;default:s()}},r)})}(dn,Uo,4),dn.bindBuffer(dn.PIXEL_PACK_BUFFER,no),dn.getBufferSubData(dn.PIXEL_PACK_BUFFER,0,Ti),dn.deleteBuffer(no),dn.deleteSync(Uo),Ti}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(qn,dr,mr,Jn,ni,Ti,$i){return en.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(en,qn=null,dr=0){!0!==en.isTexture&&($a("WebGLRenderer: copyFramebufferToTexture function signature has changed."),qn=arguments[0]||null,en=arguments[1]);const mr=Math.pow(2,-dr),Jn=Math.floor(en.image.width*mr),ni=Math.floor(en.image.height*mr),Ti=null!==qn?qn.x:0,$i=null!==qn?qn.y:0;ln.setTexture2D(en,0),dn.copyTexSubImage2D(dn.TEXTURE_2D,dr,0,0,Ti,$i,Jn,ni),qr.unbindTexture()};const Q_=dn.createFramebuffer(),Wx=dn.createFramebuffer();this.copyTextureToTexture=function(en,qn,dr=null,mr=null,Jn=0,ni=null){let Ti,$i,Fi,_s,bs,ss,no,Ws,Uo;!0!==en.isTexture&&($a("WebGLRenderer: copyTextureToTexture function signature has changed."),mr=arguments[0]||null,en=arguments[1],qn=arguments[2],ni=arguments[3]||0,dr=null),null===ni&&(0!==Jn?($a("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ni=Jn,Jn=0):ni=0);const Ds=en.isCompressedTexture?en.mipmaps[ni]:en.image;if(null!==dr)Ti=dr.max.x-dr.min.x,$i=dr.max.y-dr.min.y,Fi=dr.isBox3?dr.max.z-dr.min.z:1,_s=dr.min.x,bs=dr.min.y,ss=dr.isBox3?dr.min.z:0;else{const vc=Math.pow(2,-Jn);Ti=Math.floor(Ds.width*vc),$i=Math.floor(Ds.height*vc),Fi=en.isDataArrayTexture?Ds.depth:en.isData3DTexture?Math.floor(Ds.depth*vc):1,_s=0,bs=0,ss=0}null!==mr?(no=mr.x,Ws=mr.y,Uo=mr.z):(no=0,Ws=0,Uo=0);const Xs=Us.convert(qn.format),ts=Us.convert(qn.type);let No;qn.isData3DTexture?(ln.setTexture3D(qn,0),No=dn.TEXTURE_3D):qn.isDataArrayTexture||qn.isCompressedArrayTexture?(ln.setTexture2DArray(qn,0),No=dn.TEXTURE_2D_ARRAY):(ln.setTexture2D(qn,0),No=dn.TEXTURE_2D),dn.pixelStorei(dn.UNPACK_FLIP_Y_WEBGL,qn.flipY),dn.pixelStorei(dn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,qn.premultiplyAlpha),dn.pixelStorei(dn.UNPACK_ALIGNMENT,qn.unpackAlignment);const ro=dn.getParameter(dn.UNPACK_ROW_LENGTH),kc=dn.getParameter(dn.UNPACK_IMAGE_HEIGHT),iu=dn.getParameter(dn.UNPACK_SKIP_PIXELS),jl=dn.getParameter(dn.UNPACK_SKIP_ROWS),bh=dn.getParameter(dn.UNPACK_SKIP_IMAGES);dn.pixelStorei(dn.UNPACK_ROW_LENGTH,Ds.width),dn.pixelStorei(dn.UNPACK_IMAGE_HEIGHT,Ds.height),dn.pixelStorei(dn.UNPACK_SKIP_PIXELS,_s),dn.pixelStorei(dn.UNPACK_SKIP_ROWS,bs),dn.pixelStorei(dn.UNPACK_SKIP_IMAGES,ss);const Qo=en.isDataArrayTexture||en.isData3DTexture,yc=qn.isDataArrayTexture||qn.isData3DTexture;if(en.isDepthTexture){const vc=ui.get(en),io=ui.get(qn),Fl=ui.get(vc.__renderTarget),Cy=ui.get(io.__renderTarget);qr.bindFramebuffer(dn.READ_FRAMEBUFFER,Fl.__webglFramebuffer),qr.bindFramebuffer(dn.DRAW_FRAMEBUFFER,Cy.__webglFramebuffer);for(let Bo=0;Bo<Fi;Bo++)Qo&&(dn.framebufferTextureLayer(dn.READ_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,ui.get(en).__webglTexture,Jn,ss+Bo),dn.framebufferTextureLayer(dn.DRAW_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,ui.get(qn).__webglTexture,ni,Uo+Bo)),dn.blitFramebuffer(_s,bs,Ti,$i,no,Ws,Ti,$i,dn.DEPTH_BUFFER_BIT,dn.NEAREST);qr.bindFramebuffer(dn.READ_FRAMEBUFFER,null),qr.bindFramebuffer(dn.DRAW_FRAMEBUFFER,null)}else if(0!==Jn||en.isRenderTargetTexture||ui.has(en)){const vc=ui.get(en),io=ui.get(qn);qr.bindFramebuffer(dn.READ_FRAMEBUFFER,Q_),qr.bindFramebuffer(dn.DRAW_FRAMEBUFFER,Wx);for(let Fl=0;Fl<Fi;Fl++)Qo?dn.framebufferTextureLayer(dn.READ_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,vc.__webglTexture,Jn,ss+Fl):dn.framebufferTexture2D(dn.READ_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,dn.TEXTURE_2D,vc.__webglTexture,Jn),yc?dn.framebufferTextureLayer(dn.DRAW_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,io.__webglTexture,ni,Uo+Fl):dn.framebufferTexture2D(dn.DRAW_FRAMEBUFFER,dn.COLOR_ATTACHMENT0,dn.TEXTURE_2D,io.__webglTexture,ni),0!==Jn?dn.blitFramebuffer(_s,bs,Ti,$i,no,Ws,Ti,$i,dn.COLOR_BUFFER_BIT,dn.NEAREST):yc?dn.copyTexSubImage3D(No,ni,no,Ws,Uo+Fl,_s,bs,Ti,$i):dn.copyTexSubImage2D(No,ni,no,Ws,_s,bs,Ti,$i);qr.bindFramebuffer(dn.READ_FRAMEBUFFER,null),qr.bindFramebuffer(dn.DRAW_FRAMEBUFFER,null)}else yc?en.isDataTexture||en.isData3DTexture?dn.texSubImage3D(No,ni,no,Ws,Uo,Ti,$i,Fi,Xs,ts,Ds.data):qn.isCompressedArrayTexture?dn.compressedTexSubImage3D(No,ni,no,Ws,Uo,Ti,$i,Fi,Xs,Ds.data):dn.texSubImage3D(No,ni,no,Ws,Uo,Ti,$i,Fi,Xs,ts,Ds):en.isDataTexture?dn.texSubImage2D(dn.TEXTURE_2D,ni,no,Ws,Ti,$i,Xs,ts,Ds.data):en.isCompressedTexture?dn.compressedTexSubImage2D(dn.TEXTURE_2D,ni,no,Ws,Ds.width,Ds.height,Xs,Ds.data):dn.texSubImage2D(dn.TEXTURE_2D,ni,no,Ws,Ti,$i,Xs,ts,Ds);dn.pixelStorei(dn.UNPACK_ROW_LENGTH,ro),dn.pixelStorei(dn.UNPACK_IMAGE_HEIGHT,kc),dn.pixelStorei(dn.UNPACK_SKIP_PIXELS,iu),dn.pixelStorei(dn.UNPACK_SKIP_ROWS,jl),dn.pixelStorei(dn.UNPACK_SKIP_IMAGES,bh),0===ni&&qn.generateMipmaps&&dn.generateMipmap(No),qr.unbindTexture()},this.copyTextureToTexture3D=function(en,qn,dr=null,mr=null,Jn=0){return!0!==en.isTexture&&($a("WebGLRenderer: copyTextureToTexture3D function signature has changed."),dr=arguments[0]||null,mr=arguments[1]||null,en=arguments[2],qn=arguments[3],Jn=arguments[4]||0),$a('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(en,qn,dr,mr,Jn)},this.initRenderTarget=function(en){void 0===ui.get(en).__webglFramebuffer&&ln.setupRenderTarget(en)},this.initTexture=function(en){en.isCubeTexture?ln.setTextureCube(en,0):en.isData3DTexture?ln.setTexture3D(en,0):en.isDataArrayTexture||en.isCompressedArrayTexture?ln.setTexture2DArray(en,0):ln.setTexture2D(en,0),qr.unbindTexture()},this.resetState=function(){Mt=0,Gt=0,tn=null,qr.reset(),Xo.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return At}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const r=this.getContext();r.drawingBufferColorspace=xs._getDrawingBufferColorSpace(t),r.unpackColorSpace=xs._getUnpackColorSpace()}}const __={type:"change"},cm={type:"start"},um={type:"end"},Id=new zo,b_=new Wc,gx=Math.cos(70*Fo_DEG2RAD),Za=new St,Zl=2*Math.PI,py=1e-6;class my extends xE{constructor(t,r=null){super(t,r),this.state=-1,this.enabled=!0,this.target=new St,this.cursor=new St,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new St,this._lastQuaternion=new an,this._lastTargetPosition=new St,this._quat=(new an).setFromUnitVectors(t.up,new St(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new Zv,this._sphericalDelta=new Zv,this._scale=1,this._panOffset=new St,this._rotateStart=new pr,this._rotateEnd=new pr,this._rotateDelta=new pr,this._panStart=new pr,this._panEnd=new pr,this._panDelta=new pr,this._dollyStart=new pr,this._dollyEnd=new pr,this._dollyDelta=new pr,this._dollyDirection=new St,this._mouse=new pr,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=w_.bind(this),this._onPointerDown=Mf.bind(this),this._onPointerUp=x_.bind(this),this._onContextMenu=gy.bind(this),this._onMouseWheel=dm.bind(this),this._onKeyDown=tT.bind(this),this._onTouchStart=vx.bind(this),this._onTouchMove=S_.bind(this),this._onMouseDown=yx.bind(this),this._onMouseMove=Af.bind(this),this._interceptControlDown=_x.bind(this),this._interceptControlUp=E_.bind(this),null!==this.domElement&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(__),this.update(),this.state=-1}update(t=null){const r=this.object.position;Za.copy(r).sub(this.target),Za.applyQuaternion(this._quat),this._spherical.setFromVector3(Za),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(s)&&isFinite(a)&&(s<-Math.PI?s+=Zl:s>Math.PI&&(s-=Zl),a<-Math.PI?a+=Zl:a>Math.PI&&(a-=Zl),this._spherical.theta=s<=a?Math.max(s,Math.min(a,this._spherical.theta)):this._spherical.theta>(s+a)/2?Math.max(s,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let u=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const _=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),u=_!=this._spherical.radius}if(Za.setFromSpherical(this._spherical),Za.applyQuaternion(this._quatInverse),r.copy(this.target).add(Za),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let _=null;if(this.object.isPerspectiveCamera){const A=Za.length();_=this._clampDistance(A*this._scale);const k=A-_;this.object.position.addScaledVector(this._dollyDirection,k),this.object.updateMatrixWorld(),u=!!k}else if(this.object.isOrthographicCamera){const A=new St(this._mouse.x,this._mouse.y,0);A.unproject(this.object);const k=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),u=k!==this.object.zoom;const B=new St(this._mouse.x,this._mouse.y,0);B.unproject(this.object),this.object.position.sub(B).add(A),this.object.updateMatrixWorld(),_=Za.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==_&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(_).add(this.object.position):(Id.origin.copy(this.object.position),Id.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Id.direction))<gx?this.object.lookAt(this.target):(b_.setFromNormalAndCoplanarPoint(this.object.up,this.target),Id.intersectPlane(b_,this.target))))}else if(this.object.isOrthographicCamera){const _=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),_!==this.object.zoom&&(this.object.updateProjectionMatrix(),u=!0)}return this._scale=1,this._performCursorZoom=!1,!!(u||this._lastPosition.distanceToSquared(this.object.position)>py||8*(1-this._lastQuaternion.dot(this.object.quaternion))>py||this._lastTargetPosition.distanceToSquared(this.target)>py)&&(this.dispatchEvent(__),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?Zl/60*this.autoRotateSpeed*t:Zl/60/60*this.autoRotateSpeed}_getZoomScale(t){const r=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,r){Za.setFromMatrixColumn(r,0),Za.multiplyScalar(-t),this._panOffset.add(Za)}_panUp(t,r){!0===this.screenSpacePanning?Za.setFromMatrixColumn(r,1):(Za.setFromMatrixColumn(r,0),Za.crossVectors(this.object.up,Za)),Za.multiplyScalar(t),this._panOffset.add(Za)}_pan(t,r){const s=this.domElement;if(this.object.isPerspectiveCamera){Za.copy(this.object.position).sub(this.target);let u=Za.length();u*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*u/s.clientHeight,this.object.matrix),this._panUp(2*r*u/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),u=r-s.top,A=s.height;this._mouse.x=(t-s.left)/s.width*2-1,this._mouse.y=-u/A*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Zl*this._rotateDelta.x/r.clientHeight),this._rotateUp(Zl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let r=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Zl*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0}r&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._rotateStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panStart.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}}_handleTouchStartDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,a=t.pageY-r.y,u=Math.sqrt(s*s+a*a);this._dollyStart.set(0,u)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const s=this._getSecondPointerPosition(t);this._rotateEnd.set(.5*(t.pageX+s.x),.5*(t.pageY+s.y))}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Zl*this._rotateDelta.x/r.clientHeight),this._rotateUp(Zl*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const r=this._getSecondPointerPosition(t);this._panEnd.set(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const r=this._getSecondPointerPosition(t),s=t.pageX-r.x,a=t.pageY-r.y,u=Math.sqrt(s*s+a*a);this._dollyEnd.set(0,u),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd),this._updateZoomParameters(.5*(t.pageX+r.x),.5*(t.pageY+r.y))}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return void this._pointers.splice(r,1)}_isTrackingPointer(t){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==t.pointerId)return!0;return!1}_trackPointer(t){let r=this._pointerPositions[t.pointerId];void 0===r&&(r=new pr,this._pointerPositions[t.pointerId]=r),r.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){return this._pointerPositions[t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0]]}_customWheelEvent(t){const s={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(t.deltaMode){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function Mf(v){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(v.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(v)&&(this._addPointer(v),"touch"===v.pointerType?this._onTouchStart(v):this._onMouseDown(v)))}function w_(v){!1!==this.enabled&&("touch"===v.pointerType?this._onTouchMove(v):this._onMouseMove(v))}function x_(v){switch(this._removePointer(v),this._pointers.length){case 0:this.domElement.releasePointerCapture(v.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(um),this.state=-1;break;case 1:const t=this._pointers[0],r=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:r.x,pageY:r.y})}}function yx(v){let t;switch(v.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===this.enableZoom)return;this._handleMouseDownDolly(v),this.state=1;break;case 0:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}break;case 2:if(v.ctrlKey||v.metaKey||v.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(v),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(v),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(cm)}function Af(v){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(v);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(v);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(v)}}function dm(v){!1===this.enabled||!1===this.enableZoom||-1!==this.state||(v.preventDefault(),this.dispatchEvent(cm),this._handleMouseWheel(this._customWheelEvent(v)),this.dispatchEvent(um))}function tT(v){!1!==this.enabled&&this._handleKeyDown(v)}function vx(v){switch(this._trackPointer(v),this._pointers.length){case 1:switch(this.touches.ONE){case 0:if(!1===this.enableRotate)return;this._handleTouchStartRotate(v),this.state=3;break;case 1:if(!1===this.enablePan)return;this._handleTouchStartPan(v),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(v),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(v),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(cm)}function S_(v){switch(this._trackPointer(v),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(v),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(v),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(v),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(v),this.update();break;default:this.state=-1}}function gy(v){!1!==this.enabled&&v.preventDefault()}function _x(v){"Control"===v.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function E_(v){"Control"===v.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M_(v,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),v;if(2===t||1===t){let r=v.getIndex();if(null===r){const _=[],A=v.getAttribute("position");if(void 0===A)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),v;for(let k=0;k<A.count;k++)_.push(k);v.setIndex(_),r=v.getIndex()}const s=r.count-2,a=[];if(2===t)for(let _=1;_<=s;_++)a.push(r.getX(0)),a.push(r.getX(_)),a.push(r.getX(_+1));else for(let _=0;_<s;_++)_%2==0?(a.push(r.getX(_)),a.push(r.getX(_+1)),a.push(r.getX(_+2))):(a.push(r.getX(_+2)),a.push(r.getX(_+1)),a.push(r.getX(_)));a.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const u=v.clone();return u.setIndex(a),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),v}class xx extends aa{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Ex(r)}),this.register(function(r){return new mh(r)}),this.register(function(r){return new I_(r)}),this.register(function(r){return new hm(r)}),this.register(function(r){return new Rx(r)}),this.register(function(r){return new Tx(r)}),this.register(function(r){return new Mx(r)}),this.register(function(r){return new Ax(r)}),this.register(function(r){return new Cx(r)}),this.register(function(r){return new by(r)}),this.register(function(r){return new Dx(r)}),this.register(function(r){return new C_(r)}),this.register(function(r){return new Ix(r)}),this.register(function(r){return new D_(r)}),this.register(function(r){return new Cf(r)}),this.register(function(r){return new Px(r)}),this.register(function(r){return new R_(r)})}load(t,r,s,a){const u=this;let _;if(""!==this.resourcePath)_=this.resourcePath;else if(""!==this.path){const B=vu.extractUrlBase(t);_=vu.resolveURL(B,this.path)}else _=vu.extractUrlBase(t);this.manager.itemStart(t);const A=function(B){a?a(B):console.error(B),u.manager.itemError(t),u.manager.itemEnd(t)},k=new ic(this.manager);k.setPath(this.path),k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setWithCredentials(this.withCredentials),k.load(t,function(B){try{u.parse(B,_,function(ee){r(ee),u.manager.itemEnd(t)},A)}catch(ee){A(ee)}},s,A)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,s,a){let u;const _={},A={},k=new TextDecoder;if("string"==typeof t)u=JSON.parse(t);else if(t instanceof ArrayBuffer)if(k.decode(new Uint8Array(t,0,4))===P_){try{_[Es.KHR_BINARY_GLTF]=new gh(t)}catch(ae){return void(a&&a(ae))}u=JSON.parse(_[Es.KHR_BINARY_GLTF].content)}else u=JSON.parse(k.decode(t));else u=t;if(void 0===u.asset||u.asset.version[0]<2)return void(a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const B=new jx(u,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});B.fileLoader.setRequestHeader(this.requestHeader);for(let ee=0;ee<this.pluginCallbacks.length;ee++){const ae=this.pluginCallbacks[ee](B);ae.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),A[ae.name]=ae,_[ae.name]=!0}if(u.extensionsUsed)for(let ee=0;ee<u.extensionsUsed.length;++ee){const ae=u.extensionsUsed[ee],pe=u.extensionsRequired||[];switch(ae){case Es.KHR_MATERIALS_UNLIT:_[ae]=new _y;break;case Es.KHR_DRACO_MESH_COMPRESSION:_[ae]=new If(u,this.dracoLoader);break;case Es.KHR_TEXTURE_TRANSFORM:_[ae]=new lT;break;case Es.KHR_MESH_QUANTIZATION:_[ae]=new O_;break;default:pe.indexOf(ae)>=0&&void 0===A[ae]&&console.warn('THREE.GLTFLoader: Unknown extension "'+ae+'".')}}B.setExtensions(_),B.setPlugins(A),B.parse(s,a)}parseAsync(t,r){const s=this;return new Promise(function(a,u){s.parse(t,r,a,u)})}}function Sx(){let v={};return{get:function(t){return v[t]},add:function(t,r){v[t]=r},remove:function(t){delete v[t]},removeAll:function(){v={}}}}const Es={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Cf{constructor(t){this.parser=t,this.name=Es.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let s=0,a=r.length;s<a;s++){const u=r[s];u.extensions&&u.extensions[this.name]&&void 0!==u.extensions[this.name].light&&t._addNodeRef(this.cache,u.extensions[this.name].light)}}_loadLight(t){const r=this.parser,s="light:"+t;let a=r.cache.get(s);if(a)return a;const u=r.json,k=((u.extensions&&u.extensions[this.name]||{}).lights||[])[t];let B;const ee=new kr(16777215);void 0!==k.color&&ee.setRGB(k.color[0],k.color[1],k.color[2],ns);const ae=void 0!==k.range?k.range:0;switch(k.type){case"directional":B=new kv(ee),B.target.position.set(0,0,-1),B.add(B.target);break;case"point":B=new u1(ee),B.distance=ae;break;case"spot":B=new Ov(ee),B.distance=ae,k.spot=k.spot||{},k.spot.innerConeAngle=void 0!==k.spot.innerConeAngle?k.spot.innerConeAngle:0,k.spot.outerConeAngle=void 0!==k.spot.outerConeAngle?k.spot.outerConeAngle:Math.PI/4,B.angle=k.spot.outerConeAngle,B.penumbra=1-k.spot.innerConeAngle/k.spot.outerConeAngle,B.target.position.set(0,0,-1),B.add(B.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+k.type)}return B.position.set(0,0,0),va(B,k),void 0!==k.intensity&&(B.intensity=k.intensity),B.name=r.createUniqueName(k.name||"light_"+t),a=Promise.resolve(B),r.cache.add(s,a),a}getDependency(t,r){if("light"===t)return this._loadLight(r)}createNodeAttachment(t){const r=this,s=this.parser,u=s.json.nodes[t],A=(u.extensions&&u.extensions[this.name]||{}).light;return void 0===A?null:this._loadLight(A).then(function(k){return s._getNodeRef(r.cache,A,k)})}}class _y{constructor(){this.name=Es.KHR_MATERIALS_UNLIT}getMaterialType(){return Co}extendParams(t,r,s){const a=[];t.color=new kr(1,1,1),t.opacity=1;const u=r.pbrMetallicRoughness;if(u){if(Array.isArray(u.baseColorFactor)){const _=u.baseColorFactor;t.color.setRGB(_[0],_[1],_[2],ns),t.opacity=_[3]}void 0!==u.baseColorTexture&&a.push(s.assignTexture(t,"map",u.baseColorTexture,zi))}return Promise.all(a)}}class by{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name].emissiveStrength;return void 0!==u&&(r.emissiveIntensity=u),Promise.resolve()}}class Ex{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];if(void 0!==_.clearcoatFactor&&(r.clearcoat=_.clearcoatFactor),void 0!==_.clearcoatTexture&&u.push(s.assignTexture(r,"clearcoatMap",_.clearcoatTexture)),void 0!==_.clearcoatRoughnessFactor&&(r.clearcoatRoughness=_.clearcoatRoughnessFactor),void 0!==_.clearcoatRoughnessTexture&&u.push(s.assignTexture(r,"clearcoatRoughnessMap",_.clearcoatRoughnessTexture)),void 0!==_.clearcoatNormalTexture&&(u.push(s.assignTexture(r,"clearcoatNormalMap",_.clearcoatNormalTexture)),void 0!==_.clearcoatNormalTexture.scale)){const A=_.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new pr(A,A)}return Promise.all(u)}}class mh{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name];return r.dispersion=void 0!==u.dispersion?u.dispersion:0,Promise.resolve()}}class C_{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.iridescenceFactor&&(r.iridescence=_.iridescenceFactor),void 0!==_.iridescenceTexture&&u.push(s.assignTexture(r,"iridescenceMap",_.iridescenceTexture)),void 0!==_.iridescenceIor&&(r.iridescenceIOR=_.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==_.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=_.iridescenceThicknessMinimum),void 0!==_.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=_.iridescenceThicknessMaximum),void 0!==_.iridescenceThicknessTexture&&u.push(s.assignTexture(r,"iridescenceThicknessMap",_.iridescenceThicknessTexture)),Promise.all(u)}}class Tx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[];r.sheenColor=new kr(0,0,0),r.sheenRoughness=0,r.sheen=1;const _=a.extensions[this.name];if(void 0!==_.sheenColorFactor){const A=_.sheenColorFactor;r.sheenColor.setRGB(A[0],A[1],A[2],ns)}return void 0!==_.sheenRoughnessFactor&&(r.sheenRoughness=_.sheenRoughnessFactor),void 0!==_.sheenColorTexture&&u.push(s.assignTexture(r,"sheenColorMap",_.sheenColorTexture,zi)),void 0!==_.sheenRoughnessTexture&&u.push(s.assignTexture(r,"sheenRoughnessMap",_.sheenRoughnessTexture)),Promise.all(u)}}class Mx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.transmissionFactor&&(r.transmission=_.transmissionFactor),void 0!==_.transmissionTexture&&u.push(s.assignTexture(r,"transmissionMap",_.transmissionTexture)),Promise.all(u)}}class Ax{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];r.thickness=void 0!==_.thicknessFactor?_.thicknessFactor:0,void 0!==_.thicknessTexture&&u.push(s.assignTexture(r,"thicknessMap",_.thicknessTexture)),r.attenuationDistance=_.attenuationDistance||1/0;const A=_.attenuationColor||[1,1,1];return r.attenuationColor=(new kr).setRGB(A[0],A[1],A[2],ns),Promise.all(u)}}class Cx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=a.extensions[this.name];return r.ior=void 0!==u.ior?u.ior:1.5,Promise.resolve()}}class Dx{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];r.specularIntensity=void 0!==_.specularFactor?_.specularFactor:1,void 0!==_.specularTexture&&u.push(s.assignTexture(r,"specularIntensityMap",_.specularTexture));const A=_.specularColorFactor||[1,1,1];return r.specularColor=(new kr).setRGB(A[0],A[1],A[2],ns),void 0!==_.specularColorTexture&&u.push(s.assignTexture(r,"specularColorMap",_.specularColorTexture,zi)),Promise.all(u)}}class D_{constructor(t){this.parser=t,this.name=Es.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return r.bumpScale=void 0!==_.bumpFactor?_.bumpFactor:1,void 0!==_.bumpTexture&&u.push(s.assignTexture(r,"bumpMap",_.bumpTexture)),Promise.all(u)}}class Ix{constructor(t){this.parser=t,this.name=Es.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return s.extensions&&s.extensions[this.name]?Dc:null}extendMaterialParams(t,r){const s=this.parser,a=s.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const u=[],_=a.extensions[this.name];return void 0!==_.anisotropyStrength&&(r.anisotropy=_.anisotropyStrength),void 0!==_.anisotropyRotation&&(r.anisotropyRotation=_.anisotropyRotation),void 0!==_.anisotropyTexture&&u.push(s.assignTexture(r,"anisotropyMap",_.anisotropyTexture)),Promise.all(u)}}class I_{constructor(t){this.parser=t,this.name=Es.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,s=r.json,a=s.textures[t];if(!a.extensions||!a.extensions[this.name])return null;const u=a.extensions[this.name],_=r.options.ktx2Loader;if(!_){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,u.source,_)}}class hm{constructor(t){this.parser=t,this.name=Es.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,a=s.json,u=a.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],A=a.images[_.source];let k=s.textureLoader;if(A.uri){const B=s.options.manager.getHandler(A.uri);null!==B&&(k=B)}return this.detectSupport().then(function(B){if(B)return s.loadTextureImage(t,_.source,k);if(a.extensionsRequired&&a.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Rx{constructor(t){this.parser=t,this.name=Es.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,a=s.json,u=a.textures[t];if(!u.extensions||!u.extensions[r])return null;const _=u.extensions[r],A=a.images[_.source];let k=s.textureLoader;if(A.uri){const B=s.options.manager.getHandler(A.uri);null!==B&&(k=B)}return this.detectSupport().then(function(B){if(B)return s.loadTextureImage(t,_.source,k);if(a.extensionsRequired&&a.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(1===r.height)}})),this.isSupported}}class Px{constructor(t){this.name=Es.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,s=r.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const a=s.extensions[this.name],u=this.parser.getDependency("buffer",a.buffer),_=this.parser.options.meshoptDecoder;if(!_||!_.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return u.then(function(A){const ee=a.count,ae=a.byteStride,pe=new Uint8Array(A,a.byteOffset||0,a.byteLength||0);return _.decodeGltfBufferAsync?_.decodeGltfBufferAsync(ee,ae,pe,a.mode,a.filter).then(function(_e){return _e.buffer}):_.ready.then(function(){const _e=new ArrayBuffer(ee*ae);return _.decodeGltfBuffer(new Uint8Array(_e),ee,ae,pe,a.mode,a.filter),_e})})}return null}}class R_{constructor(t){this.name=Es.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,s=r.nodes[t];if(!s.extensions||!s.extensions[this.name]||void 0===s.mesh)return null;const a=r.meshes[s.mesh];for(const B of a.primitives)if(B.mode!==ac.TRIANGLES&&B.mode!==ac.TRIANGLE_STRIP&&B.mode!==ac.TRIANGLE_FAN&&void 0!==B.mode)return null;const _=s.extensions[this.name].attributes,A=[],k={};for(const B in _)A.push(this.parser.getDependency("accessor",_[B]).then(ee=>(k[B]=ee,k[B])));return A.length<1?null:(A.push(this.parser.createNodeMesh(t)),Promise.all(A).then(B=>{const ee=B.pop(),ae=ee.isGroup?ee.children:[ee],pe=B[0].count,_e=[];for(const Re of ae){const Be=new Li,Le=new St,Oe=new an,ft=new St(1,1,1),dt=new Bb(Re.geometry,Re.material,pe);for(let st=0;st<pe;st++)k.TRANSLATION&&Le.fromBufferAttribute(k.TRANSLATION,st),k.ROTATION&&Oe.fromBufferAttribute(k.ROTATION,st),k.SCALE&&ft.fromBufferAttribute(k.SCALE,st),dt.setMatrixAt(st,Be.compose(Le,Oe,ft));for(const st in k)if("_COLOR_0"===st){const Yt=k[st];dt.instanceColor=new Ih(Yt.array,Yt.itemSize,Yt.normalized)}else"TRANSLATION"!==st&&"ROTATION"!==st&&"SCALE"!==st&&Re.geometry.setAttribute(st,k[st]);Eo.prototype.copy.call(dt,Re),this.parser.assignFinalMaterial(dt),_e.push(dt)}return ee.isGroup?(ee.clear(),ee.add(..._e),ee):_e[0]}))}}const P_="glTF";class gh{constructor(t){this.name=Es.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,12),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==P_)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-12,u=new DataView(t,12);let _=0;for(;_<a;){const A=u.getUint32(_,!0);_+=4;const k=u.getUint32(_,!0);if(_+=4,1313821514===k){const B=new Uint8Array(t,12+_,A);this.content=s.decode(B)}else if(5130562===k){const B=12+_;this.body=t.slice(B,B+A)}_+=A}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class If{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Es.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const s=this.json,a=this.dracoLoader,u=t.extensions[this.name].bufferView,_=t.extensions[this.name].attributes,A={},k={},B={};for(const ee in _){const ae=wy[ee]||ee.toLowerCase();A[ae]=_[ee]}for(const ee in t.attributes){const ae=wy[ee]||ee.toLowerCase();if(void 0!==_[ee]){const pe=s.accessors[t.attributes[ee]];B[ae]=Rf[pe.componentType].name,k[ae]=!0===pe.normalized}}return r.getDependency("bufferView",u).then(function(ee){return new Promise(function(ae,pe){a.decodeDracoFile(ee,function(_e){for(const Re in _e.attributes){const Le=k[Re];void 0!==Le&&(_e.attributes[Re].normalized=Le)}ae(_e)},A,B,ns,pe)})})}}class lT{constructor(){this.name=Es.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(void 0===r.texCoord||r.texCoord===t.channel)&&void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(t=t.clone(),void 0!==r.texCoord&&(t.channel=r.texCoord),void 0!==r.offset&&t.offset.fromArray(r.offset),void 0!==r.rotation&&(t.rotation=r.rotation),void 0!==r.scale&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class O_{constructor(){this.name=Es.KHR_MESH_QUANTIZATION}}class k_ extends Kh{constructor(t,r,s,a){super(t,r,s,a)}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,u=t*a*3+a;for(let _=0;_!==a;_++)r[_]=s[u+_];return r}interpolate_(t,r,s,a){const u=this.resultBuffer,_=this.sampleValues,A=this.valueSize,k=2*A,B=3*A,ee=a-r,ae=(s-r)/ee,pe=ae*ae,_e=pe*ae,Re=t*B,Be=Re-B,Le=-2*_e+3*pe,Oe=_e-pe,ft=1-Le,dt=Oe-pe+ae;for(let st=0;st!==A;st++)u[st]=ft*_[Be+st+A]+dt*(_[Be+st+k]*ee)+Le*_[Re+st+A]+Oe*(_[Re+st]*ee);return u}}const L_=new an;class Ox extends k_{interpolate_(t,r,s,a){const u=super.interpolate_(t,r,s,a);return L_.fromArray(u).normalize().toArray(u),u}}const ac={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Rf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N_={9728:_n,9729:Cn,9984:1004,9985:1007,9986:hn,9987:fr},yh={33071:Tn,33648:1002,10497:cn},Pf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wy={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},kx={CUBICSPLINE:void 0,LINEAR:Vo,STEP:Ro};function ka(v,t,r){for(const s in r.extensions)void 0===v[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=r.extensions[s])}function va(v,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(v.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xy(v,t){if(v.updateMorphTargets(),void 0!==t.weights)for(let r=0,s=t.weights.length;r<s;r++)v.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(v.morphTargetInfluences.length===r.length){v.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++)v.morphTargetDictionary[r[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Lx(v){let t;const r=v.extensions&&v.extensions[Es.KHR_DRACO_MESH_COMPRESSION];if(t=r?"draco:"+r.bufferView+":"+r.indices+":"+fm(r.attributes):v.indices+":"+fm(v.attributes)+":"+v.mode,void 0!==v.targets)for(let s=0,a=v.targets.length;s<a;s++)t+=":"+fm(v.targets[s]);return t}function fm(v){let t="";const r=Object.keys(v).sort();for(let s=0,a=r.length;s<a;s++)t+=r[s]+":"+v[r[s]]+";";return t}function Sy(v){switch(v){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Nx=new Li;class jx{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Sx,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,a=-1,u=!1,_=-1;if(typeof navigator<"u"){const A=navigator.userAgent;s=!0===/^((?!chrome|android).)*safari/i.test(A);const k=A.match(/Version\/(\d+)/);a=s&&k?parseInt(k[1],10):-1,u=A.indexOf("Firefox")>-1,_=u?A.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||s&&a<17||u&&_<98?new c1(this.options.manager):new Sg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ic(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const s=this,a=this.json,u=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(_){return _._markDefs&&_._markDefs()}),Promise.all(this._invokeAll(function(_){return _.beforeRoot&&_.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(_){const A={scene:_[0][a.scene||0],scenes:_[0],animations:_[1],cameras:_[2],asset:a.asset,parser:s,userData:{}};return ka(u,A,a),va(A,a),Promise.all(s._invokeAll(function(k){return k.afterRoot&&k.afterRoot(A)})).then(function(){for(const k of A.scenes)k.updateMatrixWorld();t(A)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],s=this.json.meshes||[];for(let a=0,u=r.length;a<u;a++){const _=r[a].joints;for(let A=0,k=_.length;A<k;A++)t[_[A]].isBone=!0}for(let a=0,u=t.length;a<u;a++){const _=t[a];void 0!==_.mesh&&(this._addNodeRef(this.meshCache,_.mesh),void 0!==_.skin&&(s[_.mesh].isSkinnedMesh=!0)),void 0!==_.camera&&this._addNodeRef(this.cameraCache,_.camera)}}_addNodeRef(t,r){void 0!==r&&(void 0===t.refs[r]&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,s){if(t.refs[r]<=1)return s;const a=s.clone(),u=(_,A)=>{const k=this.associations.get(_);null!=k&&this.associations.set(A,k);for(const[B,ee]of _.children.entries())u(ee,A.children[B])};return u(s,a),a.name+="_instance_"+t.uses[r]++,a}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let s=0;s<r.length;s++){const a=t(r[s]);if(a)return a}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const s=[];for(let a=0;a<r.length;a++){const u=t(r[a]);u&&s.push(u)}return s}getDependency(t,r){const s=t+":"+r;let a=this.cache.get(s);if(!a){switch(t){case"scene":a=this.loadScene(r);break;case"node":a=this._invokeOne(function(u){return u.loadNode&&u.loadNode(r)});break;case"mesh":a=this._invokeOne(function(u){return u.loadMesh&&u.loadMesh(r)});break;case"accessor":a=this.loadAccessor(r);break;case"bufferView":a=this._invokeOne(function(u){return u.loadBufferView&&u.loadBufferView(r)});break;case"buffer":a=this.loadBuffer(r);break;case"material":a=this._invokeOne(function(u){return u.loadMaterial&&u.loadMaterial(r)});break;case"texture":a=this._invokeOne(function(u){return u.loadTexture&&u.loadTexture(r)});break;case"skin":a=this.loadSkin(r);break;case"animation":a=this._invokeOne(function(u){return u.loadAnimation&&u.loadAnimation(r)});break;case"camera":a=this.loadCamera(r);break;default:if(a=this._invokeOne(function(u){return u!=this&&u.getDependency&&u.getDependency(t,r)}),!a)throw new Error("Unknown type: "+t)}this.cache.add(s,a)}return a}getDependencies(t){let r=this.cache.get(t);if(!r){const s=this;r=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(u,_){return s.getDependency(t,_)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],s=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===t)return Promise.resolve(this.extensions[Es.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(u,_){s.load(vu.resolveURL(r.uri,a.path),u,void 0,function(){_(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(s){const u=r.byteOffset||0;return s.slice(u,u+(r.byteLength||0))})}loadAccessor(t){const r=this,s=this.json,a=this.json.accessors[t];if(void 0===a.bufferView&&void 0===a.sparse){const _=Pf[a.type],k=!0===a.normalized,B=new(0,Rf[a.componentType])(a.count*_);return Promise.resolve(new to(B,_,k))}const u=[];return u.push(void 0!==a.bufferView?this.getDependency("bufferView",a.bufferView):null),void 0!==a.sparse&&(u.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(u).then(function(_){const A=_[0],k=Pf[a.type],B=Rf[a.componentType],ee=B.BYTES_PER_ELEMENT,pe=a.byteOffset||0,_e=void 0!==a.bufferView?s.bufferViews[a.bufferView].byteStride:void 0,Re=!0===a.normalized;let Be,Le;if(_e&&_e!==ee*k){const Oe=Math.floor(pe/_e),ft="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+Oe+":"+a.count;let dt=r.cache.get(ft);dt||(Be=new B(A,Oe*_e,a.count*_e/ee),dt=new zc(Be,_e/ee),r.cache.add(ft,dt)),Le=new _l(dt,k,pe%_e/ee,Re)}else Be=null===A?new B(a.count*k):new B(A,pe,a.count*k),Le=new to(Be,k,Re);if(void 0!==a.sparse){const st=a.sparse.values.byteOffset||0,Yt=new(0,Rf[a.sparse.indices.componentType])(_[1],a.sparse.indices.byteOffset||0,a.sparse.count*Pf.SCALAR),Mt=new B(_[2],st,a.sparse.count*k);null!==A&&(Le=new to(Le.array.slice(),Le.itemSize,Le.normalized)),Le.normalized=!1;for(let Gt=0,tn=Yt.length;Gt<tn;Gt++){const It=Yt[Gt];if(Le.setX(It,Mt[Gt*k]),k>=2&&Le.setY(It,Mt[Gt*k+1]),k>=3&&Le.setZ(It,Mt[Gt*k+2]),k>=4&&Le.setW(It,Mt[Gt*k+3]),k>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Le.normalized=Re}return Le})}loadTexture(t){const r=this.json,u=r.textures[t].source,_=r.images[u];let A=this.textureLoader;if(_.uri){const k=this.options.manager.getHandler(_.uri);null!==k&&(A=k)}return this.loadTextureImage(t,u,A)}loadTextureImage(t,r,s){const a=this,u=this.json,_=u.textures[t],A=u.images[r],k=(A.uri||A.bufferView)+":"+_.sampler;if(this.textureCache[k])return this.textureCache[k];const B=this.loadImageSource(r,s).then(function(ee){ee.flipY=!1,ee.name=_.name||A.name||"",""===ee.name&&"string"==typeof A.uri&&!1===A.uri.startsWith("data:image/")&&(ee.name=A.uri);const pe=(u.samplers||{})[_.sampler]||{};return ee.magFilter=N_[pe.magFilter]||Cn,ee.minFilter=N_[pe.minFilter]||fr,ee.wrapS=yh[pe.wrapS]||cn,ee.wrapT=yh[pe.wrapT]||cn,ee.generateMipmaps=!ee.isCompressedTexture&&ee.minFilter!==_n&&ee.minFilter!==Cn,a.associations.set(ee,{textures:t}),ee}).catch(function(){return null});return this.textureCache[k]=B,B}loadImageSource(t,r){const a=this.json,u=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(ae=>ae.clone());const _=a.images[t],A=self.URL||self.webkitURL;let k=_.uri||"",B=!1;if(void 0!==_.bufferView)k=this.getDependency("bufferView",_.bufferView).then(function(ae){B=!0;const pe=new Blob([ae],{type:_.mimeType});return k=A.createObjectURL(pe),k});else if(void 0===_.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const ee=Promise.resolve(k).then(function(ae){return new Promise(function(pe,_e){let Re=pe;!0===r.isImageBitmapLoader&&(Re=function(Be){const Le=new _o(Be);Le.needsUpdate=!0,pe(Le)}),r.load(vu.resolveURL(ae,u.path),Re,void 0,_e)})}).then(function(ae){return!0===B&&A.revokeObjectURL(k),va(ae,_),ae.userData.mimeType=_.mimeType||function B_(v){return v.search(/\.jpe?g($|\?)/i)>0||0===v.search(/^data\:image\/jpeg/)?"image/jpeg":v.search(/\.webp($|\?)/i)>0||0===v.search(/^data\:image\/webp/)?"image/webp":v.search(/\.ktx2($|\?)/i)>0||0===v.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(_.uri),ae}).catch(function(ae){throw console.error("THREE.GLTFLoader: Couldn't load texture",k),ae});return this.sourceCache[t]=ee,ee}assignTexture(t,r,s,a){const u=this;return this.getDependency("texture",s.index).then(function(_){if(!_)return null;if(void 0!==s.texCoord&&s.texCoord>0&&((_=_.clone()).channel=s.texCoord),u.extensions[Es.KHR_TEXTURE_TRANSFORM]){const A=void 0!==s.extensions?s.extensions[Es.KHR_TEXTURE_TRANSFORM]:void 0;if(A){const k=u.associations.get(_);_=u.extensions[Es.KHR_TEXTURE_TRANSFORM].extendTexture(_,A),u.associations.set(_,k)}}return void 0!==a&&(_.colorSpace=a),t[r]=_,_})}assignFinalMaterial(t){const r=t.geometry;let s=t.material;const a=void 0===r.attributes.tangent,u=void 0!==r.attributes.color,_=void 0===r.attributes.normal;if(t.isPoints){const A="PointsMaterial:"+s.uuid;let k=this.cache.get(A);k||(k=new Vu,Zs.prototype.copy.call(k,s),k.color.copy(s.color),k.map=s.map,k.sizeAttenuation=!1,this.cache.add(A,k)),s=k}else if(t.isLine){const A="LineBasicMaterial:"+s.uuid;let k=this.cache.get(A);k||(k=new ol,Zs.prototype.copy.call(k,s),k.color.copy(s.color),k.map=s.map,this.cache.add(A,k)),s=k}if(a||u||_){let A="ClonedMaterial:"+s.uuid+":";a&&(A+="derivative-tangents:"),u&&(A+="vertex-colors:"),_&&(A+="flat-shading:");let k=this.cache.get(A);k||(k=s.clone(),u&&(k.vertexColors=!0),_&&(k.flatShading=!0),a&&(k.normalScale&&(k.normalScale.y*=-1),k.clearcoatNormalScale&&(k.clearcoatNormalScale.y*=-1)),this.cache.add(A,k),this.associations.set(k,this.associations.get(s))),s=k}t.material=s}getMaterialType(){return ga}loadMaterial(t){const r=this,a=this.extensions,u=this.json.materials[t];let _;const A={},B=[];if((u.extensions||{})[Es.KHR_MATERIALS_UNLIT]){const ae=a[Es.KHR_MATERIALS_UNLIT];_=ae.getMaterialType(),B.push(ae.extendParams(A,u,r))}else{const ae=u.pbrMetallicRoughness||{};if(A.color=new kr(1,1,1),A.opacity=1,Array.isArray(ae.baseColorFactor)){const pe=ae.baseColorFactor;A.color.setRGB(pe[0],pe[1],pe[2],ns),A.opacity=pe[3]}void 0!==ae.baseColorTexture&&B.push(r.assignTexture(A,"map",ae.baseColorTexture,zi)),A.metalness=void 0!==ae.metallicFactor?ae.metallicFactor:1,A.roughness=void 0!==ae.roughnessFactor?ae.roughnessFactor:1,void 0!==ae.metallicRoughnessTexture&&(B.push(r.assignTexture(A,"metalnessMap",ae.metallicRoughnessTexture)),B.push(r.assignTexture(A,"roughnessMap",ae.metallicRoughnessTexture))),_=this._invokeOne(function(pe){return pe.getMaterialType&&pe.getMaterialType(t)}),B.push(Promise.all(this._invokeAll(function(pe){return pe.extendMaterialParams&&pe.extendMaterialParams(t,A)})))}!0===u.doubleSided&&(A.side=2);const ee=u.alphaMode||"OPAQUE";if("BLEND"===ee?(A.transparent=!0,A.depthWrite=!1):(A.transparent=!1,"MASK"===ee&&(A.alphaTest=void 0!==u.alphaCutoff?u.alphaCutoff:.5)),void 0!==u.normalTexture&&_!==Co&&(B.push(r.assignTexture(A,"normalMap",u.normalTexture)),A.normalScale=new pr(1,1),void 0!==u.normalTexture.scale)){const ae=u.normalTexture.scale;A.normalScale.set(ae,ae)}if(void 0!==u.occlusionTexture&&_!==Co&&(B.push(r.assignTexture(A,"aoMap",u.occlusionTexture)),void 0!==u.occlusionTexture.strength&&(A.aoMapIntensity=u.occlusionTexture.strength)),void 0!==u.emissiveFactor&&_!==Co){const ae=u.emissiveFactor;A.emissive=(new kr).setRGB(ae[0],ae[1],ae[2],ns)}return void 0!==u.emissiveTexture&&_!==Co&&B.push(r.assignTexture(A,"emissiveMap",u.emissiveTexture,zi)),Promise.all(B).then(function(){const ae=new _(A);return u.name&&(ae.name=u.name),va(ae,u),r.associations.set(ae,{materials:t}),u.extensions&&ka(a,ae,u),ae})}createUniqueName(t){const r=Wo.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,s=this.extensions,a=this.primitiveCache;function u(A){return s[Es.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(A,r).then(function(k){return mm(k,A,r)})}const _=[];for(let A=0,k=t.length;A<k;A++){const B=t[A],ee=Lx(B),ae=a[ee];if(ae)_.push(ae.promise);else{let pe;pe=B.extensions&&B.extensions[Es.KHR_DRACO_MESH_COMPRESSION]?u(B):mm(new gs,B,r),a[ee]={primitive:B,promise:pe},_.push(pe)}}return Promise.all(_)}loadMesh(t){const r=this,a=this.extensions,u=this.json.meshes[t],_=u.primitives,A=[];for(let k=0,B=_.length;k<B;k++){const ee=void 0===_[k].material?(void 0===(v=this.cache).DefaultMaterial&&(v.DefaultMaterial=new ga({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),v.DefaultMaterial):this.getDependency("material",_[k].material);A.push(ee)}var v;return A.push(r.loadGeometries(_)),Promise.all(A).then(function(k){const B=k.slice(0,k.length-1),ee=k[k.length-1],ae=[];for(let _e=0,Re=ee.length;_e<Re;_e++){const Be=ee[_e],Le=_[_e];let Oe;const ft=B[_e];if(Le.mode===ac.TRIANGLES||Le.mode===ac.TRIANGLE_STRIP||Le.mode===ac.TRIANGLE_FAN||void 0===Le.mode)Oe=!0===u.isSkinnedMesh?new jb(Be,ft):new ks(Be,ft),!0===Oe.isSkinnedMesh&&Oe.normalizeSkinWeights(),Le.mode===ac.TRIANGLE_STRIP?Oe.geometry=M_(Oe.geometry,1):Le.mode===ac.TRIANGLE_FAN&&(Oe.geometry=M_(Oe.geometry,2));else if(Le.mode===ac.LINES)Oe=new Nl(Be,ft);else if(Le.mode===ac.LINE_STRIP)Oe=new Ec(Be,ft);else if(Le.mode===ac.LINE_LOOP)Oe=new ip(Be,ft);else{if(Le.mode!==ac.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Le.mode);Oe=new Xd(Be,ft)}Object.keys(Oe.geometry.morphAttributes).length>0&&xy(Oe,u),Oe.name=r.createUniqueName(u.name||"mesh_"+t),va(Oe,u),Le.extensions&&ka(a,Oe,Le),r.assignFinalMaterial(Oe),ae.push(Oe)}for(let _e=0,Re=ae.length;_e<Re;_e++)r.associations.set(ae[_e],{meshes:t,primitives:_e});if(1===ae.length)return u.extensions&&ka(a,ae[0],u),ae[0];const pe=new sl;u.extensions&&ka(a,pe,u),r.associations.set(pe,{meshes:t});for(let _e=0,Re=ae.length;_e<Re;_e++)pe.add(ae[_e]);return pe})}loadCamera(t){let r;const s=this.json.cameras[t],a=s[s.type];if(a)return"perspective"===s.type?r=new ko(Fo_radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===s.type&&(r=new wg(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),s.name&&(r.name=this.createUniqueName(s.name)),va(r,s),Promise.resolve(r);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const r=this.json.skins[t],s=[];for(let a=0,u=r.joints.length;a<u;a++)s.push(this._loadNodeShallow(r.joints[a]));return s.push(void 0!==r.inverseBindMatrices?this.getDependency("accessor",r.inverseBindMatrices):null),Promise.all(s).then(function(a){const u=a.pop(),_=a,A=[],k=[];for(let B=0,ee=_.length;B<ee;B++){const ae=_[B];if(ae){A.push(ae);const pe=new Li;null!==u&&pe.fromArray(u.array,16*B),k.push(pe)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[B])}return new Wm(A,k)})}loadAnimation(t){const s=this,a=this.json.animations[t],u=a.name?a.name:"animation_"+t,_=[],A=[],k=[],B=[],ee=[];for(let ae=0,pe=a.channels.length;ae<pe;ae++){const _e=a.channels[ae],Re=a.samplers[_e.sampler],Be=_e.target,Oe=void 0!==a.parameters?a.parameters[Re.input]:Re.input,ft=void 0!==a.parameters?a.parameters[Re.output]:Re.output;void 0!==Be.node&&(_.push(this.getDependency("node",Be.node)),A.push(this.getDependency("accessor",Oe)),k.push(this.getDependency("accessor",ft)),B.push(Re),ee.push(Be))}return Promise.all([Promise.all(_),Promise.all(A),Promise.all(k),Promise.all(B),Promise.all(ee)]).then(function(ae){const pe=ae[0],_e=ae[1],Re=ae[2],Be=ae[3],Le=ae[4],Oe=[];for(let ft=0,dt=pe.length;ft<dt;ft++){const st=pe[ft],Yt=_e[ft],Mt=Re[ft],Gt=Be[ft],tn=Le[ft];if(void 0===st)continue;st.updateMatrix&&st.updateMatrix();const It=s._createAnimationTracks(st,Yt,Mt,Gt,tn);if(It)for(let Dt=0;Dt<It.length;Dt++)Oe.push(It[Dt])}return new gu(u,void 0,Oe)})}createNodeMesh(t){const s=this,a=this.json.nodes[t];return void 0===a.mesh?null:s.getDependency("mesh",a.mesh).then(function(u){const _=s._getNodeRef(s.meshCache,a.mesh,u);return void 0!==a.weights&&_.traverse(function(A){if(A.isMesh)for(let k=0,B=a.weights.length;k<B;k++)A.morphTargetInfluences[k]=a.weights[k]}),_})}loadNode(t){const s=this,a=this.json.nodes[t],u=s._loadNodeShallow(t),_=[],A=a.children||[];for(let B=0,ee=A.length;B<ee;B++)_.push(s.getDependency("node",A[B]));const k=void 0===a.skin?Promise.resolve(null):s.getDependency("skin",a.skin);return Promise.all([u,Promise.all(_),k]).then(function(B){const ee=B[0],ae=B[1],pe=B[2];null!==pe&&ee.traverse(function(_e){_e.isSkinnedMesh&&_e.bind(pe,Nx)});for(let _e=0,Re=ae.length;_e<Re;_e++)ee.add(ae[_e]);return ee})}_loadNodeShallow(t){const s=this.extensions,a=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const u=this.json.nodes[t],_=u.name?a.createUniqueName(u.name):"",A=[],k=a._invokeOne(function(B){return B.createNodeMesh&&B.createNodeMesh(t)});return k&&A.push(k),void 0!==u.camera&&A.push(a.getDependency("camera",u.camera).then(function(B){return a._getNodeRef(a.cameraCache,u.camera,B)})),a._invokeAll(function(B){return B.createNodeAttachment&&B.createNodeAttachment(t)}).forEach(function(B){A.push(B)}),this.nodeCache[t]=Promise.all(A).then(function(B){let ee;if(ee=!0===u.isBone?new tv:B.length>1?new sl:1===B.length?B[0]:new Eo,ee!==B[0])for(let ae=0,pe=B.length;ae<pe;ae++)ee.add(B[ae]);if(u.name&&(ee.userData.name=u.name,ee.name=_),va(ee,u),u.extensions&&ka(s,ee,u),void 0!==u.matrix){const ae=new Li;ae.fromArray(u.matrix),ee.applyMatrix4(ae)}else void 0!==u.translation&&ee.position.fromArray(u.translation),void 0!==u.rotation&&ee.quaternion.fromArray(u.rotation),void 0!==u.scale&&ee.scale.fromArray(u.scale);return a.associations.has(ee)||a.associations.set(ee,{}),a.associations.get(ee).nodes=t,ee}),this.nodeCache[t]}loadScene(t){const r=this.extensions,s=this.json.scenes[t],a=this,u=new sl;s.name&&(u.name=a.createUniqueName(s.name)),va(u,s),s.extensions&&ka(r,u,s);const _=s.nodes||[],A=[];for(let k=0,B=_.length;k<B;k++)A.push(a.getDependency("node",_[k]));return Promise.all(A).then(function(k){for(let ee=0,ae=k.length;ee<ae;ee++)u.add(k[ee]);return a.associations=(ee=>{const ae=new Map;for(const[pe,_e]of a.associations)(pe instanceof Zs||pe instanceof _o)&&ae.set(pe,_e);return ee.traverse(pe=>{const _e=a.associations.get(pe);null!=_e&&ae.set(pe,_e)}),ae})(u),u})}_createAnimationTracks(t,r,s,a,u){const _=[],A=t.name?t.name:t.uuid,k=[];let B;switch(Qu[u.path]===Qu.weights?t.traverse(function(pe){pe.morphTargetInfluences&&k.push(pe.name?pe.name:pe.uuid)}):k.push(A),Qu[u.path]){case Qu.weights:B=rh;break;case Qu.rotation:B=yd;break;case Qu.position:case Qu.scale:B=$u;break;default:B=1===s.itemSize?rh:$u}const ee=void 0!==a.interpolation?kx[a.interpolation]:Vo,ae=this._getArrayFromAccessor(s);for(let pe=0,_e=k.length;pe<_e;pe++){const Re=new B(k[pe]+"."+Qu[u.path],r.array,ae,ee);"CUBICSPLINE"===a.interpolation&&this._createCubicSplineTrackInterpolant(Re),_.push(Re)}return _}_getArrayFromAccessor(t){let r=t.array;if(t.normalized){const s=Sy(r.constructor),a=new Float32Array(r.length);for(let u=0,_=r.length;u<_;u++)a[u]=r[u]*s;r=a}return r}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){return new(this instanceof yd?Ox:k_)(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mm(v,t,r){const s=t.attributes,a=[];function u(_,A){return r.getDependency("accessor",_).then(function(k){v.setAttribute(A,k)})}for(const _ in s){const A=wy[_]||_.toLowerCase();A in v.attributes||a.push(u(s[_],A))}if(void 0!==t.indices&&!v.index){const _=r.getDependency("accessor",t.indices).then(function(A){v.setIndex(A)});a.push(_)}return xs.workingColorSpace!==ns&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${xs.workingColorSpace}" not supported.`),va(v,t),function pm(v,t,r){const s=t.attributes,a=new ot;if(void 0===s.POSITION)return;{const A=r.json.accessors[s.POSITION],k=A.min,B=A.max;if(void 0===k||void 0===B)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new St(k[0],k[1],k[2]),new St(B[0],B[1],B[2])),A.normalized){const ee=Sy(Rf[A.componentType]);a.min.multiplyScalar(ee),a.max.multiplyScalar(ee)}}const u=t.targets;if(void 0!==u){const A=new St,k=new St;for(let B=0,ee=u.length;B<ee;B++){const ae=u[B];if(void 0!==ae.POSITION){const pe=r.json.accessors[ae.POSITION],_e=pe.min,Re=pe.max;if(void 0!==_e&&void 0!==Re){if(k.setX(Math.max(Math.abs(_e[0]),Math.abs(Re[0]))),k.setY(Math.max(Math.abs(_e[1]),Math.abs(Re[1]))),k.setZ(Math.max(Math.abs(_e[2]),Math.abs(Re[2]))),pe.normalized){const Be=Sy(Rf[pe.componentType]);k.multiplyScalar(Be)}A.max(k)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(A)}v.boundingBox=a;const _=new us;a.getCenter(_.center),_.radius=a.min.distanceTo(a.max)/2,v.boundingSphere=_}(v,t,r),Promise.all(a).then(function(){return void 0!==t.targets?function U_(v,t,r){let s=!1,a=!1,u=!1;for(let B=0,ee=t.length;B<ee;B++){const ae=t[B];if(void 0!==ae.POSITION&&(s=!0),void 0!==ae.NORMAL&&(a=!0),void 0!==ae.COLOR_0&&(u=!0),s&&a&&u)break}if(!s&&!a&&!u)return Promise.resolve(v);const _=[],A=[],k=[];for(let B=0,ee=t.length;B<ee;B++){const ae=t[B];if(s){const pe=void 0!==ae.POSITION?r.getDependency("accessor",ae.POSITION):v.attributes.position;_.push(pe)}if(a){const pe=void 0!==ae.NORMAL?r.getDependency("accessor",ae.NORMAL):v.attributes.normal;A.push(pe)}if(u){const pe=void 0!==ae.COLOR_0?r.getDependency("accessor",ae.COLOR_0):v.attributes.color;k.push(pe)}}return Promise.all([Promise.all(_),Promise.all(A),Promise.all(k)]).then(function(B){const ae=B[1],pe=B[2];return s&&(v.morphAttributes.position=B[0]),a&&(v.morphAttributes.normal=ae),u&&(v.morphAttributes.color=pe),v.morphTargetsRelative=!0,v})}(v,t.targets,r):v})}const ed=/^[og]\s*(.+)?/,gm=/^mtllib /,V_=/^usemtl /,Of=/^usemap /,G_=/\s+/,z_=new St,kf=new St,Ey=new St,Tu=new St,Sl=new St,Ty=new kr;function ym(){const v={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,r){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==r);const s=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==r,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(a,u){const _=this._finalize(!1);_&&(_.inherited||_.groupCount<=0)&&this.materials.splice(_.index,1);const A={index:this.materials.length,name:a||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:void 0!==_?_.smooth:this.smooth,groupStart:void 0!==_?_.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(k){const B={index:"number"==typeof k?k:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return B.clone=this.clone.bind(B),B}};return this.materials.push(A),A},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(a){const u=this.currentMaterial();if(u&&-1===u.groupEnd&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),a&&this.materials.length>1)for(let _=this.materials.length-1;_>=0;_--)this.materials[_].groupCount<=0&&this.materials.splice(_,1);return a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),u}},s&&s.name&&"function"==typeof s.clone){const a=s.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseNormalIndex:function(t,r){const s=parseInt(t,10);return 3*(s>=0?s-1:s+r/3)},parseUVIndex:function(t,r){const s=parseInt(t,10);return 2*(s>=0?s-1:s+r/2)},addVertex:function(t,r,s){const a=this.vertices,u=this.object.geometry.vertices;u.push(a[t+0],a[t+1],a[t+2]),u.push(a[r+0],a[r+1],a[r+2]),u.push(a[s+0],a[s+1],a[s+2])},addVertexPoint:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addVertexLine:function(t){const r=this.vertices;this.object.geometry.vertices.push(r[t+0],r[t+1],r[t+2])},addNormal:function(t,r,s){const a=this.normals,u=this.object.geometry.normals;u.push(a[t+0],a[t+1],a[t+2]),u.push(a[r+0],a[r+1],a[r+2]),u.push(a[s+0],a[s+1],a[s+2])},addFaceNormal:function(t,r,s){const a=this.vertices,u=this.object.geometry.normals;z_.fromArray(a,t),kf.fromArray(a,r),Ey.fromArray(a,s),Sl.subVectors(Ey,kf),Tu.subVectors(z_,kf),Sl.cross(Tu),Sl.normalize(),u.push(Sl.x,Sl.y,Sl.z),u.push(Sl.x,Sl.y,Sl.z),u.push(Sl.x,Sl.y,Sl.z)},addColor:function(t,r,s){const a=this.colors,u=this.object.geometry.colors;void 0!==a[t]&&u.push(a[t+0],a[t+1],a[t+2]),void 0!==a[r]&&u.push(a[r+0],a[r+1],a[r+2]),void 0!==a[s]&&u.push(a[s+0],a[s+1],a[s+2])},addUV:function(t,r,s){const a=this.uvs,u=this.object.geometry.uvs;u.push(a[t+0],a[t+1]),u.push(a[r+0],a[r+1]),u.push(a[s+0],a[s+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const r=this.uvs;this.object.geometry.uvs.push(r[t+0],r[t+1])},addFace:function(t,r,s,a,u,_,A,k,B){const ee=this.vertices.length;let ae=this.parseVertexIndex(t,ee),pe=this.parseVertexIndex(r,ee),_e=this.parseVertexIndex(s,ee);if(this.addVertex(ae,pe,_e),this.addColor(ae,pe,_e),void 0!==A&&""!==A){const Re=this.normals.length;ae=this.parseNormalIndex(A,Re),pe=this.parseNormalIndex(k,Re),_e=this.parseNormalIndex(B,Re),this.addNormal(ae,pe,_e)}else this.addFaceNormal(ae,pe,_e);if(void 0!==a&&""!==a){const Re=this.uvs.length;ae=this.parseUVIndex(a,Re),pe=this.parseUVIndex(u,Re),_e=this.parseUVIndex(_,Re),this.addUV(ae,pe,_e),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const r=this.vertices.length;for(let s=0,a=t.length;s<a;s++){const u=this.parseVertexIndex(t[s],r);this.addVertexPoint(u),this.addColor(u)}},addLineGeometry:function(t,r){this.object.geometry.type="Line";const s=this.vertices.length,a=this.uvs.length;for(let u=0,_=t.length;u<_;u++)this.addVertexLine(this.parseVertexIndex(t[u],s));for(let u=0,_=r.length;u<_;u++)this.addUVLine(this.parseUVIndex(r[u],a))}};return v.startObject("",!1),v}class $_ extends aa{constructor(t){super(t),this.materials=null}load(t,r,s,a){const u=this,_=new ic(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(A){try{r(u.parse(A))}catch(k){a?a(k):console.error(k),u.manager.itemError(t)}},s,a)}setMaterials(t){return this.materials=t,this}parse(t){const r=new ym;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const s=t.split("\n");let a=[];for(let A=0,k=s.length;A<k;A++){const B=s[A].trimStart();if(0===B.length)continue;const ee=B.charAt(0);if("#"!==ee)if("v"===ee){const ae=B.split(G_);switch(ae[0]){case"v":r.vertices.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3])),ae.length>=7?(Ty.setRGB(parseFloat(ae[4]),parseFloat(ae[5]),parseFloat(ae[6]),zi),r.colors.push(Ty.r,Ty.g,Ty.b)):r.colors.push(void 0,void 0,void 0);break;case"vn":r.normals.push(parseFloat(ae[1]),parseFloat(ae[2]),parseFloat(ae[3]));break;case"vt":r.uvs.push(parseFloat(ae[1]),parseFloat(ae[2]))}}else if("f"===ee){const pe=B.slice(1).trim().split(G_),_e=[];for(let Be=0,Le=pe.length;Be<Le;Be++){const Oe=pe[Be];if(Oe.length>0){const ft=Oe.split("/");_e.push(ft)}}const Re=_e[0];for(let Be=1,Le=_e.length-1;Be<Le;Be++){const Oe=_e[Be],ft=_e[Be+1];r.addFace(Re[0],Oe[0],ft[0],Re[1],Oe[1],ft[1],Re[2],Oe[2],ft[2])}}else if("l"===ee){const ae=B.substring(1).trim().split(" ");let pe=[];const _e=[];if(-1===B.indexOf("/"))pe=ae;else for(let Re=0,Be=ae.length;Re<Be;Re++){const Le=ae[Re].split("/");""!==Le[0]&&pe.push(Le[0]),""!==Le[1]&&_e.push(Le[1])}r.addLineGeometry(pe,_e)}else if("p"===ee){const pe=B.slice(1).trim().split(" ");r.addPointGeometry(pe)}else if(null!==(a=ed.exec(B))){const ae=(" "+a[0].slice(1).trim()).slice(1);r.startObject(ae)}else if(V_.test(B))r.object.startMaterial(B.substring(7).trim(),r.materialLibraries);else if(gm.test(B))r.materialLibraries.push(B.substring(7).trim());else if(Of.test(B))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===ee){if(a=B.split(" "),a.length>1){const pe=a[1].trim().toLowerCase();r.object.smooth="0"!==pe&&"off"!==pe}else r.object.smooth=!0;const ae=r.object.currentMaterial();ae&&(ae.smooth=r.object.smooth)}else{if("\0"===B)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+B+'"')}}r.finalize();const u=new sl;if(u.materialLibraries=[].concat(r.materialLibraries),1==!(1===r.objects.length&&0===r.objects[0].geometry.vertices.length))for(let A=0,k=r.objects.length;A<k;A++){const B=r.objects[A],ee=B.geometry,ae=B.materials,pe="Line"===ee.type,_e="Points"===ee.type;let Re=!1;if(0===ee.vertices.length)continue;const Be=new gs;Be.setAttribute("position",new Ni(ee.vertices,3)),ee.normals.length>0&&Be.setAttribute("normal",new Ni(ee.normals,3)),ee.colors.length>0&&(Re=!0,Be.setAttribute("color",new Ni(ee.colors,3))),!0===ee.hasUVIndices&&Be.setAttribute("uv",new Ni(ee.uvs,2));const Le=[];for(let ft=0,dt=ae.length;ft<dt;ft++){const st=ae[ft],Yt=st.name+"_"+st.smooth+"_"+Re;let Mt=r.materials[Yt];if(null!==this.materials)if(Mt=this.materials.create(st.name),!pe||!Mt||Mt instanceof ol){if(_e&&Mt&&!(Mt instanceof Vu)){const Gt=new Vu({size:10,sizeAttenuation:!1});Zs.prototype.copy.call(Gt,Mt),Gt.color.copy(Mt.color),Gt.map=Mt.map,Mt=Gt}}else{const Gt=new ol;Zs.prototype.copy.call(Gt,Mt),Gt.color.copy(Mt.color),Mt=Gt}void 0===Mt&&(Mt=pe?new ol:_e?new Vu({size:1,sizeAttenuation:!1}):new pg,Mt.name=st.name,Mt.flatShading=!st.smooth,Mt.vertexColors=Re,r.materials[Yt]=Mt),Le.push(Mt)}let Oe;if(Le.length>1){for(let ft=0,dt=ae.length;ft<dt;ft++){const st=ae[ft];Be.addGroup(st.groupStart,st.groupCount,ft)}Oe=pe?new Nl(Be,Le):_e?new Xd(Be,Le):new ks(Be,Le)}else Oe=pe?new Nl(Be,Le[0]):_e?new Xd(Be,Le[0]):new ks(Be,Le[0]);Oe.name=B.name,u.add(Oe)}else if(r.vertices.length>0){const A=new Vu({size:1,sizeAttenuation:!1}),k=new gs;k.setAttribute("position",new Ni(r.vertices,3)),r.colors.length>0&&void 0!==r.colors[0]&&(k.setAttribute("color",new Ni(r.colors,3)),A.vertexColors=!0);const B=new Xd(k,A);u.add(B)}return u}}class H_ extends aa{constructor(t){super(t)}load(t,r,s,a){const u=this,_=new ic(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(this.withCredentials),_.load(t,function(A){try{r(u.parse(A))}catch(k){a?a(k):console.error(k),u.manager.itemError(t)}},s,a)}parse(t){function s(B,ee,ae){for(let pe=0,_e=B.length;pe<_e;pe++)if(B[pe]!==ee.getUint8(ae+pe))return!1;return!0}const k=function A(B){if("string"==typeof B){const ee=new Uint8Array(B.length);for(let ae=0;ae<B.length;ae++)ee[ae]=255&B.charCodeAt(ae);return ee.buffer||ee}return B}(t);return function r(B){const ee=new DataView(B);if(84+50*ee.getUint32(80,!0)===ee.byteLength)return!0;const Re=[115,111,108,105,100];for(let Be=0;Be<5;Be++)if(s(Re,ee,Be))return!1;return!0}(k)?function a(B){const ee=new DataView(B),ae=ee.getUint32(80,!0);let pe,_e,Re,Le,Oe,ft,dt,st,Be=!1;for(let bn=0;bn<70;bn++)1129270351==ee.getUint32(bn,!1)&&82==ee.getUint8(bn+4)&&61==ee.getUint8(bn+5)&&(Be=!0,Le=new Float32Array(3*ae*3),Oe=ee.getUint8(bn+6)/255,ft=ee.getUint8(bn+7)/255,dt=ee.getUint8(bn+8)/255,st=ee.getUint8(bn+9)/255);const Gt=new gs,tn=new Float32Array(3*ae*3),It=new Float32Array(3*ae*3),Dt=new kr;for(let bn=0;bn<ae;bn++){const Yn=84+50*bn,Kn=ee.getFloat32(Yn,!0),rr=ee.getFloat32(Yn+4,!0),wr=ee.getFloat32(Yn+8,!0);if(Be){const nr=ee.getUint16(Yn+48,!0);32768&nr?(pe=Oe,_e=ft,Re=dt):(pe=(31&nr)/31,_e=(nr>>5&31)/31,Re=(nr>>10&31)/31)}for(let nr=1;nr<=3;nr++){const Hr=Yn+12*nr,cr=3*bn*3+3*(nr-1);tn[cr]=ee.getFloat32(Hr,!0),tn[cr+1]=ee.getFloat32(Hr+4,!0),tn[cr+2]=ee.getFloat32(Hr+8,!0),It[cr]=Kn,It[cr+1]=rr,It[cr+2]=wr,Be&&(Dt.setRGB(pe,_e,Re,zi),Le[cr]=Dt.r,Le[cr+1]=Dt.g,Le[cr+2]=Dt.b)}}return Gt.setAttribute("position",new to(tn,3)),Gt.setAttribute("normal",new to(It,3)),Be&&(Gt.setAttribute("color",new to(Le,3)),Gt.hasColors=!0,Gt.alpha=st),Gt}(k):function u(B){const ee=new gs,ae=/solid([\s\S]*?)endsolid/g,pe=/facet([\s\S]*?)endfacet/g,_e=/solid\s(.+)/;let Re=0;const Be=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,Le=new RegExp("vertex"+Be+Be+Be,"g"),Oe=new RegExp("normal"+Be+Be+Be,"g"),ft=[],dt=[],st=[],Yt=new St;let Mt,Gt=0,tn=0,It=0;for(;null!==(Mt=ae.exec(B));){tn=It;const Dt=Mt[0],bn=null!==(Mt=_e.exec(Dt))?Mt[1]:"";for(st.push(bn);null!==(Mt=pe.exec(Dt));){let rr=0,wr=0;const nr=Mt[0];for(;null!==(Mt=Oe.exec(nr));)Yt.x=parseFloat(Mt[1]),Yt.y=parseFloat(Mt[2]),Yt.z=parseFloat(Mt[3]),wr++;for(;null!==(Mt=Le.exec(nr));)ft.push(parseFloat(Mt[1]),parseFloat(Mt[2]),parseFloat(Mt[3])),dt.push(Yt.x,Yt.y,Yt.z),rr++,It++;1!==wr&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+Re),3!==rr&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+Re),Re++}const Yn=tn,Kn=It-tn;ee.userData.groupNames=st,ee.addGroup(Yn,Kn,Gt),Gt++}return ee.setAttribute("position",new Ni(ft,3)),ee.setAttribute("normal",new Ni(dt,3)),ee}(function _(B){return"string"!=typeof B?(new TextDecoder).decode(B):B}(t))}}var ru=Ge(3953),vh=Ge(5374),Fx=Ge(3656),Ux=Ge(9900),Bx=Ge(4234),Vx=Ge(345),Gx=Ge(755),zx=Ge(3307),$x=Ge(5547),Mu=!1;const _h=8e4;let Hx=(()=>{var v;class t{constructor(s,a,u,_,A,k,B,ee,ae){var pe=this;this.modalCtrl=s,this.p5toast=a,this.lang=u,this.sanitizer=_,this.indexed=A,this.alertCtrl=k,this.navCtrl=B,this.p5loading=ee,this.noti=ae,this.CurrentVersion="v0.93.68",this.wakeLock=null,this.waitingWakeRelease=!1,this.userSetWakelock=!1,this.windowOnFocusAct={},this.WindowOnBlurAct={},this.FocusOnPortal=!0,this.portalHint=!0,this.BlockMainShortcut=!1,this.TodoTags={},this.TodoTagsKey=[],this.PIPableInfo={PIPableCanvas:void 0,PIPautoP5:void 0,framerate:void 0},this.PortalBottonTabAct={Todo:void 0,Subscribes:void 0,Arcade:void 0,Community:void 0},this.GodotCache={},this.ArcadeLoaded=!1,this.ArcadeWithFullScreen=!1,this.ToggleChatInput=!0,this.NeedBackgroundMode=!1,this.IsBackgroundMode=!1,this.arcadeChat={logs:[],text:""},this.ArcadeOnMessageLnId=13,this.InGameTargetPath="",this.ArcadeObject={QRCode:void 0},this.CacheShortCut={},this.WebsocketRetryTerm=70,this.useVoiceRecording="",this.videoPIP=!1,this.WaitingConnect=!1,this.useVideo=void 0,this.useCCTV=void 0,this.CCTVHost=!1,this.InitEnd=!1,this.PeerConnected=!1,this.ShowChatInterface=!1,this.DisableChatInput=!1,this.instCallLog={logs:[],text:""},this.PageDismissAct={},this.isOthersVideoExtended=!1,this.isAdsOn=!1,this.isAdPushed=!1,ae.GlobalCallback=this,Mu=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Re=>{Mu=!!Re.matches}),this.CustomLocalAddress=localStorage.getItem("useQRCodeBasic")||"https://is2you2.github.io/pjcone_pwa/",window.onfocus=()=>{let Re=Object.keys(this.windowOnFocusAct);for(let Be of Re)this.windowOnFocusAct[Be]()},window.onblur=()=>{let Re=Object.keys(this.WindowOnBlurAct);for(let Be of Re)this.WindowOnBlurAct[Be]()};const _e=()=>{document.fullscreenElement?this.ArcadeWithFullScreen=!0:(this.releaseWakeLock(),this.ArcadeWithFullScreen=!1)};document.onfullscreenchange=_e,document.onwebkitfullscreenchange=_e,document.onmozfullscreenchange=_e,document.onMSFullscreenChange=_e,this.autoPIPVideoElement=document.createElement("video"),document.body.appendChild(this.autoPIPVideoElement),this.autoPIPVideoElement.style.display="none",this.autoPIPVideoElement.autoplay=!0,this.autoPIPVideoElement.onloadeddata=(0,F.A)(function*(){try{yield pe.autoPIPVideoElement.requestPictureInPicture()}catch{pe.OnCloseAutoPIPModeAct()}}),this.autoPIPVideoElement.onleavepictureinpicture=()=>{this.CleanPIPableInfo(),this.OnCloseAutoPIPModeAct()},document.onvisibilitychange=()=>{"visible"===document.visibilityState&&this.userSetWakelock?this.requestWakeLock(!0):this.releaseWakeLock(!0)}}requestWakeLock(s=!1){var a=this;return(0,F.A)(function*(){yield a.releaseWakeLock(s);try{if("wakeLock"in navigator){for(;a.waitingWakeRelease;)yield new Promise(u=>setTimeout(u,0));a.wakeLock=yield navigator.wakeLock.request("screen"),a.waitingWakeRelease=!0,a.wakeLock.onrelease=()=>{a.waitingWakeRelease=!1,a.wakeLock.onrelease=null}}else console.log("Wake Lock API is not supported in this browser."),a.p5toast.show({text:"Wake Lock API is not supported in this browser."}),a.releaseWakeLock(s)}catch(u){console.log("Failed to acquire wake lock:",u),a.p5toast.show({text:`Failed to acquire wake lock:: ${u}`}),a.releaseWakeLock(s)}s||(a.userSetWakelock=!0)})()}releaseWakeLock(s=!1){var a=this;return(0,F.A)(function*(){try{var u;yield null===(u=a.wakeLock)||void 0===u?void 0:u.release()}catch(_){console.log("error_releaseWakeLock: ",_),a.p5toast.show({text:`${_}`})}s||(a.userSetWakelock=!1),a.wakeLock=null})()}toggleBlockMainShortcut(s){this.BlockMainShortcut=s,this.portalHint=!s}initialize(){const s=localStorage.getItem("ShowHint");null!==s&&(this.ShowHint="1"==s),void 0===this.ShowHint&&(this.ShowHint="DesktopPWA"==l.aH),this.p5toast.HTMLEncode||(this.p5toast.HTMLEncode=this.HTMLEncode),this.p5key=new Rt(a=>{a.setup=()=>{a.noCanvas(),a.noLoop(),this.p5KeyShortCut={}},a.keyPressed=u=>{if(!this.BlockMainShortcut&&this.p5KeyShortCut){switch(u.code){case"Backspace":this.p5KeyShortCut.Backspace&&this.p5KeyShortCut.Backspace();break;case"Backquote":this.p5KeyShortCut.Backquote&&this.p5KeyShortCut.Backquote(u);break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":case"Digit7":case"Digit8":case"Digit9":case"Digit0":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":case"Numpad6":case"Numpad7":case"Numpad8":case"Numpad9":case"Numpad0":if(this.p5KeyShortCut.Digit){const _=(Number(u.code.slice(-1))-1+10)%10;this.p5KeyShortCut.Digit(_)}break;case"KeyQ":case"KeyW":case"KeyE":case"KeyR":case"KeyT":this.p5KeyShortCut.BottomTab&&this.p5KeyShortCut.BottomTab(u.code.slice(-1));break;case"KeyA":this.p5KeyShortCut.AddAct&&this.p5KeyShortCut.AddAct(u);break;case"KeyS":this.p5KeyShortCut.SKeyAct&&this.p5KeyShortCut.SKeyAct(u);break;case"KeyD":this.p5KeyShortCut.DeleteAct&&this.p5KeyShortCut.DeleteAct(u);break;case"KeyF":this.p5KeyShortCut.FKeyAct&&this.p5KeyShortCut.FKeyAct();break;case"KeyZ":case"KeyX":case"KeyC":case"KeyV":this.p5KeyShortCut.HistoryAct&&this.p5KeyShortCut.HistoryAct(u)}"Enter"===u.key&&this.p5KeyShortCut.EnterAct&&this.p5KeyShortCut.EnterAct(u)}}})}AddTodoTags(s){try{for(let u=0,_=null===(a=s.tags)||void 0===a?void 0:a.length;u<_;u++){var a;const A=s.tags[u];this.TodoTags[A]||(this.TodoTags[A]=[],this.TagKeysToForm()),this.TodoTags[A].includes(s.id)||this.TodoTags[A].push(s.id)}}catch(u){console.log("AddTodoTags_on error: ",u)}}RemoveTodoTags(s){try{if(s&&s.tags)for(let a=0,u=s.tags.length;a<u;a++){const _=s.tags[a];if(this.TodoTags[_])for(let A=0,k=this.TodoTags[_].length;A<k;A++)if(s.id==this.TodoTags[_][A]){this.TodoTags[_].splice(A,1);break}this.TodoTags[_].length||(delete this.TodoTags[_],this.TagKeysToForm())}}catch(a){console.log("RemoveTodoTags_on error: ",a)}}TagKeysToForm(){const s=Object.keys(this.TodoTags);this.TodoTagsKey.length=0;for(let a=0,u=s.length;a<u;a++)this.TodoTagsKey.push({force_name:s[a],color:"#bbbbbb88",value:a})}SetPIPableInfo(s,a,u){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=s,this.PIPableInfo.PIPautoP5=a,this.PIPableInfo.framerate=u)}CleanPIPableInfo(){this.ArcadeLoaded||(this.PIPableInfo.PIPableCanvas=null,this.PIPableInfo.PIPautoP5=null,this.PIPableInfo.framerate=null),this.releaseWakeLock()}OnCloseAutoPIPModeAct(){var s;null===(s=this.stream)||void 0===s||s.getTracks().forEach(a=>a.stop()),this.stream=null}CraeteAutoPIPMode(){try{var s,a;this.stream=this.PIPableInfo.PIPableCanvas.captureStream(null!==(s=this.PIPableInfo.framerate)&&void 0!==s?s:24),this.autoPIPVideoElement.srcObject=this.stream,null===(a=this.PIPableInfo.PIPautoP5)||void 0===a||a.redraw(),this.requestWakeLock()}catch(u){console.log("error_CraeteAutoPIPMode: ",u),this.OnCloseAutoPIPModeAct(),this.releaseWakeLock()}}RemoveAutoPIPMode(s=!0){var a=this;return(0,F.A)(function*(){s&&a.CleanPIPableInfo();try{var u;yield null===(u=document)||void 0===u?void 0:u.exitPictureInPicture()}catch(_){console.log("error_RemoveAutoPIPMode: ",_)}a.OnCloseAutoPIPModeAct()})()}afterLangInit(){this.NeedBackgroundMode="DesktopPWA"!=l.aH}RemoveAllModals(s=(()=>{})){var a=this;return(0,F.A)(function*(){let u="init";for(;u;)u=yield a.modalCtrl.getTop(),u&&(yield u.dismiss(),u=null);s&&s()})()}CatchGETs(s){const a=s.split("?");if(a.length>1){const u=a[1].split("&");let _={};for(let A=0,k=u.length;A<k;A++){const B=u[A].split("=");_[B[0]]||(_[B[0]]=[]),_[B[0]].push(decodeURIComponent(B[1]))}return _}}readasQRCodeFromString(s){try{let a=new j({content:s,padding:4,width:8,height:8,color:Mu?"#bbb":"#444",background:Mu?"#111":"#fff",ecl:"M"}).svg();return this.sanitizer.bypassSecurityTrustUrl(`data:image/svg+xml;base64,${btoa(a)}`)}catch(a){console.log("readasQRCodeFromString: ",a),this.p5toast.show({text:`${this.lang.text.GlobalAct.failed_to_gen_qr}: ${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`})}}CreateGodotIFrame(s,a,u=!1){var _=this;return new Promise(function(){var A=(0,F.A)(function*(k){var B,ee,ae,pe,_e,Re;let Be=function(){var st=(0,F.A)(function*(){try{if("godot"!=window.godot)throw"No godot";if(!_.godot_window.start_load_pck)throw"No act ready";yield _.indexed.GetGodotIndexedDB(),k()}catch{setTimeout(()=>{Be()},1e3)}});return function(){return st.apply(this,arguments)}}();null===(B=_.godot_window)||void 0===B||null===(ee=B.quit_godot)||void 0===ee||ee.call(B),u&&(null===(ae=_.godot_window)||void 0===ae||null===(pe=ae.quit_ionic)||void 0===pe||pe.call(ae)),null===(_e=_.godot_splash)||void 0===_e||_e.remove(),null===(Re=_.godot)||void 0===Re||Re.remove(),window.godot="",Object.keys(_.GodotCache).forEach(Yt=>{URL.revokeObjectURL(_.GodotCache[Yt]),delete _.GodotCache[Yt]}),_.GodotCache.html="assets/html/index.html";try{if("1"!=localStorage.getItem("useCache"))throw"\uc624\ud504\ub77c\uc778 \uce90\uc2dc \uc6b0\ud68c\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c";const Mt=yield(yield fetch("assets/html/index.audio.worklet.js")).blob(),Gt=URL.createObjectURL(Mt);_.GodotCache.audio=Gt;const It=yield(yield fetch("assets/html/index.wasm")).blob(),Dt=URL.createObjectURL(It);_.GodotCache.wasm=Dt;const Yn=yield(yield fetch("assets/html/index.pck")).blob(),Kn=URL.createObjectURL(Yn);_.GodotCache.pck=Kn;const wr=yield(yield fetch("assets/html/index.png")).blob(),nr=URL.createObjectURL(wr);_.GodotCache.png=nr;let cr=yield(yield fetch("assets/html/index.js")).text();cr=cr.replace("`${loadPath}.audio.worklet.js`",`'${Gt}'`).replace(/`\${loadPath}\.wasm`/g,`'${Dt}'`).replace("this.config.mainPack || `${exe}.pck`;",`'${Kn}'`);const Yr=new Blob([cr],{type:"application/javascript"}),fi=URL.createObjectURL(Yr);_.GodotCache.js=fi;let as=yield(yield fetch("assets/html/index.html")).text();as=as.replace('<script src="index.js"><\/script>',`<script src="${fi}"><\/script>`).replace('src="index.png"',`src="${nr}"`);const Ts=new Blob([as],{type:"text/html"}),Tr=URL.createObjectURL(Ts);_.GodotCache.html=Tr}catch(st){console.log("\uace0\ub3c4\uc5d4\uc9c4 \uc624\ud504\ub77c\uc778 \ud398\uc774\uc9c0 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",st)}let Le=document.createElement("iframe");Le.id="godot",Le.setAttribute("src",_.GodotCache.html),Le.setAttribute("frameborder","0"),Le.setAttribute("class","full_screen"),Le.setAttribute("allow","fullscreen; encrypted-media"),Le.setAttribute("scrolling","no"),Le.setAttribute("withCredentials","true"),s.indexOf("PostViewer_")>=0&&(Le.style.borderRadius="16px"),a.isMobile=_.NeedBackgroundMode,s.indexOf("content_viewer_canvas")>=0&&(a.create_thumbnail_p5=(st,Yt)=>{Object.keys(_.GodotCache).forEach(Gt=>{URL.revokeObjectURL(_.GodotCache[Gt]),delete _.GodotCache[Gt]}),new Rt(Mt=>{Mt.setup=()=>{Mt.noCanvas(),Mt.pixelDensity(1),Mt.smooth(),Mt.loadImage("data:image/png;base64,"+st,function(){var Gt=(0,F.A)(function*(tn){let It,Dt;tn.width>tn.height?(It=192,Dt=Mt.round(192*tn.height/tn.width)):(Dt=192,It=Mt.round(192*tn.width/tn.height));let bn=Mt.createCanvas(It,Dt);Mt.image(tn,0,0,Mt.width,Mt.height),Mt.background(255,128),Mt.textSize(16),Mt.textWrap(Mt.CHAR);let Yn=Mt.height/24;Mt.push(),Mt.translate(Yn/6,Yn/6),Mt.fill(0),Mt.text(_.godot_window.filename,Yn,Yn,Mt.width-2*Yn,Mt.height-2*Yn),Mt.filter(Mt.BLUR,1,!1),Mt.pop(),Mt.fill(255),Mt.text(_.godot_window.filename,Yn,Yn,Mt.width-2*Yn,Mt.height-2*Yn);let Kn=bn.elt.toDataURL("image/png").replace("image/png","image/octet-stream");try{var rr,wr;if(!(null!==(rr=_.godot_window)&&void 0!==rr&&rr.alt_path||null!==(wr=_.godot_window)&&void 0!==wr&&wr.path))throw"\uacbd\ub85c \uc5c6\ub294 \ud30c\uc77c";yield _.indexed.saveBase64ToUserPath(Kn,`${_.godot_window.alt_path||_.godot_window.path}_thumbnail.png`),_.modulate_thumbnail(Yt,"")}catch(nr){console.log("p.saveFrames: ",nr)}Mt.remove()});return function(tn){return Gt.apply(this,arguments)}}(),Gt=>{console.error("create_thumbnail_load thumbnail failed: ",Gt),Mt.remove()})}})}),a.fullscr_tog=st=>{_.ArcadeWithFullScreen=null!=st?st:!_.ArcadeWithFullScreen};let Oe,ft=50;yield new Promise(st=>{const Yt=()=>{Oe=document.getElementById(s),Oe?st(void 0):setTimeout(()=>{ft--,ft>0?Yt():st(void 0)},100)};Yt()}),Oe.appendChild(Le),_.godot_window=Le.contentWindow||Le.contentDocument,Object.keys(a).forEach(st=>_.godot_window[st]=a[st]),_.godot=Le,yield Be()});return function(k){return A.apply(this,arguments)}}())}ToggleFullScreen(s){this.ArcadeWithFullScreen=null!=s?s:!this.ArcadeWithFullScreen;const a=document.documentElement;this.ArcadeWithFullScreen?(a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen(),this.requestWakeLock()):document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.releaseWakeLock())}CreateArcadeFrame(s){var a=this;return(0,F.A)(function*(){yield a.AnonymousUserCreateName(),a.ArcadeLoaded=!0,a.ArcadeChatLog=null,a.arcadeChat.logs.length=0,a.arcadeChat.text="",a.noti.Current="arcade",a.ToggleChatInput=!0,"DesktopPWA"==l.aH?a.ArcadeWithFullScreen=!0:a.ToggleFullScreen(!0),yield a.CreateGodotIFrameWithDuplicateAct(s,"arcade_pck_loaded",{path:"tmp_files/duplicate/arcade.pck",force:!0,ws_send:_=>{var A;null===(A=a.ArcadeWS)||void 0===A||A.send(_)},get_reqInfo:()=>a.CacheJoinedGameInfo,update_reqInfo:_=>{let A=JSON.parse(_);a.ArcadeWS.send(JSON.stringify({type:"update_reqInfo",socketId:a.ArcadeSocketId,keys:["data"],data:A}))},webrtc_send:_=>{a.WebRTCService.send(_)},open_modal:()=>{a.ArcadeQRAddress=`${a.CustomLocalAddress}?token=${a.CheckIfCanBlankSocketAddress(a.ArcadeWSAddress)},${12013==a.ArcadeSquarePort?"":a.ArcadeSquarePort},${a.ArcadeSocketId}`,a.ArcadeQRCodeSRC=a.readasQRCodeFromString(a.ArcadeQRAddress),a.OpenArcadeQRCode()},close_modal:()=>{var _;null===(_=a.ArcadeObject.QRCode)||void 0===_||_.dismiss()},select_file:_=>{var A;a.InGameTargetPath=_,null===(A=document.getElementById("arcade_ingame_load"))||void 0===A||A.click()},focus_chat_input:()=>{var _;null===(_=a.GodotRelativeArcadeChatInputFocus)||void 0===_||_.call(a)},quit_game:()=>{a.quit_godot_frame()},toggle_chat:_=>{a.ToggleChatInput=null!=_?_:!a.ToggleChatInput,a.ToggleChatInput?setTimeout(()=>{var A;a.ToggleChatInput&&(a.DomArcadeChatInput=null===(A=document.getElementById("arcadeInput"))||void 0===A?void 0:A.childNodes[1].childNodes[1].childNodes[1],a.DomArcadeChatInput&&(a.DomArcadeChatInput.onfocus=()=>{a.toggleBlockMainShortcut(!0),a.portalHint=!1,a.NeedBackgroundMode&&document.fullscreenElement&&(a.ArcadeWithFullScreen=!1)},a.DomArcadeChatInput.onblur=()=>{a.toggleBlockMainShortcut(!1),a.portalHint=!0,a.NeedBackgroundMode&&document.fullscreenElement&&(a.ArcadeWithFullScreen=!0)},a.DomArcadeChatInput.onpaste=k=>{var B;let ee=[];for(const ae of k.clipboardData.files)ee.push({file:ae});if(1==ee.length)return null===(B=a.ArcadeSendAttachFunc)||void 0===B||B.call(a,{target:{files:[ee[0].file]}},"arcade_chat"),!1}),a.auto_scroll_down())},500):a.ClearSignals()},get_pid:()=>a.ArcadeWSPeerId,get_pid_color:()=>(a.ArcadeWSPeerId.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),show_toast:_=>{a.p5toast.show({text:_})},check_mobile:()=>a.NeedBackgroundMode,kick_user:_=>{var A;null===(A=a.ArcadeWS)||void 0===A||A.send(JSON.stringify({type:"kick",pid:_}))}})})()}quit_godot_frame(){var s,a;this.ArcadeLoaded=!1,null===(s=this.godot)||void 0===s||s.remove(),this.godot=null,this.ToggleFullScreen(!1),null===(a=this.ArcadeWS)||void 0===a||a.close(1e3,"user_quit"),delete this.windowOnFocusAct.ArcadePIP,delete this.WindowOnBlurAct.ArcadePIP}AnonymousUserCreateName(){var s=this;return(0,F.A)(function*(){s.CallbackNakama.users.self.display_name||(s.toggleBlockMainShortcut(!0),yield new Promise(function(){var a=(0,F.A)(function*(u){let _="";const A=yield s.alertCtrl.create({header:s.lang.text.Profile.name_placeholder,inputs:[{placeholder:s.lang.text.Profile.noname_user,type:"text"}],buttons:[{text:s.lang.text.UserFsDir.OK,handler:k=>{_=k[0]}}]});A.onDidDismiss().then(()=>{s.CallbackNakama.users.self.display_name=_,s.CallbackNakama.save_profile_to_server(),u(void 0)}),A.present()});return function(u){return a.apply(this,arguments)}}()),s.toggleBlockMainShortcut(!1))})()}ClearSignals(){this.DomArcadeChatInput&&(this.DomArcadeChatInput.onfocus=null,this.DomArcadeChatInput.onblur=null,this.DomArcadeChatInput.onpaste=null),this.DomArcadeChatInput=null,this.ArcadeChatLog=null}ConvertPathToGodot(s){return`godot/app_userdata/Client/${s}`}auto_scroll_down(s){this.ArcadeChatLog||(this.ArcadeChatLog=document.getElementById("arcadeChatLog")),this.ArcadeChatLog&&setTimeout(()=>{let a=this.ArcadeChatLog.scrollHeight;a<this.ArcadeChatLog.scrollTop+this.ArcadeChatLog.clientHeight+120&&this.ArcadeChatLog.scrollTo({top:a,behavior:"smooth"})},s||0)}CreateGodotIFrameWithDuplicateAct(s,a,u,_,A){var k=this;return(0,F.A)(function*(){if(k.ArcadeLoaded&&!u.force)k.p5toast.show({text:k.lang.text.Arcade.ArcadeOpened}),null==A||A();else{try{if(s.blob)throw"\uc900\ube44\ub41c blob \uc815\ubcf4";if(!s.url)throw"\ud30c\uc77c \uc815\ubcf4\uc5d0 URL\uc774 \uc5c6\uc74c";try{s.blob=yield k.downloadWithProgressAsBlob(s.url,s.type)}catch(ae){throw ae}}catch(ae){console.log("pck \uc5f4\ub78c \uc624\ub958: ",ae)}const B=k.ConvertPathToGodot(u.path);let ee=!1;if(k.indexed.godotDB)try{yield k.indexed.GetGodotIndexedDB(),yield k.indexed.saveBlobToUserPath(s.blob,B,k.indexed.godotDB),ee=!0}catch(ae){console.log("\ub0b4\ubd80 \ud30c\uc77c \uc5c6\uc74c: ",ae)}if(yield k.CreateGodotIFrame(a,u,!0),!ee){try{yield k.indexed.GetGodotIndexedDB(),yield k.indexed.saveBlobToUserPath(s.blob,B,k.indexed.godotDB)}catch{}yield k.CreateGodotIFrame(a,u)}k.PIPableInfo.PIPableCanvas=k.godot_window.document.getElementById("canvas"),k.PIPableInfo.framerate=45,k.godot_window.onblur=k.WindowOnBlurAct.pipmode,k.godot_window.onfocus=k.windowOnFocusAct.pipmode,null==_||_(),u.force&&(k.WebRTCService.dataChannelOnMsgAct=ae=>{var pe,_e;null===(pe=k.godot_window)||void 0===pe||null===(_e=pe.webrtc_recv)||void 0===_e||_e.call(pe,ae)}),k.godot_window.start_load_pck()}})()}downloadWithProgressAsBlob(s,a,u,_){var A=this;return(0,F.A)(function*(){let B=0;const ee=s.split("/").pop(),ae=_||s;yield A.p5loading.update({id:ae,message:`${A.lang.text.Arcade.TryingDownload}: ${ee}`});const pe=function(){var _e=(0,F.A)(function*(){yield A.requestWakeLock();try{const Re=yield fetch(s,{signal:null==u?void 0:u.signal,cache:"default"}),Be=Re.headers.get("Content-Length");if(!Be)throw console.log("Content-Length not available"),`${Re.statusText} (${Re.status})`;const Le=parseInt(Be,10);let Oe=0;const ft=Re.body.getReader(),dt=[];for(;;){const{done:Yt,value:Mt}=yield ft.read();if(Yt)break;dt.push(Mt),Oe+=Mt.length;const Gt=Oe/Le;A.p5loading.update({id:ae,message:`${A.lang.text.Arcade.TryingDownload}: ${ee}: ${(100*Gt).toFixed(1)}%`,progress:Gt}),yield new Promise(It=>setTimeout(It,0))}const st=new Blob(dt,{type:a});return A.p5loading.remove(ae),st}catch{if(B<5)return B++,console.log(`Retry ${B} of 5...`),yield new Promise(Be=>setTimeout(Be,1e3)),pe();throw console.log("Max retries reached. Download failed."),A.p5loading.remove(ae),"Download failed after multiple retries."}finally{yield A.releaseWakeLock()}});return function(){return _e.apply(this,arguments)}}();return pe()})()}ToggleBackgroundMode(s){var a,u,_;this.IsBackgroundMode=null!=s?s:!this.IsBackgroundMode,null===(a=this.BackgroundAudioDiv)||void 0===a||a.remove(),this.BackgroundAudioDiv=null,null===(u=this.BGModeAudio)||void 0===u||u.pause(),null===(_=this.BGModeAudio)||void 0===_||_.remove(),this.BGModeAudio=null,this.IsBackgroundMode?(this.WindowOnBlurAct.bgmode=()=>{this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio))},this.windowOnFocusAct.bgmode=()=>{var A,k,B;this.WebRTCService.OnUse||(null===(A=this.BackgroundAudioDiv)||void 0===A||A.remove(),this.BackgroundAudioDiv=null,null===(k=this.BGModeAudio)||void 0===k||k.pause(),null===(B=this.BGModeAudio)||void 0===B||B.remove(),this.BGModeAudio=null)},this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOn,progress:null,forceEnd:1e3})):(delete this.windowOnFocusAct.bgmode,delete this.WindowOnBlurAct.bgmode,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeOff,progress:1,forceEnd:1e3}))}forceUseBackgroundMode(){return this.WindowOnBlurAct.bgmode?(this.WindowOnBlurAct.bgmode(),delete this.WindowOnBlurAct.bgmode,delete this.windowOnFocusAct.bgmode):this.WebRTCService.OnUse||(this.BackgroundAudioDiv=document.createElement("div"),this.BGModeAudio=new Audio("assets/empty.ogg"),this.BGModeAudio.hidden=!0,this.BGModeAudio.loop=!0,this.BGModeAudio.play(),this.BackgroundAudioDiv.appendChild(this.BGModeAudio)),this.IsBackgroundMode=!0,this.p5loading.update({id:"toggle_bgmode",message:this.lang.text.Arcade.BGModeIng,progress:null,forceEnd:350}),!1}CreateInfoSocket(s){this.ArcadeUserInputAddress?(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var a;null===(a=this.ArcadeWS)||void 0===a||a.send(JSON.stringify({type:"initInfo",act:"arcade",url:s}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct()):this.p5toast.show({text:this.lang.text.Arcade.NoWSAddress})}CatchWebSocketAddressFromServerInfo(s){return`${s.useSSL?"wss":"ws"}://${s.address}`}CreateArcadeWSOnMsgAct(){var s=this;const a="arcade",u=()=>{window.focus(),this.noti.Current!=a&&this.SelectArcadeTab()};this.ArcadeWS.onmessage=_=>{var A,k,B;let ee;ee="string"==typeof _.data?_.data:_.data.text();try{var ae,pe;let Be=JSON.parse(ee);switch(null===(ae=this.godot_window)||void 0===ae||null===(pe=ae.ws_recv)||void 0===pe||pe.call(ae,ee),Be.type){case"text":{let ft=Be.msg.split(" "),dt=[],st="";const Yt=this.ArcadeWSPeerId==Be.uid,Mt=Yt?Be.name?`${Be.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Be.name||this.lang.text.MinimalChat.name_stranger_group,Gt=Be.uid?(Be.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"607773":"8a6d66";for(let It=0,Dt=ft.length;It<Dt;It++)0==ft[It].indexOf("http://")||0==ft[It].indexOf("https://")?(dt.push({text:" "+st+" "}),st="",dt.push({href:!0,text:ft[It]})):st+=" "+ft[It];st&&dt.push({text:" "+st}),this.arcadeChat.logs.push({color:Gt,text:dt,target:Mt,isMe:Yt}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:Mt,body:Be.msg,smallIcon_ln:"favicon",bgcolor:Gt},a,u),this.auto_scroll_down()}break;case"file":{var _e,Re;const ft=this.ArcadeWSPeerId==Be.uid,dt=ft?Be.name?`${Be.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Be.name||this.lang.text.MinimalChat.name_stranger_group,st=Be.uid?(Be.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"607773":"8a6d66";this.arcadeChat.logs.push({color:st,file:Be,target:dt,isMe:ft}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:dt,body:this.lang.text.MinimalChat.user_send_attach,image:"image"==(null===(_e=Be.info)||void 0===_e?void 0:_e.viewer)?null===(Re=Be.info)||void 0===Re?void 0:Re.url:void 0,smallIcon_ln:"favicon",bgcolor:st},a,u),this.auto_scroll_down()}break;case"req_info":this.ArcadeWSPeerId=Be.uid,this.ArcadeJoinedChannel=Be.channel_id;const Le=Be.url;this.CacheJoinedGameInfo=JSON.stringify(Be),function(){var ft=(0,F.A)(function*(){try{var dt;s.SelectArcadeTab&&s.SelectArcadeTab();const st=yield s.downloadWithProgressAsBlob(Le,void 0);yield s.CreateArcadeFrame({blob:st}),null===(dt=s.ArcadeWS)||void 0===dt||dt.send(JSON.stringify({type:"join",channel:Be.channel_id,name:s.CallbackNakama.users.self.display_name}))}catch(st){console.log("\ube60\ub978 \uc9c4\uc785 \uc2dc\uc791 \uc624\ub958: ",st)}});return function(){return ft.apply(this,arguments)}}()();break;case"init_id":this.ArcadeJoinedChannel=Be.id,this.ArcadeWSPeerId=Be.uid,null===(A=this.afterInitAct)||void 0===A||A.call(this),this.ArcadeSocketId=Be.socketId,null===(k=this.ArcadeWS)||void 0===k||k.send(JSON.stringify({type:"join",channel:this.ArcadeJoinedChannel,name:this.CallbackNakama.users.self.display_name}));break;case"socket_react":switch(Be.act){case"WEBRTC_REPLY_INIT_SIGNAL":this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Reply),this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL(Be.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),"EOL"==Be.data_str&&(this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Offer),this.WebRTCService.CreateAnswer({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_Ice);break;case"WEBRTC_REPLY_INIT_SIGNAL_PART":this.WebRTCService.WEBRTC_REPLY_INIT_SIGNAL_PART({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_ICE_CANDIDATES":this.WebRTCService.WEBRTC_ICE_CANDIDATES(Be.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel}),this.ArcadeLoadingCtrl&&(this.ArcadeLoadingCtrl.message=this.lang.text.voidDraw.WebRTC_datachannel),null===(B=this.ArcadeWS)||void 0===B||B.send(JSON.stringify({type:"init_end",channel:this.ArcadeJoinedChannel}));break;case"WEBRTC_INIT_REQ_SIGNAL":this.WebRTCService.WEBRTC_INIT_REQ_SIGNAL({client:this.ArcadeWS,channel:this.ArcadeJoinedChannel});break;case"WEBRTC_RECEIVE_ANSWER":this.WebRTCService.WEBRTC_RECEIVE_ANSWER(Be.data_str,{client:this.ArcadeWS,channel:this.ArcadeJoinedChannel})}break;case"join":{const dt=this.ArcadeWSPeerId==Be.uid?Be.name?`${Be.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Be.name||this.lang.text.MinimalChat.name_stranger_group,st=Be.uid?(Be.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"607773":"8a6d66";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_join}],target:dt,isSystem:!0}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:this.lang.text.MinimalChat.user_join,body:dt+` | ${this.lang.text.MinimalChat.user_join_comment}`,smallIcon_ln:"favicon",bgcolor:st},a,u),this.auto_scroll_down()}break;case"leave":{const dt=this.ArcadeWSPeerId==Be.uid?Be.name?`${Be.name} (${this.lang.text.MinimalChat.name_me})`:this.lang.text.MinimalChat.name_me:Be.name||this.lang.text.MinimalChat.name_stranger_group,st=Be.uid?(Be.uid.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6):Mu?"607773":"8a6d66";this.arcadeChat.logs.push({color:st,text:[{text:" "+this.lang.text.MinimalChat.user_out}],target:dt,isSystem:!0}),this.noti.PushLocal({id:this.ArcadeOnMessageLnId,title:this.lang.text.MinimalChat.user_out,body:dt+` | ${this.lang.text.MinimalChat.user_out_comment}`,smallIcon_ln:"favicon",bgcolor:st},a,u),this.auto_scroll_down()}}}catch{}}}CreateArcadeWSCloseAct(){this.ArcadeWS.onerror=s=>{console.log("\uc544\ucf00\uc774\ub4dc \uc18c\ucf13 \uc624\ub958: ",s),this.ArcadeWS.close()},this.ArcadeWS.onclose=s=>{switch(s.reason){case"max_limit":this.p5toast.show({text:this.lang.text.MinimalChat.block});break;case"expired":this.p5toast.show({text:this.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",s.reason)}this.ArcadeSocketId=null,this.CacheJoinedGameInfo=void 0,this.ArcadeWSPeerId=null,this.ArcadeJoinedChannel=null,this.WebRTCService.close_webrtc(),this.ArcadeQRAddress=null,this.ArcadeQRCodeSRC=null,this.ArcadeWS.onopen=null,this.ArcadeWS.onmessage=null,this.ArcadeWS.onclose=null,this.afterInitAct=null,this.ArcadeWS=null}}LoadGameFile(s){const a="LoadGameFile";this.p5loading.update({id:a,message:`${this.lang.text.ContentViewer.OnLoadContent}: ${s.target.files[0].name}`}),this.indexed.saveBlobToUserPath(s.target.files[0],this.ConvertPathToGodot(this.InGameTargetPath),this.indexed.godotDB).then(A=>{var k,B;null===(k=this.godot_window)||void 0===k||null===(B=k.after_file_selected)||void 0===B||B.call(k,this.InGameTargetPath)});const _=document.getElementById("arcade_ingame_load");_&&(_.value=null),this.p5loading.update({id:a,progress:1,forceEnd:0})}OpenArcadeQRCode(){this.ArcadeObject.QRCode.onDidDismiss().then(()=>{this.RestoreShortCutAct("arcade-qrcode")}),this.StoreShortCutAct("arcade-qrcode"),this.ArcadeObject.QRCode.present()}JoinArcadeWithSocketInfo(s){this.ArcadeWSAddress=s.address,this.ArcadeSquarePort=s.square_port,this.ArcadeCdnPort=s.cdn_port,this.ArcadeFilePort=s.apache_port,this.ArcadeSocketId=s.socketId,this.ArcadeWS?this.p5toast.show({text:this.lang.text.Arcade.AlreadyUseWS}):(this.ArcadeWS=new WebSocket(`${this.ArcadeWSAddress}:${this.ArcadeSquarePort||12013}`),this.ArcadeWS.onopen=()=>{var a;null===(a=this.ArcadeWS)||void 0===a||a.send(JSON.stringify({type:"reqInfo",socketId:this.ArcadeSocketId}))},this.CreateArcadeWSOnMsgAct(),this.CreateArcadeWSCloseAct())}req_file_part_base64(s,a,u){var _=this;return(0,F.A)(function*(){const A=s.contents,k=a*_h,B=Math.min(A.size,(a+1)*_h),ae=yield A.slice(k,B).arrayBuffer(),pe=new Uint8Array(ae);let _e="";for(let Be=0;Be<pe.length;Be++)_e+=String.fromCharCode(pe[Be]);const Re=btoa(_e);return _.indexed.saveTextFileToUserPath(JSON.stringify({type:"upload",index:a}),`${u}.history`),Re})()}save_file_part(s,a,u){this.indexed.saveBase64ToUserPath(","+u,`${s}_part/${a}.part`),this.indexed.saveTextFileToUserPath(JSON.stringify({type:"download",index:a}),`${s}.history`)}remove_req_file_info(s,a){delete s.content.transfer_index,this.indexed.removeFileFromUserPath(`${a}.history`)}modulate_thumbnail(s,a,u){var _=this;return(0,F.A)(function*(){try{const A=yield _.indexed.loadBlobFromUserPath(`${s.path}_thumbnail.png`,"image/png"),k=URL.createObjectURL(A);return s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(k),void setTimeout(()=>{URL.revokeObjectURL(k),a&&URL.revokeObjectURL(a)},100)}catch{}switch(s.viewer){case"image":try{if(s.size>1e6)return;if(!s.url)throw"No URL";if(s.thumbnail)return;if(!(yield fetch(s.url,{method:"HEAD",signal:null==u?void 0:u.signal})).ok)throw"Not ok";s.thumbnail=s.url}catch{if(a)s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(a);else if(s.size<1e6){const k=yield _.indexed.loadBlobFromUserPath(`${s.path}`,"image/png"),B=URL.createObjectURL(k);s.thumbnail=_.sanitizer.bypassSecurityTrustUrl(B),setTimeout(()=>{URL.revokeObjectURL(B),a&&URL.revokeObjectURL(a)},100)}}break;case"text":if(s.url){const A=yield fetch(s.url,{signal:null==u?void 0:u.signal}).then(k=>k.text());s.text=A.substring(0,45).split("\n")}else new Rt(A=>{A.setup=()=>{A.noCanvas(),A.loadStrings(a,k=>{const ee=k.join("\n").substring(0,45);s.text=ee.split("\n"),URL.revokeObjectURL(a),A.remove()},k=>{console.log("\ud14d\uc2a4\ud2b8 \uc5f4\ub78c \ubd88\uac00: ",k),s.text=[_.lang.text.ChatRoom.downloaded],URL.revokeObjectURL(a),A.remove()})}})}a&&setTimeout(()=>{URL.revokeObjectURL(a)},100)})()}set_viewer_category(s){try{if(this.set_viewer_category_from_ext(s),"disabled"==s.viewer)if(0==s.type.indexOf("image/"))s.viewer="image";else if(0==s.type.indexOf("audio/"))s.viewer="audio";else if(0==s.type.indexOf("video/"))s.viewer="video";else{if(0!=s.type.indexOf("text/"))throw"\uc790\ub3d9\uc9c0\uc815\ub418\uc9c0 \uc54a\uc740 \ud0c0\uc785";s.viewer="text"}}catch(a){console.log("\ubd88\ud655\uc2e4\ud55c \ud0c0\uc785 \uc9c0\uc815: ",a,"/ type: ",s.type)}}set_viewer_category_from_ext(s){switch(s.file_ext){case"obj":case"stl":case"glb":case"vrm":case"gltf":s.viewer="model";break;case"pck":s.viewer="godot";break;case"png":case"jpeg":case"jpg":case"webp":case"gif":case"svg":s.viewer="image";break;case"wav":case"ogg":case"mp3":case"aac":s.viewer="audio";break;case"mp4":case"ogv":s.viewer="video";break;case"webm":try{s.viewer=0==s.type.indexOf("video/")?"video":"audio"}catch(a){console.log("\ud30c\uc77c \ud655\uc7a5\uc790 \uac80\ud1a0 \uc624\ub958: ",a,"/",s),s.viewer="disabled"}break;case"sh":case"c":case"cs":case"ts":case"js":case"cc":case"php":case"h":case"cpp":case"rs":case"java":case"gd":case"shader":case"py":case"ino":case"pde":case"asm":case"bas":case"pas":case"asp":case"html":case"xml":case"css":case"scss":case"pl":case"md":case"markdown":case"prop":case"properties":case"json":case"yml":s.viewer="code";break;case"srt":case"csv":case"conf":case"log":case"txt":case"gitignore":s.viewer="text";break;case"pdf":s.viewer="pdf";break;default:s.viewer="disabled"}}GetBase64ThroughFileReader(s){return new Promise((a,u)=>{var _;let A=new FileReader;A=null!==(_=A._realReader)&&void 0!==_?_:A,A.onload=k=>{A.onload=null,A.onerror=null,a(k.target.result.replace(/"|\\|=/g,""))},A.onerror=k=>{A.onload=null,A.onerror=null,u(k)},A.readAsDataURL(s)})}Base64ToBlob(s,a=""){const u=atob(s.split(",")[1]),_=new ArrayBuffer(u.length),A=new Int8Array(_);for(let B=0,ee=u.length;B<ee;B++)A[B]=u.charCodeAt(B);return new Blob([A],{type:a})}upload_file_to_storage(s,a,u,_,A,k,B){var ee=this;return(0,F.A)(function*(){const ae=k||`upload_file_to_storage_${Date.now()}`;ee.userSetWakelock||(yield ee.requestWakeLock(!0));let _e,Re,pe=!1;A&&(_e=yield ee.try_upload_to_user_custom_fs(s,null==a?void 0:a.user_id,ae,B));try{var Be;if(_e)throw pe=!0,"\uc0ac\uc6a9\uc790 \uc9c0\uc815\uc11c\ubc84\uc5d0\uc11c \uc774\ubbf8 \uc131\uacf5\ud568";const Le=(new Date).getTime(),ft=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),dt=s.override_name||`${null==a?void 0:a.user_id.replace(/\//g,"_")}_${Le}_${ft}.${s.file_ext}`,st=null!==(Be=s.override_path)&&void 0!==Be?Be:`${null==a?void 0:a.user_id}/${Le}`.replace(/_/g,"/");_e=`${u}//${_}:${(null==a?void 0:a.apache_port)||9002}/cdn/`;const Yt=dt.replace(/\//g,"_");Re=setInterval((0,F.A)(function*(){try{const bn=yield fetch(`${u}//${_}:${(null==a?void 0:a.cdn_port)||9001}/filesize/${Yt}`,{method:"POST"}),Kn=Number(yield bn.text())/s.size,rr=Math.floor(100*Kn);ee.p5loading.update({id:ae,message:`${B?B+": ":""}${s.filename}: ${rr||0}%`,progress:Kn})}catch(bn){console.log("\ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",bn),clearInterval(Re)}}),700);let Mt=new FormData;const Gt=new File([s.blob],dt);Mt.append("files",Gt),Mt.append("path",st),Mt.append("filename",s.override_filename||`${ft}.${s.file_ext}`);let tn=yield fetch(`${u}//${_}:${(null==a?void 0:a.cdn_port)||9001}/cdn/${dt}`,{method:"POST",body:Mt});if(_e+=(yield tn.text()),!tn.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";ee.p5loading.update({id:ae,message:`${B?B+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(Re);const Dt=yield fetch(_e,{method:"HEAD"});if(k||ee.p5loading.remove(ae),!Dt.ok)throw"\uc694\uccad \uc2e4\ud328";pe=!0}catch(Le){clearInterval(Re),ee.p5loading.update({id:ae,message:`${ee.lang.text.GlobalAct.CancelingUpload}: ${s.filename}`,forceEnd:350}),console.log("cdn \ud30c\uc77c \uc5c5\ub85c\ub4dc \ub2e8\uacc4 \uc2e4\ud328:",Le)}return ee.userSetWakelock||(yield ee.releaseWakeLock(!0)),pe?_e:void 0})()}remove_file_from_storage(s,a){return(0,F.A)(function*(){try{let u=s.split("/cdn/");const _=u.pop();let A=u.shift(),k=new FormData;k.append("uuid",a.user_id),k.append("path",_);const B=A.lastIndexOf(":");B>5&&(A=A.substring(0,B)),yield fetch(`${A}:${(null==a?void 0:a.cdn_port)||9001}/remove/`,{method:"POST",body:k})}catch(u){console.log("remove_file_from_storage: ",u)}})()}remove_files_from_storage_with_key(s,a,u){return(0,F.A)(function*(){try{if(!s)throw"\ub300\uc0c1 \uc8fc\uc18c \uc5c6\uc74c";const _=s.lastIndexOf(":");_>5&&(s=s.substring(0,_));let A=new FormData;A.append("uuid",u.user_id),A.append("target_id",a),yield fetch(`${s}:${(null==u?void 0:u.cdn_port)||9001}/remove_key/`,{method:"POST",body:A})}catch(_){throw console.log("remove_files_from_storage_with_key: ",_),_}})()}try_upload_to_user_custom_fs(s,a,u,_,A){var k=this;return(0,F.A)(function*(){var B;const ee=u||`try_upload_to_user_custom_fs_${Date.now()}`;yield k.p5loading.update({id:ee,message:`${k.lang.text.Settings.TryToFallbackFS}: ${s.filename}`,progress:null}),k.userSetWakelock||(yield k.requestWakeLock(!0));const ae=(new Date).getTime(),_e=s.filename.replace(/[\/\\:*?"<>|#&?%+\s]/g,"_").substring(0,s.filename.lastIndexOf(".")),Re=s.override_name||`${a.replace(/\//g,"_")}_${ae}_${_e}.${s.file_ext}`,Be=null!==(B=s.override_path)&&void 0!==B?B:`${a}/${ae}`.replace(/_/g,"/");let Le=new FormData;const Oe=new File([s.blob],Re);let ft;Le.append("files",Oe),Le.append("path",Be),Le.append("filename",s.override_filename||`${_e}.${s.file_ext}`),A||(A=localStorage.getItem("fallback_fs"));try{if(!A)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";const dt=A.split(","),st=dt.shift(),Yt=dt.shift(),Mt=dt.shift(),Gt=st.split("://"),tn=Gt.pop();let It=Gt.shift();It?It+=":":It=k.checkProtocolFromAddress(tn)?"https:":"http:";let Dt=`${It}//${tn}:${Mt||9002}/cdn`;const bn=Re.replace(/\//g,"_");ft=setInterval((0,F.A)(function*(){try{const wr=yield fetch(`${It}//${tn}:${Yt||9001}/filesize/${bn}`,{method:"POST"}),Hr=Number(yield wr.text())/s.size,cr=Math.floor(100*Hr);k.p5loading.update({id:ee,message:`${_?_+": ":""}${s.filename}: ${cr||0}%`,progress:Hr})}catch(wr){console.log("FFS \ud30c\uc77c \ud06c\uae30 \uce21\uc815 \uc624\ub958: ",wr),clearInterval(ft)}}),700);const Yn=yield fetch(`${It}//${tn}:${Yt||9001}/cdn/${Re}`,{method:"POST",body:Le});if(Dt+=(yield Yn.text()),!Yn.ok)throw"\uc5c5\ub85c\ub4dc \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328";k.p5loading.update({id:ee,message:`${_?_+": ":""}${s.filename}: 100%`,progress:1}),clearInterval(ft);const rr=yield fetch(Dt,{method:"HEAD"});if(u||k.p5loading.remove(ee),rr.ok)return Dt;throw"\uc694\uccad \uc2e4\ud328"}catch{return clearInterval(ft),void k.p5loading.remove(ee)}finally{k.userSetWakelock||(yield k.releaseWakeLock(!0))}})()}GetHrefThumbnail(s,a,u){var _=this;return(0,F.A)(function*(){let A=null;0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(_.checkProtocolFromAddress(s)?"https://":"http://")+s);try{let B=localStorage.getItem("fallback_fs").split("://"),ee=B.shift(),pe=B.pop().split(":").pop();if(!pe)throw"\uc9c0\uc815\ub41c FFS \uc5c6\uc74c";let _e=yield fetch(`${ee||_.checkProtocolFromAddress(pe)?"https":"http"}://${pe}:9001/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!_e.ok)throw"FFS \uc6b0\ud68c \uc2e4\ud328";A=yield _e.json()}catch{if(!a)throw"\ub300\uc0c1 \uc11c\ubc84 \uc5c6\uc74c";try{const B=yield fetch(`${a}/get-page-info?url=${encodeURIComponent(s)}`,{signal:u.signal});if(!B.ok)throw`${B.statusText} (${B.status})`;A=yield B.json()}catch(B){console.log("GetHrefThumbnail: ",B)}}return A})()}checkProtocolFromAddress(s){return s.indexOf("localhost")<0&&!!s.replace(/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/g,"")}load_openmodel_file(s,a,u,_,A){var k=this;return(0,F.A)(function*(){return yield new Promise((B,ee)=>{const ae=_.createDiv();ae.style("width","100%"),ae.style("height","100%"),ae.parent(s);const pe=_.createDiv();pe.style("position","absolute"),pe.style("top","0px"),pe.style("right","0px"),pe.style("margin","8px"),pe.style("display","flex"),pe.style("width","fit-content"),pe.style("flex-direction","column"),pe.style("gap","8px"),pe.parent(s);const _e=_r=>{_r.style("padding","8px"),_r.style("border-radius","8px"),_r.style("size","16px"),_r.style("width","100%"),_r.style("background-color","#888b"),_r.style("color","white")};let Re;const Be=_.createButton(k.lang.text.GlobalAct.ToggleWireframe);_e(Be),Be.mouseClicked(()=>{var _r;null===(_r=Re)||void 0===_r||_r()}),Be.parent(pe);let Le=[],Oe=!1;const ft=_.createDiv();ft.style("overflow","hidden"),ft.style("width","100%"),ft.style("height","fit-content"),ft.style("border-radius","8px"),ft.parent(pe);const dt=_.createDiv();dt.style("display","flex"),dt.style("width","100%"),dt.style("height","fit-content"),dt.style("max-height","160px"),dt.style("overflow-y","auto"),dt.style("flex-direction","column"),dt.style("gap","0px"),dt.parent(ft);const st=_.createButton(k.lang.text.GlobalAct.ToggleObjVisible);let Yt;st.style("background-color","#888b"),st.style("color","white"),st.style("padding","8px"),st.parent(dt),st.mouseClicked(()=>{Oe=!Oe;for(let _r=0,Dr=Le.length;_r<Dr;_r++)Oe?Le[_r].show():Le[_r].hide()});const Mt=_.createButton(k.lang.text.GlobalAct.ToggleSkeleton);_e(Mt),Mt.mouseClicked(()=>{var _r;null===(_r=Yt)||void 0===_r||_r()}),Mt.parent(pe),Mt.hide();const Gt=_.createDiv();Gt.style("position","absolute"),Gt.style("top","0px"),Gt.style("left","0px"),Gt.style("margin","8px"),Gt.style("display","flex"),Gt.style("width","fit-content"),Gt.style("flex-direction","column"),Gt.style("gap","2px"),Gt.style("pointer-events","none"),Gt.style("color","white"),Gt.parent(s);const tn=_.createDiv();tn.parent(Gt);const It=_.createDiv();It.parent(Gt);const Dt=_.createDiv();Dt.parent(Gt);let bn,Yn=[],Kn=!1;const wr=A||"openmodel",nr=s.clientWidth,Hr=s.clientHeight,cr=new ko(70,nr/Hr,.01,50);cr.position.set(1,1,3),cr.lookAt(new St);const Yr=new Jo,fi=new kr(4473924);Yr.background=fi;const Oi=new Lv(16777215,1);Yr.add(Oi);const as=new Ig(10,10,12303291);Yr.add(as);const Ts=new I1(1);Yr.add(Ts);const Tr=new kv(16777215,3);Tr.position.set(5,5,5),Yr.add(Tr),Tr.shadow.bias=-.005,Tr.shadow.mapSize.width=512,Tr.shadow.mapSize.height=512;const ti=new Rg(Tr,2);let ri,Gi;switch(Yr.add(ti),new my(cr,ae.elt).autoRotate=!0,a.file_ext){case"obj":ri=new $_;break;case"stl":ri=new H_;break;default:ri=new xx}ri.load(u,_r=>{let Dr;switch(k.p5loading.remove(wr),a.file_ext){case"obj":Dr=_r,Yr.add(Dr),Mt.remove();break;case"stl":const Di=new ga({color:22015});Dr=new ks(_r,Di),Yr.add(Dr),Mt.remove();break;default:Dr=_r.scene,Yr.add(Dr);let Vr=!1;Dr.traverse(yi=>{yi.isSkinnedMesh&&(Vr=!0)}),Vr?(Mt.show(),Gi=new Dg(Dr),Gi.visible=!1,Yr.add(Gi),Yt=()=>{Gi.visible=!Gi.visible,Mt.style("background-color",Gi.visible?"var(--toast-background-color)":"#888b")}):Mt.remove(),_r.animations&&_r.animations.length>0&&(bn=new Kv(Dr),(_r=>{const Dr=_.createDiv();Dr.style("overflow","hidden"),Dr.style("width","100%"),Dr.style("height","fit-content"),Dr.style("border-radius","8px"),Dr.parent(pe);const dn=_.createDiv();dn.style("display","flex"),dn.style("width","100%"),dn.style("height","fit-content"),dn.style("max-height","160px"),dn.style("overflow-y","auto"),dn.style("flex-direction","column"),dn.style("gap","0px"),dn.style("size","16px"),dn.parent(Dr);const Di=_.createButton(k.lang.text.GlobalAct.PlayAnim);Di.style("background-color","#888b"),Di.style("color","white"),Di.style("padding","8px"),Di.parent(dn),Di.mouseClicked(()=>{Kn=!Kn;for(let Vr=0,yi=Yn.length;Vr<yi;Vr++)Kn?Yn[Vr].show():Yn[Vr].hide()});for(let Vr=0,yi=_r.length;Vr<yi;Vr++){const qr=_.createButton(_r[Vr].name);qr.style("background-color","#666b"),qr.style("color","white"),qr.style("padding","8px"),qr.mouseClicked(()=>{bn.stopAllAction(),Yn.forEach(ui=>ui.style("background-color","#666b"));const qi=bn.clipAction(_r[Vr]);qr.style("background-color","var(--toast-background-color)"),qi.play()}),qr.hide(),qr.parent(dn),Yn.push(qr)}})(_r.animations))}{let Di=0,Vr=0,yi=0,qr=[];Yr.traverse(qi=>{if(qi.isMesh){Di++,qr.push(qi);const ui=qi.geometry;ui.isBufferGeometry?(Vr+=ui.attributes.position.count,yi+=ui.index?ui.index.count/3:ui.attributes.position.count/3):ui.isGeometry&&(Vr+=ui.vertices.length,yi+=ui.faces.length)}});for(let qi=0,ui=qr.length;qi<ui;qi++){const ln=_.createButton(qr[qi].name);ln.style("background-color","#666b"),ln.style("color","white"),ln.style("padding","8px"),ln.mouseClicked(()=>{qr[qi].visible=!qr[qi].visible,ln.style("background-color",qr[qi].visible?"#666b":"var(--toast-background-color)")}),ln.hide(),ln.parent(dt),Le.push(ln)}tn.html(`Objects: ${Di}`),It.html(`Vertices: ${Vr}`),Dt.html(`Triangles: ${yi}`)}Re=()=>{let Di;Dr.traverse(Vr=>{Vr.isMesh&&(Vr.material.wireframe=!Vr.material.wireframe,Di=Vr.material.wireframe)}),Be.style("background-color",Di?"var(--toast-background-color)":"#888b")},B({resized:()=>{try{hs.setSize(0,0),cr.aspect=s.clientWidth/s.clientHeight,cr.updateProjectionMatrix(),hs.setSize(s.clientWidth,s.clientHeight)}catch(Di){console.log("\ubaa8\ub378\ud30c\uc77c_\ud654\uba74 \ud06c\uae30 \ubcc0\uacbd \uc624\ub958: ",Di)}},snapshot:()=>hs.domElement.toDataURL("image/png"),cleanup:()=>{for(hs.setAnimationLoop(null);Yr.children.length>0;)Yr.remove(Yr.children[0]);hs.dispose(),hs.domElement=null},canvas:hs.domElement,setpipinfo:()=>k.SetPIPableInfo(hs.domElement)})},_r=>{const Dr=_r.loaded/_r.total;k.p5loading.update({id:wr,message:`${k.lang.text.ContentViewer.OnLoadContent}: ${a.filename||a.name} (${Math.floor(100*Dr)}%)`,progress:Dr})},_r=>{k.p5loading.update({id:wr,message:`${k.lang.text.ContentViewer.OnFailedLoadContent}: ${(_r.statusText?`${_r.statusText}(${_r.status})`:_r.status)||_r}`,progress:null,forceEnd:500}),ee(_r)});let Hs=0;const hs=new v_({antialias:!0,preserveDrawingBuffer:!0});hs.setSize(nr,Hr),hs.setAnimationLoop(_r=>{var Dr;const dn=(_r-Hs)/1e3;Hs=_r,null===(Dr=bn)||void 0===Dr||Dr.update(dn),hs.render(Yr,cr)}),hs.shadowMap.enabled=!0,hs.shadowMap.type=S,ae.elt.appendChild(hs.domElement)})})()}StoreShortCutAct(s){this.CacheShortCut[s]=this.p5KeyShortCut,this.p5KeyShortCut={}}GetConnectedAddress(){return`${location.protocol}//${location.host}${window.sub_path}`}GetHeaderAddress(){var s=this;return(0,F.A)(function*(){let a;try{let u=s.GetConnectedAddress(),_=new AbortController;const A=setTimeout(()=>{_.abort("\uc8fc\uc18c \uac80\ud1a0 \uc2dc\uac04 \ucd08\uacfc"),_=null},250);let k=yield fetch(u,{method:"HEAD",signal:_.signal});if(clearTimeout(A),!k.ok)throw"\uc8fc\uc18c \uc5c6\uc74c";a=u}catch{a=s.CustomLocalAddress||"https://is2you2.github.io/pjcone_pwa/"}return a})()}RestoreShortCutAct(s){this.CacheShortCut[s]&&Object.keys(this.CacheShortCut[s]).length&&(this.p5KeyShortCut=this.CacheShortCut[s]),delete this.CacheShortCut[s]}ClearShortCutAct(){let s=Object.keys(this.CacheShortCut);for(let a of s)delete this.CacheShortCut[a]}from_camera(s,a,u){var _=this;return(0,F.A)(function*(){const A=u||`from_camera_${Date.now()}`;let k={};_.p5loading.update({id:A,message:_.lang.text.ChatRoom.LoadImageFromCamera});try{const B=yield I.getPhoto({quality:90,resultType:C.Base64,source:Z.Camera});k.filename=`Camera_${(new Date).toLocaleString().replace(/[:|.|\/]/g,"_")}.${B.format}`,k.file_ext=B.format,k.base64="data:image/jpeg;base64,"+B.base64String,_.p5loading.update({id:A,image:k.base64}),k.thumbnail=_.sanitizer.bypassSecurityTrustUrl(k.base64),k.type=`image/${B.format}`,k.typeheader="image",k.content_related_creator=[{user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"camera"}],k.content_creator={user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"camera"},k.path=`${s}${k.filename}`,k.viewer="image";let ae=yield _.indexed.saveBase64ToUserPath(k.base64,k.path);k.blob=new Blob([ae],{type:k.type}),k.size=k.blob.size}catch(B){throw _.p5loading.update({id:A,message:`${_.lang.text.GlobalAct.ErrorFromCamera}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`,image:null,forceEnd:350}),console.log("\uce74\uba54\ub77c \ud589\ub3d9 \uc2e4\ud328: ",B),B}return _.p5loading.remove(A),k})()}download_file(s,a){var u=this;return(0,F.A)(function*(){const _=`download_file_${a||Date.now()}`;if(yield u.p5loading.update({id:_,message:`${u.lang.text.ContentViewer.Download}: ${s.filename||s.name}`,forceEnd:null}),yield u.indexed.checkIfFileExist(s.alt_path||s.path))u.indexed.DownloadFileFromUserPath(s.alt_path||s.path,s.type,s.filename||s.name);else if(s.url)try{const k=yield u.downloadWithProgressAsBlob(s.url,s.type,void 0,_),B=URL.createObjectURL(k);let ee=document.createElement("a");ee.target="_blank",ee.href=B,ee.download=s.filename||s.name,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),ee.remove(),URL.revokeObjectURL(B)}catch(k){console.log("\ub2e4\uc6b4\ubc1b\uae30 \uc2e4\ud328: ",k),u.p5toast.show({text:`${s.filename||s.name} ${u.lang.text.Nakama.FailedDownload}: ${(k.statusText?`${k.statusText}(${k.status})`:k.status)||k}`,lateable:!0})}u.p5loading.remove(_)})()}selected_blobFile_callback_act(s,a,u,_="loaded",A=[]){let k={};return k.filename=s.name,k.file_ext=s.name.split(".").pop()||s.type||this.lang.text.ChatRoom.unknown_ext,k.size=s.size,k.type=s.type||s.type_override,k.path=`${a}${k.filename}`,k.blob=s,k.content_related_creator=[...A],k.content_related_creator.length<2&&k.content_related_creator.push({user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_}),k.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:_},this.set_viewer_category(k),k}voidDraw_fileAct_callback(s,a,u,_){var A=this;return(0,F.A)(function*(){let k={};k.filename=s.data.name,k.file_ext=s.data.file_ext||"png",k.type=s.data.type||"image/png",k.viewer="image",_?(k.content_related_creator=_,k.content_creator={user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}):(k.content_related_creator=[{user_id:u.user_id,timestamp:(new Date).getTime(),display_name:u.display_name,various:"voidDraw"}],k.content_creator={timestamp:(new Date).getTime(),display_name:A.CallbackNakama.users.self.display_name,various:"voidDraw"}),k.typeheader="image",k.path=`${a}${k.filename}`;const B=URL.createObjectURL(s.data.img);k.thumbnail=A.sanitizer.bypassSecurityTrustUrl(B),yield A.indexed.saveBlobToUserPath(s.data.img,k.path);const ee=new Blob([s.data.img],{type:k.type});return k.blob=new File([ee],s.data.name,{type:k.type}),k.size=k.blob.size,A.p5loading.remove(s.data.loadingCtrl),setTimeout(()=>{URL.revokeObjectURL(B)},2500),k})()}TextEditorNewFileName(){let s=new Date;return`texteditor_${s.getUTCFullYear()}-${("0"+(s.getMonth()+1)).slice(-2)}-${("0"+s.getDate()).slice(-2)}_${("0"+s.getHours()).slice(-2)}-${("0"+s.getMinutes()).slice(-2)}-${("0"+s.getSeconds()).slice(-2)}.txt`}TextEditorAfterAct(s,a){let u={};return"html"===(u.content_creator={user_id:a.user_id,timestamp:(new Date).getTime(),display_name:a.display_name,various:"textedit"},u.content_related_creator=[],u.content_related_creator.push(u.content_creator),u.blob=s.blob,u.path=s.path,u.size=s.blob.size,u.filename=s.blob.name||this.TextEditorNewFileName(),u.file_ext=u.filename.split(".").pop(),u.viewer="text",u.file_ext)?(u.type="text/html",u.viewer="code"):u.type="text/plain",u.typeheader="text",u}open_custom_site(s,a){try{let k,u=s.split("://"),A=u.pop().split(":");A.length>1&&A.pop();try{k="https"==u[0]||"wss"==u[0]}catch{k=this.checkProtocolFromAddress(A[0])}A[0]="//"+A[0],A.unshift(k?"https":"http"),window.open(A.join(":")+`:${a||9001}`,"_blank","noopener,noreferrer")}catch{}}open_link(s){0!=s.indexOf("https://")&&0!=s.indexOf("http://")&&(s=(this.checkProtocolFromAddress(s)?"https://":"http://")+s),s&&window.open(s,"_blank","noopener,noreferrer");const a=document.activeElement;a&&a.blur()}GetValueFromClipboard(s){var a=this;return(0,F.A)(function*(){let u={type:"text/plain",value:""};const _=s||"clipboardAct";yield a.p5loading.update({id:_,message:a.lang.text.GlobalAct.ClipboardPaste,image:null,forceEnd:null});try{const A=yield navigator.clipboard.read();for(let k of A)for(let B of k.types){let ee=yield k.getType(B);if("image/png"==B){u.type=B;let ae=new File([ee],"image.png",{type:B});u.value=ae;const pe=URL.createObjectURL(ae);a.p5loading.update({id:_,image:pe}),setTimeout(()=>{URL.revokeObjectURL(pe)},100);break}if("text/plain"==B){u.type=B,u.value=yield ee.text();break}}return a.p5loading.remove(_),u}catch(A){return console.error("\ud074\ub9bd\ubcf4\ub4dc\uc5d0\uc11c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",A),a.p5toast.show({text:`${a.lang.text.GlobalAct.FailedToReadClipboard}: ${(A.statusText?`${A.statusText}(${A.status})`:A.status)||A}`}),u.type="error",u.value=A,a.p5loading.remove(_),u}})()}WriteValueToClipboard(s,a,u,_){var A=this;return(0,F.A)(function*(){if(!a)return;const k=_||"clipboardAct";yield A.p5loading.update({id:k,message:A.lang.text.GlobalAct.ClipboardCopy,image:null,forceEnd:null});try{let B={},ee=a;switch(s){case"text/plain":ee=new Blob([a],{type:s}),a=A.truncateString(A.HTMLEncode(a),80);break;default:if(!(s.indexOf("image/")>=0))break;{const pe=yield createImageBitmap(ee),_e=document.createElement("canvas");_e.width=Math.min(2*window.innerWidth,1024),_e.height=pe.height/pe.width*_e.width,_e.getContext("2d").drawImage(pe,0,0,_e.width,_e.height),ee=yield new Promise(Be=>{_e.toBlob(Le=>Be(Le),"image/png")}),s="image/png"}case"image/png":const ae=URL.createObjectURL(ee);A.p5loading.update({id:k,image:ae}),setTimeout(()=>{URL.revokeObjectURL(ae)},100)}B[s]=ee,yield navigator.clipboard.write([new ClipboardItem(B)]),A.p5loading.update({id:k,message:`${A.lang.text.GlobalAct.PCClipboard}: ${u||a}`}),A.p5loading.remove(k)}catch(B){throw console.log("\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ud558\uae30 \uc624\ub958: ",B),A.p5toast.show({text:`${A.lang.text.GlobalAct.ClipboardFailed}: ${(B.statusText?`${B.statusText}(${B.status})`:B.status)||B}`}),A.p5loading.update({id:k,forceEnd:350}),B}})()}truncateString(s,a){return(null==s?void 0:s.length)>a?s.slice(0,a-1)+"\u2026":s}HTMLEncode(s){let a=(s=[...s]).length,u=[];for(;a--;){let _=s[a].codePointAt(0);u[a]=_<65||_>127||_>90&&_<97?"&#"+_+";":s[a]}return u.join("")}HTMLDecode(s){const a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};return(s=s.replace(/&[a-zA-Z]+;/g,u=>a[u]||u)).replace(/&#(\d+);/g,(u,_)=>String.fromCodePoint(Number(_)))}StopAndSaveVoiceRecording(){var s=this;return(0,F.A)(function*(){try{let a=yield D.R.stopRecording();s.useVoiceRecording=null;let u=s.Base64ToBlob(`${a.value.mimeType},${a.value.recordDataBase64}`);return u.name=`${s.lang.text.ChatRoom.VoiceRecord}.${a.value.mimeType.split("/").pop().split(";")[0]}`,u.type_override=a.value.mimeType,u}catch(a){throw s.useVoiceRecording=null,s.p5toast.show({text:`${s.lang.text.AddPost.FailedToSaveVoice}:${(a.statusText?`${a.statusText}(${a.status})`:a.status)||a}`}),a}})()}InstantCallSend(s){this.InstantCallWSClient&&this.InstantCallWSClient.readyState==this.InstantCallWSClient.OPEN&&this.InstantCallWSClient.send(s)}ActLikeModal(s,a){var u=this;return(0,F.A)(function*(){yield u.RemoveAllModals(),u.navCtrl.navigateForward(s,{animation:rn.V5,state:a})})()}subscribeToPush(s){var a=this;return(0,F.A)(function*(){return yield(yield navigator.serviceWorker.register(`${window.sub_path}assets/sw.js`)).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a.urlBase64ToUint8Array(s)})})()}urlBase64ToUint8Array(s){const u=(s+"=".repeat((4-s.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_=atob(u);return new Uint8Array([..._].map(A=>A.charCodeAt(0)))}unsubscribeFromPush(s){return(0,F.A)(function*(){const a=yield navigator.serviceWorker.getRegistration(`${window.sub_path}assets/sw.js`);if(!a)return;const u=yield a.pushManager.getSubscription();u?(yield u.unsubscribe())?yield fetch(`${s}/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:u.endpoint})}):console.warn("\uad6c\ub3c5 \ucde8\uc18c \uc2e4\ud328"):console.log("\ud604\uc7ac \ud478\uc2dc \uad6c\ub3c5 \uc5c6\uc74c")})()}CheckIfCanBlankSocketAddress(s){let a=this.CustomLocalAddress.split("://");const u=a.pop().split("/")[0].split(":")[0];let _=a.pop()||this.checkProtocolFromAddress(u),A=s.split("://");const k=A.pop();let B=A.pop()||this.checkProtocolFromAddress(k);return("https"==_&&"wss"==B||"http"==_&&"ws"==B)&&u==k?"":s}loadAdSense(){return new Promise(s=>{if(window.adsbygoogle)return void s();const a=document.createElement("script");a.async=!0,a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6577630868247944",a.crossOrigin="anonymous",a.onload=()=>s(),document.head.appendChild(a)})}pushAdOnce(){if(!this.isAdPushed&&window.adsbygoogle&&document.querySelector("ins.adsbygoogle")){try{window.adsbygoogle.push({})}catch(s){console.log(s)}this.isAdPushed=!0}}}return(v=t).\u0275fac=function(s){return new(s||v)(ru.KVO(vh.W3),ru.KVO(Ux.G),ru.KVO(Bx.y),ru.KVO(Vx.up),ru.KVO(Gx.n),ru.KVO(vh.hG),ru.KVO(Fx.q9),ru.KVO(zx.f),ru.KVO($x.r))},v.\u0275prov=ru.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}),t})()},755:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{n:()=>l});var F=Ge(467),j=Ge(3953),Rt=Ge(9900),rn=Ge(4234);let l=(()=>{var be;class Z{constructor(C,b){this.p5toast=C,this.lang=b,this.PortalTabCallback=[]}RunInitCallBacks(){for(;this.PortalTabCallback.length;){const C=this.PortalTabCallback.shift();null==C||C()}}initialize(C=(()=>{})){if(this.ionicDB)return this.RunInitCallBacks(),void C();let b=indexedDB.open("/ionicfs",10),w=()=>{b.onsuccess=null,b.onupgradeneeded=null,b.onerror=null};b.onsuccess=I=>{I.target.result.close(),indexedDB.open("/ionicfs",11).onsuccess=f=>{this.ionicDB=f.target.result,this.RunInitCallBacks(),C(),w()}},b.onupgradeneeded=I=>{I.target.result.createObjectStore("FILE_DATA")},b.onerror=I=>{indexedDB.open("/ionicfs",11).onsuccess=d=>{this.ionicDB=d.target.result,this.RunInitCallBacks(),C(),w()}}}GetGodotIndexedDB(){var C=this;return(0,F.A)(function*(){if(!C.godotDB)return new Promise((b,w)=>{let I=indexedDB.open("/userfs",21),D=()=>{I.onsuccess=null,I.onerror=null};I.onsuccess=d=>{C.godotDB=I.result,D(),b(void 0)},I.onerror=d=>{console.error("IndexedDB initialized failed: ",d),D(),w(d)}})})()}createRecursiveDirectory(C,b=this.ionicDB){let w=C.lastIndexOf("/"),I=C.substring(0,w);I&&this.checkIfFileExist(I).then(D=>{if(D)return void this.createRecursiveDirectory(I,b);let d=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${I}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),this.createRecursiveDirectory(I,b),f()},d.onerror=h=>{console.error("IndexedDB createRecursiveDirectory failed: ",h),f()}})}createDirectory(C){return new Promise((b,w)=>{this.checkIfFileExist(C).then(I=>{I&&w(this.lang.text.UserFsDir.AlreadyExistFolder);let D=this.ionicDB.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:16893},`/userfs/${C}`),d=()=>{D.onsuccess=null,D.onerror=null};D.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",C),d(),b(void 0)},D.onerror=f=>{console.error("IndexedDB createRecursiveDirectory failed: ",f),d(),w(f)}})})}saveTextFileToUserPath(C,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:(new TextEncoder).encode(C)},`/userfs/${b}`),f=()=>{d.onsuccess=null,d.onerror=null};d.onsuccess=h=>{"success"!=h.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),f(),I(h)},d.onerror=h=>{f(),D(h)}})}saveBase64ToUserPath(C,b,w=this.ionicDB){return new Promise((I,D)=>{let d=atob(C.split(",")[1]),f=new ArrayBuffer(d.length),h=new Int8Array(f);for(let m=0,g=d.length;m<g;m++)h[m]=d.charCodeAt(m);this.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,I(h)},p.onerror=m=>{p.onsuccess=null,p.onerror=null,D(m)}})}saveInt8ArrayToUserPath(C,b,w=this.ionicDB){return new Promise((I,D)=>{this.createRecursiveDirectory(b,w);let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:C},`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I()},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}saveBlobToUserPath(C,b,w=this.ionicDB){var I=this;return(0,F.A)(function*(){return yield new Promise(function(){var D=(0,F.A)(function*(d,f){let h;try{let m=yield C.arrayBuffer();h=w==I.ionicDB?new Blob([m],{type:C.type}):new Int8Array(m)}catch(m){f(m)}I.createRecursiveDirectory(b,w);let p=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put({timestamp:new Date,mode:33206,contents:h},`/userfs/${b}`);p.onsuccess=m=>{"success"!=m.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),p.onsuccess=null,p.onerror=null,d()},p.onerror=m=>{p.onsuccess=null,p.onerror=null,f(m)}});return function(d,f){return D.apply(this,arguments)}}())})()}saveFileToUserPath(C,b,w=this.ionicDB){return this.createRecursiveDirectory(b,w),new Promise((I,D)=>{let d=w.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").put(C,`/userfs/${b}`);d.onsuccess=f=>{"success"!=f.type&&console.error("\uc800\uc7a5 \uc2e4\ud328: ",b),d.onsuccess=null,d.onerror=null,I(f)},d.onerror=f=>{d.onsuccess=null,d.onerror=null,D(f)}})}checkIfFileExist(C,b=this.ionicDB){return new Promise((w,I)=>{let D=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").count(`/userfs/${C}`);D.onsuccess=d=>{let f=d.target.result;D.onsuccess=null,D.onerror=null,w(f)},D.onerror=d=>{D.onsuccess=null,D.onerror=null,I(d)}})}GetFileListFromDB(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").getAllKeys();return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;for(let h=f.length-1;h>=0;h--)f[h].includes(C)?f[h]=f[h].substring(8):f.splice(h,1);w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}GetFileInfoFromDB(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{const f=d.target.result;w.onsuccess=null,w.onerror=null,I(f)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}loadTextFromUserPath(C,b=((I,D)=>{}),w=this.ionicDB){return new Promise(I=>{let D=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{if(d.target.result){let f=(new TextDecoder).decode(d.target.result.contents);D.onsuccess=null,D.onerror=null,b(!0,f),I(f)}else D.onsuccess=null,D.onerror=null,b(!1,`No file: , ${C}`),I(void 0)},D.onerror=d=>{console.error("IndexedDB loadTextFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null,I(void 0)}})}loadBlobFromUserPath(C,b,w=this.ionicDB){let I=w.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);return new Promise((D,d)=>{I.onsuccess=f=>{try{let h=f.target.result.contents;h instanceof Blob||(h=new Blob([h],{type:b})),D(h)}catch(h){d(h)}finally{I.onsuccess=null,I.onerror=null}},I.onerror=f=>{I.onsuccess=null,I.onerror=null,d(f)}})}DownloadFileFromUserPath(C,b,w,I=this.ionicDB){let D=I.transaction("FILE_DATA","readonly").objectStore("FILE_DATA").get(`/userfs/${C}`);D.onsuccess=d=>{try{let f=new Blob([d.target.result.contents],{type:b||"application/octet-stream"}),h=URL.createObjectURL(f),p=document.createElement("a");p.download=w,p.href=h,document.body.appendChild(p),p.click(),document.body.removeChild(p),p.remove(),URL.revokeObjectURL(h)}catch(f){console.error("DownloadFileFromUserPath: ",f),this.p5toast.show({text:`${this.lang.text.IndexedDB.FailedToDownloadFile}: ${(f.statusText?`${f.statusText}(${f.status})`:f.status)||f}`})}D.onsuccess=null,D.onerror=null},D.onerror=d=>{console.error("IndexedDB DownloadFileFromUserPath failed: ",d),D.onsuccess=null,D.onerror=null}}removeFileFromUserPath(C,b=this.ionicDB){let w=b.transaction("FILE_DATA","readwrite").objectStore("FILE_DATA").delete(`/userfs/${C}`);return new Promise((I,D)=>{w.onsuccess=d=>{w.onsuccess=null,w.onerror=null,I(d)},w.onerror=d=>{w.onsuccess=null,w.onerror=null,D(d)}})}}return(be=Z).\u0275fac=function(C){return new(C||be)(j.KVO(Rt.G),j.KVO(rn.y))},be.\u0275prov=j.jDH({token:be,factory:be.\u0275fac,providedIn:"root"}),Z})()},4234:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{y:()=>l});var F=Ge(467),j=Ge(8326),rn=Ge(3953);let l=(()=>{var be;class Z{constructor(){this.text={Portal:{},Main:{},Arcade:{},Subscribes:{},ChatRoom:{},Profile:{},GroupServer:{},Settings:{},Community:{},MinimalChat:{},voidDraw:{},PostViewer:{},TodoDetail:{},InstantCall:{},ContentViewer:{},WebRTCDevManager:{}},this.setable=[],this.lang=navigator.language.split("-")[0];let C=localStorage.getItem("lang");C&&(this.lang=C)}load_selected_lang(C="assets/data/translate.csv"){var b=this;return(0,F.A)(function*(){return yield new Promise((w,I)=>{new j(D=>{D.setup=()=>{D.noCanvas(),D.loadTable(C,"csv","header",d=>{try{let h,f=Object.keys(d.rows[0].obj);b.setable.length=0;for(let p of f)"#"!=p&&b.setable.push({value:p,display_name:d.rows[0].obj[p]});d.columns.includes(b.lang)||(b.lang=b.setable[0].value),localStorage.setItem("lang",b.lang);for(let p=0,m=d.rows.length;p<m;p++)"#"==d.rows[p].obj["#"].charAt(0)?(h=d.rows[p].obj["#"].substring(3),b.text[h]||(b.text[h]={})):h&&(b.text[h][d.rows[p].obj["#"]]=d.rows[p].obj[b.lang]);b.Callback_nakama&&b.Callback_nakama(),C&&URL.revokeObjectURL(C),D.remove(),w(void 0)}catch(f){console.log("\uc0ac\uc6a9\uc790 \uc5b8\uc5b4 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",f),C&&URL.revokeObjectURL(C),D.remove(),b.load_selected_lang(),w(void 0)}},d=>{console.error("\ub0b4\ubd80 \ubb38\uc11c \uc77d\uae30 \uc2e4\ud328: ",d),C&&URL.revokeObjectURL(C),D.remove(),I(d)})}})})})()}}return(be=Z).\u0275fac=function(C){return new(C||be)},be.\u0275prov=rn.jDH({token:be,factory:be.\u0275fac,providedIn:"root"}),Z})()},5547:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{r:()=>be});var F=Ge(467),j=Ge(92),Rt=Ge(3953),rn=Ge(755),l=Ge(3307);let be=(()=>{var Z;class M{constructor(b,w){this.indexed=b,this.p5loading=w,this.settings={silent:{favicon:!0,diychat:!0,simplechat:!0,todo:!0,engineppt:!0,arcade:!0,voidDraw:!0},simplify:!1,vibrate:!1},this.Current="",this.WebNoties={}}change_silent_settings(b){this.settings.silent[b]=!this.settings.silent[b],this.indexed.saveTextFileToUserPath(JSON.stringify(this.settings),"notification_settings.json")}load_settings(){this.indexed.loadTextFromUserPath("notification_settings.json",(b,w)=>{b&&w&&(this.settings=JSON.parse(w)),"boolean"==typeof this.settings.silent&&(this.settings.silent={favicon:this.settings.silent,diychat:this.settings.silent,simplechat:this.settings.silent,todo:this.settings.silent,engineppt:this.settings.silent,arcade:this.settings.silent,voidDraw:this.settings.silent})})}initialize(){var b=this;return(0,F.A)(function*(){b.ClearNoti(11),"serviceWorker"in navigator?(Notification.requestPermission().then(w=>{"granted"===w?console.log("\uc54c\ub9bc \uad8c\ud55c\uc774 \ud5c8\uc6a9\ub428."):(console.log("\uc54c\ub9bc \uad8c\ud55c\uc774 \uac70\ubd80\ub428."),b.settings.simplify=!0)},w=>{console.error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800: ",w)}),navigator.serviceWorker.addEventListener("message",w=>{if(w.data.reply){if("12"===w.data.id){let D={msg:w.data.reply};if(!D.msg.trim())return;D.name=b.NakamaCallback.users.self.display_name,b.Sq_client.send(JSON.stringify(D))}}else{if(w.data.action)switch(w.data.action){case"done":{let D;try{if(!w.data.data.isOfficial)throw"\uc6d0\uaca9 \ud560 \uc77c \uc544\ub2d8";D=`todo/${w.data.data.id}_${w.data.data.isOfficial}_${w.data.data.target}/info.todo`}catch{D=`todo/${w.data.data.id}/info.todo`}b.indexed.loadTextFromUserPath(D).then(d=>{var f;let h=JSON.parse(d);null===(f=b.NakamaCallback)||void 0===f||f.doneTodo(h)}).catch(d=>{console.log("\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",d)})}break;case"delete":{let D;try{if(!w.data.data.isOfficial)throw"\uc6d0\uaca9 \ud560 \uc77c \uc544\ub2d8";D=`todo/${w.data.data.id}_${w.data.data.isOfficial}_${w.data.data.target}/info.todo`}catch{D=`todo/${w.data.data.id}/info.todo`}b.indexed.loadTextFromUserPath(D).then(d=>{var f;let h=JSON.parse(d);null===(f=b.NakamaCallback)||void 0===f||f.deleteTodoFromStorage(!0,h)}).catch(d=>{console.log("\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",d)})}}else if(window.swRegListenerCallback[w.data.id])window.swRegListenerCallback[w.data.id]();else{var I;const D=null===(I=w.data)||void 0===I||null===(I=I.data)||void 0===I?void 0:I.data;!function(){var f=(0,F.A)(function*(){try{const h=b.GlobalCallback.CatchGETs(D.url)||{},p=yield b.NakamaCallback.AddressToQRCodeAct(h,!0);yield b.NakamaCallback.act_from_QRInfo(p)}catch(h){console.log("\uc54c\ub9bc \ud074\ub9ad \ud589\ub3d9 \uc624\ub958: ",h)}});return function(){return f.apply(this,arguments)}}()()}delete window.swRegListenerCallback[w.data.id]}})):console.log("Service Worker is not supported in this browser.")})()}PushLocal(b,w,I=(()=>{}),D=!1){var d=this;return(0,F.A)(function*(){const f=document.hasFocus();if(!D){if(f&&d.Current===w||!d.settings.silent[b.smallIcon_ln||w||"favicon"])return;const p=d.settings.simplify||f;if(p)return void d.p5loading.update({id:`${b.id||w}`,message:b.body?`${b.title}: ${b.body}`:b.title,clickable:I,image:b.image||b.icon||(b.smallIcon_ln?`assets/icon/${b.smallIcon_ln}.png`:void 0),progress:1,forceEnd:3500,bgcolor:b.bgcolor,soundAlert:p})}const h={badge:b.icon||`assets/badge/${b.smallIcon_ln||w||"favicon"}.png`,body:b.body,icon:b.icon||`assets/icon/${b.smallIcon_ln||w||"favicon"}.png`,image:b.image,silent:!d.settings.silent[b.smallIcon_ln]||!1,tag:`${b.id}`,actions:b.actions_wm,data:b.data_wm,requireInteraction:!!b.actions_wm};try{if(d.WebNoties[b.id]){try{d.WebNoties[b.id].close()}catch{}delete d.WebNoties[b.id]}if(j.Yl)delete h.actions,d.WebNoties[b.id]=new Notification(b.title,{...h}),d.WebNoties[b.id].onclick=()=>{I(),window.focus(),d.WebNoties[b.id].close()};else{yield window.swReg.showNotification(b.title,{...h});let p=yield window.swReg.getNotifications();for(let m=0,g=p.length;m<g;m++)if(p[m].tag==`${b.id}`){d.WebNoties[b.id]=p[m];break}window.swRegListenerCallback[b.id]=()=>{I(),window.focus(),d.WebNoties[b.id].close()}}}catch(p){console.log("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958: ",p)}})()}ClearNoti(b){this.p5loading.remove(`${b}`),this.WebNoties[b]&&this.WebNoties[b].close()}}return(Z=M).\u0275fac=function(b){return new(b||Z)(Rt.KVO(rn.n),Rt.KVO(l.f))},Z.\u0275prov=Rt.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),M})()},4237:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{I:()=>vr,X:()=>ei});var I,D,F=Ge(467),j=Object.defineProperty,Rt=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,be=(ne,Pe,Qe)=>Pe in ne?j(ne,Pe,{enumerable:!0,configurable:!0,writable:!0,value:Qe}):ne[Pe]=Qe,Z=(ne,Pe)=>{for(var Qe in Pe||(Pe={}))rn.call(Pe,Qe)&&be(ne,Qe,Pe[Qe]);if(Rt)for(var Qe of Rt(Pe))l.call(Pe,Qe)&&be(ne,Qe,Pe[Qe]);return ne},M=(ne,Pe,Qe)=>new Promise((T,N)=>{var R=$=>{try{ie(Qe.next($))}catch(de){N(de)}},U=$=>{try{ie(Qe.throw($))}catch(de){N(de)}},ie=$=>$.done?T($.value):Promise.resolve($.value).then(R,U);ie((Qe=Qe.apply(ne,Pe)).next())}),C=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof C<"u"&&C,b_searchParams="URLSearchParams"in C,b_iterable="Symbol"in C&&"iterator"in Symbol,b_blob="FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch{return!1}}(),b_formData="FormData"in C,b_arrayBuffer="ArrayBuffer"in C;function d(ne){if("string"!=typeof ne&&(ne=String(ne)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(ne)||""===ne)throw new TypeError('Invalid character in header field name: "'+ne+'"');return ne.toLowerCase()}function f(ne){return"string"!=typeof ne&&(ne=String(ne)),ne}function h(ne){var Pe={next:function(){var Qe=ne.shift();return{done:void 0===Qe,value:Qe}}};return b_iterable&&(Pe[Symbol.iterator]=function(){return Pe}),Pe}function p(ne){this.map={},ne instanceof p?ne.forEach(function(Pe,Qe){this.append(Qe,Pe)},this):Array.isArray(ne)?ne.forEach(function(Pe){this.append(Pe[0],Pe[1])},this):ne&&Object.getOwnPropertyNames(ne).forEach(function(Pe){this.append(Pe,ne[Pe])},this)}function m(ne){if(ne.bodyUsed)return Promise.reject(new TypeError("Already read"));ne.bodyUsed=!0}function g(ne){return new Promise(function(Pe,Qe){ne.onload=function(){Pe(ne.result)},ne.onerror=function(){Qe(ne.error)}})}function x(ne){var Pe=new FileReader,Qe=g(Pe);return Pe.readAsArrayBuffer(ne),Qe}function L(ne){if(ne.slice)return ne.slice(0);var Pe=new Uint8Array(ne.byteLength);return Pe.set(new Uint8Array(ne)),Pe.buffer}function q(){return this.bodyUsed=!1,this._initBody=function(ne){this.bodyUsed=this.bodyUsed,this._bodyInit=ne,ne?"string"==typeof ne?this._bodyText=ne:b_blob&&Blob.prototype.isPrototypeOf(ne)?this._bodyBlob=ne:b_formData&&FormData.prototype.isPrototypeOf(ne)?this._bodyFormData=ne:b_searchParams&&URLSearchParams.prototype.isPrototypeOf(ne)?this._bodyText=ne.toString():b_arrayBuffer&&b_blob&&function w(ne){return ne&&DataView.prototype.isPrototypeOf(ne)}(ne)?(this._bodyArrayBuffer=L(ne.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ne)||D(ne))?this._bodyArrayBuffer=L(ne):this._bodyText=ne=Object.prototype.toString.call(ne):this._bodyText="",this.headers.get("content-type")||("string"==typeof ne?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b_searchParams&&URLSearchParams.prototype.isPrototypeOf(ne)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b_blob&&(this.blob=function(){var ne=m(this);if(ne)return ne;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(x)}),this.text=function(){var ne=m(this);if(ne)return ne;if(this._bodyBlob)return function E(ne){var Pe=new FileReader,Qe=g(Pe);return Pe.readAsText(ne),Qe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function S(ne){for(var Pe=new Uint8Array(ne),Qe=new Array(Pe.length),T=0;T<Pe.length;T++)Qe[T]=String.fromCharCode(Pe[T]);return Qe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b_formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}b_arrayBuffer&&(I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],D=ArrayBuffer.isView||function(ne){return ne&&I.indexOf(Object.prototype.toString.call(ne))>-1}),p.prototype.append=function(ne,Pe){ne=d(ne),Pe=f(Pe);var Qe=this.map[ne];this.map[ne]=Qe?Qe+", "+Pe:Pe},p.prototype.delete=function(ne){delete this.map[d(ne)]},p.prototype.get=function(ne){return ne=d(ne),this.has(ne)?this.map[ne]:null},p.prototype.has=function(ne){return this.map.hasOwnProperty(d(ne))},p.prototype.set=function(ne,Pe){this.map[d(ne)]=f(Pe)},p.prototype.forEach=function(ne,Pe){for(var Qe in this.map)this.map.hasOwnProperty(Qe)&&ne.call(Pe,this.map[Qe],Qe,this)},p.prototype.keys=function(){var ne=[];return this.forEach(function(Pe,Qe){ne.push(Qe)}),h(ne)},p.prototype.values=function(){var ne=[];return this.forEach(function(Pe){ne.push(Pe)}),h(ne)},p.prototype.entries=function(){var ne=[];return this.forEach(function(Pe,Qe){ne.push([Qe,Pe])}),h(ne)},b_iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);var J=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(ne,Pe){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var Qe=(Pe=Pe||{}).body;if(ne instanceof V){if(ne.bodyUsed)throw new TypeError("Already read");this.url=ne.url,this.credentials=ne.credentials,Pe.headers||(this.headers=new p(ne.headers)),this.method=ne.method,this.mode=ne.mode,this.signal=ne.signal,!Qe&&null!=ne._bodyInit&&(Qe=ne._bodyInit,ne.bodyUsed=!0)}else this.url=String(ne);if(this.credentials=Pe.credentials||this.credentials||"same-origin",(Pe.headers||!this.headers)&&(this.headers=new p(Pe.headers)),this.method=function G(ne){var Pe=ne.toUpperCase();return J.indexOf(Pe)>-1?Pe:ne}(Pe.method||this.method||"GET"),this.mode=Pe.mode||this.mode||null,this.signal=Pe.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Qe)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(Qe),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==Pe.cache&&"no-cache"!==Pe.cache)){var T=/([?&])_=[^&]*/;T.test(this.url)?this.url=this.url.replace(T,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function K(ne){var Pe=new FormData;return ne.trim().split("&").forEach(function(Qe){if(Qe){var T=Qe.split("="),N=T.shift().replace(/\+/g," "),R=T.join("=").replace(/\+/g," ");Pe.append(decodeURIComponent(N),decodeURIComponent(R))}}),Pe}function H(ne){var Pe=new p;return ne.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(T){return 0===T.indexOf("\n")?T.substr(1,T.length):T}).forEach(function(T){var N=T.split(":"),R=N.shift().trim();if(R){var U=N.join(":").trim();Pe.append(R,U)}}),Pe}function te(ne,Pe){if(!(this instanceof te))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Pe||(Pe={}),this.type="default",this.status=void 0===Pe.status?200:Pe.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===Pe.statusText?"":""+Pe.statusText,this.headers=new p(Pe.headers),this.url=Pe.url||"",this._initBody(ne)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},q.call(V.prototype),q.call(te.prototype),te.prototype.clone=function(){return new te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},te.error=function(){var ne=new te(null,{status:0,statusText:""});return ne.type="error",ne};var Y=[301,302,303,307,308];te.redirect=function(ne,Pe){if(-1===Y.indexOf(Pe))throw new RangeError("Invalid status code");return new te(null,{status:Pe,headers:{location:ne}})};var we=C.DOMException;try{new we}catch{(we=function(Pe,Qe){this.message=Pe,this.name=Qe;var T=Error(Pe);this.stack=T.stack}).prototype=Object.create(Error.prototype),we.prototype.constructor=we}function Se(ne,Pe){return new Promise(function(Qe,T){var N=new V(ne,Pe);if(N.signal&&N.signal.aborted)return T(new we("Aborted","AbortError"));var R=new XMLHttpRequest;function U(){R.abort()}R.onload=function(){var $={status:R.status,statusText:R.statusText,headers:H(R.getAllResponseHeaders()||"")};$.url="responseURL"in R?R.responseURL:$.headers.get("X-Request-URL");var de="response"in R?R.response:R.responseText;setTimeout(function(){Qe(new te(de,$))},0)},R.onerror=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},R.ontimeout=function(){setTimeout(function(){T(new TypeError("Network request failed"))},0)},R.onabort=function(){setTimeout(function(){T(new we("Aborted","AbortError"))},0)},R.open(N.method,function ie($){try{return""===$&&C.location.href?C.location.href:$}catch{return $}}(N.url),!0),"include"===N.credentials?R.withCredentials=!0:"omit"===N.credentials&&(R.withCredentials=!1),"responseType"in R&&(b_blob?R.responseType="blob":b_arrayBuffer&&N.headers.get("Content-Type")&&-1!==N.headers.get("Content-Type").indexOf("application/octet-stream")&&(R.responseType="arraybuffer")),!Pe||"object"!=typeof Pe.headers||Pe.headers instanceof p?N.headers.forEach(function($,de){R.setRequestHeader(de,$)}):Object.getOwnPropertyNames(Pe.headers).forEach(function($){R.setRequestHeader($,f(Pe.headers[$]))}),N.signal&&(N.signal.addEventListener("abort",U),R.onreadystatechange=function(){4===R.readyState&&N.signal.removeEventListener("abort",U)}),R.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}Se.polyfill=!0,C.fetch||(C.fetch=Se,C.Headers=p,C.Request=V,C.Response=te);var oe="function"==typeof atob,ge="function"==typeof btoa,re="function"==typeof Buffer,Q="function"==typeof TextDecoder?new TextDecoder:void 0,fe="function"==typeof TextEncoder?new TextEncoder:void 0,it=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),le=(ne=>{let Pe={};return ne.forEach((Qe,T)=>Pe[Qe]=T),Pe})(it),z=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ye=String.fromCharCode.bind(String),Ue="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):ne=>new Uint8Array(Array.prototype.slice.call(ne,0)),vt=ne=>ne.replace(/[^A-Za-z0-9\+\/]/g,""),zt=ge?ne=>btoa(ne):re?ne=>Buffer.from(ne,"binary").toString("base64"):ne=>{let Pe,Qe,T,N,R="";const U=ne.length%3;for(let ie=0;ie<ne.length;){if((Qe=ne.charCodeAt(ie++))>255||(T=ne.charCodeAt(ie++))>255||(N=ne.charCodeAt(ie++))>255)throw new TypeError("invalid character found");Pe=Qe<<16|T<<8|N,R+=it[Pe>>18&63]+it[Pe>>12&63]+it[Pe>>6&63]+it[63&Pe]}return U?R.slice(0,U-3)+"===".substring(U):R},_t=re?ne=>Buffer.from(ne).toString("base64"):ne=>{let Qe=[];for(let T=0,N=ne.length;T<N;T+=4096)Qe.push(ye.apply(null,ne.subarray(T,T+4096)));return zt(Qe.join(""))},Ft=ne=>{if(ne.length<2)return(Pe=ne.charCodeAt(0))<128?ne:Pe<2048?ye(192|Pe>>>6)+ye(128|63&Pe):ye(224|Pe>>>12&15)+ye(128|Pe>>>6&63)+ye(128|63&Pe);var Pe=65536+1024*(ne.charCodeAt(0)-55296)+(ne.charCodeAt(1)-56320);return ye(240|Pe>>>18&7)+ye(128|Pe>>>12&63)+ye(128|Pe>>>6&63)+ye(128|63&Pe)},Wt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Nt=re?ne=>Buffer.from(ne,"utf8").toString("base64"):fe?ne=>_t(fe.encode(ne)):ne=>zt((ne=>ne.replace(Wt,Ft))(ne)),kt=(ne,Pe=!1)=>Pe?(ne=>ne.replace(/=/g,"").replace(/[+\/]/g,Pe=>"+"==Pe?"-":"_"))(Nt(ne)):Nt(ne),Ut=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Tt=ne=>{switch(ne.length){case 4:var Qe=((7&ne.charCodeAt(0))<<18|(63&ne.charCodeAt(1))<<12|(63&ne.charCodeAt(2))<<6|63&ne.charCodeAt(3))-65536;return ye(55296+(Qe>>>10))+ye(56320+(1023&Qe));case 3:return ye((15&ne.charCodeAt(0))<<12|(63&ne.charCodeAt(1))<<6|63&ne.charCodeAt(2));default:return ye((31&ne.charCodeAt(0))<<6|63&ne.charCodeAt(1))}},Zn=oe?ne=>atob(vt(ne)):re?ne=>Buffer.from(ne,"base64").toString("binary"):ne=>{if(ne=ne.replace(/\s+/g,""),!z.test(ne))throw new TypeError("malformed base64.");ne+="==".slice(2-(3&ne.length));let Pe,T,N,Qe="";for(let R=0;R<ne.length;)Pe=le[ne.charAt(R++)]<<18|le[ne.charAt(R++)]<<12|(T=le[ne.charAt(R++)])<<6|(N=le[ne.charAt(R++)]),Qe+=64===T?ye(Pe>>16&255):64===N?ye(Pe>>16&255,Pe>>8&255):ye(Pe>>16&255,Pe>>8&255,255&Pe);return Qe},An=re?ne=>Ue(Buffer.from(ne,"base64")):ne=>Ue(Zn(ne).split("").map(Pe=>Pe.charCodeAt(0))),Qn=re?ne=>Buffer.from(ne,"base64").toString("utf8"):Q?ne=>Q.decode(An(ne)):ne=>(ne=>ne.replace(Ut,Tt))(Zn(ne)),Er=ne=>Qn((ne=>vt(ne.replace(/[-_]/g,Pe=>"-"==Pe?"+":"/")))(ne));function Bn(ne,Pe,Qe){const T=Z(Z({},{method:ne}),Pe);if(T.headers=Z({},Pe.headers),typeof XMLHttpRequest<"u"){const N=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");null!=N&&N.set||(T.credentials="cocos-ignore")}return Object.keys(T.headers).includes("Accept")||(T.headers.Accept="application/json"),Object.keys(T.headers).includes("Content-Type")||(T.headers["Content-Type"]="application/json"),Object.keys(T.headers).forEach(N=>{T.headers[N]||delete T.headers[N]}),Qe&&(T.body=Qe),T}var ur=class{constructor(ne,Pe,Qe){this.serverKey=ne,this.basePath=Pe,this.timeoutMs=Qe}healthcheck(ne,Pe={}){const R=this.buildFullUrl(this.basePath,"/healthcheck",new Map),U=Bn("GET",Pe,"");return ne&&(U.headers.Authorization="Bearer "+ne),Promise.race([fetch(R,U).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,$)=>setTimeout($,this.timeoutMs,"Request timed out."))])}deleteAccount(ne,Pe={}){const R=this.buildFullUrl(this.basePath,"/v2/account",new Map),U=Bn("DELETE",Pe,"");return ne&&(U.headers.Authorization="Bearer "+ne),Promise.race([fetch(R,U).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,$)=>setTimeout($,this.timeoutMs,"Request timed out."))])}getAccount(ne,Pe={}){const R=this.buildFullUrl(this.basePath,"/v2/account",new Map),U=Bn("GET",Pe,"");return ne&&(U.headers.Authorization="Bearer "+ne),Promise.race([fetch(R,U).then(ie=>{if(204==ie.status)return ie;if(ie.status>=200&&ie.status<300)return ie.json();throw ie}),new Promise((ie,$)=>setTimeout($,this.timeoutMs,"Request timed out."))])}updateAccount(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account",N),ie=Bn("PUT",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}authenticateApple(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateCustom(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateDevice(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateEmail(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateFacebook(ne,Pe,Qe,T,N,R,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const $=new Map;$.set("create",T),$.set("username",N),$.set("sync",R);let de="";de=JSON.stringify(Qe||{});const Ae=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",$),tt=Bn("POST",U,de);return ne&&(tt.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateGoogle(ne,Pe,Qe,T,N,R={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const ie=new Map;ie.set("create",T),ie.set("username",N);let $="";$=JSON.stringify(Qe||{});const de=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",ie),Ae=Bn("POST",R,$);return ne&&(Ae.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}authenticateSteam(ne,Pe,Qe,T,N,R,U={}){if(null==Qe)throw new Error("'account' is a required parameter but is null or undefined.");const $=new Map;$.set("create",T),$.set("username",N),$.set("sync",R);let de="";de=JSON.stringify(Qe||{});const Ae=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",$),tt=Bn("POST",U,de);return ne&&(tt.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}linkApple(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/apple",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkCustom(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/custom",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkDevice(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/device",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkEmail(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/email",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkFacebook(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'account' is a required parameter but is null or undefined.");const R=new Map;R.set("sync",Qe);let U="";U=JSON.stringify(Pe||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGameCenter(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkGoogle(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/google",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}linkSteam(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/link/steam",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}sessionRefresh(ne,Pe,Qe,T={}){if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const R=new Map;let U="";U=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Basic "+kt(ne+":"+Pe)),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}unlinkApple(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkCustom(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkDevice(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkEmail(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebook(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkGoogle(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}unlinkSteam(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listChannelMessages(ne,Pe,Qe,T,N,R={}){if(null==Pe)throw new Error("'channelId' is a required parameter but is null or undefined.");const U="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(Pe))),ie=new Map;ie.set("limit",Qe),ie.set("forward",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,U,ie),Ae=Bn("GET",R,"");return ne&&(Ae.headers.Authorization="Bearer "+ne),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}event(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/event",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteFriends(ne,Pe,Qe,T={}){const R=new Map;R.set("ids",Pe),R.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend",R),$=Bn("DELETE",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}listFriends(ne,Pe,Qe,T,N={}){const U=new Map;U.set("limit",Pe),U.set("state",Qe),U.set("cursor",T);const $=this.buildFullUrl(this.basePath,"/v2/friend",U),de=Bn("GET",N,"");return ne&&(de.headers.Authorization="Bearer "+ne),Promise.race([fetch($,de).then(Ae=>{if(204==Ae.status)return Ae;if(Ae.status>=200&&Ae.status<300)return Ae.json();throw Ae}),new Promise((Ae,tt)=>setTimeout(tt,this.timeoutMs,"Request timed out."))])}addFriends(ne,Pe,Qe,T={}){const R=new Map;R.set("ids",Pe),R.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend",R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}blockFriends(ne,Pe,Qe,T={}){const R=new Map;R.set("ids",Pe),R.set("usernames",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend/block",R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}importFacebookFriends(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'account' is a required parameter but is null or undefined.");const R=new Map;R.set("reset",Qe);let U="";U=JSON.stringify(Pe||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/facebook",R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(ne,Pe,Qe,T={}){const R=new Map;R.set("limit",Pe),R.set("cursor",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/friend/friends",R),$=Bn("GET",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}importSteamFriends(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'account' is a required parameter but is null or undefined.");const R=new Map;R.set("reset",Qe);let U="";U=JSON.stringify(Pe||{});const ie=this.buildFullUrl(this.basePath,"/v2/friend/steam",R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}listGroups(ne,Pe,Qe,T,N,R,U,ie={}){const de=new Map;de.set("name",Pe),de.set("cursor",Qe),de.set("limit",T),de.set("lang_tag",N),de.set("members",R),de.set("open",U);const tt=this.buildFullUrl(this.basePath,"/v2/group",de),pt=Bn("GET",ie,"");return ne&&(pt.headers.Authorization="Bearer "+ne),Promise.race([fetch(tt,pt).then(Kt=>{if(204==Kt.status)return Kt;if(Kt.status>=200&&Kt.status<300)return Kt.json();throw Kt}),new Promise((Kt,Fe)=>setTimeout(Fe,this.timeoutMs,"Request timed out."))])}createGroup(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/group",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteGroup(ne,Pe,Qe={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}updateGroup(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;let U="";U=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("PUT",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}addGroupUsers(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;R.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}banGroupUsers(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;R.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;R.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}joinGroup(ne,Pe,Qe={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}kickGroupUsers(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;R.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}leaveGroup(ne,Pe,Qe={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const T="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const N="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(Pe))),R=new Map;R.set("user_ids",Qe);const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}listGroupUsers(ne,Pe,Qe,T,N,R={}){if(null==Pe)throw new Error("'groupId' is a required parameter but is null or undefined.");const U="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(Pe))),ie=new Map;ie.set("limit",Qe),ie.set("state",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,U,ie),Ae=Bn("GET",R,"");return ne&&(Ae.headers.Authorization="Bearer "+ne),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/purchase/facebookinstant",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listSubscriptions(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/subscription",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/subscription/apple",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/iap/subscription/google",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}getSubscription(ne,Pe,Qe={}){if(null==Pe)throw new Error("'productId' is a required parameter but is null or undefined.");const T="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("GET",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(ne,Pe,Qe={}){if(null==Pe)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const T="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(ne,Pe,Qe,T,N,R,U={}){if(null==Pe)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Pe))),$=new Map;$.set("owner_ids",Qe),$.set("limit",T),$.set("cursor",N),$.set("expiry",R);const Ae=this.buildFullUrl(this.basePath,ie,$),tt=Bn("GET",U,"");return ne&&(tt.headers.Authorization="Bearer "+ne),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(Pe))),R=new Map;let U="";U=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(ne,Pe,Qe,T,N,R,U={}){if(null==Pe)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(Pe))).replace("{ownerId}",encodeURIComponent(String(Qe))),$=new Map;$.set("limit",T),$.set("expiry",N),$.set("cursor",R);const Ae=this.buildFullUrl(this.basePath,ie,$),tt=Bn("GET",U,"");return ne&&(tt.headers.Authorization="Bearer "+ne),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}listMatches(ne,Pe,Qe,T,N,R,U,ie={}){const de=new Map;de.set("limit",Pe),de.set("authoritative",Qe),de.set("label",T),de.set("min_size",N),de.set("max_size",R),de.set("query",U);const tt=this.buildFullUrl(this.basePath,"/v2/match",de),pt=Bn("GET",ie,"");return ne&&(pt.headers.Authorization="Bearer "+ne),Promise.race([fetch(tt,pt).then(Kt=>{if(204==Kt.status)return Kt;if(Kt.status>=200&&Kt.status<300)return Kt.json();throw Kt}),new Promise((Kt,Fe)=>setTimeout(Fe,this.timeoutMs,"Request timed out."))])}deleteNotifications(ne,Pe,Qe={}){const N=new Map;N.set("ids",Pe);const U=this.buildFullUrl(this.basePath,"/v2/notification",N),ie=Bn("DELETE",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listNotifications(ne,Pe,Qe,T={}){const R=new Map;R.set("limit",Pe),R.set("cacheable_cursor",Qe);const ie=this.buildFullUrl(this.basePath,"/v2/notification",R),$=Bn("GET",T,"");return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}rpcFunc2(ne,Pe,Qe,T,N={}){if(null==Pe)throw new Error("'id' is a required parameter but is null or undefined.");const R="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Pe))),U=new Map;U.set("payload",Qe),U.set("http_key",T);const $=this.buildFullUrl(this.basePath,R,U),de=Bn("GET",N,"");return ne&&(de.headers.Authorization="Bearer "+ne),Promise.race([fetch($,de).then(Ae=>{if(204==Ae.status)return Ae;if(Ae.status>=200&&Ae.status<300)return Ae.json();throw Ae}),new Promise((Ae,tt)=>setTimeout(tt,this.timeoutMs,"Request timed out."))])}rpcFunc(ne,Pe,Qe,T,N={}){if(null==Pe)throw new Error("'id' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'body' is a required parameter but is null or undefined.");const R="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(Pe))),U=new Map;U.set("http_key",T);let ie="";ie=JSON.stringify(Qe||{});const $=this.buildFullUrl(this.basePath,R,U),de=Bn("POST",N,ie);return ne&&(de.headers.Authorization="Bearer "+ne),Promise.race([fetch($,de).then(Ae=>{if(204==Ae.status)return Ae;if(Ae.status>=200&&Ae.status<300)return Ae.json();throw Ae}),new Promise((Ae,tt)=>setTimeout(tt,this.timeoutMs,"Request timed out."))])}sessionLogout(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/session/logout",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}readStorageObjects(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Bn("POST",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}writeStorageObjects(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/storage",N),ie=Bn("PUT",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(ne,Pe,Qe={}){if(null==Pe)throw new Error("'body' is a required parameter but is null or undefined.");const N=new Map;let R="";R=JSON.stringify(Pe||{});const U=this.buildFullUrl(this.basePath,"/v2/storage/delete",N),ie=Bn("PUT",Qe,R);return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listStorageObjects(ne,Pe,Qe,T,N,R={}){if(null==Pe)throw new Error("'collection' is a required parameter but is null or undefined.");const U="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(Pe))),ie=new Map;ie.set("user_id",Qe),ie.set("limit",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,U,ie),Ae=Bn("GET",R,"");return ne&&(Ae.headers.Authorization="Bearer "+ne),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}listStorageObjects2(ne,Pe,Qe,T,N,R={}){if(null==Pe)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'userId' is a required parameter but is null or undefined.");const U="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(Pe))).replace("{userId}",encodeURIComponent(String(Qe))),ie=new Map;ie.set("limit",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,U,ie),Ae=Bn("GET",R,"");return ne&&(Ae.headers.Authorization="Bearer "+ne),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}listTournaments(ne,Pe,Qe,T,N,R,U,ie={}){const de=new Map;de.set("category_start",Pe),de.set("category_end",Qe),de.set("start_time",T),de.set("end_time",N),de.set("limit",R),de.set("cursor",U);const tt=this.buildFullUrl(this.basePath,"/v2/tournament",de),pt=Bn("GET",ie,"");return ne&&(pt.headers.Authorization="Bearer "+ne),Promise.race([fetch(tt,pt).then(Kt=>{if(204==Kt.status)return Kt;if(Kt.status>=200&&Kt.status<300)return Kt.json();throw Kt}),new Promise((Kt,Fe)=>setTimeout(Fe,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(ne,Pe,Qe={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("DELETE",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecords(ne,Pe,Qe,T,N,R,U={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Pe))),$=new Map;$.set("owner_ids",Qe),$.set("limit",T),$.set("cursor",N),$.set("expiry",R);const Ae=this.buildFullUrl(this.basePath,ie,$),tt=Bn("GET",U,"");return ne&&(tt.headers.Authorization="Bearer "+ne),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Pe))),R=new Map;let U="";U=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("POST",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(ne,Pe,Qe,T={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'record' is a required parameter but is null or undefined.");const N="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(Pe))),R=new Map;let U="";U=JSON.stringify(Qe||{});const ie=this.buildFullUrl(this.basePath,N,R),$=Bn("PUT",T,U);return ne&&($.headers.Authorization="Bearer "+ne),Promise.race([fetch(ie,$).then(de=>{if(204==de.status)return de;if(de.status>=200&&de.status<300)return de.json();throw de}),new Promise((de,Ae)=>setTimeout(Ae,this.timeoutMs,"Request timed out."))])}joinTournament(ne,Pe,Qe={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const T="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(Pe))),U=this.buildFullUrl(this.basePath,T,new Map),ie=Bn("POST",Qe,"");return ne&&(ie.headers.Authorization="Bearer "+ne),Promise.race([fetch(U,ie).then($=>{if(204==$.status)return $;if($.status>=200&&$.status<300)return $.json();throw $}),new Promise(($,de)=>setTimeout(de,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(ne,Pe,Qe,T,N,R,U={}){if(null==Pe)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==Qe)throw new Error("'ownerId' is a required parameter but is null or undefined.");const ie="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(Pe))).replace("{ownerId}",encodeURIComponent(String(Qe))),$=new Map;$.set("limit",T),$.set("expiry",N),$.set("cursor",R);const Ae=this.buildFullUrl(this.basePath,ie,$),tt=Bn("GET",U,"");return ne&&(tt.headers.Authorization="Bearer "+ne),Promise.race([fetch(Ae,tt).then(pt=>{if(204==pt.status)return pt;if(pt.status>=200&&pt.status<300)return pt.json();throw pt}),new Promise((pt,Kt)=>setTimeout(Kt,this.timeoutMs,"Request timed out."))])}getUsers(ne,Pe,Qe,T,N={}){const U=new Map;U.set("ids",Pe),U.set("usernames",Qe),U.set("facebook_ids",T);const $=this.buildFullUrl(this.basePath,"/v2/user",U),de=Bn("GET",N,"");return ne&&(de.headers.Authorization="Bearer "+ne),Promise.race([fetch($,de).then(Ae=>{if(204==Ae.status)return Ae;if(Ae.status>=200&&Ae.status<300)return Ae.json();throw Ae}),new Promise((Ae,tt)=>setTimeout(tt,this.timeoutMs,"Request timed out."))])}listUserGroups(ne,Pe,Qe,T,N,R={}){if(null==Pe)throw new Error("'userId' is a required parameter but is null or undefined.");const U="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(Pe))),ie=new Map;ie.set("limit",Qe),ie.set("state",T),ie.set("cursor",N);const de=this.buildFullUrl(this.basePath,U,ie),Ae=Bn("GET",R,"");return ne&&(Ae.headers.Authorization="Bearer "+ne),Promise.race([fetch(de,Ae).then(tt=>{if(204==tt.status)return tt;if(tt.status>=200&&tt.status<300)return tt.json();throw tt}),new Promise((tt,pt)=>setTimeout(pt,this.timeoutMs,"Request timed out."))])}buildFullUrl(ne,Pe,Qe){let T=ne+Pe+"?";for(let[N,R]of Qe)R instanceof Array?T+=R.reduce((U,ie)=>U+encodeURIComponent(N)+"="+encodeURIComponent(ie)+"&",""):null!=R&&(T+=encodeURIComponent(N)+"="+encodeURIComponent(R)+"&");return T}},vn=class{constructor(ne,Pe,Qe){this.created=Qe,this.token=ne,this.refresh_token=Pe,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(ne,Pe)}isexpired(ne){return this.expires_at-ne<0}isrefreshexpired(ne){return this.refresh_expires_at-ne<0}update(ne,Pe){const Qe=ne.split(".");if(3!=Qe.length)throw"jwt is not valid.";const T=JSON.parse(Zn(Qe[1])),N=Math.floor(parseInt(T.exp));if(Pe){const R=Pe.split(".");if(3!=R.length)throw"refresh jwt is not valid.";const U=JSON.parse(Zn(R[1])),ie=Math.floor(parseInt(U.exp));this.refresh_expires_at=ie,this.refresh_token=Pe}this.token=ne,this.expires_at=N,this.username=T.usn,this.user_id=T.uid,this.vars=T.vrs}static restore(ne,Pe){return new vn(ne,Pe,!1)}},er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(gt=0;gt<64;gt++)Pn[er.charCodeAt(gt)]=gt;var gt,wt=function(ne){var Qe,Pe=new Uint8Array(ne),T=Pe.length,N="";for(Qe=0;Qe<T;Qe+=3)N+=er[Pe[Qe]>>2],N+=er[(3&Pe[Qe])<<4|Pe[Qe+1]>>4],N+=er[(15&Pe[Qe+1])<<2|Pe[Qe+2]>>6],N+=er[63&Pe[Qe+2]];return T%3==2?N=N.substring(0,N.length-1)+"=":T%3==1&&(N=N.substring(0,N.length-2)+"=="),N},rt=function(ne){var T,R,U,ie,$,Pe=.75*ne.length,Qe=ne.length,N=0;"="===ne[ne.length-1]&&(Pe--,"="===ne[ne.length-2]&&Pe--);var de=new ArrayBuffer(Pe),Ae=new Uint8Array(de);for(T=0;T<Qe;T+=4)R=Pn[ne.charCodeAt(T)],U=Pn[ne.charCodeAt(T+1)],ie=Pn[ne.charCodeAt(T+2)],$=Pn[ne.charCodeAt(T+3)],Ae[N++]=R<<2|U>>4,Ae[N++]=(15&U)<<4|ie>>2,Ae[N++]=(3&ie)<<6|63&$;return de},bt=class{get onClose(){return this._socket.onclose}set onClose(ne){this._socket.onclose=ne}get onError(){return this._socket.onerror}set onError(ne){this._socket.onerror=ne}get onMessage(){return this._socket.onmessage}set onMessage(ne){ne?this._socket.onmessage=Pe=>{const Qe=JSON.parse(Pe.data);Qe.match_data&&Qe.match_data.data?Qe.match_data.data=new Uint8Array(rt(Qe.match_data.data)):Qe.party_data&&Qe.party_data.data&&(Qe.party_data.data=new Uint8Array(rt(Qe.party_data.data))),ne(Qe)}:ne=null}get onOpen(){return this._socket.onopen}set onOpen(ne){this._socket.onopen=ne}isOpen(){var ne;return(null==(ne=this._socket)?void 0:ne.readyState)==WebSocket.OPEN}connect(ne,Pe,Qe,T,N){const R=`${ne}${Pe}:${Qe}/ws?lang=en&status=${encodeURIComponent(T.toString())}&token=${encodeURIComponent(N)}`;this._socket=new WebSocket(R)}close(){this._socket.close(),this._socket=void 0}send(ne){if(ne.match_data_send){ne.match_data_send.op_code=ne.match_data_send.op_code.toString();let Pe=ne.match_data_send.data;Pe&&Pe instanceof Uint8Array?ne.match_data_send.data=wt(Pe.buffer):Pe&&(ne.match_data_send.data=zt(Pe))}else if(ne.party_data_send){ne.party_data_send.op_code=ne.party_data_send.op_code.toString();let Pe=ne.party_data_send.data;Pe&&Pe instanceof Uint8Array?ne.party_data_send.data=wt(Pe.buffer):Pe&&(ne.party_data_send.data=zt(Pe))}this._socket.send(JSON.stringify(ne))}},gn=class{constructor(ne,Pe,Qe=!1,T=!1,N=new bt,R=gn.DefaultSendTimeoutMs){this.host=ne,this.port=Pe,this.useSSL=Qe,this.verbose=T,this.adapter=N,this.sendTimeoutMs=R,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=gn.DefaultHeartbeatTimeoutMs}generatecid(){const ne=this.nextCid.toString();return++this.nextCid,ne}connect(ne,Pe=!1,Qe=gn.DefaultConnectTimeoutMs){return this.adapter.isOpen()?Promise.resolve(ne):(this.adapter.connect(this.useSSL?"wss://":"ws://",this.host,this.port,Pe,ne.token),this.adapter.onClose=N=>{this.ondisconnect(N)},this.adapter.onError=N=>{this.onerror(N)},this.adapter.onMessage=N=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(N)),N.cid){const R=this.cIds[N.cid];if(!R)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",N));delete this.cIds[N.cid],N.error?R.reject(N.error):R.resolve(N)}else N.notifications?N.notifications.notifications.forEach(R=>{R.content=R.content?JSON.parse(R.content):void 0,this.onnotification(R)}):N.match_data?(N.match_data.op_code=parseInt(N.match_data.op_code),this.onmatchdata(N.match_data)):N.match_presence_event?this.onmatchpresence(N.match_presence_event):N.matchmaker_ticket?this.onmatchmakerticket(N.matchmaker_ticket):N.matchmaker_matched?this.onmatchmakermatched(N.matchmaker_matched):N.status_presence_event?this.onstatuspresence(N.status_presence_event):N.stream_presence_event?this.onstreampresence(N.stream_presence_event):N.stream_data?this.onstreamdata(N.stream_data):N.channel_message?(N.channel_message.content=JSON.parse(N.channel_message.content),this.onchannelmessage(N.channel_message)):N.channel_presence_event?this.onchannelpresence(N.channel_presence_event):N.party_data?(N.party_data.op_code=parseInt(N.party_data.op_code),this.onpartydata(N.party_data)):N.party_close?this.onpartyclose(N.party_close):N.party_join_request?this.onpartyjoinrequest(N.party_join_request):N.party_leader?this.onpartyleader(N.party_leader):N.party_matchmaker_ticket?this.onpartymatchmakerticket(N.party_matchmaker_ticket):N.party_presence_event?this.onpartypresence(N.party_presence_event):N.party?this.onparty(N.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",N)},new Promise((N,R)=>{this.adapter.onOpen=U=>{this.verbose&&window&&window.console&&console.log(U),this.pingPong(),N(ne)},this.adapter.onError=U=>{R(U),this.adapter.close()},setTimeout(()=>{R("The socket timed out when trying to connect.")},Qe)}))}disconnect(ne=!0){this.adapter.isOpen()&&this.adapter.close(),ne&&this.ondisconnect({})}setHeartbeatTimeoutMs(ne){this._heartbeatTimeoutMs=ne}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(ne){this.verbose&&window&&window.console&&console.log(ne)}onerror(ne){this.verbose&&window&&window.console&&console.log(ne)}onchannelmessage(ne){this.verbose&&window&&window.console&&console.log(ne)}onchannelpresence(ne){this.verbose&&window&&window.console&&console.log(ne)}onnotification(ne){this.verbose&&window&&window.console&&console.log(ne)}onmatchdata(ne){this.verbose&&window&&window.console&&console.log(ne)}onmatchpresence(ne){this.verbose&&window&&window.console&&console.log(ne)}onmatchmakerticket(ne){this.verbose&&window&&window.console&&console.log(ne)}onmatchmakermatched(ne){this.verbose&&window&&window.console&&console.log(ne)}onparty(ne){this.verbose&&window&&window.console&&console.log(ne)}onpartyclose(ne){this.verbose&&window&&window.console&&console.log("Party closed: "+ne)}onpartyjoinrequest(ne){this.verbose&&window&&window.console&&console.log(ne)}onpartydata(ne){this.verbose&&window&&window.console&&console.log(ne)}onpartyleader(ne){this.verbose&&window&&window.console&&console.log(ne)}onpartymatchmakerticket(ne){this.verbose&&window&&window.console&&console.log(ne)}onpartypresence(ne){this.verbose&&window&&window.console&&console.log(ne)}onstatuspresence(ne){this.verbose&&window&&window.console&&console.log(ne)}onstreampresence(ne){this.verbose&&window&&window.console&&console.log(ne)}onstreamdata(ne){this.verbose&&window&&window.console&&console.log(ne)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(ne,Pe=gn.DefaultSendTimeoutMs){const Qe=ne;return new Promise((T,N)=>{if(this.adapter.isOpen())if(Qe.match_data_send)this.adapter.send(Qe),T();else if(Qe.party_data_send)this.adapter.send(Qe),T();else{Qe.channel_message_send?Qe.channel_message_send.content=JSON.stringify(Qe.channel_message_send.content):Qe.channel_message_update&&(Qe.channel_message_update.content=JSON.stringify(Qe.channel_message_update.content));const R=this.generatecid();this.cIds[R]={resolve:T,reject:N},setTimeout(()=>{N("The socket timed out while waiting for a response.")},Pe),Qe.cid=R,this.adapter.send(Qe)}else N("Socket connection has not been established yet.");if(this.verbose&&window&&window.console){const R=Z({},Qe);R.match_data_send&&R.match_data_send.data?R.match_data_send.data=Er(R.match_data_send.data):R.party_data_send&&R.party_data_send.data&&(R.party_data_send.data=Er(R.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(R))}})}acceptPartyMember(ne,Pe){return this.send({party_accept:{party_id:ne,presence:Pe}})}addMatchmaker(ne,Pe,Qe,T,N){return M(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:Pe,max_count:Qe,query:ne,string_properties:T,numeric_properties:N}})).matchmaker_ticket})}addMatchmakerParty(ne,Pe,Qe,T,N,R){return M(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:ne,min_count:Qe,max_count:T,query:Pe,string_properties:N,numeric_properties:R}})).party_matchmaker_ticket})}closeParty(ne){return M(this,null,function*(){return yield this.send({party_close:{party_id:ne}})})}createMatch(ne){return M(this,null,function*(){return(yield this.send({match_create:{name:ne}})).match})}createParty(ne,Pe){return M(this,null,function*(){return(yield this.send({party_create:{open:ne,max_size:Pe}})).party})}followUsers(ne){return M(this,null,function*(){return(yield this.send({status_follow:{user_ids:ne}})).status})}joinChat(ne,Pe,Qe,T){return M(this,null,function*(){return(yield this.send({channel_join:{target:ne,type:Pe,persistence:Qe,hidden:T}})).channel})}joinMatch(ne,Pe,Qe){return M(this,null,function*(){const T={match_join:{metadata:Qe}};return Pe?T.match_join.token=Pe:T.match_join.match_id=ne,(yield this.send(T)).match})}joinParty(ne){return M(this,null,function*(){return yield this.send({party_join:{party_id:ne}})})}leaveChat(ne){return this.send({channel_leave:{channel_id:ne}})}leaveMatch(ne){return this.send({match_leave:{match_id:ne}})}leaveParty(ne){return this.send({party_leave:{party_id:ne}})}listPartyJoinRequests(ne){return M(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:ne}})).party_join_request})}promotePartyMember(ne,Pe){return M(this,null,function*(){return(yield this.send({party_promote:{party_id:ne,presence:Pe}})).party_leader})}removeChatMessage(ne,Pe){return M(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:ne,message_id:Pe}})).channel_message_ack})}removeMatchmaker(ne){return this.send({matchmaker_remove:{ticket:ne}})}removeMatchmakerParty(ne,Pe){return this.send({party_matchmaker_remove:{party_id:ne,ticket:Pe}})}removePartyMember(ne,Pe){return M(this,null,function*(){return this.send({party_remove:{party_id:ne,presence:Pe}})})}rpc(ne,Pe,Qe){return M(this,null,function*(){return(yield this.send({rpc:{id:ne,payload:Pe,http_key:Qe}})).rpc})}sendMatchState(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.send({match_data_send:{match_id:ne,op_code:Pe,data:Qe,presences:null!=T?T:[],reliable:N}})})}sendPartyData(ne,Pe,Qe){return this.send({party_data_send:{party_id:ne,op_code:Pe,data:Qe}})}unfollowUsers(ne){return this.send({status_unfollow:{user_ids:ne}})}updateChatMessage(ne,Pe,Qe){return M(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:ne,message_id:Pe,content:Qe}})).channel_message_ack})}updateStatus(ne){return this.send({status_update:{status:ne}})}writeChatMessage(ne,Pe){return M(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:ne,content:Pe}})).channel_message_ack})}pingPong(){return M(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{return void(this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()))}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},On=gn;On.DefaultHeartbeatTimeoutMs=1e4,On.DefaultSendTimeoutMs=1e4,On.DefaultConnectTimeoutMs=3e4;var In=class{constructor(ne="defaultkey",Pe="127.0.0.1",Qe="7350",T=!1,N=7e3,R=!0){this.serverkey=ne,this.host=Pe,this.port=Qe,this.useSSL=T,this.timeout=N,this.autoRefreshSession=R,this.expiredTimespanMs=3e5,this.apiClient=new ur(ne,`${T?"https://":"http://"}${Pe}:${Qe}`,N)}addGroupUsers(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.addGroupUsers(ne.token,Pe,Qe).then(T=>void 0!==T)})}addFriends(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.addFriends(ne.token,Pe,Qe).then(T=>void 0!==T)})}authenticateApple(ne,Pe,Qe){return M(this,arguments,function*(T,N,R,U={},ie={}){return this.apiClient.authenticateApple(this.serverkey,"",{token:T,vars:U},N,R,ie).then(de=>new vn(de.token||"",de.refresh_token||"",de.created||!1))})}authenticateCustom(ne,Pe,Qe,T={},N={}){return this.apiClient.authenticateCustom(this.serverkey,"",{id:ne,vars:T},Pe,Qe,N).then(U=>new vn(U.token||"",U.refresh_token||"",U.created||!1))}authenticateDevice(ne,Pe,Qe,T){return this.apiClient.authenticateDevice(this.serverkey,"",{id:ne,vars:T},Pe,Qe).then(R=>new vn(R.token||"",R.refresh_token||"",R.created||!1))}authenticateEmail(ne,Pe,Qe,T,N){return this.apiClient.authenticateEmail(this.serverkey,"",{email:ne,password:Pe,vars:N},Qe,T).then(U=>new vn(U.token||"",U.refresh_token||"",U.created||!1))}authenticateFacebookInstantGame(ne,Pe,Qe,T,N={}){const R={signed_player_info:ne,vars:T};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:R.signed_player_info,vars:R.vars},Pe,Qe,N).then(U=>new vn(U.token||"",U.refresh_token||"",U.created||!1))}authenticateFacebook(ne,Pe,Qe,T,N,R={}){return this.apiClient.authenticateFacebook(this.serverkey,"",{token:ne,vars:N},Pe,Qe,T,R).then(ie=>new vn(ie.token||"",ie.refresh_token||"",ie.created||!1))}authenticateGoogle(ne,Pe,Qe,T){return M(this,arguments,function*(N,R,U,ie,$={}){const de={token:N,vars:ie},Ae=yield this.apiClient.authenticateGoogle(this.serverkey,"",de,R,U,$);return new vn(Ae.token||"",Ae.refresh_token||"",Ae.created||!1)})}authenticateGameCenter(ne,Pe,Qe,T,N,R,U,ie,$){return M(this,arguments,function*(de,Ae,tt,pt,Kt,Fe,We,at,Ze,xt={}){const Zt={bundle_id:de,player_id:Ae,public_key_url:tt,salt:pt,signature:Kt,timestamp_seconds:Fe,vars:Ze},En=yield this.apiClient.authenticateGameCenter(this.serverkey,"",Zt,at,We,xt);return new vn(En.token||"",En.refresh_token||"",En.created||!1)})}authenticateSteam(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.apiClient.authenticateSteam(this.serverkey,"",{token:ne,vars:N,sync:T},Pe,Qe).then(U=>new vn(U.token||"",U.refresh_token||"",U.created||!1))})}banGroupUsers(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.banGroupUsers(ne.token,Pe,Qe).then(T=>void 0!==T)})}blockFriends(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.blockFriends(ne.token,Pe,Qe).then(T=>Promise.resolve(null!=T))})}createGroup(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.createGroup(ne.token,Pe).then(Qe=>Promise.resolve({avatar_url:Qe.avatar_url,create_time:Qe.create_time,creator_id:Qe.creator_id,description:Qe.description,edge_count:Qe.edge_count?Number(Qe.edge_count):0,id:Qe.id,lang_tag:Qe.lang_tag,max_count:Qe.max_count?Number(Qe.max_count):0,metadata:Qe.metadata?JSON.parse(Qe.metadata):void 0,name:Qe.name,open:Qe.open,update_time:Qe.update_time}))})}createSocket(ne=!1,Pe=!1,Qe=new bt,T=On.DefaultSendTimeoutMs){return new On(this.host,this.port,ne,Pe,Qe,T)}deleteAccount(ne){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.deleteAccount(ne.token).then(Pe=>void 0!==Pe)})}deleteFriends(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.deleteFriends(ne.token,Pe,Qe).then(T=>void 0!==T)})}deleteGroup(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.deleteGroup(ne.token,Pe).then(Qe=>void 0!==Qe)})}deleteNotifications(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.deleteNotifications(ne.token,Pe).then(Qe=>Promise.resolve(null!=Qe))})}deleteStorageObjects(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.deleteStorageObjects(ne.token,Pe).then(Qe=>Promise.resolve(null!=Qe))})}deleteTournamentRecord(ne,Pe){return M(this,null,function*(){return this.apiClient.deleteTournamentRecord(ne.token,Pe)})}demoteGroupUsers(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.demoteGroupUsers(ne.token,Pe,Qe).then(T=>Promise.resolve(null!=T))})}emitEvent(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.event(ne.token,Pe).then(Qe=>Promise.resolve(null!=Qe))})}getAccount(ne){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.getAccount(ne.token)})}getSubscription(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.getSubscription(ne.token,Pe)})}importFacebookFriends(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.importFacebookFriends(ne.token,Pe).then(Qe=>void 0!==Qe)})}importSteamFriends(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.importSteamFriends(ne.token,Pe,Qe).then(T=>void 0!==T)})}getUsers(ne,Pe,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.getUsers(ne.token,Pe,Qe,T).then(N=>{var R={users:[]};return null==N.users||N.users.forEach(U=>{R.users.push({avatar_url:U.avatar_url,create_time:U.create_time,display_name:U.display_name,edge_count:U.edge_count?Number(U.edge_count):0,facebook_id:U.facebook_id,gamecenter_id:U.gamecenter_id,google_id:U.google_id,id:U.id,lang_tag:U.lang_tag,location:U.location,online:U.online,steam_id:U.steam_id,timezone:U.timezone,update_time:U.update_time,username:U.username,metadata:U.metadata?JSON.parse(U.metadata):void 0})}),Promise.resolve(R)})})}joinGroup(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.joinGroup(ne.token,Pe,{}).then(Qe=>void 0!==Qe)})}joinTournament(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.joinTournament(ne.token,Pe,{}).then(Qe=>void 0!==Qe)})}kickGroupUsers(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.kickGroupUsers(ne.token,Pe,Qe).then(T=>Promise.resolve(null!=T))})}leaveGroup(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.leaveGroup(ne.token,Pe,{}).then(Qe=>void 0!==Qe)})}listChannelMessages(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listChannelMessages(ne.token,Pe,Qe,T,N).then(R=>{var U={messages:[],next_cursor:R.next_cursor,prev_cursor:R.prev_cursor,cacheable_cursor:R.cacheable_cursor};return null==R.messages||R.messages.forEach(ie=>{U.messages.push({channel_id:ie.channel_id,code:ie.code?Number(ie.code):0,create_time:ie.create_time,message_id:ie.message_id,persistent:ie.persistent,sender_id:ie.sender_id,update_time:ie.update_time,username:ie.username,content:ie.content?JSON.parse(ie.content):void 0,group_id:ie.group_id,room_name:ie.room_name,user_id_one:ie.user_id_one,user_id_two:ie.user_id_two})}),Promise.resolve(U)})})}listGroupUsers(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listGroupUsers(ne.token,Pe,T,Qe,N).then(R=>{var U={group_users:[],cursor:R.cursor};return null==R.group_users||R.group_users.forEach(ie=>{U.group_users.push({user:{avatar_url:ie.user.avatar_url,create_time:ie.user.create_time,display_name:ie.user.display_name,edge_count:ie.user.edge_count?Number(ie.user.edge_count):0,facebook_id:ie.user.facebook_id,gamecenter_id:ie.user.gamecenter_id,google_id:ie.user.google_id,id:ie.user.id,lang_tag:ie.user.lang_tag,location:ie.user.location,online:ie.user.online,steam_id:ie.user.steam_id,timezone:ie.user.timezone,update_time:ie.user.update_time,username:ie.user.username,metadata:ie.user.metadata?JSON.parse(ie.user.metadata):void 0},state:ie.state?Number(ie.state):0})}),Promise.resolve(U)})})}listUserGroups(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listUserGroups(ne.token,Pe,Qe,T,N).then(R=>{var U={user_groups:[],cursor:R.cursor};return null==R.user_groups||R.user_groups.forEach(ie=>{U.user_groups.push({group:{avatar_url:ie.group.avatar_url,create_time:ie.group.create_time,creator_id:ie.group.creator_id,description:ie.group.description,edge_count:ie.group.edge_count?Number(ie.group.edge_count):0,id:ie.group.id,lang_tag:ie.group.lang_tag,max_count:ie.group.max_count,metadata:ie.group.metadata?JSON.parse(ie.group.metadata):void 0,name:ie.group.name,open:ie.group.open,update_time:ie.group.update_time},state:ie.state?Number(ie.state):0})}),Promise.resolve(U)})})}listGroups(ne,Pe,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listGroups(ne.token,Pe,Qe,T).then(N=>{var R={groups:[]};return null==N.groups||(R.cursor=N.cursor,N.groups.forEach(U=>{R.groups.push({avatar_url:U.avatar_url,create_time:U.create_time,creator_id:U.creator_id,description:U.description,edge_count:U.edge_count?Number(U.edge_count):0,id:U.id,lang_tag:U.lang_tag,max_count:U.max_count,metadata:U.metadata?JSON.parse(U.metadata):void 0,name:U.name,open:U.open,update_time:U.update_time})})),Promise.resolve(R)})})}linkApple(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkApple(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkCustom(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkCustom(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkDevice(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkDevice(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkEmail(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkEmail(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkFacebook(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkFacebook(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkFacebookInstantGame(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkFacebookInstantGame(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkGoogle(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkGoogle(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkGameCenter(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkGameCenter(ne.token,Pe).then(Qe=>void 0!==Qe)})}linkSteam(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.linkSteam(ne.token,Pe).then(Qe=>void 0!==Qe)})}listFriends(ne,Pe,Qe,T){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listFriends(ne.token,Qe,Pe,T).then(N=>{var R={friends:[],cursor:N.cursor};return null==N.friends||N.friends.forEach(U=>{R.friends.push({user:{avatar_url:U.user.avatar_url,create_time:U.user.create_time,display_name:U.user.display_name,edge_count:U.user.edge_count?Number(U.user.edge_count):0,facebook_id:U.user.facebook_id,gamecenter_id:U.user.gamecenter_id,google_id:U.user.google_id,id:U.user.id,lang_tag:U.user.lang_tag,location:U.user.location,online:U.user.online,steam_id:U.user.steam_id,timezone:U.user.timezone,update_time:U.user.update_time,username:U.user.username,metadata:U.user.metadata?JSON.parse(U.user.metadata):void 0,facebook_instant_game_id:U.user.facebook_instant_game_id},state:U.state})}),Promise.resolve(R)})})}listFriendsOfFriends(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listFriendsOfFriends(ne.token,Pe,Qe).then(T=>{var N={friends_of_friends:[],cursor:T.cursor};return null==T.friends_of_friends||T.friends_of_friends.forEach(R=>{N.friends_of_friends.push({referrer:R.referrer,user:{avatar_url:R.user.avatar_url,create_time:R.user.create_time,display_name:R.user.display_name,edge_count:R.user.edge_count?Number(R.user.edge_count):0,facebook_id:R.user.facebook_id,gamecenter_id:R.user.gamecenter_id,google_id:R.user.google_id,id:R.user.id,lang_tag:R.user.lang_tag,location:R.user.location,online:R.user.online,steam_id:R.user.steam_id,timezone:R.user.timezone,update_time:R.user.update_time,username:R.user.username,metadata:R.user.metadata?JSON.parse(R.user.metadata):void 0,facebook_instant_game_id:R.user.facebook_instant_game_id}})}),Promise.resolve(N)})})}listLeaderboardRecords(ne,Pe,Qe,T,N,R){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listLeaderboardRecords(ne.token,Pe,Qe,T,N,R).then(U=>{var ie={next_cursor:U.next_cursor,prev_cursor:U.prev_cursor,rank_count:U.rank_count?Number(U.rank_count):0,owner_records:[],records:[]};return null!=U.owner_records&&U.owner_records.forEach($=>{ie.owner_records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),null!=U.records&&U.records.forEach($=>{ie.records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),Promise.resolve(ie)})})}listLeaderboardRecordsAroundOwner(ne,Pe,Qe,T,N,R){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listLeaderboardRecordsAroundOwner(ne.token,Pe,Qe,T,N,R).then(U=>{var ie={next_cursor:U.next_cursor,prev_cursor:U.prev_cursor,rank_count:U.rank_count?Number(U.rank_count):0,owner_records:[],records:[]};return null!=U.owner_records&&U.owner_records.forEach($=>{ie.owner_records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),null!=U.records&&U.records.forEach($=>{ie.records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),Promise.resolve(ie)})})}listMatches(ne,Pe,Qe,T,N,R,U){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listMatches(ne.token,Pe,Qe,T,N,R,U)})}listNotifications(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listNotifications(ne.token,Pe,Qe).then(T=>{var N={cacheable_cursor:T.cacheable_cursor,notifications:[]};return null==T.notifications||T.notifications.forEach(R=>{N.notifications.push({code:R.code?Number(R.code):0,create_time:R.create_time,id:R.id,persistent:R.persistent,sender_id:R.sender_id,subject:R.subject,content:R.content?JSON.parse(R.content):void 0})}),Promise.resolve(N)})})}listStorageObjects(ne,Pe,Qe,T,N){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listStorageObjects(ne.token,Pe,Qe,T,N).then(R=>{var U={objects:[],cursor:R.cursor};return null==R.objects||R.objects.forEach(ie=>{U.objects.push({collection:ie.collection,key:ie.key,permission_read:ie.permission_read?Number(ie.permission_read):0,permission_write:ie.permission_write?Number(ie.permission_write):0,value:ie.value?JSON.parse(ie.value):void 0,version:ie.version,user_id:ie.user_id,create_time:ie.create_time,update_time:ie.update_time})}),Promise.resolve(U)})})}listTournaments(ne,Pe,Qe,T,N,R,U){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listTournaments(ne.token,Pe,Qe,T,N,R,U).then(ie=>{var $={cursor:ie.cursor,tournaments:[]};return null!=ie.tournaments&&ie.tournaments.forEach(de=>{$.tournaments.push({id:de.id,title:de.title,description:de.description,duration:de.duration?Number(de.duration):0,category:de.category?Number(de.category):0,sort_order:de.sort_order?Number(de.sort_order):0,size:de.size?Number(de.size):0,max_size:de.max_size?Number(de.max_size):0,max_num_score:de.max_num_score?Number(de.max_num_score):0,can_enter:de.can_enter,end_active:de.end_active?Number(de.end_active):0,next_reset:de.next_reset?Number(de.next_reset):0,metadata:de.metadata?JSON.parse(de.metadata):void 0,create_time:de.create_time,start_time:de.start_time,end_time:de.end_time,start_active:de.start_active,authoritative:de.authoritative})}),Promise.resolve($)})})}listSubscriptions(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listSubscriptions(ne.token,{cursor:Pe,limit:Qe})})}listTournamentRecords(ne,Pe,Qe,T,N,R){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listTournamentRecords(ne.token,Pe,Qe,T,N,R).then(U=>{var ie={next_cursor:U.next_cursor,prev_cursor:U.prev_cursor,owner_records:[],records:[]};return null!=U.owner_records&&U.owner_records.forEach($=>{ie.owner_records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),null!=U.records&&U.records.forEach($=>{ie.records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),Promise.resolve(ie)})})}listTournamentRecordsAroundOwner(ne,Pe,Qe,T,N,R){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.listTournamentRecordsAroundOwner(ne.token,Pe,Qe,T,N,R).then(U=>{var ie={next_cursor:U.next_cursor,prev_cursor:U.prev_cursor,owner_records:[],records:[]};return null!=U.owner_records&&U.owner_records.forEach($=>{ie.owner_records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),null!=U.records&&U.records.forEach($=>{ie.records.push({expiry_time:$.expiry_time,leaderboard_id:$.leaderboard_id,metadata:$.metadata?JSON.parse($.metadata):void 0,num_score:$.num_score?Number($.num_score):0,owner_id:$.owner_id,rank:$.rank?Number($.rank):0,score:$.score?Number($.score):0,subscore:$.subscore?Number($.subscore):0,update_time:$.update_time,username:$.username,max_num_score:$.max_num_score?Number($.max_num_score):0})}),Promise.resolve(ie)})})}promoteGroupUsers(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.promoteGroupUsers(ne.token,Pe,Qe)})}readStorageObjects(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.readStorageObjects(ne.token,Pe).then(Qe=>{var T={objects:[]};return null==Qe.objects||Qe.objects.forEach(N=>{T.objects.push({collection:N.collection,key:N.key,permission_read:N.permission_read?Number(N.permission_read):0,permission_write:N.permission_write?Number(N.permission_write):0,value:N.value?JSON.parse(N.value):void 0,version:N.version,user_id:N.user_id,create_time:N.create_time,update_time:N.update_time})}),Promise.resolve(T)})})}rpc(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.rpcFunc(ne.token,Pe,JSON.stringify(Qe)).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0}))})}rpcHttpKey(ne,Pe,Qe){return M(this,null,function*(){return this.apiClient.rpcFunc2("",Pe,Qe&&JSON.stringify(Qe)||"",ne).then(T=>Promise.resolve({id:T.id,payload:T.payload?JSON.parse(T.payload):void 0})).catch(T=>{throw T})})}sessionLogout(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.sessionLogout(ne.token,{refresh_token:Qe,token:Pe}).then(T=>void 0!==T)})}sessionRefresh(ne){return M(this,arguments,function*(Pe,Qe={}){if(!Pe)return console.error("Cannot refresh a null session."),Pe;Pe.created&&Pe.expires_at-Pe.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),Pe.created&&Pe.refresh_expires_at-Pe.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const T=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:Pe.refresh_token,vars:Qe});return Pe.update(T.token,T.refresh_token),Pe})}unlinkApple(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkApple(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkCustom(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkCustom(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkDevice(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkDevice(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkEmail(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkEmail(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkFacebook(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkFacebook(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkFacebookInstantGame(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkFacebookInstantGame(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkGoogle(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkGoogle(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkGameCenter(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkGameCenter(ne.token,Pe).then(Qe=>void 0!==Qe)})}unlinkSteam(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.unlinkSteam(ne.token,Pe).then(Qe=>void 0!==Qe)})}updateAccount(ne,Pe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.updateAccount(ne.token,Pe).then(Qe=>void 0!==Qe)})}updateGroup(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.updateGroup(ne.token,Pe,Qe).then(T=>void 0!==T)})}validatePurchaseApple(ne,Pe,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validatePurchaseApple(ne.token,{receipt:Pe,persist:Qe})})}validatePurchaseFacebookInstant(ne,Pe,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validatePurchaseFacebookInstant(ne.token,{signed_request:Pe,persist:Qe})})}validatePurchaseGoogle(ne,Pe,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validatePurchaseGoogle(ne.token,{purchase:Pe,persist:Qe})})}validatePurchaseHuawei(ne,Pe,Qe,T=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validatePurchaseHuawei(ne.token,{purchase:Pe,signature:Qe,persist:T})})}validateSubscriptionApple(ne,Pe,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validateSubscriptionApple(ne.token,{receipt:Pe,persist:Qe})})}validateSubscriptionGoogle(ne,Pe,Qe=!0){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.validateSubscriptionGoogle(ne.token,{receipt:Pe,persist:Qe})})}writeLeaderboardRecord(ne,Pe,Qe){return M(this,null,function*(){return this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne)),this.apiClient.writeLeaderboardRecord(ne.token,Pe,{metadata:Qe.metadata?JSON.stringify(Qe.metadata):void 0,score:Qe.score,subscore:Qe.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}writeStorageObjects(ne,Pe){return M(this,null,function*(){this.autoRefreshSession&&ne.refresh_token&&ne.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(ne));var Qe={objects:[]};return Pe.forEach(T=>{Qe.objects.push({collection:T.collection,key:T.key,permission_read:T.permission_read,permission_write:T.permission_write,value:JSON.stringify(T.value),version:T.version})}),this.apiClient.writeStorageObjects(ne.token,Qe)})}writeTournamentRecord(ne,Pe,Qe){return M(this,null,function*(){return this.apiClient.writeTournamentRecord(ne.token,Pe,{metadata:Qe.metadata?JSON.stringify(Qe.metadata):void 0,score:Qe.score,subscore:Qe.subscore}).then(T=>Promise.resolve({expiry_time:T.expiry_time,leaderboard_id:T.leaderboard_id,metadata:T.metadata?JSON.parse(T.metadata):void 0,num_score:T.num_score?Number(T.num_score):0,owner_id:T.owner_id,score:T.score?Number(T.score):0,subscore:T.subscore?Number(T.subscore):0,update_time:T.update_time,username:T.username,max_num_score:T.max_num_score?Number(T.max_num_score):0,rank:T.rank?Number(T.rank):0}))})}},cn=Ge(8326),Tn=Ge(617),sn=Ge(7100),_n=Ge(92),tr=Ge(3953),Xt=Ge(9900),hn=Ge(8065),Fn=Ge(755),Cn=Ge(5547),Wn=Ge(5374),yr=Ge(3656),fr=Ge(4234),Ur=Ge(3307),vr=function(ne){return ne[ne.MANAGE_TODO=10]="MANAGE_TODO",ne[ne.EDIT_PROFILE=11]="EDIT_PROFILE",ne[ne.MANAGE_POST=12]="MANAGE_POST",ne[ne.GROUP_IMAGE_CHANGED=13]="GROUP_IMAGE_CHANGED",ne[ne.ADD_CHANNEL=14]="ADD_CHANNEL",ne[ne.NAME_OVERRIDED=15]="NAME_OVERRIDED",ne[ne.CHATROOM_CHECKED=102]="CHATROOM_CHECKED",ne}(vr||{});let ei=(()=>{var ne;class Pe{constructor(T,N,R,U,ie,$,de,Ae,tt){this.p5toast=T,this.statusBar=N,this.indexed=R,this.noti=U,this.alertCtrl=ie,this.lang=$,this.global=de,this.navCtrl=Ae,this.p5loading=tt,this.AutoConnect=!1,this.profile={content:{type:void 0,path:void 0}},this.servers={official:{},unofficial:{}},this.showServer=!1,this.OnInit=!0,this.NakamaInitEnd=!1,this.NeedLocalPush=[],this.HasRemovedChannel=!1,this.TogglingSession=!1,this.noti_origin={},this.AfterLoginActDone=!1,this.AfterLoginAct=[],this.RemoteTodoCounter={},this.PromotedGroup={},this.users={self:{},deleted:{},official:{},unofficial:{}},this.notifications_rearrange=[],this.groups={official:{},unofficial:{}},this.channels_orig={local:{},official:{},unofficial:{}},this.noti_id=2e3,this.registered_id=[],this.channels=[],this.socket_reactive={},this.on_socket_connected={},this.on_socket_disconnected={},this.match_act={},this.last_channel_chat_id="",this.trace_chat_history_list=void 0,this.trace_chat_log_path=[],this.on_working_modulate_chatlog=!1,this.opened_page_info={},this.subscribe_lock=!1,this.has_new_channel_msg=!1,this.has_new_post=!1,this.posts_orig={local:{target:{me:{}}},official:{},unofficial:{}},this.posts=[],this.HyperLinkDescList=[],this.isRequestingLinkInfo=!1,this.TranslateDescList=[],this.isTranslating=!1,this.OnTransfer={},this.OnTransferMessage={},this.usernameOverride={local:{target:{}}},this.post_counter={local:{target:{me:0}},official:{},unofficial:{}},this.AutoConnect=!localStorage.getItem("autoConnect"),de.CallbackNakama=this,U.NakamaCallback=this}initialize(){var T=this;return(0,F.A)(function*(){yield T.set_all_todo_notification();const N=yield T.indexed.loadTextFromUserPath("servers/self/profile.json");N&&(T.users.self=JSON.parse(N));try{let de=(yield T.indexed.loadTextFromUserPath("servers/self/profile.img")).replace(/"|\\|=/g,"");de&&(T.users.self.img=de)}catch{}yield T.LoadOverridesOffline();let R=yield T.indexed.loadTextFromUserPath("servers/groups.json");R&&(T.groups=JSON.parse(R)),T.rearrange_group_list().forEach(function(){var de=(0,F.A)(function*(Ae){let tt=yield T.indexed.loadTextFromUserPath(`servers/${Ae.server.isOfficial}/${Ae.server.target}/groups/${Ae.id}.img`);if(tt&&(Ae.img=tt.replace(/"|=|\\/g,"")),"missing"!=Ae.status){delete Ae.status;let pt=Ae.server.isOfficial,Kt=Ae.server.target;if(T.CreateEmptyForm(pt,Kt),Ae.users)for(let Fe=0,We=Ae.users.length;Fe<We;Fe++)Ae.users[Fe].is_me||(Ae.users[Fe].user=T.load_other_user(Ae.users[Fe].user.id,pt,Kt))}});return function(Ae){return de.apply(this,arguments)}}()),yield T.load_channel_list(),T.load_posts_counter(),yield T.CheckIfLostLocal(),T.rearrange_channels();const ie=yield T.indexed.loadTextFromUserPath("servers/list.json");if(ie&&(T.statusBar.groupServer=JSON.parse(ie)),T.catch_group_server_header("offline"),_n.Yl)yield T.add_group_server({name:"Open pjcone server",isOfficial:"official",useSSL:!1,address:"168.107.32.84",is_auto_added:!0});else if("https://is2you2.github.io"!=window.location.origin&&window.location.origin.indexOf("://localhost")<0){const de=window.location.host.split(":")[0];yield T.add_group_server({name:de,useSSL:"https:"==window.location.protocol,address:de,is_auto_added:!0})}const $=yield T.indexed.loadTextFromUserPath("servers/list_detail.csv");if($)$.split("\n").forEach(Ae=>{const tt=Ae.split(",");let Kt={isOfficial:tt[1],name:tt[2],target:tt[3],address:tt[4],nakama_port:tt[5]?+tt[5]:void 0,cdn_port:tt[7]?+tt[7]:void 0,apache_port:tt[8]?+tt[8]:void 0,square_port:tt[9]?+tt[9]:void 0,webrtc_port:tt[10]?+tt[10]:void 0,webpush_port:tt[11]?+tt[11]:void 0,webpush_tog:tt[12]?"true"==tt[12]:void 0,libretranslate_port:tt[13]?+tt[13]:void 0,useSSL:"true"==tt[6]};T.servers[Kt.isOfficial][Kt.target]={},T.servers[Kt.isOfficial][Kt.target].info=Kt,T.init_server(Kt),T.AutoConnect&&T.users.self.online&&(T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode(),T.init_session(Kt))});else{const de=location.href.split("?").length>1;(T.users.self.online||de)&&(yield T.toggle_all_session(),Object.keys(T.statusBar.groupServer).forEach(tt=>{T.servers[tt]?Object.keys(T.statusBar.groupServer[tt]).forEach(Kt=>{T.servers[tt][Kt]||delete T.statusBar.groupServer[tt][Kt]}):delete T.statusBar.groupServer[tt]}))}T.NakamaInitEnd=!0})()}CheckShowServerInfo(){let T=0;Object.keys(this.servers).forEach(R=>{const U=Object.keys(this.servers[R]).length;T+=U}),this.showServer=T>1}CheckIfLostLocal(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("servers/local/target/channels");for(let R of N)try{let U=R.split("/");if(5==U.length){let ie=U.pop();if(T.channels_orig.local.target||(T.channels_orig.local.target={}),!T.channels_orig.local.target[ie]){let $={CDN:0,id:ie,cnoti_id:T.get_noti_id(),info:{isOfficial:"local",target:"target",name:T.lang.text.Nakama.DamagedChannel},local:!0,redirect:{type:0},server:{isOfficial:"local",target:"target",name:"\uc0ad\uc81c\ub41c \uc11c\ubc84"},status:"online",title:T.lang.text.Nakama.DamagedChannel};T.channels_orig.local.target[ie]=$}}}catch(U){console.log("\ub85c\uceec \ucc44\ub110 \uc7ac\uac80\ud1a0 \ub2e8\uacc4 \uc624\ub958: ",U)}})()}set_all_todo_notification(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("info.todo");for(let R=0,U=N.length;R<U;R++){let ie=yield T.indexed.loadTextFromUserPath(N[R]);if(ie){let $=JSON.parse(ie);T.registered_id.push($.noti_id),T.set_todo_notification($)}}})()}getGodotDBRecursive(){var T=this;return(0,F.A)(function*(){try{if(void 0===T.indexed.godotDB)throw"Retry catch godotDB";return}catch{return yield new Promise(R=>{setTimeout(()=>{R(void 0)},100)}),yield T.getGodotDBRecursive()}})()}open_add_todo_page(T="",N="portal/main/add-todo-menu"){this.AddTodoLinkAct?this.AddTodoLinkAct(T):this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(N,{animation:Tn.V5,state:{data:T}})})}open_others_profile(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("others-profile",{animation:Tn.V5,state:T})})}set_todo_notification(T,N=!1){var R=this;if(this.RemoveLocalPushSchedule(T),((N?0:T.startFrom||T.limit)>Date.now()||N)&&(N&&((T=JSON.parse(JSON.stringify(T))).force_noti=N),this.NeedLocalPush.push(T)),!this.p5todotimer&&this.NeedLocalPush.length){let ie=[];this.global.windowOnFocusAct["todo-timer"]=()=>{ie.forEach(de=>clearTimeout(de)),ie.length=0};const $=de=>{const Ae=de.custom_color;let tt;switch(de.importance){case"0":tt="58a192";break;case"1":tt="ddbb41";break;case"2":tt="b95437"}return Ae?Ae.substring(1):tt};this.global.WindowOnBlurAct["todo-timer"]=()=>{for(let de=this.NeedLocalPush.length-1;de>=0;de--){const Ae=this.NeedLocalPush[de],tt=JSON.stringify(Ae),Kt=new Date(Ae.force_noti?0:Ae.startFrom||Ae.limit).getTime()-(new Date).getTime();if(Kt>0&&Kt<2147483647){let Fe=setTimeout((0,F.A)(function*(){var We,at;let Ze;try{let ii;try{ii=`todo/${Ae.id}_${Ae.remote.isOfficial}_${Ae.remote.target}/thumbnail.png`}catch{ii=`todo/${Ae.id}/thumbnail.png`}let Bi=yield R.indexed.loadBlobFromUserPath(ii,"image/png");Ze=URL.createObjectURL(Bi)}catch{}const xt=$(Ae),Zt=[{title:R.lang.text.TodoDetail.TodoComplete,action:"done"},{title:R.lang.text.TodoDetail.remove,action:"delete"}];let En="";try{var zn,or;En=R.GetNodejsServerAddress(null===(zn=Ae.remote)||void 0===zn?void 0:zn.isOfficial,null===(or=Ae.remote)||void 0===or?void 0:or.target,"nakama_port")}catch{}yield R.noti.PushLocal({id:Ae.noti_id,title:Ae.title,body:Ae.description,image:Ze,actions_wm:Zt,data_wm:{id:Ae.id,isOfficial:null===(We=Ae.remote)||void 0===We?void 0:We.isOfficial,target:null===(at=Ae.remote)||void 0===at?void 0:at.target,data:{url:`/?todo=${tt}&address=${En}`}},smallIcon_ln:"todo",bgcolor:xt},void 0,ii=>{R.open_add_todo_page(tt,"add-todo-menu")},Ae.force_noti),setTimeout(()=>{try{URL.revokeObjectURL(Ze)}catch{}},1e3),R.NeedLocalPush.splice(de,1)}),Kt);ie.push(Fe)}}},this.p5todotimer=new cn(de=>{de.setup=()=>{de.noCanvas(),de.frameRate(.5)},de.draw=()=>{const Ae=Date.now();for(let tt=this.NeedLocalPush.length-1;tt>=0;tt--)(this.NeedLocalPush[tt].force_noti?0:this.NeedLocalPush[tt].startFrom||this.NeedLocalPush[tt].limit)<Ae&&function(){var Fe=(0,F.A)(function*(){var We,at;let Ze;try{let ii;try{ii=`todo/${R.NeedLocalPush[tt].id}_${R.NeedLocalPush[tt].remote.isOfficial}_${R.NeedLocalPush[tt].remote.target}/thumbnail.png`}catch{ii=`todo/${R.NeedLocalPush[tt].id}/thumbnail.png`}let Bi=yield R.indexed.loadBlobFromUserPath(ii,"image/png");Ze=URL.createObjectURL(Bi)}catch{}const xt=JSON.stringify(R.NeedLocalPush[tt]),Zt=$(R.NeedLocalPush[tt]);let En="";try{var zn,or;En=R.GetNodejsServerAddress(null===(zn=R.NeedLocalPush[tt].remote)||void 0===zn?void 0:zn.isOfficial,null===(or=R.NeedLocalPush[tt].remote)||void 0===or?void 0:or.target,"nakama_port")}catch{}yield R.noti.PushLocal({id:R.NeedLocalPush[tt].noti_id,title:R.NeedLocalPush[tt].title,body:R.NeedLocalPush[tt].description,image:Ze,data_wm:{id:R.NeedLocalPush[tt].id,isOfficial:null===(We=R.NeedLocalPush[tt].remote)||void 0===We?void 0:We.isOfficial,target:null===(at=R.NeedLocalPush[tt].remote)||void 0===at?void 0:at.target,data:{url:`/?todo=${xt}&address=${En}`}},smallIcon_ln:"todo",bgcolor:Zt},void 0,ii=>{R.open_add_todo_page(xt,"add-todo-menu")},R.NeedLocalPush[tt].force_noti),setTimeout(()=>{try{URL.revokeObjectURL(Ze)}catch{}},1e3),R.NeedLocalPush.splice(tt,1)});return function(){return Fe.apply(this,arguments)}}()();this.NeedLocalPush.length||(de.remove(),this.p5todotimer=null)}})}}RemoveLocalPushSchedule(T){for(let N=this.NeedLocalPush.length-1;N>=0;N--)if(this.NeedLocalPush[N].id==T.id){this.NeedLocalPush.splice(N,1);break}}init_server(T){this.servers[T.isOfficial][T.target]||(this.servers[T.isOfficial][T.target]={}),this.servers[T.isOfficial][T.target].client=new In(T.key||"defaultkey",T.address,(T.nakama_port||7350).toString(),T.useSSL||!1,3e5,!0)}go_to_chatroom(T,N){return this.has_new_channel_msg=!1,T.update&&delete T.update,this.ChatroomLinkAct?this.ChatroomLinkAct(T,N):(this.SelectSubscribesTab&&this.SelectSubscribesTab(!1),this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("portal/subscribes/chat-room",{state:{info:T,file:N}})})),!1}add_new_group(){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("add-group",{animation:Tn.V5})})}SaveLocalAct(T,N=!1){this.channels_orig.local||(this.channels_orig.local={}),this.channels_orig.local.target||(this.channels_orig.local.target={});let R=this.CreateRandomLocalId(T.volatile);this.channels_orig.local.target[R]={id:R,cnoti_id:this.get_noti_id(),local:!0,title:T.name,redirect:{type:0},volatile:T.volatile,status:"certified",info:{...T,status:"certified"}},T.img&&this.indexed.saveTextFileToUserPath(T.img,`servers/local/target/groups/${R}.img`),this.rearrange_channels(),N||setTimeout(()=>{this.navCtrl.pop()},500)}CreateRandomLocalId(T){let N="";for(let U=0,ie=16;U<ie;U++){let $=Math.floor(62*Math.random());N+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt($)}return T&&(N="tmp_files_"+N),this.channels_orig.local.target[N]?this.CreateRandomLocalId(T):N}clear_removed_groups(){var T=this;this.HasRemovedChannel&&this.alertCtrl.create({header:this.lang.text.Nakama.RemovedChannels,message:this.lang.text.Nakama.ClearMissings,buttons:[{text:this.lang.text.UserFsDir.Delete,cssClass:"redfont",handler:()=>{!function(){var R=(0,F.A)(function*(){const U=`subscribes_remove_1:1_${Date.now()}`;for(let pt=T.channels.length-1;pt>=0;pt--)if("missing"==T.channels[pt].status){var ie,$;const Kt=T.channels[pt].server.isOfficial,Fe=T.channels[pt].server.target,We=T.channels[pt];let Ze,at=We.title;at=2==(null===(ie=We.redirect)||void 0===ie?void 0:ie.type)?at||T.lang.text.Profile.noname_user:at||T.lang.text.ChatRoom.noname_chatroom,yield T.p5loading.update({id:U});try{Ze=T.servers[Kt][Fe].info}catch(En){console.log("\uc0ad\uc81c\ub41c \uc11c\ubc84\uc758 \ucc44\ub110 \uc0ad\uc81c: ",En)}try{yield T.remove_group_list(T.groups[Kt][Fe][We.group_id],Kt,Fe,!0)}catch{}delete T.channels_orig[Kt][Fe][We.id];try{yield T.remove_channel_files(Kt,Fe,We.id,void 0,U)}catch{}let xt=`${We.id}_${T.users.self.display_name}`;try{xt=`${We.info.id}_${Ze.session.user_id}`}catch{}if(0==(null===($=We.id)||void 0===$?void 0:$.indexOf("4.")))try{xt=`${We.user_id_one!=T.servers[Kt][Fe].session.user_id?We.user_id_one:We.user_id_two}_${T.servers[Kt][Fe].session.user_id}`}catch{}try{var de;let En=localStorage.getItem("fallback_fs");if(!En)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let zn=En.split("://"),or=zn.pop().split(":"),ii=zn.pop();ii?ii+=":":ii=T.global.checkProtocolFromAddress(or[0])?"https:":"http:";const Bi=null===(de=or[1])||void 0===de?void 0:de.split(","),Rs=`${ii}//${or[0]}:${(null==Bi?void 0:Bi[1])||9002}/`;or&&(yield T.global.remove_files_from_storage_with_key(Rs,xt,{}))}catch{}try{var Ae,tt;let En=T.GetNodejsServerAddress(null===(Ae=Ze)||void 0===Ae?void 0:Ae.isOfficial,null===(tt=Ze)||void 0===tt?void 0:tt.target,"apache_port");yield T.global.remove_files_from_storage_with_key(En,xt,{apache_port:Ze.apache_port,cdn_port:Ze.cdn_port,user_id:T.servers[Kt][Fe].session.user_id})}catch{}let Zt=yield T.indexed.GetFileListFromDB(`servers/${Kt}/${Fe}/channels/${We.id}`);for(let En=0,zn=Zt.length;En<zn;En++){yield T.p5loading.update({id:U,message:`${T.lang.text.UserFsDir.DeleteFile}: ${at} (${Zt[En].split("/").pop()})`,progress:En/zn});try{yield T.indexed.removeFileFromUserPath(Zt[En])}catch{}}T.rearrange_channels()}T.p5loading.remove(U)});return function(){return R.apply(this,arguments)}}()()}}]}).then(N=>{N.onDidDismiss().then(()=>{this.global.BlockMainShortcut=!1}),this.global.BlockMainShortcut=!0,N.present()})}open_profile_page(T){this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward("group-server",{animation:Tn.V5,state:T})})}open_post(T,N,R=""){T.router=R,this.global.RemoveAllModals(()=>{this.navCtrl.navigateForward(R+"post-viewer",{animation:Tn.V5,state:{data:T,index:N+1}})})}init_all_sessions(){var T=this;return(0,F.A)(function*(){T.global.NeedBackgroundMode&&!T.global.IsBackgroundMode&&T.global.ToggleBackgroundMode();const N="nakama_login";let R=Object.keys(T.servers.official);for(let ie=0,$=R.length;ie<$;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.official[R[ie]].info.name}`,forceEnd:null},!0),yield T.init_session(T.servers.official[R[ie]].info);let U=Object.keys(T.servers.unofficial);for(let ie=0,$=U.length;ie<$;ie++)yield T.p5loading.update({id:N,message:`${T.lang.text.Nakama.PendingLogin}: ${T.servers.unofficial[U[ie]].info.name}`,forceEnd:null},!0),yield T.init_session(T.servers.unofficial[U[ie]].info);return R.length+U.length})()}logout_all_server(){let T=Object.keys(this.statusBar.groupServer);for(let N=0,R=T.length;N<R;N++){let U=Object.keys(this.statusBar.groupServer[T[N]]);for(let ie=0,$=U.length;ie<$;ie++)"online"==this.statusBar.groupServer[T[N]][U[ie]]&&(this.servers[T[N]][U[ie]].socket?this.servers[T[N]][U[ie]].socket.disconnect(!0):this.link_group(T[N],U[ie],!1))}this.AfterLoginAct.length=0,this.AfterLoginActDone=!1}toggle_all_session(){var T=this;return(0,F.A)(function*(){if(T.TogglingSession)return;const N="nakama_login";if(T.TogglingSession=!0,"online"==T.statusBar.settings.groupServer)T.logout_all_server(),T.p5toast.show({text:T.lang.text.Nakama.SessionLogout});else{yield T.p5loading.update({id:N,message:T.lang.text.Nakama.PendingLogin,forceEnd:null});try{(yield T.init_all_sessions())||(yield T.p5loading.update({id:N,message:T.lang.text.Nakama.NoLoginServer},!0))}catch(R){console.log("\ud14c\uc2a4\ud2b8 \uc11c\ubc84 \uc5f0\uacb0 \uc624\ub958: ",R)}}T.p5loading.remove(N),T.TogglingSession=!1})()}link_group(T,N,R="offline"==this.statusBar.groupServer[T][N]){var U=this;return(0,F.A)(function*(){if(R)U.statusBar.groupServer[T][N]="pending",U.catch_group_server_header("pending"),U.users.self.online&&(yield U.init_session(U.servers[T][N].info));else{U.channels_orig[T]&&U.channels_orig[T][N]&&Object.keys(U.channels_orig[T][N]).forEach($=>{"missing"!=U.channels_orig[T][N][$].status&&delete U.channels_orig[T][N][$].status}),U.groups[T]&&U.groups[T][N]&&Object.keys(U.groups[T][N]).forEach($=>{"missing"!=U.groups[T][N][$].status&&(U.groups[T][N][$].status="offline")}),U.set_group_statusBar("offline",T,N),U.statusBar.groupServer[T][N]="offline",U.catch_group_server_header("offline");try{yield U.servers[T][N].client.sessionLogout(U.servers[T][N].session,U.servers[T][N].session.token,U.servers[T][N].session.refresh_token)}catch{}U.noti_origin[T]&&U.noti_origin[T][N]&&delete U.noti_origin[T][N],U.rearrange_notifications(),U.channels_orig[T]&&U.channels_orig[T][N]&&Object.keys(U.channels_orig[T][N]).forEach($=>{"missing"!=U.channels_orig[T][N][$].status&&delete U.channels_orig[T][N][$].status})}U.indexed.saveTextFileToUserPath(JSON.stringify(U.statusBar.groupServer),"servers/list.json")})()}get_all_online_server(){let T=[];return Object.keys(this.servers.official).forEach(U=>{"online"==this.statusBar.groupServer.official[U]&&T.push(this.servers.official[U])}),Object.keys(this.servers.unofficial).forEach(U=>{"online"==this.statusBar.groupServer.unofficial[U]&&T.push(this.servers.unofficial[U])}),T}get_all_server_info(T=!1,N=!1,R=!1){let U=[],ie=Object.keys(this.servers.official);return T&&ie.forEach(de=>{N?("online"==this.statusBar.groupServer.official[de]||"pending"==this.statusBar.groupServer.official[de]&&!R)&&U.push(this.servers.official[de].info):this.servers.official[de]&&U.push(this.servers.official[de].info)}),Object.keys(this.servers.unofficial).forEach(de=>{N?("online"==this.statusBar.groupServer.unofficial[de]||"pending"==this.statusBar.groupServer.unofficial[de]&&!R)&&U.push(this.servers.unofficial[de].info):this.servers.unofficial[de]&&U.push(this.servers.unofficial[de].info)}),U}add_group_server(T,N=(()=>{})){var R,U=this;if(null!==(R=this.statusBar.groupServer.official)&&void 0!==R&&R[T.target||T.name]||this.statusBar.groupServer.unofficial[T.target||T.name])return void(T.is_auto_added||this.p5toast.show({text:`${this.lang.text.Nakama.AlreadyHaveTargetName}: ${T.target||T.name}`}));T.target=T.target||T.name,T.address=T.address||location.host.split(":").shift(),T.nakama_port=T.nakama_port,T.cdn_port=T.cdn_port,T.apache_port=T.apache_port,T.square_port=T.square_port,T.webrtc_port=T.webrtc_port,T.webpush_port=T.webpush_port,T.useSSL=T.useSSL||!1,T.isOfficial=T.isOfficial||"unofficial",T.key=T.key||"";let ie=(new Date).getTime().toString();return ie+=`,${T.isOfficial}`,ie+=`,${T.name}`,ie+=`,${T.target}`,ie+=`,${T.address}`,ie+=`,${T.nakama_port||""}`,ie+=`,${T.useSSL||""}`,ie+=`,${T.cdn_port||""}`,ie+=`,${T.apache_port||""}`,ie+=`,${T.square_port||""}`,ie+=`,${T.webrtc_port||""}`,ie+=`,${T.webpush_port||""}`,ie+=`,${T.libretranslate_port||""}`,new Promise(function(){var $=(0,F.A)(function*(de){yield U.AutoGenWebRTCInfo(T),"official"!=T.isOfficial?U.indexed.loadTextFromUserPath("servers/list_detail.csv",function(){var Ae=(0,F.A)(function*(tt,pt){let Kt=[];tt&&pt&&(Kt=pt.split("\n")),Kt.push(ie),U.indexed.saveTextFileToUserPath(Kt.join("\n"),"servers/list_detail.csv").then(()=>{U.init_server(T),U.servers[T.isOfficial][T.target].info={...T},N()}),U.statusBar.groupServer[T.isOfficial][T.target]="offline",yield U.indexed.saveTextFileToUserPath(JSON.stringify(U.statusBar.groupServer),"servers/list.json"),de()});return function(tt,pt){return Ae.apply(this,arguments)}}()):(U.init_server(T),U.servers[T.isOfficial][T.target].info={...T},U.statusBar.groupServer[T.isOfficial][T.target]="offline",de())});return function(de){return $.apply(this,arguments)}}())}modify_group_server(T){var N=this;return(0,F.A)(function*(){let R=(new Date).getTime().toString();R+=`,${T.isOfficial}`,R+=`,${T.name}`,R+=`,${T.target}`,R+=`,${T.address}`,R+=`,${T.nakama_port||""}`,R+=`,${T.useSSL||""}`,R+=`,${T.cdn_port||""}`,R+=`,${T.apache_port||""}`,R+=`,${T.square_port||""}`,R+=`,${T.webrtc_port||""}`,R+=`,${T.webpush_port||""}`,R+=`,${T.webpush_tog||""}`,R+=`,${T.libretranslate_port||""}`;const U=yield N.indexed.loadTextFromUserPath("servers/list_detail.csv");let ie=[];U&&(ie=U.split("\n"));for(let $=0,de=ie.length;$<de;$++)if(ie[$].split(",")[3]==T.target){ie.splice($,1);break}ie.push(R),yield N.indexed.saveTextFileToUserPath(ie.join("\n"),"servers/list_detail.csv")})()}AutoGenWebRTCInfo(T){var N=this;return(0,F.A)(function*(){let R={urls:[`stun:${T.address}:${T.webrtc_port||3478}`,`turn:${T.address}:${T.webrtc_port||3478}`],username:"username",credential:"password"};yield N.SaveWebRTCServer(R,!0)})()}SaveWebRTCServer(T,N=!1){var R=this;return(0,F.A)(function*(){let U=(yield R.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",ie=JSON.parse(U),$=!1;for(let Ae=0,tt=Object.keys(ie).length;Ae<tt;Ae++)if(R.catch_address_from_rtc_server_address(T)==R.catch_address_from_rtc_server_address(ie[Ae])){ie[Ae]=T,$=!0;break}return(!$||N)&&($||ie.push(T),R.p5loading.toast(R.lang.text.Nakama.SaveWebRTCServer,"webrtc_server_save"),yield R.indexed.saveTextFileToUserPath(JSON.stringify(ie),"servers/webrtc_server.json")),$})()}RemoveWebRTCServer(T){var N=this;return(0,F.A)(function*(){let R=(yield N.indexed.loadTextFromUserPath("servers/webrtc_server.json"))||"[]",U=JSON.parse(R);for(let $=0,de=Object.keys(U).length;$<de;$++){let Ae=N.catch_address_from_rtc_server_address(U[$]);T==Ae&&U.splice($,1)}yield N.indexed.saveTextFileToUserPath(JSON.stringify(U),"servers/webrtc_server.json")})()}catch_address_from_rtc_server_address(T){let N;try{let R=T.urls[0];(R.indexOf("stun:")>=0||R.indexOf("turn:")>=0)&&(R=R.substring(5));let U=R.lastIndexOf(":");N=R.substring(0,U)}catch(R){console.error("webrtc \uc11c\ubc84 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",R)}return N}catch_group_server_header(T){let N=T;this.statusBar.settings.groupServer=T,setTimeout(()=>{Object.keys(this.statusBar.groupServer.official).forEach(U=>{switch(this.statusBar.groupServer.official[U]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),"online"!=N&&Object.keys(this.statusBar.groupServer.unofficial).forEach(ie=>{switch(this.statusBar.groupServer.unofficial[ie]){case"online":N="online";break;case"pending":"online"!=N&&(N="pending");break;case"missing":case"offline":"online"!=N&&"pending"!=N&&(N="offline")}}),this.statusBar.settings.groupServer=N},1500)}init_session(T){var N=this;return(0,F.A)(function*(){N.CreateEmptyForm(T.isOfficial,T.target),N.CheckShowServerInfo(),N.TogglingSession=!0;try{N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!1),yield N.after_login(T.isOfficial,T.target,T.useSSL)}catch(R){switch(R.status){case 400:N.p5toast.show({text:N.lang.text.Nakama.NeedLoginInfo}),N.open_profile_page(),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 401:N.p5toast.show({text:N.lang.text.Nakama.NeedAccountReset}),N.users.self.online=!1,delete N.users.self.password,N.set_group_statusBar("offline",T.isOfficial,T.target);break;case 404:try{const U=N.GetNodejsServerAddress(T.isOfficial,T.target,"webpush_port"),ie=yield fetch(`${U}/GetRegLimitInfo`,{method:"POST"});if(!ie.ok)throw`${ie.statusText} (${ie.status})`;const $=yield ie.text(),de=JSON.parse($);if(de.count<=0)throw`${N.lang.text.Nakama.RegLimited}: ${T.name}`;if(de.useApproval){const Ae={email:N.users.self.email,password:N.users.self.password,title:`${N.lang.text.AdminTools.useApproval} (${N.lang.lang})`},tt=yield fetch(`${U}/PushReqApprovalUser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!tt.ok)throw`${tt.statusText} (${tt.status})`;N.p5toast.show({text:`${N.lang.text.Nakama.RegAfterApproval}: ${T.name}`,lateable:!0}),N.AfterLoginAct.push((0,F.A)(function*(){var pt;if(null!==(pt=N.servers[T.isOfficial])&&void 0!==pt&&pt[T.target]&&(N.p5toast.show({text:`${N.lang.text.Nakama.RegisterUserSucc}: ${T.name}`,lateable:!0}),N.users.self.img))try{yield N.servers[T.isOfficial][T.target].client.writeStorageObjects(N.servers[T.isOfficial][T.target].session,[{collection:"user_public",key:"profile_image",permission_read:2,permission_write:1,value:{img:N.users.self.img}}])}catch(Kt){console.error("\uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",Kt)}}))}else{const Ae={email:N.users.self.email},tt=yield fetch(`${U}/AutoRegCountAct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!tt.ok)throw`${tt.statusText} (${tt.status})`;if(N.servers[T.isOfficial][T.target].session=yield N.servers[T.isOfficial][T.target].client.authenticateEmail(N.users.self.email,N.users.self.password,!0),N.p5toast.show({text:`${N.lang.text.Nakama.RegisterUserSucc}: ${T.name}`,lateable:!0}),N.users.self.img)try{yield N.servers[T.isOfficial][T.target].client.writeStorageObjects(N.servers[T.isOfficial][T.target].session,[{collection:"user_public",key:"profile_image",permission_read:2,permission_write:1,value:{img:N.users.self.img}}])}catch(pt){console.error("\uc774\ubbf8\uc9c0 \ubc84\uc804 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",pt)}yield N.after_login(T.isOfficial,T.target,T.useSSL)}}catch(U){console.log("init_session_\uc0c8\ub85c \uac00\uc785\uc911 \uc624\ub958: ",U),N.p5toast.show({text:`${U}`,lateable:!0})}break;default:N.p5toast.show({text:`(${T.name}) ${N.lang.text.Nakama.UnexpectedLoginErr}: ${(R.statusText?`${R.statusText}(${R.status})`:R.status)||R}`}),N.set_group_statusBar("offline",T.isOfficial,T.target),N.p5loading.remove("nakama_login")}}N.TogglingSession=!1})()}CreateEmptyForm(T,N){this.groups[T]||(this.groups[T]={}),this.groups[T][N]||(this.groups[T][N]={}),this.channels_orig[T]||(this.channels_orig[T]={}),this.channels_orig[T][N]||(this.channels_orig[T][N]={}),this.usernameOverride[T]||(this.usernameOverride[T]={}),this.usernameOverride[T][N]||(this.usernameOverride[T][N]={}),this.OnTransfer[T]||(this.OnTransfer[T]={}),this.OnTransfer[T][N]||(this.OnTransfer[T][N]={}),this.noti_origin[T]||(this.noti_origin[T]={}),this.noti_origin[T][N]||(this.noti_origin[T][N]={}),this.RemoteTodoCounter[T]||(this.RemoteTodoCounter[T]={}),this.RemoteTodoCounter[T][N]||(this.RemoteTodoCounter[T][N]=[]),this.PromotedGroup[T]||(this.PromotedGroup[T]={}),this.PromotedGroup[T][N]||(this.PromotedGroup[T][N]={})}after_login(T,N,R){var U=this;return(0,F.A)(function*(){U.set_group_statusBar("pending",T,N),U.servers[T][N].socket=U.servers[T][N].client.createSocket(R),U.servers[T][N].client.getAccount(U.servers[T][N].session).then($=>{let de=JSON.parse($.user.metadata);U.servers[T][N].info.is_admin=de.is_admin,Object.keys($.user).forEach(tt=>{("display_name"==tt||!U.users.self.display_name)&&(U.users.self[tt]=$.user[tt])}),U.save_self_profile()}),U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:U.servers[T][N].session.user_id}]}).then($=>{$.objects.length?U.socket_reactive.profile?(U.users.self.img=$.objects[0].value.img,U.socket_reactive.profile($.objects[0].value.img)):(U.users.self.img=$.objects[0].value.img,U.indexed.saveTextFileToUserPath(JSON.stringify(U.users.self.img),"servers/self/profile.img")):U.socket_reactive.profile&&U.socket_reactive.profile("")}),yield U.SyncTodoCounter(T,N),yield U.connect_to(T,N),U.users.self.display_name&&U.servers[T][N].client.updateAccount(U.servers[T][N].session,{display_name:U.users.self.display_name,lang_tag:navigator.language.split("-")[0]||U.lang.lang});for(let $=0,de=U.AfterLoginAct.length;$<de;$++)try{yield U.AfterLoginAct[$]()}catch(Ae){console.error("\uc9c4\uc785 \ub3d9\uc791 \uc624\ub958: ",Ae)}U.AfterLoginAct.length=0,U.AfterLoginActDone=!0,yield U.redirect_channel(T,N),yield U.get_group_list_from_server(T,N),U.rearrange_group_list(),yield U.load_server_todo(T,N),U.set_group_statusBar("online",T,N),U.LoadOverrideName(T,N),yield U.load_posts_counter([U.servers[T][N].info]),yield U.update_notifications(T,N);let ie=Object.keys(U.users[T][N]||{});ie&&U.servers[T][N].client.getUsers(U.servers[T][N].session,ie).then($=>{for(let de=0,Ae=$.users.length;de<Ae;de++)U.save_other_user($.users[de],T,N)}).catch($=>{console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328: ",$)}),U.p5loading.remove("nakama_login")})()}AutoTogPushNotiAfterFirstServerAdded(T,N){var R=this;"MobilePWA"==_n.aH&&(this.servers[T][N].info.webpush_tog=!0,this.AfterLoginAct.push((0,F.A)(function*(){yield R.GetPushPubKey(T,N)})))}load_server_todo(T,N){var R=this;return(0,F.A)(function*(){let U=[];yield new Promise(function(){var Ae=(0,F.A)(function*(tt){const pt=R.RemoteTodoCounter[T][N];pt.length||tt(void 0);let Kt=[];for(let Fe=pt.length-1;Fe>=0;Fe--){const We=`RemoteTodo_${pt[Fe]}`;Kt.push({collection:"server_todo",key:We,user_id:R.servers[T][N].session.user_id}),U.push(We)}try{const Fe=yield R.servers[T][N].client.readStorageObjects(R.servers[T][N].session,{object_ids:Kt});if(Fe.objects.length)for(let We=0,at=Fe.objects.length;We<at;We++)yield R.modify_remote_info_as_local(Fe.objects[We].value,T,N),yield R.p5loading.update({id:"nakama_login",message:`${R.lang.text.Nakama.SyncingChannel}: ${R.servers[T][N].info.name} (${R.lang.text.Main.Title})`,progress:(at-We-1)/pt.length})}catch(Fe){console.log("\uc11c\ubc84 \ud574\uc57c\ud560 \uc77c \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",Fe)}tt()});return function(tt){return Ae.apply(this,arguments)}}());const ie=yield R.indexed.GetFileListFromDB("todo/RemoteTodo_");for(let Ae=0,tt=ie.length;Ae<tt;Ae++){yield R.p5loading.update({id:"nakama_login",message:`${R.lang.text.Nakama.SyncingChannel}: ${R.servers[T][N].info.name} (${R.lang.text.Main.Title})`,progress:Ae/tt});try{if(ie[Ae].indexOf("info.todo")>=0){const pt=yield R.indexed.loadTextFromUserPath(ie[Ae]),Kt=JSON.parse(pt);if(Kt.remote.isOfficial==T&&Kt.remote.target==N){if(U.includes(Kt.id)){const We=U.indexOf(Kt.id);U.splice(We,1);continue}var $,de;(yield R.servers[T][N].client.readStorageObjects(R.servers[T][N].session,{object_ids:[{collection:"server_todo",key:Kt.id,user_id:R.servers[T][N].session.user_id}]})).objects.length||((yield R.indexed.GetFileListFromDB(`todo/${Kt.id}_${T}_${N}`)).forEach(at=>R.indexed.removeFileFromUserPath(at)),R.RemoveLocalPushSchedule(Kt),R.noti.ClearNoti(Kt.id),null===($=(de=R.global).p5removeTodo)||void 0===$||$.call(de,pt))}}}catch{}}R.p5loading.remove("nakama_login")})()}getRemoteTodoCounter(T,N){var R=this;return(0,F.A)(function*(){try{R.RemoteTodoCounter[T][N].sort(($,de)=>$-de);let U=R.RemoteTodoCounter[T][N].length;if(!U)throw"\uc815\ud574\uc9c4 \uac12\uc774 \uc5c6\uc5b4?";let ie=R.RemoteTodoCounter[T][N][U-1]+1;return R.RemoteTodoCounter[T][N].push(ie),ie}catch{let ie=yield R.SyncTodoCounter(T,N),$=0;return ie&&ie.objects.length&&ie.objects[0].value.data.length?$=ie.objects[0].value.data.pop()+1:R.RemoteTodoCounter[T][N]=[0],$}})()}SyncTodoCounter(T,N){var R=this;return(0,F.A)(function*(){try{let U=yield R.servers[T][N].client.readStorageObjects(R.servers[T][N].session,{object_ids:[{collection:"server_todo",key:"RemoteTodo_Counter",user_id:R.servers[T][N].session.user_id}]});return R.RemoteTodoCounter[T][N]=U.objects[0].value.data,U}catch{}})()}removeRemoteTodoCounter(T,N,R){var U=this;return(0,F.A)(function*(){try{let ie=U.RemoteTodoCounter[T][N].indexOf(R);ie>=0&&U.RemoteTodoCounter[T][N].splice(ie,1)}catch{}yield U.updateRemoteCounter(T,N)})()}updateRemoteCounter(T,N){var R=this;return(0,F.A)(function*(){if(R.RemoteTodoCounter[T][N].length){for(let U=R.RemoteTodoCounter[T][N].length-1;U>=0;U--)(void 0===R.RemoteTodoCounter[T][N][U]||null==R.RemoteTodoCounter[T][N][U])&&R.RemoteTodoCounter[T][N].splice(U,1);R.RemoteTodoCounter[T][N].sort((U,ie)=>U-ie);for(let U=R.RemoteTodoCounter[T][N].length-2;U>=0;U--)R.RemoteTodoCounter[T][N][U+1]==R.RemoteTodoCounter[T][N][U]&&R.RemoteTodoCounter[T][N].splice(U,1)}yield R.servers[T][N].client.writeStorageObjects(R.servers[T][N].session,[{collection:"server_todo",key:"RemoteTodo_Counter",permission_read:2,permission_write:1,value:{data:R.RemoteTodoCounter[T][N]}}])})()}modify_remote_info_as_local(T,N,R){var U=this;return(0,F.A)(function*(){var ie,$;T.remote.name=U.servers[N][R].info.name,T.remote.isOfficial=N,T.remote.target=R,U.set_todo_notification(T);try{T.is_me=T.remote.creator_id==U.servers[N][R].session.user_id}catch{}null===(ie=($=U.global).p5todoAddtodo)||void 0===ie||ie.call($,JSON.stringify(T));let de=yield U.indexed.loadTextFromUserPath(`todo/${T.id}_${N}_${R}/info.todo`);if(de){let Ae=JSON.parse(de);if(T.written<=Ae.written&&Ae.modified){if(Ae.done)return void U.doneTodo(T,!0);if(Ae.removed)return void U.deleteTodoFromStorage(!0,Ae,!0);delete Ae.modified,U.global.p5todoAddtodo(JSON.stringify(Ae));try{const tt=U.GetNodejsServerAddress(N,R,"webpush_port");let pt;for(let Fe=0,We=Ae.attach.length;Fe<We;Fe++)if("image"==Ae.attach[Fe].viewer&&Ae.attach[Fe].url){pt=Ae.attach[Fe].url;break}let Kt=[U.servers[N][R].session.user_id];yield U.remove_schedule_webpush(tt,{todo_id:Ae.id},Kt),yield U.schedule_webpush(tt,{id:Ae.noti_id,title:Ae.title,body:Ae.description,icon:"todo",image:pt,todo_id:Ae.id,time:Ae.startFrom||Ae.limit,data:{url:`/?todo=${de}&address=${U.GetNodejsServerAddress(N,R,"nakama_port")}`}},Kt)}catch{}yield U.indexed.saveTextFileToUserPath(JSON.stringify(Ae),`todo/${Ae.id}_${N}_${R}/info.todo`);try{const tt=yield U.servers[Ae.remote.isOfficial][Ae.remote.target].client.writeStorageObjects(U.servers[Ae.remote.isOfficial][Ae.remote.target].session,[{collection:"server_todo",key:Ae.id,permission_read:2,permission_write:1,value:Ae}]);yield U.servers[Ae.remote.isOfficial][Ae.remote.target].client.rpc(U.servers[Ae.remote.isOfficial][Ae.remote.target].session,"send_noti_fn",{receiver_id:[U.servers[Ae.remote.isOfficial][Ae.remote.target].session.user_id],title:"manage_todo",content:{type:"add",collection:tt.acks[0].collection,key:tt.acks[0].key},code:vr.MANAGE_TODO,persistent:!1})}catch(tt){console.log("\ud560 \uc77c \uc218\uc815 \uc804\ud30c \uc624\ub958: ",tt)}}else U.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${R}/info.todo`)}else U.indexed.saveTextFileToUserPath(JSON.stringify(T),`todo/${T.id}_${N}_${R}/info.todo`)})()}doneTodo(T,N=!1){var R=this;return(0,F.A)(function*(){var U,ie;T.done=!0;const $=`nakama_doneTodo_${Date.now()}`;if(null===(U=(ie=R.global).p5todoAddtodo)||void 0===U||U.call(ie,JSON.stringify(T)),T.remote){N||R.p5loading.update({id:$});try{yield R.servers[T.remote.isOfficial][T.remote.target].client.rpc(R.servers[T.remote.isOfficial][T.remote.target].session,"send_noti_fn",{receiver_id:[R.servers[T.remote.isOfficial][T.remote.target].session.user_id],title:"manage_todo",content:{type:"done",id:T.id},code:vr.MANAGE_TODO,persistent:!1}),N||R.p5loading.remove($)}catch{let Ae;T.modified=!0;try{Ae=`todo/${T.id}_${T.remote.isOfficial}_${T.remote.target}/info.todo`}catch{Ae=`todo/${T.id}/info.todo`}return yield R.indexed.saveTextFileToUserPath(JSON.stringify(T),Ae),void(N||R.p5loading.remove($))}}yield R.deleteTodoFromStorage(!1,T,N,$)})()}deleteTodoFromStorage(T,N,R=!1,U){var ie=this;return(0,F.A)(function*(){const $=U||`nakama_deleteTodoFromStorage_${Date.now()}`;if(R||ie.p5loading.update({id:$,message:`${ie.lang.text.TodoDetail.RemoveTodo}: ${N.title}`}),N.attach&&N.attach.length)for(let Fe=0,We=N.attach.length;Fe<We;Fe++)N.attach[Fe].url&&""!==N.attach[Fe].type&&ie.global.remove_file_from_storage(N.attach[Fe].url,{});if(N.remote)try{if(!ie.servers[N.remote.isOfficial][N.remote.target])throw"Server deleted.";try{const Fe=N.remote.isOfficial,We=N.remote.target;if(yield ie.servers[Fe][We].client.deleteStorageObjects(ie.servers[Fe][We].session,{object_ids:[{collection:"server_todo",key:N.id}]}),N.attach)for(let at=0,Ze=N.attach.length;at<Ze;at++)N.attach[at].url?""!==N.attach[at].type&&ie.global.remove_file_from_storage(N.attach[at].url,{cdn_port:ie.servers[Fe][We].info.cdn_port,user_id:ie.servers[Fe][We].session.user_id}):yield ie.sync_remove_file(N.attach[at].path,Fe,We,"todo_attach");T&&(yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:[ie.servers[N.remote.isOfficial][N.remote.target].session.user_id],title:"manage_todo",content:{type:"delete",id:N.id},code:vr.MANAGE_TODO,persistent:!1}))}catch(Fe){console.error("\ud574\uc57c\ud560 \uc77c \uc0ad\uc81c \uc694\uccad\uc774 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ub418\uc9c0 \uc54a\uc74c: ",Fe)}try{if(N.remote.creator_id!=ie.servers[N.remote.isOfficial][N.remote.target].session.user_id){let Fe=(new Date).getTime();try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_done_fn",{id:N.id,creator_id:N.remote.creator_id,user_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id,timestamp:Fe,isDelete:T})}catch{}try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:[N.remote.creator_id],title:"Manage_todo_add",content:{type:"worker",id:N.id,isDelete:T,timeAt:Fe},code:vr.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch{}}}catch{}if(N.workers){try{yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"manage_todo_delete_fn",{id:N.id,workers:N.workers})}catch{}try{let Fe=[];for(let We=0,at=N.workers.length;We<at;We++)Fe.push(N.workers[We].id);yield ie.servers[N.remote.isOfficial][N.remote.target].client.rpc(ie.servers[N.remote.isOfficial][N.remote.target].session,"send_noti_fn",{receiver_id:Fe,title:"Manage_todo_add",content:{type:T?"delete":"done",id:N.id},code:vr.MANAGE_TODO,persistent:!1,sender_id:ie.servers[N.remote.isOfficial][N.remote.target].session.user_id})}catch(Fe){console.log("\uc791\uc5c5\uc790\uc5d0\uac8c \uace0\uc9c0 \uc624\ub958: ",Fe)}}try{const Fe=ie.GetNodejsServerAddress(N.remote.isOfficial,N.remote.target,"webpush_port"),We=[...N.workers||[],ie.servers[N.remote.isOfficial][N.remote.target].session.user_id];yield ie.remove_schedule_webpush(Fe,{todo_id:N.id},We)}catch(Fe){console.log("\uc6d0\uaca9 \ud560 \uc77c \uc54c\ub9bc \ucde8\uc18c \uc2e4\ud328: ",Fe)}yield ie.removeRemoteTodoCounter(N.remote.isOfficial,N.remote.target,Number(N.id.split("_").pop()))}catch{var de,Ae;let We;N.modified=!0,N.removed=!0;try{We=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}/info.todo`}catch{We=`todo/${N.id}/info.todo`}yield ie.indexed.saveTextFileToUserPath(JSON.stringify(N),We),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id);try{const at=ie.GetNodejsServerAddress(N.remote.isOfficial,N.remote.target,"webpush_port");ie.send_webpush(at,{id:N.noti_id,icon:"remove"},[ie.servers[N.remote.isOfficial][N.remote.target].session.user_id])}catch{}return T&&(null===(de=(Ae=ie.global).p5removeTodo)||void 0===de||de.call(Ae,JSON.stringify(N))),void(R||ie.p5loading.remove($))}try{var tt;let Fe=localStorage.getItem("fallback_fs");if(!Fe)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let We=Fe.split("://"),at=We.pop().split(":"),Ze=We.pop();Ze?Ze+=":":Ze=ie.global.checkProtocolFromAddress(at[0])?"https:":"http:";const xt=null===(tt=at[1])||void 0===tt?void 0:tt.split(","),Zt=`${Ze}//${at[0]}:${(null==xt?void 0:xt[2])||5e3}/`;let zn=[localStorage.getItem("fallback_fs_push_tog")];yield ie.remove_schedule_webpush(Zt,{todo_id:N.id},zn)}catch(Fe){console.log("FFS \ud560 \uc77c \uc54c\ub9bc \uc0ad\uc81c \uc808\ucc28 \uc624\ub958: ",Fe)}let pt;ie.global.RemoveTodoTags(N);try{pt=`todo/${N.id}_${N.remote.isOfficial}_${N.remote.target}`}catch{pt=`todo/${N.id}`}(yield ie.indexed.GetFileListFromDB(pt)).forEach(Fe=>ie.indexed.removeFileFromUserPath(Fe)),ie.RemoveLocalPushSchedule(N),ie.removeRegisteredId(N.noti_id),ie.noti.ClearNoti(N.noti_id),T&&ie.global.p5todo&&ie.global.p5removeTodo(JSON.stringify(N)),R||ie.p5loading.remove($)})()}load_groups(T,N,R,U=!1){var ie=this;return(0,F.A)(function*(){let $=ie.groups[T][N][R].channel_id;try{if("missing"!=ie.groups[T][N][R].status){let de=yield ie.servers[T][N].client.listGroupUsers(ie.servers[T][N].session,R);if(de.group_users.length){let Ae=!0;for(let tt=0,pt=de.group_users.length;tt<pt;tt++)if(de.group_users[tt].user.id==ie.servers[T][N].session.user_id){switch(de.group_users[tt].state){case 0:case 1:case 2:ie.groups[T][N][R].status="online";break;case 3:ie.groups[T][N][R].status="pending";break;default:console.log("\uc774\ud574\ud560 \uc218 \uc5c6\ub294 \ucf54\ub4dc \ubc18\ud658: ",de.group_users[tt].state),ie.groups[T][N][R].status="missing"}ie.PromotedGroup[T]||(ie.PromotedGroup[T]={}),ie.PromotedGroup[T][N]||(ie.PromotedGroup[T][N]={}),de.group_users[tt].state<2?ie.PromotedGroup[T][N][R]=!0:delete ie.PromotedGroup[T][N][R],Ae=!1,de.group_users[tt].is_me=!0;break}Ae&&(ie.groups[T][N][R].status="missing",$&&(ie.channels_orig[T][N][$].status="missing"),ie.save_channels_with_less_info())}else ie.groups[T][N][R].status="missing",ie.channels_orig[T][N][$].status="missing",ie.save_channels_with_less_info();de.group_users.length&&(ie.groups[T][N][R].users=de.group_users);for(let Ae=0,tt=de.group_users.length;Ae<tt;Ae++)if(de.group_users[Ae].is_me)de.group_users[Ae].user=ie.users.self;else try{if(U)throw"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ub9cc \ubc1b\uc74c";let pt=yield ie.servers[T][N].client.readStorageObjects(ie.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:de.group_users[Ae].user.id}]});pt.objects.length?de.group_users[Ae].user.img=pt.objects[0].value.img:delete de.group_users[Ae].user.img,ie.save_other_user(de.group_users[Ae].user,T,N)}catch(pt){console.log("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",pt),ie.save_other_user(de.group_users[Ae].user,T,N)}ie.save_groups_with_less_info()}}catch(de){console.log("load_groups_error: ",de)}})()}collectLinkedUser(T){const N=T.info.isOfficial,R=T.info.target;let U=[];try{U.push(T.session.user_id)}catch(ie){console.log("\ub098 \uc790\uc2e0\uc758 \uc815\ubcf4 \uc218\uc9d1 \uc624\ub958: ",ie)}try{let ie=this.channels_orig[N][R];const $=Object.keys(ie);for(let de of $)switch(ie[de].redirect.type){case 2:T.session.user_id==ie[de].user_id_one?U.includes(ie[de].user_id_two)||U.push(ie[de].user_id_two):U.includes(ie[de].user_id_one)||U.push(ie[de].user_id_one);break;case 3:const tt=this.groups[N][R][ie[de].group_id].users;for(let pt of tt)!pt.is_me&&!U.includes(pt.user.id)&&U.push(pt.user.id)}}catch(ie){console.log("\ub4f1\ub85d\ub41c \uadf8\ub8f9 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958:",ie)}return U}save_profile_to_server(){var T=this;return(0,F.A)(function*(){let N=T.get_all_online_server();for(let R=0,U=N.length;R<U;R++){let ie=T.collectLinkedUser(N[R]);try{yield T.servers[N[R].info.isOfficial][N[R].info.target].client.rpc(T.servers[N[R].info.isOfficial][N[R].info.target].session,"send_noti_fn",{receiver_id:ie,title:"edit_profile",content:{type:"info"},code:vr.EDIT_PROFILE,persistent:!1})}catch($){console.log("\uc140\ud504 \uc54c\ub9bc \uc2e4\ud328: ",$)}}T.save_self_profile()})()}save_self_profile(){let T={...this.users.self};delete T.img,this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/self/profile.json")}rearrange_all_user(){let T=[];return Object.keys(this.users).forEach(R=>{"self"!=R&&Object.keys(this.users[R]).forEach(ie=>{Object.keys(this.users[R][ie]).forEach(de=>{T.push(this.users[R][ie][de])})})}),T}load_other_user(T,N,R,U=($=>{}),ie=!1){try{if(this.servers[N][R].session.user_id==T)return U(this.users.self),this.users.self}catch{}if(this.users[N][R]||(this.users[N][R]={}),this.users[N][R][T]&&!ie)return U(this.users[N][R][T]),this.users[N][R][T];this.users[N][R][T]={};let $=()=>{this.indexed.loadTextFromUserPath(`servers/${N}/${R}/users/${T}/profile.json`,(Ae,tt)=>{if(Ae&&tt){let pt=JSON.parse(tt);Object.keys(pt).forEach(Fe=>this.users[N][R][T][Fe]=pt[Fe])}U(this.users[N][R][T])})};try{this.servers[N][R].client.getUsers(this.servers[N][R].session,[T]).then(Ae=>{Ae.users.length?(Object.keys(Ae.users[0]).forEach(pt=>this.users[N][R][T][pt]=Ae.users[0][pt]),this.users[N][R][T].img||(this.users[N][R][T].img=null),this.save_other_user(this.users[N][R][T],N,R)):(this.indexed.removeFileFromUserPath(`${N}/${R}/users/${T}`),this.indexed.removeFileFromUserPath(`${N}/${R}/users/${T}/profile.json`),this.indexed.removeFileFromUserPath(`${N}/${R}/users/${T}/profile.img`)),U(this.users[N][R][T])}).catch(Ae=>{$()})}catch{$()}let de=()=>{this.users[N][R][T].img&&(delete this.users[N][R][T].img,this.save_other_user(this.users[N][R][T],N,R)),this.indexed.loadTextFromUserPath(`servers/${N}/${R}/users/${T}/profile.img`,(Ae,tt)=>{Ae&&tt&&(this.users[N][R][T].img=tt.replace(/"|=|\\/g,""))})};try{this.servers[N][R].client.readStorageObjects(this.servers[N][R].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T}]}).then(Ae=>{Ae.objects.length&&this.users[N][R][T].img!=Ae.objects[0].value.img&&(this.users[N][R][T].img=Ae.objects[0].value.img,this.save_other_user(this.users[N][R][T],N,R))}).catch(Ae=>{de()})}catch{de()}return this.users[N][R][T]}save_other_user(T,N,R){if(this.servers[N][R].session.user_id==T.id)return;let U=JSON.parse(JSON.stringify(T));T.id!=this.servers[N][R].session.user_id&&(delete U.img,delete U.online,delete U.todo_checked,delete U.todo_done,this.users[N][R]||(this.users[N][R]={}),this.users[N][R][T.id]||(this.users[N][R][T.id]={}),Object.keys(T).forEach($=>this.users[N][R][T.id][$]=T[$]),this.indexed.saveTextFileToUserPath(JSON.stringify(U),`servers/${N}/${R}/users/${U.id}/profile.json`),T.img?this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${R}/users/${T.id}/profile.img`):void 0===T.img&&this.indexed.removeFileFromUserPath(`servers/${N}/${R}/users/${T.id}/profile.img`))}update_notifications(T,N){var R=this;return(0,F.A)(function*(){let U=yield R.servers[T][N].client.listNotifications(R.servers[T][N].session,1);R.noti_origin[T][N]={};for(let ie=0,$=U.notifications.length;ie<$;ie++)R.act_on_notification(U.notifications[ie],T,N);R.rearrange_notifications()})()}rearrange_notifications(){let T=[];return Object.keys(this.noti_origin).forEach(R=>{Object.keys(this.noti_origin[R]).forEach(ie=>{Object.keys(this.noti_origin[R][ie]).forEach(de=>{T.push(this.noti_origin[R][ie][de])})})}),T.sort((R,U)=>R.create_time<U.create_time?1:R.create_time>U.create_time?-1:0),this.notifications_rearrange=T,T}add_channel(T,N,R,U=!1){var ie=this;return(0,F.A)(function*(){if(!ie.channels_orig[N][R][T.id]){ie.channels_orig[N][R][T.id]={};try{U&&(yield ie.servers[N][R].client.rpc(ie.servers[N][R].session,"send_noti_fn",{receiver_id:[ie.servers[N][R].session.user_id],title:"add_channel",content:{type:"add",id:T.redirect.id},code:vr.ADD_CHANNEL,persistent:!1}))}catch(de){console.log("\uc0c8 \ucc44\ub110 \uc0dd\uc131\ub428 \uc140\ud504 \uc804\ud30c \uc2e4\ud328: ",de)}}switch(Object.keys(T).forEach(de=>ie.channels_orig[N][R][T.id][de]=T[de]),ie.channels_orig[N][R][T.id].cnoti_id||(ie.channels_orig[N][R][T.id].cnoti_id=ie.get_noti_id()),ie.channels_orig[N][R][T.id].redirect.type){case 2:let de=ie.channels_orig[N][R][T.id].redirect.id;ie.channels_orig[N][R][T.id].color=(de.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6);let Ae=ie.load_other_user(de,N,R).online?"online":"pending";ie.channels_orig[N][R][T.id].status=Ae;break;case 3:try{ie.channels_orig[N][R][T.id].color=(ie.channels_orig[N][R][T.id].redirect.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),"missing"==ie.channels_orig[N][R][T.id].status&&delete ie.channels_orig[N][R][T.id].status}catch(tt){console.error("\uadf8\ub8f9 \ucc44\ub110 \uc0dd\uc131 \uc624\ub958: ",tt)}break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc885\ub958: ",ie.channels_orig[N][R][T.id])}})()}add_group_user_without_duplicate(T,N,R,U){let ie=!1;this.groups[R][U][N].users||(this.groups[R][U][N].users=[]);for(let $=0,de=this.groups[R][U][N].users.length;$<de;$++)if(this.groups[R][U][N].users[$].user.id==T.user.id){ie=!0;break}ie||this.groups[R][U][N].users.push(T)}load_channel_list(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.loadTextFromUserPath("servers/channels.json");N&&(T.channels_orig=JSON.parse(N),Object.keys(T.channels_orig).forEach(U=>{Object.keys(T.channels_orig[U]).forEach($=>{T.CreateEmptyForm(U,$),Object.keys(T.channels_orig[U][$]).forEach(Ae=>{try{if(T.channels_orig[U][$][Ae].volatile)throw delete T.channels_orig[U][$][Ae],`\ud718\ubc1c\uc131 \ucc44\ub110 \ubb34\uc2dc: ${Ae}`;2==T.channels_orig[U][$][Ae].redirect.type&&(T.channels_orig[U][$][Ae].info=T.load_other_user(T.channels_orig[U][$][Ae].redirect.id,U,$)),"missing"!=T.channels_orig[U][$][Ae].status&&(delete T.channels_orig[U][$][Ae].status,0==T.channels_orig[U][$][Ae].redirect.type&&(T.channels_orig[U][$][Ae].status="certified",T.channels_orig[U][$][Ae].cnoti_id=T.get_noti_id())),T.channels_orig[U][$][Ae].is_new&&!T.subscribe_lock&&(T.has_new_channel_msg=!0)}catch{}})})}))})()}get_noti_id(){return this.noti_id=this.check_If_RegisteredId(this.noti_id+1),this.registered_id.push(this.noti_id),this.noti_id}check_If_RegisteredId(T){let N=!1;for(let R=0,U=this.registered_id.length;R<U;R++)if(this.registered_id[R]==T){N=!0;break}return N?this.check_If_RegisteredId(T+1):T}removeRegisteredId(T){for(let N=0,R=this.registered_id.length;N<R;N++)if(this.registered_id[N]==T){this.registered_id.splice(N,1);break}}redirect_channel(T,N){var R=this;return(0,F.A)(function*(){if(R.channels_orig[T][N]){let U=Object.keys(R.channels_orig[T][N]);for(let ie=0,$=U.length;ie<$;ie++)try{yield R.p5loading.update({id:"nakama_login",message:`${R.lang.text.Nakama.SyncingChannel}: ${R.servers[T][N].info.name} (${R.lang.text.Subscribes.Title})`,progress:ie/$}),"missing"!=R.channels_orig[T][N][U[ie]].status&&2===(yield R.servers[T][N].socket.joinChat(R.channels_orig[T][N][U[ie]].redirect.id,R.channels_orig[T][N][U[ie]].redirect.type,R.channels_orig[T][N][U[ie]].redirect.persistence,!1),R.channels_orig[T][N][U[ie]].cnoti_id||(R.channels_orig[T][N][U[ie]].cnoti_id=R.get_noti_id()),R.channels_orig[T][N][U[ie]].color=(R.channels_orig[T][N][U[ie]].info.id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),R.channels_orig[T][N][U[ie]].redirect.type)&&(R.servers[T][N].client.readStorageObjects(R.servers[T][N].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:R.channels_orig[T][N][U[ie]].redirect.id}]}).then(de=>{let Ae=R.load_other_user(R.channels_orig[T][N][U[ie]].redirect.id,T,N);Ae.img=de.objects.length?de.objects[0].value.img:void 0,R.save_other_user(Ae,T,N)}),R.channels_orig[T][N][U[ie]].update||R.servers[T][N].client.listChannelMessages(R.servers[T][N].session,U[ie],1,!1).then(de=>{de.messages.length&&R.update_from_channel_msg(de.messages[0],T,N)}))}catch{R.channels_orig[T][N][U[ie]].status="missing",R.p5loading.remove("nakama_login")}}})()}rearrange_channels(){this.HasRemovedChannel=!1;let T=[];return Object.keys(this.channels_orig).forEach(R=>{Object.keys(this.channels_orig[R]).forEach(ie=>{Object.keys(this.channels_orig[R][ie]).forEach(de=>{this.channels_orig[R][ie][de].server={isOfficial:R,target:ie};try{this.channels_orig[R][ie][de].server.name=this.servers[R][ie].info.name}catch{this.channels_orig[R][ie][de].server.name=this.lang.text.Nakama.DeletedServer}try{switch(this.channels_orig[R][ie][de].info||(this.channels_orig[R][ie][de].info={}),this.HasRemovedChannel=this.HasRemovedChannel||"missing"==this.channels_orig[R][ie][de].status,this.channels_orig[R][ie][de].redirect.type){case 1:break;case 2:let Ae=this.load_other_user(this.channels_orig[R][ie][de].redirect.id,R,ie);Object.keys(Ae).forEach(pt=>this.channels_orig[R][ie][de].info[pt]=Ae[pt]),this.channels_orig[R][ie][de].title=this.channels_orig[R][ie][de].info.display_name;break;case 3:this.groups[R][ie]&&this.groups[R][ie][this.channels_orig[R][ie][de].redirect.id]?(this.channels_orig[R][ie][de].info=this.groups[R][ie][this.channels_orig[R][ie][de].redirect.id],this.channels_orig[R][ie][de].title=this.groups[R][ie][this.channels_orig[R][ie][de].redirect.id].name,"missing"==this.groups[R][ie][this.channels_orig[R][ie][de].redirect.id].status&&(this.channels_orig[R][ie][de].status=this.groups[R][ie][this.channels_orig[R][ie][de].redirect.id].status)):this.channels_orig[R][ie][de].status="missing";break;case 0:this.channels_orig[R][ie][de].info||(this.channels_orig[R][ie][de].info={}),this.channels_orig[R][ie][de].info.name=this.channels_orig[R][ie][de].title,this.channels_orig[R][ie][de].info.img||this.indexed.loadTextFromUserPath(`servers/${R}/${ie}/groups/${de}.img`,(pt,Kt)=>{pt&&Kt&&(this.channels_orig[R][ie][de].info.img=Kt)})}}catch{}this.channels_orig[R][ie][de].info.isOfficial=R,this.channels_orig[R][ie][de].info.target=ie,this.channels_orig[R][ie][de].last_comment_time||(this.channels_orig[R][ie][de].last_comment_time=Date.now()),T.push(this.channels_orig[R][ie][de])})})}),T.sort((R,U)=>{let ie=new Date(R.last_comment_time||0).getTime(),$=new Date(U.last_comment_time||0).getTime();return ie<$?1:ie>$?-1:0}),T.sort((R,U)=>R.is_new?U.is_new?0:-1:U.is_new?1:0),this.channels=T,this.save_channels_with_less_info(),T}save_channels_with_less_info(){let T=JSON.parse(JSON.stringify(this.channels_orig));Object.keys(T).forEach(R=>{Object.keys(T[R]).forEach(ie=>{let $=Object.keys(T[R][ie]);$.forEach(de=>{delete T[R][ie][de].img,delete T[R][ie][de].group,delete T[R][ie][de].info,delete T[R][ie][de].update,delete T[R][ie][de].presences,delete T[R][ie][de].cnoti_id,delete T[R][ie][de].color,delete T[R][ie][de].isOfficial,delete T[R][ie][de].target,T[R][ie][de].is_new||delete T[R][ie][de].is_new}),$.length||delete T[R][ie]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(T),"servers/channels.json")}limit_image_size(T,N=(R=>{})){new cn(U=>{U.setup=()=>{U.noCanvas(),U.loadImage(T,$=>{$.resize(window.innerWidth,window.innerWidth*$.height/$.width),$.canvas.toDataURL().length>245e3&&ie($),N($),U.remove()},$=>{this.p5toast.show({text:this.lang.text.Nakama.CannotOpenImg}),U.remove()})};let ie=$=>{$.resize(.95*$.width,.95*$.height),$.canvas.toDataURL().length>245e3&&ie($)}})}try_add_group(T){var N=this;return new Promise(function(){var R=(0,F.A)(function*(U,ie){let $=[],de=N.get_all_server_info(!0,!0);for(let Ae of de)$.push(N.servers[Ae.isOfficial][Ae.target]);for(let Ae=0,tt=$.length;Ae<tt;Ae++)try{let pt=yield $[Ae].client.joinGroup($[Ae].session,T.id);if(!pt)return void console.log("\uadf8\ub8f9 join \uc2e4\ud328... \ubca4 \ub2f9\ud588\uc744 \ub54c\uc778\ub4ef? \ud5a5\ud6c4\uc5d0 \uac80\ud1a0 \ud544");pt=yield $[Ae].client.listGroups($[Ae].session,decodeURIComponent(T.name));for(let Kt=0,Fe=pt.groups.length;Kt<Fe;Kt++)if(pt.groups[Kt].id==T.id){let We=pt.groups[Kt];We.status=We.open?"online":"pending",We.server=N.servers[$[Ae].info.isOfficial][$[Ae].info.target].info;try{yield N.load_groups($[Ae].info.isOfficial,$[Ae].info.target,pt.groups[Kt].id,!0)}catch(at){console.warn("\uadf8\ub8f9 \uc815\ubcf4 \uac80\ud1a0 \uc624\ub958: ",at)}try{let at=yield N.servers[$[Ae].info.isOfficial][$[Ae].info.target].client.readStorageObjects(N.servers[$[Ae].info.isOfficial][$[Ae].info.target].session,{object_ids:[{collection:"group_public",key:`group_${pt.groups[Kt].id}`,user_id:pt.groups[Kt].creator_id}]});at.objects.length?We.img=at.objects[0].value.img:delete We.img}catch(at){console.warn("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \ud655\uc778 \uc624\ub958: ",at)}if(N.save_group_info(We,$[Ae].info.isOfficial,$[Ae].info.target),yield N.servers[$[Ae].info.isOfficial][$[Ae].info.target].client.rpc(N.servers[$[Ae].info.isOfficial][$[Ae].info.target].session,"send_noti_fn",{receiver_id:[N.servers[$[Ae].info.isOfficial][$[Ae].info.target].session.user_id],title:"add_channel",content:{type:"add",id:pt.groups[Kt].id},code:vr.ADD_CHANNEL,persistent:!1}),We.open){let at=yield N.join_chat_with_modulation(We.id,3,$[Ae].info.isOfficial,$[Ae].info.target);(!N.opened_page_info.channel||N.opened_page_info.channel.isOfficial!=$[Ae].info.isOfficial||N.opened_page_info.channel.target!=$[Ae].info.target||N.opened_page_info.channel.id!=at.id)&&N.servers[$[Ae].info.isOfficial][$[Ae].info.target].client.listChannelMessages(N.servers[$[Ae].info.isOfficial][$[Ae].info.target].session,at.id,1,!1).then(Ze=>{Ze.messages.length&&N.update_from_channel_msg(Ze.messages[0],$[Ae].info.isOfficial,$[Ae].info.target),N.save_group_info(We,$[Ae].info.isOfficial,$[Ae].info.target),N.go_to_chatroom(at)}).catch(Ze=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",Ze)})}U();break}}catch(pt){if(400===(console.log(`try_add_group: ${pt.statusText} (${pt.status})`),pt.status)){try{let Kt=yield N.join_chat_with_modulation(T.id,3,$[Ae].info.isOfficial,$[Ae].info.target);N.servers[$[Ae].info.isOfficial][$[Ae].info.target].client.listChannelMessages(N.servers[$[Ae].info.isOfficial][$[Ae].info.target].session,Kt.id,1,!1).then(Fe=>{Fe.messages.length&&N.update_from_channel_msg(Fe.messages[0],$[Ae].info.isOfficial,$[Ae].info.target),N.go_to_chatroom(Kt)}).catch(Fe=>{console.error("\ucc44\ub110 \uc815\ubcf4 \ucd94\uac00 \uc624\ub958: ",Fe)})}catch(Kt){console.log("\uadf8\ub8f9 \ucc38\uac00 \uc2e4\ud328: ",Kt),N.p5toast.show({text:`(Code: ${Kt.code}) ${Kt.message}`})}U()}}ie(N.lang.text.Nakama.GroupAllListDone)});return function(U,ie){return R.apply(this,arguments)}}())}save_group_info(T,N,R){this.groups[N][R]||(this.groups[N][R]={}),this.groups[N][R][T.id]=T,this.save_groups_with_less_info(),this.indexed.saveTextFileToUserPath(T.img,`servers/${N}/${R}/groups/${T.id}.img`),T.owner==this.servers[N][R].session.user_id&&T.img&&this.servers[N][R].client.writeStorageObjects(this.servers[N][R].session,[{collection:"group_public",key:`group_${T.id}`,value:{img:T.img},permission_read:2,permission_write:1}])}save_groups_with_less_info(T=(()=>{})){let N=JSON.parse(JSON.stringify(this.groups));Object.keys(N).forEach(U=>{Object.keys(N[U]).forEach($=>{let de=Object.keys(N[U][$]);de.forEach(Ae=>{if(delete N[U][$][Ae].server,delete N[U][$][Ae].img,N[U][$][Ae].users)for(let tt=0,pt=N[U][$][Ae].users.length;tt<pt;tt++)if(N[U][$][Ae].users[tt]){delete N[U][$][Ae].users[tt].state;try{N[U][$][Ae].users[tt].user.id?(N[U][$][Ae].users[tt].user={id:N[U][$][Ae].users[tt].user.id},this.servers[U][$]&&this.servers[U][$].session&&N[U][$][Ae].users[tt].user.id==this.servers[U][$].session.user_id&&(N[U][$][Ae].users[tt].is_me=!0)):N[U][$][Ae].users[tt].is_me||N[U][$][Ae].users.splice(tt,1)}catch{}}}),de.length||delete N[U][$]})}),this.indexed.saveTextFileToUserPath(JSON.stringify(N),"servers/groups.json").then(()=>{T()})}remove_group_list(T,N,R,U=!1){var ie=this;return(0,F.A)(function*(){try{let de=T.creator_id==ie.servers[N][R].session.user_id;if(!ie.servers[N][R]||!de)throw"not a group creator";try{let tt=`${T.server.useSSL?"https":"http"}://${T.server.address}`,pt=ie.servers[N][R].info;yield ie.global.remove_files_from_storage_with_key(tt,T.id,{cdn_port:pt.cdn_port,apache_port:pt.apache_port,user_id:ie.servers[N][R].session.user_id})}catch{}(yield ie.servers[N][R].client.deleteGroup(ie.servers[N][R].session,T.id))||console.log("\uadf8\ub8f9 \uc0ad\uc81c \uc624\ub958 \uac80\ud1a0 \ud544\uc694"),ie.remove_channel_files(N,R,T.channel_id,de);try{throw yield ie.servers[N][R].client.deleteStorageObjects(ie.servers[N][R].session,{object_ids:[{collection:"group_public",key:`group_${T.id}`}]}),"Remove group image well"}catch{throw"No group image found"}}catch{try{var $;let Ae=localStorage.getItem("fallback_fs");if(!Ae)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let tt=Ae.split("://"),pt=tt.pop().split(":"),Kt=tt.pop();Kt?Kt+=":":Kt=ie.global.checkProtocolFromAddress(pt[0])?"https:":"http:";const Fe=null===($=pt[1])||void 0===$?void 0:$.split(",");let We=`${Kt}//${pt[0]}:${(null==Fe?void 0:Fe[1])||9002}/`;pt[0]&&(yield ie.global.remove_files_from_storage_with_key(We,`${T.id}_${ie.servers[N][R].session.user_id}`,{}))}catch{}try{let Ae=`${T.server.useSSL?"https":"http"}://${T.server.address}`;if(T.server.address){let tt=ie.servers[N][R].info;yield ie.global.remove_files_from_storage_with_key(Ae,`${T.id}_${ie.servers[N][R].session.user_id}`,{cdn_port:tt.cdn_port,apache_port:tt.apache_port,user_id:ie.servers[N][R].session.user_id})}}catch{}}try{if(U){yield ie.indexed.removeFileFromUserPath(`servers/${N}/${R}/groups/${T.id}.img`);try{delete ie.groups[N][R][T.id],ie.save_groups_with_less_info()}catch{}}}catch{}try{delete ie.PromotedGroup[N][R][T.id]}catch{}})()}remove_channel_files(T,N,R,U,ie){var $=this;return(0,F.A)(function*(){var de,Ae;const tt=ie||"remove_channel_files",pt=(null===(de=$.channels_orig[T][N][R])||void 0===de?void 0:de.title)||("4"==R.charAt(0)?null===(Ae=$.users[T][N][R.split(".").find(Kt=>Kt in $.users[T][N])])||void 0===Ae?void 0:Ae.display_name:void 0);try{yield $.p5loading.update({id:tt,message:`${$.lang.text.GroupDetail.BreakupGroup}: ${pt}`,forceEnd:null}),yield $.servers[T][N].client.rpc($.servers[T][N].session,"remove_channel_file",{collection:`file_${R.replace(/[.]/g,"_")}`,is_creator:U}),$.p5loading.update({id:tt,progress:1},!0)}catch(Kt){$.p5loading.update({id:tt,message:`${$.lang.text.AdminTools.FailedClear}: ${(Kt.statusText?`${Kt.statusText}(${Kt.status})`:Kt.status)||Kt}`,progress:0},!0)}ie||$.p5loading.remove(tt)})()}get_group_list_from_server(T,N,R){var U=this;return(0,F.A)(function*(){const ie="nakama_login";yield U.p5loading.update({id:ie,message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.AddGroup.GroupInfo})`,progress:null});let $=yield U.servers[T][N].client.listUserGroups(U.servers[T][N].session,U.servers[T][N].session.user_id),de=[];try{for(let tt=0,pt=$.user_groups.length;tt<pt;tt++)(void 0===R||R==$.user_groups[tt].group.id)&&(U.groups[T][N][$.user_groups[tt].group.id]||(U.groups[T][N][$.user_groups[tt].group.id]={}),de.push({collection:"group_public",key:`group_${$.user_groups[tt].group.id}`,user_id:$.user_groups[tt].group.creator_id}),U.groups[T][N][$.user_groups[tt].group.id]={...U.groups[T][N][$.user_groups[tt].group.id],...$.user_groups[tt].group},R&&"missing"==U.groups[T][N][$.user_groups[tt].group.id].status&&(U.groups[T][N][$.user_groups[tt].group.id].status="online"),U.load_groups(T,N,$.user_groups[tt].group.id,!0).then(()=>{U.join_chat_with_modulation($.user_groups[tt].group.id,3,T,N).then(()=>{tt==pt-1&&U.rearrange_channels()})}));let Ae=yield U.servers[T][N].client.readStorageObjects(U.servers[T][N].session,{object_ids:de});for(let tt=0,pt=Ae.objects.length;tt<pt;tt++){R||(yield U.p5loading.update({id:ie,message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.AddGroup.GroupInfo})`,progress:tt/de.length}));const Kt=Ae.objects[tt].key.substring(6);U.groups[T][N][Kt].img=Ae.objects[tt].value.img,yield U.indexed.saveTextFileToUserPath(Ae.objects[tt].value.img,`servers/${T}/${N}/groups/${Kt}.img`);for(let Fe=de.length-1;Fe>=0;Fe--)if(de[Fe].key==Ae.objects[tt].key){de.splice(Fe,1);break}}for(let tt=0,pt=de.length;tt<pt;tt++){R||(yield U.p5loading.update({id:ie,message:`${U.lang.text.Nakama.SyncingChannel}: ${U.servers[T][N].info.name} (${U.lang.text.AddGroup.GroupInfo})`,progress:tt/de.length}));const Kt=de[tt].key.substring(6);delete U.groups[T][N][Kt].img,U.indexed.removeFileFromUserPath(`servers/${T}/${N}/groups/${Kt}.img`)}U.rearrange_channels()}catch(Ae){console.error("\uc0ac\uc6a9\uc790 \uadf8\ub8f9 \uac00\uc838\uc624\uae30 \uc624\ub958: ",Ae),U.p5loading.remove(ie)}R&&U.p5loading.remove(ie)})()}rearrange_group_list(T=!0){let N=[];return Object.keys(this.groups).forEach(U=>{Object.keys(this.groups[U]).forEach($=>{Object.keys(this.groups[U][$]).forEach(Ae=>{try{this.groups[U][$][Ae].server=this.servers[U][$].info,N.push(this.groups[U][$][Ae])}catch{this.groups[U][$][Ae].server={name:this.lang.text.Nakama.DeletedServer,isOfficial:U,target:$},T&&N.push(this.groups[U][$][Ae])}})})}),N}set_group_statusBar(T,N,R){this.statusBar.groupServer[N]||(this.statusBar.groupServer[N]={}),this.statusBar.groupServer[N][R]=T,this.catch_group_server_header(T),this.StatusBarChangedCallback&&this.StatusBarChangedCallback()}count_channel_online_member(T,N,R){var U=this;return(0,F.A)(function*(){let ie="pending";try{if("offline"==U.statusBar.groupServer[N][R])throw"\uc11c\ubc84 \uc624\ud504\ub77c\uc778";if(T.group_id){var $;let de=null===($=U.groups[N][R][T.group_id].users)||void 0===$?void 0:$.length;if(U.groups[N][R][T.group_id].max_count<=1)return ie=U.users.self.online?"online":"offline",void("missing"!=U.channels_orig[N][R][T.channel_id||T.id].status&&(U.channels_orig[N][R][T.channel_id||T.id].status=ie));if(void 0!==de)for(let Ae=0;Ae<de;Ae++){let tt=U.groups[N][R][T.group_id].users[Ae].user.id||U.servers[N][R].session.user_id;if(tt!=U.servers[N][R].session.user_id&&(yield new Promise(Kt=>{U.load_other_user(tt,N,R,Fe=>Kt(Fe))})).online){ie="online";break}}else ie="pending"}else if(T.user_id_one)if(U.channels_orig[N][R][T.channel_id||T.id])try{let de=U.channels_orig[N][R][T.channel_id||T.id].redirect.id,Ae=yield U.servers[N][R].client.getUsers(U.servers[N][R].session,[de]);Object.keys(Ae.users[0]).forEach(pt=>{U.users[N][R][de][pt]=Ae.users[0][pt]}),ie=U.load_other_user(de,N,R).online?"online":"pending"}catch(de){console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c (\ud0c8\ud1f4): ",de)}else try{let de=yield U.join_chat_with_modulation(T.user_id_one!=U.servers[N][R].session.user_id?T.user_id_one:T.user_id_two,2,N,R);ie=U.load_other_user(U.channels_orig[N][R][de.id].redirect.id,N,R).online?"online":"pending"}catch(de){console.error(de)}}catch{ie="offline"==U.statusBar.groupServer[N][R]?"offline":"missing"}U.channels_orig[N][R][T.channel_id||T.id]||(U.channels_orig[N][R][T.channel_id||T.id]={}),"missing"!=U.channels_orig[N][R][T.channel_id||T.id].status&&(U.channels_orig[N][R][T.channel_id||T.id].status=ie)})()}remove_server(T,N,R){var U=this;return(0,F.A)(function*(){const ie="nakama_remove_server";U.p5loading.update({id:ie,message:U.lang.text.Nakama.RemovingAccount});const $=U.servers[T][N].info;$.webpush_tog&&($.webpush_tog=!1,yield U.GetPushPubKey($.isOfficial,$.target));try{const pt=U.servers[T][N].session.user_id,Kt=`${$.useSSL?"https":"http"}://${$.address}`;try{if(R)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";yield U.global.remove_files_from_storage_with_key(Kt,pt,{cdn_port:$.cdn_port,apache_port:$.apache_port,user_id:U.servers[T][N].session.user_id})}catch{}try{var de;if(R)throw"\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub9ac\uc2a4\ud2b8\ub9cc \uc0ad\uc81c";const Fe=localStorage.getItem("fallback_fs");if(!Fe)throw"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \uc11c\ubc84 \uc5c6\uc74c";let We=Fe.split("://"),at=We.pop().split(":"),Ze=We.pop();Ze?Ze+=":":Ze=U.global.checkProtocolFromAddress(at[0])?"https:":"http:";const xt=null===(de=at[1])||void 0===de?void 0:de.split(",");let Zt=`${Ze}//${at[0]}:${(null==xt?void 0:xt[1])||9002}/`;yield U.global.remove_files_from_storage_with_key(Zt,pt,{})}catch{}yield U.servers[T][N].client.rpc(U.servers[T][N].session,"remove_account_fn",{user_id:pt}).catch(Fe=>{})}catch{}if(U.p5loading.update({id:ie,message:U.lang.text.Nakama.LogoutAccount}),"online"==U.statusBar.groupServer[T][N])try{U.servers[T][N].socket.disconnect(!0)}catch{U.link_group(T,N,!1)}U.p5loading.update({id:ie,message:U.lang.text.Nakama.RemovingNotification});try{delete U.noti_origin[T][N]}catch{}U.rearrange_notifications(),U.p5loading.update({id:ie,message:U.lang.text.Nakama.MissingChannels});try{let pt=Object.keys(U.channels_orig[T][N]);U.channels_orig.deleted||(U.channels_orig.deleted={}),U.channels_orig.deleted[N]||(U.channels_orig.deleted[N]={}),pt.forEach(Kt=>{U.channels_orig[T][N][Kt].info.status="missing",U.channels_orig[T][N][Kt].status="missing",U.channels_orig.deleted[N][Kt]=JSON.parse(JSON.stringify(U.channels_orig[T][N][Kt]))}),delete U.channels_orig[T][N]}catch{}U.save_channels_with_less_info();let Ae=yield U.indexed.GetFileListFromDB(`servers/${T}/${N}`);for(let pt=0,Kt=Ae.length;pt<Kt;pt++)try{let Fe=yield U.indexed.GetFileInfoFromDB(Ae[pt]),We=Ae[pt].replace("/official/","/deleted/").replace(`/${T}/`,"/deleted/");yield U.indexed.saveFileToUserPath(Fe,We),yield U.indexed.removeFileFromUserPath(Ae[pt]),U.p5loading.update({id:ie,message:`${U.lang.text.Nakama.MissingChannelFiles}: ${Ae[pt]}`})}catch(Fe){console.log("\ud30c\uc77c \uc774\uad00 \uc2e4\ud328: ",Fe)}U.post_counter.deleted||(U.post_counter.deleted={});try{const pt=yield U.indexed.loadTextFromUserPath("servers/post_counter.json"),Kt=JSON.parse(pt);U.post_counter.deleted[N]=Kt[T][N]}catch{}delete U.post_counter[T][N],delete U.posts_orig[T][N],U.rearrange_posts(),yield U.save_post_counter(),U.p5loading.update({id:ie,message:U.lang.text.Nakama.MissingGroups});try{U.groups.deleted||(U.groups.deleted={}),U.groups.deleted[N]||(U.groups.deleted[N]={}),U.groups.deleted[N]=JSON.parse(JSON.stringify(U.groups[T][N])),Object.keys(U.groups.deleted[N]).forEach(Kt=>{U.groups.deleted[N][Kt].server.name=U.lang.text.Nakama.DeletedServer,U.groups.deleted[N][Kt].server.isOfficial="deleted",U.groups.deleted[N][Kt].status="missing",U.groups.deleted[N][Kt]=JSON.parse(JSON.stringify(U.groups[T][N][Kt]))}),delete U.groups[T][N]}catch{}U.p5loading.update({id:ie,message:U.lang.text.Nakama.DeletingServerInfo}),U.set_group_statusBar("offline",T,N),delete U.statusBar.groupServer[T][N],yield U.RemoveWebRTCServer(U.servers[T][N].info.address),delete U.servers[T][N],U.save_groups_with_less_info(),U.indexed.saveTextFileToUserPath(JSON.stringify(U.statusBar.groupServer),"servers/list.json");let tt=yield U.indexed.loadTextFromUserPath("servers/list_detail.csv");if(tt){let pt=tt.split("\n");for(let Kt=0,Fe=pt.length;Kt<Fe;Kt++)if(pt[Kt].split(",")[3]==N){pt.splice(Kt,1);break}U.indexed.saveTextFileToUserPath(pt.join("\n"),"servers/list_detail.csv")}U.noti.ClearNoti(9),U.p5loading.remove(ie),U.CheckShowServerInfo()})()}connect_to(T="official",N="default"){var R=this;return(0,F.A)(function*(){yield R.servers[T][N].socket.connect(R.servers[T][N].session,!0);let U=R.servers[T][N].socket;Object.keys(R.on_socket_connected).forEach(de=>R.on_socket_connected[de]()),U.onnotification=de=>{R.act_on_notification(de,T,N),R.rearrange_notifications()};let $=[];return U.onchannelpresence=de=>{if(void 0!==de.joins){de.joins.forEach(tt=>{R.servers[T][N].session.user_id!=tt.user_id&&(R.load_other_user(tt.user_id,T,N).online=!0)});let Ae=!0;for(let tt of de.joins)if(tt.user_id!=R.servers[T][N].session.user_id){Ae=!1;break}(!$.includes(de.channel_id)||!Ae)&&($.push(de.channel_id),R.count_channel_online_member(de,T,N))}else if(void 0!==de.leaves){let Ae=[];de.leaves.forEach(tt=>{R.servers[T][N].session.user_id!=tt.user_id&&R.servers[T][N].client.getUsers(R.servers[T][N].session,[tt.user_id]).then(pt=>{let Kt=Object.keys(pt.users[0]);delete R.load_other_user(tt.user_id,T,N).online,Kt.forEach(Fe=>{R.users[T][N][tt.user_id][Fe]=pt.users[0][Fe]}),Ae.push(tt.user_id),Ae.forEach(Fe=>R.load_other_user(Fe,T,N)),R.count_channel_online_member(de,T,N)}).catch(pt=>{console.log("\uc0ac\uc6a9\uc790\uac00 \ud0c8\ud1f4\ud568: ",pt)})})}R.socket_reactive["others-online"]&&R.socket_reactive["others-online"]()},U.onchannelmessage=de=>{R.channels_orig[T][N][de.channel_id]?(R.update_from_channel_msg(de,T,N),R.rearrange_channels()):de.user_id_one?R.join_chat_with_modulation(de.sender_id,2,T,N):de.group_id&&R.join_chat_with_modulation(de.group_id,3,T,N)},U.ondisconnect=de=>{R.OnSocketDisconnect(T,N)},U})()}OnSocketDisconnect(T,N){this.link_group(T,N,!1),Object.keys(this.on_socket_disconnected).forEach(U=>this.on_socket_disconnected[U]())}saveListedMessage(T,N,R,U,ie){let $={},de=JSON.parse(JSON.stringify(T)),Ae=ie||!1;for(;de.length;){let tt=de.shift();$.target!=tt.msgDate&&($.msg&&(this.saveMessageByDate($,N,R,U,Ae,ie),Ae=!0),$.target=tt.msgDate,$.msg=[]),delete tt.content.text,delete tt.content.img,delete tt.content.local_comp,delete tt.content.path,delete tt.msgDate,delete tt.displayDate,delete tt.msgTime,delete tt.isLastRead,delete tt.showInfo,$.msg.push(tt)}this.saveMessageByDate($,N,R,U,Ae,ie)}saveMessageByDate(T,N,R,U,ie=!1,$){if(!T.msg||!T.msg.length)return;void 0===this.last_channel_chat_id&&(this.last_channel_chat_id=N.id,this.trace_chat_history_list&&(this.trace_chat_history_list.length=0),this.trace_chat_history_list=void 0,this.trace_chat_log_path.length=0,this.indexed.GetFileListFromDB(this.last_channel_chat_id).then(pt=>{const Kt=/chats\/\d{4}\/\d{2}\/\d{2}$/;this.trace_chat_history_list=pt.filter(Fe=>Kt.test(Fe))}));const de=JSON.parse(JSON.stringify(T)),Ae=de.target.split("-"),tt=`servers/${R}/${U}/channels/${N.id}/chats/${Ae[0]}/${Ae[1]}/${Ae[2]}`;this.last_channel_chat_id&&(this.trace_chat_log_path.push(tt),this.ModulateChatHistoryLog($)),this.indexed.loadTextFromUserPath(tt,(pt,Kt)=>{let Fe=[],We=[];pt&&Kt&&(Fe=JSON.parse(Kt)),de.msg.forEach(xt=>{for(let Zt=Fe.length-1;Zt>=0;Zt--)if(Fe[Zt].message_id==xt.message_id){Fe.splice(Zt,1);break}We.push(xt)});let at=[];if("local"!=R)for(let xt=Fe.length-1;xt>=0;xt--)if(ie){let Zt=Fe.splice(xt,1);Zt[0].code=2,at.push(Zt[0])}let Ze=[...Fe,...at,...We];Ze.sort((xt,Zt)=>xt.create_time<Zt.create_time?-1:xt.create_time>Zt.create_time?1:0),this.indexed.saveTextFileToUserPath(JSON.stringify(Ze),`servers/${R}/${U}/channels/${N.id}/chats/${Ae[0]}/${Ae[1]}/${Ae[2]}`)})}ModulateChatHistoryLog(T){var N=this;return(0,F.A)(function*(){if(!N.on_working_modulate_chatlog){for(N.on_working_modulate_chatlog=!0;N.trace_chat_log_path.length;){if(void 0===N.trace_chat_history_list){yield new Promise(ie=>setTimeout(ie,0));continue}const R=N.trace_chat_log_path.pop(),U=N.trace_chat_history_list.indexOf(R);U>=0&&N.trace_chat_history_list.splice(U,1)}if(N.trace_chat_history_list.length&&T)for(;N.trace_chat_history_list.length;){const R=N.trace_chat_history_list.pop();yield N.makeChatlogRemovedMeg(R)}N.on_working_modulate_chatlog=!1}})()}makeChatlogRemovedMeg(T){var N=this;return(0,F.A)(function*(){const R=yield N.indexed.loadTextFromUserPath(T);let U=JSON.parse(R);for(let $ of U)$.code=2;const ie=JSON.stringify(U);yield N.indexed.saveTextFileToUserPath(ie,T)})()}CatchQouteMsgUserName(T,N,R){if(T.content.qoute)try{if("local"==T.content.qoute.user_id)throw"\ub85c\uceec \uba54\uc2dc\uc9c0";T.content.qoute.username=this.users[N][R][T.content.qoute.user_id].display_name}catch{T.content.qoute.username=this.users.self.display_name}}ModulateTimeDate(T){let N=new Date(T.create_time),R=N.toLocaleDateString(this.lang.lang);T.displayDate=R,T.msgDate=`${N.getFullYear()}-${("00"+(N.getMonth()+1)).slice(-2)}-${("00"+N.getDate()).slice(-2)}`,T.msgTime=`${("00"+N.getHours()).slice(-2)}:${("00"+N.getMinutes()).slice(-2)}`}join_chat_with_modulation(T,N,R,U,ie=!1){var $=this;return(0,F.A)(function*(){$.channels_orig[R][U]||($.channels_orig[R][U]={});let de=yield $.servers[R][U].socket.joinChat(T,N,!0,!1);try{switch(de.redirect={id:T,type:N,persistence:!0},de.server={isOfficial:R,target:U},N){case 2:de.title=$.GetOverrideName(T,R,U)||$.load_other_user(T,R,U).display_name,de.info=$.load_other_user(T,R,U);break;case 3:de.title=$.groups[R][U][T].name,de.info=$.groups[R][U][T],$.groups[R][U][T].channel_id=de.id;break;default:console.error("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uc815\ubcf4: ",N)}if(yield $.add_channel(de,R,U,ie),ie&&$.rearrange_channels(),!$.opened_page_info.channel||$.opened_page_info.channel.isOfficial!=R||$.opened_page_info.channel.target!=U||$.opened_page_info.channel.id!=de.id){let Ae=yield $.servers[R][U].client.listChannelMessages($.servers[R][U].session,de.id,1,!1);try{Ae.messages.length&&(yield $.update_from_channel_msg(Ae.messages[0],R,U,ie))}catch{}}return $.save_groups_with_less_info(),$.count_channel_online_member(de,R,U),de}catch(Ae){let tt="";throw tt=3===Ae.code?$.lang.text.Nakama.AddChannelFailed_Code3:Ae.message,$.p5toast.show({text:`${$.lang.text.Nakama.AddChannelFailed}: ${tt}`}),`${$.lang.text.Nakama.AddChannelFailed}: ${tt}`}})()}update_from_channel_msg(T,N,R,U=!1){var ie=this;return(0,F.A)(function*(){let $=T.sender_id==ie.servers[N][R].session.user_id,de=T.message_id!=ie.channels_orig[N][R][T.channel_id].last_comment_id,Ae=ie.modulation_channel_message(T,N,R,!0),tt=!1;switch(Ae.code){case 0:Ae.content.gupdate&&(ie.update_group_info(Ae,N,R),tt=!0),de&&!tt&&(ie.channels_orig[N][R][T.channel_id].is_new=!$,ie.subscribe_lock||(ie.has_new_channel_msg=!$));break;case 1:case 2:break;case 6:var pt;$&&(delete ie.PromotedGroup[N][R][Ae.group_id],null===(pt=ie.socket_reactive.add_todo_menu)||void 0===pt||pt.UpdateWorkerList());case 3:case 4:case 5:case 7:case 9:let Ze;if(ie.socket_reactive.group_detail&&(Ze=yield ie.socket_reactive.group_detail.update_GroupUsersList(N,R)),$&&(7==Ae.code||9==Ae.code)){Ze||(Ze=(yield ie.servers[N][R].client.listGroupUsers(ie.servers[N][R].session,Ae.group_id)).group_users);for(let xt of Ze)if(xt.user.id==ie.servers[N][R].session.user_id){var Kt;xt.state<2?ie.PromotedGroup[N][R][Ae.group_id]=!0:delete ie.PromotedGroup[N][R][Ae.group_id],null===(Kt=ie.socket_reactive.add_todo_menu)||void 0===Kt||Kt.UpdateWorkerList();break}}if(3==Ae.code||4==Ae.code||7==Ae.code||9==Ae.code)break;if(ie.noti_origin[N]&&ie.noti_origin[N][R]){let xt=Object.keys(ie.noti_origin[N][R]),Zt=[];xt.forEach(En=>{-5==ie.noti_origin[N][R][En].code&&ie.noti_origin[N][R][En].sender_id==Ae.sender_id&&Zt.push(En)});try{(yield ie.servers[N][R].client.deleteNotifications(ie.servers[N][R].session,Zt))||console.log("\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc54c\ub9bc \uc0ad\uc81c \ud6c4 \uc624\ub958"),ie.update_notifications(N,R)}catch(En){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",En)}}$&&(ie.channels_orig[N][R][Ae.channel_id].status="missing");break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ucc44\ub110 \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",Ae)}const Fe=Ae.content.filename?`(${ie.lang.text.ChatRoom.attachments}) `:"";if(!$&&de&&!tt&&0==Ae.code){var We;const Ze=ie.GenerateQRCode(ie.servers[N][R].info,"/"),xt=ie.channels_orig[N][R][T.channel_id],Zt=xt.redirect;let En={id:xt.cnoti_id,title:xt.info.name||ie.GetOverrideName(xt.info.id,N,R)||xt.info.display_name||xt.title||ie.lang.text.ChatRoom.noname_chatroom,body:Fe+Ae.content.msg||Ae.content.noti||"",smallIcon_ln:"diychat",image:null===(We=ie.groups[N][R][T.group_id])||void 0===We?void 0:We.img,bgcolor:xt.color,data_wm:{data:{url:2==Zt.type?`${Ze}&open_prv_channel=${Zt.id}`:`${Ze}&group=${xt.title||xt.info.name},${xt.group_id||xt.info.id}`.replace(/ /g,"%20")}}};Ae.content.url&&"image"==Ae.content.viewer&&(En.image=Ae.content.url),ie.noti.PushLocal(En,ie.channels_orig[N][R][T.channel_id].cnoti_id,zn=>{ie.go_to_chatroom(ie.channels_orig[N][R][T.channel_id])})}$&&ie.noti.ClearNoti(ie.channels_orig[N][R][T.channel_id].cnoti_id),ie.ModulateTimeDate(Ae),ie.check_sender_and_show_name(Ae,N,R);let at=T.content.msg;ie.content_to_hyperlink(Ae,N,R),!U&&ie.channels_orig[N][R][Ae.channel_id].update&&ie.channels_orig[N][R][Ae.channel_id].update(Ae),tt||(ie.channels_orig[N][R][T.channel_id].last_comment_time=T.update_time,ie.channels_orig[N][R][Ae.channel_id].last_comment_id=Ae.message_id),ie.saveListedMessage([Ae],ie.channels_orig[N][R][Ae.channel_id],N,R),tt||(Ae.content.hasLink&&(at=`${ie.lang.text.ChatRoom.memoMsgHere}: ${Ae.content.hasLink.title}`),2!=Ae.code&&(ie.channels_orig[N][R][Ae.channel_id].last_comment=Fe+(at||Ae.content.noti||"")))})()}rearrange_posts(){this.posts.length=0;let T=Object.keys(this.posts_orig);for(let N=0,R=T.length;N<R;N++){let U=Object.keys(this.posts_orig[T[N]]);for(let ie=0,$=U.length;ie<$;ie++){let de=Object.keys(this.posts_orig[T[N]][U[ie]]);for(let Ae=0,tt=de.length;Ae<tt;Ae++){let pt=Object.keys(this.posts_orig[T[N]][U[ie]][de[Ae]]);for(let Kt=0,Fe=pt.length;Kt<Fe;Kt++)this.posts.push(this.posts_orig[T[N]][U[ie]][de[Ae]][pt[Kt]])}}}this.posts.sort((N,R)=>N.create_time<R.create_time?1:N.create_time>R.create_time?-1:0)}RemoveCurrentPostAttach(T,N){this.p5loading.toast(`${this.lang.text.AddPost.RemoveAttach}: ${N.attachments[T].filename}`,"add_post"),N.attachments.splice(T,1);let R=N.content.split("\n");for(let U=R.length-1;U>=0;U--){let ie=!1,$=R[U].length-1,de=0;try{de=Number(R[U].substring(1,$)),ie="{"==R[U].charAt(0)&&"}"==R[U].charAt($)&&!isNaN(de)}catch{}if(ie)if(T==de){if(""==R[U+1])try{R.splice(U+1,1)}catch{}R.splice(U,1)}else T<de&&(R[U]=`{${de-1}}`)}N.content=R.join("\n")}AddPost(T,N,R,U=!1,ie){var $=this;return(0,F.A)(function*(){const de=T.server.isOfficial,Ae=T.server.target;let tt={};try{const at=$.servers[de][Ae].info;tt.cdn_port=at.cdn_port,tt.apache_port=at.apache_port,tt.user_id=$.servers[de][Ae].session.user_id}catch{tt={}}for(let at=0,Ze=T.attachments.length;at<Ze;at++)delete T.attachments[at].thumbnail;if(T.mainImage){if($.p5loading.update({id:N,message:$.lang.text.AddPost.SyncMainImage}),T.mainImage.path=`servers/${de}/${Ae}/posts/${T.creator_id}/${T.id}/MainImage.${T.mainImage.file_ext}`,T.mainImage.thumbnail=ie,!T.mainImage.blob)try{const Ze=yield(yield fetch(ie)).blob();T.mainImage.blob=Ze}catch{}if($.p5loading.update({id:N,image:ie}),U)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let at;if($.p5loading.update({id:N,message:`${$.lang.text.AddPost.SyncMainImage}: ${T.mainImage.filename}`}),at=yield $.global.try_upload_to_user_custom_fs(T.mainImage,`${$.users.self.display_name}/${T.id}`,N,T.title),!at)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.mainImage.path,delete T.mainImage.partsize,T.mainImage.url=at}catch{try{yield $.indexed.saveBlobToUserPath(T.mainImage.blob,T.mainImage.path)}catch(Ze){console.log("\uba54\uc778\uc0ac\uc9c4 \ud30c\uc77c \uae68\uc9d0\ucc98\ub9ac: ",Ze),delete T.mainImage}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const at=$.servers[de][Ae].info.address,Ze=$.servers[de][Ae].info.useSSL?"https:":"http:",xt=yield $.global.upload_file_to_storage(T.mainImage,{user_id:`${$.servers[de][Ae].session.user_id}/${T.id}`,cdn_port:tt.cdn_port,apache_port:tt.apache_port},Ze,at,1==T.CDN,N,T.title);if(!xt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.mainImage.partsize,T.mainImage.url=xt}catch{yield $.sync_save_file(T.mainImage,de,Ae,"server_post",`${T.id}_mainImage`)}}const pt=T.attachments.length;if(pt){$.p5loading.update({id:N,message:$.lang.text.AddPost.SyncAttaches});for(let at=pt-1;at>=0;at--)if(U)try{if(1!=T.CDN)throw"FFS \uc0ac\uc6a9 \uc21c\uc704\uc5d0 \uc5c6\uc74c";let Ze;if($.p5loading.update({id:N,message:`${$.lang.text.AddPost.SyncAttaches}: [${at}]${T.attachments[at].filename}`}),Ze=yield $.global.try_upload_to_user_custom_fs(T.attachments[at],`${$.users.self.display_name}/${T.id}`,N,T.title),!Ze)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";delete T.attachments[at].path,delete T.attachments[at].partsize,T.attachments[at].url=Ze}catch{try{T.attachments[at].path=`servers/${de}/${Ae}/posts/${T.creator_id}/${T.id}/[${at}]${T.attachments[at].filename}`,yield $.indexed.saveBlobToUserPath(T.attachments[at].blob,T.attachments[at].path)}catch(xt){$.p5toast.show({text:`{${at}} ${$.lang.text.AddPost.AttachError}: ${(xt.statusText?`${xt.statusText}(${xt.status})`:xt.status)||xt}`,lateable:!0}),$.RemoveCurrentPostAttach(at,T)}}else try{if(2==T.CDN)throw"SQL \uac15\uc81c";const Ze=$.servers[de][Ae].info.address,xt=$.servers[de][Ae].info.useSSL?"https:":"http:",Zt=yield $.global.upload_file_to_storage(T.attachments[at],{user_id:`${$.servers[de][Ae].session.user_id}/${T.id}`,cdn_port:tt.cdn_port,apache_port:tt.apache_port},xt,Ze,1==T.CDN,N,T.title);if(!Zt)throw"\ub9c1\ud06c \ub9cc\ub4e4\uae30 \uc2e4\ud328";delete T.attachments[at].path,delete T.attachments[at].partsize,T.attachments[at].url=Zt}catch(Ze){try{"SQL \uac15\uc81c"==Ze&&T.attachments[at].url&&!T.attachments[at].blob&&(T.attachments[at].blob=yield(yield fetch(T.attachments[at].url)).blob()),yield $.sync_save_file(T.attachments[at],de,Ae,"server_post",`${T.id}_attach_${at}`)}catch(xt){$.p5toast.show({text:`{${at}} ${$.lang.text.AddPost.AttachError}: ${(xt.statusText?`${xt.statusText}(${xt.status})`:xt.status)||xt}`,lateable:!0}),$.RemoveCurrentPostAttach(at,T)}}}if(T.OutSource&&(yield $.global.remove_file_from_storage(T.OutSource,tt),T.OutSource=void 0),R=R&&"me"!=T.creator_id){const at=new Blob([JSON.stringify(T)],{type:"text/plain"}),Ze={blob:at,filename:`${T.id}.json`,file_ext:"json",size:at.size};try{const xt=$.servers[de][Ae].info.address,Zt=$.servers[de][Ae].session.user_id,En=$.servers[de][Ae].info.useSSL?"https:":"http:",zn=yield $.global.upload_file_to_storage(Ze,{user_id:`${Zt}/${T.id}`,cdn_port:tt.cdn_port,apache_port:tt.apache_port},En,xt,1==T.CDN,N,T.title);if(!zn)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=zn}catch{try{const Zt=$.users.self.display_name,En=yield $.global.try_upload_to_user_custom_fs(Ze,`${Zt}/${T.id}`,N,T.title);if(!En)throw"\uc5c5\ub85c\ub4dc \uc2e4\ud328";T.OutSource=En}catch(Zt){T.OutSource=void 0,R=!1,$.p5toast.show({text:`${$.lang.text.AddPost.OutLinkFailed}: ${(Zt.statusText?`${Zt.statusText}(${Zt.status})`:Zt.status)||Zt}`})}}}let Kt=JSON.parse(JSON.stringify(T));Kt.mainImage&&(delete Kt.mainImage.blob,delete Kt.mainImage.thumbnail);for(let at=Kt.attachments.length-1;at>=0;at--)delete Kt.attachments[at].blob;delete Kt.server;try{$.posts_orig[de][Ae]||($.posts_orig[de][Ae]={}),$.posts_orig[de][Ae][T.creator_id]||($.posts_orig[de][Ae][T.creator_id]={}),$.posts_orig[de][Ae][T.creator_id][T.id]=T}catch(at){$.p5toast.show({text:`${$.lang.text.AddPost.SyncErr}: ${(at.statusText?`${at.statusText}(${at.status})`:at.status)||at}`}),console.log(at)}const Fe=JSON.stringify(Kt);yield $.indexed.saveTextFileToUserPath(Fe,`servers/${de}/${Ae}/posts/${T.creator_id}/${T.id}/info.json`),delete Kt.is_me;const We=JSON.stringify(Kt);if(!U){let at=new Blob([We],{type:"application/json"}),Ze={filename:"info.json"};Ze.blob=at,Ze.size=at.size,Ze.type="application/json",Ze.file_ext="json",Ze.typeheader="text",Ze.path=`servers/${de}/${Ae}/posts/${T.creator_id}/${T.id}/info.json`,yield $.sync_save_file(Ze,de,Ae,"server_post",T.id)}})()}EditPost(T){this.CommunityGoToEditPost&&this.CommunityGoToEditPost(T),this.socket_reactive.try_load_post&&this.socket_reactive.try_load_post()}RemovePost(T,N=!1,R){var U=this;return(0,F.A)(function*(){var ie;const $=JSON.parse(JSON.stringify(T)),de=$.server.isOfficial,Ae=$.server.target,tt=R||`nakama_RemovePost_${Date.now()}`,pt="online"==(null===(ie=U.statusBar.groupServer[de])||void 0===ie?void 0:ie[Ae]);N||(yield U.p5loading.update({id:tt,message:U.lang.text.PostViewer.RemovePost,forceEnd:null}));let Kt=yield U.indexed.GetFileListFromDB(`servers/${de}/${Ae}/posts/${T.creator_id}/${T.id}`);for(let at=0,Ze=Kt.length;at<Ze;at++)N||U.p5loading.update({id:tt,message:`${U.lang.text.PostViewer.RemovePost}: ${Kt[at]}`,progress:at/Ze}),yield U.indexed.removeFileFromUserPath(Kt[at]);N||U.p5loading.update({id:tt,progress:null});let Fe={};try{const at=U.servers[de][Ae].info;Fe.cdn_port=at.cdn_port,Fe.apache_port=at.apache_port,Fe.user_id=U.servers[de][Ae].session.user_id}catch{Fe={}}if(T.OutSource&&U.global.remove_file_from_storage(T.OutSource,Fe),T.attachments)for(let at=0,Ze=T.attachments.length;at<Ze;at++)try{if(N||U.p5loading.update({id:tt,message:`${U.lang.text.PostViewer.RemovePost}: ${T.attachments[at].filename}`,progress:at/Ze}),T.attachments[at].url&&""!==T.attachments[at].type)N||U.global.remove_file_from_storage(T.attachments[at].url,Fe);else try{T.server.local||(yield U.sync_remove_file(`${T.id}_attach_${at}`,de,Ae,"server_post","",`${T.id}_attach_${at}`))}catch{}}catch{}if(N||U.p5loading.update({id:tt,progress:null}),T.mainImage)try{if(T.mainImage.url&&""!==T.mainImage.type)N||U.global.remove_file_from_storage(T.mainImage.url,Fe);else try{T.server.local||(yield U.sync_remove_file(`${T.id}_mainImage`,de,Ae,"server_post","",`${T.id}_mainImage`))}catch{}}catch{}try{T.server.local||N||(yield U.sync_remove_file(T.id,de,Ae,"server_post","",`${T.id}`))}catch{}N||U.p5loading.update({id:tt,message:`${U.lang.text.PostViewer.RemovePost}: ${T.title}`}),!N&&!R&&U.p5loading.remove(tt);try{delete U.posts_orig[de][Ae][T.creator_id][T.id]}catch{}if(!N)try{let at=U.collectLinkedUser(U.servers[de][Ae]);yield U.servers[de][Ae].client.rpc(U.servers[de][Ae].session,"send_noti_fn",{code:vr.MANAGE_POST,title:"post_remove",receiver_id:at,content:{type:"remove",user_id:T.creator_id,post_id:T.id},persistent:!1})}catch{}if(U.rearrange_posts(),U.socket_reactive.try_load_post&&U.socket_reactive.try_load_post(),!pt&&!$.offlineAct&&!T.server.local){var We;let at=Number(yield U.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;$.id=`LocalPost_${at}`;try{yield U.indexed.saveTextFileToUserPath(`${at+1}`,"servers/local/target/posts/me/counter.txt")}catch(Ze){U.p5toast.show({text:`${U.lang.text.AddPost.SyncErr}: ${(Ze.statusText?`${Ze.statusText}(${Ze.status})`:Ze.status)||Ze}`}),console.log(Ze)}$.offlineAct="remove",$.originalInfo=T,$.creator_id="me",$.server={name:U.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0},yield U.AddPost($,tt,!0,!0,null===(We=$.mainImage)||void 0===We?void 0:We.thumbnail),U.rearrange_posts(),U.p5loading.remove(tt)}})()}content_to_hyperlink(T,N,R){if(!T.content.msg||"object"==typeof T.content.msg)return;let U=T.content.msg.split("\n");T.content.msg=[],U.forEach(ie=>{T.content.msg.push([{text:ie}])});for(let ie=0,$=T.content.msg.length;ie<$;ie++)if(T.content.msg[ie][0].text){const de=/(https?:\/\/[^\s]+|[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[^\s]*)?/g,Ae=T.content.msg[ie][0].text,tt=Ae.match(de);if(tt){const pt="%extractURL",Fe=Ae.replace(de,pt).split(pt);let We=[];for(;Fe.length||tt.length;){{let at=Fe.shift();at&&We.push({text:at})}{let at=tt.shift();at&&We.push({text:at,href:!0})}}T.content.msg[ie]=We}else T.content.msg[ie]=[{text:Ae}];try{let pt=T.content.msg[ie][0].text.match(/[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6DC}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F90C}-\u{1F93A}\u{1F93C}-\u{1F945}\u{1F947}-\u{1F9FF}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}]+/gu)[0].replace(/[0-9]/g,"");1==T.content.msg.length&&T.content.msg[ie][0].text.length==pt.length&&(T.content.msg[ie][0].size=48)}catch{}}}ServerBaseMessageWork(T,N,R,U,ie){try{const $=T.content.lo||this.lang.lang;if($==this.lang.lang)throw"\ubc88\uc5ed\ud560 \ud544\uc694\uac00 \uc5c6\ub294 \ub3d9\uc77c \uc5b8\uc5b4";this.TranslateDescList.push({msg:T,source:$.split("_").shift(),isOfficial:N,target:R,cont:U,callback:ie}),this.RequestTranslateText()}catch{try{let Ae,de=T.content.msg,tt=!1;for(let pt of de){for(let Kt of pt)if(Kt.href){Ae=Kt.text,tt=!0;break}if(tt)break}tt&&this.HyperLinkDescList.push({msg:T,url:Ae,isOfficial:N,target:R,cont:U,callback:ie}),this.RequestHyperLinkInfo()}catch{}}}RequestHyperLinkInfo(){var T=this;return(0,F.A)(function*(){if(!T.isRequestingLinkInfo){for(T.isRequestingLinkInfo=!0;T.HyperLinkDescList.length;){var N,R;const ie=T.HyperLinkDescList.pop();if(null!==(N=ie.cont)&&void 0!==N&&N.signal.aborted){var U;console.log("\ub354 \uc774\uc0c1 \ud398\uc774\uc9c0 \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",null===(U=ie.cont)||void 0===U?void 0:U.signal.reason);continue}let $,de;try{$=T.servers[ie.isOfficial][ie.target].info,de=T.GetNodejsServerAddress($.isOfficial,$.target,"cdn_port")}catch{}if(!ie.msg.content.hasLink){try{let Ae=yield T.global.GetHrefThumbnail(ie.url,de,ie.cont);if(!Ae||Ae.error)throw Ae;ie.msg.content.hasLink=Ae,T.saveListedMessage([ie.msg],T.channels_orig[ie.isOfficial][ie.target][ie.msg.channel_id],ie.isOfficial,ie.target)}catch(Ae){Ae&&console.log("href \uac04\ub7b5\uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc2e4\ud328: ",Ae)}null===(R=ie.callback)||void 0===R||R.call(ie)}}T.isRequestingLinkInfo=!1}})()}RequestTranslateText(){var T=this;return(0,F.A)(function*(){if(!T.isTranslating){for(T.isTranslating=!0;T.TranslateDescList.length;){var N,R,U;const $=T.TranslateDescList.pop();if(null!==(N=$.cont)&&void 0!==N&&N.signal.aborted){var ie;console.log("\ub354 \uc774\uc0c1 \ubc88\uc5ed \uc815\ubcf4\ub97c \ud544\uc694\ub85c\ud558\uc9c0 \uc54a\uc74c: ",null===(ie=$.cont)||void 0===ie?void 0:ie.signal.reason);continue}let de;try{de=T.servers[$.isOfficial][$.target].info}catch{}const tt=`http://${de.address}:${de.libretranslate_port||5050}/translate`,pt=T.deserialize_text($.msg);if(!pt)throw"\ubc88\uc5ed \uac00\ub2a5\ud55c \uba54\uc2dc\uc9c0 \uc544\ub2d8";let Kt={q:pt,source:$.source,target:T.lang.lang,format:"text"};if(null===(R=$.msg)||void 0===R||null===(R=R.content)||void 0===R||!R.hasLink){try{const at=(yield(yield fetch(tt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)})).json()).translatedText;$.msg.content.hasLink={title:at},T.saveListedMessage([$.msg],T.channels_orig[$.isOfficial][$.target][$.msg.channel_id],$.isOfficial,$.target)}catch(Fe){Fe&&console.log("\uba54\uc2dc\uc9c0 \ubc88\uc5ed \uc2e4\ud328: ",Fe)}null===(U=$.callback)||void 0===U||U.call($)}}T.isTranslating=!1}})()}check_sender_and_show_name(T,N,R){try{T.color="#"+(T.sender_id.replace(/[^5-79a-b]/g,"")+"abcdef").substring(0,6),T.sender_id==this.servers[N][R].session.user_id?(T.user_display_name=this.users.self.display_name,T.is_me=!0):T.user_display_name=this.load_other_user(T.sender_id,N,R).display_name,T.user_display_name=T.user_display_name||this.lang.text.Profile.noname_user}catch(U){console.log("\ubc1c\uc2e0\uc790 \uccb4\ud06c \uc624\ub958: ",U)}}modulation_channel_message(T,N,R,U=!1){var ie=this;this.translate_updates(T);let de,$=!1;try{$=T.sender_id==this.servers[N][R].session.user_id}catch{}try{de=$?this.users.self:this.load_other_user(T.sender_id,N,R)}catch{de=this.users.self}let Ae=function(){var tt=(0,F.A)(function*(){if(U){let pt=yield ie.servers[N][R].client.listGroupUsers(ie.servers[N][R].session,T.group_id);for(let Kt of pt.group_users)if(Kt.user.id==ie.servers[N][R].session.user_id){Kt.is_me=!0,Kt.user=ie.users.self;break}ie.groups[N][R][T.group_id].users=pt.group_users,ie.count_channel_online_member(T,N,R)}});return function(){return tt.apply(this,arguments)}}();switch(T.code){case 0:if(T.content.filename){try{T.content.transfer_index=this.OnTransfer[N][R][T.channel_id][T.message_id]}catch{}try{this.OnTransferMessage[T.message_id]=T}catch{}}break;case 1:case 2:break;case 3:case 4:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserJoin}: ${de.display_name}`,U&&Ae();break;case 5:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserOut}: ${de.display_name}`,U&&Ae();break;case 6:T.content.user_update=de,T.content.noti=`${this.lang.text.Nakama.GroupUserKick}: ${de.display_name}`,U&&Ae();break;case 7:T.content.user_update=de,T.content.noti=`${this.lang.text.OtherProfile.PromoteSucc}: ${de.display_name}`;break;case 9:T.content.user_update=de,T.content.noti=`${this.lang.text.OtherProfile.DemoteSucc}: ${de.display_name}`;break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uba54\uc2dc\uc9c0 \ucf54\ub4dc: ",T)}return T}update_group_info(T,N,R){switch(this.translate_updates(T),T.content.gupdate){case"remove":case"force_remove":this.groups[N][R][T.group_id].status="missing",this.save_groups_with_less_info(),this.channels_orig[N][R][T.channel_id].status="missing",this.servers[N][R].socket.leaveChat(T.channel_id);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uadf8\ub8f9 \ud589\ub3d9: ",T)}}translate_updates(T){if(T.content.gupdate)switch(T.content.gupdate){case"remove":T.content.noti=this.lang.text.GroupDetail.GroupRemoved;break;case"force_remove":T.content.noti=this.lang.text.GroupDetail.GroupForceRemoved}}check_notifications(T,N,R){var U=this;return(0,F.A)(function*(){let ie=U.servers[N][R];switch(T.code){case 0:case-2:break;case 1:let $=`<div style="text-align: center"><img src="${decodeURIComponent(T.content.uri)}" alt="noti_image" style="border-radius: 2px"/></div>`,de=`<div>${decodeURIComponent(U.global.HTMLEncode(T.content.msg))}</div>`;U.alertCtrl.create({header:U.servers[N][R].info.name,message:new Tn.Vk(T.content.uri?$+de:de),buttons:[{text:U.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var pt=(0,F.A)(function*(){try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id])}catch{}U.noti.ClearNoti(T.code),U.update_notifications(N,R)});return function(){return pt.apply(this,arguments)}}()()}}]}).then(tt=>tt.present());break;case-1:case-3:case-4:case-6:U.noti.ClearNoti(T.code);try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),U.update_notifications(N,R)}catch(tt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",tt)}break;case-5:try{let tt=yield ie.client.getUsers(ie.session,[T.sender_id]);if(tt.users.length){let pt="";pt+=`${U.lang.text.Nakama.ReqContServer}: ${T.server.name}<br>`,pt+=`${U.lang.text.Nakama.ReqContUserName}: ${tt.users[0].display_name}`,U.alertCtrl.create({header:U.lang.text.Nakama.ReqContTitle,message:pt,buttons:[{text:U.lang.text.Nakama.ReqContAccept,handler:()=>{!function(){var Fe=(0,F.A)(function*(){try{(yield ie.client.addGroupUsers(ie.session,T.content.group_id,[tt.users[0].id]))||console.log("\ubc34\uc778 \uacbd\uc6b0\uc778 \uac83 \uac19\uc74c, \ud655\uc778 \ud544\uc694"),U.noti.ClearNoti(T.code);try{let at=yield ie.client.deleteNotifications(ie.session,[T.id]);at?U.update_notifications(N,R):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",at)}catch(at){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",at)}}catch(We){console.error("\uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\uc790 \ucd94\uac00 \uc624\ub958: ",We)}});return function(){return Fe.apply(this,arguments)}}()()}},{text:U.lang.text.Nakama.ReqContReject,handler:()=>{!function(){var Fe=(0,F.A)(function*(){try{(yield ie.client.kickGroupUsers(ie.session,T.content.group_id,[tt.users[0].id]))||console.log("\uadf8\ub8f9 \ucc38\uc5ec \uac70\uc808\uc744 kick\ud55c \uacbd\uc6b0 \uc624\ub958"),yield ie.client.deleteNotifications(ie.session,[T.id]),U.update_notifications(N,R)}catch(We){console.error("\uc0ac\uc6a9\uc790 \uac15\ud1f4 \uc624\ub958: ",We)}});return function(){return Fe.apply(this,arguments)}}()()},cssClass:"redfont"}]}).then(Kt=>Kt.present())}else try{(yield ie.client.deleteNotifications(ie.session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),U.p5toast.show({text:U.lang.text.Nakama.UserNotFound}),U.update_notifications(N,R)}catch(pt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",pt)}}catch(tt){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ubc1b\uc544\uc624\uae30 \uc624\ub958: ",tt)}break;case-7:U.LoginAgain(U.noti_origin,N,R);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \uad6c\ubd84: ",T.code);try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id])}catch{}U.update_notifications(N,R)}})()}act_on_notification(T,N,R){var U=this;return(0,F.A)(function*(){let ie=!1;switch(T.server=U.servers[N][R].info,T.code){case 404:U.remove_server(N,R,!1);break;case vr.MANAGE_POST:switch(T.content.type){case"add":try{let Kt=T.content.user_id==U.servers[N][R].session.user_id;if(!U.users[N][R][T.content.user_id]&&!Kt)throw"\ubaa8\ub974\ub294 \uc0ac\ub78c";let Fe=yield U.load_server_post_with_id(T.content.post_id,N,R,T.content.user_id,Kt);U.rearrange_posts(),!Kt&&Fe&&null!=Fe&&Fe.title&&(U.p5toast.show({text:`${U.lang.text.AddPost.Title}: ${Fe.title}`}),U.has_new_post=!0)}catch{}break;case"remove":U.RemovePost({id:T.content.post_id,creator_id:T.content.user_id,attachments:[],server:{isOfficial:N,target:R}},!0)}return;case 1:T.request=`${U.lang.text.Nakama.ServerNoti}: ${decodeURIComponent(T.content.msg)}`;let $=decodeURIComponent(T.content.msg),de=decodeURIComponent(T.content.uri);U.noti.PushLocal({id:T.code,title:U.servers[N][R].info.name,body:$,image:de,smallIcon_ln:"diychat"},"global_noti_all",pt=>{let Kt=`<div style="text-align: center"><img src="${de}" alt="noti_image" style="border-radius: 2px"/></div>`,Fe=`<div>${U.global.HTMLEncode($)}</div>`;U.alertCtrl.create({header:U.servers[N][R].info.name,message:new Tn.Vk(de?Kt+Fe:Fe),buttons:[{text:U.lang.text.Nakama.LocalNotiOK,handler:()=>{!function(){var Ze=(0,F.A)(function*(){try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id])}catch{}U.noti.ClearNoti(T.code),U.update_notifications(N,R)});return function(){return Ze.apply(this,arguments)}}()()}}]}).then(at=>at.present())});break;case 0:T.request=`${T.code}-${T.subject}`;break;case-1:let Ae;T.request=`${T.code}-${T.subject}`,2===(T.content&&T.content.username&&(Ae=2),Ae)?U.join_chat_with_modulation(T.sender_id,Ae,N,R).then(()=>{U.rearrange_channels()}):(console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \uc54c\ub9bc \ud589\ub3d9\ucc98\ub9ac: ",T,Ae),T.request=`${T.code}-${T.subject}`),ie=!0;try{(yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]))||console.log("\uc54c\ub9bc \uac70\ubd80\ucc98\ub9ac \uac80\ud1a0 \ud544\uc694"),U.update_notifications(N,R)}catch(pt){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958: ",pt)}break;case-2:case-3:T.request=`${T.code}-${T.subject}`;break;case-4:U.socket_reactive.group_detail&&U.socket_reactive.group_detail.info.id==T.content.group_id&&U.socket_reactive.group_detail.update_from_notification(T);try{U.groups[N][R][T.content.group_id].status="online"}catch{try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}}T.request=`${T.code}-${T.subject}`;try{let pt=yield U.servers[N][R].client.readStorageObjects(U.servers[N][R].session,{object_ids:[{collection:"group_public",key:`group_${T.content.group_id}`,user_id:U.groups[N][R][T.content.group_id].creator_id}]});pt.objects.length&&(U.groups[N][R][T.content.group_id].img=pt.objects[0].value.img,U.indexed.saveTextFileToUserPath(pt.objects[0].value.img,`servers/${N}/${R}/groups/${T.content.group_id}.img`))}catch(pt){console.error("\uadf8\ub8f9 \uc774\ubbf8\uc9c0 \uac00\uc838\uc624\uae30 \uc624\ub958: ",pt)}try{yield U.load_groups(N,R,T.content.group_id,!0)}catch(pt){console.error("\uadf8\ub8f9 \uc0ac\uc6a9\uc790 \uac00\uc838\uc624\uae30 \uc624\ub958: ",pt)}U.join_chat_with_modulation(T.content.group_id,3,N,R,!0),U.noti.PushLocal({id:T.code,title:`${U.groups[N][R][T.content.group_id].name}: ${U.lang.text.Nakama.LocalNotiTitle}`,body:T.subject,icon:U.groups[N][R][T.content.group_id.img],smallIcon_ln:"diychat"},void 0,pt=>{U.check_notifications(T,N,R)});break;case-5:let tt=U.groups[N][R][T.content.group_id];if(tt)T.request=`${U.lang.text.Nakama.ReqContTitle}: ${tt.name}`;else{ie=!0;try{let pt=yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]);pt?U.update_notifications(N,R):console.log("\uc54c\ub9bc \uc9c0\uc6b0\uae30 \uc2e4\ud328: ",pt)}catch(pt){console.error("\uc54c\ub9bc \uc81c\uac70 \uc624\ub958: ",pt)}}U.socket_reactive.group_detail&&U.socket_reactive.group_detail.info.id==T.content.group_id&&U.socket_reactive.group_detail.update_from_notification(T),U.noti.PushLocal({id:T.code,title:`${U.groups[N][R][T.content.group_id].name}: ${U.lang.text.Nakama.ReqContTitle}`,icon:U.groups[N][R][T.content.group_id].img,smallIcon_ln:"diychat"},void 0,pt=>{U.socket_reactive.group_detail.info.id!=T.content.group_id&&U.global.ActLikeModal("group-detail",{info:U.groups[N][R][T.content.group_id],server:{isOfficial:N,target:R}})});break;case-6:T.request=`${T.code}-${T.subject}`;break;case-7:T.request=`${U.servers[N][R].info.name}: ${U.lang.text.Nakama.SessionLogout}`,U.LoginAgain(T,N,R);break;case vr.MANAGE_TODO:{const pt="add_todo";switch(T.content.type){case"add":U.servers[N][R].client.readStorageObjects(U.servers[N][R].session,{object_ids:[{collection:T.content.collection,key:T.content.key,user_id:T.content.sender_id||U.servers[N][R].session.user_id}]}).then(function(){var We=(0,F.A)(function*(at){if(at.objects.length){try{let Zt,xt=at.objects[0].value;try{if(Zt=yield U.indexed.loadTextFromUserPath(`todo/${xt.id}_${N}_${R}/info.todo`),!Zt)throw"empty"}catch{Zt=yield U.indexed.loadTextFromUserPath(`todo/${xt.id}/info.todo`)}let En=JSON.parse(Zt);U.global.RemoveTodoTags(En),U.global.AddTodoTags(xt),U.removeRegisteredId(En.noti_id),U.noti.ClearNoti(En.noti_id)}catch{}yield U.modify_remote_info_as_local(at.objects[0].value,N,R);let Ze=at.objects[0].value;U.noti.ClearNoti(Ze.noti_id),U.set_todo_notification(Ze),yield U.p5loading.update({id:pt,message:`${U.lang.text.Main.Title}: ${Ze.title}`,progress:1,forceEnd:350})}});return function(at){return We.apply(this,arguments)}}());break;case"done":U.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${R}/info.todo`,function(){var We=(0,F.A)(function*(at,Ze){if(at&&Ze){let xt=JSON.parse(Ze);xt.done=!0,yield U.modify_remote_info_as_local(xt,N,R),U.indexed.GetFileListFromDB(`todo/${xt.id}`).then(Zt=>{Zt.forEach(En=>U.indexed.removeFileFromUserPath(En)),U.RemoveLocalPushSchedule(xt),U.removeRegisteredId(xt.noti_id),U.noti.ClearNoti(xt.noti_id),U.SyncTodoCounter(N,R)})}else U.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var xt=(0,F.A)(function*(Zt,En){if(Zt&&En){let zn=JSON.parse(En);zn.done=!0,yield U.modify_remote_info_as_local(zn,N,R),U.indexed.GetFileListFromDB(`todo/${zn.id}`).then(or=>{or.forEach(ii=>U.indexed.removeFileFromUserPath(ii)),U.RemoveLocalPushSchedule(zn),U.removeRegisteredId(zn.noti_id),U.noti.ClearNoti(zn.noti_id),U.SyncTodoCounter(N,R)})}});return function(Zt,En){return xt.apply(this,arguments)}}())});return function(at,Ze){return We.apply(this,arguments)}}());break;case"delete":U.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${R}/info.todo`,(We,at)=>{if(We&&at){let Ze=JSON.parse(at);U.global.RemoveTodoTags(Ze),U.indexed.GetFileListFromDB(`todo/${Ze.id}`).then(xt=>{var Zt,En;xt.forEach(zn=>U.indexed.removeFileFromUserPath(zn)),U.RemoveLocalPushSchedule(Ze),U.removeRegisteredId(Ze.noti_id),U.noti.ClearNoti(Ze.noti_id),null===(Zt=(En=U.global).p5removeTodo)||void 0===Zt||Zt.call(En,JSON.stringify(Ze))}),U.SyncTodoCounter(N,R)}else U.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,(Ze,xt)=>{if(Ze&&xt){let Zt=JSON.parse(xt);U.global.RemoveTodoTags(Zt),U.indexed.GetFileListFromDB(`todo/${Zt.id}`).then(En=>{var zn,or;En.forEach(ii=>U.indexed.removeFileFromUserPath(ii)),U.RemoveLocalPushSchedule(Zt),U.removeRegisteredId(Zt.noti_id),U.noti.ClearNoti(Zt.noti_id),null===(zn=(or=U.global).p5removeTodo)||void 0===zn||zn.call(or,JSON.stringify(Zt))}),U.SyncTodoCounter(N,R)}})});break;case"worker":let Kt=T.content.isDelete;U.AddTodoManageUpdateAct&&U.AddTodoManageUpdateAct(T.content.id,T.sender_id,Kt,T.content.timeAt);let Fe=Kt?U.lang.text.Main.WorkerAbandon:U.lang.text.Main.WorkerDone;yield U.p5loading.update({id:pt,message:`${Fe}: ${U.GetOverrideName(T.sender_id,N,R)||U.users[N][R][T.sender_id].display_name}`,progress:1,forceEnd:350}),U.indexed.loadTextFromUserPath(`todo/${T.content.id}_${N}_${R}/info.todo`,function(){var We=(0,F.A)(function*(at,Ze){if(at&&Ze){let xt=JSON.parse(Ze);for(let Zt=0,En=xt.workers.length;Zt<En;Zt++)if((xt.workers[Zt].user_id||xt.workers[Zt].id)==T.sender_id){xt.workers[Zt].isDelete=Kt,xt.workers[Zt].timestamp=T.content.timeAt;break}yield U.modify_remote_info_as_local(xt,N,R),U.SyncTodoCounter(N,R)}else U.indexed.loadTextFromUserPath(`todo/${T.content.id}/info.todo`,function(){var xt=(0,F.A)(function*(Zt,En){if(Zt&&En){let zn=JSON.parse(En);for(let or=0,ii=zn.workers.length;or<ii;or++)if((zn.workers[or].user_id||zn.workers[or].id)==T.sender_id){zn.workers[or].isDelete=Kt,zn.workers[or].timestamp=T.content.timeAt;break}yield U.modify_remote_info_as_local(zn,N,R),U.SyncTodoCounter(N,R)}});return function(Zt,En){return xt.apply(this,arguments)}}())});return function(at,Ze){return We.apply(this,arguments)}}())}U.SyncTodoCounter(N,R);try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}}break;case vr.EDIT_PROFILE:switch(T.content.type){case"info":try{if(U.servers[N][R].session.user_id==T.sender_id)U.servers[N][R].client.getAccount(U.servers[N][R].session).then(pt=>{Object.keys(pt.user).forEach(Fe=>U.users.self[Fe]=pt.user[Fe]),U.save_self_profile()}).catch(pt=>{console.log("\ub0b4 \ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",pt)});else try{let pt=yield U.servers[N][R].client.getUsers(U.servers[N][R].session,[T.sender_id]);pt.users.length?U.save_other_user(pt.users[0],N,R):(delete U.users[N][R][T.sender_id],U.indexed.removeFileFromUserPath(`servers/${N}/${R}/users/${T.sender_id}/profile.json`))}catch(pt){console.log("\uc54c\ub9bc\uc5d0 \ubc18\uc751\ud558\uae30 \uc624\ub958: ",pt)}}catch(pt){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",pt)}break;case"image":if(U.servers[N][R].session.user_id==T.sender_id)U.servers[N][R].client.readStorageObjects(U.servers[N][R].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:U.servers[N][R].session.user_id}]}).then(pt=>{pt.objects.length?(U.indexed.saveTextFileToUserPath(JSON.stringify(pt.objects[0].value.img),"servers/self/profile.img"),U.users.self.img=pt.objects[0].value.img.replace(/"|=|\\/g,"")):U.indexed.removeFileFromUserPath("servers/self/profile.img")}).catch(pt=>{console.log("\ub0b4 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958: ",pt)});else try{let pt=yield U.servers[N][R].client.readStorageObjects(U.servers[N][R].session,{object_ids:[{collection:"user_public",key:"profile_image",user_id:T.sender_id}]});if(pt.objects.length)try{if(U.servers[N][R].session.user_id==T.sender_id)throw"me";U.load_other_user(T.sender_id,N,R).img=pt.objects[0].value.img.replace(/"|\\|=/g,""),U.indexed.saveTextFileToUserPath(U.users[N][R][T.sender_id].img,`servers/${N}/${R}/users/${T.sender_id}/profile.img`)}catch{U.users.self.img=pt.objects[0].value.img.replace(/"|\\|=/g,""),yield U.indexed.saveTextFileToUserPath(U.users.self.img,"servers/self/profile.img")}else try{if(U.servers[N][R].session.user_id==T.sender_id)throw"me";delete U.users[N][R][T.sender_id].img,U.indexed.removeFileFromUserPath(`servers/${N}/${R}/users/${T.sender_id}/profile.img`)}catch{delete U.users.self.img}}catch(pt){console.error("\ub2e4\ub978 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ubcc0\uacbd \uc624\ub958: ",pt)}}try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}break;case vr.GROUP_IMAGE_CHANGED:switch(T.content.type){case"upload":U.servers[N][R].client.readStorageObjects(U.servers[N][R].session,{object_ids:[{collection:"group_public",key:`group_${T.content.id}`,user_id:T.content.creator_id}]}).then(pt=>{pt.objects.length?(U.groups[N][R][T.content.id].img=pt.objects[0].value.img,U.indexed.saveTextFileToUserPath(pt.objects[0].value.img,`servers/${N}/${R}/groups/${T.content.id}.img`)):(delete U.groups[N][R][T.content.id].img,U.indexed.removeFileFromUserPath(`servers/${N}/${R}/groups/${T.content.id}.img`))});break;case"remove":delete U.groups[N][R][T.content.id].img,U.indexed.removeFileFromUserPath(`servers/${N}/${R}/groups/${T.content.id}.img`)}U.rearrange_group_list();try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}break;case vr.ADD_CHANNEL:U.get_group_list_from_server(N,R,T.content.id);try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}break;case vr.NAME_OVERRIDED:U.LoadOverrideName(N,R);try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}break;case vr.CHATROOM_CHECKED:delete U.channels_orig[N][R][T.content.id].is_new,U.noti.ClearNoti(U.channels_orig[N][R][T.content.id].cnoti_id),U.rearrange_channels();{let pt=Object.keys(U.channels_orig[N][R]),Kt=!1;for(let Fe of pt)if(U.channels_orig[N][R][Fe].is_new){Kt=!0;break}Kt||(U.has_new_channel_msg=!1)}try{yield U.servers[N][R].client.deleteNotifications(U.servers[N][R].session,[T.id]),U.update_notifications(N,R)}catch{}break;default:console.log("\ud655\uc778\ub418\uc9c0 \uc54a\uc740 \uc2e4\uc2dc\uac04 \uc54c\ub9bc_nakama_noti: ",T),T.request=`${T.code}-${T.subject}`}ie||(U.noti_origin[N][R][T.id]=T)})()}LoginAgain(T,N,R){this.alertCtrl.create({header:this.servers[N][R].info.name,message:this.lang.text.Nakama.LoginAgain,buttons:[{text:this.lang.text.Profile.login_toggle,handler:()=>{try{delete this.noti_origin[N][R][T.id]}catch{}this.rearrange_notifications(),this.link_group(N,R,!0)}}]}).then(U=>U.present())}WriteStorage_From_channel(T,N,R,U,ie=0,$){var de=this;return(0,F.A)(function*(){let Ae=JSON.parse(JSON.stringify(T)),tt=yield yield de.indexed.GetFileInfoFromDB(N),pt=Math.ceil(tt.contents.size/sn.xM);const Kt=$||`ForceSQL_write_${Date.now()}`;if(de.p5loading.update({id:Kt,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Ae.content.filename}`}),de.OnTransfer[R][U][T.channel_id]||(de.OnTransfer[R][U][T.channel_id]={}),de.OnTransfer[R][U][T.channel_id][T.message_id]||(de.OnTransfer[R][U][T.channel_id][T.message_id]={index:pt}),!de.OnTransfer[R][U][T.channel_id][T.message_id].OnTransfer){T.content.transfer_index||(T.content.transfer_index=de.OnTransfer[R][U][T.channel_id][T.message_id]);for(let Fe=ie;Fe<pt;Fe++)try{de.p5loading.update({id:Kt,message:`${de.lang.text.ChatRoom.forceSQL}: ${de.lang.text.ChatRoom.SendFile}: ${Ae.content.filename}`,progress:Fe/pt});const We=yield de.global.req_file_part_base64(tt,Fe,N);yield de.servers[R][U].client.writeStorageObjects(de.servers[R][U].session,[{collection:`file_${Ae.channel_id.replace(/[.]/g,"_")}`,key:`msg_${Ae.message_id}_${Fe}`,permission_read:2,permission_write:1,value:{data:We}}]),de.OnTransfer[R][U][T.channel_id][T.message_id].index=pt-1-Fe,de.OnTransfer[R][U][T.channel_id][T.message_id].OnTransfer="upload"}catch(We){console.log("WriteStorage_From_channel: ",We),de.noti.PushLocal({id:7,title:de.lang.text.Nakama.FailedUpload,body:`${Ae.content.filename}: ${(We.statusText?`${We.statusText}(${We.status})`:We.status)||We}`,smallIcon_ln:"diychat"},de.noti.Current),de.p5toast.show({text:`${de.lang.text.Nakama.FailedUpload}: ${(We.statusText?`${We.statusText}(${We.status})`:We.status)||We}`});break}setTimeout(()=>{de.p5loading.remove(Kt),delete de.OnTransfer[R][U][T.channel_id][T.message_id],de.global.remove_req_file_info(T,N),de.noti.PushLocal({id:7,title:de.lang.text.ChatRoom.SendFile,body:Ae.content.filename,smallIcon_ln:"diychat"},de.noti.Current)},100)}})()}ReadStorage_From_channel(T,N,R,U,ie=0){var $=this;return(0,F.A)(function*(){let de=JSON.parse(JSON.stringify(T));const Ae=`ForceSQL_read_${Date.now()}`;if($.p5loading.update({id:Ae,message:`${$.lang.text.ChatRoom.forceSQL}: ${$.lang.text.ChatRoom.SavingFile}: ${de.content.filename}`}),$.OnTransfer[R][U][T.channel_id]||($.OnTransfer[R][U][T.channel_id]={}),$.OnTransfer[R][U][T.channel_id][T.message_id]||($.OnTransfer[R][U][T.channel_id][T.message_id]={index:de.content.partsize}),$.OnTransfer[R][U][T.channel_id][T.message_id].OnTransfer)return;T.content.transfer_index||(T.content.transfer_index=$.OnTransfer[R][U][T.channel_id][T.message_id]);let tt=!0;for(let pt=ie,Kt=de.content.partsize;pt<Kt;pt++)try{$.p5loading.update({id:Ae,progress:pt/Kt});let Fe=yield $.servers[R][U].client.readStorageObjects($.servers[R][U].session,{object_ids:[{collection:`file_${de.channel_id.replace(/[.]/g,"_")}`,key:`msg_${de.message_id}_${pt}`,user_id:de.sender_id}]});$.global.save_file_part(N,pt,Fe.objects[0].value.data),$.OnTransfer[R][U][T.channel_id][T.message_id].index=Kt-1-pt,$.OnTransfer[R][U][T.channel_id][T.message_id].OnTransfer="download"}catch(Fe){console.log("ReadStorage_From_channel: ",Fe),tt=!1,$.p5loading.update({id:Ae,message:`${de.content.filename} ${$.lang.text.Nakama.FailedDownload}: ${(Fe.statusText?`${Fe.statusText}(${Fe.status})`:Fe.status)||Fe}`,progress:0});break}if(tt){if(T.content.url)T.content.thumbnail=T.content.url;else{T.content.text=[$.lang.text.ChatRoom.SavingFile],delete T.content.transfer_index,delete $.OnTransfer[R][U][de.channel_id][de.message_id].index;let Kt=[],Fe=0;yield new Promise(function(){var We=(0,F.A)(function*(at){for(let Ze=0,xt=de.content.partsize;Ze<xt;Ze++)try{let Zt=yield $.indexed.GetFileInfoFromDB(`${N}_part/${Ze}.part`);Fe+=Zt.contents.length,Kt[Ze]=Zt}catch(Zt){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",Zt);break}try{let Ze=new Int8Array(Fe),xt=0;for(let Zt=0,En=Kt.length;Zt<En;Zt++)Ze.set(Kt[Zt].contents,xt),xt+=Kt[Zt].contents.length;yield $.indexed.saveInt8ArrayToUserPath(Ze,N);for(let Zt=0,En=de.content.partsize;Zt<En;Zt++)$.indexed.removeFileFromUserPath(`${N}_part/${Zt}.part`);yield $.indexed.removeFileFromUserPath(`${N}_part`),$.global.remove_req_file_info(de,N),T.content.text=[$.lang.text.ChatRoom.FileSaved]}catch(Ze){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",Ze)}at(void 0)});return function(at){return We.apply(this,arguments)}}()),$.noti.ClearNoti(8)}let pt;if(de.content.path=N,"godot"!=de.content.viewer){let Kt=yield $.indexed.loadBlobFromUserPath(N,T.content.type||"");pt=URL.createObjectURL(Kt)}yield $.global.modulate_thumbnail(($.OnTransferMessage[de.message_id]||T).content,pt),delete $.OnTransfer[R][U][de.channel_id][de.message_id],delete $.OnTransferMessage[de.message_id]}return $.p5loading.remove(Ae),tt})()}sync_save_file(T,N,R,U,ie=""){var $=this;return(0,F.A)(function*(){try{var de;if("online"!=$.statusBar.groupServer[N][R])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";null!==(de=T.blob)&&void 0!==de&&de.size&&(yield $.indexed.saveBlobToUserPath(T.blob,T.path));let Ae=yield $.indexed.GetFileInfoFromDB(T.path);T.partsize=Math.ceil((T.size||Ae.contents.size)/sn.xM),delete T.blob,yield $.servers[N][R].client.writeStorageObjects($.servers[N][R].session,[{collection:U,key:ie||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),permission_read:2,permission_write:1,value:T}]);for(let tt=0;tt<T.partsize;tt++){const pt=yield $.global.req_file_part_base64(Ae,tt,T.path);yield $.servers[N][R].client.writeStorageObjects($.servers[N][R].session,[{collection:U,key:ie?`${ie}_${tt}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${tt}`,permission_read:2,permission_write:1,value:{data:pt}}])}$.indexed.removeFileFromUserPath(`${T.path}.history`),$.noti.PushLocal({id:7,title:$.lang.text.ChatRoom.SendFile,body:T.filename,smallIcon_ln:"diychat"},$.noti.Current)}catch(Ae){throw console.log("SyncSaveFailed: ",Ae),$.noti.PushLocal({id:7,title:$.lang.text.Nakama.FailedUpload,body:`${T.filename}: ${(Ae.statusText?`${Ae.statusText}(${Ae.status})`:Ae.status)||Ae}`,smallIcon_ln:"diychat"},$.noti.Current),Ae}})()}sync_load_file(T,N,R,U,ie="",$="",de=!0){var Ae=this;return(0,F.A)(function*(){try{if("online"!=Ae.statusBar.groupServer[N][R])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let pt=(yield Ae.servers[N][R].client.readStorageObjects(Ae.servers[N][R].session,{object_ids:[{collection:U,key:$||T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||Ae.servers[N][R].session.user_id}]})).objects[0].value,Kt=!0;for(let Fe=0;Fe<pt.partsize;Fe++)try{let We=yield Ae.servers[N][R].client.readStorageObjects(Ae.servers[N][R].session,{object_ids:[{collection:U,key:$?`${$}_${Fe}`:T.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)+`_${Fe}`,user_id:ie||Ae.servers[N][R].session.user_id}]});Ae.global.save_file_part(T.alt_path||T.path,Fe,We.objects[0].value.data)}catch(We){console.log("sync_load_file failed: ",We),Kt=!1,de&&Ae.p5toast.show({text:`${T.filename||T.name} ${Ae.lang.text.Nakama.FailedDownload}: ${(We.statusText?`${We.statusText}(${We.status})`:We.status)||We}`,lateable:!0}),T.url&&(T.thumbnail=T.url);break}if(Kt){delete T.url,T.text=[Ae.lang.text.ChatRoom.SavingFile];let Fe=[],We=0;yield new Promise(function(){var at=(0,F.A)(function*(Ze,xt){let Zt=!1;for(let En=0,zn=pt.partsize;En<zn;En++)try{let or=yield Ae.indexed.GetFileInfoFromDB(`${T.alt_path||T.path}_part/${En}.part`);We+=or.contents.length,Fe[En]=or}catch(or){console.log("\ud30c\uc77c \ubcd1\ud569\ud558\uae30 \uc624\ub958: ",or),Zt=!0;break}try{if(Zt)throw"\ud30c\uc77c \ubcd1\ud569 \uc2e4\ud328";let En=new Int8Array(We),zn=0;for(let or=0,ii=Fe.length;or<ii;or++)En.set(Fe[or].contents,zn),zn+=Fe[or].contents.length;yield Ae.indexed.saveInt8ArrayToUserPath(En,T.alt_path||T.path);for(let or=0,ii=pt.partsize;or<ii;or++)Ae.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part/${or}.part`);yield Ae.indexed.removeFileFromUserPath(`${T.alt_path||T.path}_part`)}catch(En){console.log("\ud30c\uc77c \ucd5c\uc885 \uc800\uc7a5\ud558\uae30 \uc624\ub958: ",En),xt()}Ze(void 0)});return function(Ze,xt){return at.apply(this,arguments)}}()),Ae.noti.ClearNoti(8),Ae.indexed.removeFileFromUserPath(`${T.alt_path||T.path}.history`)}return{from:"remote",value:yield Ae.indexed.loadBlobFromUserPath(T.alt_path||T.path,pt.type||"")}}catch{try{return{from:"local",value:yield Ae.indexed.loadBlobFromUserPath(T.alt_path||T.path,T.type||"")}}catch(pt){return{from:"failed",value:null,error:pt}}}})()}sync_remove_file(T,N,R,U,ie="",$=""){var de=this;return(0,F.A)(function*(){try{yield de.indexed.removeFileFromUserPath(T)}catch{}try{if("online"!=de.statusBar.groupServer[N][R])throw"\uc11c\ubc84 \uc5f0\uacb0\uc911 \uc544\ub2d8";let tt=(yield de.servers[N][R].client.readStorageObjects(de.servers[N][R].session,{object_ids:[{collection:U,key:T.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120),user_id:ie||de.servers[N][R].session.user_id}]})).objects[0].value;try{yield de.servers[N][R].client.rpc(de.servers[N][R].session,"remove_channel_file",{collection:U,key:($||tt.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120))+"_"})}catch(pt){console.log("SQL \uac15\uc81c \ud30c\uc77c \uc0ad\uc81c \uc624\ub958: ",pt)}yield de.servers[N][R].client.deleteStorageObjects(de.servers[N][R].session,{object_ids:[{collection:U,key:$||tt.path.replace(/:|\?|\/|\\|<|>|\.| |\(|\)|\-/g,"_").substring(0,120)}]})}catch{}})()}open_url_link(T,N,R=!0){var U=this;return(0,F.A)(function*(){T&&(T.target.style.color="var(--ion-color-primary)");const ie=yield U.global.GetHeaderAddress();if(N)if(0==N.indexOf("https://is2you2.github.io/pjcone_pwa/?")||0==N.indexOf(`${ie}?`)||0==N.indexOf(`${U.global.CustomLocalAddress}?`)){const $=U.global.CatchGETs(N)||{};try{return yield U.AddressToQRCodeAct($),!0}catch(de){console.log("open_url_link: ",de),U.p5toast.show({text:`${U.lang.text.AddGroup.DiffFormat}: ${(de.statusText?`${de.statusText}(${de.status})`:de.status)||de}`})}}else R&&U.global.open_link(N);return!1})()}AddressToQRCodeAct(T,N=!1){var R=this;return(0,F.A)(function*(){let U=[];if(T.open_profile&&U.push({type:"open_profile"}),T.server)for(let ie=0,$=T.server.length;ie<$;ie++){let de=T.server[ie].split(","),tt=(de[0]||location.origin).split("://"),pt="https"==tt.shift(),Kt=tt.shift().split(":"),Fe=Kt[0],We=Number(de[0]?Kt[1]:"");U.push({type:"server",value:{address:Fe||location.host.split(":").shift(),useSSL:pt||!1,nakama_port:We||7350,cdn_port:de[2],apache_port:de[3],square_port:de[4],webrtc_port:de[5],webpush_port:de[6],libretranslate_port:de[7],key:de[1]||"",isOfficial:"unofficial"}})}if(T.group)for(let ie=0,$=T.group.length;ie<$;ie++){let de=T.group[ie].split(",");U.push({type:"group",name:de[0],id:de[1]})}if(T.todo&&U.push({type:"todo",value:T.todo[0],address:T.address[0]}),T.group_dedi){let ie=T.group_dedi[0].split(",");U.push({type:"group_dedi",value:{address:ie[0],channel:ie[1]}})}if(T.open_prv_channel){let ie=T.open_prv_channel[0].split(",");U.push({type:"open_prv_channel",user_id:ie[0]})}if(T.postViewer&&U.push({type:"postViewer",address:T.postViewer[0]}),T.localPostViewer){let ie=T.localPostViewer[0].split(",");U.push({type:"localPostViewer",isOfficial:ie[0],target:ie[1],id:ie[2],creator_id:ie[3]})}if(T.fileviewer){let ie=T.fileviewer[0].split(",");const $=ie.pop(),de=ie.join(",");U.push({type:"fileviewer",url:de,viewer:$})}if(T.voiddraw&&U.push({type:"voiddraw"}),T.token){let ie=T.token[0].split(",");U.push({type:"token",address:ie[0],square_port:Number(ie[1]||12013),socketId:ie[2]})}if(N)return U;yield R.act_from_QRInfo(U)})()}GenerateQRCode(T,N=this.global.CustomLocalAddress){let U,R=N.split("://");try{U=`${R.shift()}://${R.shift().split("/").shift()}`}catch{}const ie=`${T.useSSL?"https":"http"}://${T.address||location.host.split(":").shift()}`;return`${N}?server=${U==ie?"":ie}${T.nakama_port?`:${T.nakama_port}`:""},${T.key||""},${T.cdn_port||""},${T.apache_port||""},${T.square_port||""},${T.webrtc_port||""},${T.webpush_port||""},${T.libretranslate_port||""}`.replace(/ /g,"%20")}act_from_QRInfo(T,N=""){var R=this;return(0,F.A)(function*(){for(;!R.NakamaInitEnd;)yield new Promise(de=>setTimeout(de,0));for(let de=0,Ae=20;de<Ae&&!R.lang.text.WebRTCDevManager.SecurityError;de++)yield new Promise(tt=>setTimeout(tt,1e3));for(let de=0,Ae=T.length;de<Ae;de++)switch(T[de].type){case"open_profile":R.open_profile_page();break;case"server":if(R.CheckIfHasServer(`${T[de].value.useSSL?"https":"http"}://${T[de].value.address}:${T[de].value.port||7350}`))R.users.self.online||R.open_profile_page();else{const We={address:T[de].value.address,nakama_port:T[de].value.port,useSSL:T[de].value.useSSL,isOfficial:T[de].value.isOfficial,target:T[de].value.target||T[de].value.address,name:T[de].value.name||T[de].value.address};yield R.add_group_server(We),1==R.get_all_server_info(!0).length&&R.AutoTogPushNotiAfterFirstServerAdded(We.isOfficial,We.target)}break;case"todo":try{const We=JSON.parse(T[de].value),at=R.CheckIfHasServer(T[de].address);We.remote.isOfficial=at.isOfficial,We.remote.target=at.target,We.remote.name=at.name,R.open_add_todo_page(JSON.stringify(We))}catch{R.open_add_todo_page(T[de].value)}break;case"group_dedi":let Kt;if(yield R.global.RemoveAllModals(),yield R.global.AnonymousUserCreateName(),T[de].value.address)Kt=T[de].value.address;else if(R.global.CustomLocalAddress.indexOf("https://is2you2.github.io/")>=0){const at="https:"==location.protocol?"wss:":"ws:",Ze=location.host.split(":")[0];Kt=`${at}//${Ze}:12013`,T[de].value.address=`${at}//${Ze}`}else{let We=R.global.CustomLocalAddress.split("://");const at=We.pop().split("/")[0],xt="https"==(We.pop()||(R.global.checkProtocolFromAddress(at)?"https":"http"))?"wss:":"ws:",Zt=at.split(":")[0];Kt=`${xt}//${Zt}:12013`,T[de].value.address=`${xt}//${Zt}`}R.navCtrl.navigateForward("minimal-chat",{animation:Tn.V5,state:{address:Kt,channel:T[de].value.channel,quick:!0}});break;case"group":if(R.AfterLoginActDone)yield R.try_add_group(T[de]);else if(R.AfterLoginAct.push((0,F.A)(function*(){yield R.try_add_group(T[de])})),R.users.self.online){let We="";for(let Ze=0,xt=T.length;Ze<xt;Ze++){var U;if("server"==(null===(U=T[Ze])||void 0===U?void 0:U.type)){We=`${T[Ze].value.useSSL?"https":"http"}://${T[Ze].value.address}`;break}}let at=R.CheckIfHasServer(We);R.init_session(at)}else R.p5toast.show({text:R.lang.text.Nakama.NeedLogin}),R.open_profile_page();break;case"open_prv_channel":{let We="";for(let at=0,Ze=T.length;at<Ze;at++){var ie;if("server"==(null===(ie=T[at])||void 0===ie?void 0:ie.type)){We=`${T[at].value.useSSL?"https":"http"}://${T[at].value.address}`;break}}if(We){let at=R.CheckIfHasServer(We);if(at)if(R.AfterLoginActDone){let Ze=yield R.join_chat_with_modulation(T[de].user_id,2,at.isOfficial,at.target,!0);R.go_to_chatroom(Ze)}else R.AfterLoginAct.push((0,F.A)(function*(){yield R.navCtrl.pop();let Ze=yield R.join_chat_with_modulation(T[de].user_id,2,at.isOfficial,at.target,!0);R.go_to_chatroom(Ze)})),R.users.self.online?R.init_session(at):(R.p5toast.show({text:R.lang.text.Nakama.NeedLogin}),R.open_profile_page());else R.p5toast.show({text:R.lang.text.Nakama.NoLoginServer})}else{var $;const at=T[de].user_id;null!==($=R.channels_orig.local.target)&&void 0!==$&&$[at]&&R.go_to_chatroom(R.channels_orig.local.target[at])}}break;case"postViewer":let Fe=yield fetch(T[de].address);if(Fe.ok){let We=yield Fe.text(),at=JSON.parse(We);at.quick=!0,R.open_post(at,-2,N)}else R.p5toast.show({text:`${R.lang.text.AddPost.NoPostOutLink}: ${Fe.statusText}`});break;case"localPostViewer":try{const We=`servers/${T[de].isOfficial}/${T[de].target}/posts/${T[de].creator_id}/${T[de].id}/info.json`,at=yield R.indexed.loadTextFromUserPath(We),Ze=JSON.parse(at);Ze.server={local:"me"==T[de].creator_id},R.open_post(Ze,-2,"portal/community/")}catch(We){R.p5toast.show({text:`${R.lang.text.AddPost.NoPostOutLink}: ${We}`})}break;case"voiddraw":R.global.PageDismissAct["voiddraw-local"]=()=>{delete R.global.PageDismissAct["voiddraw-local"]},setTimeout(()=>{R.global.loadAdSense().then(()=>{R.global.pushAdOnce()})},0),R.global.ActLikeModal(N+"void-draw",{quick:!0,saveClipboard:!0,dismiss:"voiddraw-local"});break;case"token":{let We;const at=T[de].square_port||12013;if(T[de].address)We=`${T[de].address.indexOf("ws://")<0&&T[de].address.indexOf("wss://")<0?`${R.global.checkProtocolFromAddress(T[de].address)?"wss://":"ws://"}${T[de].address}`:T[de].address}:${at}`;else if(R.global.CustomLocalAddress.indexOf("https://is2you2.github.io/")>=0){const En="https:"==location.protocol?"wss:":"ws:",zn=location.host.split(":")[0];We=`${En}//${zn}:${at}`,T[de].address=`${En}//${zn}`}else{let Zt=R.global.CustomLocalAddress.split("://");const En=Zt.pop().split("/")[0],or="https"==(Zt.pop()||(R.global.checkProtocolFromAddress(En)?"https":"http"))?"wss:":"ws:",ii=En.split(":")[0];We=`${or}//${ii}:${at}`,T[de].address=`${or}//${ii}`}const Ze=T[de].socketId;let xt=new WebSocket(We);xt.onopen=()=>{xt.send(JSON.stringify({type:"reqInfo",socketId:Ze}))},xt.onmessage=Zt=>{let En;En="string"==typeof Zt.data?Zt.data:Zt.data.text();try{const zn=JSON.parse(En);if("req_info"===zn.type)switch(zn.act){case"voiddraw":R.global.PageDismissAct["voiddraw-remote"]=()=>{delete R.global.PageDismissAct["voiddraw-remote"]},R.global.ActLikeModal(N+"void-draw",{remote:{address:T[de].address,channel:zn.channel_id,port:zn.port||3478,username:zn.username,password:zn.credential},quick:!0,saveClipboard:!0,dismiss:"voiddraw-remote"});break;case"instc":R.global.RemoveAllModals((0,F.A)(function*(){yield R.global.AnonymousUserCreateName(),R.navCtrl.navigateForward(N+"instant-call",{animation:Tn.NC,state:{address:T[de].address,channel:zn.channel_id,port:zn.port,username:zn.username,password:zn.password,square_port:at,useVideo:zn.useVideo,useCCTV:zn.useCCTV,users:zn.users||[],quick:!0}})}));break;case"arcade":T[de].cdn_port=zn.cdn_port||9001,T[de].apache_port=zn.apache_port||9002,R.global.JoinArcadeWithSocketInfo(T[de]);break;case"quick_prv":R.act_from_QRInfo([{type:"server",value:zn.server_value},{type:"open_prv_channel",user_id:zn.user_id,address:zn.address}]);break;case"quick_post":R.act_from_QRInfo([{type:"postViewer",address:zn.address}]);break;case"quick_group":R.act_from_QRInfo([{type:"server",value:zn.server_value},{type:"group",id:zn.id,name:zn.name}]);break;case"quick_fileviewer":R.act_from_QRInfo([{type:"fileviewer",url:zn.url.replace(/ /g,"%20"),viewer:zn.viewer}])}}catch(zn){console.log("\ube60\ub978 \uc9c4\uc785 \uc18c\ucf13 \ud589\ub3d9 \uc624\ub958: ",zn),xt.close(1e3,zn)}xt.close(1e3,"done")},xt.onerror=Zt=>{xt.close(1e3,"onerror")},xt.onclose=Zt=>{switch(console.log("\uc18c\ucf13 \ud589\ub3d9 \uc885\ub8cc: ",Zt),Zt.reason){case"max_limit":R.p5toast.show({text:R.lang.text.MinimalChat.block});break;case"expired":R.p5toast.show({text:R.lang.text.InstantCall.ExpiredChannel});break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud1a0\ud070 \uc885\ub8cc \ud589\ub3d9: ",Zt.reason)}xt.onopen=null,xt.onmessage=null,xt.onclose=null,xt.onerror=null,xt=null}}break;case"fileviewer":R.global.PageDismissAct["quick-fileviewer"]=We=>{delete R.global.PageDismissAct["quick-fileviewer"]},R.global.ActLikeModal(N+"ionic-viewer",{info:{content:{filename:T[de].url.split("/").pop(),file_ext:T[de].url.split(".").pop(),url:T[de].url,viewer:T[de].viewer}},relevance:[{content:{filename:T[de].url.split("/").pop(),file_ext:T[de].url.split(".").pop(),url:T[de].url,viewer:T[de].viewer}}],noEdit:!0,noTextEdit:!0,quick:!0,dismiss:"quick-fileviewer"});break;default:throw"\uc9c0\uc815\ub41c \ud2c0 \uc544\ub2d8"}})()}TempQRCodeGenerateWS(T,N){var R,U,ie=this;return null===(R=this.TempWS)||void 0===R||null===(U=R.close)||void 0===U||U.call(R,1e3,"\uc784\uc2dc QR \uc0dd\uc131 \uc9c1\uc804 \ucd08\uae30\ud654"),new Promise(function(){var $=(0,F.A)(function*(de,Ae){yield new Promise(Fe=>setTimeout(Fe,100));const tt=ie.GetNodejsServerAddress(T.isOfficial,T.target,"square_port");let pt,Kt;ie.TempWS=new WebSocket(tt),ie.TempWS.onopen=()=>{ie.TempWS.send(JSON.stringify({type:"initInfo",act:N.act}))},ie.TempWS.onmessage=Fe=>{const We=JSON.parse(Fe.data);switch(We.type){case"init_id":pt=We.socketId,Kt=We.id,ie.TempWS.send(JSON.stringify({type:"update_reqInfo",socketId:We.socketId,...N}));break;case"update_reqInfo":ie.TempWS.send(JSON.stringify({type:"join",channel:Kt})),de(`${ie.global.CustomLocalAddress}?token=${ie.global.CheckIfCanBlankSocketAddress(`${T.useSSL?"wss":"ws"}://${T.address}`)},${12013==T.square_port?"":T.square_port||""},${pt}`)}},ie.TempWS.onerror=Fe=>{Ae(Fe)},ie.TempWS.onclose=Fe=>{console.log("TempQRCodeGenerateWS \uc18c\ucf13 \ub2eb\ud798 \ucd94\uc801: ",`${Fe.reason} (${Fe.code})`),ie.TempWS.onopen=null,ie.TempWS.onmessage=null,ie.TempWS.onerror=null,ie.TempWS.onclose=null,Ae(`${Fe.reason} (${Fe.code})`)}});return function(de,Ae){return $.apply(this,arguments)}}())}CheckIfHasServer(T){let N=!1;try{let R=T.split("://"),U="https"==R.shift(),ie=R.shift().split(":"),$=ie[0],de=Number(ie[1])||7350,Ae=this.get_all_server_info(!0);for(let tt of Ae)if(tt.address==$&&tt.useSSL==U&&(tt.nakama_port||7350)==de){N=tt;break}}catch{}return N}load_local_post_with_id(T,N,R,U){var ie=this;return(0,F.A)(function*(){let $=yield ie.indexed.loadTextFromUserPath(`servers/${N}/${R}/posts/${U}/${T}/info.json`);try{try{if(ie.posts_orig[N][R][U][T])throw"exist"}catch(Ae){if("exist"==Ae)throw"\uc774\ubbf8 \uc788\ub294 \uac8c\uc2dc\ubb3c"}let de=JSON.parse($);try{de.server={name:ie.servers[N][R].info.name,isOfficial:N,target:R}}catch{de.server={name:ie.lang.text.AddGroup.UseLocalStorage,isOfficial:"local",target:"target",local:!0}}if(de.mainImage)try{if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let Ae=yield ie.indexed.loadBlobFromUserPath(de.mainImage.path,de.mainImage.type);de.mainImage.blob=Ae;const tt=URL.createObjectURL(Ae);de.mainImage.thumbnail=tt,setTimeout(()=>{URL.revokeObjectURL(tt)},5e3)}}catch{}return ie.posts_orig[N][R][U][T]=de,!0}catch{return!1}})()}GetOverrideName(T,N,R){let U;try{U=this.usernameOverride[N][R][T]}catch{}return U}SaveOverrideName(T,N,R,U){var ie=this;return(0,F.A)(function*(){N?ie.usernameOverride[R][U][T]=N:delete ie.usernameOverride[R][U][T];let $=JSON.stringify(ie.usernameOverride[R][U]),Ae={blob:new Blob([$],{type:"application/json"}),path:`servers/${R}/${U}/users/override_name.json`};yield ie.sync_save_file(Ae,R,U,"usernameOverride","override");try{yield ie.servers[R][U].client.rpc(ie.servers[R][U].session,"send_noti_fn",{receiver_id:[ie.servers[R][U].session.user_id],title:"name_overrided",content:{},code:vr.NAME_OVERRIDED,persistent:!1})}catch{}})()}LoadOverrideName(T,N){var R=this;return(0,F.A)(function*(){let U={path:`servers/${T}/${N}/users/override_name.json`},ie=yield R.sync_load_file(U,T,N,"usernameOverride",void 0,"override",!1);if(ie.value){let $=yield ie.value.text(),de=JSON.parse($),Ae=Object.keys(de);R.usernameOverride[T][N]={};for(let tt of Ae)R.usernameOverride[T][N][tt]=de[tt]}})()}LoadOverridesOffline(){var T=this;return(0,F.A)(function*(){let N=yield T.indexed.GetFileListFromDB("override_name.json");for(let R of N)try{let U=R.split("/");T.usernameOverride[U[1]]||(T.usernameOverride[U[1]]={}),T.usernameOverride[U[1]][U[2]]||(T.usernameOverride[U[1]][U[2]]={});let $=yield(yield T.indexed.loadBlobFromUserPath(R,"")).text(),de=JSON.parse($);T.usernameOverride[U[1]][U[2]]=de}catch{}})()}load_server_post_with_id(T,N,R,U,ie){var $=this;return(0,F.A)(function*(){let de;try{let tt={path:`servers/${N}/${R}/posts/${U}/${T}/info.json`,type:"application/json"};const pt=yield $.sync_load_file(tt,N,R,"server_post",U,T,!1);if(pt.error)return!1;const Kt=yield pt.value.text();de=JSON.parse(Kt),de.is_me=de.is_me||ie;const Fe=new Blob([JSON.stringify(de)],{type:"application/json"});if(de.OutSource&&!de.is_me)throw"\ub2e4\ub978 \uc0ac\ub78c\uc758 \uc678\ubd80 \uac8c\uc2dc\ubb3c \uc815\ubcf4 \ubb34\uc2dc";$.indexed.saveBlobToUserPath(Fe,tt.path),de.server={isOfficial:N,target:R};try{de.server.name=$.servers[N][R].info.name}catch{de.server.name=$.lang.text.Nakama.DeletedServer}if(de.mainImage)if(de.mainImage.url)de.mainImage.thumbnail=de.mainImage.url;else{let We={path:de.mainImage.path,alt_path:`servers/${N}/${R}/posts/${U}/${T}/MainImage.png`,type:"image/png"};const at=yield $.sync_load_file(We,N,R,"server_post",U,`${T}_mainImage`,!1);de.mainImage.blob=at.value;const Ze=URL.createObjectURL(at.value);de.mainImage.thumbnail=Ze,setTimeout(()=>{URL.revokeObjectURL(Ze)},5e3)}try{de.creator_name=$.load_other_user(U,N,R).display_name||de.creator_name}catch{}if($.posts_orig[N]||($.posts_orig[N]={}),$.posts_orig[N][R]||($.posts_orig[N][R]={}),$.posts_orig[N][R][U]||($.posts_orig[N][R][U]={}),("deleted"!=N||de.is_me)&&($.posts_orig[N][R][U][T]=de),"local"==pt.from)try{if(!(yield $.servers[N][R].client.readStorageObjects($.servers[N][R].session,{object_ids:[{collection:"server_post",key:T,user_id:U}]})).objects.length)throw"Not RemoteExist"}catch(We){if("Not RemoteExist"==We)throw"RemoveSelf"}return de}catch(tt){var Ae;return"RemoveSelf"==tt?$.RemovePost($.posts_orig[N][R][U][T],!0):de&&null!==(Ae=de)&&void 0!==Ae&&Ae.creator_id&&((yield $.indexed.GetFileListFromDB(`servers/${N}/${R}/posts/${de.creator_id}/${de.id}`)).forEach(Kt=>$.indexed.removeFileFromUserPath(Kt)),delete $.posts_orig[N][R][U][T],$.rearrange_posts()),!1}})()}deserialize_text(T){let N="";if(!T.content.msg)return N;for(let R=0,U=T.content.msg.length;R<U;R++){for(let ie=0,$=T.content.msg[R].length;ie<$;ie++)N+=T.content.msg[R][ie].text;R+1<U&&(N+="\n")}return N}load_posts_counter(T){var N=this;return(0,F.A)(function*(){let R={};try{let $=yield N.indexed.loadTextFromUserPath("servers/post_counter.json"),de=JSON.parse($);R=$,N.post_counter=de}catch{}let U=Number(yield N.indexed.loadTextFromUserPath("servers/local/target/posts/me/counter.txt"))||0;N.post_counter.local.target.me=U;let ie=T||N.get_all_server_info(!0,!0);for(let $=0,de=ie.length;$<de;$++){let Ae=ie[$].isOfficial,tt=ie[$].target;(!N.post_counter[Ae][tt]||T)&&(N.post_counter[Ae][tt]={});try{let pt=yield N.servers[Ae][tt].client.readStorageObjects(N.servers[Ae][tt].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:N.servers[Ae][tt].session.user_id}]}),Kt=0;pt.objects.length&&(Kt=pt.objects[0].value.counter),N.post_counter[Ae][tt][N.servers[Ae][tt].session.user_id]=Kt}catch(pt){console.log("\ub0b4 \uc11c\ubc84 \uac8c\uc2dc\ubb3c \uce74\uc6b4\ud130 \ubd88\ub7ec\uc624\uae30 \uc624\ub958: ",pt)}if(N.users[Ae][tt]){let pt=Object.keys(N.users[Ae][tt]);for(let Kt=0,Fe=pt.length;Kt<Fe;Kt++)try{let We=yield N.servers[Ae][tt].client.readStorageObjects(N.servers[Ae][tt].session,{object_ids:[{collection:"server_post",key:"Counter",user_id:pt[Kt]}]}),at=0;We.objects.length&&(at=We.objects[0].value.counter),N.post_counter[Ae][tt][pt[Kt]]=at;try{if(!N.posts_orig[Ae][tt])throw"\uc544\uc9c1 \uc900\ube44\ub418\uc9c0 \uc54a\uc74c";let Ze=Object.keys(N.posts_orig[Ae][tt][pt[Kt]]);for(let xt of Ze){let En=(yield N.servers[Ae][tt].client.readStorageObjects(N.servers[Ae][tt].session,{object_ids:[{collection:"server_post",key:xt,user_id:pt[Kt]}]})).objects[0].value,zn=yield N.sync_load_file(En,Ae,tt,"server_post",pt[Kt],xt,!1);if("remote"!==zn.from)throw xt;{let ii=yield zn.value.text();JSON.parse(ii).OutSource&&delete N.posts_orig[Ae][tt][pt[Kt]][xt]}}}catch(Ze){try{delete N.posts_orig[Ae][tt][pt[Kt]][Ze]}catch{}}}catch{delete N.post_counter[Ae][tt][pt[Kt]]}N.rearrange_posts()}R!=JSON.stringify(N.post_counter)&&(yield N.save_post_counter(),N.has_new_post=!0)}})()}save_post_counter(){var T=this;return(0,F.A)(function*(){yield T.indexed.saveTextFileToUserPath(JSON.stringify(T.post_counter),"servers/post_counter.json")})()}send_webpush(T,N,R){return(0,F.A)(function*(){try{N.users=R;const U=yield fetch(`${T}/send_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!U.ok)throw`${U.statusText} (${U.status})`}catch(U){console.log("onerror_send_webpush: ",U)}})()}schedule_webpush(T,N,R){return(0,F.A)(function*(){try{N.users=R;const U=yield fetch(`${T}/schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!U.ok)throw`${U.statusText} (${U.status})`}catch(U){console.log("onerror_schedule_webpush: ",U)}})()}remove_schedule_webpush(T,N,R){return(0,F.A)(function*(){try{N.users=R;const U=yield fetch(`${T}/remove_schedule_noti`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!U.ok)throw`${U.statusText} (${U.status})`}catch(U){console.log("onerror_remove_schedule_webpush: ",U)}})()}GetNodejsServerAddress(T,N,R){if(!T||!N)throw"\uacf5\ubc31 \uc11c\ubc84 \uc815\ubcf4";const U=this.servers[T][N].info.useSSL?"https":"http",ie=this.servers[T][N].info.address;let $;switch(R){case"cdn_port":$=9001;break;case"apache_port":$=9002;break;case"square_port":$=12013;break;case"webrtc_port":$=3478;break;case"webpush_port":$=5e3;break;case"nakama_port":$=7350}return`${U}://${ie}:${this.servers[T][N].info[R]||$}`}GetPushPubKey(T,N){var R=this;return(0,F.A)(function*(){const de=`${R.servers[T][N].info.useSSL?"https":"http"}://${R.servers[T][N].info.address}:${R.servers[T][N].info.webpush_port||5e3}`;try{if(R.servers[T][N].info.webpush_tog){const Ae=yield fetch(`${de}/get_webpush_key`,{method:"POST"});let tt;if(!Ae.ok)throw`${Ae.statusText} (${Ae.status})`;tt=(yield Ae.json()).pubkey;const pt=yield R.global.subscribeToPush(tt),Kt={uuid:R.servers[R.servers[T][N].info.isOfficial][R.servers[T][N].info.target].session.user_id,subscription:pt},Fe=yield fetch(`${de}/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(!Fe.ok)throw`${Fe.statusText} (${Fe.status})`}else yield R.global.unsubscribeFromPush(de)}catch(Ae){console.log("error_GetPushPubKey: ",Ae),R.p5toast.show({text:`${R.lang.text.GroupServer.WebpushPubkey}: ${Ae}`}),R.servers[T][N].info.webpush_tog=!R.servers[T][N].info.webpush_tog}yield R.modify_group_server(R.servers[T][N].info)})()}RemoveNotiPubKey(){var T=this;return(0,F.A)(function*(){try{const N=T.get_all_server_info(!0);let R;for(let U of N)if(U.webpush_tog){R=U;break}R&&(R.webpush_tog=!1,yield T.GetPushPubKey(R.isOfficial,R.target))}catch(N){console.log("\uc11c\ubc84\uc5d0\uc11c \uc54c\ub9bc \uc81c\uac70\ud558\uae30 \uc2e4\ud328: ",N)}})()}CreateChannelFalseAlarm(T,N,R,U,ie=!1){var $=this;return(0,F.A)(function*(){var de;const Ae=$.channels_orig[T][N][R.id],tt=Ae.redirect,pt=Ae.info.name||$.GetOverrideName(Ae.info.id,T,N)||Ae.info.display_name||Ae.title||$.lang.text.ChatRoom.noname_chatroom;let Kt;$.p5loading.toast(`${$.lang.text.NotificationSettings.set_alert}: ${pt}...`,"create_todo_noti");try{Kt=$.GenerateQRCode($.servers[T][N].info,"/")}catch{}let Fe={id:Ae.cnoti_id,title:pt,body:R.last_comment||$.lang.text.Subscribes.noMessageHistory,smallIcon_ln:"diychat",image:null===(de=$.groups[T])||void 0===de||null===(de=de[N])||void 0===de||null===(de=de[R.group_id||R.id])||void 0===de?void 0:de.img,bgcolor:Ae.color,data_wm:{data:{url:3!=tt.type?`${Kt?Kt+"&":"/?"}open_prv_channel=${(null==tt?void 0:tt.id)||R.id}`:`${Kt}&group=${Ae.title||Ae.info.name},${Ae.group_id||Ae.info.id}`.replace(/ /g,"%20")}}};if("image"==(null==U?void 0:U.content.viewer))if(null!=U&&U.content.url)Fe.image=U.content.url;else if(U.content.path)try{const We=yield $.indexed.loadBlobFromUserPath(U.content.path,"image/png"),at=URL.createObjectURL(We);Fe.image=at,setTimeout(()=>{URL.revokeObjectURL(at)},100)}catch{}$.noti.PushLocal(Fe,$.channels_orig[T][N][R.id].cnoti_id,We=>{$.go_to_chatroom($.channels_orig[T][N][R.id])},ie)})()}}return(ne=Pe).\u0275fac=function(T){return new(T||ne)(tr.KVO(Xt.G),tr.KVO(hn.j),tr.KVO(Fn.n),tr.KVO(Cn.r),tr.KVO(Wn.hG),tr.KVO(fr.y),tr.KVO(sn.z3),tr.KVO(yr.q9),tr.KVO(Ur.f))},ne.\u0275prov=tr.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"}),Pe})()},3307:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{f:()=>Z});var F=Ge(467),j=Ge(8326),rn=Ge(3953),l=Ge(4234);!function be(){("http:"!=window.location.protocol||0==window.location.host.indexOf("localhost"))&&Ge.e(925).then(Ge.t.bind(Ge,925,23))}();let Z=(()=>{var M;class C{constructor(w){this.lang=w,this.loadingStack={},this.stackKeys=[],this.queued=[]}create(w){var I=this;return(0,F.A)(function*(){I.CurrentLoading?I.AddLoadingInfo?I.AddLoadingInfo(w):I.queued.push(w):yield new Promise(D=>{I.CurrentLoading=new j(d=>{d.setup=()=>{if(d.noCanvas(),"http:"!=window.location.protocol||0==window.location.host.indexOf("localhost")){let h=new j.Oscillator(372);I.SoundAlert=()=>{if(w.soundAlert)try{h.freq(372),h.start(),h.freq(500,.1),h.freq(320,.15),h.stop(.2)}catch(p){console.log("\uc624\uc2e4\ub808\uc774\ud130 \uc900\ube44\uc911: ",p)}}}I.parentDiv=d.createDiv(),I.parentDiv.style("position: absolute; left: 0; top: 0; z-index: 1"),I.parentDiv.style("width: 100%; height: fit-content"),I.parentDiv.style("padding: 16px;"),I.parentDiv.style("display: flex; flex-direction: column"),I.parentDiv.style("gap: 8px"),I.parentDiv.style("justify-content: center;"),I.parentDiv.style("pointer-events: none"),I.parentDiv.style("user-select: none"),I.AddLoadingInfo=h=>{var p;I.loadingStack[h.id]=h,I.stackKeys=Object.keys(I.loadingStack);const m=d.createDiv();I.loadingStack[h.id].element=m,m.class("backdrop_filter"),m.style("width: 100%; height: fit-content"),m.style("word-break: break-all"),m.style("background: "+(h.bgcolor?`#${h.bgcolor}88`:"var(--toast-background-color)")),m.style("border-radius: 32px"),m.style("padding: 8px"),m.style("color: white"),m.parent(I.parentDiv),h.clickable?(m.style("cursor: pointer"),m.style("pointer-events: fill"),m.mouseClicked(()=>{var L;null===(L=h.clickable)||void 0===L||L.call(h),m.style("cursor: auto"),m.style("pointer-events: none"),h.forceEnd=350})):(m.style("cursor: auto"),m.style("pointer-events: none")),(void 0!==h.clickable||h.soundAlert)&&(null===(p=I.SoundAlert)||void 0===p||p.call(I));const g=d.createDiv();g.style("display: flex; flex-direction: row;"),g.parent(m);const x=d.createImg(h.image,"ld_img");x.style("width: 32px; height: 32px;"),x.style("margin-left: 8px"),x.style("object-fit: cover"),x.style("border-radius: 24px;"),h.image||x.hide(),h.imageElement=x,x.parent(g);const E=d.createDiv();E.style("display: flex; flex-direction: row;"),E.style("gap: 4px"),E.style("overflow: hidden"),E.style("flex-grow: 1"),E.style("align-items: center"),E.style("margin-right: 8px"),E.parent(g);const S=d.createDiv(h.message||I.lang.text.TodoDetail.WIP);if(S.style("margin-left: 16px"),S.style("flex-grow: 1"),S.style("overflow: hidden"),S.style("white-space: nowrap"),S.style("text-overflow: ellipsis"),h.messageElement=S,S.parent(E),void 0===h.clickable){const L=d.createDiv();L.style("width: 24px; height: 24px;"),L.style("flex-shrink: 0"),L.style("border-radius: 50%"),null===h.progress&&(h.progress=void 0);const q=Math.floor(100*h.progress)||0;L.style(`background: conic-gradient(var(--loading-done-color) 0% ${q}%, var(--loading-waiting-color) ${q}% 100%)`),h.progressElement=L,h.nullProgress=0,L.parent(E)}h.fade=0,null===h.forceEnd&&delete h.forceEnd},I.AddLoadingInfo(w),D(void 0)},d.draw=()=>{for(let p=I.queued.length-1;p>=0;p--)I.AddLoadingInfo(I.queued[p]),I.queued.splice(p,1);for(let p of I.stackKeys){if(void 0===I.loadingStack[p].progress){var h;I.loadingStack[p].nullProgress=(I.loadingStack[p].nullProgress+2)%120;const m=I.loadingStack[p].nullProgress;null===(h=I.loadingStack[p].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-waiting-color) 0% ${m-20}%, var(--loading-done-color) ${m-20}% ${m}%, var(--loading-waiting-color) ${m}% 100%)`)}void 0!==I.loadingStack[p].forceEnd&&I.loadingStack[p].forceEnd>0&&(I.loadingStack[p].forceEnd-=7),I.loadingStack[p].forceEnd<=0?I.loadingStack[p].fade>0?(I.loadingStack[p].fade-=.07,I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`),I.loadingStack[p].fade<=0&&(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack))):(I.loadingStack[p].element.remove(),delete I.loadingStack[p],I.stackKeys=Object.keys(I.loadingStack)):I.loadingStack[p].fade<1&&(I.loadingStack[p].fade+=.07,I.loadingStack[p].fade>=1&&(I.loadingStack[p].fade=1),I.loadingStack[p].element.style(`opacity: ${I.loadingStack[p].fade}`))}I.stackKeys.length||f()};let f=()=>{d.remove(),I.parentDiv=null,I.CurrentLoading=null,I.AddLoadingInfo=null,I.stackKeys.length=0}})})})()}update(w,I=!1){var D=this;return(0,F.A)(function*(){if(D.stackKeys.includes(w.id)){var d;if(w.clickable?(D.loadingStack[w.id].element.style("cursor: pointer"),D.loadingStack[w.id].element.style("pointer-events: fill"),D.loadingStack[w.id].element.mouseClicked(()=>{var p;null===(p=w.clickable)||void 0===p||p.call(w),D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none"),D.loadingStack[w.id].forceEnd=350})):(D.loadingStack[w.id].element.style("cursor: auto"),D.loadingStack[w.id].element.style("pointer-events: none")),(void 0!==w.clickable||w.soundAlert)&&(null===(d=D.SoundAlert)||void 0===d||d.call(D)),null!=w.bgcolor&&D.loadingStack[w.id].element.style("background: "+(w.bgcolor?`#${w.bgcolor}88`:"var(--toast-background-color)")),void 0!==w.forceEnd)if(null===w.forceEnd)D.loadingStack[w.id].forceEnd=void 0;else if(D.loadingStack[w.id].forceEnd=w.forceEnd,D.loadingStack[w.id].progress){var f;D.loadingStack[w.id].progress=1,null===(f=D.loadingStack[w.id].progressElement)||void 0===f||f.style("background: conic-gradient(var(--loading-done-color) 0% 100%")}if(void 0!==w.message&&(null===w.message?(delete D.loadingStack[w.id],D.loadingStack[w.id].messageElement.html()):(D.loadingStack[w.id].message=w.message,D.loadingStack[w.id].messageElement.html(w.message))),void 0!==w.progress)if(null===w.progress)delete D.loadingStack[w.id].progress;else{var h;D.loadingStack[w.id].progress=w.progress;const p=Math.floor(100*w.progress);null===(h=D.loadingStack[w.id].progressElement)||void 0===h||h.style(`background: conic-gradient(var(--loading-done-color) 0% ${p}%, var(--loading-waiting-color) ${p}% 100%)`)}void 0!==w.image&&(null===w.image?(delete D.loadingStack[w.id].image,D.loadingStack[w.id].imageElement.hide(),D.loadingStack[w.id].imageElement.removeAttribute("src")):(D.loadingStack[w.id].image=w.image,D.loadingStack[w.id].imageElement.attribute("src",w.image),D.loadingStack[w.id].imageElement.show()))}else I||(yield D.create(w))})()}toast(w,I,D=1e3){const d=I||`AsToast_${Date.now()}`;this.update({id:d,message:w,forceEnd:D})}remove(w){this.update({id:w,forceEnd:350},!0)}}return(M=C).\u0275fac=function(w){return new(w||M)(rn.KVO(l.y))},M.\u0275prov=rn.jDH({token:M,factory:M.\u0275fac,providedIn:"root"}),C})()},9900:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{G:()=>be});var F=Ge(8326),Rt=Ge(7100),rn=Ge(3953),l=function(Z){return Z[Z.Idle=0]="Idle",Z[Z.DivFadeIn=1]="DivFadeIn",Z[Z.BorderAlert=2]="BorderAlert",Z[Z.Reading=3]="Reading",Z[Z.FadeOut=4]="FadeOut",Z}(l||{});let be=(()=>{var Z;class M{constructor(){this.isShowing=!1,this.stack=[],this.alert=[],this.status=l.Idle}show(b){let w;b.time=(new Date).getTime(),b.lateable||(this.AlertNow=b,this.status=l.DivFadeIn),this.alert.length&&(w=this.alert[this.alert.length-1]),this.AlertNow&&this.AlertNow.text==b.text?this.status=l.DivFadeIn:w&&w.text==b.text||this.alert.push(b),this.isShowing?this.status==l.FadeOut&&(this.status=l.DivFadeIn):(this.CurrentToast=new F(D=>{let d,f,h,p=0,m=0,g=0;D.setup=()=>{D.noCanvas(),d=D.createDiv(),d.style("position: absolute; left: 0; top: 0; z-index: 2"),d.style("width: 100%; height: fit-content"),d.style("padding: 32px;"),d.style("display: flex; justify-content: center;"),d.style("pointer-events: none"),x(),h=D.createDiv(),h.parent(d),h.class("backdrop_filter"),h.style("display: flex; justify-content: center;"),h.style("width: fit-content; height: fit-content"),h.style("border-radius: 24px"),h.style("background: var(--toast-background-color)"),h.style("padding: 4px"),f=D.createDiv(),f.parent(h),f.style("display: flex; justify-content: center;"),f.style("width: fit-content; height: fit-content"),f.style("word-break: break-all"),f.style("background: var(--toast-background-color)"),f.style("border-radius: 20px"),f.style("padding: 12px"),f.style("color: white"),this.AlertNow||(this.AlertNow=this.alert.shift()),f.html(this.HTMLEncode(this.AlertNow.text)),E(),this.status=l.DivFadeIn},D.draw=()=>{switch(this.status){case l.DivFadeIn:p<1?p+=1:(p=1,m=1,this.status=l.BorderAlert,f.html(this.HTMLEncode(this.AlertNow.text)));break;case l.BorderAlert:if(m>0)m-=.03;else{let L;m=0,L=this.AlertNow.duration?1e3*this.AlertNow.duration:24*(new TextEncoder).encode(this.AlertNow.text).length,g=D.millis()+L+960,this.status=l.Reading}break;case l.Reading:D.millis()>g&&(this.alert.length?(this.stack.push(this.AlertNow),this.AlertNow=this.alert.shift(),f.html(this.HTMLEncode(this.AlertNow.text)),this.status=l.DivFadeIn):this.status=l.FadeOut);break;case l.FadeOut:p>0?p-=.04:S()}x(),E()};let x=()=>{d.style(`opacity: ${p}`)},E=()=>{let L=D.lerpColor(D.color("#"+(Rt.ud?"30564e88":"b9543788")),D.color("#ffd94ebb"),m).levels;h.style(`padding: ${4*m}px`),f.style(`padding: ${D.lerp(16,12,m)}px`),f.style(`border-radius: ${D.lerp(24,20,m)}px`),h.style(`background: rgba(${L[0]}, ${L[1]}, ${L[2]}, ${L[3]/255})`)},S=()=>{this.stack=[...this.stack,this.AlertNow,...this.alert],this.AlertNow=null,this.alert.length=0,this.isShowing=!1,this.CurrentToast.remove()}}),this.isShowing=!0)}hide(){this.status=l.FadeOut}}return(Z=M).\u0275fac=function(b){return new(b||Z)},Z.\u0275prov=rn.jDH({token:Z,factory:Z.\u0275fac,providedIn:"root"}),M})()},8065:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{j:()=>j});var F=Ge(3953);let j=(()=>{var Rt;class rn{constructor(){this.colors={offline:"#888888",missing:"#880000",pending:"#dddd0c",online:"#4ff14f",certified:"#00ffff"},this.chatroom={},this.project={},this.task={},this.settings={groupServer:"offline",dedicatedServer:"offline",dedicated_groupchat:"offline"},this.tools={},this.groupServer={official:{default:"offline"},unofficial:{}},setInterval(()=>{},350)}}return(Rt=rn).\u0275fac=function(be){return new(be||Rt)},Rt.\u0275prov=F.jDH({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),rn})()},6197:(Ir,Un,Ge)=>{"use strict";var F=Ge(345),j=Ge(3953),Rt=Ge(9858),rn=Ge(3656),l=Ge(5374),be=Ge(92);const Z=[{path:"",redirectTo:"portal",pathMatch:"full"},{path:"minimal-chat",loadChildren:()=>Promise.all([Ge.e(2076),Ge.e(5502)]).then(Ge.bind(Ge,5502)).then(ot=>ot.MinimalChatPageModule)},{path:"others-profile",loadChildren:()=>Ge.e(4722).then(Ge.bind(Ge,4722)).then(ot=>ot.OthersProfilePageModule)},{path:"user-fs-dir",loadChildren:()=>Ge.e(6556).then(Ge.bind(Ge,6556)).then(ot=>ot.UserFsDirPageModule)},{path:"group-server",loadChildren:()=>Ge.e(36).then(Ge.bind(Ge,36)).then(ot=>ot.GroupServerPageModule)},{path:"add-todo-menu",loadChildren:()=>Promise.all([Ge.e(2076),Ge.e(8163)]).then(Ge.bind(Ge,8163)).then(ot=>ot.AddTodoMenuPageModule)},{path:"chat-room",loadChildren:()=>Promise.all([Ge.e(2076),Ge.e(6991)]).then(Ge.bind(Ge,6991)).then(ot=>ot.ChatRoomPageModule)},{path:"post-viewer",loadChildren:()=>Promise.all([Ge.e(222),Ge.e(526)]).then(Ge.bind(Ge,526)).then(ot=>ot.PostViewerPageModule)},{path:"share-content-to-other",loadChildren:()=>Ge.e(9406).then(Ge.bind(Ge,9406)).then(ot=>ot.ShareContentToOtherPageModule)},{path:"webrtc-manage-io-dev",loadChildren:()=>Ge.e(5436).then(Ge.bind(Ge,5436)).then(ot=>ot.WebrtcManageIoDevPageModule)},{path:"portal",loadChildren:()=>Promise.all([Ge.e(4020),Ge.e(8180)]).then(Ge.bind(Ge,8180)).then(ot=>ot.PortalPageModule)},{path:"group-detail",loadChildren:()=>Ge.e(3267).then(Ge.bind(Ge,3267)).then(ot=>ot.GroupDetailPageModule)},{path:"instant-call",loadChildren:()=>Promise.all([Ge.e(4020),Ge.e(6524),Ge.e(2076)]).then(Ge.bind(Ge,6524)).then(ot=>ot.InstantCallPageModule)},{path:"add-group",loadChildren:()=>Ge.e(7601).then(Ge.bind(Ge,7601)).then(ot=>ot.AddGroupPageModule)},{path:"void-draw",loadChildren:()=>Promise.all([Ge.e(6042),Ge.e(4020),Ge.e(2655)]).then(Ge.bind(Ge,2655)).then(ot=>ot.VoidDrawPageModule)},{path:"ionic-viewer",loadChildren:()=>Promise.all([Ge.e(6042),Ge.e(4803),Ge.e(222)]).then(Ge.bind(Ge,4803)).then(ot=>ot.IonicViewerPageModule)},{path:"server-detail",loadChildren:()=>Ge.e(3456).then(Ge.bind(Ge,3456)).then(ot=>ot.ServerDetailPageModule)},{path:"qrcode-modal",loadChildren:()=>Promise.all([Ge.e(2076),Ge.e(3992)]).then(Ge.bind(Ge,1611)).then(ot=>ot.QRCodeModalPageModule)}];let M=(()=>{var ot;class ue{}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({imports:[Rt.iI.forRoot(Z,{preloadingStrategy:Rt.Kp}),Rt.iI]}),ue})();var C=Ge(177),b=Ge(9030),w=Ge(8810),I=Ge(3726),D=Ge(7673),d=Ge(8793),f=Ge(1413),h=Ge(1985),p=Ge(5343);const m=new h.c(p.l);var x=Ge(6365),E=Ge(8750),S=Ge(983),L=Ge(9326),q=Ge(6648);function J(...ot){const ue=(0,L.lI)(ot),ve=(0,L.R0)(ot,1/0),ze=ot;return ze.length?1===ze.length?(0,E.Tg)(ze[0]):(0,x.U)(ve)((0,q.H)(ze,ue)):S.w}var G=Ge(6354),V=Ge(5964),K=Ge(5558),H=Ge(17),te=Ge(8071),Y=Ge(9974);const Se={connector:()=>new f.B};function oe(ot,ue=Se){const{connector:ve}=ue;return(0,Y.N)((ze,lt)=>{const Lt=ve();(0,E.Tg)(ot(function we(ot){return new h.c(ue=>ot.subscribe(ue))}(Lt))).subscribe(lt),lt.add(ze.subscribe(Lt))})}var Q=Ge(6697),fe=Ge(8141),De=Ge(8359);class it extends De.yU{constructor(ue,ve){super()}schedule(ue,ve=0){return this}}const le={setInterval(ot,ue,...ve){const{delegate:ze}=le;return null!=ze&&ze.setInterval?ze.setInterval(ot,ue,...ve):setInterval(ot,ue,...ve)},clearInterval(ot){const{delegate:ue}=le;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ot)},delegate:void 0};var z=Ge(7908);const Ue={now:()=>(Ue.delegate||Date).now(),delegate:void 0};class Je{constructor(ue,ve=Je.now){this.schedulerActionCtor=ue,this.now=ve}schedule(ue,ve=0,ze){return new this.schedulerActionCtor(this,ue).schedule(ze,ve)}}Je.now=Ue.now;const Ct=new class vt extends Je{constructor(ue,ve=Je.now){super(ue,ve),this.actions=[],this._active=!1}flush(ue){const{actions:ve}=this;if(this._active)return void ve.push(ue);let ze;this._active=!0;do{if(ze=ue.execute(ue.state,ue.delay))break}while(ue=ve.shift());if(this._active=!1,ze){for(;ue=ve.shift();)ue.unsubscribe();throw ze}}}(class ye extends it{constructor(ue,ve){super(ue,ve),this.scheduler=ue,this.work=ve,this.pending=!1}schedule(ue,ve=0){var ze;if(this.closed)return this;this.state=ue;const lt=this.id,Lt=this.scheduler;return null!=lt&&(this.id=this.recycleAsyncId(Lt,lt,ve)),this.pending=!0,this.delay=ve,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(Lt,this.id,ve),this}requestAsyncId(ue,ve,ze=0){return le.setInterval(ue.flush.bind(ue,this),ze)}recycleAsyncId(ue,ve,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return ve;null!=ve&&le.clearInterval(ve)}execute(ue,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(ue,ve);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ve){let lt,ze=!1;try{this.work(ue)}catch(Lt){ze=!0,lt=Lt||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),lt}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ve}=this,{actions:ze}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.o)(ze,this),null!=ue&&(this.id=this.recycleAsyncId(ve,ue,null)),this.delay=null,super.unsubscribe()}}}),zt=Ct;var _t=Ge(4360),Wt=Ge(3703),mt=Ge(1397);function Nt(ot,ue){return ue?ve=>(0,d.x)(ue.pipe((0,Q.s)(1),function Ft(){return(0,Y.N)((ot,ue)=>{ot.subscribe((0,_t._)(ue,p.l))})}()),ve.pipe(Nt(ot))):(0,mt.Z)((ve,ze)=>(0,E.Tg)(ot(ve,ze)).pipe((0,Q.s)(1),(0,Wt.u)(ve)))}var kt=Ge(9470);const mn="Service workers are disabled or not supported by this browser";class An{constructor(ue){if(this.serviceWorker=ue,ue){const ze=(0,I.R)(ue,"controllerchange").pipe((0,G.T)(()=>ue.controller)),lt=(0,b.v)(()=>(0,D.of)(ue.controller)),Lt=(0,d.x)(lt,ze);this.worker=Lt.pipe((0,V.p)(Wr=>!!Wr)),this.registration=this.worker.pipe((0,K.n)(()=>ue.getRegistration()));const ar=(0,I.R)(ue,"message").pipe((0,G.T)(Wr=>Wr.data)).pipe((0,V.p)(Wr=>Wr&&Wr.type)).pipe(function re(ot){return ot?ue=>oe(ot)(ue):ue=>function ge(ot,ue){const ve=(0,te.T)(ot)?ot:()=>ot;return(0,te.T)(ue)?oe(ue,{connector:ve}):ze=>new H.G(ze,ve)}(new f.B)(ue)}());ar.connect(),this.events=ar}else this.worker=this.events=this.registration=function Zn(ot){return(0,b.v)(()=>(0,w.$)(new Error(ot)))}(mn)}postMessage(ue,ve){return this.worker.pipe((0,Q.s)(1),(0,fe.M)(ze=>{ze.postMessage({action:ue,...ve})})).toPromise().then(()=>{})}postMessageWithOperation(ue,ve,ze){const lt=this.waitForOperationCompleted(ze),Lt=this.postMessage(ue,ve);return Promise.all([Lt,lt]).then(([,Sn])=>Sn)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(ue){let ve;return ve="string"==typeof ue?ze=>ze.type===ue:ze=>ue.includes(ze.type),this.events.pipe((0,V.p)(ve))}nextEventOfType(ue){return this.eventsOfType(ue).pipe((0,Q.s)(1))}waitForOperationCompleted(ue){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,V.p)(ve=>ve.nonce===ue),(0,Q.s)(1),(0,G.T)(ve=>{if(void 0!==ve.result)return ve.result;throw new Error(ve.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Qn=(()=>{var ot;class ue{get isEnabled(){return this.sw.isEnabled}constructor(ze){if(this.sw=ze,this.pushManager=null,this.subscriptionChanges=new f.B,!ze.isEnabled)return this.messages=m,this.notificationClicks=m,void(this.subscription=m);this.messages=this.sw.eventsOfType("PUSH").pipe((0,G.T)(Lt=>Lt.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,G.T)(Lt=>Lt.data)),this.pushManager=this.sw.registration.pipe((0,G.T)(Lt=>Lt.pushManager));const lt=this.pushManager.pipe((0,K.n)(Lt=>Lt.getSubscription()));this.subscription=J(lt,this.subscriptionChanges)}requestSubscription(ze){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(mn));const lt={userVisibleOnly:!0};let Lt=this.decodeBase64(ze.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),Sn=new Uint8Array(new ArrayBuffer(Lt.length));for(let xn=0;xn<Lt.length;xn++)Sn[xn]=Lt.charCodeAt(xn);return lt.applicationServerKey=Sn,this.pushManager.pipe((0,K.n)(xn=>xn.subscribe(lt)),(0,Q.s)(1)).toPromise().then(xn=>(this.subscriptionChanges.next(xn),xn))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Q.s)(1),(0,K.n)(lt=>{if(null===lt)throw new Error("Not subscribed to push notifications.");return lt.unsubscribe().then(Lt=>{if(!Lt)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(mn))}decodeBase64(ze){return atob(ze)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(An))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})(),Rn=(()=>{var ot;class ue{get isEnabled(){return this.sw.isEnabled}constructor(ze){if(this.sw=ze,!ze.isEnabled)return this.versionUpdates=m,void(this.unrecoverable=m);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mn));const ze=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:ze},ze)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mn));const ze=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:ze},ze)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(An))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();const Er=new j.nKC("");function Bn(ot,ue,ve,ze){return()=>{if(!(0,C.UE)(ze)||!("serviceWorker"in navigator)||!1===ve.enabled)return;const lt=ot.get(j.SKi),Lt=ot.get(j.o8S);let Sn;if(lt.runOutsideAngular(()=>{const xn=navigator.serviceWorker,Hn=()=>{var ar;return null===(ar=xn.controller)||void 0===ar?void 0:ar.postMessage({action:"INITIALIZE"})};xn.addEventListener("controllerchange",Hn),Lt.onDestroy(()=>{xn.removeEventListener("controllerchange",Hn)})}),"function"==typeof ve.registrationStrategy)Sn=ve.registrationStrategy();else{const[xn,...Hn]=(ve.registrationStrategy||"registerWhenStable:30000").split(":");switch(xn){case"registerImmediately":Sn=(0,D.of)(null);break;case"registerWithDelay":Sn=ur(+Hn[0]||0);break;case"registerWhenStable":Sn=Hn[0]?J(vn(ot),ur(+Hn[0])):vn(ot);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${ve.registrationStrategy}`)}}lt.runOutsideAngular(()=>Sn.pipe((0,Q.s)(1)).subscribe(()=>navigator.serviceWorker.register(ue,{scope:ve.scope}).catch(xn=>console.error("Service worker registration failed with:",xn))))}}function ur(ot){return(0,D.of)(null).pipe(function qt(ot,ue=Ct){const ve=function Tt(ot=0,ue,ve=zt){let ze=-1;return null!=ue&&((0,kt.m)(ue)?ve=ue:ze=ue),new h.c(lt=>{let Lt=function Ut(ot){return ot instanceof Date&&!isNaN(ot)}(ot)?+ot-ve.now():ot;Lt<0&&(Lt=0);let Sn=0;return ve.schedule(function(){lt.closed||(lt.next(Sn++),0<=ze?this.schedule(void 0,ze):lt.complete())},Lt)})}(ot,ue);return Nt(()=>ve)}(ot))}function vn(ot){return ot.get(j.o8S).isStable.pipe((0,V.p)(ve=>ve))}function er(ot,ue){return new An((0,C.UE)(ue)&&!1!==ot.enabled?navigator.serviceWorker:void 0)}class Pn{}function gt(ot,ue={}){return(0,j.EmA)([Qn,Rn,{provide:Er,useValue:ot},{provide:Pn,useValue:ue},{provide:An,useFactory:er,deps:[Pn,j.Agw]},{provide:j.hnV,useFactory:Bn,deps:[j.zZn,Er,Pn,j.Agw],multi:!0}])}let wt=(()=>{var ot;class ue{static register(ze,lt={}){return{ngModule:ue,providers:[gt(ze,lt)]}}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({providers:[Qn,Rn]}),ue})();var bt=Ge(9969);function sr(ot){return new j.wOt(3e3,!1)}function Ze(ot){switch(ot.length){case 0:return new bt.sf;case 1:return ot[0];default:return new bt.ui(ot)}}function xt(ot,ue,ve=new Map,ze=new Map){const lt=[],Lt=[];let Sn=-1,xn=null;if(ue.forEach(Hn=>{const ar=Hn.get("offset"),Wr=ar==Sn,ai=Wr&&xn||new Map;Hn.forEach((ki,Qi)=>{let Xi=Qi,is=ki;if("offset"!==Qi)switch(Xi=ot.normalizePropertyName(Xi,lt),is){case bt.FX:is=ve.get(Qi);break;case bt.kp:is=ze.get(Qi);break;default:is=ot.normalizeStyleValue(Qi,Xi,is,lt)}ai.set(Xi,is)}),Wr||Lt.push(ai),xn=ai,Sn=ar}),lt.length)throw function N(ot){return new j.wOt(3502,!1)}();return Lt}function Zt(ot,ue,ve,ze){switch(ue){case"start":ot.onStart(()=>ze(ve&&En(ve,"start",ot)));break;case"done":ot.onDone(()=>ze(ve&&En(ve,"done",ot)));break;case"destroy":ot.onDestroy(()=>ze(ve&&En(ve,"destroy",ot)))}}function En(ot,ue,ve){const ze=ve.totalTime,Lt=zn(ot.element,ot.triggerName,ot.fromState,ot.toState,ue||ot.phaseName,null==ze?ot.totalTime:ze,!!ve.disabled),Sn=ot._data;return null!=Sn&&(Lt._data=Sn),Lt}function zn(ot,ue,ve,ze,lt="",Lt=0,Sn){return{element:ot,triggerName:ue,fromState:ve,toState:ze,phaseName:lt,totalTime:Lt,disabled:!!Sn}}function or(ot,ue,ve){let ze=ot.get(ue);return ze||ot.set(ue,ze=ve),ze}function ii(ot){const ue=ot.indexOf(":");return[ot.substring(1,ue),ot.slice(ue+1)]}const Bi=typeof document>"u"?null:document.documentElement;function Rs(ot){const ue=ot.parentNode||ot.host||null;return ue===Bi?null:ue}let xi=null,ws=!1;function ea(ot,ue){for(;ue;){if(ue===ot)return!0;ue=Rs(ue)}return!1}function So(ot,ue,ve){if(ve)return Array.from(ot.querySelectorAll(ue));const ze=ot.querySelector(ue);return ze?[ze]:[]}let ta=(()=>{var ot;class ue{validateStyleProperty(ze){return function co(ot){xi||(xi=function so(){return typeof document<"u"?document.body:null}()||{},ws=!!xi.style&&"WebkitAppearance"in xi.style);let ue=!0;return xi.style&&!function Ps(ot){return"ebkit"==ot.substring(1,6)}(ot)&&(ue=ot in xi.style,!ue&&ws&&(ue="Webkit"+ot.charAt(0).toUpperCase()+ot.slice(1)in xi.style)),ue}(ze)}containsElement(ze,lt){return ea(ze,lt)}getParentElement(ze){return Rs(ze)}query(ze,lt,Lt){return So(ze,lt,Lt)}computeStyle(ze,lt,Lt){return Lt||""}animate(ze,lt,Lt,Sn,xn,Hn=[],ar){return new bt.sf(Lt,Sn)}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();class qo{}qo.NOOP=new ta;class ua{}const Ta=1e3,Va="ng-enter",Ne="ng-leave",yt="ng-trigger",Bt=".ng-trigger",He="ng-animating",Ht=".ng-animating";function kn(ot){if("number"==typeof ot)return ot;const ue=ot.match(/^(-?[\.\d]+)(m?s)/);return!ue||ue.length<2?0:fs(parseFloat(ue[1]),ue[2])}function fs(ot,ue){return"s"===ue?ot*Ta:ot}function qs(ot,ue,ve){return ot.hasOwnProperty("duration")?ot:function na(ot,ue,ve){let lt,Lt=0,Sn="";if("string"==typeof ot){const xn=ot.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===xn)return ue.push(sr()),{duration:0,delay:0,easing:""};lt=fs(parseFloat(xn[1]),xn[2]);const Hn=xn[3];null!=Hn&&(Lt=fs(parseFloat(Hn),xn[4]));const ar=xn[5];ar&&(Sn=ar)}else lt=ot;if(!ve){let xn=!1,Hn=ue.length;lt<0&&(ue.push(function Cr(){return new j.wOt(3100,!1)}()),xn=!0),Lt<0&&(ue.push(function Rr(){return new j.wOt(3101,!1)}()),xn=!0),xn&&ue.splice(Hn,0,sr())}return{duration:lt,delay:Lt,easing:Sn}}(ot,ue,ve)}function Ko(ot,ue,ve){ue.forEach((ze,lt)=>{const Lt=ut(lt);ve&&!ve.has(lt)&&ve.set(lt,ot.style[Lt]),ot.style[Lt]=ze})}function La(ot,ue){ue.forEach((ve,ze)=>{const lt=ut(ze);ot.style[lt]=""})}function Qa(ot){return Array.isArray(ot)?1==ot.length?ot[0]:(0,bt.K2)(ot):ot}const Ro=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vo(ot){let ue=[];if("string"==typeof ot){let ve;for(;ve=Ro.exec(ot);)ue.push(ve[1]);Ro.lastIndex=0}return ue}function oo(ot,ue,ve){const ze=`${ot}`,lt=ze.replace(Ro,(Lt,Sn)=>{let xn=ue[Sn];return null==xn&&(ve.push(function In(ot){return new j.wOt(3003,!1)}()),xn=""),xn.toString()});return lt==ze?ot:lt}const jo=/-+([a-z0-9])/g;function ut(ot){return ot.replace(jo,(...ue)=>ue[1].toUpperCase())}function Nn(ot,ue,ve){switch(ue.type){case bt.If.Trigger:return ot.visitTrigger(ue,ve);case bt.If.State:return ot.visitState(ue,ve);case bt.If.Transition:return ot.visitTransition(ue,ve);case bt.If.Sequence:return ot.visitSequence(ue,ve);case bt.If.Group:return ot.visitGroup(ue,ve);case bt.If.Animate:return ot.visitAnimate(ue,ve);case bt.If.Keyframes:return ot.visitKeyframes(ue,ve);case bt.If.Style:return ot.visitStyle(ue,ve);case bt.If.Reference:return ot.visitReference(ue,ve);case bt.If.AnimateChild:return ot.visitAnimateChild(ue,ve);case bt.If.AnimateRef:return ot.visitAnimateRef(ue,ve);case bt.If.Query:return ot.visitQuery(ue,ve);case bt.If.Stagger:return ot.visitStagger(ue,ve);default:throw function cn(ot){return new j.wOt(3004,!1)}()}}function jn(ot,ue){return window.getComputedStyle(ot)[ue]}const hr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class br extends ua{normalizePropertyName(ue,ve){return ut(ue)}normalizeStyleValue(ue,ve,ze,lt){let Lt="";const Sn=ze.toString().trim();if(hr.has(ve)&&0!==ze&&"0"!==ze)if("number"==typeof ze)Lt="px";else{const xn=ze.match(/^[+-]?[\d\.]+([a-z]*)$/);xn&&0==xn[1].length&&lt.push(function Tn(ot,ue){return new j.wOt(3005,!1)}())}return Sn+Lt}}const zi="*";const Js=new Set(["true","1"]),Br=new Set(["false","0"]);function da(ot,ue){const ve=Js.has(ot)||Br.has(ot),ze=Js.has(ue)||Br.has(ue);return(lt,Lt)=>{let Sn=ot==zi||ot==lt,xn=ue==zi||ue==Lt;return!Sn&&ve&&"boolean"==typeof lt&&(Sn=lt?Js.has(ot):Br.has(ot)),!xn&&ze&&"boolean"==typeof Lt&&(xn=Lt?Js.has(ue):Br.has(ue)),Sn&&xn}}const uo=new RegExp("s*:selfs*,?","g");function El(ot,ue,ve,ze){return new ha(ot).build(ue,ve,ze)}class ha{constructor(ue){this._driver=ue}build(ue,ve,ze){const lt=new el(ve);return this._resetContextStyleTimingState(lt),Nn(this,Qa(ue),lt)}_resetContextStyleTimingState(ue){ue.currentQuerySelector="",ue.collectedStyles=new Map,ue.collectedStyles.set("",new Map),ue.currentTime=0}visitTrigger(ue,ve){let ze=ve.queryCount=0,lt=ve.depCount=0;const Lt=[],Sn=[];return"@"==ue.name.charAt(0)&&ve.errors.push(function sn(){return new j.wOt(3006,!1)}()),ue.definitions.forEach(xn=>{if(this._resetContextStyleTimingState(ve),xn.type==bt.If.State){const Hn=xn,ar=Hn.name;ar.toString().split(/\s*,\s*/).forEach(Wr=>{Hn.name=Wr,Lt.push(this.visitState(Hn,ve))}),Hn.name=ar}else if(xn.type==bt.If.Transition){const Hn=this.visitTransition(xn,ve);ze+=Hn.queryCount,lt+=Hn.depCount,Sn.push(Hn)}else ve.errors.push(function _n(){return new j.wOt(3007,!1)}())}),{type:bt.If.Trigger,name:ue.name,states:Lt,transitions:Sn,queryCount:ze,depCount:lt,options:null}}visitState(ue,ve){const ze=this.visitStyle(ue.styles,ve),lt=ue.options&&ue.options.params||null;if(ze.containsDynamicStyles){const Lt=new Set,Sn=lt||{};ze.styles.forEach(xn=>{xn instanceof Map&&xn.forEach(Hn=>{Vo(Hn).forEach(ar=>{Sn.hasOwnProperty(ar)||Lt.add(ar)})})}),Lt.size&&ve.errors.push(function tr(ot,ue){return new j.wOt(3008,!1)}(0,Lt.values()))}return{type:bt.If.State,name:ue.name,style:ze,options:lt?{params:lt}:null}}visitTransition(ue,ve){ve.queryCount=0,ve.depCount=0;const ze=Nn(this,Qa(ue.animation),ve),lt=function ns(ot,ue){const ve=[];return"string"==typeof ot?ot.split(/\s*,\s*/).forEach(ze=>function Ms(ot,ue,ve){if(":"==ot[0]){const Hn=function Ki(ot,ue){switch(ot){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(ve,ze)=>parseFloat(ze)>parseFloat(ve);case":decrement":return(ve,ze)=>parseFloat(ze)<parseFloat(ve);default:return ue.push(function ne(ot){return new j.wOt(3016,!1)}()),"* => *"}}(ot,ve);if("function"==typeof Hn)return void ue.push(Hn);ot=Hn}const ze=ot.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==ze||ze.length<4)return ve.push(function ei(ot){return new j.wOt(3015,!1)}()),ue;const lt=ze[1],Lt=ze[2],Sn=ze[3];ue.push(da(lt,Sn)),"<"==Lt[0]&&(lt!=zi||Sn!=zi)&&ue.push(da(Sn,lt))}(ze,ve,ue)):ve.push(ot),ve}(ue.expr,ve.errors);return{type:bt.If.Transition,matchers:lt,animation:ze,queryCount:ve.queryCount,depCount:ve.depCount,options:za(ue.options)}}visitSequence(ue,ve){return{type:bt.If.Sequence,steps:ue.steps.map(ze=>Nn(this,ze,ve)),options:za(ue.options)}}visitGroup(ue,ve){const ze=ve.currentTime;let lt=0;const Lt=ue.steps.map(Sn=>{ve.currentTime=ze;const xn=Nn(this,Sn,ve);return lt=Math.max(lt,ve.currentTime),xn});return ve.currentTime=lt,{type:bt.If.Group,steps:Lt,options:za(ue.options)}}visitAnimate(ue,ve){const ze=function Aa(ot,ue){if(ot.hasOwnProperty("duration"))return ot;if("number"==typeof ot)return ml(qs(ot,ue).duration,0,"");const ve=ot;if(ve.split(/\s+/).some(Lt=>"{"==Lt.charAt(0)&&"{"==Lt.charAt(1))){const Lt=ml(0,0,"");return Lt.dynamic=!0,Lt.strValue=ve,Lt}const lt=qs(ve,ue);return ml(lt.duration,lt.delay,lt.easing)}(ue.timings,ve.errors);ve.currentAnimateTimings=ze;let lt,Lt=ue.styles?ue.styles:(0,bt.iF)({});if(Lt.type==bt.If.Keyframes)lt=this.visitKeyframes(Lt,ve);else{let Sn=ue.styles,xn=!1;if(!Sn){xn=!0;const ar={};ze.easing&&(ar.easing=ze.easing),Sn=(0,bt.iF)(ar)}ve.currentTime+=ze.duration+ze.delay;const Hn=this.visitStyle(Sn,ve);Hn.isEmptyStep=xn,lt=Hn}return ve.currentAnimateTimings=null,{type:bt.If.Animate,timings:ze,style:lt,options:null}}visitStyle(ue,ve){const ze=this._makeStyleAst(ue,ve);return this._validateStyleAst(ze,ve),ze}_makeStyleAst(ue,ve){const ze=[],lt=Array.isArray(ue.styles)?ue.styles:[ue.styles];for(let xn of lt)"string"==typeof xn?xn===bt.kp?ze.push(xn):ve.errors.push(new j.wOt(3002,!1)):ze.push(new Map(Object.entries(xn)));let Lt=!1,Sn=null;return ze.forEach(xn=>{if(xn instanceof Map&&(xn.has("easing")&&(Sn=xn.get("easing"),xn.delete("easing")),!Lt))for(let Hn of xn.values())if(Hn.toString().indexOf("{{")>=0){Lt=!0;break}}),{type:bt.If.Style,styles:ze,easing:Sn,offset:ue.offset,containsDynamicStyles:Lt,options:null}}_validateStyleAst(ue,ve){const ze=ve.currentAnimateTimings;let lt=ve.currentTime,Lt=ve.currentTime;ze&&Lt>0&&(Lt-=ze.duration+ze.delay),ue.styles.forEach(Sn=>{"string"!=typeof Sn&&Sn.forEach((xn,Hn)=>{const ar=ve.collectedStyles.get(ve.currentQuerySelector),Wr=ar.get(Hn);let ai=!0;Wr&&(Lt!=lt&&Lt>=Wr.startTime&&lt<=Wr.endTime&&(ve.errors.push(function Fn(ot,ue,ve,ze,lt){return new j.wOt(3010,!1)}()),ai=!1),Lt=Wr.startTime),ai&&ar.set(Hn,{startTime:Lt,endTime:lt}),ve.options&&function Bl(ot,ue,ve){const ze=ue.params||{},lt=Vo(ot);lt.length&&lt.forEach(Lt=>{ze.hasOwnProperty(Lt)||ve.push(function Fr(ot){return new j.wOt(3001,!1)}())})}(xn,ve.options,ve.errors)})})}visitKeyframes(ue,ve){const ze={type:bt.If.Keyframes,styles:[],options:null};if(!ve.currentAnimateTimings)return ve.errors.push(function Cn(){return new j.wOt(3011,!1)}()),ze;let Lt=0;const Sn=[];let xn=!1,Hn=!1,ar=0;const Wr=ue.steps.map(Go=>{const us=this._makeStyleAst(Go,ve);let po=null!=us.offset?us.offset:function al(ot){if("string"==typeof ot)return null;let ue=null;if(Array.isArray(ot))ot.forEach(ve=>{if(ve instanceof Map&&ve.has("offset")){const ze=ve;ue=parseFloat(ze.get("offset")),ze.delete("offset")}});else if(ot instanceof Map&&ot.has("offset")){const ve=ot;ue=parseFloat(ve.get("offset")),ve.delete("offset")}return ue}(us.styles),ia=0;return null!=po&&(Lt++,ia=us.offset=po),Hn=Hn||ia<0||ia>1,xn=xn||ia<ar,ar=ia,Sn.push(ia),us});Hn&&ve.errors.push(function Wn(){return new j.wOt(3012,!1)}()),xn&&ve.errors.push(function yr(){return new j.wOt(3200,!1)}());const ai=ue.steps.length;let ki=0;Lt>0&&Lt<ai?ve.errors.push(function fr(){return new j.wOt(3202,!1)}()):0==Lt&&(ki=1/(ai-1));const Qi=ai-1,Xi=ve.currentTime,is=ve.currentAnimateTimings,Ks=is.duration;return Wr.forEach((Go,us)=>{const po=ki>0?us==Qi?1:ki*us:Sn[us],ia=po*Ks;ve.currentTime=Xi+is.delay+ia,is.duration=ia,this._validateStyleAst(Go,ve),Go.offset=po,ze.styles.push(Go)}),ze}visitReference(ue,ve){return{type:bt.If.Reference,animation:Nn(this,Qa(ue.animation),ve),options:za(ue.options)}}visitAnimateChild(ue,ve){return ve.depCount++,{type:bt.If.AnimateChild,options:za(ue.options)}}visitAnimateRef(ue,ve){return{type:bt.If.AnimateRef,animation:this.visitReference(ue.animation,ve),options:za(ue.options)}}visitQuery(ue,ve){const ze=ve.currentQuerySelector,lt=ue.options||{};ve.queryCount++,ve.currentQuery=ue;const[Lt,Sn]=function go(ot){const ue=!!ot.split(/\s*,\s*/).find(ve=>":self"==ve);return ue&&(ot=ot.replace(uo,"")),ot=ot.replace(/@\*/g,Bt).replace(/@\w+/g,ve=>Bt+"-"+ve.slice(1)).replace(/:animating/g,Ht),[ot,ue]}(ue.selector);ve.currentQuerySelector=ze.length?ze+" "+Lt:Lt,or(ve.collectedStyles,ve.currentQuerySelector,new Map);const xn=Nn(this,Qa(ue.animation),ve);return ve.currentQuery=null,ve.currentQuerySelector=ze,{type:bt.If.Query,selector:Lt,limit:lt.limit||0,optional:!!lt.optional,includeSelf:Sn,animation:xn,originalSelector:ue.selector,options:za(ue.options)}}visitStagger(ue,ve){ve.currentQuery||ve.errors.push(function Ur(){return new j.wOt(3013,!1)}());const ze="full"===ue.timings?{duration:0,delay:0,easing:"full"}:qs(ue.timings,ve.errors,!0);return{type:bt.If.Stagger,animation:Nn(this,Qa(ue.animation),ve),timings:ze,options:null}}}class el{constructor(ue){this.errors=ue,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function za(ot){return ot?(ot={...ot}).params&&(ot.params=function pi(ot){return ot?{...ot}:null}(ot.params)):ot={},ot}function ml(ot,ue,ve){return{duration:ot,delay:ue,easing:ve}}function Os(ot,ue,ve,ze,lt,Lt,Sn=null,xn=!1){return{type:1,element:ot,keyframes:ue,preStyleProps:ve,postStyleProps:ze,duration:lt,delay:Lt,totalTime:lt+Lt,easing:Sn,subTimeline:xn}}class ho{constructor(){this._map=new Map}get(ue){return this._map.get(ue)||[]}append(ue,ve){let ze=this._map.get(ue);ze||this._map.set(ue,ze=[]),ze.push(...ve)}has(ue){return this._map.has(ue)}clear(){this._map.clear()}}const Ns=new RegExp(":enter","g"),Mo=new RegExp(":leave","g");function gl(ot,ue,ve,ze,lt,Lt=new Map,Sn=new Map,xn,Hn,ar=[]){return(new Tl).buildKeyframes(ot,ue,ve,ze,lt,Lt,Sn,xn,Hn,ar)}class Tl{buildKeyframes(ue,ve,ze,lt,Lt,Sn,xn,Hn,ar,Wr=[]){ar=ar||new ho;const ai=new Gl(ue,ve,ar,lt,Lt,Wr,[]);ai.options=Hn;const ki=Hn.delay?kn(Hn.delay):0;ai.currentTimeline.delayNextStep(ki),ai.currentTimeline.setStyles([Sn],null,ai.errors,Hn),Nn(this,ze,ai);const Qi=ai.timelines.filter(Xi=>Xi.containsAnimation());if(Qi.length&&xn.size){let Xi;for(let is=Qi.length-1;is>=0;is--){const Ks=Qi[is];if(Ks.element===ve){Xi=Ks;break}}Xi&&!Xi.allowOnlyTimelineStyles()&&Xi.setStyles([xn],null,ai.errors,Hn)}return Qi.length?Qi.map(Xi=>Xi.buildKeyframes()):[Os(ve,[],[],[],0,ki,"",!1)]}visitTrigger(ue,ve){}visitState(ue,ve){}visitTransition(ue,ve){}visitAnimateChild(ue,ve){const ze=ve.subInstructions.get(ve.element);if(ze){const lt=ve.createSubContext(ue.options),Lt=ve.currentTimeline.currentTime,Sn=this._visitSubInstructions(ze,lt,lt.options);Lt!=Sn&&ve.transformIntoNewTimeline(Sn)}ve.previousNode=ue}visitAnimateRef(ue,ve){const ze=ve.createSubContext(ue.options);ze.transformIntoNewTimeline(),this._applyAnimationRefDelays([ue.options,ue.animation.options],ve,ze),this.visitReference(ue.animation,ze),ve.transformIntoNewTimeline(ze.currentTimeline.currentTime),ve.previousNode=ue}_applyAnimationRefDelays(ue,ve,ze){for(const Lt of ue){const Sn=null==Lt?void 0:Lt.delay;if(Sn){var lt;const xn="number"==typeof Sn?Sn:kn(oo(Sn,null!==(lt=null==Lt?void 0:Lt.params)&&void 0!==lt?lt:{},ve.errors));ze.delayNextStep(xn)}}}_visitSubInstructions(ue,ve,ze){let Lt=ve.currentTimeline.currentTime;const Sn=null!=ze.duration?kn(ze.duration):null,xn=null!=ze.delay?kn(ze.delay):null;return 0!==Sn&&ue.forEach(Hn=>{const ar=ve.appendInstructionToTimeline(Hn,Sn,xn);Lt=Math.max(Lt,ar.duration+ar.delay)}),Lt}visitReference(ue,ve){ve.updateOptions(ue.options,!0),Nn(this,ue.animation,ve),ve.previousNode=ue}visitSequence(ue,ve){const ze=ve.subContextCount;let lt=ve;const Lt=ue.options;if(Lt&&(Lt.params||Lt.delay)&&(lt=ve.createSubContext(Lt),lt.transformIntoNewTimeline(),null!=Lt.delay)){lt.previousNode.type==bt.If.Style&&(lt.currentTimeline.snapshotCurrentStyles(),lt.previousNode=Da);const Sn=kn(Lt.delay);lt.delayNextStep(Sn)}ue.steps.length&&(ue.steps.forEach(Sn=>Nn(this,Sn,lt)),lt.currentTimeline.applyStylesToKeyframe(),lt.subContextCount>ze&&lt.transformIntoNewTimeline()),ve.previousNode=ue}visitGroup(ue,ve){const ze=[];let lt=ve.currentTimeline.currentTime;const Lt=ue.options&&ue.options.delay?kn(ue.options.delay):0;ue.steps.forEach(Sn=>{const xn=ve.createSubContext(ue.options);Lt&&xn.delayNextStep(Lt),Nn(this,Sn,xn),lt=Math.max(lt,xn.currentTimeline.currentTime),ze.push(xn.currentTimeline)}),ze.forEach(Sn=>ve.currentTimeline.mergeTimelineCollectedStyles(Sn)),ve.transformIntoNewTimeline(lt),ve.previousNode=ue}_visitTiming(ue,ve){if(ue.dynamic){const ze=ue.strValue;return qs(ve.params?oo(ze,ve.params,ve.errors):ze,ve.errors)}return{duration:ue.duration,delay:ue.delay,easing:ue.easing}}visitAnimate(ue,ve){const ze=ve.currentAnimateTimings=this._visitTiming(ue.timings,ve),lt=ve.currentTimeline;ze.delay&&(ve.incrementTime(ze.delay),lt.snapshotCurrentStyles());const Lt=ue.style;Lt.type==bt.If.Keyframes?this.visitKeyframes(Lt,ve):(ve.incrementTime(ze.duration),this.visitStyle(Lt,ve),lt.applyStylesToKeyframe()),ve.currentAnimateTimings=null,ve.previousNode=ue}visitStyle(ue,ve){const ze=ve.currentTimeline,lt=ve.currentAnimateTimings;!lt&&ze.hasCurrentStyleProperties()&&ze.forwardFrame();const Lt=lt&&lt.easing||ue.easing;ue.isEmptyStep?ze.applyEmptyStep(Lt):ze.setStyles(ue.styles,Lt,ve.errors,ve.options),ve.previousNode=ue}visitKeyframes(ue,ve){const ze=ve.currentAnimateTimings,lt=ve.currentTimeline.duration,Lt=ze.duration,xn=ve.createSubContext().currentTimeline;xn.easing=ze.easing,ue.styles.forEach(Hn=>{xn.forwardTime((Hn.offset||0)*Lt),xn.setStyles(Hn.styles,Hn.easing,ve.errors,ve.options),xn.applyStylesToKeyframe()}),ve.currentTimeline.mergeTimelineCollectedStyles(xn),ve.transformIntoNewTimeline(lt+Lt),ve.previousNode=ue}visitQuery(ue,ve){const ze=ve.currentTimeline.currentTime,lt=ue.options||{},Lt=lt.delay?kn(lt.delay):0;Lt&&(ve.previousNode.type===bt.If.Style||0==ze&&ve.currentTimeline.hasCurrentStyleProperties())&&(ve.currentTimeline.snapshotCurrentStyles(),ve.previousNode=Da);let Sn=ze;const xn=ve.invokeQuery(ue.selector,ue.originalSelector,ue.limit,ue.includeSelf,!!lt.optional,ve.errors);ve.currentQueryTotal=xn.length;let Hn=null;xn.forEach((ar,Wr)=>{ve.currentQueryIndex=Wr;const ai=ve.createSubContext(ue.options,ar);Lt&&ai.delayNextStep(Lt),ar===ve.element&&(Hn=ai.currentTimeline),Nn(this,ue.animation,ai),ai.currentTimeline.applyStylesToKeyframe(),Sn=Math.max(Sn,ai.currentTimeline.currentTime)}),ve.currentQueryIndex=0,ve.currentQueryTotal=0,ve.transformIntoNewTimeline(Sn),Hn&&(ve.currentTimeline.mergeTimelineCollectedStyles(Hn),ve.currentTimeline.snapshotCurrentStyles()),ve.previousNode=ue}visitStagger(ue,ve){const ze=ve.parentContext,lt=ve.currentTimeline,Lt=ue.timings,Sn=Math.abs(Lt.duration),xn=Sn*(ve.currentQueryTotal-1);let Hn=Sn*ve.currentQueryIndex;switch(Lt.duration<0?"reverse":Lt.easing){case"reverse":Hn=xn-Hn;break;case"full":Hn=ze.currentStaggerTime}const Wr=ve.currentTimeline;Hn&&Wr.delayNextStep(Hn);const ai=Wr.currentTime;Nn(this,ue.animation,ve),ve.previousNode=ue,ze.currentStaggerTime=lt.currentTime-ai+(lt.startTime-ze.currentTimeline.startTime)}}const Da={};class Gl{constructor(ue,ve,ze,lt,Lt,Sn,xn,Hn){this._driver=ue,this.element=ve,this.subInstructions=ze,this._enterClassName=lt,this._leaveClassName=Lt,this.errors=Sn,this.timelines=xn,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Da,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Hn||new hi(this._driver,ve,0),xn.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(ue,ve){if(!ue)return;const ze=ue;let lt=this.options;null!=ze.duration&&(lt.duration=kn(ze.duration)),null!=ze.delay&&(lt.delay=kn(ze.delay));const Lt=ze.params;if(Lt){let Sn=lt.params;Sn||(Sn=this.options.params={}),Object.keys(Lt).forEach(xn=>{(!ve||!Sn.hasOwnProperty(xn))&&(Sn[xn]=oo(Lt[xn],Sn,this.errors))})}}_copyOptions(){const ue={};if(this.options){const ve=this.options.params;if(ve){const ze=ue.params={};Object.keys(ve).forEach(lt=>{ze[lt]=ve[lt]})}}return ue}createSubContext(ue=null,ve,ze){const lt=ve||this.element,Lt=new Gl(this._driver,lt,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(lt,ze||0));return Lt.previousNode=this.previousNode,Lt.currentAnimateTimings=this.currentAnimateTimings,Lt.options=this._copyOptions(),Lt.updateOptions(ue),Lt.currentQueryIndex=this.currentQueryIndex,Lt.currentQueryTotal=this.currentQueryTotal,Lt.parentContext=this,this.subContextCount++,Lt}transformIntoNewTimeline(ue){return this.previousNode=Da,this.currentTimeline=this.currentTimeline.fork(this.element,ue),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(ue,ve,ze){const lt={duration:null!=ve?ve:ue.duration,delay:this.currentTimeline.currentTime+(null!=ze?ze:0)+ue.delay,easing:""},Lt=new tl(this._driver,ue.element,ue.keyframes,ue.preStyleProps,ue.postStyleProps,lt,ue.stretchStartingKeyframe);return this.timelines.push(Lt),lt}incrementTime(ue){this.currentTimeline.forwardTime(this.currentTimeline.duration+ue)}delayNextStep(ue){ue>0&&this.currentTimeline.delayNextStep(ue)}invokeQuery(ue,ve,ze,lt,Lt,Sn){let xn=[];if(lt&&xn.push(this.element),ue.length>0){ue=(ue=ue.replace(Ns,"."+this._enterClassName)).replace(Mo,"."+this._leaveClassName);let ar=this._driver.query(this.element,ue,1!=ze);0!==ze&&(ar=ze<0?ar.slice(ar.length+ze,ar.length):ar.slice(0,ze)),xn.push(...ar)}return!Lt&&0==xn.length&&Sn.push(function vr(ot){return new j.wOt(3014,!1)}()),xn}}class hi{constructor(ue,ve,ze,lt){this._driver=ue,this.element=ve,this.startTime=ze,this._elementTimelineStylesLookup=lt,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(ve),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(ve,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(ue){const ve=1===this._keyframes.size&&this._pendingStyles.size;this.duration||ve?(this.forwardTime(this.currentTime+ue),ve&&this.snapshotCurrentStyles()):this.startTime+=ue}fork(ue,ve){return this.applyStylesToKeyframe(),new hi(this._driver,ue,ve||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(ue){this.applyStylesToKeyframe(),this.duration=ue,this._loadKeyframe()}_updateStyle(ue,ve){this._localTimelineStyles.set(ue,ve),this._globalTimelineStyles.set(ue,ve),this._styleSummary.set(ue,{time:this.currentTime,value:ve})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(ue){ue&&this._previousKeyframe.set("easing",ue);for(let[ve,ze]of this._globalTimelineStyles)this._backFill.set(ve,ze||bt.kp),this._currentKeyframe.set(ve,bt.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(ue,ve,ze,lt){ve&&this._previousKeyframe.set("easing",ve);const Lt=lt&&lt.params||{},Sn=function X(ot,ue){const ve=new Map;let ze;return ot.forEach(lt=>{if("*"===lt){var Lt;null!==(Lt=ze)&&void 0!==Lt||(ze=ue.keys());for(let Sn of ze)ve.set(Sn,bt.kp)}else for(let[Sn,xn]of lt)ve.set(Sn,xn)}),ve}(ue,this._globalTimelineStyles);for(let[Hn,ar]of Sn){const Wr=oo(ar,Lt,ze);var xn;this._pendingStyles.set(Hn,Wr),this._localTimelineStyles.has(Hn)||this._backFill.set(Hn,null!==(xn=this._globalTimelineStyles.get(Hn))&&void 0!==xn?xn:bt.kp),this._updateStyle(Hn,Wr)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((ue,ve)=>{this._currentKeyframe.set(ve,ue)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((ue,ve)=>{this._currentKeyframe.has(ve)||this._currentKeyframe.set(ve,ue)}))}snapshotCurrentStyles(){for(let[ue,ve]of this._localTimelineStyles)this._pendingStyles.set(ue,ve),this._updateStyle(ue,ve)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const ue=[];for(let ve in this._currentKeyframe)ue.push(ve);return ue}mergeTimelineCollectedStyles(ue){ue._styleSummary.forEach((ve,ze)=>{const lt=this._styleSummary.get(ze);(!lt||ve.time>lt.time)&&this._updateStyle(ze,ve.value)})}buildKeyframes(){this.applyStylesToKeyframe();const ue=new Set,ve=new Set,ze=1===this._keyframes.size&&0===this.duration;let lt=[];this._keyframes.forEach((xn,Hn)=>{const ar=new Map([...this._backFill,...xn]);ar.forEach((Wr,ai)=>{Wr===bt.FX?ue.add(ai):Wr===bt.kp&&ve.add(ai)}),ze||ar.set("offset",Hn/this.duration),lt.push(ar)});const Lt=[...ue.values()],Sn=[...ve.values()];if(ze){const xn=lt[0],Hn=new Map(xn);xn.set("offset",0),Hn.set("offset",1),lt=[xn,Hn]}return Os(this.element,lt,Lt,Sn,this.duration,this.startTime,this.easing,!1)}}class tl extends hi{constructor(ue,ve,ze,lt,Lt,Sn,xn=!1){super(ue,ve,Sn.delay),this.keyframes=ze,this.preStyleProps=lt,this.postStyleProps=Lt,this._stretchStartingKeyframe=xn,this.timings={duration:Sn.duration,delay:Sn.delay,easing:Sn.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let ue=this.keyframes,{delay:ve,duration:ze,easing:lt}=this.timings;if(this._stretchStartingKeyframe&&ve){const Lt=[],Sn=ze+ve,xn=ve/Sn,Hn=new Map(ue[0]);Hn.set("offset",0),Lt.push(Hn);const ar=new Map(ue[0]);ar.set("offset",P(xn)),Lt.push(ar);const Wr=ue.length-1;for(let ai=1;ai<=Wr;ai++){let ki=new Map(ue[ai]);const Qi=ki.get("offset");ki.set("offset",P((ve+Qi*ze)/Sn)),Lt.push(ki)}ze=Sn,ve=0,lt="",ue=Lt}return Os(this.element,ue,this.preStyleProps,this.postStyleProps,ze,ve,lt,!0)}}function P(ot,ue=3){const ve=Math.pow(10,ue-1);return Math.round(ot*ve)/ve}function se(ot,ue,ve,ze,lt,Lt,Sn,xn,Hn,ar,Wr,ai,ki){return{type:0,element:ot,triggerName:ue,isRemovalTransition:lt,fromState:ve,fromStyles:Lt,toState:ze,toStyles:Sn,timelines:xn,queriedElements:Hn,preStyleProps:ar,postStyleProps:Wr,totalTime:ai,errors:ki}}const he={};class Ie{constructor(ue,ve,ze){this._triggerName=ue,this.ast=ve,this._stateStyles=ze}match(ue,ve,ze,lt){return function nt(ot,ue,ve,ze,lt){return ot.some(Lt=>Lt(ue,ve,ze,lt))}(this.ast.matchers,ue,ve,ze,lt)}buildStyles(ue,ve,ze){let lt=this._stateStyles.get("*");return void 0!==ue&&(lt=this._stateStyles.get(null==ue?void 0:ue.toString())||lt),lt?lt.buildStyles(ve,ze):new Map}build(ue,ve,ze,lt,Lt,Sn,xn,Hn,ar,Wr){var ai;const ki=[],Qi=this.ast.options&&this.ast.options.params||he,is=this.buildStyles(ze,xn&&xn.params||he,ki),Ks=Hn&&Hn.params||he,Go=this.buildStyles(lt,Ks,ki),us=new Set,po=new Map,ia=new Map,ll="void"===lt,sa={params:At(Ks,Qi),delay:null===(ai=this.ast.options)||void 0===ai?void 0:ai.delay},fa=Wr?[]:gl(ue,ve,this.ast.animation,Lt,Sn,is,Go,sa,ar,ki);let cl=0;return fa.forEach(ul=>{cl=Math.max(ul.duration+ul.delay,cl)}),ki.length?se(ve,this._triggerName,ze,lt,ll,is,Go,[],[],po,ia,cl,ki):(fa.forEach(ul=>{const zo=ul.element,Li=or(po,zo,new Set);ul.preStyleProps.forEach(Yo=>Li.add(Yo));const Al=or(ia,zo,new Set);ul.postStyleProps.forEach(Yo=>Al.add(Yo)),zo!==ve&&us.add(zo)}),se(ve,this._triggerName,ze,lt,ll,is,Go,fa,[...us.values()],po,ia,cl))}}function At(ot,ue){const ve={...ue};return Object.entries(ot).forEach(([ze,lt])=>{null!=lt&&(ve[ze]=lt)}),ve}class Qt{constructor(ue,ve,ze){this.styles=ue,this.defaultParams=ve,this.normalizer=ze}buildStyles(ue,ve){const ze=new Map,lt=At(ue,this.defaultParams);return this.styles.styles.forEach(Lt=>{"string"!=typeof Lt&&Lt.forEach((Sn,xn)=>{Sn&&(Sn=oo(Sn,lt,ve));const Hn=this.normalizer.normalizePropertyName(xn,ve);Sn=this.normalizer.normalizeStyleValue(xn,Hn,Sn,ve),ze.set(xn,Sn)})}),ze}}class Mn{constructor(ue,ve,ze){this.name=ue,this.ast=ve,this._normalizer=ze,this.transitionFactories=[],this.states=new Map,ve.states.forEach(lt=>{this.states.set(lt.name,new Qt(lt.style,lt.options&&lt.options.params||{},ze))}),xe(this.states,"true","1"),xe(this.states,"false","0"),ve.transitions.forEach(lt=>{this.transitionFactories.push(new Ie(ue,lt,this.states))}),this.fallbackTransition=function je(ot,ue,ve){return new Ie(ot,{type:bt.If.Transition,animation:{type:bt.If.Sequence,steps:[],options:null},matchers:[(Sn,xn)=>!0],options:null,queryCount:0,depCount:0},ue)}(ue,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(ue,ve,ze,lt){return this.transitionFactories.find(Sn=>Sn.match(ue,ve,ze,lt))||null}matchStyles(ue,ve,ze){return this.fallbackTransition.buildStyles(ue,ve,ze)}}function xe(ot,ue,ve){ot.has(ue)?ot.has(ve)||ot.set(ve,ot.get(ue)):ot.has(ve)&&ot.set(ue,ot.get(ve))}const Ve=new ho;class ke{constructor(ue,ve,ze){this.bodyNode=ue,this._driver=ve,this._normalizer=ze,this._animations=new Map,this._playersById=new Map,this.players=[]}register(ue,ve){const ze=[],Lt=El(this._driver,ve,ze,[]);if(ze.length)throw function R(ot){return new j.wOt(3503,!1)}();this._animations.set(ue,Lt)}_buildPlayer(ue,ve,ze){const lt=ue.element,Lt=xt(this._normalizer,ue.keyframes,ve,ze);return this._driver.animate(lt,Lt,ue.duration,ue.delay,ue.easing,[],!0)}create(ue,ve,ze={}){const lt=[],Lt=this._animations.get(ue);let Sn;const xn=new Map;if(Lt?(Sn=gl(this._driver,ve,Lt,Va,Ne,new Map,new Map,ze,Ve,lt),Sn.forEach(Wr=>{const ai=or(xn,Wr.element,new Map);Wr.postStyleProps.forEach(ki=>ai.set(ki,null))})):(lt.push(function U(){return new j.wOt(3300,!1)}()),Sn=[]),lt.length)throw function ie(ot){return new j.wOt(3504,!1)}();xn.forEach((Wr,ai)=>{Wr.forEach((ki,Qi)=>{Wr.set(Qi,this._driver.computeStyle(ai,Qi,bt.kp))})});const ar=Ze(Sn.map(Wr=>{const ai=xn.get(Wr.element);return this._buildPlayer(Wr,new Map,ai)}));return this._playersById.set(ue,ar),ar.onDestroy(()=>this.destroy(ue)),this.players.push(ar),ar}destroy(ue){const ve=this._getPlayer(ue);ve.destroy(),this._playersById.delete(ue);const ze=this.players.indexOf(ve);ze>=0&&this.players.splice(ze,1)}_getPlayer(ue){const ve=this._playersById.get(ue);if(!ve)throw function $(ot){return new j.wOt(3301,!1)}();return ve}listen(ue,ve,ze,lt){const Lt=zn(ve,"","","");return Zt(this._getPlayer(ue),ze,Lt,lt),()=>{}}command(ue,ve,ze,lt){if("register"==ze)return void this.register(ue,lt[0]);if("create"==ze)return void this.create(ue,ve,lt[0]||{});const Lt=this._getPlayer(ue);switch(ze){case"play":Lt.play();break;case"pause":Lt.pause();break;case"reset":Lt.reset();break;case"restart":Lt.restart();break;case"finish":Lt.finish();break;case"init":Lt.init();break;case"setPosition":Lt.setPosition(parseFloat(lt[0]));break;case"destroy":this.destroy(ue)}}}const ht="ng-animate-queued",Dn="ng-animate-disabled",Si=[],_i={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ji={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},cs="__ng_removed";class yo{get params(){return this.options.params}constructor(ue,ve=""){this.namespaceId=ve;const ze=ue&&ue.hasOwnProperty("value");if(this.value=function di(ot){return null!=ot?ot:null}(ze?ue.value:ue),ze){const{value:Lt,...Sn}=ue;this.options=Sn}else this.options={};this.options.params||(this.options.params={})}absorbOptions(ue){const ve=ue.params;if(ve){const ze=this.options.params;Object.keys(ve).forEach(lt=>{null==ze[lt]&&(ze[lt]=ve[lt])})}}}const vo="void",Po=new yo(vo);class Ao{constructor(ue,ve,ze){this.id=ue,this.hostElement=ve,this._engine=ze,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+ue,pr(ve,this._hostClassName)}listen(ue,ve,ze,lt){if(!this._triggers.has(ve))throw function de(ot,ue){return new j.wOt(3302,!1)}();if(null==ze||0==ze.length)throw function Ae(ot){return new j.wOt(3303,!1)}();if(!function fo(ot){return"start"==ot||"done"==ot}(ze))throw function tt(ot,ue){return new j.wOt(3400,!1)}();const Lt=or(this._elementListeners,ue,[]),Sn={name:ve,phase:ze,callback:lt};Lt.push(Sn);const xn=or(this._engine.statesByElement,ue,new Map);return xn.has(ve)||(pr(ue,yt),pr(ue,yt+"-"+ve),xn.set(ve,Po)),()=>{this._engine.afterFlush(()=>{const Hn=Lt.indexOf(Sn);Hn>=0&&Lt.splice(Hn,1),this._triggers.has(ve)||xn.delete(ve)})}}register(ue,ve){return!this._triggers.has(ue)&&(this._triggers.set(ue,ve),!0)}_getTrigger(ue){const ve=this._triggers.get(ue);if(!ve)throw function pt(ot){return new j.wOt(3401,!1)}();return ve}trigger(ue,ve,ze,lt=!0){const Lt=this._getTrigger(ve),Sn=new Vs(this.id,ve,ue);let xn=this._engine.statesByElement.get(ue);xn||(pr(ue,yt),pr(ue,yt+"-"+ve),this._engine.statesByElement.set(ue,xn=new Map));let Hn=xn.get(ve);const ar=new yo(ze,this.id);if(!(ze&&ze.hasOwnProperty("value"))&&Hn&&ar.absorbOptions(Hn.options),xn.set(ve,ar),Hn||(Hn=Po),ar.value!==vo&&Hn.value===ar.value){if(!function zl(ot,ue){const ve=Object.keys(ot),ze=Object.keys(ue);if(ve.length!=ze.length)return!1;for(let lt=0;lt<ve.length;lt++){const Lt=ve[lt];if(!ue.hasOwnProperty(Lt)||ot[Lt]!==ue[Lt])return!1}return!0}(Hn.params,ar.params)){const is=[],Ks=Lt.matchStyles(Hn.value,Hn.params,is),Go=Lt.matchStyles(ar.value,ar.params,is);is.length?this._engine.reportError(is):this._engine.afterFlush(()=>{La(ue,Ks),Ko(ue,Go)})}return}const ki=or(this._engine.playersByElement,ue,[]);ki.forEach(is=>{is.namespaceId==this.id&&is.triggerName==ve&&is.queued&&is.destroy()});let Qi=Lt.matchTransition(Hn.value,ar.value,ue,ar.params),Xi=!1;if(!Qi){if(!lt)return;Qi=Lt.fallbackTransition,Xi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:ue,triggerName:ve,transition:Qi,fromState:Hn,toState:ar,player:Sn,isFallbackTransition:Xi}),Xi||(pr(ue,ht),Sn.onStart(()=>{Yi(ue,ht)})),Sn.onDone(()=>{let is=this.players.indexOf(Sn);is>=0&&this.players.splice(is,1);const Ks=this._engine.playersByElement.get(ue);if(Ks){let Go=Ks.indexOf(Sn);Go>=0&&Ks.splice(Go,1)}}),this.players.push(Sn),ki.push(Sn),Sn}deregister(ue){this._triggers.delete(ue),this._engine.statesByElement.forEach(ve=>ve.delete(ue)),this._elementListeners.forEach((ve,ze)=>{this._elementListeners.set(ze,ve.filter(lt=>lt.name!=ue))})}clearElementCache(ue){this._engine.statesByElement.delete(ue),this._elementListeners.delete(ue);const ve=this._engine.playersByElement.get(ue);ve&&(ve.forEach(ze=>ze.destroy()),this._engine.playersByElement.delete(ue))}_signalRemovalForInnerTriggers(ue,ve){const ze=this._engine.driver.query(ue,Bt,!0);ze.forEach(lt=>{if(lt[cs])return;const Lt=this._engine.fetchNamespacesByElement(lt);Lt.size?Lt.forEach(Sn=>Sn.triggerLeaveAnimation(lt,ve,!1,!0)):this.clearElementCache(lt)}),this._engine.afterFlushAnimationsDone(()=>ze.forEach(lt=>this.clearElementCache(lt)))}triggerLeaveAnimation(ue,ve,ze,lt){const Lt=this._engine.statesByElement.get(ue),Sn=new Map;if(Lt){const xn=[];if(Lt.forEach((Hn,ar)=>{if(Sn.set(ar,Hn.value),this._triggers.has(ar)){const Wr=this.trigger(ue,ar,vo,lt);Wr&&xn.push(Wr)}}),xn.length)return this._engine.markElementAsRemoved(this.id,ue,!0,ve,Sn),ze&&Ze(xn).onDone(()=>this._engine.processLeaveNode(ue)),!0}return!1}prepareLeaveAnimationListeners(ue){const ve=this._elementListeners.get(ue),ze=this._engine.statesByElement.get(ue);if(ve&&ze){const lt=new Set;ve.forEach(Lt=>{const Sn=Lt.name;if(lt.has(Sn))return;lt.add(Sn);const Hn=this._triggers.get(Sn).fallbackTransition,ar=ze.get(Sn)||Po,Wr=new yo(vo),ai=new Vs(this.id,Sn,ue);this._engine.totalQueuedPlayers++,this._queue.push({element:ue,triggerName:Sn,transition:Hn,fromState:ar,toState:Wr,player:ai,isFallbackTransition:!0})})}}removeNode(ue,ve){const ze=this._engine;if(ue.childElementCount&&this._signalRemovalForInnerTriggers(ue,ve),this.triggerLeaveAnimation(ue,ve,!0))return;let lt=!1;if(ze.totalAnimations){const Lt=ze.players.length?ze.playersByQueriedElement.get(ue):[];if(Lt&&Lt.length)lt=!0;else{let Sn=ue;for(;Sn=Sn.parentNode;)if(ze.statesByElement.get(Sn)){lt=!0;break}}}if(this.prepareLeaveAnimationListeners(ue),lt)ze.markElementAsRemoved(this.id,ue,!1,ve);else{const Lt=ue[cs];(!Lt||Lt===_i)&&(ze.afterFlush(()=>this.clearElementCache(ue)),ze.destroyInnerAnimations(ue),ze._onRemovalComplete(ue,ve))}}insertNode(ue,ve){pr(ue,this._hostClassName)}drainQueuedTransitions(ue){const ve=[];return this._queue.forEach(ze=>{const lt=ze.player;if(lt.destroyed)return;const Lt=ze.element,Sn=this._elementListeners.get(Lt);Sn&&Sn.forEach(xn=>{if(xn.name==ze.triggerName){const Hn=zn(Lt,ze.triggerName,ze.fromState.value,ze.toState.value);Hn._data=ue,Zt(ze.player,xn.phase,Hn,xn.callback)}}),lt.markedForDestroy?this._engine.afterFlush(()=>{lt.destroy()}):ve.push(ze)}),this._queue=[],ve.sort((ze,lt)=>{const Lt=ze.transition.ast.depCount,Sn=lt.transition.ast.depCount;return 0==Lt||0==Sn?Lt-Sn:this._engine.driver.containsElement(ze.element,lt.element)?1:-1})}destroy(ue){this.players.forEach(ve=>ve.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,ue)}}class ra{_onRemovalComplete(ue,ve){this.onRemovalComplete(ue,ve)}constructor(ue,ve,ze){this.bodyNode=ue,this.driver=ve,this._normalizer=ze,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(lt,Lt)=>{}}get queuedPlayers(){const ue=[];return this._namespaceList.forEach(ve=>{ve.players.forEach(ze=>{ze.queued&&ue.push(ze)})}),ue}createNamespace(ue,ve){const ze=new Ao(ue,ve,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,ve)?this._balanceNamespaceList(ze,ve):(this.newHostElements.set(ve,ze),this.collectEnterElement(ve)),this._namespaceLookup[ue]=ze}_balanceNamespaceList(ue,ve){const ze=this._namespaceList,lt=this.namespacesByHostElement;if(ze.length-1>=0){let Sn=!1,xn=this.driver.getParentElement(ve);for(;xn;){const Hn=lt.get(xn);if(Hn){const ar=ze.indexOf(Hn);ze.splice(ar+1,0,ue),Sn=!0;break}xn=this.driver.getParentElement(xn)}Sn||ze.unshift(ue)}else ze.push(ue);return lt.set(ve,ue),ue}register(ue,ve){let ze=this._namespaceLookup[ue];return ze||(ze=this.createNamespace(ue,ve)),ze}registerTrigger(ue,ve,ze){let lt=this._namespaceLookup[ue];lt&&lt.register(ve,ze)&&this.totalAnimations++}destroy(ue,ve){ue&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const ze=this._fetchNamespace(ue);this.namespacesByHostElement.delete(ze.hostElement);const lt=this._namespaceList.indexOf(ze);lt>=0&&this._namespaceList.splice(lt,1),ze.destroy(ve),delete this._namespaceLookup[ue]}))}_fetchNamespace(ue){return this._namespaceLookup[ue]}fetchNamespacesByElement(ue){const ve=new Set,ze=this.statesByElement.get(ue);if(ze)for(let lt of ze.values())if(lt.namespaceId){const Lt=this._fetchNamespace(lt.namespaceId);Lt&&ve.add(Lt)}return ve}trigger(ue,ve,ze,lt){if(eo(ve)){const Lt=this._fetchNamespace(ue);if(Lt)return Lt.trigger(ve,ze,lt),!0}return!1}insertNode(ue,ve,ze,lt){if(!eo(ve))return;const Lt=ve[cs];if(Lt&&Lt.setForRemoval){Lt.setForRemoval=!1,Lt.setForMove=!0;const Sn=this.collectedLeaveElements.indexOf(ve);Sn>=0&&this.collectedLeaveElements.splice(Sn,1)}if(ue){const Sn=this._fetchNamespace(ue);Sn&&Sn.insertNode(ve,ze)}lt&&this.collectEnterElement(ve)}collectEnterElement(ue){this.collectedEnterElements.push(ue)}markElementAsDisabled(ue,ve){ve?this.disabledNodes.has(ue)||(this.disabledNodes.add(ue),pr(ue,Dn)):this.disabledNodes.has(ue)&&(this.disabledNodes.delete(ue),Yi(ue,Dn))}removeNode(ue,ve,ze){if(eo(ve)){const lt=ue?this._fetchNamespace(ue):null;lt?lt.removeNode(ve,ze):this.markElementAsRemoved(ue,ve,!1,ze);const Lt=this.namespacesByHostElement.get(ve);Lt&&Lt.id!==ue&&Lt.removeNode(ve,ze)}else this._onRemovalComplete(ve,ze)}markElementAsRemoved(ue,ve,ze,lt,Lt){this.collectedLeaveElements.push(ve),ve[cs]={namespaceId:ue,setForRemoval:lt,hasAnimation:ze,removedBeforeQueried:!1,previousTriggersValues:Lt}}listen(ue,ve,ze,lt,Lt){return eo(ve)?this._fetchNamespace(ue).listen(ve,ze,lt,Lt):()=>{}}_buildInstruction(ue,ve,ze,lt,Lt){return ue.transition.build(this.driver,ue.element,ue.fromState.value,ue.toState.value,ze,lt,ue.fromState.options,ue.toState.options,ve,Lt)}destroyInnerAnimations(ue){let ve=this.driver.query(ue,Bt,!0);ve.forEach(ze=>this.destroyActiveAnimationsForElement(ze)),0!=this.playersByQueriedElement.size&&(ve=this.driver.query(ue,Ht,!0),ve.forEach(ze=>this.finishActiveQueriedAnimationOnElement(ze)))}destroyActiveAnimationsForElement(ue){const ve=this.playersByElement.get(ue);ve&&ve.forEach(ze=>{ze.queued?ze.markedForDestroy=!0:ze.destroy()})}finishActiveQueriedAnimationOnElement(ue){const ve=this.playersByQueriedElement.get(ue);ve&&ve.forEach(ze=>ze.finish())}whenRenderingDone(){return new Promise(ue=>{if(this.players.length)return Ze(this.players).onDone(()=>ue());ue()})}processLeaveNode(ue){var ve;const ze=ue[cs];if(ze&&ze.setForRemoval){if(ue[cs]=_i,ze.namespaceId){this.destroyInnerAnimations(ue);const lt=this._fetchNamespace(ze.namespaceId);lt&&lt.clearElementCache(ue)}this._onRemovalComplete(ue,ze.setForRemoval)}null!==(ve=ue.classList)&&void 0!==ve&&ve.contains(Dn)&&this.markElementAsDisabled(ue,!1),this.driver.query(ue,".ng-animate-disabled",!0).forEach(lt=>{this.markElementAsDisabled(lt,!1)})}flush(ue=-1){let ve=[];if(this.newHostElements.size&&(this.newHostElements.forEach((ze,lt)=>this._balanceNamespaceList(ze,lt)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let ze=0;ze<this.collectedEnterElements.length;ze++)pr(this.collectedEnterElements[ze],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const ze=[];try{ve=this._flushAnimations(ze,ue)}finally{for(let lt=0;lt<ze.length;lt++)ze[lt]()}}else for(let ze=0;ze<this.collectedLeaveElements.length;ze++)this.processLeaveNode(this.collectedLeaveElements[ze]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(ze=>ze()),this._flushFns=[],this._whenQuietFns.length){const ze=this._whenQuietFns;this._whenQuietFns=[],ve.length?Ze(ve).onDone(()=>{ze.forEach(lt=>lt())}):ze.forEach(lt=>lt())}}reportError(ue){throw function Kt(ot){return new j.wOt(3402,!1)}()}_flushAnimations(ue,ve){const ze=new ho,lt=[],Lt=new Map,Sn=[],xn=new Map,Hn=new Map,ar=new Map,Wr=new Set;this.disabledNodes.forEach(ci=>{Wr.add(ci);const Qr=this.driver.query(ci,".ng-animate-queued",!0);for(let mi=0;mi<Qr.length;mi++)Wr.add(Qr[mi])});const ai=this.bodyNode,ki=Array.from(this.statesByElement.keys()),Qi=Fo(ki,this.collectedEnterElements),Xi=new Map;let is=0;Qi.forEach((ci,Qr)=>{const mi=Va+is++;Xi.set(Qr,mi),ci.forEach(Ss=>pr(Ss,mi))});const Ks=[],Go=new Set,us=new Set;for(let ci=0;ci<this.collectedLeaveElements.length;ci++){const Qr=this.collectedLeaveElements[ci],mi=Qr[cs];mi&&mi.setForRemoval&&(Ks.push(Qr),Go.add(Qr),mi.hasAnimation?this.driver.query(Qr,".ng-star-inserted",!0).forEach(Ss=>Go.add(Ss)):us.add(Qr))}const po=new Map,ia=Fo(ki,Array.from(Go));ia.forEach((ci,Qr)=>{const mi=Ne+is++;po.set(Qr,mi),ci.forEach(Ss=>pr(Ss,mi))}),ue.push(()=>{Qi.forEach((ci,Qr)=>{const mi=Xi.get(Qr);ci.forEach(Ss=>Yi(Ss,mi))}),ia.forEach((ci,Qr)=>{const mi=po.get(Qr);ci.forEach(Ss=>Yi(Ss,mi))}),Ks.forEach(ci=>{this.processLeaveNode(ci)})});const ll=[],sa=[];for(let ci=this._namespaceList.length-1;ci>=0;ci--)this._namespaceList[ci].drainQueuedTransitions(ve).forEach(mi=>{const Ss=mi.player,Oo=mi.element;if(ll.push(Ss),this.collectedEnterElements.length){const oa=Oo[cs];if(oa&&oa.setForMove){if(oa.previousTriggersValues&&oa.previousTriggersValues.has(mi.triggerName)){const Dl=oa.previousTriggersValues.get(mi.triggerName),Ra=this.statesByElement.get(mi.element);if(Ra&&Ra.has(mi.triggerName)){const lu=Ra.get(mi.triggerName);lu.value=Dl,Ra.set(mi.triggerName,lu)}}return void Ss.destroy()}}const $o=!ai||!this.driver.containsElement(ai,Oo),_a=po.get(Oo),nl=Xi.get(Oo),ao=this._buildInstruction(mi,ze,nl,_a,$o);if(ao.errors&&ao.errors.length)return void sa.push(ao);if($o)return Ss.onStart(()=>La(Oo,ao.fromStyles)),Ss.onDestroy(()=>Ko(Oo,ao.toStyles)),void lt.push(Ss);if(mi.isFallbackTransition)return Ss.onStart(()=>La(Oo,ao.fromStyles)),Ss.onDestroy(()=>Ko(Oo,ao.toStyles)),void lt.push(Ss);const Uc=[];ao.timelines.forEach(oa=>{oa.stretchStartingKeyframe=!0,this.disabledNodes.has(oa.element)||Uc.push(oa)}),ao.timelines=Uc,ze.append(Oo,ao.timelines),Sn.push({instruction:ao,player:Ss,element:Oo}),ao.queriedElements.forEach(oa=>or(xn,oa,[]).push(Ss)),ao.preStyleProps.forEach((oa,Dl)=>{if(oa.size){let Ra=Hn.get(Dl);Ra||Hn.set(Dl,Ra=new Set),oa.forEach((lu,cu)=>Ra.add(cu))}}),ao.postStyleProps.forEach((oa,Dl)=>{let Ra=ar.get(Dl);Ra||ar.set(Dl,Ra=new Set),oa.forEach((lu,cu)=>Ra.add(cu))})});if(sa.length){const ci=[];sa.forEach(Qr=>{ci.push(function We(ot,ue){return new j.wOt(3505,!1)}())}),ll.forEach(Qr=>Qr.destroy()),this.reportError(ci)}const fa=new Map,cl=new Map;Sn.forEach(ci=>{const Qr=ci.element;ze.has(Qr)&&(cl.set(Qr,Qr),this._beforeAnimationBuild(ci.player.namespaceId,ci.instruction,fa))}),lt.forEach(ci=>{const Qr=ci.element;this._getPreviousPlayers(Qr,!1,ci.namespaceId,ci.triggerName,null).forEach(Ss=>{or(fa,Qr,[]).push(Ss),Ss.destroy()})});const ul=Ks.filter(ci=>yl(ci,Hn,ar)),zo=new Map;bi(zo,this.driver,us,ar,bt.kp).forEach(ci=>{yl(ci,Hn,ar)&&ul.push(ci)});const Al=new Map;Qi.forEach((ci,Qr)=>{bi(Al,this.driver,new Set(ci),Hn,bt.FX)}),ul.forEach(ci=>{var Qr,mi;const Ss=zo.get(ci),Oo=Al.get(ci);zo.set(ci,new Map([...null!==(Qr=null==Ss?void 0:Ss.entries())&&void 0!==Qr?Qr:[],...null!==(mi=null==Oo?void 0:Oo.entries())&&void 0!==mi?mi:[]]))});const Yo=[],Gf=[],Ou={};Sn.forEach(ci=>{const{element:Qr,player:mi,instruction:Ss}=ci;if(ze.has(Qr)){if(Wr.has(Qr))return mi.onDestroy(()=>Ko(Qr,Ss.toStyles)),mi.disabled=!0,mi.overrideTotalTime(Ss.totalTime),void lt.push(mi);let Oo=Ou;if(cl.size>1){let _a=Qr;const nl=[];for(;_a=_a.parentNode;){const ao=cl.get(_a);if(ao){Oo=ao;break}nl.push(_a)}nl.forEach(ao=>cl.set(ao,Oo))}const $o=this._buildAnimation(mi.namespaceId,Ss,fa,Lt,Al,zo);if(mi.setRealPlayer($o),Oo===Ou)Yo.push(mi);else{const _a=this.playersByElement.get(Oo);_a&&_a.length&&(mi.parentPlayer=Ze(_a)),lt.push(mi)}}else La(Qr,Ss.fromStyles),mi.onDestroy(()=>Ko(Qr,Ss.toStyles)),Gf.push(mi),Wr.has(Qr)&&lt.push(mi)}),Gf.forEach(ci=>{const Qr=Lt.get(ci.element);if(Qr&&Qr.length){const mi=Ze(Qr);ci.setRealPlayer(mi)}}),lt.forEach(ci=>{ci.parentPlayer?ci.syncPlayerEvents(ci.parentPlayer):ci.destroy()});for(let ci=0;ci<Ks.length;ci++){const Qr=Ks[ci],mi=Qr[cs];if(Yi(Qr,Ne),mi&&mi.hasAnimation)continue;let Ss=[];if(xn.size){let $o=xn.get(Qr);$o&&$o.length&&Ss.push(...$o);let _a=this.driver.query(Qr,Ht,!0);for(let nl=0;nl<_a.length;nl++){let ao=xn.get(_a[nl]);ao&&ao.length&&Ss.push(...ao)}}const Oo=Ss.filter($o=>!$o.destroyed);Oo.length?jc(this,Qr,Oo):this.processLeaveNode(Qr)}return Ks.length=0,Yo.forEach(ci=>{this.players.push(ci),ci.onDone(()=>{ci.destroy();const Qr=this.players.indexOf(ci);this.players.splice(Qr,1)}),ci.play()}),Yo}afterFlush(ue){this._flushFns.push(ue)}afterFlushAnimationsDone(ue){this._whenQuietFns.push(ue)}_getPreviousPlayers(ue,ve,ze,lt,Lt){let Sn=[];if(ve){const xn=this.playersByQueriedElement.get(ue);xn&&(Sn=xn)}else{const xn=this.playersByElement.get(ue);if(xn){const Hn=!Lt||Lt==vo;xn.forEach(ar=>{ar.queued||!Hn&&ar.triggerName!=lt||Sn.push(ar)})}}return(ze||lt)&&(Sn=Sn.filter(xn=>!(ze&&ze!=xn.namespaceId||lt&&lt!=xn.triggerName))),Sn}_beforeAnimationBuild(ue,ve,ze){const Lt=ve.element,Sn=ve.isRemovalTransition?void 0:ue,xn=ve.isRemovalTransition?void 0:ve.triggerName;for(const Hn of ve.timelines){const ar=Hn.element,Wr=ar!==Lt,ai=or(ze,ar,[]);this._getPreviousPlayers(ar,Wr,Sn,xn,ve.toState).forEach(Qi=>{const Xi=Qi.getRealPlayer();Xi.beforeDestroy&&Xi.beforeDestroy(),Qi.destroy(),ai.push(Qi)})}La(Lt,ve.fromStyles)}_buildAnimation(ue,ve,ze,lt,Lt,Sn){const xn=ve.triggerName,Hn=ve.element,ar=[],Wr=new Set,ai=new Set,ki=ve.timelines.map(Xi=>{const is=Xi.element;Wr.add(is);const Ks=is[cs];if(Ks&&Ks.removedBeforeQueried)return new bt.sf(Xi.duration,Xi.delay);const Go=is!==Hn,us=function Od(ot){const ue=[];return nd(ot,ue),ue}((ze.get(is)||Si).map(fa=>fa.getRealPlayer())).filter(fa=>!!fa.element&&fa.element===is),po=Lt.get(is),ia=Sn.get(is),ll=xt(this._normalizer,Xi.keyframes,po,ia),sa=this._buildPlayer(Xi,ll,us);if(Xi.subTimeline&&lt&&ai.add(is),Go){const fa=new Vs(ue,xn,is);fa.setRealPlayer(sa),ar.push(fa)}return sa});ar.forEach(Xi=>{or(this.playersByQueriedElement,Xi.element,[]).push(Xi),Xi.onDone(()=>function Qs(ot,ue,ve){let ze=ot.get(ue);if(ze){if(ze.length){const lt=ze.indexOf(ve);ze.splice(lt,1)}0==ze.length&&ot.delete(ue)}return ze}(this.playersByQueriedElement,Xi.element,Xi))}),Wr.forEach(Xi=>pr(Xi,He));const Qi=Ze(ki);return Qi.onDestroy(()=>{Wr.forEach(Xi=>Yi(Xi,He)),Ko(Hn,ve.toStyles)}),ai.forEach(Xi=>{or(lt,Xi,[]).push(Qi)}),Qi}_buildPlayer(ue,ve,ze){return ve.length>0?this.driver.animate(ue.element,ve,ue.duration,ue.delay,ue.easing,ze):new bt.sf(ue.duration,ue.delay)}}class Vs{constructor(ue,ve,ze){this.namespaceId=ue,this.triggerName=ve,this.element=ze,this._player=new bt.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(ue){this._containsRealPlayer||(this._player=ue,this._queuedCallbacks.forEach((ve,ze)=>{ve.forEach(lt=>Zt(ue,ze,void 0,lt))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(ue.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(ue){this.totalTime=ue}syncPlayerEvents(ue){const ve=this._player;ve.triggerCallback&&ue.onStart(()=>ve.triggerCallback("start")),ue.onDone(()=>this.finish()),ue.onDestroy(()=>this.destroy())}_queueEvent(ue,ve){or(this._queuedCallbacks,ue,[]).push(ve)}onDone(ue){this.queued&&this._queueEvent("done",ue),this._player.onDone(ue)}onStart(ue){this.queued&&this._queueEvent("start",ue),this._player.onStart(ue)}onDestroy(ue){this.queued&&this._queueEvent("destroy",ue),this._player.onDestroy(ue)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(ue){this.queued||this._player.setPosition(ue)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(ue){const ve=this._player;ve.triggerCallback&&ve.triggerCallback(ue)}}function eo(ot){return ot&&1===ot.nodeType}function js(ot,ue){const ve=ot.style.display;return ot.style.display=null!=ue?ue:"none",ve}function bi(ot,ue,ve,ze,lt){const Lt=[];ve.forEach(Hn=>Lt.push(js(Hn)));const Sn=[];ze.forEach((Hn,ar)=>{const Wr=new Map;Hn.forEach(ai=>{const ki=ue.computeStyle(ar,ai,lt);Wr.set(ai,ki),(!ki||0==ki.length)&&(ar[cs]=Ji,Sn.push(ar))}),ot.set(ar,Wr)});let xn=0;return ve.forEach(Hn=>js(Hn,Lt[xn++])),Sn}function Fo(ot,ue){const ve=new Map;if(ot.forEach(xn=>ve.set(xn,[])),0==ue.length)return ve;const lt=new Set(ue),Lt=new Map;function Sn(xn){if(!xn)return 1;let Hn=Lt.get(xn);if(Hn)return Hn;const ar=xn.parentNode;return Hn=ve.has(ar)?ar:lt.has(ar)?1:Sn(ar),Lt.set(xn,Hn),Hn}return ue.forEach(xn=>{const Hn=Sn(xn);1!==Hn&&ve.get(Hn).push(xn)}),ve}function pr(ot,ue){var ve;null===(ve=ot.classList)||void 0===ve||ve.add(ue)}function Yi(ot,ue){var ve;null===(ve=ot.classList)||void 0===ve||ve.remove(ue)}function jc(ot,ue,ve){Ze(ve).onDone(()=>ot.processLeaveNode(ue))}function nd(ot,ue){for(let ve=0;ve<ot.length;ve++){const ze=ot[ve];ze instanceof bt.ui?nd(ze.players,ue):ue.push(ze)}}function yl(ot,ue,ve){const ze=ve.get(ot);if(!ze)return!1;let lt=ue.get(ot);return lt?ze.forEach(Lt=>lt.add(Lt)):ue.set(ot,ze),ve.delete(ot),!0}class cc{constructor(ue,ve,ze){this._driver=ve,this._normalizer=ze,this._triggerCache={},this.onRemovalComplete=(lt,Lt)=>{},this._transitionEngine=new ra(ue.body,ve,ze),this._timelineEngine=new ke(ue.body,ve,ze),this._transitionEngine.onRemovalComplete=(lt,Lt)=>this.onRemovalComplete(lt,Lt)}registerTrigger(ue,ve,ze,lt,Lt){const Sn=ue+"-"+lt;let xn=this._triggerCache[Sn];if(!xn){const Hn=[],Wr=El(this._driver,Lt,Hn,[]);if(Hn.length)throw function T(ot,ue){return new j.wOt(3404,!1)}();xn=function Jt(ot,ue,ve){return new Mn(ot,ue,ve)}(lt,Wr,this._normalizer),this._triggerCache[Sn]=xn}this._transitionEngine.registerTrigger(ve,lt,xn)}register(ue,ve){this._transitionEngine.register(ue,ve)}destroy(ue,ve){this._transitionEngine.destroy(ue,ve)}onInsert(ue,ve,ze,lt){this._transitionEngine.insertNode(ue,ve,ze,lt)}onRemove(ue,ve,ze){this._transitionEngine.removeNode(ue,ve,ze)}disableAnimations(ue,ve){this._transitionEngine.markElementAsDisabled(ue,ve)}process(ue,ve,ze,lt){if("@"==ze.charAt(0)){const[Lt,Sn]=ii(ze);this._timelineEngine.command(Lt,ve,Sn,lt)}else this._transitionEngine.trigger(ue,ve,ze,lt)}listen(ue,ve,ze,lt,Lt){if("@"==ze.charAt(0)){const[Sn,xn]=ii(ze);return this._timelineEngine.listen(Sn,ve,xn,Lt)}return this._transitionEngine.listen(ue,ve,ze,lt,Lt)}flush(ue=-1){this._transitionEngine.flush(ue)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(ue){this._transitionEngine.afterFlushAnimationsDone(ue)}}class $a{constructor(ue,ve,ze){this._element=ue,this._startStyles=ve,this._endStyles=ze,this._state=0;let lt=$a.initialStylesByElement.get(ue);lt||$a.initialStylesByElement.set(ue,lt=new Map),this._initialStyles=lt}start(){this._state<1&&(this._startStyles&&Ko(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ko(this._element,this._initialStyles),this._endStyles&&(Ko(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&($a.initialStylesByElement.delete(this._element),this._startStyles&&(La(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(La(this._element,this._endStyles),this._endStyles=null),Ko(this._element,this._initialStyles),this._state=3)}}function vl(ot){let ue=null;return ot.forEach((ve,ze)=>{(function uc(ot){return"display"===ot||"position"===ot})(ze)&&(ue=ue||new Map,ue.set(ze,ve))}),ue}$a.initialStylesByElement=new WeakMap;class su{constructor(ue,ve,ze,lt){this.element=ue,this.keyframes=ve,this.options=ze,this._specialStyles=lt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=ze.duration,this._delay=ze.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ue=>ue()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const ue=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,ue,this.options),this._finalKeyframe=ue.length?ue[ue.length-1]:new Map;const ve=()=>this._onFinish();this.domPlayer.addEventListener("finish",ve),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",ve)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(ue){const ve=[];return ue.forEach(ze=>{ve.push(Object.fromEntries(ze))}),ve}_triggerWebAnimation(ue,ve,ze){return ue.animate(this._convertKeyframesToObject(ve),ze)}onStart(ue){this._originalOnStartFns.push(ue),this._onStartFns.push(ue)}onDone(ue){this._originalOnDoneFns.push(ue),this._onDoneFns.push(ue)}onDestroy(ue){this._onDestroyFns.push(ue)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(ue=>ue()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(ue=>ue()),this._onDestroyFns=[])}setPosition(ue){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=ue*this.time}getPosition(){var ue;return+(null!==(ue=this.domPlayer.currentTime)&&void 0!==ue?ue:0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const ue=new Map;this.hasStarted()&&this._finalKeyframe.forEach((ze,lt)=>{"offset"!==lt&&ue.set(lt,this._finished?ze:jn(this.element,lt))}),this.currentSnapshot=ue}triggerCallback(ue){const ve="start"===ue?this._onStartFns:this._onDoneFns;ve.forEach(ze=>ze()),ve.length=0}}class os{validateStyleProperty(ue){return!0}validateAnimatableStyleProperty(ue){return!0}containsElement(ue,ve){return ea(ue,ve)}getParentElement(ue){return Rs(ue)}query(ue,ve,ze){return So(ue,ve,ze)}computeStyle(ue,ve,ze){return jn(ue,ve)}animate(ue,ve,ze,lt,Lt,Sn=[]){const Hn={duration:ze,delay:lt,fill:0==lt?"both":"forwards"};Lt&&(Hn.easing=Lt);const ar=new Map,Wr=Sn.filter(Qi=>Qi instanceof su);(function fn(ot,ue){return 0===ot||0===ue})(ze,lt)&&Wr.forEach(Qi=>{Qi.currentSnapshot.forEach((Xi,is)=>ar.set(is,Xi))});let ai=function Ga(ot){return ot.length?ot[0]instanceof Map?ot:ot.map(ue=>new Map(Object.entries(ue))):[]}(ve).map(Qi=>new Map(Qi));ai=function wn(ot,ue,ve){if(ve.size&&ue.length){let ze=ue[0],lt=[];if(ve.forEach((Lt,Sn)=>{ze.has(Sn)||lt.push(Sn),ze.set(Sn,Lt)}),lt.length)for(let Lt=1;Lt<ue.length;Lt++){let Sn=ue[Lt];lt.forEach(xn=>Sn.set(xn,jn(ot,xn)))}}return ue}(ue,ai,ar);const ki=function Fc(ot,ue){let ve=null,ze=null;return Array.isArray(ue)&&ue.length?(ve=vl(ue[0]),ue.length>1&&(ze=vl(ue[ue.length-1]))):ue instanceof Map&&(ve=vl(ue)),ve||ze?new $a(ot,ve,ze):null}(ue,ai);return new su(ue,ai,Hn,ki)}}const Ml="@.disabled";class wc{constructor(ue,ve,ze,lt){this.namespaceId=ue,this.delegate=ve,this.engine=ze,this._onDestroy=lt,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(ue){var ve,ze;null===(ve=(ze=this.delegate).destroyNode)||void 0===ve||ve.call(ze,ue)}destroy(){var ue;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),null===(ue=this._onDestroy)||void 0===ue||ue.call(this)}createElement(ue,ve){return this.delegate.createElement(ue,ve)}createComment(ue){return this.delegate.createComment(ue)}createText(ue){return this.delegate.createText(ue)}appendChild(ue,ve){this.delegate.appendChild(ue,ve),this.engine.onInsert(this.namespaceId,ve,ue,!1)}insertBefore(ue,ve,ze,lt=!0){this.delegate.insertBefore(ue,ve,ze),this.engine.onInsert(this.namespaceId,ve,ue,lt)}removeChild(ue,ve,ze){this.engine.onRemove(this.namespaceId,ve,this.delegate)}selectRootElement(ue,ve){return this.delegate.selectRootElement(ue,ve)}parentNode(ue){return this.delegate.parentNode(ue)}nextSibling(ue){return this.delegate.nextSibling(ue)}setAttribute(ue,ve,ze,lt){this.delegate.setAttribute(ue,ve,ze,lt)}removeAttribute(ue,ve,ze){this.delegate.removeAttribute(ue,ve,ze)}addClass(ue,ve){this.delegate.addClass(ue,ve)}removeClass(ue,ve){this.delegate.removeClass(ue,ve)}setStyle(ue,ve,ze,lt){this.delegate.setStyle(ue,ve,ze,lt)}removeStyle(ue,ve,ze){this.delegate.removeStyle(ue,ve,ze)}setProperty(ue,ve,ze){"@"==ve.charAt(0)&&ve==Ml?this.disableAnimations(ue,!!ze):this.delegate.setProperty(ue,ve,ze)}setValue(ue,ve){this.delegate.setValue(ue,ve)}listen(ue,ve,ze){return this.delegate.listen(ue,ve,ze)}disableAnimations(ue,ve){this.engine.disableAnimations(ue,ve)}}class Ql extends wc{constructor(ue,ve,ze,lt,Lt){super(ve,ze,lt,Lt),this.factory=ue,this.namespaceId=ve}setProperty(ue,ve,ze){"@"==ve.charAt(0)?"."==ve.charAt(1)&&ve==Ml?this.disableAnimations(ue,ze=void 0===ze||!!ze):this.engine.process(this.namespaceId,ue,ve.slice(1),ze):this.delegate.setProperty(ue,ve,ze)}listen(ue,ve,ze){if("@"==ve.charAt(0)){const lt=function ou(ot){switch(ot){case"body":return document.body;case"document":return document;case"window":return window;default:return ot}}(ue);let Lt=ve.slice(1),Sn="";return"@"!=Lt.charAt(0)&&([Lt,Sn]=function As(ot){const ue=ot.indexOf(".");return[ot.substring(0,ue),ot.slice(ue+1)]}(Lt)),this.engine.listen(this.namespaceId,lt,Lt,Sn,xn=>{this.factory.scheduleListenerCallback(xn._data||-1,ze,xn)})}return this.delegate.listen(ue,ve,ze)}}class Ha{constructor(ue,ve,ze){this.delegate=ue,this.engine=ve,this._zone=ze,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,ve.onRemovalComplete=(lt,Lt)=>{const Sn=null==Lt?void 0:Lt.parentNode(lt);Sn&&Lt.removeChild(Sn,lt)}}createRenderer(ue,ve){var ze;const Lt=this.delegate.createRenderer(ue,ve);if(!ue||null==ve||null===(ze=ve.data)||void 0===ze||!ze.animation){const Wr=this._rendererCache;let ai=Wr.get(Lt);return ai||(ai=new wc("",Lt,this.engine,()=>Wr.delete(Lt)),Wr.set(Lt,ai)),ai}const Sn=ve.id,xn=ve.id+"-"+this._currentId;this._currentId++,this.engine.register(xn,ue);const Hn=Wr=>{Array.isArray(Wr)?Wr.forEach(Hn):this.engine.registerTrigger(Sn,xn,ue,Wr.name,Wr)};return ve.data.animation.forEach(Hn),new Ql(this,xn,Lt,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(ue,ve,ze){if(ue>=0&&ue<this._microtaskId)return void this._zone.run(()=>ve(ze));const lt=this._animationCallbacksBuffer;0==lt.length&&queueMicrotask(()=>{this._zone.run(()=>{lt.forEach(Lt=>{const[Sn,xn]=Lt;Sn(xn)}),this._animationCallbacksBuffer=[]})}),lt.push([ve,ze])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let ec=(()=>{var ot;class ue extends cc{constructor(ze,lt,Lt){super(ze,lt,Lt)}ngOnDestroy(){this.flush()}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)(j.KVO(C.qQ),j.KVO(qo),j.KVO(ua))},ot.\u0275prov=j.jDH({token:ot,factory:ot.\u0275fac}),ue})();const Gs=[{provide:ua,useFactory:function Ia(){return new br}},{provide:cc,useClass:ec},{provide:j._9s,useFactory:function _o(ot,ue,ve){return new Ha(ot,ue,ve)},deps:[F.B7,cc,j.SKi]}],au=[{provide:qo,useFactory:()=>new os},{provide:j.bc$,useValue:"BrowserAnimations"},...Gs],Te=[{provide:qo,useClass:ta},{provide:j.bc$,useValue:"NoopAnimations"},...Gs];let et=(()=>{var ot;class ue{static withConfig(ze){return{ngModule:ue,providers:ze.disableAnimations?Te:au}}}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot}),ot.\u0275inj=j.G2t({providers:au,imports:[F.Bb]}),ue})(),an=(()=>{var ot;class ue{}return(ot=ue).\u0275fac=function(ze){return new(ze||ot)},ot.\u0275mod=j.$C({type:ot,bootstrap:[be.ZL]}),ot.\u0275inj=j.G2t({providers:[{provide:Rt.b,useClass:rn.jM},rn.y8],imports:[F.Bb,et,l.bv.forRoot({mode:"md",innerHTMLTemplatesEnabled:!0,experimentalCloseWatcher:!0,hardwareBackButton:!0}),M,wt.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerImmediately"})]}),ue})();var St=Ge(1288);(0,j.SmG)(),F.sG().bootstrapModule(an).catch(ot=>console.log(ot)),window,typeof window>"u"?Promise.resolve():(0,St.p)().then(()=>(0,St.b)([["pwa-camera-modal",[[1,"pwa-camera-modal",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],present:[64],dismiss:[64]}]]],["pwa-action-sheet",[[1,"pwa-action-sheet",{header:[1],cancelable:[4],options:[16],open:[32]}]]],["pwa-toast",[[1,"pwa-toast",{message:[1],duration:[2],closing:[32]}]]],["pwa-camera",[[1,"pwa-camera",{facingMode:[1,"facing-mode"],handlePhoto:[16],hidePicker:[4,"hide-picker"],handleNoDeviceError:[16],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"],photo:[32],photoSrc:[32],showShutterOverlay:[32],flashIndex:[32],hasCamera:[32],rotation:[32],deviceError:[32]}]]],["pwa-camera-modal-instance",[[1,"pwa-camera-modal-instance",{facingMode:[1,"facing-mode"],hidePicker:[4,"hide-picker"],noDevicesText:[1,"no-devices-text"],noDevicesButtonText:[1,"no-devices-button-text"]},[[16,"keyup","handleBackdropKeyUp"]]]]]],undefined))},8326:(Ir,Un,Ge)=>{var F=Ge(4756);Ir.exports=function l(be,Z,M){function C(I,D){if(!Z[I]){if(!be[I]){var d=void 0;if(!D&&d)return require(I,!0);if(b)return b(I,!0);throw(D=new Error("Cannot find module '"+I+"'")).code="MODULE_NOT_FOUND",D}d=Z[I]={exports:{}},be[I][0].call(d.exports,function(f){return C(be[I][1][f]||f)},d,d.exports,l,be,Z,M)}return Z[I].exports}for(var b=void 0,w=0;w<M.length;w++)C(M[w]);return C}({1:[function(l,be,Z){"use strict";Z.byteLength=function(p){return 3*((p=d(p))[0]+(p=p[1]))/4-p},Z.toByteArray=function(f){var h,p,g,q,m=(g=d(f))[0],x=new b(3*(m+(q=g=g[1]))/4-q),E=0,S=0<g?m-4:m;for(p=0;p<S;p+=4)h=C[f.charCodeAt(p)]<<18|C[f.charCodeAt(p+1)]<<12|C[f.charCodeAt(p+2)]<<6|C[f.charCodeAt(p+3)],x[E++]=h>>16&255,x[E++]=h>>8&255,x[E++]=255&h;return 2===g&&(h=C[f.charCodeAt(p)]<<2|C[f.charCodeAt(p+1)]>>4,x[E++]=255&h),1===g&&(h=C[f.charCodeAt(p)]<<10|C[f.charCodeAt(p+1)]<<4|C[f.charCodeAt(p+2)]>>2,x[E++]=h>>8&255,x[E++]=255&h),x},Z.fromByteArray=function(f){for(var h,p=f.length,m=p%3,g=[],x=0,E=p-m;x<E;x+=16383)g.push(function(S,L,q){for(var G=[],V=L;V<q;V+=3)G.push(M[(K=(S[V]<<16&16711680)+(S[V+1]<<8&65280)+(255&S[V+2]))>>18&63]+M[K>>12&63]+M[K>>6&63]+M[63&K]);var K;return G.join("")}(f,x,E<x+16383?E:x+16383));return 1==m?g.push(M[(h=f[p-1])>>2]+M[h<<4&63]+"=="):2==m&&g.push(M[(h=(f[p-2]<<8)+f[p-1])>>10]+M[h>>4&63]+M[h<<2&63]+"="),g.join("")};for(var M=[],C=[],b=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0;I<64;++I)M[I]=w[I],C[w.charCodeAt(I)]=I;function d(f){var h=f.length;if(0<h%4)throw new Error("Invalid string. Length must be a multiple of 4");return h=(f=-1===(f=f.indexOf("="))?h:f)===h?0:4-f%4,[f,h]}C[45]=62,C[95]=63},{}],2:[function(l,be,Z){},{}],3:[function(l,be,Z){},{}],4:[function(l,be,Z){(function(d){"use strict";var C=l("base64-js"),b=l("ieee754"),w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,I=(Z.Buffer=d,Z.SlowBuffer=function(le){return+le!=le&&(le=0),d.alloc(+le)},Z.INSPECT_MAX_BYTES=50,2147483647);function D(le){if(I<le)throw new RangeError('The value "'+le+'" is invalid for option "size"');return le=new Uint8Array(le),Object.setPrototypeOf(le,d.prototype),le}function d(le,z,ye){if("number"!=typeof le)return f(le,z,ye);if("string"==typeof z)throw new TypeError('The "string" argument must be of type string. Received type number');return p(le)}function f(le,z,ye){if("string"==typeof le){var Ue=le,Je=z;if(d.isEncoding(Je="string"==typeof Je&&""!==Je?Je:"utf8"))return(Ue=(Ct=D(vt=0|x(Ue,Je))).write(Ue,Je))!==vt?Ct.slice(0,Ue):Ct;throw new TypeError("Unknown encoding: "+Je)}if(ArrayBuffer.isView(le))return m(le);if(null!=le){if(fe(le,ArrayBuffer)||le&&fe(le.buffer,ArrayBuffer)){var vt=le,Ct=ye;if((Ue=z)<0||vt.byteLength<Ue)throw new RangeError('"offset" is outside of buffer bounds');if(vt.byteLength<Ue+(Ct||0))throw new RangeError('"length" is outside of buffer bounds');return vt=void 0===Ue&&void 0===Ct?new Uint8Array(vt):void 0===Ct?new Uint8Array(vt,Ue):new Uint8Array(vt,Ue,Ct),Object.setPrototypeOf(vt,d.prototype),vt}if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(Je=le.valueOf&&le.valueOf())&&Je!==le)return d.from(Je,z,ye);var zt=d.isBuffer(_t=le)?(0!==(Wt=D(Ft=0|g(_t.length))).length&&_t.copy(Wt,0,0,Ft),Wt):void 0!==_t.length?"number"!=typeof _t.length||De(_t.length)?D(0):m(_t):"Buffer"===_t.type&&Array.isArray(_t.data)?m(_t.data):void 0;if(zt)return zt;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return d.from(le[Symbol.toPrimitive]("string"),z,ye)}var _t,Ft,Wt;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function h(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function p(le){return h(le),D(le<0?0:0|g(le))}function m(le){for(var z=le.length<0?0:0|g(le.length),ye=D(z),Ue=0;Ue<z;Ue+=1)ye[Ue]=255&le[Ue];return ye}function g(le){if(I<=le)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return 0|le}function x(le,z){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||fe(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var ye=le.length,Ue=2<arguments.length&&!0===arguments[2];if(!Ue&&0===ye)return 0;for(var Je=!1;;)switch(z){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return ge(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ye;case"hex":return ye>>>1;case"base64":return re(le).length;default:if(Je)return Ue?-1:ge(le).length;z=(""+z).toLowerCase(),Je=!0}}function E(le,z,ye){var Ue,Je=!1;if((z=void 0===z||z<0?0:z)>this.length||(ye=void 0===ye||ye>this.length?this.length:ye)<=0||(ye>>>=0)<=(z>>>=0))return"";for(le=le||"utf8";;)switch(le){case"hex":var Ct=ye,Wt=this.length;(!Ct||Ct<0||Wt<Ct)&&(Ct=Wt);for(var zt="",_t=Tt=!(Tt=z)||Tt<0?0:Tt;_t<Ct;++_t)zt+=it[this[_t]];return zt;case"utf8":case"utf-8":return V(this,z,ye);case"ascii":var mt=(Wt=z,ye),Nt="";mt=Math.min(this.length,mt);for(var kt=Wt;kt<mt;++kt)Nt+=String.fromCharCode(127&this[kt]);return Nt;case"latin1":case"binary":var Tt=z,qt=ye,mn="";qt=Math.min(this.length,qt);for(var Zn=Tt;Zn<qt;++Zn)mn+=String.fromCharCode(this[Zn]);return mn;case"base64":return An=this,Ue=ye,0===(Qn=z)&&Ue===An.length?C.fromByteArray(An):C.fromByteArray(An.slice(Qn,Ue));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var An=z,Qn=ye,Rn=this.slice(An,Qn),Er="",Bn=0;Bn<Rn.length;Bn+=2)Er+=String.fromCharCode(Rn[Bn]+256*Rn[Bn+1]);return Er;default:if(Je)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Je=!0}}function S(le,z,ye){var Ue=le[z];le[z]=le[ye],le[ye]=Ue}function L(le,z,ye,Ue,Je){if(0===le.length)return-1;if("string"==typeof ye?(Ue=ye,ye=0):2147483647<ye?ye=2147483647:ye<-2147483648&&(ye=-2147483648),(ye=(ye=De(ye=+ye)?Je?0:le.length-1:ye)<0?le.length+ye:ye)>=le.length){if(Je)return-1;ye=le.length-1}else if(ye<0){if(!Je)return-1;ye=0}if("string"==typeof z&&(z=d.from(z,Ue)),d.isBuffer(z))return 0===z.length?-1:q(le,z,ye,Ue,Je);if("number"==typeof z)return z&=255,"function"==typeof Uint8Array.prototype.indexOf?(Je?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(le,z,ye):q(le,[z],ye,Ue,Je);throw new TypeError("val must be string, number or Buffer")}function q(le,z,ye,Ue,Je){var vt=1,Ct=le.length,zt=z.length;if(void 0!==Ue&&("ucs2"===(Ue=String(Ue).toLowerCase())||"ucs-2"===Ue||"utf16le"===Ue||"utf-16le"===Ue)){if(le.length<2||z.length<2)return-1;Ct/=vt=2,zt/=2,ye/=2}function _t(kt,Ut){return 1===vt?kt[Ut]:kt.readUInt16BE(Ut*vt)}if(Je)for(var Ft=-1,Wt=ye;Wt<Ct;Wt++)if(_t(le,Wt)===_t(z,-1===Ft?0:Wt-Ft)){if(Wt-(Ft=-1===Ft?Wt:Ft)+1===zt)return Ft*vt}else-1!==Ft&&(Wt-=Wt-Ft),Ft=-1;else for(Wt=ye=Ct<ye+zt?Ct-zt:ye;0<=Wt;Wt--){for(var mt=!0,Nt=0;Nt<zt;Nt++)if(_t(le,Wt+Nt)!==_t(z,Nt)){mt=!1;break}if(mt)return Wt}return-1}function J(le,z,ye,Ue){return Q(function(Je){for(var vt=[],Ct=0;Ct<Je.length;++Ct)vt.push(255&Je.charCodeAt(Ct));return vt}(z),le,ye,Ue)}function G(le,z,ye,Ue){return Q(function(Je,vt){for(var Ct,zt,_t=[],Ft=0;Ft<Je.length&&!((vt-=2)<0);++Ft)Ct=(zt=Je.charCodeAt(Ft))>>8,_t.push(zt%=256),_t.push(Ct);return _t}(z,le.length-ye),le,ye,Ue)}function V(le,z,ye){ye=Math.min(le.length,ye);for(var Ue=[],Je=z;Je<ye;){var vt,Ct,zt,_t,Ft=le[Je],Wt=null,mt=239<Ft?4:223<Ft?3:191<Ft?2:1;if(Je+mt<=ye)switch(mt){case 1:Ft<128&&(Wt=Ft);break;case 2:128==(192&(vt=le[Je+1]))&&127<(_t=(31&Ft)<<6|63&vt)&&(Wt=_t);break;case 3:Ct=le[Je+2],128==(192&(vt=le[Je+1]))&&128==(192&Ct)&&2047<(_t=(15&Ft)<<12|(63&vt)<<6|63&Ct)&&(_t<55296||57343<_t)&&(Wt=_t);break;case 4:Ct=le[Je+2],zt=le[Je+3],128==(192&(vt=le[Je+1]))&&128==(192&Ct)&&128==(192&zt)&&65535<(_t=(15&Ft)<<18|(63&vt)<<12|(63&Ct)<<6|63&zt)&&_t<1114112&&(Wt=_t)}null===Wt?(Wt=65533,mt=1):65535<Wt&&(Ue.push((Wt-=65536)>>>10&1023|55296),Wt=56320|1023&Wt),Ue.push(Wt),Je+=mt}var Nt=Ue,kt=Nt.length;if(kt<=K)return String.fromCharCode.apply(String,Nt);for(var Ut="",Tt=0;Tt<kt;)Ut+=String.fromCharCode.apply(String,Nt.slice(Tt,Tt+=K));return Ut}Z.kMaxLength=I,(d.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(le,z),42===le.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=f,Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(le,z,ye){return h(le),le<=0||void 0===z?D(le):"string"==typeof ye?D(le).fill(z,ye):D(le).fill(z)},d.allocUnsafe=p,d.allocUnsafeSlow=p,d.isBuffer=function(le){return null!=le&&!0===le._isBuffer&&le!==d.prototype},d.compare=function(le,z){if(fe(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),fe(z,Uint8Array)&&(z=d.from(z,z.offset,z.byteLength)),!d.isBuffer(le)||!d.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===z)return 0;for(var ye=le.length,Ue=z.length,Je=0,vt=Math.min(ye,Ue);Je<vt;++Je)if(le[Je]!==z[Je]){ye=le[Je],Ue=z[Je];break}return ye<Ue?-1:Ue<ye?1:0},d.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(le,z){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(0===le.length)return d.alloc(0);if(void 0===z)for(Je=z=0;Je<le.length;++Je)z+=le[Je].length;for(var ye=d.allocUnsafe(z),Ue=0,Je=0;Je<le.length;++Je){var vt=le[Je];if(fe(vt,Uint8Array)&&(vt=d.from(vt)),!d.isBuffer(vt))throw new TypeError('"list" argument must be an Array of Buffers');vt.copy(ye,Ue),Ue+=vt.length}return ye},d.byteLength=x,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<le;z+=2)S(this,z,z+1);return this},d.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<le;z+=4)S(this,z,z+3),S(this,z+1,z+2);return this},d.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<le;z+=8)S(this,z,z+7),S(this,z+1,z+6),S(this,z+2,z+5),S(this,z+3,z+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var le=this.length;return 0===le?"":0===arguments.length?V(this,0,le):E.apply(this,arguments)},d.prototype.equals=function(le){if(d.isBuffer(le))return this===le||0===d.compare(this,le);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var z="",le=Z.INSPECT_MAX_BYTES;return z=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(z+=" ... "),"<Buffer "+z+">"},w&&(d.prototype[w]=d.prototype.inspect),d.prototype.compare=function(le,z,ye,Ue,Je){if(fe(le,Uint8Array)&&(le=d.from(le,le.offset,le.byteLength)),!d.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof le);if(void 0===ye&&(ye=le?le.length:0),void 0===Ue&&(Ue=0),void 0===Je&&(Je=this.length),(z=void 0===z?0:z)<0||ye>le.length||Ue<0||Je>this.length)throw new RangeError("out of range index");if(Je<=Ue&&ye<=z)return 0;if(Je<=Ue)return-1;if(ye<=z)return 1;if(this===le)return 0;for(var vt=(Je>>>=0)-(Ue>>>=0),Ct=(ye>>>=0)-(z>>>=0),zt=Math.min(vt,Ct),_t=this.slice(Ue,Je),Ft=le.slice(z,ye),Wt=0;Wt<zt;++Wt)if(_t[Wt]!==Ft[Wt]){vt=_t[Wt],Ct=Ft[Wt];break}return vt<Ct?-1:Ct<vt?1:0},d.prototype.includes=function(le,z,ye){return-1!==this.indexOf(le,z,ye)},d.prototype.indexOf=function(le,z,ye){return L(this,le,z,ye,!0)},d.prototype.lastIndexOf=function(le,z,ye){return L(this,le,z,ye,!1)},d.prototype.write=function(le,z,ye,Ue){if(void 0===z)Ue="utf8",ye=this.length,z=0;else if(void 0===ye&&"string"==typeof z)Ue=z,ye=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(ye)?(ye>>>=0,void 0===Ue&&(Ue="utf8")):(Ue=ye,ye=void 0)}var Je=this.length-z;if((void 0===ye||Je<ye)&&(ye=Je),0<le.length&&(ye<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ue=Ue||"utf8";for(var vt,Ct,zt,_t=!1;;)switch(Ue){case"hex":var Wt=le,mt=z,Nt=ye,kt=(mt=Number(mt)||0,this.length-mt);(!Nt||kt<(Nt=Number(Nt)))&&(Nt=kt),(kt=Wt.length)/2<Nt&&(Nt=kt/2);for(var Ut=0;Ut<Nt;++Ut){var Tt=parseInt(Wt.substr(2*Ut,2),16);if(De(Tt))return Ut;this[mt+Ut]=Tt}return Ut;case"utf8":case"utf-8":return zt=ye,Q(ge(le,(Ct=this).length-(kt=z)),Ct,kt,zt);case"ascii":case"latin1":case"binary":return J(this,le,z,ye);case"base64":return Ct=this,zt=z,vt=ye,Q(re(le),Ct,zt,vt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,le,z,ye);default:if(_t)throw new TypeError("Unknown encoding: "+Ue);Ue=(""+Ue).toLowerCase(),_t=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;function H(le,z,ye){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(ye<le+z)throw new RangeError("Trying to access beyond buffer length")}function te(le,z,ye,Ue,Je,vt){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Je<z||z<vt)throw new RangeError('"value" argument is out of bounds');if(ye+Ue>le.length)throw new RangeError("Index out of range")}function Y(le,z,ye,Ue){if(ye+Ue>le.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function we(le,z,ye,Ue,Je){return z=+z,ye>>>=0,Je||Y(le,0,ye,4),b.write(le,z,ye,Ue,23,4),ye+4}function Se(le,z,ye,Ue,Je){return z=+z,ye>>>=0,Je||Y(le,0,ye,8),b.write(le,z,ye,Ue,52,8),ye+8}d.prototype.slice=function(le,z){var ye=this.length;return(le=~~le)<0?(le+=ye)<0&&(le=0):ye<le&&(le=ye),(z=void 0===z?ye:~~z)<0?(z+=ye)<0&&(z=0):ye<z&&(z=ye),z<le&&(z=le),ye=this.subarray(le,z),Object.setPrototypeOf(ye,d.prototype),ye},d.prototype.readUIntLE=function(le,z,ye){le>>>=0,z>>>=0,ye||H(le,z,this.length);for(var Ue=this[le],Je=1,vt=0;++vt<z&&(Je*=256);)Ue+=this[le+vt]*Je;return Ue},d.prototype.readUIntBE=function(le,z,ye){le>>>=0,z>>>=0,ye||H(le,z,this.length);for(var Ue=this[le+--z],Je=1;0<z&&(Je*=256);)Ue+=this[le+--z]*Je;return Ue},d.prototype.readUInt8=function(le,z){return le>>>=0,z||H(le,1,this.length),this[le]},d.prototype.readUInt16LE=function(le,z){return le>>>=0,z||H(le,2,this.length),this[le]|this[le+1]<<8},d.prototype.readUInt16BE=function(le,z){return le>>>=0,z||H(le,2,this.length),this[le]<<8|this[le+1]},d.prototype.readUInt32LE=function(le,z){return le>>>=0,z||H(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},d.prototype.readUInt32BE=function(le,z){return le>>>=0,z||H(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},d.prototype.readIntLE=function(le,z,ye){le>>>=0,z>>>=0,ye||H(le,z,this.length);for(var Ue=this[le],Je=1,vt=0;++vt<z&&(Je*=256);)Ue+=this[le+vt]*Je;return(Je*=128)<=Ue&&(Ue-=Math.pow(2,8*z)),Ue},d.prototype.readIntBE=function(le,z,ye){le>>>=0,z>>>=0,ye||H(le,z,this.length);for(var Ue=z,Je=1,vt=this[le+--Ue];0<Ue&&(Je*=256);)vt+=this[le+--Ue]*Je;return(Je*=128)<=vt&&(vt-=Math.pow(2,8*z)),vt},d.prototype.readInt8=function(le,z){return le>>>=0,z||H(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},d.prototype.readInt16LE=function(le,z){return le>>>=0,z||H(le,2,this.length),32768&(z=this[le]|this[le+1]<<8)?4294901760|z:z},d.prototype.readInt16BE=function(le,z){return le>>>=0,z||H(le,2,this.length),32768&(z=this[le+1]|this[le]<<8)?4294901760|z:z},d.prototype.readInt32LE=function(le,z){return le>>>=0,z||H(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},d.prototype.readInt32BE=function(le,z){return le>>>=0,z||H(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},d.prototype.readFloatLE=function(le,z){return le>>>=0,z||H(le,4,this.length),b.read(this,le,!0,23,4)},d.prototype.readFloatBE=function(le,z){return le>>>=0,z||H(le,4,this.length),b.read(this,le,!1,23,4)},d.prototype.readDoubleLE=function(le,z){return le>>>=0,z||H(le,8,this.length),b.read(this,le,!0,52,8)},d.prototype.readDoubleBE=function(le,z){return le>>>=0,z||H(le,8,this.length),b.read(this,le,!1,52,8)},d.prototype.writeUIntLE=function(le,z,ye,Ue){le=+le,z>>>=0,ye>>>=0,Ue||te(this,le,z,ye,Math.pow(2,8*ye)-1,0);var Je=1,vt=0;for(this[z]=255&le;++vt<ye&&(Je*=256);)this[z+vt]=le/Je&255;return z+ye},d.prototype.writeUIntBE=function(le,z,ye,Ue){le=+le,z>>>=0,ye>>>=0,Ue||te(this,le,z,ye,Math.pow(2,8*ye)-1,0);var Je=ye-1,vt=1;for(this[z+Je]=255&le;0<=--Je&&(vt*=256);)this[z+Je]=le/vt&255;return z+ye},d.prototype.writeUInt8=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,1,255,0),this[z]=255&le,z+1},d.prototype.writeUInt16LE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,2,65535,0),this[z]=255&le,this[z+1]=le>>>8,z+2},d.prototype.writeUInt16BE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,2,65535,0),this[z]=le>>>8,this[z+1]=255&le,z+2},d.prototype.writeUInt32LE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,4,4294967295,0),this[z+3]=le>>>24,this[z+2]=le>>>16,this[z+1]=le>>>8,this[z]=255&le,z+4},d.prototype.writeUInt32BE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,4,4294967295,0),this[z]=le>>>24,this[z+1]=le>>>16,this[z+2]=le>>>8,this[z+3]=255&le,z+4},d.prototype.writeIntLE=function(le,z,ye,Ue){le=+le,z>>>=0,Ue||te(this,le,z,ye,(Ue=Math.pow(2,8*ye-1))-1,-Ue);var Je=0,vt=1,Ct=0;for(this[z]=255&le;++Je<ye&&(vt*=256);)le<0&&0===Ct&&0!==this[z+Je-1]&&(Ct=1),this[z+Je]=(le/vt|0)-Ct&255;return z+ye},d.prototype.writeIntBE=function(le,z,ye,Ue){le=+le,z>>>=0,Ue||te(this,le,z,ye,(Ue=Math.pow(2,8*ye-1))-1,-Ue);var Je=ye-1,vt=1,Ct=0;for(this[z+Je]=255&le;0<=--Je&&(vt*=256);)le<0&&0===Ct&&0!==this[z+Je+1]&&(Ct=1),this[z+Je]=(le/vt|0)-Ct&255;return z+ye},d.prototype.writeInt8=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,1,127,-128),this[z]=255&(le=le<0?255+le+1:le),z+1},d.prototype.writeInt16LE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,2,32767,-32768),this[z]=255&le,this[z+1]=le>>>8,z+2},d.prototype.writeInt16BE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,2,32767,-32768),this[z]=le>>>8,this[z+1]=255&le,z+2},d.prototype.writeInt32LE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,4,2147483647,-2147483648),this[z]=255&le,this[z+1]=le>>>8,this[z+2]=le>>>16,this[z+3]=le>>>24,z+4},d.prototype.writeInt32BE=function(le,z,ye){return le=+le,z>>>=0,ye||te(this,le,z,4,2147483647,-2147483648),this[z]=(le=le<0?4294967295+le+1:le)>>>24,this[z+1]=le>>>16,this[z+2]=le>>>8,this[z+3]=255&le,z+4},d.prototype.writeFloatLE=function(le,z,ye){return we(this,le,z,!0,ye)},d.prototype.writeFloatBE=function(le,z,ye){return we(this,le,z,!1,ye)},d.prototype.writeDoubleLE=function(le,z,ye){return Se(this,le,z,!0,ye)},d.prototype.writeDoubleBE=function(le,z,ye){return Se(this,le,z,!1,ye)},d.prototype.copy=function(le,z,ye,Ue){if(!d.isBuffer(le))throw new TypeError("argument should be a Buffer");if(ye=ye||0,Ue||0===Ue||(Ue=this.length),z>=le.length&&(z=le.length),(Ue=0<Ue&&Ue<ye?ye:Ue)===ye||0===le.length||0===this.length)return 0;if((z=z||0)<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Ue<0)throw new RangeError("sourceEnd out of bounds");Ue>this.length&&(Ue=this.length);var Je=(Ue=le.length-z<Ue-ye?le.length-z+ye:Ue)-ye;if(this===le&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(z,ye,Ue);else if(this===le&&ye<z&&z<Ue)for(var vt=Je-1;0<=vt;--vt)le[vt+z]=this[vt+ye];else Uint8Array.prototype.set.call(le,this.subarray(ye,Ue),z);return Je},d.prototype.fill=function(le,z,ye,Ue){if("string"==typeof le){if("string"==typeof z?(Ue=z,z=0,ye=this.length):"string"==typeof ye&&(Ue=ye,ye=this.length),void 0!==Ue&&"string"!=typeof Ue)throw new TypeError("encoding must be a string");if("string"==typeof Ue&&!d.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);var Je;1===le.length&&(Je=le.charCodeAt(0),("utf8"===Ue&&Je<128||"latin1"===Ue)&&(le=Je))}else"number"==typeof le?le&=255:"boolean"==typeof le&&(le=Number(le));if(z<0||this.length<z||this.length<ye)throw new RangeError("Out of range index");var vt;if(!(ye<=z))if(z>>>=0,ye=void 0===ye?this.length:ye>>>0,"number"==typeof(le=le||0))for(vt=z;vt<ye;++vt)this[vt]=le;else{var Ct=d.isBuffer(le)?le:d.from(le,Ue),zt=Ct.length;if(0===zt)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(vt=0;vt<ye-z;++vt)this[vt+z]=Ct[vt%zt]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function ge(le,z){z=z||1/0;for(var ye,Ue=le.length,Je=null,vt=[],Ct=0;Ct<Ue;++Ct){if(55295<(ye=le.charCodeAt(Ct))&&ye<57344){if(!Je){if(56319<ye){-1<(z-=3)&&vt.push(239,191,189);continue}if(Ct+1===Ue){-1<(z-=3)&&vt.push(239,191,189);continue}Je=ye;continue}if(ye<56320){-1<(z-=3)&&vt.push(239,191,189),Je=ye;continue}ye=65536+(Je-55296<<10|ye-56320)}else Je&&-1<(z-=3)&&vt.push(239,191,189);if(Je=null,ye<128){if(--z<0)break;vt.push(ye)}else if(ye<2048){if((z-=2)<0)break;vt.push(ye>>6|192,63&ye|128)}else if(ye<65536){if((z-=3)<0)break;vt.push(ye>>12|224,ye>>6&63|128,63&ye|128)}else{if(!(ye<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;vt.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,63&ye|128)}}return vt}function re(le){return C.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(le))}function Q(le,z,ye,Ue){for(var Je=0;Je<Ue&&!(Je+ye>=z.length||Je>=le.length);++Je)z[Je+ye]=le[Je];return Je}function fe(le,z){return le instanceof z||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===z.name}function De(le){return le!=le}var it=function(){for(var le="0123456789abcdef",z=new Array(256),ye=0;ye<16;++ye)for(var Ue=16*ye,Je=0;Je<16;++Je)z[Ue+Je]=le[ye]+le[Je];return z}()}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(l,be,Z){be.exports=function(M){if("function"!=typeof M)throw TypeError(String(M)+" is not a function");return M}},{}],6:[function(l,be,Z){var M=l("../internals/is-object");be.exports=function(C){if(M(C)||null===C)return C;throw TypeError("Can't set "+String(C)+" as a prototype")}},{"../internals/is-object":75}],7:[function(b,be,Z){var M=b("../internals/well-known-symbol"),C=b("../internals/object-create"),w=(b=b("../internals/object-define-property"),M("unscopables")),I=Array.prototype;null==I[w]&&b.f(I,w,{configurable:!0,value:C(null)}),be.exports=function(D){I[w][D]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(l,be,Z){"use strict";var M=l("../internals/string-multibyte").charAt;be.exports=function(C,b,w){return b+(w?M(C,b).length:1)}},{"../internals/string-multibyte":125}],9:[function(l,be,Z){be.exports=function(M,C,b){if(M instanceof C)return M;throw TypeError("Incorrect "+(b?b+" ":"")+"invocation")}},{}],10:[function(l,be,Z){var M=l("../internals/is-object");be.exports=function(C){if(M(C))return C;throw TypeError(String(C)+" is not an object")}},{"../internals/is-object":75}],11:[function(l,be,Z){be.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(Y,be,Z){"use strict";function M(Se){return D(Se)&&d(we,f(Se))}var C,b=Y("../internals/array-buffer-native"),w=Y("../internals/descriptors"),I=Y("../internals/global"),D=Y("../internals/is-object"),d=Y("../internals/has"),f=Y("../internals/classof"),h=Y("../internals/create-non-enumerable-property"),p=Y("../internals/redefine"),m=Y("../internals/object-define-property").f,g=Y("../internals/object-get-prototype-of"),x=Y("../internals/object-set-prototype-of"),K=Y("../internals/well-known-symbol"),E=(Y=Y("../internals/uid"),I.Int8Array),S=E&&E.prototype,L=(L=I.Uint8ClampedArray)&&L.prototype,q=E&&g(E),J=S&&g(S),G=Object.prototype,V=G.isPrototypeOf,H=(K=K("toStringTag"),Y("TYPED_ARRAY_TAG")),te=b&&!!x&&"Opera"!==f(I.opera),we=(Y=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(C in we)I[C]||(te=!1);if((!te||"function"!=typeof q||q===Function.prototype)&&(q=function(){throw TypeError("Incorrect invocation")},te))for(C in we)I[C]&&x(I[C],q);if((!te||!J||J===G)&&(J=q.prototype,te))for(C in we)I[C]&&x(I[C].prototype,J);if(te&&g(L)!==J&&x(L,J),w&&!d(J,K))for(C in Y=!0,m(J,K,{get:function(){return D(this)?this[H]:void 0}}),we)I[C]&&h(I[C],H,C);be.exports={NATIVE_ARRAY_BUFFER_VIEWS:te,TYPED_ARRAY_TAG:Y&&H,aTypedArray:function(Se){if(M(Se))return Se;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Se){if(x){if(V.call(q,Se))return Se}else for(var oe in we)if(d(we,C)&&(oe=I[oe])&&(Se===oe||V.call(oe,Se)))return Se;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Se,oe,ge){if(w){if(ge)for(var re in we)(re=I[re])&&d(re.prototype,Se)&&delete re.prototype[Se];J[Se]&&!ge||p(J,Se,!ge&&te&&S[Se]||oe)}},exportTypedArrayStaticMethod:function(Se,oe,ge){var re,Q;if(w){if(x){if(ge)for(re in we)(Q=I[re])&&d(Q,Se)&&delete Q[Se];if(q[Se]&&!ge)return;try{return p(q,Se,!ge&&te&&E[Se]||oe)}catch{}}for(re in we)!(Q=I[re])||Q[Se]&&!ge||p(Q,Se,oe)}},isView:function(Se){return"DataView"===(Se=f(Se))||d(we,Se)},isTypedArray:M,TypedArray:q,TypedArrayPrototype:J}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(ye,be,Z){"use strict";function M(mt){return[255&mt]}function C(mt){return[255&mt,mt>>8&255]}function b(mt){return[255&mt,mt>>8&255,mt>>16&255,mt>>24&255]}function w(mt){return mt[3]<<24|mt[2]<<16|mt[1]<<8|mt[0]}function I(mt){return vt(mt,23,4)}function D(mt){return vt(mt,52,8)}function d(mt,Nt){Y(mt[fe],Nt,{get:function(){return oe(this)[Nt]}})}function f(mn,Nt,qt,Ut){if((qt=G(qt))+Nt>(mn=oe(mn)).byteLength)throw Je(De);return mn=oe(mn.buffer).bytes.slice(qt+=mn.byteOffset,qt+Nt),Ut?mn:mn.reverse()}function h(mt,Nt,kt,Ut,Tt,qt){if((kt=G(kt))+Nt>(mt=oe(mt)).byteLength)throw Je(De);for(var mn=oe(mt.buffer).bytes,Zn=kt+mt.byteOffset,An=Ut(+Tt),Qn=0;Qn<Nt;Qn++)mn[Zn+Qn]=An[qt?Qn:Nt-Qn-1]}var p=ye("../internals/global"),m=ye("../internals/descriptors"),g=ye("../internals/array-buffer-native"),x=ye("../internals/create-non-enumerable-property"),E=ye("../internals/redefine-all"),S=ye("../internals/fails"),L=ye("../internals/an-instance"),q=ye("../internals/to-integer"),J=ye("../internals/to-length"),G=ye("../internals/to-index"),V=ye("../internals/ieee754"),K=ye("../internals/object-get-prototype-of"),H=ye("../internals/object-set-prototype-of"),te=ye("../internals/object-get-own-property-names").f,Y=ye("../internals/object-define-property").f,we=ye("../internals/array-fill"),Se=ye("../internals/set-to-string-tag"),oe=(ye=ye("../internals/internal-state")).get,ge=ye.set,re="ArrayBuffer",Q="DataView",fe="prototype",De="Wrong index",it=p[re],le=it,z=p[Q],Ue=(ye=z&&z[fe],Object.prototype),Je=p.RangeError,vt=V.pack,Ct=V.unpack;if(g){if(!S(function(){it(1)})||!S(function(){new it(-1)})||S(function(){return new it,new it(1.5),new it(NaN),it.name!=re})){p=(le=function(kt){return L(this,le),new it(G(kt))})[fe]=it[fe];for(var zt,_t=te(it),Ft=0;_t.length>Ft;)(zt=_t[Ft++])in le||x(le,zt,it[zt]);p.constructor=le}H&&K(ye)!==Ue&&H(ye,Ue),V=new z(new le(2));var Wt=ye.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||E(ye,{setInt8:function(Nt,kt){Wt.call(this,Nt,kt<<24>>24)},setUint8:function(Nt,kt){Wt.call(this,Nt,kt<<24>>24)}},{unsafe:!0})}else le=function(mt){L(this,le,re),mt=G(mt),ge(this,{bytes:we.call(new Array(mt),0),byteLength:mt}),m||(this.byteLength=mt)},z=function(mt,Tt,kt){L(this,z,Q),L(mt,le,Q);var Ut=oe(mt).byteLength;if((Tt=q(Tt))<0||Ut<Tt)throw Je("Wrong offset");if(Ut<Tt+(kt=void 0===kt?Ut-Tt:J(kt)))throw Je("Wrong length");ge(this,{buffer:mt,byteLength:kt,byteOffset:Tt}),m||(this.buffer=mt,this.byteLength=kt,this.byteOffset=Tt)},m&&(d(le,"byteLength"),d(z,"buffer"),d(z,"byteLength"),d(z,"byteOffset")),E(z[fe],{getInt8:function(mt){return f(this,1,mt)[0]<<24>>24},getUint8:function(mt){return f(this,1,mt)[0]},getInt16:function(mt){return((mt=f(this,2,mt,1<arguments.length?arguments[1]:void 0))[1]<<8|mt[0])<<16>>16},getUint16:function(mt){return(mt=f(this,2,mt,1<arguments.length?arguments[1]:void 0))[1]<<8|mt[0]},getInt32:function(mt){return w(f(this,4,mt,1<arguments.length?arguments[1]:void 0))},getUint32:function(mt){return w(f(this,4,mt,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(mt){return Ct(f(this,4,mt,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(mt){return Ct(f(this,8,mt,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(mt,Nt){h(this,1,mt,M,Nt)},setUint8:function(mt,Nt){h(this,1,mt,M,Nt)},setInt16:function(mt,Nt){h(this,2,mt,C,Nt,2<arguments.length?arguments[2]:void 0)},setUint16:function(mt,Nt){h(this,2,mt,C,Nt,2<arguments.length?arguments[2]:void 0)},setInt32:function(mt,Nt){h(this,4,mt,b,Nt,2<arguments.length?arguments[2]:void 0)},setUint32:function(mt,Nt){h(this,4,mt,b,Nt,2<arguments.length?arguments[2]:void 0)},setFloat32:function(mt,Nt){h(this,4,mt,I,Nt,2<arguments.length?arguments[2]:void 0)},setFloat64:function(mt,Nt){h(this,8,mt,D,Nt,2<arguments.length?arguments[2]:void 0)}});Se(le,re),Se(z,Q),be.exports={ArrayBuffer:le,DataView:z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(l,be,Z){"use strict";var M=l("../internals/to-object"),C=l("../internals/to-absolute-index"),b=l("../internals/to-length"),w=Math.min;be.exports=[].copyWithin||function(m,D){var d=M(this),f=b(d.length),h=C(m,f),p=C(D,f),g=w((void 0===(m=2<arguments.length?arguments[2]:void 0)?f:C(m,f))-p,f-h),x=1;for(p<h&&h<p+g&&(x=-1,p+=g-1,h+=g-1);0<g--;)p in d?d[h]=d[p]:delete d[h],h+=x,p+=x;return d}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(l,be,Z){"use strict";var M=l("../internals/to-object"),C=l("../internals/to-absolute-index"),b=l("../internals/to-length");be.exports=function(w){for(var f,I=M(this),D=b(I.length),d=C(1<(f=arguments.length)?arguments[1]:void 0,D),h=void 0===(f=2<f?arguments[2]:void 0)?D:C(f,D);d<h;)I[d++]=w;return I}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(b,be,Z){"use strict";var M=b("../internals/array-iteration").forEach,C=b("../internals/array-method-is-strict");b=b("../internals/array-method-uses-to-length"),C=C("forEach"),b=b("forEach"),be.exports=C&&b?[].forEach:function(w){return M(this,w,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(l,be,Z){"use strict";var M=l("../internals/function-bind-context"),C=l("../internals/to-object"),b=l("../internals/call-with-safe-iteration-closing"),w=l("../internals/is-array-iterator-method"),I=l("../internals/to-length"),D=l("../internals/create-property"),d=l("../internals/get-iterator-method");be.exports=function(L){var h,p,m,g,x,E,S=C(L),q=(L="function"==typeof this?this:Array,arguments.length),J=1<q?arguments[1]:void 0,G=void 0!==J,V=d(S),K=0;if(G&&(J=M(J,2<q?arguments[2]:void 0,2)),null==V||L==Array&&w(V))for(p=new L(h=I(S.length));K<h;K++)E=G?J(S[K],K):S[K],D(p,K,E);else for(x=(g=V.call(S)).next,p=new L;!(m=x.call(g)).done;K++)E=G?b(g,J,[m.value,K],!0):m.value,D(p,K,E);return p.length=K,p}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(l,be,Z){function M(I){return function(D,d,f){var h,p=C(D),m=b(p.length),g=w(f,m);if(I&&d!=d){for(;g<m;)if((h=p[g++])!=h)return!0}else for(;g<m;g++)if((I||g in p)&&p[g]===d)return I||g||0;return!I&&-1}}var C=l("../internals/to-indexed-object"),b=l("../internals/to-length"),w=l("../internals/to-absolute-index");be.exports={includes:M(!0),indexOf:M(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(l,be,Z){function M(f){var h=1==f,p=2==f,m=3==f,g=4==f,x=6==f,E=5==f||x;return function(S,L,q,J){for(var G,V,K=w(S),H=b(K),te=C(L,q,3),Y=I(H.length),we=0,Se=(L=J||D,h?L(S,Y):p?L(S,0):void 0);we<Y;we++)if((E||we in H)&&(V=te(G=H[we],we,K),f))if(h)Se[we]=V;else if(V)switch(f){case 3:return!0;case 5:return G;case 6:return we;case 2:d.call(Se,G)}else if(g)return!1;return x?-1:m||g?g:Se}}var C=l("../internals/function-bind-context"),b=l("../internals/indexed-object"),w=l("../internals/to-object"),I=l("../internals/to-length"),D=l("../internals/array-species-create"),d=[].push;be.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(f,be,Z){"use strict";var M=f("../internals/to-indexed-object"),C=f("../internals/to-integer"),b=f("../internals/to-length"),d=f("../internals/array-method-is-strict"),w=(f=f("../internals/array-method-uses-to-length"),Math.min),I=[].lastIndexOf,D=!!I&&1/[1].lastIndexOf(1,-0)<0;d=d("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0}),be.exports=!D&&d&&f?I:function(h){if(D)return I.apply(this,arguments)||0;var p=M(this),m=b(p.length),g=m-1;for((g=1<arguments.length?w(g,C(arguments[1])):g)<0&&(g=m+g);0<=g;g--)if(g in p&&p[g]===h)return g||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(l,be,Z){var M=l("../internals/fails"),C=l("../internals/well-known-symbol"),b=l("../internals/engine-v8-version"),w=C("species");be.exports=function(I){return 51<=b||!M(function(){var D=[];return(D.constructor={})[w]=function(){return{foo:1}},1!==D[I](Boolean).foo})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(l,be,Z){"use strict";var M=l("../internals/fails");be.exports=function(C,b){var w=[][C];return!!w&&M(function(){w.call(null,b||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(l,be,Z){function M(d){throw d}var C=l("../internals/descriptors"),b=l("../internals/fails"),w=l("../internals/has"),I=Object.defineProperty,D={};be.exports=function(d,f){var h,p,m,g;return w(D,d)?D[d]:(h=[][d],p=!!w(f=f||{},"ACCESSORS")&&f.ACCESSORS,m=w(f,0)?f[0]:M,g=w(f,1)?f[1]:void 0,D[d]=!!h&&!b(function(){if(p&&!C)return!0;var x={length:-1};p?I(x,1,{enumerable:!0,get:M}):x[1]=1,h.call(x,m,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(l,be,Z){function M(D){return function(d,f,h,p){C(f);var m=b(d),g=w(m),x=I(m.length),E=D?x-1:0,S=D?-1:1;if(h<2)for(;;){if(E in g){p=g[E],E+=S;break}if(E+=S,D?E<0:x<=E)throw TypeError("Reduce of empty array with no initial value")}for(;D?0<=E:E<x;E+=S)E in g&&(p=f(p,g[E],E,m));return p}}var C=l("../internals/a-function"),b=l("../internals/to-object"),w=l("../internals/indexed-object"),I=l("../internals/to-length");be.exports={left:M(!1),right:M(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(l,be,Z){var M=l("../internals/is-object"),C=l("../internals/is-array"),b=l("../internals/well-known-symbol")("species");be.exports=function(w,I){var D;return new(void 0===(D=C(w)&&("function"==typeof(D=w.constructor)&&(D===Array||C(D.prototype))||M(D)&&null===(D=D[b]))?void 0:D)?Array:D)(0===I?0:I)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(l,be,Z){var M=l("../internals/an-object");be.exports=function(C,b,w,I){try{return I?b(M(w)[0],w[1]):b(w)}catch(D){throw void 0!==(I=C.return)&&M(I.call(C)),D}}},{"../internals/an-object":10}],27:[function(l,be,Z){var M=l("../internals/well-known-symbol")("iterator"),C=!1;try{var b=0,w={next:function(){return{done:!!b++}},return:function(){C=!0}};w[M]=function(){return this},Array.from(w,function(){throw 2})}catch{}be.exports=function(I,D){if(!D&&!C)return!1;var d=!1;try{var f={};f[M]=function(){return{next:function(){return{done:d=!0}}}},I(f)}catch{}return d}},{"../internals/well-known-symbol":150}],28:[function(l,be,Z){var M={}.toString;be.exports=function(C){return M.call(C).slice(8,-1)}},{}],29:[function(l,be,Z){var M=l("../internals/to-string-tag-support"),C=l("../internals/classof-raw"),b=l("../internals/well-known-symbol")("toStringTag"),w="Arguments"==C(function(){return arguments}());be.exports=M?C:function(I){var D;return void 0===I?"Undefined":null===I?"Null":"string"==typeof(D=function(d,f){try{return d[f]}catch{}}(I=Object(I),b))?D:w?C(I):"Object"==(D=C(I))&&"function"==typeof I.callee?"Arguments":D}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(m,be,Z){"use strict";var M=m("../internals/object-define-property").f,C=m("../internals/object-create"),b=m("../internals/redefine-all"),w=m("../internals/function-bind-context"),I=m("../internals/an-instance"),D=m("../internals/iterate"),d=m("../internals/define-iterator"),f=m("../internals/set-species"),h=m("../internals/descriptors"),p=m("../internals/internal-metadata").fastKey,g=(m=m("../internals/internal-state")).set,x=m.getterFor;be.exports={getConstructor:function(E,S,L,q){function J(H,te,Y){var we,Se=K(H),oe=G(H,te);return oe?oe.value=Y:(Se.last=oe={index:we=p(te,!0),key:te,value:Y,previous:te=Se.last,next:void 0,removed:!1},Se.first||(Se.first=oe),te&&(te.next=oe),h?Se.size++:H.size++,"F"!==we&&(Se.index[we]=oe)),H}function G(we,te){we=K(we);var Y,Se=p(te);if("F"!==Se)return we.index[Se];for(Y=we.first;Y;Y=Y.next)if(Y.key==te)return Y}var V=E(function(H,te){I(H,V,S),g(H,{type:S,index:C(null),first:void 0,last:void 0,size:0}),h||(H.size=0),null!=te&&D(te,H[q],H,L)}),K=x(S);return b(V.prototype,{clear:function(){for(var H=K(this),te=H.index,Y=H.first;Y;)Y.removed=!0,Y.previous&&(Y.previous=Y.previous.next=void 0),delete te[Y.index],Y=Y.next;H.first=H.last=void 0,h?H.size=0:this.size=0},delete:function(Se){var te,Y,we=K(this);return(Se=G(this,Se))&&(te=Se.next,Y=Se.previous,delete we.index[Se.index],Se.removed=!0,Y&&(Y.next=te),te&&(te.previous=Y),we.first==Se&&(we.first=te),we.last==Se&&(we.last=Y),h?we.size--:this.size--),!!Se},forEach:function(H){for(var te,Y=K(this),we=w(H,1<arguments.length?arguments[1]:void 0,3);te=te?te.next:Y.first;)for(we(te.value,te.key,this);te&&te.removed;)te=te.previous},has:function(H){return!!G(this,H)}}),b(V.prototype,L?{get:function(H){return(H=G(this,H))&&H.value},set:function(H,te){return J(this,0===H?0:H,te)}}:{add:function(H){return J(this,H=0===H?0:H,H)}}),h&&M(V.prototype,"size",{get:function(){return K(this).size}}),V},setStrong:function(E,S,L){var q=S+" Iterator",J=x(S),G=x(q);d(E,S,function(V,K){g(this,{type:q,target:V,state:J(V),kind:K,last:void 0})},function(){for(var V=G(this),K=V.kind,H=V.last;H&&H.removed;)H=H.previous;return V.target&&(V.last=H=H?H.next:V.state.first)?"keys"==K?{value:H.key,done:!1}:"values"==K?{value:H.value,done:!1}:{value:[H.key,H.value],done:!1}:{value:V.target=void 0,done:!0}},L?"entries":"values",!L,!0),f(S)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(g,be,Z){"use strict";function M(J){return J.frozen||(J.frozen=new C)}function C(){this.entries=[]}function b(J,G){return S(J.entries,function(V){return V[0]===G})}var w=g("../internals/redefine-all"),I=g("../internals/internal-metadata").getWeakData,D=g("../internals/an-object"),d=g("../internals/is-object"),f=g("../internals/an-instance"),h=g("../internals/iterate"),p=g("../internals/array-iteration"),m=g("../internals/has"),x=(g=g("../internals/internal-state")).set,E=g.getterFor,S=p.find,L=p.findIndex,q=0;C.prototype={get:function(J){if(J=b(this,J))return J[1]},has:function(J){return!!b(this,J)},set:function(J,G){var V=b(this,J);V?V[1]=G:this.entries.push([J,G])},delete:function(J){var G=L(this.entries,function(V){return V[0]===J});return~G&&this.entries.splice(G,1),!!~G}},be.exports={getConstructor:function(J,G,V,K){function H(we,Se,oe){var ge=Y(we),re=I(D(Se),!0);return!0===re?M(ge).set(Se,oe):re[ge.id]=oe,we}var te=J(function(we,Se){f(we,te,G),x(we,{type:G,id:q++,frozen:void 0}),null!=Se&&h(Se,we[K],we,V)}),Y=E(G);return w(te.prototype,{delete:function(we){var Se,oe=Y(this);return!!d(we)&&(!0===(Se=I(we))?M(oe).delete(we):Se&&m(Se,oe.id)&&delete Se[oe.id])},has:function(we){var Se,oe=Y(this);return!!d(we)&&(!0===(Se=I(we))?M(oe).has(we):Se&&m(Se,oe.id))}}),w(te.prototype,V?{get:function(we){var Se,oe=Y(this);if(d(we))return!0===(Se=I(we))?M(oe).get(we):Se?Se[oe.id]:void 0},set:function(we,Se){return H(this,we,Se)}}:{add:function(we){return H(this,we,!0)}}),te}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/global"),b=l("../internals/is-forced"),w=l("../internals/redefine"),I=l("../internals/internal-metadata"),D=l("../internals/iterate"),d=l("../internals/an-instance"),f=l("../internals/is-object"),h=l("../internals/fails"),p=l("../internals/check-correctness-of-iteration"),m=l("../internals/set-to-string-tag"),g=l("../internals/inherit-if-required");be.exports=function(x,E,S){function L(re){var Q=Se[re];w(Se,re,"add"==re?function(fe){return Q.call(this,0===fe?0:fe),this}:"delete"==re?function(fe){return!(te&&!f(fe))&&Q.call(this,0===fe?0:fe)}:"get"==re?function(fe){return te&&!f(fe)?void 0:Q.call(this,0===fe?0:fe)}:"has"==re?function(fe){return!(te&&!f(fe))&&Q.call(this,0===fe?0:fe)}:function(fe,De){return Q.call(this,0===fe?0:fe,De),this})}var q,J,G,V,K,H=-1!==x.indexOf("Map"),te=-1!==x.indexOf("Weak"),Y=H?"set":"add",we=C[x],Se=we&&we.prototype,oe=we,ge={};return b(x,"function"!=typeof we||!(te||Se.forEach&&!h(function(){(new we).entries().next()})))?(oe=S.getConstructor(E,x,H,Y),I.REQUIRED=!0):b(x,!0)&&(J=(q=new oe)[Y](te?{}:-0,1)!=q,G=h(function(){q.has(1)}),V=p(function(re){new we(re)}),K=!te&&h(function(){for(var re=new we,Q=5;Q--;)re[Y](Q,Q);return!re.has(-0)}),V||(((oe=E(function(re,Q){return d(re,oe,x),re=g(new we,re,oe),null!=Q&&D(Q,re[Y],re,H),re})).prototype=Se).constructor=oe),(G||K)&&(L("delete"),L("has"),H&&L("get")),(K||J)&&L(Y),te&&Se.clear&&delete Se.clear),ge[x]=oe,M({global:!0,forced:oe!=we},ge),m(oe,x),te||S.setStrong(oe,x,H),oe}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(l,be,Z){var M=l("../internals/has"),C=l("../internals/own-keys"),b=l("../internals/object-get-own-property-descriptor"),w=l("../internals/object-define-property");be.exports=function(I,D){for(var d=C(D),f=w.f,h=b.f,p=0;p<d.length;p++){var m=d[p];M(I,m)||f(I,m,h(D,m))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(l,be,Z){var M=l("../internals/well-known-symbol")("match");be.exports=function(C){var b=/./;try{"/./"[C](b)}catch{try{return b[M]=!1,"/./"[C](b)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(l,be,Z){l=l("../internals/fails"),be.exports=!l(function(){function M(){}return M.prototype.constructor=null,Object.getPrototypeOf(new M)!==M.prototype})},{"../internals/fails":51}],36:[function(l,be,Z){var M=l("../internals/require-object-coercible"),C=/"/g;be.exports=function(d,w,I,D){d=String(M(d));var f="<"+w;return""!==I&&(f+=" "+I+'="'+String(D).replace(C,"&quot;")+'"'),f+">"+d+"</"+w+">"}},{"../internals/require-object-coercible":115}],37:[function(l,be,Z){"use strict";function M(){return this}var C=l("../internals/iterators-core").IteratorPrototype,b=l("../internals/object-create"),w=l("../internals/create-property-descriptor"),I=l("../internals/set-to-string-tag"),D=l("../internals/iterators");be.exports=function(d,f,h){return f+=" Iterator",d.prototype=b(C,{next:w(1,h)}),I(d,f,!1,!0),D[f]=M,d}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/object-define-property"),b=l("../internals/create-property-descriptor");be.exports=M?function(w,I,D){return C.f(w,I,b(1,D))}:function(w,I,D){return w[I]=D,w}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(l,be,Z){be.exports=function(M,C){return{enumerable:!(1&M),configurable:!(2&M),writable:!(4&M),value:C}}},{}],40:[function(l,be,Z){"use strict";var M=l("../internals/to-primitive"),C=l("../internals/object-define-property"),b=l("../internals/create-property-descriptor");be.exports=function(w,I,D){(I=M(I))in w?C.f(w,I,b(0,D)):w[I]=D}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(g,be,Z){"use strict";function M(){return this}var C=g("../internals/export"),b=g("../internals/create-iterator-constructor"),w=g("../internals/object-get-prototype-of"),I=g("../internals/object-set-prototype-of"),D=g("../internals/set-to-string-tag"),d=g("../internals/create-non-enumerable-property"),f=g("../internals/redefine"),h=g("../internals/well-known-symbol"),p=g("../internals/is-pure"),m=g("../internals/iterators"),x=(g=g("../internals/iterators-core")).IteratorPrototype,E=g.BUGGY_SAFARI_ITERATORS,S=h("iterator"),L="values",q="entries";be.exports=function(J,G,V,ge,H,te,Y){function we(le){if(le===H&&De)return De;if(!E&&le in Q)return Q[le];switch(le){case"keys":case L:case q:return function(){return new V(this,le)}}return function(){return new V(this)}}b(V,G,ge),ge=G+" Iterator";var Se,oe,re=!1,Q=J.prototype,fe=Q[S]||Q["@@iterator"]||H&&Q[H],De=!E&&fe||we(H),it="Array"==G&&Q.entries||fe;if(it&&(it=w(it.call(new J)),x!==Object.prototype&&it.next&&(p||w(it)===x||(I?I(it,x):"function"!=typeof it[S]&&d(it,S,M)),D(it,ge,!0,!0),p&&(m[ge]=M))),H==L&&fe&&fe.name!==L&&(re=!0,De=function(){return fe.call(this)}),p&&!Y||Q[S]===De||d(Q,S,De),m[G]=De,H)if(Se={values:we(L),keys:te?De:we("keys"),entries:we(q)},Y)for(oe in Se)!E&&!re&&oe in Q||f(Q,oe,Se[oe]);else C({target:G,proto:!0,forced:E||re},Se);return Se}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(l,be,Z){var M=l("../internals/path"),C=l("../internals/has"),b=l("../internals/well-known-symbol-wrapped"),w=l("../internals/object-define-property").f;be.exports=function(I){var D=M.Symbol||(M.Symbol={});C(D,I)||w(D,I,{value:b.f(I)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(l,be,Z){l=l("../internals/fails"),be.exports=!l(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":51}],44:[function(C,be,Z){var M=C("../internals/global"),b=(C=C("../internals/is-object"),M.document),w=C(b)&&C(b.createElement);be.exports=function(I){return w?b.createElement(I):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(l,be,Z){be.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(l,be,Z){l=l("../internals/engine-user-agent"),be.exports=/(iphone|ipod|ipad).*applewebkit/i.test(l)},{"../internals/engine-user-agent":47}],47:[function(l,be,Z){l=l("../internals/get-built-in"),be.exports=l("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(b,be,Z){var M,C,w=b("../internals/global");b=b("../internals/engine-user-agent"),(w=(w=(w=w.process)&&w.versions)&&w.v8)?C=(M=w.split("."))[0]+M[1]:b&&(!(M=b.match(/Edge\/(\d+)/))||74<=M[1])&&(M=b.match(/Chrome\/(\d+)/))&&(C=M[1]),be.exports=C&&+C},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(l,be,Z){be.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(l,be,Z){var M=l("../internals/global"),C=l("../internals/object-get-own-property-descriptor").f,b=l("../internals/create-non-enumerable-property"),w=l("../internals/redefine"),I=l("../internals/set-global"),D=l("../internals/copy-constructor-properties"),d=l("../internals/is-forced");be.exports=function(f,h){var p,m,g,x=f.target,E=f.global,S=f.stat,L=E?M:S?M[x]||I(x,{}):(M[x]||{}).prototype;if(L)for(p in h){if(m=h[p],g=f.noTargetGet?(g=C(L,p))&&g.value:L[p],!d(E?p:x+(S?".":"#")+p,f.forced)&&void 0!==g){if(typeof m==typeof g)continue;D(m,g)}(f.sham||g&&g.sham)&&b(m,"sham",!0),w(L,p,m,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(l,be,Z){be.exports=function(M){try{return!!M()}catch{return!0}}},{}],52:[function(h,be,Z){"use strict";h("../modules/es.regexp.exec");var M=h("../internals/redefine"),C=h("../internals/fails"),b=h("../internals/well-known-symbol"),w=h("../internals/regexp-exec"),I=h("../internals/create-non-enumerable-property"),D=b("species"),d=!C(function(){var g=/./;return g.exec=function(){var x=[];return x.groups={a:"7"},x},"7"!=="".replace(g,"$<a>")}),f="$0"==="a".replace(/./,"$0"),p=!!/./[h=b("replace")]&&""===/./[h]("a","$0"),m=!C(function(){var g=(x=/(?:)/).exec,x=(x.exec=function(){return g.apply(this,arguments)},"ab".split(x));return 2!==x.length||"a"!==x[0]||"b"!==x[1]});be.exports=function(g,x,E,S){var L,q,J=b(g),G=!C(function(){var K={};return K[J]=function(){return 7},7!=""[g](K)}),V=G&&!C(function(){var K=!1,H=/a/;return"split"===g&&((H={constructor:{}}).constructor[D]=function(){return H},H.flags="",H[J]=/./[J]),H.exec=function(){return K=!0,null},H[J](""),!K});G&&V&&("replace"!==g||d&&f&&!p)&&("split"!==g||m)||(L=/./[J],E=(V=E(J,""[g],function(K,H,te,Y,we){return H.exec===w?G&&!we?{done:!0,value:L.call(H,te,Y)}:{done:!0,value:K.call(te,H,Y)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}))[0],q=V[1],M(String.prototype,g,E),M(RegExp.prototype,J,2==x?function(K,H){return q.call(K,this,H)}:function(K){return q.call(K,this)})),S&&I(RegExp.prototype[J],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(l,be,Z){"use strict";var C=l("../internals/is-array"),b=l("../internals/to-length"),w=l("../internals/function-bind-context");be.exports=function M(I,D,d,f,h,p,m,g){for(var x,E=h,S=0,L=!!m&&w(m,g,3);S<f;){if(S in d){if(x=L?L(d[S],S,D):d[S],0<p&&C(x))E=M(I,D,x,b(x.length),E,p-1)-1;else{if(9007199254740991<=E)throw TypeError("Exceed the acceptable array length");I[E]=x}E++}S++}return E}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(l,be,Z){l=l("../internals/fails"),be.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(l,be,Z){var M=l("../internals/a-function");be.exports=function(C,b,w){if(M(C),void 0===b)return C;switch(w){case 0:return function(){return C.call(b)};case 1:return function(I){return C.call(b,I)};case 2:return function(I,D){return C.call(b,I,D)};case 3:return function(I,D,d){return C.call(b,I,D,d)}}return function(){return C.apply(b,arguments)}}},{"../internals/a-function":5}],56:[function(l,be,Z){"use strict";var M=l("../internals/a-function"),C=l("../internals/is-object"),b=[].slice,w={};be.exports=Function.bind||function(I){var D=M(this),d=b.call(arguments,1),f=function(){var h=d.concat(b.call(arguments));if(this instanceof f){var p=D,m=h.length,g=h;if(!(m in w)){for(var x=[],E=0;E<m;E++)x[E]="a["+E+"]";w[m]=Function("C,a","return new C("+x.join(",")+")")}return w[m](p,g)}return D.apply(I,h)};return C(D.prototype)&&(f.prototype=D.prototype),f}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(l,be,Z){function M(w){return"function"==typeof w?w:void 0}var C=l("../internals/path"),b=l("../internals/global");be.exports=function(w,I){return arguments.length<2?M(C[w])||M(b[w]):C[w]&&C[w][I]||b[w]&&b[w][I]}},{"../internals/global":60,"../internals/path":106}],58:[function(l,be,Z){var M=l("../internals/classof"),C=l("../internals/iterators"),b=l("../internals/well-known-symbol")("iterator");be.exports=function(w){if(null!=w)return w[b]||w["@@iterator"]||C[M(w)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(l,be,Z){var M=l("../internals/an-object"),C=l("../internals/get-iterator-method");be.exports=function(b){var w=C(b);if("function"!=typeof w)throw TypeError(String(b)+" is not iterable");return M(w.call(b))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(l,be,Z){(function(M){function C(b){return b&&b.Math==Math&&b}be.exports=C("object"==typeof globalThis&&globalThis)||C("object"==typeof window&&window)||C("object"==typeof self&&self)||C("object"==typeof M&&M)||Function("return this")()}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(l,be,Z){var M={}.hasOwnProperty;be.exports=function(C,b){return M.call(C,b)}},{}],62:[function(l,be,Z){be.exports={}},{}],63:[function(l,be,Z){var M=l("../internals/global");be.exports=function(C,b){var w=M.console;w&&w.error&&(1===arguments.length?w.error(C):w.error(C,b))}},{"../internals/global":60}],64:[function(l,be,Z){l=l("../internals/get-built-in"),be.exports=l("document","documentElement")},{"../internals/get-built-in":57}],65:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/fails"),b=l("../internals/document-create-element");be.exports=!M&&!C(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(l,be,Z){var M=Math.abs,C=Math.pow,b=Math.floor,w=Math.log,I=Math.LN2;be.exports={pack:function(D,d,E){var h,p,m,g=new Array(E),x=8*E-d-1,S=(E=(1<<x)-1)>>1,L=23===d?C(2,-24)-C(2,-77):0,q=D<0||0===D&&1/D<0?1:0,J=0;for((D=M(D))!=D||D===1/0?(p=D!=D?1:0,h=E):(h=b(w(D)/I),D*(m=C(2,-h))<1&&(h--,m*=2),2<=(D+=1<=h+S?L/m:L*C(2,1-S))*m&&(h++,m/=2),E<=h+S?(p=0,h=E):1<=h+S?(p=(D*m-1)*C(2,d),h+=S):(p=D*C(2,S-1)*C(2,d),h=0));8<=d;g[J++]=255&p,p/=256,d-=8);for(h=h<<d|p,x+=d;0<x;g[J++]=255&h,h/=256,x-=8);return g[--J]|=128*q,g},unpack:function(D,d){var f,E,h=D.length,p=(1<<(E=8*h-d-1))-1,m=p>>1,g=E-7,x=h-1,S=127&(E=D[x--]);for(E>>=7;0<g;S=256*S+D[x],x--,g-=8);for(f=S&(1<<-g)-1,S>>=-g,g+=d;0<g;f=256*f+D[x],x--,g-=8);if(0===S)S=1-m;else{if(S===p)return f?NaN:E?-1/0:1/0;f+=C(2,d),S-=m}return(E?-1:1)*f*C(2,S-d)}}},{}],67:[function(l,be,Z){var M=l("../internals/fails"),C=l("../internals/classof-raw"),b="".split;be.exports=M(function(){return!Object("z").propertyIsEnumerable(0)})?function(w){return"String"==C(w)?b.call(w,""):Object(w)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(l,be,Z){var M=l("../internals/is-object"),C=l("../internals/object-set-prototype-of");be.exports=function(b,w,I){return C&&"function"==typeof(w=w.constructor)&&w!==I&&M(w=w.prototype)&&w!==I.prototype&&C(b,w),b}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(M,be,Z){M=M("../internals/shared-store");var C=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(b){return C.call(b)}),be.exports=M.inspectSource},{"../internals/shared-store":121}],70:[function(l,be,Z){function M(g){I(g,f,{value:{objectID:"O"+ ++h,weakData:{}}})}var C=l("../internals/hidden-keys"),b=l("../internals/is-object"),w=l("../internals/has"),I=l("../internals/object-define-property").f,D=l("../internals/uid"),d=l("../internals/freezing"),f=D("meta"),h=0,p=Object.isExtensible||function(){return!0},m=be.exports={REQUIRED:!1,fastKey:function(g,x){if(!b(g))return"symbol"==typeof g?g:("string"==typeof g?"S":"P")+g;if(!w(g,f)){if(!p(g))return"F";if(!x)return"E";M(g)}return g[f].objectID},getWeakData:function(g,x){if(!w(g,f)){if(!p(g))return!0;if(!x)return!1;M(g)}return g[f].weakData},onFreeze:function(g){return d&&m.REQUIRED&&p(g)&&!w(g,f)&&M(g),g}};C[f]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(E,be,Z){var M,C,b,w,I,D,d,f,h=E("../internals/native-weak-map"),S=E("../internals/global"),p=E("../internals/is-object"),m=E("../internals/create-non-enumerable-property"),g=E("../internals/has"),x=E("../internals/shared-key");E=E("../internals/hidden-keys"),S=S.WeakMap,d=h?(M=new S,C=M.get,b=M.has,w=M.set,I=function(L,q){return w.call(M,L,q),q},D=function(L){return C.call(M,L)||{}},function(L){return b.call(M,L)}):(E[f=x("state")]=!0,I=function(L,q){return m(L,f,q),q},D=function(L){return g(L,f)?L[f]:{}},function(L){return g(L,f)}),be.exports={set:I,get:D,has:d,enforce:function(L){return d(L)?D(L):I(L,{})},getterFor:function(L){return function(q){if(p(q)&&(q=D(q)).type===L)return q;throw TypeError("Incompatible receiver, "+L+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(l,be,Z){var M=l("../internals/well-known-symbol"),C=l("../internals/iterators"),b=M("iterator"),w=Array.prototype;be.exports=function(I){return void 0!==I&&(C.Array===I||w[b]===I)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(l,be,Z){var M=l("../internals/classof-raw");be.exports=Array.isArray||function(C){return"Array"==M(C)}},{"../internals/classof-raw":28}],74:[function(l,be,Z){function M(f,h){return(f=I[w(f)])==d||f!=D&&("function"==typeof h?C(h):!!h)}var C=l("../internals/fails"),b=/#|\.prototype\./,w=M.normalize=function(f){return String(f).replace(b,".").toLowerCase()},I=M.data={},D=M.NATIVE="N",d=M.POLYFILL="P";be.exports=M},{"../internals/fails":51}],75:[function(l,be,Z){be.exports=function(M){return"object"==typeof M?null!==M:"function"==typeof M}},{}],76:[function(l,be,Z){be.exports=!1},{}],77:[function(l,be,Z){var M=l("../internals/is-object"),C=l("../internals/classof-raw"),b=l("../internals/well-known-symbol")("match");be.exports=function(w){var I;return M(w)&&(void 0!==(I=w[b])?!!I:"RegExp"==C(w))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(l,be,Z){function M(f,h){this.stopped=f,this.result=h}var C=l("../internals/an-object"),b=l("../internals/is-array-iterator-method"),w=l("../internals/to-length"),I=l("../internals/function-bind-context"),D=l("../internals/get-iterator-method"),d=l("../internals/call-with-safe-iteration-closing");(be.exports=function(f,h,p,m,g){var x,E,S,L,q,J,G=I(h,p,m?2:1);if(g)x=f;else{if("function"!=typeof(h=D(f)))throw TypeError("Target is not iterable");if(b(h)){for(E=0,S=w(f.length);E<S;E++)if((L=m?G(C(J=f[E])[0],J[1]):G(f[E]))&&L instanceof M)return L;return new M(!1)}x=h.call(f)}for(q=x.next;!(J=q.call(x)).done;)if("object"==typeof(L=d(x,G,J.value,m))&&L&&L instanceof M)return L;return new M(!1)}).stop=function(f){return new M(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(D,be,Z){"use strict";var M,C,b=D("../internals/object-get-prototype-of"),w=D("../internals/create-non-enumerable-property"),I=D("../internals/has"),d=D("../internals/well-known-symbol"),f=(D=D("../internals/is-pure"),d=d("iterator"),!1);[].keys&&("next"in(C=[].keys())?(b=b(b(C)))!==Object.prototype&&(M=b):f=!0),null==M&&(M={}),D||I(M,d)||w(M,d,function(){return this}),be.exports={IteratorPrototype:M,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(l,be,Z){be.exports={}},{}],81:[function(l,be,Z){be.exports=Math.sign||function(M){return 0==(M=+M)||M!=M?M:M<0?-1:1}},{}],82:[function(m,be,Z){var M,C,b,w,I,D,d,f,h=m("../internals/global"),q=m("../internals/object-get-own-property-descriptor").f,L=m("../internals/classof-raw"),p=m("../internals/task").set,g=(m=m("../internals/engine-is-ios"),h.MutationObserver||h.WebKitMutationObserver),x=h.process,E=h.Promise,S="process"==L(x);L=q(h,"queueMicrotask"),(q=L&&L.value)||(M=function(){var J,G;for(S&&(J=x.domain)&&J.exit();C;){G=C.fn,C=C.next;try{G()}catch(V){throw C?w():b=void 0,V}}b=void 0,J&&J.enter()},w=S?function(){x.nextTick(M)}:g&&!m?(I=!0,D=document.createTextNode(""),new g(M).observe(D,{characterData:!0}),function(){D.data=I=!I}):E&&E.resolve?(d=E.resolve(void 0),f=d.then,function(){f.call(d,M)}):function(){p.call(h,M)}),be.exports=q||function(J){J={fn:J,next:void 0},b&&(b.next=J),C||(C=J,w()),b=J}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(l,be,Z){l=l("../internals/global"),be.exports=l.Promise},{"../internals/global":60}],84:[function(l,be,Z){l=l("../internals/fails"),be.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(l,be,Z){var M=l("../internals/fails"),C=l("../internals/well-known-symbol"),b=l("../internals/is-pure"),w=C("iterator");be.exports=!M(function(){var I=new URL("b?a=1&b=2&c=3","http://a"),D=I.searchParams,d="";return I.pathname="c%20d",D.forEach(function(f,h){D.delete("b"),d+=h+f}),b&&!I.toJSON||!D.sort||"http://a/c%20d?a=1&c=3"!==I.href||"3"!==D.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!D[w]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(M,be,Z){var C=M("../internals/global");M=M("../internals/inspect-source"),be.exports="function"==typeof(C=C.WeakMap)&&/native code/.test(M(C))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(l,be,Z){"use strict";function M(b){var w,I;this.promise=new b(function(D,d){if(void 0!==w||void 0!==I)throw TypeError("Bad Promise constructor");w=D,I=d}),this.resolve=C(w),this.reject=C(I)}var C=l("../internals/a-function");be.exports.f=function(b){return new M(b)}},{"../internals/a-function":5}],88:[function(l,be,Z){var M=l("../internals/is-regexp");be.exports=function(C){if(M(C))throw TypeError("The method doesn't accept regular expressions");return C}},{"../internals/is-regexp":77}],89:[function(l,be,Z){var M=l("../internals/global").isFinite;be.exports=Number.isFinite||function(C){return"number"==typeof C&&M(C)}},{"../internals/global":60}],90:[function(l,be,Z){"use strict";var M=l("../internals/descriptors"),C=l("../internals/fails"),b=l("../internals/object-keys"),w=l("../internals/object-get-own-property-symbols"),I=l("../internals/object-property-is-enumerable"),D=l("../internals/to-object"),d=l("../internals/indexed-object"),f=Object.assign,h=Object.defineProperty;be.exports=!f||C(function(){var p,m,g,x;return!(!M||1===f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(m={},x="abcdefghijklmnopqrst",(p={})[g=Symbol()]=7,x.split("").forEach(function(E){m[E]=E}),7!=f({},p)[g]||b(f({},m)).join("")!=x)})?function(p,m){for(var g=D(p),x=arguments.length,E=1,S=w.f,L=I.f;E<x;)for(var q,J=d(arguments[E++]),G=S?b(J).concat(S(J)):b(J),V=G.length,K=0;K<V;)q=G[K++],M&&!L.call(J,q)||(g[q]=J[q]);return g}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(h,be,Z){function M(){}var C,b=h("../internals/an-object"),w=h("../internals/object-define-properties"),I=h("../internals/enum-bug-keys"),D=h("../internals/hidden-keys"),d=h("../internals/html"),f=h("../internals/document-create-element"),p=(h=h("../internals/shared-key"),"prototype"),m="script",g=h("IE_PROTO"),x=function(S){return"<"+m+">"+S+"</"+m+">"},E=function(){try{C=document.domain&&new ActiveXObject("htmlfile")}catch{}E=C?((S=C).write(x("")),S.close(),L=S.parentWindow.Object,S=null,L):(S=f("iframe"),L="java"+m+":",S.style.display="none",d.appendChild(S),S.src=String(L),(L=S.contentWindow.document).open(),L.write(x("document.F=Object")),L.close(),L.F);for(var S,L,q=I.length;q--;)delete E[p][I[q]];return E()};D[g]=!0,be.exports=Object.create||function(S,L){var q;return null!==S?(M[p]=b(S),q=new M,M[p]=null,q[g]=S):q=E(),void 0===L?q:w(q,L)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/object-define-property"),b=l("../internals/an-object"),w=l("../internals/object-keys");be.exports=M?Object.defineProperties:function(I,D){b(I);for(var d,f=w(D),h=f.length,p=0;p<h;)C.f(I,d=f[p++],D[d]);return I}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/ie8-dom-define"),b=l("../internals/an-object"),w=l("../internals/to-primitive"),I=Object.defineProperty;Z.f=M?I:function(D,d,f){if(b(D),d=w(d,!0),b(f),C)try{return I(D,d,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(D[d]=f.value),D}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/object-property-is-enumerable"),b=l("../internals/create-property-descriptor"),w=l("../internals/to-indexed-object"),I=l("../internals/to-primitive"),D=l("../internals/has"),d=l("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;Z.f=M?f:function(h,p){if(h=w(h),p=I(p,!0),d)try{return f(h,p)}catch{}if(D(h,p))return b(!C.f.call(h,p),h[p])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(l,be,Z){var M=l("../internals/to-indexed-object"),C=l("../internals/object-get-own-property-names").f,b={}.toString,w="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];be.exports.f=function(I){if(!w||"[object Window]"!=b.call(I))return C(M(I));try{return C(I)}catch{return w.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(l,be,Z){var M=l("../internals/object-keys-internal"),C=l("../internals/enum-bug-keys").concat("length","prototype");Z.f=Object.getOwnPropertyNames||function(b){return M(b,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(l,be,Z){Z.f=Object.getOwnPropertySymbols},{}],98:[function(w,be,Z){var M=w("../internals/has"),C=w("../internals/to-object"),b=w("../internals/shared-key"),I=(w=w("../internals/correct-prototype-getter"),b("IE_PROTO")),D=Object.prototype;be.exports=w?Object.getPrototypeOf:function(d){return d=C(d),M(d,I)?d[I]:"function"==typeof d.constructor&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?D:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(l,be,Z){var M=l("../internals/has"),C=l("../internals/to-indexed-object"),b=l("../internals/array-includes").indexOf,w=l("../internals/hidden-keys");be.exports=function(I,D){var d,f=C(I),h=0,p=[];for(d in f)!M(w,d)&&M(f,d)&&p.push(d);for(;D.length>h;)!M(f,d=D[h++])||~b(p,d)||p.push(d);return p}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(l,be,Z){var M=l("../internals/object-keys-internal"),C=l("../internals/enum-bug-keys");be.exports=Object.keys||function(b){return M(b,C)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(l,be,Z){"use strict";var M={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,b=C&&!M.call({1:2},1);Z.f=b?function(w){return!!(w=C(this,w))&&w.enumerable}:M},{}],102:[function(l,be,Z){var M=l("../internals/an-object"),C=l("../internals/a-possible-prototype");be.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b,w=!1,I={};try{(b=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(I,[]),w=I instanceof Array}catch{}return function(D,d){return M(D),C(d),w?b.call(D,d):D.__proto__=d,D}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(l,be,Z){function M(D){return function(d){for(var f,h=w(d),p=b(h),m=p.length,g=0,x=[];g<m;)f=p[g++],C&&!I.call(h,f)||x.push(D?[f,h[f]]:h[f]);return x}}var C=l("../internals/descriptors"),b=l("../internals/object-keys"),w=l("../internals/to-indexed-object"),I=l("../internals/object-property-is-enumerable").f;be.exports={entries:M(!0),values:M(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(l,be,Z){"use strict";var M=l("../internals/to-string-tag-support"),C=l("../internals/classof");be.exports=M?{}.toString:function(){return"[object "+C(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(l,be,Z){var M=l("../internals/get-built-in"),C=l("../internals/object-get-own-property-names"),b=l("../internals/object-get-own-property-symbols"),w=l("../internals/an-object");be.exports=M("Reflect","ownKeys")||function(I){var D=C.f(w(I)),d=b.f;return d?D.concat(d(I)):D}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(l,be,Z){l=l("../internals/global"),be.exports=l},{"../internals/global":60}],107:[function(l,be,Z){be.exports=function(M){try{return{error:!1,value:M()}}catch(C){return{error:!0,value:C}}}},{}],108:[function(l,be,Z){var M=l("../internals/an-object"),C=l("../internals/is-object"),b=l("../internals/new-promise-capability");be.exports=function(w,I){return M(w),C(I)&&I.constructor===w?I:((0,(w=b.f(w)).resolve)(I),w.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(l,be,Z){var M=l("../internals/redefine");be.exports=function(C,b,w){for(var I in b)M(C,I,b[I],w);return C}},{"../internals/redefine":110}],110:[function(D,be,Z){var M=D("../internals/global"),C=D("../internals/create-non-enumerable-property"),b=D("../internals/has"),w=D("../internals/set-global"),I=D("../internals/inspect-source"),d=(D=D("../internals/internal-state")).get,f=D.enforce,h=String(String).split("String");(be.exports=function(p,m,g,L){var E=!!L&&!!L.unsafe,S=!!L&&!!L.enumerable;L=!!L&&!!L.noTargetGet,"function"==typeof g&&("string"!=typeof m||b(g,"name")||C(g,"name",m),f(g).source=h.join("string"==typeof m?m:"")),p===M?S?p[m]=g:w(m,g):(E?!L&&p[m]&&(S=!0):delete p[m],S?p[m]=g:C(p,m,g))})(Function.prototype,"toString",function(){return"function"==typeof this&&d(this).source||I(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(l,be,Z){var M=l("./classof-raw"),C=l("./regexp-exec");be.exports=function(b,w){var I=b.exec;if("function"==typeof I){if("object"!=typeof(I=I.call(b,w)))throw TypeError("RegExp exec method returned something other than an Object or null");return I}if("RegExp"!==M(b))throw TypeError("RegExp#exec called on incompatible receiver");return C.call(b,w)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(w,be,Z){"use strict";var M,C,b=w("./regexp-flags"),I=(w=w("./regexp-sticky-helpers"),RegExp.prototype.exec),D=String.prototype.replace,d=I,f=(C=/b*/g,I.call(M=/a/,"a"),I.call(C,"a"),0!==M.lastIndex||0!==C.lastIndex),h=w.UNSUPPORTED_Y||w.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];be.exports=d=f||p||h?function(m){var g,x,E,S,L=this,q=h&&L.sticky,J=b.call(L),G=L.source,V=0,K=m;return q&&(-1===(J=J.replace("y","")).indexOf("g")&&(J+="g"),K=String(m).slice(L.lastIndex),0<L.lastIndex&&(!L.multiline||L.multiline&&"\n"!==m[L.lastIndex-1])&&(G="(?: "+G+")",K=" "+K,V++),x=new RegExp("^(?:"+G+")",J)),p&&(x=new RegExp("^"+G+"$(?!\\s)",J)),f&&(g=L.lastIndex),E=I.call(q?x:L,K),q?E?(E.input=E.input.slice(V),E[0]=E[0].slice(V),E.index=L.lastIndex,L.lastIndex+=E[0].length):L.lastIndex=0:f&&E&&(L.lastIndex=L.global?E.index+E[0].length:g),p&&E&&1<E.length&&D.call(E[0],x,function(){for(S=1;S<arguments.length-2;S++)void 0===arguments[S]&&(E[S]=void 0)}),E}:d},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(l,be,Z){"use strict";var M=l("../internals/an-object");be.exports=function(){var C=M(this),b="";return C.global&&(b+="g"),C.ignoreCase&&(b+="i"),C.multiline&&(b+="m"),C.dotAll&&(b+="s"),C.unicode&&(b+="u"),C.sticky&&(b+="y"),b}},{"../internals/an-object":10}],114:[function(l,be,Z){"use strict";function M(C,b){return RegExp(C,b)}l=l("./fails"),Z.UNSUPPORTED_Y=l(function(){var C=M("a","y");return C.lastIndex=2,null!=C.exec("abcd")}),Z.BROKEN_CARET=l(function(){var C=M("^r","gy");return C.lastIndex=2,null!=C.exec("str")})},{"./fails":51}],115:[function(l,be,Z){be.exports=function(M){if(null==M)throw TypeError("Can't call method on "+M);return M}},{}],116:[function(l,be,Z){be.exports=Object.is||function(M,C){return M===C?0!==M||1/M==1/C:M!=M&&C!=C}},{}],117:[function(l,be,Z){var M=l("../internals/global"),C=l("../internals/create-non-enumerable-property");be.exports=function(b,w){try{C(M,b,w)}catch{M[b]=w}return w}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(l,be,Z){"use strict";var M=l("../internals/get-built-in"),C=l("../internals/object-define-property"),b=l("../internals/well-known-symbol"),w=l("../internals/descriptors"),I=b("species");be.exports=function(d){d=M(d),w&&d&&!d[I]&&(0,C.f)(d,I,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(l,be,Z){var M=l("../internals/object-define-property").f,C=l("../internals/has"),b=l("../internals/well-known-symbol")("toStringTag");be.exports=function(w,I,D){w&&!C(w=D?w:w.prototype,b)&&M(w,b,{configurable:!0,value:I})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(l,be,Z){var M=l("../internals/shared"),C=l("../internals/uid"),b=M("keys");be.exports=function(w){return b[w]||(b[w]=C(w))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(M,be,Z){var b=M("../internals/global"),C=(M=M("../internals/set-global"),"__core-js_shared__");b=b[C]||M(C,{}),be.exports=b},{"../internals/global":60,"../internals/set-global":117}],122:[function(l,be,Z){var M=l("../internals/is-pure"),C=l("../internals/shared-store");(be.exports=function(b,w){return C[b]||(C[b]=void 0!==w?w:{})})("versions",[]).push({version:"3.6.5",mode:M?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(l,be,Z){var M=l("../internals/an-object"),C=l("../internals/a-function"),b=l("../internals/well-known-symbol")("species");be.exports=function(D,I){return void 0===(D=M(D).constructor)||null==(D=M(D)[b])?I:C(D)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(l,be,Z){var M=l("../internals/fails");be.exports=function(C){return M(function(){var b=""[C]('"');return b!==b.toLowerCase()||3<b.split('"').length})}},{"../internals/fails":51}],125:[function(l,be,Z){function M(w){return function(f,h){f=String(b(f)),h=C(h);var d,p=f.length;return h<0||p<=h?w?"":void 0:(d=f.charCodeAt(h))<55296||56319<d||h+1===p||(p=f.charCodeAt(h+1))<56320||57343<p?w?f.charAt(h):d:w?f.slice(h,h+2):p-56320+(d-55296<<10)+65536}}var C=l("../internals/to-integer"),b=l("../internals/require-object-coercible");be.exports={codeAt:M(!1),charAt:M(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(l,be,Z){l=l("../internals/engine-user-agent"),be.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l)},{"../internals/engine-user-agent":47}],127:[function(l,be,Z){function M(D){return function(p,x,g){var m=(p=String(w(p))).length;return g=void 0===g?" ":String(g),(x=C(x))<=m||""==g?p:((m=b.call(g,I((x-=m)/g.length))).length>x&&(m=m.slice(0,x)),D?p+m:m+p)}}var C=l("../internals/to-length"),b=l("../internals/string-repeat"),w=l("../internals/require-object-coercible"),I=Math.ceil;be.exports={start:M(!1),end:M(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(l,be,Z){"use strict";function M(E){return E+22+75*(E<26)}function C(E){var S,L=[],q=(E=function(fe){for(var De=[],it=0,le=fe.length;it<le;){var z,ye=fe.charCodeAt(it++);55296<=ye&&ye<=56319&&it<le?56320==(64512&(z=fe.charCodeAt(it++)))?De.push(((1023&ye)<<10)+(1023&z)+65536):(De.push(ye),it--):De.push(ye)}return De}(E)).length,J=128,G=0,V=72;for(Y=0;Y<E.length;Y++)(S=E[Y])<128&&L.push(x(S));var K=L.length,H=K;for(K&&L.push("-");H<q;){for(var te=b,Y=0;Y<E.length;Y++)J<=(S=E[Y])&&S<te&&(te=S);var we=H+1;if(te-J>g((b-G)/we))throw RangeError(p);for(G+=(te-J)*we,J=te,Y=0;Y<E.length;Y++){if((S=E[Y])<J&&++G>b)throw RangeError(p);if(S==J){for(var Se=G,oe=w;;oe+=w){var ge=oe<=V?1:V+I<=oe?I:oe-V;if(Se<ge)break;var re=Se-ge,Q=w-ge;L.push(x(M(ge+re%Q))),Se=g(re/Q)}L.push(x(M(Se))),V=function(fe,De,it){var le=0;for(fe=it?g(fe/d):fe>>1,fe+=g(fe/De);m*I>>1<fe;le+=w)fe=g(fe/m);return g(le+(m+1)*fe/(fe+D))}(G,we,H==K),G=0,++H}}++G,++J}return L.join("")}var b=2147483647,w=36,I=26,D=38,d=700,f=/[^\0-\u007E]/,h=/[.\u3002\uFF0E\uFF61]/g,p="Overflow: input needs wider integers to process",m=w-1,g=Math.floor,x=String.fromCharCode;be.exports=function(E){for(var S,L=[],q=E.toLowerCase().replace(h,".").split("."),J=0;J<q.length;J++)L.push(f.test(S=q[J])?"xn--"+C(S):S);return L.join(".")}},{}],129:[function(l,be,Z){"use strict";var M=l("../internals/to-integer"),C=l("../internals/require-object-coercible");be.exports="".repeat||function(b){var w=String(C(this)),I="",D=M(b);if(D<0||D==1/0)throw RangeError("Wrong number of repetitions");for(;0<D;(D>>>=1)&&(w+=w))1&D&&(I+=w);return I}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(l,be,Z){var M=l("../internals/fails"),C=l("../internals/whitespaces");be.exports=function(b){return M(function(){return!!C[b]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[b]()||C[b].name!==b})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(b,be,Z){function M(D){return function(d){return d=String(C(d)),1&D&&(d=d.replace(w,"")),2&D?d.replace(I,""):d}}var C=b("../internals/require-object-coercible"),w=(b="["+b("../internals/whitespaces")+"]",RegExp("^"+b+b+"*")),I=RegExp(b+b+"*$");be.exports={start:M(1),end:M(2),trim:M(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(m,be,Z){function M(H){return function(){K(H)}}function C(H){K(H.data)}function b(H){I.postMessage(H+"",g.protocol+"//"+g.host)}var w,I=m("../internals/global"),D=m("../internals/fails"),d=m("../internals/classof-raw"),f=m("../internals/function-bind-context"),h=m("../internals/html"),p=m("../internals/document-create-element"),g=(m=m("../internals/engine-is-ios"),I.location),x=I.setImmediate,E=I.clearImmediate,S=I.process,L=I.MessageChannel,q=I.Dispatch,J=0,G={},V="onreadystatechange",K=function(H){var te;G.hasOwnProperty(H)&&(te=G[H],delete G[H],te())};x&&E||(x=function(H){for(var te=[],Y=1;Y<arguments.length;)te.push(arguments[Y++]);return G[++J]=function(){("function"==typeof H?H:Function(H)).apply(void 0,te)},w(J),J},E=function(H){delete G[H]},"process"==d(S)?w=function(H){S.nextTick(M(H))}:q&&q.now?w=function(H){q.now(M(H))}:L&&!m?(m=(d=new L).port2,d.port1.onmessage=C,w=f(m.postMessage,m,1)):!I.addEventListener||"function"!=typeof postMessage||I.importScripts||D(b)||"file:"===g.protocol?w=V in p("script")?function(H){h.appendChild(p("script"))[V]=function(){h.removeChild(this),K(H)}}:function(H){setTimeout(M(H),0)}:(w=b,I.addEventListener("message",C,!1))),be.exports={set:x,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(l,be,Z){var M=l("../internals/classof-raw");be.exports=function(C){if("number"!=typeof C&&"Number"!=M(C))throw TypeError("Incorrect invocation");return+C}},{"../internals/classof-raw":28}],134:[function(l,be,Z){var M=l("../internals/to-integer"),C=Math.max,b=Math.min;be.exports=function(w,I){return(w=M(w))<0?C(w+I,0):b(w,I)}},{"../internals/to-integer":137}],135:[function(l,be,Z){var M=l("../internals/to-integer"),C=l("../internals/to-length");be.exports=function(w){if(void 0===w)return 0;w=M(w);var I=C(w);if(w!==I)throw RangeError("Wrong length or index");return I}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(l,be,Z){var M=l("../internals/indexed-object"),C=l("../internals/require-object-coercible");be.exports=function(b){return M(C(b))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(l,be,Z){var M=Math.ceil,C=Math.floor;be.exports=function(b){return isNaN(b=+b)?0:(0<b?C:M)(b)}},{}],138:[function(l,be,Z){var M=l("../internals/to-integer"),C=Math.min;be.exports=function(b){return 0<b?C(M(b),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(l,be,Z){var M=l("../internals/require-object-coercible");be.exports=function(C){return Object(M(C))}},{"../internals/require-object-coercible":115}],140:[function(l,be,Z){var M=l("../internals/to-positive-integer");be.exports=function(C,b){if((C=M(C))%b)throw RangeError("Wrong offset");return C}},{"../internals/to-positive-integer":141}],141:[function(l,be,Z){var M=l("../internals/to-integer");be.exports=function(C){if((C=M(C))<0)throw RangeError("The argument can't be less than 0");return C}},{"../internals/to-integer":137}],142:[function(l,be,Z){var M=l("../internals/is-object");be.exports=function(C,b){if(!M(C))return C;var w,I;if(b&&"function"==typeof(w=C.toString)&&!M(I=w.call(C))||"function"==typeof(w=C.valueOf)&&!M(I=w.call(C))||!b&&"function"==typeof(w=C.toString)&&!M(I=w.call(C)))return I;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(l,be,Z){var M={};M[l("../internals/well-known-symbol")("toStringTag")]="z",be.exports="[object z]"===String(M)},{"../internals/well-known-symbol":150}],144:[function(l,be,Z){"use strict";function M(Tt,qt){for(var mn=0,Zn=qt.length,An=new(mt(Tt))(Zn);mn<Zn;)An[mn]=qt[mn++];return An}function C(Tt,qt){z(Tt,qt,{get:function(){return it(this)[qt]}})}function b(Tt){return Tt instanceof vt||"ArrayBuffer"==(Tt=K(Tt))||"SharedArrayBuffer"==Tt}function w(Tt,qt){return Nt(Tt)&&"symbol"!=typeof qt&&qt in Tt&&String(+qt)==String(qt)}function I(Tt,qt){return w(Tt,qt=G(qt,!0))?E(2,Tt[qt]):ye(Tt,qt)}function D(Tt,qt,mn){return!(w(Tt,qt=G(qt,!0))&&H(mn)&&V(mn,"value"))||V(mn,"get")||V(mn,"set")||mn.configurable||V(mn,"writable")&&!mn.writable||V(mn,"enumerable")&&!mn.enumerable?z(Tt,qt,mn):(Tt[qt]=mn.value,Tt)}var d=l("../internals/export"),f=l("../internals/global"),h=l("../internals/descriptors"),p=l("../internals/typed-array-constructors-require-wrappers"),m=l("../internals/array-buffer-view-core"),g=l("../internals/array-buffer"),x=l("../internals/an-instance"),E=l("../internals/create-property-descriptor"),S=l("../internals/create-non-enumerable-property"),L=l("../internals/to-length"),q=l("../internals/to-index"),J=l("../internals/to-offset"),G=l("../internals/to-primitive"),V=l("../internals/has"),K=l("../internals/classof"),H=l("../internals/is-object"),te=l("../internals/object-create"),Y=l("../internals/object-set-prototype-of"),we=l("../internals/object-get-own-property-names").f,Se=l("../internals/typed-array-from"),oe=l("../internals/array-iteration").forEach,ge=l("../internals/set-species"),re=l("../internals/object-define-property"),Q=l("../internals/object-get-own-property-descriptor"),fe=l("../internals/internal-state"),De=l("../internals/inherit-if-required"),it=fe.get,le=fe.set,z=re.f,ye=Q.f,Ue=Math.round,Je=f.RangeError,vt=g.ArrayBuffer,Ct=g.DataView,zt=m.NATIVE_ARRAY_BUFFER_VIEWS,_t=m.TYPED_ARRAY_TAG,Ft=m.TypedArray,Wt=m.TypedArrayPrototype,mt=m.aTypedArrayConstructor,Nt=m.isTypedArray,kt="BYTES_PER_ELEMENT",Ut="Wrong length";h?(zt||(Q.f=I,re.f=D,C(Wt,"buffer"),C(Wt,"byteOffset"),C(Wt,"byteLength"),C(Wt,"length")),d({target:"Object",stat:!0,forced:!zt},{getOwnPropertyDescriptor:I,defineProperty:D}),be.exports=function(vn,qt,mn){function Zn(Pn,gt){z(Pn,gt,{get:function(){var wt=this,rt=gt;return(wt=it(wt)).view[Rn](rt*An+wt.byteOffset,!0)},set:function(wt){var rt=this,bt=gt;rt=it(rt),mn&&(wt=(wt=Ue(wt))<0?0:255<wt?255:255&wt),rt.view[Er](bt*An+rt.byteOffset,wt,!0)},enumerable:!0})}var An=vn.match(/\d+$/)[0]/8,Qn=vn+(mn?"Clamped":"")+"Array",Rn="get"+vn,Er="set"+vn,Bn=f[Qn],ur=Bn,er=(vn=ur&&ur.prototype,{});zt?p&&(ur=qt(function(Pn,gt,wt,rt){return x(Pn,ur,Qn),De(H(gt)?b(gt)?void 0!==rt?new Bn(gt,J(wt,An),rt):void 0!==wt?new Bn(gt,J(wt,An)):new Bn(gt):Nt(gt)?M(ur,gt):Se.call(ur,gt):new Bn(q(gt)),Pn,ur)}),Y&&Y(ur,Ft),oe(we(Bn),function(Pn){Pn in ur||S(ur,Pn,Bn[Pn])}),ur.prototype=vn):(ur=qt(function(Pn,gt,wt,rt){x(Pn,ur,Qn);var bt,gn,On=0,$n=0;if(H(gt)){if(!b(gt))return Nt(gt)?M(ur,gt):Se.call(ur,gt);var sr=gt;if($n=J(wt,An),wt=gt.byteLength,void 0===rt){if(wt%An||(bt=wt-$n)<0)throw Je(Ut)}else if(wt<(bt=L(rt)*An)+$n)throw Je(Ut);gn=bt/An}else gn=q(gt),sr=new vt(bt=gn*An);for(le(Pn,{buffer:sr,byteOffset:$n,byteLength:bt,length:gn,view:new Ct(sr)});On<gn;)Zn(Pn,On++)}),Y&&Y(ur,Ft),vn=ur.prototype=te(Wt)),vn.constructor!==ur&&S(vn,"constructor",ur),_t&&S(vn,_t,Qn),er[Qn]=ur,d({global:!0,forced:ur!=Bn,sham:!zt},er),kt in ur||S(ur,kt,An),kt in vn||S(vn,kt,An),ge(Qn)}):be.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(w,be,Z){var M=w("../internals/global"),C=w("../internals/fails"),b=w("../internals/check-correctness-of-iteration"),I=(w=w("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,M.ArrayBuffer),D=M.Int8Array;be.exports=!w||!C(function(){D(1)})||!C(function(){new D(-1)})||!b(function(d){new D,new D(null),new D(1.5),new D(d)},!0)||C(function(){return 1!==new D(new I(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(l,be,Z){var M=l("../internals/to-object"),C=l("../internals/to-length"),b=l("../internals/get-iterator-method"),w=l("../internals/is-array-iterator-method"),I=l("../internals/function-bind-context"),D=l("../internals/array-buffer-view-core").aTypedArrayConstructor;be.exports=function(d){var f,h,p,m,g,x,E=M(d),S=arguments.length,L=1<S?arguments[1]:void 0,q=void 0!==L,J=b(E);if(null!=J&&!w(J))for(x=(g=J.call(E)).next,E=[];!(m=x.call(g)).done;)E.push(m.value);for(q&&2<S&&(L=I(L,arguments[2],2)),h=C(E.length),p=new(D(this))(h),f=0;f<h;f++)p[f]=q?L(E[f],f):E[f];return p}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(l,be,Z){var M=0,C=Math.random();be.exports=function(b){return"Symbol("+String(void 0===b?"":b)+")_"+(++M+C).toString(36)}},{}],148:[function(l,be,Z){l=l("../internals/native-symbol"),be.exports=l&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(l,be,Z){l=l("../internals/well-known-symbol"),Z.f=l},{"../internals/well-known-symbol":150}],150:[function(D,be,Z){var M=D("../internals/global"),C=D("../internals/shared"),b=D("../internals/has"),w=D("../internals/uid"),I=D("../internals/native-symbol"),d=(D=D("../internals/use-symbol-as-uid"),C("wks")),f=M.Symbol,h=D?f:f&&f.withoutSetter||w;be.exports=function(p){return b(d,p)||(d[p]=I&&b(f,p)?f[p]:h("Symbol."+p)),d[p]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(l,be,Z){be.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],152:[function(b,be,Z){"use strict";var M=b("../internals/export"),C=b("../internals/global"),I=b("../internals/array-buffer"),w=(b=b("../internals/set-species"),"ArrayBuffer");M({global:!0,forced:C[w]!==(I=I[w])},{ArrayBuffer:I}),b(w)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(E,be,Z){"use strict";var M=E("../internals/export"),C=E("../internals/fails"),b=E("../internals/is-array"),w=E("../internals/is-object"),I=E("../internals/to-object"),D=E("../internals/to-length"),d=E("../internals/create-property"),f=E("../internals/array-species-create"),h=E("../internals/array-method-has-species-support"),x=E("../internals/well-known-symbol"),p=(E=E("../internals/engine-v8-version"),x("isConcatSpreadable")),m=9007199254740991,g="Maximum allowed index exceeded";x=51<=E||!C(function(){var S=[];return S[p]=!1,S.concat()[0]!==S}),E=h("concat"),M({target:"Array",proto:!0,forced:!x||!E},{concat:function(S){for(var L,q,J,G,V,K=I(this),H=f(K,0),te=0,Y=-1,we=arguments.length;Y<we;Y++)if(V=void 0,w(G=J=-1===Y?K:arguments[Y])&&(void 0!==(V=G[p])?V:b(G))){if(q=D(J.length),m<te+q)throw TypeError(g);for(L=0;L<q;L++,te++)L in J&&d(H,te,J[L])}else{if(m<=te)throw TypeError(g);d(H,te++,J)}return H.length=te,H}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/array-copy-within");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{copyWithin:C}),b("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").every,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("every"),w=w("every"),M({target:"Array",proto:!0,forced:!b||!w},{every:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/array-fill");b=b("../internals/add-to-unscopables"),M({target:"Array",proto:!0},{fill:C}),b("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").filter,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("filter"),w=w("filter"),M({target:"Array",proto:!0,forced:!b||!w},{filter:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/array-iteration").findIndex,b=D("../internals/add-to-unscopables"),w=(D=D("../internals/array-method-uses-to-length"),"findIndex"),I=!0;D=D(w),w in[]&&Array(1)[w](function(){I=!1}),M({target:"Array",proto:!0,forced:I||!D},{findIndex:function(d){return C(this,d,1<arguments.length?arguments[1]:void 0)}}),b(w)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/flatten-into-array"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/a-function"),D=l("../internals/array-species-create");M({target:"Array",proto:!0},{flatMap:function(d){var f,h=b(this),p=w(h.length);return I(d),(f=D(h,0)).length=C(f,h,h,p,0,1,d,1<arguments.length?arguments[1]:void 0),f}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/flatten-into-array"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/to-integer"),D=l("../internals/array-species-create");M({target:"Array",proto:!0},{flat:function(){var d=arguments.length?arguments[0]:void 0,f=b(this),h=w(f.length),p=D(f,0);return p.length=C(p,f,f,h,0,void 0===d?1:I(d)),p}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(C,be,Z){"use strict";var M=C("../internals/export");C=C("../internals/array-for-each"),M({target:"Array",proto:!0,forced:[].forEach!=C},{forEach:C})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(l,be,Z){var M=l("../internals/export"),C=l("../internals/array-from");M({target:"Array",stat:!0,forced:!l("../internals/check-correctness-of-iteration")(function(b){Array.from(b)})},{from:C})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/array-includes").includes,b=l("../internals/add-to-unscopables");M({target:"Array",proto:!0,forced:!l("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(w){return C(this,w,1<arguments.length?arguments[1]:void 0)}}),b("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/array-includes").indexOf,I=D("../internals/array-method-is-strict"),b=(D=D("../internals/array-method-uses-to-length"),[].indexOf),w=!!b&&1/[1].indexOf(1,-0)<0;I=I("indexOf"),D=D("indexOf",{ACCESSORS:!0,1:0}),M({target:"Array",proto:!0,forced:w||!I||!D},{indexOf:function(d){return w?b.apply(this,arguments)||0:C(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(I,be,Z){"use strict";var M=I("../internals/to-indexed-object"),C=I("../internals/add-to-unscopables"),b=I("../internals/iterators"),w=I("../internals/internal-state"),D=(I=I("../internals/define-iterator"),"Array Iterator"),d=w.set,f=w.getterFor(D);be.exports=I(Array,"Array",function(h,p){d(this,{type:D,target:M(h),index:0,kind:p})},function(){var h=f(this),p=h.target,m=h.kind,g=h.index++;return!p||g>=p.length?{value:h.target=void 0,done:!0}:"keys"==m?{value:g,done:!1}:"values"==m?{value:p[g],done:!1}:{value:[g,p[g]],done:!1}},"values"),b.Arguments=b.Array,C("keys"),C("values"),C("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(I,be,Z){"use strict";var M=I("../internals/export"),w=I("../internals/indexed-object"),C=I("../internals/to-indexed-object"),b=(I=I("../internals/array-method-is-strict"),[].join);w=w!=Object,I=I("join",","),M({target:"Array",proto:!0,forced:w||!I},{join:function(D){return b.call(C(this),void 0===D?",":D)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(C,be,Z){C("../internals/export")({target:"Array",proto:!0,forced:(C=C("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:C})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").map,b=w("../internals/array-method-has-species-support");w=w("../internals/array-method-uses-to-length"),b=b("map"),w=w("map"),M({target:"Array",proto:!0,forced:!b||!w},{map:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(p,be,Z){"use strict";var M=p("../internals/export"),C=p("../internals/is-object"),b=p("../internals/is-array"),w=p("../internals/to-absolute-index"),I=p("../internals/to-length"),D=p("../internals/to-indexed-object"),d=p("../internals/create-property"),f=p("../internals/well-known-symbol"),h=p("../internals/array-method-has-species-support"),m=(p=p("../internals/array-method-uses-to-length"),h=h("slice"),p=p("slice",{ACCESSORS:!0,0:0,1:2}),f("species")),g=[].slice,x=Math.max;M({target:"Array",proto:!0,forced:!h||!p},{slice:function(E,S){var L,q,J,G=D(this),V=I(G.length),K=w(E,V),H=w(void 0===S?V:S,V);if(b(G)&&((L="function"==typeof(L=G.constructor)&&(L===Array||b(L.prototype))||C(L)&&null===(L=L[m])?void 0:L)===Array||void 0===L))return g.call(G,K,H);for(q=new(void 0===L?Array:L)(x(H-K,0)),J=0;K<H;K++,J++)K in G&&d(q,J,G[K]);return q.length=J,q}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(w,be,Z){"use strict";var M=w("../internals/export"),C=w("../internals/array-iteration").some,b=w("../internals/array-method-is-strict");w=w("../internals/array-method-uses-to-length"),b=b("some"),w=w("some"),M({target:"Array",proto:!0,forced:!b||!w},{some:function(I){return C(this,I,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(h,be,Z){"use strict";var M=h("../internals/export"),C=h("../internals/to-absolute-index"),b=h("../internals/to-integer"),w=h("../internals/to-length"),I=h("../internals/to-object"),D=h("../internals/array-species-create"),d=h("../internals/create-property"),f=h("../internals/array-method-has-species-support"),p=(h=h("../internals/array-method-uses-to-length"),f=f("splice"),h=h("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),m=Math.min;M({target:"Array",proto:!0,forced:!f||!h},{splice:function(te,x){var E,S,L,q,J,G,V=I(this),K=w(V.length),H=C(te,K);if(0===(te=arguments.length)?E=S=0:S=1===te?(E=0,K-H):(E=te-2,m(p(b(x),0),K-H)),9007199254740991<K+E-S)throw TypeError("Maximum allowed length exceeded");for(L=D(V,S),q=0;q<S;q++)(J=H+q)in V&&d(L,q,V[J]);if(E<(L.length=S)){for(q=H;q<K-S;q++)G=q+E,(J=q+S)in V?V[G]=V[J]:delete V[G];for(q=K;K-S+E<q;q--)delete V[q-1]}else if(S<E)for(q=K-S;H<q;q--)G=q+E-1,(J=q+S-1)in V?V[G]=V[J]:delete V[G];for(q=0;q<E;q++)V[q+H]=arguments[q+2];return V.length=K-S+E,L}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(l,be,Z){l("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(l,be,Z){l("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(C,be,Z){var M=C("../internals/descriptors"),b=(C=C("../internals/object-define-property").f,Function.prototype),w=b.toString,I=/^\s*function ([^ (]*)/;!M||"name"in b||C(b,"name",{configurable:!0,get:function(){try{return w.call(this).match(I)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(C,be,Z){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),be.exports=M("Map",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(M,be,Z){M=M("../internals/export");var C=Math.hypot,b=Math.abs,w=Math.sqrt;M({target:"Math",stat:!0,forced:!!C&&C(1/0,NaN)!==1/0},{hypot:function(I,D){for(var d,f,h=0,p=0,m=arguments.length,g=0;p<m;)g<(d=b(arguments[p++]))?(h=h*(f=g/d)*f+1,g=d):h+=0<d?(f=d/g)*f:d;return g===1/0?1/0:g*w(h)}})},{"../internals/export":50}],177:[function(M,be,Z){M=M("../internals/export");var C=Math.log,b=Math.LN2;M({target:"Math",stat:!0},{log2:function(w){return C(w)/b}})},{"../internals/export":50}],178:[function(l,be,Z){l("../internals/export")({target:"Math",stat:!0},{sign:l("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(l,be,Z){"use strict";function M(Y){var we,Se,oe,ge,re,Q,fe,De=h(Y,!1);if("string"==typeof De&&2<De.length)if(43===(Y=(De=S(De)).charCodeAt(0))||45===Y){if(88===(we=De.charCodeAt(2))||120===we)return NaN}else if(48===Y){switch(De.charCodeAt(1)){case 66:case 98:Se=2,oe=49;break;case 79:case 111:Se=8,oe=55;break;default:return+De}for(re=(ge=De.slice(2)).length,Q=0;Q<re;Q++)if((fe=ge.charCodeAt(Q))<48||oe<fe)return NaN;return parseInt(ge,Se)}return+De}var C=l("../internals/descriptors"),b=l("../internals/global"),w=l("../internals/is-forced"),I=l("../internals/redefine"),D=l("../internals/has"),d=l("../internals/classof-raw"),f=l("../internals/inherit-if-required"),h=l("../internals/to-primitive"),p=l("../internals/fails"),m=l("../internals/object-create"),g=l("../internals/object-get-own-property-names").f,x=l("../internals/object-get-own-property-descriptor").f,E=l("../internals/object-define-property").f,S=l("../internals/string-trim").trim,L="Number",q=b[L],J=q.prototype,G=d(m(J))==L;if(w(L,!q(" 0o1")||!q("0b1")||q("+0x1"))){for(var V,K=function(we){we=arguments.length<1?0:we;var Se=this;return Se instanceof K&&(G?p(function(){J.valueOf.call(Se)}):d(Se)!=L)?f(new q(M(we)),Se,K):M(we)},H=C?g(q):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),te=0;H.length>te;te++)D(q,V=H[te])&&!D(K,V)&&E(K,V,x(q,V));(K.prototype=J).constructor=K,I(b,L,K)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(l,be,Z){l("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(l,be,Z){l("../internals/export")({target:"Number",stat:!0},{isFinite:l("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(D,be,Z){"use strict";function M(h,p,m){return 0===p?m:p%2==1?M(h,p-1,m*h):M(h*h,p/2,m)}var C=D("../internals/export"),b=D("../internals/to-integer"),w=D("../internals/this-number-value"),I=D("../internals/string-repeat"),d=(D=D("../internals/fails"),1..toFixed),f=Math.floor;C({target:"Number",proto:!0,forced:d&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!D(function(){d.call({})})},{toFixed:function(L){function p(V,K){for(var H=-1,te=K;++H<6;)q[H]=(te+=V*q[H])%1e7,te=f(te/1e7)}function m(V){for(var K=6,H=0;0<=--K;)q[K]=f((H+=q[K])/V),H=H%V*1e7}function g(){for(var V,K=6,H="";0<=--K;)""===H&&0!==K&&0===q[K]||(V=String(q[K]),H=""===H?V:H+I.call("0",7-V.length)+V);return H}var x,E,S=w(this),q=(L=b(L),[0,0,0,0,0,0]),J="",G="0";if(L<0||20<L)throw RangeError("Incorrect fraction digits");if(S!=S)return"NaN";if(S<=-1e21||1e21<=S)return String(S);if(S<0&&(J="-",S=-S),1e-21<S)if(S=(x=function(V){for(var K=0,H=V;4096<=H;)K+=12,H/=4096;for(;2<=H;)K+=1,H/=2;return K}(S*M(2,69,1))-69)<0?S*M(2,-x,1):S/M(2,x,1),S*=4503599627370496,0<(x=52-x)){for(p(0,S),E=L;7<=E;)p(1e7,0),E-=7;for(p(M(10,E,1),0),E=x-1;23<=E;)m(1<<23),E-=23;m(1<<E),p(1,1),m(2),G=g()}else p(0,S),p(1<<-x,0),G=g()+I.call("0",L);return 0<L?J+((S=G.length)<=L?"0."+I.call("0",L-S)+G:G.slice(0,S-L)+"."+G.slice(S-L)):J+G}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(C,be,Z){var M=C("../internals/export");C=C("../internals/object-assign"),M({target:"Object",stat:!0,forced:Object.assign!==C},{assign:C})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(l,be,Z){var M=l("../internals/export"),C=l("../internals/object-to-array").entries;M({target:"Object",stat:!0},{entries:function(b){return C(b)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(l,be,Z){var M=l("../internals/export"),C=l("../internals/iterate"),b=l("../internals/create-property");M({target:"Object",stat:!0},{fromEntries:function(w){var I={};return C(w,function(D,d){b(I,D,d)},void 0,!0),I}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(w,be,Z){var M=w("../internals/export"),I=w("../internals/fails"),C=w("../internals/to-indexed-object"),b=w("../internals/object-get-own-property-descriptor").f;w=w("../internals/descriptors"),I=I(function(){b(1)}),M({target:"Object",stat:!0,forced:!w||I,sham:!w},{getOwnPropertyDescriptor:function(D,d){return b(C(D),d)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(b,be,Z){var M=b("../internals/export"),C=b("../internals/fails");b=b("../internals/object-get-own-property-names-external").f,M({target:"Object",stat:!0,forced:C(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:b})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(I,be,Z){var M=I("../internals/export"),C=I("../internals/fails"),b=I("../internals/to-object"),w=I("../internals/object-get-prototype-of");I=I("../internals/correct-prototype-getter"),M({target:"Object",stat:!0,forced:C(function(){w(1)}),sham:!I},{getPrototypeOf:function(D){return w(b(D))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(l,be,Z){var M=l("../internals/export"),C=l("../internals/to-object"),b=l("../internals/object-keys");M({target:"Object",stat:!0,forced:l("../internals/fails")(function(){b(1)})},{keys:function(w){return b(C(w))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(b,be,Z){var M=b("../internals/to-string-tag-support"),C=b("../internals/redefine");b=b("../internals/object-to-string"),M||C(Object.prototype,"toString",b,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(mn,be,Z){"use strict";var M,C,b,w,I=mn("../internals/export"),D=mn("../internals/is-pure"),d=mn("../internals/global"),f=mn("../internals/get-built-in"),h=mn("../internals/native-promise-constructor"),p=mn("../internals/redefine"),m=mn("../internals/redefine-all"),g=mn("../internals/set-to-string-tag"),x=mn("../internals/set-species"),E=mn("../internals/is-object"),S=mn("../internals/a-function"),L=mn("../internals/an-instance"),q=mn("../internals/classof-raw"),J=mn("../internals/inspect-source"),G=mn("../internals/iterate"),V=mn("../internals/check-correctness-of-iteration"),K=mn("../internals/species-constructor"),H=mn("../internals/task").set,te=mn("../internals/microtask"),Y=mn("../internals/promise-resolve"),we=mn("../internals/host-report-errors"),Se=mn("../internals/new-promise-capability"),oe=mn("../internals/perform"),ge=mn("../internals/internal-state"),re=mn("../internals/is-forced"),Zn=mn("../internals/well-known-symbol"),Q=mn("../internals/engine-v8-version"),fe=Zn("species"),De="Promise",it=ge.get,le=ge.set,z=ge.getterFor(De),ye=h,Ue=d.TypeError,Je=d.document,vt=d.process,Ct=f("fetch"),zt=Se.f,_t=zt,Ft="process"==q(vt),Wt=!!(Je&&Je.createEvent&&d.dispatchEvent),mt="unhandledrejection",An=(Zn=(mn=re(De,function(){var er,Pn;return J(ye)===String(ye)&&(66===Q||!Ft&&"function"!=typeof PromiseRejectionEvent)||!((!D||ye.prototype.finally)&&(51<=Q&&/native code/.test(ye)||(Pn=function(gt){gt(function(){},function(){})},((er=ye.resolve(1)).constructor={})[fe]=Pn,er.then(function(){})instanceof Pn)))}))||!V(function(er){ye.all(er).catch(function(){})}),function(er){var Pn;return!(!E(er)||"function"!=typeof(Pn=er.then))&&Pn}),Qn=function(er,Pn,gt){var wt;Pn.notified||(Pn.notified=!0,wt=Pn.reactions,te(function(){for(var rt,bt,gn=Pn.value,On=1==Pn.state,$n=0;wt.length>$n;){var sr,Cr,Rr,Fr=wt[$n++],In=On?Fr.ok:Fr.fail,cn=Fr.resolve,Tn=Fr.reject,sn=Fr.domain;try{In?(On||(2===Pn.rejection&&function(_n,tr){H.call(d,function(){Ft?vt.emit("rejectionHandled",_n):Rn("rejectionhandled",_n,tr.value)})}(er,Pn),Pn.rejection=1),!0===In?sr=gn:(sn&&sn.enter(),sr=In(gn),sn&&(sn.exit(),Rr=!0)),sr===Fr.promise?Tn(Ue("Promise-chain cycle")):(Cr=An(sr))?Cr.call(sr,cn,Tn):cn(sr)):Tn(gn)}catch(_n){sn&&!Rr&&sn.exit(),Tn(_n)}}Pn.reactions=[],Pn.notified=!1,gt&&!Pn.rejection&&(rt=er,bt=Pn,H.call(d,function(){var _n=bt.value,tr=Er(bt);if(tr&&(tr=oe(function(){Ft?vt.emit("unhandledRejection",_n,rt):Rn(mt,rt,_n)}),bt.rejection=Ft||Er(bt)?2:1,tr.error))throw tr.value}))}))},Rn=function(er,Pn,gt){var wt;Wt?((wt=Je.createEvent("Event")).promise=Pn,wt.reason=gt,wt.initEvent(er,!1,!0),d.dispatchEvent(wt)):wt={promise:Pn,reason:gt},(Pn=d["on"+er])?Pn(wt):er===mt&&we("Unhandled promise rejection",gt)},Er=function(er){return 1!==er.rejection&&!er.parent},Bn=function(er,Pn,gt,wt){return function(rt){er(Pn,gt,rt,wt)}},ur=function(er,Pn,gt,wt){Pn.done||(Pn.done=!0,(Pn=wt||Pn).value=gt,Pn.state=2,Qn(er,Pn,!0))},vn=function(er,Pn,gt,wt){if(!Pn.done){Pn.done=!0,wt&&(Pn=wt);try{if(er===gt)throw Ue("Promise can't be resolved itself");var rt=An(gt);rt?te(function(){var bt={done:!1};try{rt.call(gt,Bn(vn,er,bt,Pn),Bn(ur,er,bt,Pn))}catch(gn){ur(er,bt,gn,Pn)}}):(Pn.value=gt,Pn.state=1,Qn(er,Pn,!1))}catch(bt){ur(er,{done:!1},bt,Pn)}}};mn&&(ye=function(er){L(this,ye,De),S(er),M.call(this);var Pn=it(this);try{er(Bn(vn,this,Pn),Bn(ur,this,Pn))}catch(gt){ur(this,Pn,gt)}},(M=function(er){le(this,{type:De,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(ye.prototype,{then:function(er,Pn){var gt=z(this),wt=zt(K(this,ye));return wt.ok="function"!=typeof er||er,wt.fail="function"==typeof Pn&&Pn,wt.domain=Ft?vt.domain:void 0,gt.parent=!0,gt.reactions.push(wt),0!=gt.state&&Qn(this,gt,!1),wt.promise},catch:function(er){return this.then(void 0,er)}}),C=function(){var er=new M,Pn=it(er);this.promise=er,this.resolve=Bn(vn,er,Pn),this.reject=Bn(ur,er,Pn)},Se.f=zt=function(er){return er===ye||er===b?new C:_t(er)},D||"function"!=typeof h||(w=h.prototype.then,p(h.prototype,"then",function(er,Pn){var gt=this;return new ye(function(wt,rt){w.call(gt,wt,rt)}).then(er,Pn)},{unsafe:!0}),"function"==typeof Ct&&I({global:!0,enumerable:!0,forced:!0},{fetch:function(er){return Y(ye,Ct.apply(d,arguments))}}))),I({global:!0,wrap:!0,forced:mn},{Promise:ye}),g(ye,De,!1,!0),x(De),b=f(De),I({target:De,stat:!0,forced:mn},{reject:function(er){var Pn=zt(this);return Pn.reject.call(void 0,er),Pn.promise}}),I({target:De,stat:!0,forced:D||mn},{resolve:function(er){return Y(D&&this===b?ye:this,er)}}),I({target:De,stat:!0,forced:Zn},{all:function(er){var Pn=this,gt=zt(Pn),wt=gt.resolve,rt=gt.reject,bt=oe(function(){var gn=S(Pn.resolve),On=[],$n=0,sr=1;G(er,function(Cr){var Rr=$n++,Fr=!1;On.push(void 0),sr++,gn.call(Pn,Cr).then(function(In){Fr||(Fr=!0,On[Rr]=In,--sr||wt(On))},rt)}),--sr||wt(On)});return bt.error&&rt(bt.value),gt.promise},race:function(er){var Pn=this,gt=zt(Pn),wt=gt.reject,rt=oe(function(){var bt=S(Pn.resolve);G(er,function(gn){bt.call(Pn,gn).then(gt.resolve,wt)})});return rt.error&&wt(rt.value),gt.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(d,be,Z){var M=d("../internals/export"),m=d("../internals/get-built-in"),C=d("../internals/a-function"),b=d("../internals/an-object"),w=d("../internals/is-object"),I=d("../internals/object-create"),D=d("../internals/function-bind"),f=(d=d("../internals/fails"),m("Reflect","construct")),h=d(function(){function g(){}return!(f(function(){},[],g)instanceof g)}),p=!d(function(){f(function(){})});M({target:"Reflect",stat:!0,forced:m=h||p,sham:m},{construct:function(g,x){C(g),b(x);var E=arguments.length<3?g:C(arguments[2]);if(p&&!h)return f(g,x,E);if(g==E){switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3])}var S=[null];return S.push.apply(S,x),new(D.apply(g,S))}return E=I(w(S=E.prototype)?S:Object.prototype),S=Function.apply.call(g,E,x),w(S)?S:E}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(l,be,Z){var M=l("../internals/export"),C=l("../internals/is-object"),b=l("../internals/an-object"),w=l("../internals/has"),I=l("../internals/object-get-own-property-descriptor"),D=l("../internals/object-get-prototype-of");M({target:"Reflect",stat:!0},{get:function d(f,h){var p,m=arguments.length<3?f:arguments[2];return b(f)===m?f[h]:(p=I.f(f,h))?w(p,"value")?p.value:void 0===p.get?void 0:p.get.call(m):C(p=D(f))?d(p,h,m):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(l,be,Z){var M=l("../internals/descriptors"),C=l("../internals/global"),b=l("../internals/is-forced"),w=l("../internals/inherit-if-required"),I=l("../internals/object-define-property").f,D=l("../internals/object-get-own-property-names").f,d=l("../internals/is-regexp"),f=l("../internals/regexp-flags"),h=l("../internals/regexp-sticky-helpers"),p=l("../internals/redefine"),m=l("../internals/fails"),g=l("../internals/internal-state").set,x=l("../internals/set-species"),E=l("../internals/well-known-symbol")("match"),S=C.RegExp,L=S.prototype,q=/a/g,J=/a/g,G=new S(q)!==q,V=h.UNSUPPORTED_Y;if(M&&b("RegExp",!G||V||m(function(){return J[E]=!1,S(q)!=q||S(J)==J||"/a/i"!=S(q,"i")}))){for(var K=function(Y,we){var Se,oe=this instanceof K,ge=d(Y),re=void 0===we;return!oe&&ge&&Y.constructor===K&&re?Y:(G?ge&&!re&&(Y=Y.source):Y instanceof K&&(re&&(we=f.call(Y)),Y=Y.source),V&&(Se=!!we&&-1<we.indexOf("y"))&&(we=we.replace(/y/g,"")),ge=w(G?new S(Y,we):S(Y,we),oe?this:L,K),V&&Se&&g(ge,{sticky:Se}),ge)},H=D(S),te=0;H.length>te;)!function(Y){Y in K||I(K,Y,{configurable:!0,get:function(){return S[Y]},set:function(we){S[Y]=we}})}(H[te++]);(L.constructor=K).prototype=L,p(C,"RegExp",K)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(C,be,Z){"use strict";var M=C("../internals/export");C=C("../internals/regexp-exec"),M({target:"RegExp",proto:!0,forced:/./.exec!==C},{exec:C})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(w,be,Z){"use strict";var M=w("../internals/redefine"),C=w("../internals/an-object"),d=w("../internals/fails"),b=w("../internals/regexp-flags"),I=(w="toString",RegExp.prototype),D=I[w];((d=d(function(){return"/a/b"!=D.call({source:"a",flags:"b"})}))||D.name!=w)&&M(RegExp.prototype,w,function(){var h=C(this),p=String(h.source),m=h.flags;return"/"+p+"/"+String(void 0===m&&h instanceof RegExp&&!("flags"in I)?b.call(h):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(C,be,Z){"use strict";var M=C("../internals/collection");C=C("../internals/collection-strong"),be.exports=M("Set",function(b){return function(){return b(this,arguments.length?arguments[0]:void 0)}},C)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".endsWith),f=Math.min;h=h("endsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"endsWith"))&&!M.writable||h)},{endsWith:function(p){var m=String(I(this)),g=(w(p),1<arguments.length?arguments[1]:void 0),x=b(m.length);return g=void 0===g?x:f(b(g),x),x=String(p),d?d.call(m,x,g):m.slice(g-x.length,g)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/not-a-regexp"),b=l("../internals/require-object-coercible");M({target:"String",proto:!0,forced:!l("../internals/correct-is-regexp-logic")("includes")},{includes:function(w){return!!~String(b(this)).indexOf(C(w),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(b,be,Z){"use strict";var M=b("../internals/string-multibyte").charAt,C=b("../internals/internal-state"),w=(b=b("../internals/define-iterator"),"String Iterator"),I=C.set,D=C.getterFor(w);b(String,"String",function(d){I(this,{type:w,string:String(d),index:0})},function(){var d=D(this),f=d.string,h=d.index;return h>=f.length?{value:void 0,done:!0}:(f=M(f,h),d.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(l,be,Z){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),C=l("../internals/an-object"),b=l("../internals/to-length"),w=l("../internals/require-object-coercible"),I=l("../internals/advance-string-index"),D=l("../internals/regexp-exec-abstract");M("match",1,function(d,f,h){return[function(p){var m=w(this),g=null==p?void 0:p[d];return void 0!==g?g.call(p,m):new RegExp(p)[d](String(m))},function(p){var m=h(f,p,this);if(m.done)return m.value;var g=C(p),x=String(this);if(!g.global)return D(g,x);for(var E=g.unicode,S=[],L=g.lastIndex=0;null!==(q=D(g,x));){var q=String(q[0]);""===(S[L]=q)&&(g.lastIndex=I(x,b(g.lastIndex),E)),L++}return 0===L?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/string-pad").start;M({target:"String",proto:!0,forced:l("../internals/string-pad-webkit-bug")},{padStart:function(b){return C(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(l,be,Z){l("../internals/export")({target:"String",proto:!0},{repeat:l("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(l,be,Z){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),C=l("../internals/an-object"),b=l("../internals/to-object"),w=l("../internals/to-length"),I=l("../internals/to-integer"),D=l("../internals/require-object-coercible"),d=l("../internals/advance-string-index"),f=l("../internals/regexp-exec-abstract"),h=Math.max,p=Math.min,m=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;M("replace",2,function(E,S,L,q){var J=q.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,G=q.REPLACE_KEEPS_$0,V=J?"$":"$0";return[function(K,H){var te=D(this),Y=null==K?void 0:K[E];return void 0!==Y?Y.call(K,te,H):S.call(String(te),K,H)},function(K,H){if(!J&&G||"string"==typeof H&&-1===H.indexOf(V)){var te=L(S,K,this,H);if(te.done)return te.value}for(var Y,we=C(K),Se=String(this),oe="function"==typeof H,ge=(oe||(H=String(H)),we.global),re=(ge&&(Y=we.unicode,we.lastIndex=0),[]);null!==(le=f(we,Se))&&(re.push(le),ge);)""===String(le[0])&&(we.lastIndex=d(Se,w(we.lastIndex),Y));for(var Q,fe="",De=0,it=0;it<re.length;it++){for(var le=re[it],z=String(le[0]),ye=h(p(I(le.index),Se.length),0),Ue=[],Je=1;Je<le.length;Je++)Ue.push(void 0===(Q=le[Je])?Q:String(Q));var vt=le.groups,Ct=oe?(Ct=[z].concat(Ue,ye,Se),void 0!==vt&&Ct.push(vt),String(H.apply(void 0,Ct))):function(zt,_t,Ft,Wt,mt,Nt){var kt=Ft+zt.length,Ut=Wt.length,Tt=x;return void 0!==mt&&(mt=b(mt),Tt=g),S.call(Nt,Tt,function(qt,mn){var Zn;switch(mn.charAt(0)){case"$":return"$";case"&":return zt;case"`":return _t.slice(0,Ft);case"'":return _t.slice(kt);case"<":Zn=mt[mn.slice(1,-1)];break;default:var An,Qn=+mn;if(0==Qn)return qt;if(Ut<Qn)return 0!==(An=m(Qn/10))&&An<=Ut?void 0===Wt[An-1]?mn.charAt(1):Wt[An-1]+mn.charAt(1):qt;Zn=Wt[Qn-1]}return void 0===Zn?"":Zn})}(z,Se,ye,Ue,vt,H);De<=ye&&(fe+=Se.slice(De,ye)+Ct,De=ye+z.length)}return fe+Se.slice(De)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(l,be,Z){"use strict";var M=l("../internals/fix-regexp-well-known-symbol-logic"),C=l("../internals/an-object"),b=l("../internals/require-object-coercible"),w=l("../internals/same-value"),I=l("../internals/regexp-exec-abstract");M("search",1,function(D,d,f){return[function(h){var p=b(this),m=null==h?void 0:h[D];return void 0!==m?m.call(h,p):new RegExp(h)[D](String(p))},function(h){var p,m=f(d,h,this);return m.done?m.value:(m=C(h),h=String(this),w(p=m.lastIndex,0)||(m.lastIndex=0),h=I(m,h),w(m.lastIndex,p)||(m.lastIndex=p),null===h?-1:h.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(p,be,Z){"use strict";var M=p("../internals/fix-regexp-well-known-symbol-logic"),C=p("../internals/is-regexp"),b=p("../internals/an-object"),w=p("../internals/require-object-coercible"),I=p("../internals/species-constructor"),D=p("../internals/advance-string-index"),d=p("../internals/to-length"),f=p("../internals/regexp-exec-abstract"),h=p("../internals/regexp-exec"),m=(p=p("../internals/fails"),[].push),g=Math.min,x=4294967295,E=!p(function(){return!RegExp(x,"y")});M("split",2,function(S,L,q){var J="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(G,V){var K=String(w(this)),H=void 0===V?x:V>>>0;if(0==H)return[];if(void 0===G)return[K];if(!C(G))return L.call(K,G,H);for(var te,Y,we,Se=[],oe=(V=(G.ignoreCase?"i":"")+(G.multiline?"m":"")+(G.unicode?"u":"")+(G.sticky?"y":""),0),ge=new RegExp(G.source,V+"g");(te=h.call(ge,K))&&!(oe<(Y=ge.lastIndex)&&(Se.push(K.slice(oe,te.index)),1<te.length&&te.index<K.length&&m.apply(Se,te.slice(1)),we=te[0].length,oe=Y,Se.length>=H));)ge.lastIndex===te.index&&ge.lastIndex++;return oe===K.length?!we&&ge.test("")||Se.push(""):Se.push(K.slice(oe)),Se.length>H?Se.slice(0,H):Se}:"0".split(void 0,0).length?function(G,V){return void 0===G&&0===V?[]:L.call(this,G,V)}:L;return[function(G,V){var K=w(this),H=null==G?void 0:G[S];return void 0!==H?H.call(G,K,V):J.call(String(K),G,V)},function(te,V){if((K=q(J,te,this,V,J!==L)).done)return K.value;var K=b(te),H=String(this),Y=(te=I(K,RegExp),K.unicode),Se=new te(E?K:"^(?:"+K.source+")",(K.ignoreCase?"i":"")+(K.multiline?"m":"")+(K.unicode?"u":"")+(E?"y":"g")),oe=void 0===V?x:V>>>0;if(0==oe)return[];if(0===H.length)return null===f(Se,H)?[H]:[];for(var ge=0,re=0,Q=[];re<H.length;){Se.lastIndex=E?re:0;var fe,De=f(Se,E?H:H.slice(re));if(null===De||(fe=g(d(Se.lastIndex+(E?0:re)),H.length))===ge)re=D(H,re,Y);else{if(Q.push(H.slice(ge,re)),Q.length===oe)return Q;for(var it=1;it<=De.length-1;it++)if(Q.push(De[it]),Q.length===oe)return Q;re=ge=fe}}return Q.push(H.slice(ge)),Q}]},!E)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(D,be,Z){"use strict";var M=D("../internals/export"),C=D("../internals/object-get-own-property-descriptor").f,b=D("../internals/to-length"),w=D("../internals/not-a-regexp"),I=D("../internals/require-object-coercible"),h=D("../internals/correct-is-regexp-logic"),d=(D=D("../internals/is-pure"),"".startsWith),f=Math.min;h=h("startsWith"),M({target:"String",proto:!0,forced:!(!D&&!h&&(M=C(String.prototype,"startsWith"))&&!M.writable||h)},{startsWith:function(x){var m=String(I(this)),g=(w(x),b(f(1<arguments.length?arguments[1]:void 0,m.length)));return x=String(x),d?d.call(m,x,g):m.slice(g,g+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/create-html");M({target:"String",proto:!0,forced:l("../internals/string-html-forced")("sub")},{sub:function(){return C(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(l,be,Z){"use strict";var M=l("../internals/export"),C=l("../internals/string-trim").trim;M({target:"String",proto:!0,forced:l("../internals/string-trim-forced")("trim")},{trim:function(){return C(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(g,be,Z){"use strict";var M,C,b,w,I,D=g("../internals/export"),d=g("../internals/descriptors"),f=g("../internals/global"),h=g("../internals/has"),p=g("../internals/is-object"),m=g("../internals/object-define-property").f,x=(g=g("../internals/copy-constructor-properties"),f.Symbol);!d||"function"!=typeof x||"description"in x.prototype&&void 0===x().description||(M={},g(C=function(){var E=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),S=this instanceof C?new x(E):void 0===E?x():x(E);return""===E&&(M[S]=!0),S},x),(f=C.prototype=x.prototype).constructor=C,b=f.toString,w="Symbol(test)"==String(x("test")),I=/^Symbol\((.*)\)[^)]+$/,m(f,"description",{configurable:!0,get:function(){var E=p(this)?this.valueOf():this,S=b.call(E);return h(M,E)?"":""===(E=w?S.slice(7,-1):S.replace(I,"$1"))?void 0:E}}),D({global:!0,forced:!0},{Symbol:C}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(l,be,Z){l("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(_t,be,Z){"use strict";function M(rt,bt){var gn=Zn[rt]=K(Nt[zt]);return Ft(gn,{type:Ct,tag:rt,description:bt}),h||(gn.description=bt),gn}function C(rt,On){L(rt);var gn=J(On);return On=H(gn).concat(wt(gn)),Je(On,function($n){h&&!gt.call(gn,$n)||Pn(rt,$n,gn[$n])}),rt}function b(On,$n){var gn;if(On=J(On),$n=G($n,!0),On!==mt||!x(Zn,$n)||x(An,$n))return!(gn=Ut(On,$n))||!x(Zn,$n)||x(On,vt)&&On[vt][$n]||(gn.enumerable=!0),gn}function w(bt){bt=qt(J(bt));var gn=[];return Je(bt,function(On){x(Zn,On)||x(De,On)||gn.push(On)}),gn}var I=_t("../internals/export"),D=_t("../internals/global"),d=_t("../internals/get-built-in"),f=_t("../internals/is-pure"),h=_t("../internals/descriptors"),p=_t("../internals/native-symbol"),m=_t("../internals/use-symbol-as-uid"),g=_t("../internals/fails"),x=_t("../internals/has"),E=_t("../internals/is-array"),S=_t("../internals/is-object"),L=_t("../internals/an-object"),q=_t("../internals/to-object"),J=_t("../internals/to-indexed-object"),G=_t("../internals/to-primitive"),V=_t("../internals/create-property-descriptor"),K=_t("../internals/object-create"),H=_t("../internals/object-keys"),te=_t("../internals/object-get-own-property-names"),Y=_t("../internals/object-get-own-property-names-external"),we=_t("../internals/object-get-own-property-symbols"),Se=_t("../internals/object-get-own-property-descriptor"),oe=_t("../internals/object-define-property"),ge=_t("../internals/object-property-is-enumerable"),re=_t("../internals/create-non-enumerable-property"),Q=_t("../internals/redefine"),fe=_t("../internals/shared"),Er=_t("../internals/shared-key"),De=_t("../internals/hidden-keys"),it=_t("../internals/uid"),le=_t("../internals/well-known-symbol"),z=_t("../internals/well-known-symbol-wrapped"),ye=_t("../internals/define-well-known-symbol"),Ue=_t("../internals/set-to-string-tag"),Bn=_t("../internals/internal-state"),Je=_t("../internals/array-iteration").forEach,vt=Er("hidden"),Ct="Symbol",zt="prototype",Ft=(_t=le("toPrimitive"),Bn.set),Wt=Bn.getterFor(Ct),mt=Object[zt],Nt=D.Symbol,kt=d("JSON","stringify"),Ut=Se.f,Tt=oe.f,qt=Y.f,mn=ge.f,Zn=fe("symbols"),An=fe("op-symbols"),Qn=fe("string-to-symbol-registry"),Rn=fe("symbol-to-string-registry"),ur=(Er=fe("wks"),!(Bn=D.QObject)||!Bn[zt]||!Bn[zt].findChild),vn=h&&g(function(){return 7!=K(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a})?function(rt,bt,gn){var On=Ut(mt,bt);On&&delete mt[bt],Tt(rt,bt,gn),On&&rt!==mt&&Tt(mt,bt,On)}:Tt,er=m?function(rt){return"symbol"==typeof rt}:function(rt){return Object(rt)instanceof Nt},Pn=function(rt,bt,gn){return rt===mt&&Pn(An,bt,gn),L(rt),bt=G(bt,!0),L(gn),(x(Zn,bt)?(gn.enumerable?(x(rt,vt)&&rt[vt][bt]&&(rt[vt][bt]=!1),gn=K(gn,{enumerable:V(0,!1)})):(x(rt,vt)||Tt(rt,vt,V(1,{})),rt[vt][bt]=!0),vn):Tt)(rt,bt,gn)},gt=function(bt){bt=G(bt,!0);var gn=mn.call(this,bt);return!(this===mt&&x(Zn,bt)&&!x(An,bt))&&(!(gn||!x(this,bt)||!x(Zn,bt)||x(this,vt)&&this[vt][bt])||gn)},wt=function(gn){var bt=gn===mt,On=(gn=qt(bt?An:J(gn)),[]);return Je(gn,function($n){!x(Zn,$n)||bt&&!x(mt,$n)||On.push(Zn[$n])}),On};p||(Q((Nt=function(){if(this instanceof Nt)throw TypeError("Symbol is not a constructor");var rt=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,bt=it(rt),gn=function(On){this===mt&&gn.call(An,On),x(this,vt)&&x(this[vt],bt)&&(this[vt][bt]=!1),vn(this,bt,V(1,On))};return h&&ur&&vn(mt,bt,{configurable:!0,set:gn}),M(bt,rt)})[zt],"toString",function(){return Wt(this).tag}),Q(Nt,"withoutSetter",function(rt){return M(it(rt),rt)}),ge.f=gt,oe.f=Pn,Se.f=b,te.f=Y.f=w,we.f=wt,z.f=function(rt){return M(le(rt),rt)},h&&(Tt(Nt[zt],"description",{configurable:!0,get:function(){return Wt(this).description}}),f||Q(mt,"propertyIsEnumerable",gt,{unsafe:!0}))),I({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:Nt}),Je(H(Er),function(rt){ye(rt)}),I({target:Ct,stat:!0,forced:!p},{for:function(gn){var bt;return gn=String(gn),x(Qn,gn)?Qn[gn]:(bt=Nt(gn),Qn[gn]=bt,Rn[bt]=gn,bt)},keyFor:function(rt){if(!er(rt))throw TypeError(rt+" is not a symbol");if(x(Rn,rt))return Rn[rt]},useSetter:function(){ur=!0},useSimple:function(){ur=!1}}),I({target:"Object",stat:!0,forced:!p,sham:!h},{create:function(rt,bt){return void 0===bt?K(rt):C(K(rt),bt)},defineProperty:Pn,defineProperties:C,getOwnPropertyDescriptor:b}),I({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:w,getOwnPropertySymbols:wt}),I({target:"Object",stat:!0,forced:g(function(){we.f(1)})},{getOwnPropertySymbols:function(rt){return we.f(q(rt))}}),kt&&I({target:"JSON",stat:!0,forced:!p||g(function(){var rt=Nt();return"[null]"!=kt([rt])||"{}"!=kt({a:rt})||"{}"!=kt(Object(rt))})},{stringify:function(rt,bt,gn){for(var On,$n=[rt],sr=1;sr<arguments.length;)$n.push(arguments[sr++]);if((S(On=bt)||void 0!==rt)&&!er(rt))return E(bt)||(bt=function(Cr,Rr){if("function"==typeof On&&(Rr=On.call(this,Cr,Rr)),!er(Rr))return Rr}),$n[1]=bt,kt.apply(null,$n)}}),Nt[zt][_t]||re(Nt[zt],_t,Nt[zt].valueOf),Ue(Nt,Ct),De[vt]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-copy-within"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("copyWithin",function(w,I){return C.call(b(this),w,I,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").every,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("every",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-fill"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("fill",function(w){return C.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").filter,b=l("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("filter",function(D){for(var d=C(w(this),D,1<arguments.length?arguments[1]:void 0),f=(D=b(this,this.constructor),0),h=d.length,p=new(I(D))(h);f<h;)p[f]=d[f++];return p})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").findIndex,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("findIndex",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").find,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("find",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(l,be,Z){l("../internals/typed-array-constructor")("Float32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],220:[function(l,be,Z){l("../internals/typed-array-constructor")("Float64",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],221:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").forEach,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("forEach",function(w){C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-includes").includes,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("includes",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-includes").indexOf,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("indexOf",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(l,be,Z){l("../internals/typed-array-constructor")("Int16",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],225:[function(l,be,Z){l("../internals/typed-array-constructor")("Int32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],226:[function(C,be,Z){"use strict";function M(){return b.call(D(this))}var h=C("../internals/global"),f=C("../internals/array-buffer-view-core"),d=C("../modules/es.array.iterator"),b=(C=C("../internals/well-known-symbol")("iterator"),d.values),w=d.keys,I=d.entries,D=f.aTypedArray;d=f.exportTypedArrayMethod,h=!!(f=(h=h.Uint8Array)&&h.prototype[C])&&("values"==f.name||null==f.name),d("entries",function(){return I.call(D(this))}),d("keys",function(){return w.call(D(this))}),d("values",M,!h),d(C,M,!h)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=[].join;(C=C.exportTypedArrayMethod)("join",function(w){return b.apply(M(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-last-index-of"),b=M.aTypedArray;(0,M.exportTypedArrayMethod)("lastIndexOf",function(w){return C.apply(b(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").map,b=l("../internals/species-constructor"),w=M.aTypedArray,I=M.aTypedArrayConstructor;(0,M.exportTypedArrayMethod)("map",function(D){return C(w(this),D,1<arguments.length?arguments[1]:void 0,function(d,f){return new(I(b(d,d.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-reduce").right,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduceRight",function(w){return C(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-reduce").left,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("reduce",function(w){return C(b(this),w,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=(C=C.exportTypedArrayMethod,Math.floor);C("reverse",function(){for(var w,I=M(this).length,D=b(I/2),d=0;d<D;)w=this[d],this[d++]=this[--I],this[I]=w;return this})},{"../internals/array-buffer-view-core":12}],233:[function(I,be,Z){"use strict";var M=I("../internals/array-buffer-view-core"),C=I("../internals/to-length"),b=I("../internals/to-offset"),w=I("../internals/to-object"),D=(I=I("../internals/fails"),M.aTypedArray);(0,M.exportTypedArrayMethod)("set",function(d){D(this);var f=b(1<arguments.length?arguments[1]:void 0,1),h=this.length,p=w(d),m=C(p.length),g=0;if(h<m+f)throw RangeError("Wrong length");for(;g<m;)this[f+g]=p[g++]},I(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(C,be,Z){"use strict";var I=C("../internals/array-buffer-view-core"),M=C("../internals/species-constructor"),b=(C=C("../internals/fails"),I.aTypedArray),w=I.aTypedArrayConstructor,D=[].slice;(I=I.exportTypedArrayMethod)("slice",function(d,f){for(var h=D.call(b(this),d,f),p=(d=M(this,this.constructor),0),m=h.length,g=new(w(d))(m);p<m;)g[p]=h[p++];return g},C(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/array-iteration").some,b=M.aTypedArray;(0,M.exportTypedArrayMethod)("some",function(w){return C(b(this),w,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(C,be,Z){"use strict";var M=(C=C("../internals/array-buffer-view-core")).aTypedArray,b=[].sort;(C=C.exportTypedArrayMethod)("sort",function(w){return b.call(M(this),w)})},{"../internals/array-buffer-view-core":12}],237:[function(l,be,Z){"use strict";var M=l("../internals/array-buffer-view-core"),C=l("../internals/to-length"),b=l("../internals/to-absolute-index"),w=l("../internals/species-constructor"),I=M.aTypedArray;(0,M.exportTypedArrayMethod)("subarray",function(p,d){var f=I(this),h=f.length;return p=b(p,h),new(w(f,f.constructor))(f.buffer,f.byteOffset+p*f.BYTES_PER_ELEMENT,C((void 0===d?h:b(d,h))-p))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(C,be,Z){"use strict";var I=C("../internals/global"),M=C("../internals/array-buffer-view-core"),b=(C=C("../internals/fails"),I.Int8Array),w=M.aTypedArray,D=(I=M.exportTypedArrayMethod,[].toLocaleString),d=[].slice,f=!!b&&C(function(){D.call(new b(1))});I("toLocaleString",function(){return D.apply(f?d.call(w(this)):w(this),arguments)},C(function(){return[1,2].toLocaleString()!=new b([1,2]).toLocaleString()})||!C(function(){b.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(C,be,Z){"use strict";var M=C("../internals/array-buffer-view-core").exportTypedArrayMethod,I=C("../internals/fails"),b=(C=(C=C("../internals/global").Uint8Array)&&C.prototype||{},[].toString),w=[].join;I(function(){b.call({})})&&(b=function(){return w.call(this)}),M("toString",b,I=C.toString!=b)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(l,be,Z){l("../internals/typed-array-constructor")("Uint16",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],241:[function(l,be,Z){l("../internals/typed-array-constructor")("Uint32",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],242:[function(l,be,Z){l("../internals/typed-array-constructor")("Uint8",function(M){return function(C,b,w){return M(this,C,b,w)}})},{"../internals/typed-array-constructor":144}],243:[function(l,be,Z){l("../internals/typed-array-constructor")("Uint8",function(M){return function(C,b,w){return M(this,C,b,w)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(x,L,Z){"use strict";function M(q){return function(){return q(this,arguments.length?arguments[0]:void 0)}}var C,b,w,I,D,E=x("../internals/global"),d=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),h=x("../internals/collection"),p=x("../internals/collection-weak"),m=x("../internals/is-object"),g=x("../internals/internal-state").enforce,S=(x=x("../internals/native-weak-map"),E=!E.ActiveXObject&&"ActiveXObject"in E,Object.isExtensible);L=L.exports=h("WeakMap",M,p),x&&E&&(C=p.getConstructor(M,"WeakMap",!0),f.REQUIRED=!0,b=(h=L.prototype).delete,w=h.has,I=h.get,D=h.set,d(h,{delete:function(q){var J;return m(q)&&!S(q)?((J=g(this)).frozen||(J.frozen=new C),b.call(this,q)||J.frozen.delete(q)):b.call(this,q)},has:function(q){var J;return m(q)&&!S(q)?((J=g(this)).frozen||(J.frozen=new C),w.call(this,q)||J.frozen.has(q)):w.call(this,q)},get:function(q){var J;return!m(q)||S(q)||((J=g(this)).frozen||(J.frozen=new C),w.call(this,q))?I.call(this,q):J.frozen.get(q)},set:function(q,J){var G;return!m(q)||S(q)||((G=g(this)).frozen||(G.frozen=new C),w.call(this,q))?D.call(this,q,J):G.frozen.set(q,J),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(l,be,Z){var M,C=l("../internals/global"),b=l("../internals/dom-iterables"),w=l("../internals/array-for-each"),I=l("../internals/create-non-enumerable-property");for(M in b){var D;if((D=(D=C[M])&&D.prototype)&&D.forEach!==w)try{I(D,"forEach",w)}catch{D.forEach=w}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(D,be,Z){var M,C=D("../internals/global"),b=D("../internals/dom-iterables"),w=D("../modules/es.array.iterator"),I=D("../internals/create-non-enumerable-property"),d=(D=D("../internals/well-known-symbol"))("iterator"),f=D("toStringTag"),h=w.values;for(M in b){var p=C[M],m=p&&p.prototype;if(m){if(m[d]!==h)try{I(m,d,h)}catch{m[d]=h}if(m[f]||I(m,f,M),b[M])for(var g in w)if(m[g]!==w[g])try{I(m,g,w[g])}catch{m[g]=w[g]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(vt,be,Z){"use strict";function M(Ct){try{return decodeURIComponent(Ct)}catch{return Ct}}function C(Ct){return ye[Ct]}function b(Ct){return encodeURIComponent(Ct).replace(z,C)}function w(Ct){this.entries.length=0,Ue(this.entries,Ct)}function I(Ct,zt){if(Ct<zt)throw TypeError("Not enough arguments")}function D(){E(this,D,oe);var Ct,zt,_t,Ft,Wt,mt,Nt,kt,Ut=0<arguments.length?arguments[0]:void 0,Tt=[];if(re(this,{type:oe,entries:Tt,updateURL:function(){},updateSearchParams:w}),void 0!==Ut)if(G(Ut))if("function"==typeof(Ct=te(Ut)))for(_t=(zt=Ct.call(Ut)).next;!(Ft=_t.call(zt)).done;){if((mt=(Wt=(Ft=H(J(Ft.value))).next).call(Ft)).done||(Nt=Wt.call(Ft)).done||!Wt.call(Ft).done)throw TypeError("Expected sequence with length 2");Tt.push({key:mt.value+"",value:Nt.value+""})}else for(kt in Ut)S(Ut,kt)&&Tt.push({key:kt,value:Ut[kt]+""});else Ue(Tt,"string"==typeof Ut?"?"===Ut.charAt(0)?Ut.slice(1):Ut:Ut+"")}vt("../modules/es.array.iterator");var d=vt("../internals/export"),Se=vt("../internals/get-built-in"),f=vt("../internals/native-url"),h=vt("../internals/redefine"),p=vt("../internals/redefine-all"),m=vt("../internals/set-to-string-tag"),g=vt("../internals/create-iterator-constructor"),x=vt("../internals/internal-state"),E=vt("../internals/an-instance"),S=vt("../internals/has"),L=vt("../internals/function-bind-context"),q=vt("../internals/classof"),J=vt("../internals/an-object"),G=vt("../internals/is-object"),V=vt("../internals/object-create"),K=vt("../internals/create-property-descriptor"),H=vt("../internals/get-iterator"),te=vt("../internals/get-iterator-method"),Y=(vt=vt("../internals/well-known-symbol"),Se("fetch")),we=Se("Headers"),oe=(Se=vt("iterator"),"URLSearchParams"),ge=oe+"Iterator",re=x.set,Q=x.getterFor(oe),fe=x.getterFor(ge),De=/\+/g,it=Array(4),le=function(Ct){var zt,_t=Ct.replace(De," "),Ft=4;try{return decodeURIComponent(_t)}catch{for(;Ft;)_t=_t.replace((zt=Ft--,it[zt-1]||(it[zt-1]=RegExp("((?:%[\\da-f]{2}){"+zt+"})","gi"))),M);return _t}},z=/[!'()~]|%20/g,ye={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ue=function(Ct,zt){if(zt)for(var _t,Ft=zt.split("&"),Wt=0;Wt<Ft.length;)(_t=Ft[Wt++]).length&&(_t=_t.split("="),Ct.push({key:le(_t.shift()),value:le(_t.join("="))}))},Je=g(function(Ct,zt){re(this,{type:ge,iterator:H(Q(Ct).entries),kind:zt})},"Iterator",function(){var zt,Ct=(zt=fe(this)).kind,_t=(zt=zt.iterator.next()).value;return zt.done||(zt.value="keys"===Ct?_t.key:"values"===Ct?_t.value:[_t.key,_t.value]),zt});p(vt=D.prototype,{append:function(Ct,zt){I(arguments.length,2);var _t=Q(this);_t.entries.push({key:Ct+"",value:zt+""}),_t.updateURL()},delete:function(Ct){I(arguments.length,1);for(var zt=Q(this),_t=zt.entries,Ft=Ct+"",Wt=0;Wt<_t.length;)_t[Wt].key===Ft?_t.splice(Wt,1):Wt++;zt.updateURL()},get:function(Ct){I(arguments.length,1);for(var zt=Q(this).entries,_t=Ct+"",Ft=0;Ft<zt.length;Ft++)if(zt[Ft].key===_t)return zt[Ft].value;return null},getAll:function(Ct){I(arguments.length,1);for(var zt=Q(this).entries,_t=Ct+"",Ft=[],Wt=0;Wt<zt.length;Wt++)zt[Wt].key===_t&&Ft.push(zt[Wt].value);return Ft},has:function(Ct){I(arguments.length,1);for(var zt=Q(this).entries,_t=Ct+"",Ft=0;Ft<zt.length;)if(zt[Ft++].key===_t)return!0;return!1},set:function(Ct,zt){I(arguments.length,1);for(var _t,Ft=Q(this),Wt=Ft.entries,mt=!1,Nt=Ct+"",kt=zt+"",Ut=0;Ut<Wt.length;Ut++)(_t=Wt[Ut]).key===Nt&&(mt?Wt.splice(Ut--,1):(mt=!0,_t.value=kt));mt||Wt.push({key:Nt,value:kt}),Ft.updateURL()},sort:function(){for(var Ct,zt,_t=Q(this),Ft=_t.entries,Wt=Ft.slice(),mt=Ft.length=0;mt<Wt.length;mt++){for(Ct=Wt[mt],zt=0;zt<mt;zt++)if(Ft[zt].key>Ct.key){Ft.splice(zt,0,Ct);break}zt===mt&&Ft.push(Ct)}_t.updateURL()},forEach:function(Ct){for(var zt,_t=Q(this).entries,Ft=L(Ct,1<arguments.length?arguments[1]:void 0,3),Wt=0;Wt<_t.length;)Ft((zt=_t[Wt++]).value,zt.key,this)},keys:function(){return new Je(this,"keys")},values:function(){return new Je(this,"values")},entries:function(){return new Je(this,"entries")}},{enumerable:!0}),h(vt,Se,vt.entries),h(vt,"toString",function(){for(var Ct,zt=Q(this).entries,_t=[],Ft=0;Ft<zt.length;)Ct=zt[Ft++],_t.push(b(Ct.key)+"="+b(Ct.value));return _t.join("&")},{enumerable:!0}),m(D,oe),d({global:!0,forced:!f},{URLSearchParams:D}),f||"function"!=typeof Y||"function"!=typeof we||d({global:!0,enumerable:!0,forced:!0},{fetch:function(Wt){var zt,_t,Ft;return Wt=[Wt],1<arguments.length&&(G(zt=arguments[1])&&q(_t=zt.body)===oe&&((Ft=zt.headers?new we(zt.headers):new we).has("content-type")||Ft.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),zt=V(zt,{body:K(0,String(_t)),headers:K(0,Ft)})),Wt.push(zt)),Y.apply(this,Wt)}}),be.exports={URLSearchParams:D,getState:Q}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(H,be,Z){"use strict";function M(R){var U,ie,$,de;if("number"==typeof R){for(U=[],ie=0;ie<4;ie++)U.unshift(R%256),R=ge(R/256);return U.join(".")}if("object"!=typeof R)return R;for(U="",$=Nt(R),ie=0;ie<8;ie++)de&&0===R[ie]||(de=de&&!1,$===ie?(U+=ie?":":"::",de=!0):(U+=R[ie].toString(16),ie<7&&(U+=":")));return"["+U+"]"}function C(R){return!R.host||R.cannotBeABaseURL||"file"==R.scheme}function b(R,U,ie,$){var de,Ae,tt,pt=ie||er,Kt=0,Fe="",We=!1,at=!1,Ze=!1;for(ie||(R.scheme="",R.username="",R.password="",R.host=null,R.port=null,R.path=[],R.query=null,R.fragment=null,R.cannotBeABaseURL=!1,U=U.replace(Ft,"")),U=U.replace(Wt,""),de=q(U);Kt<=de.length;){switch(Ae=de[Kt],pt){case er:if(!Ae||!le.test(Ae)){if(ie)return fe;pt=gt;continue}Fe+=Ae.toLowerCase(),pt=Pn;break;case Pn:if(Ae&&(z.test(Ae)||"+"==Ae||"-"==Ae||"."==Ae))Fe+=Ae.toLowerCase();else{if(":"!=Ae){if(ie)return fe;Fe="",pt=gt,Kt=0;continue}if(ie&&(An(R)!=S(Zn,Fe)||"file"==Fe&&(Qn(R)||null!==R.port)||"file"==R.scheme&&!R.host))return;if(R.scheme=Fe,ie)return void(An(R)&&Zn[R.scheme]==R.port&&(R.port=null));Fe="","file"==R.scheme?pt=In:An(R)&&$&&$.scheme==R.scheme?pt=wt:An(R)?pt=On:"/"==de[Kt+1]?(pt=rt,Kt++):(R.cannotBeABaseURL=!0,R.path.push(""),pt=tr)}break;case gt:if(!$||$.cannotBeABaseURL&&"#"!=Ae)return fe;if($.cannotBeABaseURL&&"#"==Ae){R.scheme=$.scheme,R.path=$.path.slice(),R.query=$.query,R.fragment="",R.cannotBeABaseURL=!0,pt=hn;break}pt="file"==$.scheme?In:bt;continue;case wt:if("/"!=Ae||"/"!=de[Kt+1]){pt=bt;continue}pt=$n,Kt++;break;case rt:if("/"==Ae){pt=sr;break}pt=_n;continue;case bt:if(R.scheme=$.scheme,Ae==D)R.username=$.username,R.password=$.password,R.host=$.host,R.port=$.port,R.path=$.path.slice(),R.query=$.query;else if("/"==Ae||"\\"==Ae&&An(R))pt=gn;else if("?"==Ae)R.username=$.username,R.password=$.password,R.host=$.host,R.port=$.port,R.path=$.path.slice(),R.query="",pt=Xt;else{if("#"!=Ae){R.username=$.username,R.password=$.password,R.host=$.host,R.port=$.port,R.path=$.path.slice(),R.path.pop(),pt=_n;continue}R.username=$.username,R.password=$.password,R.host=$.host,R.port=$.port,R.path=$.path.slice(),R.query=$.query,R.fragment="",pt=hn}break;case gn:if(!An(R)||"/"!=Ae&&"\\"!=Ae){if("/"!=Ae){R.username=$.username,R.password=$.password,R.host=$.host,R.port=$.port,pt=_n;continue}pt=sr}else pt=$n;break;case On:if(pt=$n,"/"!=Ae||"/"!=Fe.charAt(Kt+1))continue;Kt++;break;case $n:if("/"==Ae||"\\"==Ae)break;pt=sr;continue;case sr:if("@"==Ae){We&&(Fe="%40"+Fe),We=!0;for(var xt=q(Fe),Zt=0;Zt<xt.length;Zt++){var En=xt[Zt];":"!=En||Ze?(En=mn(En,qt),Ze?R.password+=En:R.username+=En):Ze=!0}Fe=""}else if(Ae==D||"/"==Ae||"?"==Ae||"#"==Ae||"\\"==Ae&&An(R)){if(We&&""==Fe)return Q;Kt-=q(Fe).length+1,Fe="",pt=Cr}else Fe+=Ae;break;case Cr:case Rr:if(ie&&"file"==R.scheme){pt=Tn;continue}if(":"!=Ae||at){if(Ae==D||"/"==Ae||"?"==Ae||"#"==Ae||"\\"==Ae&&An(R)){if(An(R)&&""==Fe)return De;if(ie&&""==Fe&&(Qn(R)||null!==R.port))return;if(tt=mt(R,Fe))return tt;if(Fe="",pt=sn,ie)return;continue}"["==Ae?at=!0:"]"==Ae&&(at=!1),Fe+=Ae}else{if(""==Fe)return De;if(tt=mt(R,Fe))return tt;if(Fe="",pt=Fr,ie==Rr)return}break;case Fr:if(!ye.test(Ae)){if(Ae==D||"/"==Ae||"?"==Ae||"#"==Ae||"\\"==Ae&&An(R)||ie){if(""!=Fe){var zn=parseInt(Fe,10);if(65535<zn)return it;R.port=An(R)&&zn===Zn[R.scheme]?null:zn,Fe=""}if(ie)return;pt=sn;continue}return it}Fe+=Ae;break;case In:if(R.scheme="file","/"==Ae||"\\"==Ae)pt=cn;else{if(!$||"file"!=$.scheme){pt=_n;continue}if(Ae==D)R.host=$.host,R.path=$.path.slice(),R.query=$.query;else if("?"==Ae)R.host=$.host,R.path=$.path.slice(),R.query="",pt=Xt;else{if("#"!=Ae){Er(de.slice(Kt).join(""))||(R.host=$.host,R.path=$.path.slice(),Bn(R)),pt=_n;continue}R.host=$.host,R.path=$.path.slice(),R.query=$.query,R.fragment="",pt=hn}}break;case cn:if("/"==Ae||"\\"==Ae){pt=Tn;break}$&&"file"==$.scheme&&!Er(de.slice(Kt).join(""))&&(Rn($.path[0],!0)?R.path.push($.path[0]):R.host=$.host),pt=_n;continue;case Tn:if(Ae==D||"/"==Ae||"\\"==Ae||"?"==Ae||"#"==Ae){if(!ie&&Rn(Fe))pt=_n;else{if(""==Fe){if(R.host="",ie)return}else{if(tt=mt(R,Fe))return tt;if("localhost"==R.host&&(R.host=""),ie)return;Fe=""}pt=sn}continue}Fe+=Ae;break;case sn:if(An(R)){if(pt=_n,"/"!=Ae&&"\\"!=Ae)continue}else if(ie||"?"!=Ae)if(ie||"#"!=Ae){if(Ae!=D&&(pt=_n,"/"!=Ae))continue}else R.fragment="",pt=hn;else R.query="",pt=Xt;break;case _n:if(Ae==D||"/"==Ae||"\\"==Ae&&An(R)||!ie&&("?"==Ae||"#"==Ae)){if(vn(Fe)?(Bn(R),"/"==Ae||"\\"==Ae&&An(R)||R.path.push("")):ur(Fe)?"/"==Ae||"\\"==Ae&&An(R)||R.path.push(""):("file"==R.scheme&&!R.path.length&&Rn(Fe)&&(R.host&&(R.host=""),Fe=Fe.charAt(0)+":"),R.path.push(Fe)),Fe="","file"==R.scheme&&(Ae==D||"?"==Ae||"#"==Ae))for(;1<R.path.length&&""===R.path[0];)R.path.shift();"?"==Ae?(R.query="",pt=Xt):"#"==Ae&&(R.fragment="",pt=hn)}else Fe+=mn(Ae,Tt);break;case tr:"?"==Ae?(R.query="",pt=Xt):"#"==Ae?(R.fragment="",pt=hn):Ae!=D&&(R.path[0]+=mn(Ae,kt));break;case Xt:ie||"#"!=Ae?Ae!=D&&("'"==Ae&&An(R)?R.query+="%27":R.query+="#"==Ae?"%23":mn(Ae,kt)):(R.fragment="",pt=hn);break;case hn:Ae!=D&&(R.fragment+=mn(Ae,Ut))}Kt++}}function w(Ae){var U,ie,$=E(this,w,"URL"),de=1<arguments.length?arguments[1]:void 0,tt=(Ae=String(Ae),Se($,{type:"URL"}));if(void 0!==de)if(de instanceof w)U=oe(de);else if(ie=b(U={},String(de)))throw TypeError(ie);if(ie=b(tt,Ae,null,U))throw TypeError(ie);var pt=tt.searchParams=new Y;(de=we(pt)).updateSearchParams(tt.query),de.updateURL=function(){tt.query=String(pt)||null},p||($.href=Cn.call($),$.origin=Wn.call($),$.protocol=yr.call($),$.username=fr.call($),$.password=Ur.call($),$.host=vr.call($),$.hostname=ei.call($),$.port=ne.call($),$.pathname=Pe.call($),$.search=Qe.call($),$.searchParams=T.call($),$.hash=N.call($))}function I(R,U){return{get:R,set:U,configurable:!0,enumerable:!0}}H("../modules/es.string.iterator");var D,d,f,h=H("../internals/export"),p=H("../internals/descriptors"),m=H("../internals/native-url"),Fn=H("../internals/global"),g=H("../internals/object-define-properties"),x=H("../internals/redefine"),E=H("../internals/an-instance"),S=H("../internals/has"),L=H("../internals/object-assign"),q=H("../internals/array-from"),J=H("../internals/string-multibyte").codeAt,G=H("../internals/string-punycode-to-ascii"),V=H("../internals/set-to-string-tag"),K=H("../modules/web.url-search-params"),te=(H=H("../internals/internal-state"),Fn.URL),Y=K.URLSearchParams,we=K.getState,Se=H.set,oe=H.getterFor("URL"),ge=Math.floor,re=Math.pow,Q="Invalid authority",fe="Invalid scheme",De="Invalid host",it="Invalid port",le=/[A-Za-z]/,z=/[\d+-.A-Za-z]/,ye=/\d/,Ue=/^(0x|0X)/,Je=/^[0-7]+$/,vt=/^\d+$/,Ct=/^[\dA-Fa-f]+$/,zt=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,_t=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Ft=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Wt=/[\u0009\u000A\u000D]/g,mt=function(R,U){var ie,$,de;if("["==U.charAt(0))return"]"==U.charAt(U.length-1)&&(ie=function(Ae){var We,at,Ze,xt,Zt,En,zn,tt=[0,0,0,0,0,0,0,0],pt=0,Kt=null,Fe=0,or=function(){return Ae.charAt(Fe)};if(":"==or()){if(":"!=Ae.charAt(1))return;Fe+=2,Kt=++pt}for(;or();){if(8==pt)return;if(":"!=or()){for(We=at=0;at<4&&Ct.test(or());)We=16*We+parseInt(or(),16),Fe++,at++;if("."==or()){if(0==at||(Fe-=at,pt>6))return;for(Ze=0;or();){if(xt=null,Ze>0){if(!("."==or()&&Ze<4))return;Fe++}if(!ye.test(or()))return;for(;ye.test(or());){if(Zt=parseInt(or(),10),null===xt)xt=Zt;else{if(0==xt)return;xt=10*xt+Zt}if(xt>255)return;Fe++}tt[pt]=256*tt[pt]+xt,(2==++Ze||4==Ze)&&pt++}if(4!=Ze)return;break}if(":"==or()){if(Fe++,!or())return}else if(or())return;tt[pt++]=We}else{if(null!==Kt)return;Fe++,Kt=++pt}}if(null!==Kt)for(En=pt-Kt,pt=7;0!=pt&&En>0;)zn=tt[pt],tt[pt--]=tt[Kt+En-1],tt[Kt+--En]=zn;else if(8!=pt)return;return tt}(U.slice(1,-1)))?void(R.host=ie):De;if(An(R))return U=G(U),zt.test(U)||null===(ie=function(Ae){var pt,Kt,Fe,We,at,Ze,xt,tt=Ae.split(".");if(tt.length&&""==tt[tt.length-1]&&tt.pop(),(pt=tt.length)>4)return Ae;for(Kt=[],Fe=0;Fe<pt;Fe++){if(""==(We=tt[Fe]))return Ae;if(at=10,We.length>1&&"0"==We.charAt(0)&&(at=Ue.test(We)?16:8,We=We.slice(8==at?1:2)),""===We)Ze=0;else{if(!(10==at?vt:8==at?Je:Ct).test(We))return Ae;Ze=parseInt(We,at)}Kt.push(Ze)}for(Fe=0;Fe<pt;Fe++)if(Ze=Kt[Fe],Fe==pt-1){if(Ze>=re(256,5-pt))return null}else if(Ze>255)return null;for(xt=Kt.pop(),Fe=0;Fe<Kt.length;Fe++)xt+=Kt[Fe]*re(256,3-Fe);return xt}(U))?De:void(R.host=ie);if(_t.test(U))return De;for(ie="",$=q(U),de=0;de<$.length;de++)ie+=mn($[de],kt);R.host=ie},Nt=function(R){for(var U=null,ie=1,$=null,de=0,Ae=0;Ae<8;Ae++)0!==R[Ae]?(ie<de&&(U=$,ie=de),$=null,de=0):(null===$&&($=Ae),++de);return ie<de&&(U=$,ie=de),U},kt={},Ut=L({},kt,{" ":1,'"':1,"<":1,">":1,"`":1}),Tt=L({},Ut,{"#":1,"?":1,"{":1,"}":1}),qt=L({},Tt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),mn=function(R,U){var ie=J(R,0);return 32<ie&&ie<127&&!S(U,R)?R:encodeURIComponent(R)},Zn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},An=function(R){return S(Zn,R.scheme)},Qn=function(R){return""!=R.username||""!=R.password},Rn=function(R,U){return 2==R.length&&le.test(R.charAt(0))&&(":"==(R=R.charAt(1))||!U&&"|"==R)},Er=function(R){return 1<R.length&&Rn(R.slice(0,2))&&(2==R.length||"/"===(R=R.charAt(2))||"\\"===R||"?"===R||"#"===R)},Bn=function(R){var U=R.path,ie=U.length;!ie||"file"==R.scheme&&1==ie&&Rn(U[0],!0)||U.pop()},ur=function(R){return"."===R||"%2e"===R.toLowerCase()},vn=function(R){return".."===(R=R.toLowerCase())||"%2e."===R||".%2e"===R||"%2e%2e"===R},er={},Pn={},gt={},wt={},rt={},bt={},gn={},On={},$n={},sr={},Cr={},Rr={},Fr={},In={},cn={},Tn={},sn={},_n={},tr={},Xt={},hn={},Cn=(Fn=w.prototype,function(){var R=oe(this),U=R.scheme,ie=R.username,$=R.password,de=R.host,Ae=R.port,tt=R.path,pt=R.query,Kt=R.fragment,Fe=U+":";return null!==de?(Fe+="//",Qn(R)&&(Fe+=ie+($?":"+$:"")+"@"),Fe+=M(de),null!==Ae&&(Fe+=":"+Ae)):"file"==U&&(Fe+="//"),Fe+=R.cannotBeABaseURL?tt[0]:tt.length?"/"+tt.join("/"):"",null!==pt&&(Fe+="?"+pt),null!==Kt&&(Fe+="#"+Kt),Fe}),Wn=function(){var R=oe(this),U=R.scheme,ie=R.port;if("blob"==U)try{return new URL(U.path[0]).origin}catch{return"null"}return"file"!=U&&An(R)?U+"://"+M(R.host)+(null!==ie?":"+ie:""):"null"},yr=function(){return oe(this).scheme+":"},fr=function(){return oe(this).username},Ur=function(){return oe(this).password},vr=function(){var R=(U=oe(this)).host,U=U.port;return null===R?"":null===U?M(R):M(R)+":"+U},ei=function(){var R=oe(this).host;return null===R?"":M(R)},ne=function(){var R=oe(this).port;return null===R?"":String(R)},Pe=function(){var R=oe(this),U=R.path;return R.cannotBeABaseURL?U[0]:U.length?"/"+U.join("/"):""},Qe=function(){var R=oe(this).query;return R?"?"+R:""},T=function(){return oe(this).searchParams},N=function(){var R=oe(this).fragment;return R?"#"+R:""};p&&g(Fn,{href:I(Cn,function(ie){var U=oe(this);if(ie=b(U,ie=String(ie)))throw TypeError(ie);we(U.searchParams).updateSearchParams(U.query)}),origin:I(Wn),protocol:I(yr,function(R){b(oe(this),String(R)+":",er)}),username:I(fr,function(R){var U=oe(this),ie=q(String(R));if(!C(U)){U.username="";for(var $=0;$<ie.length;$++)U.username+=mn(ie[$],qt)}}),password:I(Ur,function(R){var U=oe(this),ie=q(String(R));if(!C(U)){U.password="";for(var $=0;$<ie.length;$++)U.password+=mn(ie[$],qt)}}),host:I(vr,function(R){var U=oe(this);U.cannotBeABaseURL||b(U,String(R),Cr)}),hostname:I(ei,function(R){var U=oe(this);U.cannotBeABaseURL||b(U,String(R),Rr)}),port:I(ne,function(R){var U=oe(this);C(U)||(""==(R=String(R))?U.port=null:b(U,R,Fr))}),pathname:I(Pe,function(R){var U=oe(this);U.cannotBeABaseURL||(U.path=[],b(U,R+"",sn))}),search:I(Qe,function(R){var U=oe(this);""==(R=String(R))?U.query=null:("?"==R.charAt(0)&&(R=R.slice(1)),U.query="",b(U,R,Xt)),we(U.searchParams).updateSearchParams(U.query)}),searchParams:I(T),hash:I(N,function(R){var U=oe(this);""==(R=String(R))?U.fragment=null:("#"==R.charAt(0)&&(R=R.slice(1)),U.fragment="",b(U,R,hn))})}),x(Fn,"toJSON",function(){return Cn.call(this)},{enumerable:!0}),x(Fn,"toString",function(){return Cn.call(this)},{enumerable:!0}),te&&(f=te.revokeObjectURL,(d=te.createObjectURL)&&x(w,"createObjectURL",function(R){return d.apply(te,arguments)}),f&&x(w,"revokeObjectURL",function(R){return f.apply(te,arguments)})),V(w,"URL"),h({global:!0,forced:!m,sham:!p},{URL:w})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(l,be,Z){"use strict";be.exports=l("./").polyfill()},{"./":250}],250:[function(l,be,Z){(function(M,C){var w;w=function(){"use strict";function I(mt){return"function"==typeof mt}var D=Array.isArray||function(mt){return"[object Array]"===Object.prototype.toString.call(mt)},d=0,f=void 0,h=void 0,p=function(mt,Nt){L[d]=mt,L[d+1]=Nt,2===(d+=2)&&(h?h(q):Y())},m=typeof window<"u"?window:void 0,g=(g=m||{}).MutationObserver||g.WebKitMutationObserver,x=typeof self>"u"&&void 0!==M&&"[object process]"==={}.toString.call(M),E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var mt=setTimeout;return function(){return mt(q,1)}}var L=new Array(1e3);function q(){for(var mt=0;mt<d;mt+=2)(0,L[mt])(L[mt+1]),L[mt]=void 0,L[mt+1]=void 0;d=0}var G,V,K,Y=void 0;function H(mt,Nt){var kt,Ut=this,Tt=new this.constructor(Se),qt=(void 0===Tt[we]&&Ct(Tt),Ut._state);return qt?(kt=arguments[qt-1],p(function(){return Je(qt,Tt,kt,Ut._result)})):ye(Ut,Tt,mt,Nt),Tt}function te(mt){var Nt;return mt&&"object"==typeof mt&&mt.constructor===this?mt:(De(Nt=new this(Se),mt),Nt)}Y=x?function(){return M.nextTick(q)}:g?(V=0,x=new g(q),K=document.createTextNode(""),x.observe(K,{characterData:!0}),function(){K.data=V=++V%2}):E?((G=new MessageChannel).port1.onmessage=q,function(){return G.port2.postMessage(0)}):(void 0===m&&"function"==typeof l?function J(){try{var mt=Function("return this")().require("vertx");return void 0!==(f=mt.runOnLoop||mt.runOnContext)?function(){f(q)}:S()}catch{return S()}}:S)();var we=Math.random().toString(36).substring(2);function Se(){}var oe=void 0,ge=1,re=2;function Q(mt,Nt,kt){p(function(Ut){var Tt=!1,qt=function(mn,Zn,An,Qn){try{mn.call(Zn,function(mn){Tt||(Tt=!0,(Nt!==mn?De:le)(Ut,mn))},function(mn){Tt||(Tt=!0,z(Ut,mn))})}catch(Rn){return Rn}}(kt,Nt);!Tt&&qt&&(Tt=!0,z(Ut,qt))},mt)}function fe(mt,Nt,kt){var Ut,Tt;Nt.constructor===mt.constructor&&kt===H&&Nt.constructor.resolve===te?(Ut=mt,(Tt=Nt)._state===ge?le(Ut,Tt._result):Tt._state===re?z(Ut,Tt._result):ye(Tt,void 0,function(qt){return De(Ut,qt)},function(qt){return z(Ut,qt)})):void 0!==kt&&I(kt)?Q(mt,Nt,kt):le(mt,Nt)}function De(mt,Nt){if(mt===Nt)z(mt,new TypeError("You cannot resolve a promise with itself"));else if(kt=typeof Nt,null===Nt||"object"!=kt&&"function"!=kt)le(mt,Nt);else{kt=void 0;try{kt=Nt.then}catch(Ut){return void z(mt,Ut)}fe(mt,Nt,kt)}var kt}function it(mt){mt._onerror&&mt._onerror(mt._result),Ue(mt)}function le(mt,Nt){mt._state===oe&&(mt._result=Nt,mt._state=ge,0!==mt._subscribers.length&&p(Ue,mt))}function z(mt,Nt){mt._state===oe&&(mt._state=re,mt._result=Nt,p(it,mt))}function ye(mt,Nt,kt,Ut){var Tt=mt._subscribers,qt=Tt.length;mt._onerror=null,Tt[qt]=Nt,Tt[qt+ge]=kt,Tt[qt+re]=Ut,0===qt&&mt._state&&p(Ue,mt)}function Ue(mt){var Nt=mt._subscribers,kt=mt._state;if(0!==Nt.length){for(var Ut,Tt=void 0,qt=mt._result,mn=0;mn<Nt.length;mn+=3)Tt=Nt[mn+kt],(Ut=Nt[mn])?Je(kt,Ut,Tt,qt):Tt(qt);mt._subscribers.length=0}}function Je(mt,Nt,kt,Ut){var Tt=I(kt),qt=void 0,mn=void 0,Zn=!0;if(Tt){try{qt=kt(Ut)}catch(An){Zn=!1,mn=An}if(Nt===qt)return void z(Nt,new TypeError("A promises callback cannot return that same promise."))}else qt=Ut;Nt._state===oe&&(Tt&&Zn?De(Nt,qt):!1===Zn?z(Nt,mn):mt===ge?le(Nt,qt):mt===re&&z(Nt,qt))}var vt=0;function Ct(mt){mt[we]=vt++,mt._state=void 0,mt._result=void 0,mt._subscribers=[]}_t.prototype._enumerate=function(mt){for(var Nt=0;this._state===oe&&Nt<mt.length;Nt++)this._eachEntry(mt[Nt],Nt)},_t.prototype._eachEntry=function(mt,Nt){var kt=this._instanceConstructor,Ut=kt.resolve;if(Ut===te){var Tt,qt=void 0,mn=void 0,Zn=!1;try{qt=mt.then}catch(An){Zn=!0,mn=An}qt===H&&mt._state!==oe?this._settledAt(mt._state,Nt,mt._result):"function"!=typeof qt?(this._remaining--,this._result[Nt]=mt):kt===Ft?(Tt=new kt(Se),Zn?z(Tt,mn):fe(Tt,mt,qt),this._willSettleAt(Tt,Nt)):this._willSettleAt(new kt(function(An){return An(mt)}),Nt)}else this._willSettleAt(Ut(mt),Nt)},_t.prototype._settledAt=function(mt,Nt,kt){var Ut=this.promise;Ut._state===oe&&(this._remaining--,mt===re?z(Ut,kt):this._result[Nt]=kt),0===this._remaining&&le(Ut,this._result)},_t.prototype._willSettleAt=function(mt,Nt){var kt=this;ye(mt,void 0,function(Ut){return kt._settledAt(ge,Nt,Ut)},function(Ut){return kt._settledAt(re,Nt,Ut)})};var zt=_t;function _t(mt,Nt){this._instanceConstructor=mt,this.promise=new mt(Se),this.promise[we]||Ct(this.promise),D(Nt)?(this.length=Nt.length,this._remaining=Nt.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(Nt),0!==this._remaining)||le(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}Wt.prototype.catch=function(mt){return this.then(null,mt)},Wt.prototype.finally=function(mt){var Nt=this.constructor;return I(mt)?this.then(function(kt){return Nt.resolve(mt()).then(function(){return kt})},function(kt){return Nt.resolve(mt()).then(function(){throw kt})}):this.then(mt,mt)};var Ft=Wt;function Wt(mt){if(this[we]=vt++,this._result=this._state=void 0,this._subscribers=[],Se!==mt){if("function"!=typeof mt)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Wt))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Nt=this;try{mt(function(kt){De(Nt,kt)},function(kt){z(Nt,kt)})}catch(kt){z(Nt,kt)}}}return Ft.prototype.then=H,Ft.all=function(mt){return new zt(this,mt).promise},Ft.race=function(mt){var Nt=this;return D(mt)?new Nt(function(kt,Ut){for(var Tt=mt.length,qt=0;qt<Tt;qt++)Nt.resolve(mt[qt]).then(kt,Ut)}):new Nt(function(kt,Ut){return Ut(new TypeError("You must pass an array to race."))})},Ft.resolve=te,Ft.reject=function(mt){var Nt=new this(Se);return z(Nt,mt),Nt},Ft._setScheduler=function(mt){h=mt},Ft._setAsap=function(mt){p=mt},Ft._asap=p,Ft.polyfill=function(){var mt=void 0;if(void 0!==C)mt=C;else if(typeof self<"u")mt=self;else try{mt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Nt=mt.Promise;if(Nt){var kt=null;try{kt=Object.prototype.toString.call(Nt.resolve())}catch{}if("[object Promise]"===kt&&!Nt.cast)return}mt.Promise=Ft},Ft.Promise=Ft},"object"==typeof Z&&void 0!==be?be.exports=w():this.ES6Promise=w()}).call(this,l("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(l,be,Z){var C;C=function(b,w){"use strict";function d(h){try{delete window[h]}catch{window[h]=void 0}}function f(h){(h=document.getElementById(h))&&document.getElementsByTagName("head")[0].removeChild(h)}w.exports=function(h){var p=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],m=h,g=p.timeout||5e3,x=p.jsonpCallback||"callback",E=void 0;return new Promise(function(S,L){var q=p.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),J=x+"_"+q,G=(window[q]=function(V){S({ok:!0,json:function(){return Promise.resolve(V)}}),E&&clearTimeout(E),f(J),d(q)},m+=-1===m.indexOf("?")?"?":"&",document.createElement("script"));G.setAttribute("src",""+m+x+"="+q),p.charset&&G.setAttribute("charset",p.charset),G.id=J,document.getElementsByTagName("head")[0].appendChild(G),E=setTimeout(function(){L(new Error("JSONP request to "+h+" timed out")),d(q),f(J),window[q]=function(){d(q)}},g),G.onerror=function(){L(new Error("JSONP request to "+h+" failed")),d(q),f(J),E&&clearTimeout(E)}})}},void 0!==Z&&void 0!==be?C(0,be):(C(C={exports:{}},C),this.fetchJsonp=C.exports)},{}],252:[function(l,be,Z){var M=function(C){"use strict";var b,w,I,D,d,f,p,m,g,x;if(!(void 0===C||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return b=function(){return C.URL||C.webkitURL||C},w=(x=C.document).createElementNS("http://www.w3.org/1999/xhtml","a"),I="download"in w,D=/constructor/i.test(C.HTMLElement)||C.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(E){(C.setImmediate||C.setTimeout)(function(){throw E},0)},4e4,p=function(E){setTimeout(function(){"string"==typeof E?b().revokeObjectURL(E):E.remove()},4e4)},m=function(E){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(E.type)?new Blob(["\ufeff",E],{type:E.type}):E},x=(g=function(E,S,V){V||(E=m(E));var q,J,G=this,K=(V="application/octet-stream"===E.type,function(){for(var H=G,te="writestart progress write writeend".split(" "),we=(te=[].concat(te)).length;we--;){var Se=H["on"+te[we]];if("function"==typeof Se)try{Se.call(H,H)}catch(oe){f(oe)}}});G.readyState=G.INIT,I?(q=b().createObjectURL(E),setTimeout(function(){var H,te;w.href=q,w.download=S,H=w,te=new MouseEvent("click"),H.dispatchEvent(te),K(),p(q),G.readyState=G.DONE})):(d||V&&D)&&C.FileReader?((J=new FileReader).onloadend=function(){var H=d?J.result:J.result.replace(/^data:[^;]*;/,"data:attachment/file;");C.open(H,"_blank")||(C.location.href=H),H=void 0,G.readyState=G.DONE,K()},J.readAsDataURL(E),G.readyState=G.INIT):(q=q||b().createObjectURL(E),!V&&C.open(q,"_blank")||(C.location.href=q),G.readyState=G.DONE,K(),p(q))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(E,S,L){return S=S||E.name||"download",L||(E=m(E)),navigator.msSaveOrOpenBlob(E,S)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(E,S,L){return new g(E,S||E.name||"download",L)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);void 0!==be&&be.exports&&(be.exports.saveAs=M)},{}],253:[function(l,be,Z){var M,C=Object.defineProperty,b=(C(Z,"__esModule",{value:!0}),Z),w={GIFEncoder:()=>K,applyPalette:()=>function(oe,ge,re="rgb565"){if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<ge.length)throw new Error("applyPalette() only works with 256 colors or less");const Q=new Uint32Array(oe.buffer),fe=Q.length,De="rgb444"===re?4096:65536,it=new Uint8Array(fe),le=new Array(De);if("rgba4444"===re)for(let Wt=0;Wt<fe;Wt++){var Je,z=(Je=Q[Wt])>>24&255,ye=Je>>16&255,Ue=Je>>8&255,vt=(vt=p(Je&=255,Ue,ye,z))in le?le[vt]:le[vt]=function(mt,Nt,kt,Ut,Tt){let qt=0,mn=1e100;for(let Rn=0;Rn<Tt.length;Rn++){var An=Tt[Rn],Qn=J(An[3]-Ut);Qn>mn||(Qn+=J(An[0]-mt))>mn||(Qn+=J(An[1]-Nt))>mn||(Qn+=J(An[2]-kt))>mn||(mn=Qn,qt=Rn)}return qt}(Je,Ue,ye,z,ge);it[Wt]=vt}else{const Wt="rgb444"===re?m:h;for(let mt=0;mt<fe;mt++){var _t,Ct=(_t=Q[mt])>>16&255,zt=_t>>8&255,Ft=(Ft=Wt(_t&=255,zt,Ct))in le?le[Ft]:le[Ft]=function(Nt,kt,Ut,Tt){let qt=0,mn=1e100;for(let Rn=0;Rn<Tt.length;Rn++){var An=Tt[Rn],Qn=J(An[0]-Nt);Qn>mn||(Qn+=J(An[1]-kt))>mn||(Qn+=J(An[2]-Ut))>mn||(mn=Qn,qt=Rn)}return qt}(_t,zt,Ct,ge);it[mt]=Ft}}return it},default:()=>Se,nearestColor:()=>function(oe,ge,re=L){return oe[G(oe,ge,re)]},nearestColorIndex:()=>G,nearestColorIndexWithDistance:()=>V,prequantize:()=>function(oe,{roundRGB:ge=5,roundAlpha:re=10,oneBitAlpha:Q=null}={}){const fe=new Uint32Array(oe.buffer);for(let ye=0;ye<fe.length;ye++){let Ue=(z=fe[ye])>>24&255;var it=z>>16&255,le=z>>8&255,z=255&z;Ue=q(Ue,re),Q&&(Ue=Ue<=("number"==typeof Q?Q:127)?0:255),z=q(z,ge),le=q(le,ge),it=q(it,ge),fe[ye]=Ue<<24|it<<16|le<<8|z}},quantize:()=>function(oe,ge,re={}){var{format:Q="rgb565",clearAlpha:fe=!0,clearAlphaColor:De=0,clearAlphaThreshold:it=0,oneBitAlpha:le=!1}=re;if(!oe||!oe.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(oe instanceof Uint8Array||oe instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");oe=new Uint32Array(oe.buffer);let z=!1!==re.useSqrt;const ye="rgba4444"===Q,Ue=function(Er,Bn){const vn=new Array("rgb444"===Bn?4096:65536),er=Er.length;if("rgba4444"===Bn)for(let cn=0;cn<er;++cn){var rt,Pn=(rt=Er[cn])>>24&255,gt=rt>>16&255,wt=rt>>8&255,bt=p(rt&=255,wt,gt,Pn);let Tn=bt in vn?vn[bt]:vn[bt]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=rt,Tn.gc+=wt,Tn.bc+=gt,Tn.ac+=Pn,Tn.cnt++}else if("rgb444"===Bn)for(let cn=0;cn<er;++cn){var $n,gn=($n=Er[cn])>>16&255,On=$n>>8&255,sr=m($n&=255,On,gn);let Tn=sr in vn?vn[sr]:vn[sr]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=$n,Tn.gc+=On,Tn.bc+=gn,Tn.cnt++}else for(let cn=0;cn<er;++cn){var Fr,Cr=(Fr=Er[cn])>>16&255,Rr=Fr>>8&255,In=h(Fr&=255,Rr,Cr);let Tn=In in vn?vn[In]:vn[In]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};Tn.rc+=Fr,Tn.gc+=Rr,Tn.bc+=Cr,Tn.cnt++}return vn}(oe,Q),Je=Ue.length,vt=Je-1,Ct=new Uint32Array(Je+1);for(var zt=0,_t=0;_t<Je;++_t){const Er=Ue[_t];null!=Er&&(An=1/Er.cnt,ye&&(Er.ac*=An),Er.rc*=An,Er.gc*=An,Er.bc*=An,Ue[zt++]=Er)}var Ft,Wt,mt;for(x(ge)/zt<.022&&(z=!1),_t=0;_t<zt-1;++_t)Ue[_t].fw=_t+1,Ue[_t+1].bk=_t,z&&(Ue[_t].cnt=Math.sqrt(Ue[_t].cnt));for(z&&(Ue[_t].cnt=Math.sqrt(Ue[_t].cnt)),_t=0;_t<zt;++_t){E(Ue,_t,!1);var Nt=Ue[_t].err;for(Wt=++Ct[0];1<Wt&&!(Ue[Ft=Ct[mt=Wt>>1]].err<=Nt);Wt=mt)Ct[Wt]=Ft;Ct[Wt]=_t}var kt,Ut=zt-ge;for(_t=0;_t<Ut;){for(;;){var Tt=Ct[1];if((kt=Ue[Tt]).tm>=kt.mtm&&Ue[kt.nn].mtm<=kt.tm)break;for(kt.mtm==vt?Tt=Ct[1]=Ct[Ct[0]--]:(E(Ue,Tt,!1),kt.tm=_t),Nt=Ue[Tt].err,Wt=1;(mt=Wt+Wt)<=Ct[0]&&(mt<Ct[0]&&Ue[Ct[mt]].err>Ue[Ct[mt+1]].err&&mt++,!(Nt<=Ue[Ft=Ct[mt]].err));Wt=mt)Ct[Wt]=Ft;Ct[Wt]=Tt}var qt=Ue[kt.nn],mn=kt.cnt,Zn=qt.cnt,An=1/(mn+Zn);ye&&(kt.ac=An*(mn*kt.ac+Zn*qt.ac)),kt.rc=An*(mn*kt.rc+Zn*qt.rc),kt.gc=An*(mn*kt.gc+Zn*qt.gc),kt.bc=An*(mn*kt.bc+Zn*qt.bc),kt.cnt+=qt.cnt,kt.mtm=++_t,Ue[qt.bk].fw=qt.fw,Ue[qt.fw].bk=qt.bk,qt.mtm=vt}let Qn=[];for(_t=0;;0){let Er=g(Math.round(Ue[_t].rc),0,255),Bn=g(Math.round(Ue[_t].gc),0,255),ur=g(Math.round(Ue[_t].bc),0,255),vn=255;ye&&(vn=g(Math.round(Ue[_t].ac),0,255),le&&(vn=vn<=(Rn="number"==typeof le?le:127)?0:255),fe&&vn<=it&&(Er=Bn=ur=De,vn=0));var Rn=ye?[Er,Bn,ur,vn]:[Er,Bn,ur];if(function(er,Pn){for(let rt=0;rt<er.length;rt++){var gt=(wt=er[rt])[0]===Pn[0]&&wt[1]===Pn[1]&&wt[2]===Pn[2],wt=!(4<=wt.length&&4<=Pn.length)||wt[3]===Pn[3];if(gt&&wt)return!0}return!1}(Qn,Rn)||Qn.push(Rn),0==(_t=Ue[_t].fw))break}return Qn},snapColorsToPalette:()=>function(oe,ge,re=5){if(oe.length&&ge.length){var Q=oe.map(z=>z.slice(0,3)),fe=re*re,De=oe[0].length;for(let z=0;z<ge.length;z++){let ye=ge[z];ye=ye.length<De?[ye[0],ye[1],ye[2],255]:ye.length>De?ye.slice(0,3):ye.slice();var le,it=(le=V(Q,ye.slice(0,3),L))[0];0<(le=le[1])&&le<=fe&&(oe[it]=ye)}}}};for(M in w)C(b,M,{get:w[M],enumerable:!0});var I={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function D(oe=256){let ge=0,re=new Uint8Array(oe);return{get buffer(){return re.buffer},reset(){ge=0},bytesView:()=>re.subarray(0,ge),bytes:()=>re.slice(0,ge),writeByte(fe){Q(ge+1),re[ge]=fe,ge++},writeBytes(fe,De=0,it=fe.length){Q(ge+it);for(let le=0;le<it;le++)re[ge++]=fe[le+De]},writeBytesView(fe,De=0,it=fe.byteLength){Q(ge+it),re.set(fe.subarray(De,De+it),ge),ge+=it}};function Q(fe){var De=re.length;if(!(fe<=De)){fe=Math.max(fe,De*(De<1048576?2:1.125)>>>0),0!=De&&(fe=Math.max(fe,256));const it=re;re=new Uint8Array(fe),0<ge&&re.set(it.subarray(0,ge),0)}}}var d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(oe,ge,re,ye,fe=D(512),De=new Uint8Array(256),it=new Int32Array(5003),le=new Int32Array(5003)){var z=it.length;ye=Math.max(2,ye),De.fill(0),le.fill(0),it.fill(-1);let Ue=0,Je=0;var vt=ye+1;const Ct=vt;let zt=!1,_t=Ct,Ft=(1<<_t)-1;var Wt=1<<vt-1;const mt=1+Wt;let Nt=2+Wt,kt=0,Ut=re[0],Tt=0;for(let Rn=z;Rn<65536;Rn*=2)++Tt;Tt=8-Tt,fe.writeByte(ye),Qn(Wt);var qt=re.length;for(let Rn=1;Rn<qt;Rn++)e:{var mn=re[Rn],Zn=(mn<<12)+Ut;let Er=mn<<Tt^Ut;if(it[Er]===Zn)Ut=le[Er];else{for(var An=0===Er?1:z-Er;0<=it[Er];)if((Er-=An)<0&&(Er+=z),it[Er]===Zn){Ut=le[Er];break e}Qn(Ut),Ut=mn,Nt<4096?(le[Er]=Nt++,it[Er]=Zn):(it.fill(-1),Nt=2+Wt,zt=!0,Qn(Wt))}}return Qn(Ut),Qn(mt),fe.writeByte(0),fe.bytesView();function Qn(Rn){for(Ue&=d[Je],0<Je?Ue|=Rn<<Je:Ue=Rn,Je+=_t;8<=Je;)De[kt++]=255&Ue,254<=kt&&(fe.writeByte(kt),fe.writeBytesView(De,0,kt),kt=0),Ue>>=8,Je-=8;if((Nt>Ft||zt)&&(zt?(_t=Ct,Ft=(1<<_t)-1,zt=!1):(++_t,Ft=12===_t?1<<_t:(1<<_t)-1)),Rn==mt){for(;0<Je;)De[kt++]=255&Ue,254<=kt&&(fe.writeByte(kt),fe.writeBytesView(De,0,kt),kt=0),Ue>>=8,Je-=8;0<kt&&(fe.writeByte(kt),fe.writeBytesView(De,0,kt),kt=0)}}};function h(oe,ge,re){return oe<<8&63488|ge<<2&992|re>>3}function p(oe,ge,re,Q){return oe>>4|240&ge|(240&re)<<4|(240&Q)<<8}function m(oe,ge,re){return oe>>4<<8|240&ge|re>>4}function g(oe,ge,re){return oe<ge?ge:re<oe?re:oe}function x(oe){return oe*oe}function E(oe,ge,re){var Q=0,fe=1e100;const De=oe[ge];for(var it=De.cnt,le=De.ac,z=De.rc,ye=De.gc,Ue=De.bc,Je=De.fw;0!=Je;Je=oe[Je].fw){var vt,zt,Ct=oe[Je];fe<=(zt=it*(zt=Ct.cnt)/(it+zt))||(vt=0,re&&fe<=(vt+=zt*x(Ct.ac-le))||fe<=(vt+=zt*x(Ct.rc-z))||fe<=(vt+=zt*x(Ct.gc-ye))||fe<=(vt+=zt*x(Ct.bc-Ue))||(fe=vt,Q=Je))}De.err=fe,De.nn=Q}function L(oe,ge){for(var re=0,Q=0;Q<oe.length;Q++){var fe=oe[Q]-ge[Q];re+=fe*fe}return re}function q(oe,ge){return 1<ge?Math.round(oe/ge)*ge:oe}function J(oe){return oe*oe}function G(oe,ge,re=L){let Q=1/0,fe=-1;for(let it=0;it<oe.length;it++){var De=re(ge,oe[it]);De<Q&&(Q=De,fe=it)}return fe}function V(oe,ge,re=L){let Q=1/0,fe=-1;for(let it=0;it<oe.length;it++){var De=re(ge,oe[it]);De<Q&&(Q=De,fe=it)}return[fe,Q]}function K(oe={}){const{initialCapacity:ge=4096,auto:re=!0}=oe,Q=D(ge),fe=new Uint8Array(256),De=new Int32Array(5003),it=new Int32Array(5003);let le=!1;return{reset(){Q.reset(),le=!1},finish(){Q.writeByte(I.trailer)},bytes:()=>Q.bytes(),bytesView:()=>Q.bytesView(),get buffer(){return Q.buffer},get stream(){return Q},writeHeader:z,writeFrame(ye,Ue,Je,Ut={}){var{transparent:Ct=!1,transparentIndex:zt=0,delay:An=0,palette:_t=null,repeat:qt=0,colorDepth:Ft=8,dispose:Wt=-1}=Ut;let mt=!1;if(re?le||(mt=!0,z(),le=!0):mt=!!Ut.first,Ue=Math.max(0,Math.floor(Ue)),Je=Math.max(0,Math.floor(Je)),mt){if(!_t)throw new Error("First frame must include a { palette } option");var[Ut,mn,kt,Zn,Tt=8]=[Q,Ue,Je,_t,Ft];Tt=128|Tt-1<<4|(Zn=we(Zn.length)-1),te(Ut,mn),te(Ut,kt),Ut.writeBytes([Tt,0,0]),H(Q,_t),0<=qt&&(mn=qt,(Zn=Q).writeByte(33),Zn.writeByte(255),Zn.writeByte(11),Y(Zn,"NETSCAPE2.0"),Zn.writeByte(3),Zn.writeByte(1),te(Zn,mn),Zn.writeByte(0))}var Nt,kt,Tt=Wt,qt=kt=Math.round(An/10),mn=Ct,Zn=zt,An=((Ut=Q).writeByte(33),Ut.writeByte(249),Ut.writeByte(4),Zn<0&&(Zn=0,mn=!1),mn=mn?(Nt=1,2):Nt=0,0<=Tt&&(mn=7&Tt),Ut.writeByte((mn<<=2)|Nt),te(Ut,qt),Ut.writeByte(Zn||0),Ut.writeByte(0),!!_t&&!mt);Ct=Ue,zt=Je,Nt=An?_t:null,(Wt=Q).writeByte(44),te(Wt,0),te(Wt,0),te(Wt,Ct),te(Wt,zt),Nt?(Ct=we(Nt.length)-1,Wt.writeByte(128|Ct)):Wt.writeByte(0),An&&H(Q,_t),[qt,Ut,zt,Ct,Wt=8,An,_t,ye]=[Q,ye,Ue,Je,Ft,fe,De,it],f(zt,Ct,Ut,Wt,qt,An,_t,ye)}};function z(){Y(Q,"GIF89a")}}function H(oe,ge){var re=1<<we(ge.length);for(let Q=0;Q<re;Q++){let fe=[0,0,0];Q<ge.length&&(fe=ge[Q]),oe.writeByte(fe[0]),oe.writeByte(fe[1]),oe.writeByte(fe[2])}}function te(oe,ge){oe.writeByte(255&ge),oe.writeByte(ge>>8&255)}function Y(oe,ge){for(var re=0;re<ge.length;re++)oe.writeByte(ge.charCodeAt(re))}function we(oe){return Math.max(Math.ceil(Math.log2(oe)),1)}var Se=K},{}],254:[function(l,be,Z){Z.read=function(M,C,b,w,E){var D,d,f=8*E-w-1,h=(1<<f)-1,p=h>>1,m=-7,g=b?E-1:0,x=b?-1:1;for(E=M[C+g],g+=x,D=E&(1<<-m)-1,E>>=-m,m+=f;0<m;D=256*D+M[C+g],g+=x,m-=8);for(d=D&(1<<-m)-1,D>>=-m,m+=w;0<m;d=256*d+M[C+g],g+=x,m-=8);if(0===D)D=1-p;else{if(D===h)return d?NaN:1/0*(E?-1:1);d+=Math.pow(2,w),D-=p}return(E?-1:1)*d*Math.pow(2,D-w)},Z.write=function(M,C,b,w,I,S){var d,f,h=8*S-I-1,p=(1<<h)-1,m=p>>1,g=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,x=w?0:S-1,E=w?1:-1;for(S=C<0||0===C&&1/C<0?1:0,C=Math.abs(C),isNaN(C)||C===1/0?(f=isNaN(C)?1:0,d=p):(d=Math.floor(Math.log(C)/Math.LN2),C*(w=Math.pow(2,-d))<1&&(d--,w*=2),2<=(C+=1<=d+m?g/w:g*Math.pow(2,1-m))*w&&(d++,w/=2),p<=d+m?(f=0,d=p):1<=d+m?(f=(C*w-1)*Math.pow(2,I),d+=m):(f=C*Math.pow(2,m-1)*Math.pow(2,I),d=0));8<=I;M[b+x]=255&f,x+=E,f/=256,I-=8);for(d=d<<I|f,h+=I;0<h;M[b+x]=255&d,x+=E,d/=256,h-=8);M[b+x-E]|=128*S}},{}],255:[function(l,be,Z){"use strict";var M;function C(gt,wt){return gt.b===wt.b&&gt.a===wt.a}function b(gt,wt){return gt.b<wt.b||gt.b===wt.b&&gt.a<=wt.a}function w(gt,wt,rt){var bt=wt.b-gt.b,gn=rt.b-wt.b;return 0<bt+gn?bt<gn?wt.a-gt.a+bt/(bt+gn)*(gt.a-rt.a):wt.a-rt.a+gn/(bt+gn)*(rt.a-gt.a):0}function I(gt,wt,rt){var bt=wt.b-gt.b,gn=rt.b-wt.b;return 0<bt+gn?(wt.a-rt.a)*bt+(wt.a-gt.a)*gn:0}function D(gt,wt){return gt.a<wt.a||gt.a===wt.a&&gt.b<=wt.b}function d(gt,wt,rt){var bt=wt.a-gt.a,gn=rt.a-wt.a;return 0<bt+gn?bt<gn?wt.b-gt.b+bt/(bt+gn)*(gt.b-rt.b):wt.b-rt.b+gn/(bt+gn)*(rt.b-gt.b):0}function f(gt,wt,rt){var bt=wt.a-gt.a,gn=rt.a-wt.a;return 0<bt+gn?(wt.b-rt.b)*bt+(wt.b-gt.b)*gn:0}function h(gt,wt,rt,bt){return(gt=gt<0?0:gt)<=(rt=rt<0?0:rt)?0===rt?(wt+bt)/2:wt+gt/(gt+rt)*(bt-wt):bt+rt/(gt+rt)*(wt-bt)}function p(gt){var wt=S(gt.b);return q(wt,gt.c),q(wt.b,gt.c),J(wt,gt.a),wt}function m(gt,wt){var rt=!1,bt=!1;gt!==wt&&(wt.a!==gt.a&&(bt=!0,V(wt.a,gt.a)),wt.d!==gt.d&&(rt=!0,K(wt.d,gt.d)),L(wt,gt),bt||(q(wt,gt.a),gt.a.c=gt),rt||(J(wt,gt.d),gt.d.a=gt))}function g(gt){var wt=gt.b,rt=!1;gt.d!==gt.b.d&&(rt=!0,K(gt.d,gt.b.d)),gt.c===gt?V(gt.a,null):(gt.b.d.a=gt.b.e,gt.a.c=gt.c,L(gt,gt.b.e),rt||J(gt,gt.d)),wt.c===wt?(V(wt.a,null),K(wt.d,null)):(gt.d.a=wt.b.e,wt.a.c=wt.c,L(wt,wt.b.e)),G(gt)}function x(gt){var wt=S(gt),rt=wt.b;return L(wt,gt.e),wt.a=gt.b.a,q(rt,wt.a),wt.d=rt.d=gt.d,wt=wt.b,L(gt.b,gt.b.b.e),L(gt.b,wt),gt.b.a=wt.a,wt.b.a.c=wt.b,wt.b.d=gt.b.d,wt.f=gt.f,wt.b.f=gt.b.f,wt}function E(gt,wt){var rt=!1,bt=S(gt),gn=bt.b;return wt.d!==gt.d&&(rt=!0,K(wt.d,gt.d)),L(bt,gt.e),L(gn,wt),bt.a=gt.b.a,gn.a=wt.a,bt.d=gn.d=gt.d,gt.d.a=gn,rt||J(bt,gt.d),bt}function S(gt){var wt=new kt,rt=new kt;return(((rt.h=gt.b.h).b.h=wt).h=gt).b.h=rt,wt.b=rt,((wt.c=wt).e=rt).b=wt,(rt.c=rt).e=wt}function L(gt,wt){var rt=gt.c,bt=wt.c;rt.b.e=wt,(bt.b.e=gt).c=bt,wt.c=rt}function q(gt,wt){var rt=wt.f,bt=new Tt(wt,rt);for(rt.e=bt,rt=(wt.f=bt).c=gt;rt.a=bt,(rt=rt.c)!==gt;);}function J(gt,wt){var rt=wt.d,bt=new Nt(wt,rt);for(rt.b=bt,(wt.d=bt).a=gt,bt.c=wt.c,rt=gt;rt.d=bt,(rt=rt.e)!==gt;);}function G(gt){var wt=gt.h;(wt.b.h=gt=gt.b.h).b.h=wt}function V(gt,wt){for(var rt=gt.c,bt=rt;bt.a=wt,(bt=bt.c)!==rt;);((bt=gt.e).f=rt=gt.f).e=bt}function K(gt,wt){for(var rt=gt.a,bt=rt;bt.d=wt,(bt=bt.e)!==rt;);((bt=gt.b).d=rt=gt.d).b=bt}function H(gt){var wt=0;return Math.abs(gt[1])>Math.abs(gt[0])&&(wt=1),Math.abs(gt[2])>Math.abs(gt[wt])?2:wt}function te(gt,wt){gt.f+=wt.f,gt.b.f+=wt.b.f}function Y(gt,wt,rt){return rt=rt.a,(wt=wt.a).b.a===(gt=gt.a)?rt.b.a===gt?b(wt.a,rt.a)?I(rt.b.a,wt.a,rt.a)<=0:0<=I(wt.b.a,rt.a,wt.a):I(rt.b.a,gt,rt.a)<=0:rt.b.a===gt?0<=I(wt.b.a,gt,wt.a):(wt=w(wt.b.a,gt,wt.a),(gt=w(rt.b.a,gt,rt.a))<=wt)}function we(gt){gt.a.i=null;var wt=gt.e;wt.a.c=wt.c,wt.c.a=wt.a,gt.e=null}function Se(gt,wt){g(gt.a),gt.c=!1,(gt.a=wt).i=gt}function oe(gt){for(var wt=gt.a.a;(gt=Pn(gt)).a.a===wt;);return gt.c&&(Se(gt,wt=E(er(gt).a.b,gt.a.e)),gt=Pn(gt)),gt}function ge(gt,wt,rt){var bt=new vn;return bt.a=rt,bt.e=zt(gt.f,wt.e,bt),rt.i=bt}function re(gt,wt){switch(gt.s){case 100130:return!!(1&wt);case 100131:return 0!==wt;case 100132:return 0<wt;case 100133:return wt<0;case 100134:return 2<=wt||wt<=-2}return!1}function Q(gt){var wt=gt.a,rt=wt.d;rt.c=gt.d,rt.a=wt,we(gt)}function fe(gt,wt,rt){for(wt=(gt=wt).a;gt!==rt;){gt.c=!1;var bt=er(gt),gn=bt.a;if(gn.a!==wt.a){if(!bt.c){Q(gt);break}Se(bt,gn=E(wt.c.b,gn.b))}wt.c!==gn&&(m(gn.b.e,gn),m(wt,gn)),Q(gt),wt=bt.a,gt=bt}return wt}function De(gt,wt,rt,bt,gn,On){for(var $n=!0;ge(gt,wt,rt.b),(rt=rt.c)!==bt;);for(null===gn&&(gn=er(wt).a.b.c);(rt=(bt=er(wt)).a.b).a===gn.a;)rt.c!==gn&&(m(rt.b.e,rt),m(gn.b.e,rt)),bt.f=wt.f-rt.f,bt.d=re(gt,bt.f),wt.b=!0,!$n&&ye(gt,wt)&&(te(rt,gn),we(wt),g(gn)),$n=!1,wt=bt,gn=rt;wt.b=!0,On&&Je(gt,wt)}function it(gt,wt,rt,bt,gn){var On=[wt.g[0],wt.g[1],wt.g[2]];wt.d=null,wt.d=gt.o&&gt.o(On,rt,bt,gt.c)||null,null===wt.d&&(gn?gt.n||(mt(gt,100156),gt.n=!0):wt.d=rt[0])}function le(gt,wt,rt){var bt=[null,null,null,null];bt[0]=wt.a.d,bt[1]=rt.a.d,it(gt,wt.a,bt,[.5,.5,0,0],!1),m(wt,rt)}function z(gt,wt,rt,bt,gn){var On=Math.abs(wt.b-gt.b)+Math.abs(wt.a-gt.a),$n=Math.abs(rt.b-gt.b)+Math.abs(rt.a-gt.a),sr=gn+1;bt[gn]=.5*$n/(On+$n),bt[sr]=.5*On/(On+$n),gt.g[0]+=bt[gn]*wt.g[0]+bt[sr]*rt.g[0],gt.g[1]+=bt[gn]*wt.g[1]+bt[sr]*rt.g[1],gt.g[2]+=bt[gn]*wt.g[2]+bt[sr]*rt.g[2]}function ye(gt,wt){var rt=er(wt),bt=wt.a,gn=rt.a;if(b(bt.a,gn.a)){if(0<I(gn.b.a,bt.a,gn.a))return;if(C(bt.a,gn.a)){if(bt.a!==gn.a){rt=gt.e;var On=bt.a.h;if(0<=On){var $n=(rt=rt.b).d,sr=rt.e,Cr=rt.c,Rr=Cr[On];$n[Rr]=$n[rt.a],(Cr[$n[Rr]]=Rr)<=--rt.a&&(Rr<=1||b(sr[$n[Rr>>1]],sr[$n[Rr]])?Bn:ur)(rt,Rr),sr[On]=null,Cr[On]=rt.b,rt.b=On}else for(rt.c[-(On+1)]=null;0<rt.a&&null===rt.c[rt.d[rt.a-1]];)--rt.a;le(gt,gn.b.e,bt)}}else x(gn.b),m(bt,gn.b.e),wt.b=rt.b=!0}else{if(I(bt.b.a,gn.a,bt.a)<0)return;Pn(wt).b=wt.b=!0,x(bt.b),m(gn.b.e,bt)}return 1}function Ue(gt,wt){var rt=er(wt),bt=wt.a,gn=rt.a,On=bt.a,$n=gn.a,sr=bt.b.a,Cr=gn.b.a,Rr=new Tt;if(I(sr,gt.a,On),I(Cr,gt.a,$n),!(On===$n||Math.min(On.a,sr.a)>Math.max($n.a,Cr.a))){if(b(On,$n)){if(0<I(Cr,On,$n))return}else if(I(sr,$n,On)<0)return;var Fr,In,cn=sr,Tn=On,sn=Cr,_n=$n;if(b(cn,Tn)||(Fr=cn,cn=Tn,Tn=Fr),b(sn,_n)||(Fr=sn,sn=_n,_n=Fr),b(cn,sn)||(Fr=cn,cn=sn,sn=Fr,Fr=Tn,Tn=_n,_n=Fr),b(sn,Tn)?b(Tn,_n)?((Fr=w(cn,sn,Tn))+(In=w(sn,Tn,_n))<0&&(Fr=-Fr,In=-In),Rr.b=h(Fr,sn.b,In,Tn.b)):((Fr=I(cn,sn,Tn))+(In=-I(cn,_n,Tn))<0&&(Fr=-Fr,In=-In),Rr.b=h(Fr,sn.b,In,_n.b)):Rr.b=(sn.b+Tn.b)/2,D(cn,Tn)||(Fr=cn,cn=Tn,Tn=Fr),D(sn,_n)||(Fr=sn,sn=_n,_n=Fr),D(cn,sn)||(Fr=cn,cn=sn,sn=Fr,Fr=Tn,Tn=_n,_n=Fr),D(sn,Tn)?D(Tn,_n)?((Fr=d(cn,sn,Tn))+(In=d(sn,Tn,_n))<0&&(Fr=-Fr,In=-In),Rr.a=h(Fr,sn.a,In,Tn.a)):((Fr=f(cn,sn,Tn))+(In=-f(cn,_n,Tn))<0&&(Fr=-Fr,In=-In),Rr.a=h(Fr,sn.a,In,_n.a)):Rr.a=(sn.a+Tn.a)/2,b(Rr,gt.a)&&(Rr.b=gt.a.b,Rr.a=gt.a.a),cn=b(On,$n)?On:$n,b(cn,Rr)&&(Rr.b=cn.b,Rr.a=cn.a),C(Rr,On)||C(Rr,$n))return ye(gt,wt),0;if(!C(sr,gt.a)&&0<=I(sr,gt.a,Rr)||!C(Cr,gt.a)&&I(Cr,gt.a,Rr)<=0){if(Cr===gt.a)x(bt.b),m(gn.b,bt),bt=er(wt=oe(wt)).a,fe(gt,er(wt),rt),De(gt,wt,bt.b.e,bt,bt,!0);else{if(sr!==gt.a)return 0<=I(sr,gt.a,Rr)&&(Pn(wt).b=wt.b=!0,x(bt.b),bt.a.b=gt.a.b,bt.a.a=gt.a.a),void(I(Cr,gt.a,Rr)<=0&&(wt.b=rt.b=!0,x(gn.b),gn.a.b=gt.a.b,gn.a.a=gt.a.a));for(x(gn.b),m(bt.e,gn.b.e),$n=(On=rt=wt).a.b.a;(On=Pn(On)).a.b.a===$n;);On=er(wt=On).a.b.c,rt.a=gn.b.e,De(gt,wt,(gn=fe(gt,rt,null)).c,bt.b.c,On,!0)}return 1}x(bt.b),x(gn.b),m(gn.b.e,bt),bt.a.b=Rr.b,bt.a.a=Rr.a,bt.a.h=mn(gt.e,bt.a),gn=[0,0,0,0],Rr=[On.d,sr.d,$n.d,Cr.d],(bt=bt.a).g[0]=bt.g[1]=bt.g[2]=0,z(bt,On,sr,gn,0),z(bt,$n,Cr,gn,2),it(gt,bt,Rr,gn,!0),Pn(wt).b=wt.b=rt.b=!0}}function Je(gt,wt){for(var rt=er(wt);;){for(;rt.b;)rt=er(wt=rt);if(!(wt.b||null!==(wt=Pn(rt=wt))&&wt.b))break;wt.b=!1;var bt=wt.a,gn=rt.a;if(On=bt.b.a!==gn.b.a)e:{var On,$n=er(On=wt),sr=On.a,Cr=$n.a,Rr=void 0;if(b(sr.b.a,Cr.b.a)){if(I(sr.b.a,Cr.b.a,sr.a)<0){On=!1;break e}Pn(On).b=On.b=!0,Rr=x(sr),m(Cr.b,Rr),Rr.d.c=On.d}else{if(0<I(Cr.b.a,sr.b.a,Cr.a)){On=!1;break e}On.b=$n.b=!0,Rr=x(Cr),m(sr.e,Cr.b),Rr.b.d.c=On.d}On=!0}if(On&&(rt.c?(we(rt),g(gn),gn=(rt=er(wt)).a):wt.c&&(we(wt),g(bt),bt=(wt=Pn(rt)).a)),bt.a!==gn.a)if(bt.b.a===gn.b.a||wt.c||rt.c||bt.b.a!==gt.a&&gn.b.a!==gt.a)ye(gt,wt);else if(Ue(gt,wt))break;bt.a===gn.a&&bt.b.a===gn.b.a&&(te(gn,bt),we(wt),g(bt),wt=Pn(rt))}}function vt(gt,wt){var rt=new vn,bt=p(gt.b);bt.a.b=4e150,bt.a.a=wt,bt.b.a.b=-4e150,bt.b.a.a=wt,gt.a=bt.b.a,rt.a=bt,rt.f=0,rt.d=!1,rt.c=!1,rt.h=!0,rt.b=!1,bt=zt(bt=gt.f,bt.a,rt),rt.e=bt}function Ct(gt){this.a=new _t,this.b=gt,this.c=Y}function zt(gt,wt,rt){for(;null!==(wt=wt.c).b&&!gt.c(gt.b,wt.b,rt););return gt=new _t(rt,wt.a,wt),wt.a.c=gt,wt.a=gt}function _t(gt,wt,rt){this.b=gt||null,this.a=wt||this,this.c=rt||this}function Ft(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Wt(gt,wt){if(gt.d!==wt)for(;gt.d!==wt;)if(gt.d<wt)switch(gt.d){case 0:mt(gt,100151),gt.u(null);break;case 1:mt(gt,100152),gt.t()}else switch(gt.d){case 2:mt(gt,100154),gt.v();break;case 1:mt(gt,100153),gt.w()}}function mt(gt,wt){gt.p&&gt.p(wt,gt.c)}function Nt(gt,wt){this.b=gt||this,this.d=wt||this,this.a=null,this.c=!1}function kt(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ut(){this.c=new Tt,this.a=new Nt,this.b=new kt,this.d=new kt,this.b.b=this.d,this.d.b=this.b}function Tt(gt,wt){this.e=gt||this,this.f=wt||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function qt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new An}function mn(gt,wt){var rt,bt,gn;return gt.e?(2*(bt=++(rt=gt.b).a)>rt.f&&(rt.f*=2,rt.c=Qn(rt.c,rt.f+1)),0===rt.b?gn=bt:(gn=rt.b,rt.b=rt.c[rt.b]),rt.e[gn]=wt,rt.c[gn]=bt,rt.d[bt]=gn,rt.h&&ur(rt,bt),gn):(rt=gt.a++,gt.c[rt]=wt,-(rt+1))}function Zn(gt){if(0===gt.a)return Er(gt.b);var wt=gt.c[gt.d[gt.a-1]];if(0!==gt.b.a&&b(Rn(gt.b),wt))return Er(gt.b);for(;--gt.a,0<gt.a&&null===gt.c[gt.d[gt.a-1]];);return wt}function An(){this.d=Qn([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Qn(gt,wt){for(var rt=Array(wt),bt=0;bt<gt.length;bt++)rt[bt]=gt[bt];for(;bt<wt;bt++)rt[bt]=0;return rt}function Rn(gt){return gt.e[gt.d[1]]}function Er(gt){var wt=gt.d,rt=gt.e,bt=gt.c,gn=wt[1],On=rt[gn];return 0<gt.a&&(wt[1]=wt[gt.a],bt[wt[1]]=1,rt[gn]=null,bt[gn]=gt.b,gt.b=gn,0<--gt.a&&Bn(gt,1)),On}function Bn(gt,wt){for(var rt=gt.d,bt=gt.e,gn=gt.c,On=wt,$n=rt[On];;){var sr=On<<1,Cr=(sr<gt.a&&b(bt[rt[sr+1]],bt[rt[sr]])&&(sr+=1),rt[sr]);if(sr>gt.a||b(bt[$n],bt[Cr])){gn[rt[On]=$n]=On;break}gn[rt[On]=Cr]=On,On=sr}}function ur(gt,wt){for(var rt=gt.d,bt=gt.e,gn=gt.c,On=wt,$n=rt[On];;){var sr=On>>1,Cr=rt[sr];if(0==sr||b(bt[Cr],bt[$n])){gn[rt[On]=$n]=On;break}gn[rt[On]=Cr]=On,On=sr}}function vn(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function er(gt){return gt.e.c.b}function Pn(gt){return gt.e.a.b}(M=Ft.prototype).x=function(){Wt(this,0)},M.B=function(gt,wt){switch(gt){case 100142:return;case 100140:switch(wt){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=wt)}break;case 100141:return void(this.m=!!wt);default:return void mt(this,100900)}mt(this,100901)},M.y=function(gt){switch(gt){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:mt(this,100900)}return!1},M.A=function(gt,wt,rt){this.j[0]=gt,this.j[1]=wt,this.j[2]=rt},M.z=function(gt,wt){var rt=wt||null;switch(gt){case 100100:case 100106:this.h=rt;break;case 100104:case 100110:this.l=rt;break;case 100101:case 100107:this.k=rt;break;case 100102:case 100108:this.i=rt;break;case 100103:case 100109:this.p=rt;break;case 100105:case 100111:this.o=rt;break;case 100112:this.r=rt;break;default:mt(this,100900)}},M.C=function(gt,wt){var rt=!1,bt=[0,0,0];Wt(this,2);for(var gn=0;gn<3;++gn){var On=gt[gn];On<-1e150&&(On=-1e150,rt=!0),1e150<On&&(On=1e150,rt=!0),bt[gn]=On}rt&&mt(this,100155),null===(rt=this.q)?m(rt=p(this.b),rt.b):(x(rt),rt=rt.e),rt.a.d=wt,rt.a.g[0]=bt[0],rt.a.g[1]=bt[1],rt.a.g[2]=bt[2],rt.f=1,rt.b.f=-1,this.q=rt},M.u=function(gt){Wt(this,0),this.d=1,this.b=new Ut,this.c=gt},M.t=function(){Wt(this,1),this.d=2,this.q=null},M.v=function(){Wt(this,2),this.d=1},M.w=function(){Wt(this,1),this.d=0;var gt,wt,On=!1,$n=[rt=this.j[0],bt=this.j[1],gn=this.j[2]];if(0===rt&&0===bt&&0===gn){for(var bt=[-2e150,-2e150,-2e150],sr=[2e150,2e150,2e150],gn=[],Cr=[],rt=(On=this.b.c).e;rt!==On;rt=rt.e)for(var Rr=0;Rr<3;++Rr){var Fr=rt.g[Rr];Fr<sr[Rr]&&(sr[Rr]=Fr,Cr[Rr]=rt),Fr>bt[Rr]&&(bt[Rr]=Fr,gn[Rr]=rt)}if(bt[1]-sr[1]>bt[rt=0]-sr[0]&&(rt=1),sr[rt=bt[2]-sr[2]>bt[rt]-sr[rt]?2:rt]>=bt[rt])$n[0]=0,$n[1]=0,$n[2]=1;else{for(sr=Cr[rt],Cr=[bt=0,0,0],sr=[sr.g[0]-(gn=gn[rt]).g[0],sr.g[1]-gn.g[1],sr.g[2]-gn.g[2]],Rr=[0,0,0],rt=On.e;rt!==On;rt=rt.e)Rr[0]=rt.g[0]-gn.g[0],Rr[1]=rt.g[1]-gn.g[1],Rr[2]=rt.g[2]-gn.g[2],Cr[0]=sr[1]*Rr[2]-sr[2]*Rr[1],Cr[1]=sr[2]*Rr[0]-sr[0]*Rr[2],Cr[2]=sr[0]*Rr[1]-sr[1]*Rr[0],bt<(Fr=Cr[0]*Cr[0]+Cr[1]*Cr[1]+Cr[2]*Cr[2])&&(bt=Fr,$n[0]=Cr[0],$n[1]=Cr[1],$n[2]=Cr[2]);bt<=0&&($n[0]=$n[1]=$n[2]=0,$n[H(sr)]=1)}On=!0}for(bt=((Cr=H($n))+1)%3,gn=(Cr+2)%3,Cr=0<$n[Cr]?1:-1,$n=(rt=this.b.c).e;$n!==rt;$n=$n.e)$n.b=$n.g[bt],$n.a=Cr*$n.g[gn];if(On){for($n=0,rt=(On=this.b.a).b;rt!==On;rt=rt.b)if(!((bt=rt.a).f<=0))for(;$n+=(bt.a.b-bt.b.a.b)*(bt.a.a+bt.b.a.a),(bt=bt.e)!==rt.a;);if($n<0)for(On=($n=this.b.c).e;On!==$n;On=On.e)On.a=-On.a}for(this.n=!1,rt=($n=this.b.b).h;rt!==$n;rt=On)On=rt.h,bt=rt.e,C(rt.a,rt.b.a)&&rt.e.e!==rt&&(le(this,bt,rt),g(rt),bt=(rt=bt).e),bt.e===rt&&(bt!==rt&&(bt!==On&&bt!==On.b||(On=On.h),g(bt)),rt!==On&&rt!==On.b||(On=On.h),g(rt));for(this.e=$n=new qt,rt=(On=this.b.c).e;rt!==On;rt=rt.e)rt.h=mn($n,rt);var In=$n;In.d=[];for(var cn=0;cn<In.a;cn++)In.d[cn]=cn;In.d.sort(function(_n){return function(tr,Xt){return b(_n[tr],_n[Xt])?1:-1}}(In.c)),In.e=!0;for(var Tn=In.b,sn=Tn.a;1<=sn;--sn)Bn(Tn,sn);for(Tn.h=!0,this.f=new Ct(this),vt(this,-4e150),vt(this,4e150);null!==($n=Zn(this.e));){for(;;){e:if(0===(rt=this.e).a)On=Rn(rt.b);else if(On=rt.c[rt.d[rt.a-1]],0!==rt.b.a&&b(rt=Rn(rt.b),On)){On=rt;break e}if(null===On||!C(On,$n))break;On=Zn(this.e),le(this,$n.c,On.c)}!function _n(tr,Xt){for(var hn,Fn=(tr.a=Xt).c;null===Fn.i;)if((Fn=Fn.c)===Xt.c){Fn=tr;var Cn=Xt;(Ur=new vn).a=Cn.c.b;for(var vr=(Wn=Fn.f).a;null!==(vr=vr.a).b&&!Wn.c(Wn.b,Ur,vr.b););var Wn,yr,fr=er(Wn=vr.b),Ur=Wn.a;return vr=fr.a,void(0===I(Ur.b.a,Cn,Ur.a)?C((Ur=Wn.a).a,Cn)||C(Ur.b.a,Cn)||(x(Ur.b),Wn.c&&(g(Ur.c),Wn.c=!1),m(Cn.c,Ur),_n(Fn,Cn)):(yr=b(vr.b.a,Ur.b.a)?Wn:fr,fr=void 0,Wn.d||yr.c?(fr=yr===Wn?E(Cn.c.b,Ur.e):E(vr.b.c.b,Cn.c).b,yr.c?Se(yr,fr):((Wn=ge(Ur=Fn,Wn,fr)).f=Pn(Wn).f+Wn.a.f,Wn.d=re(Ur,Wn.f)),_n(Fn,Cn)):De(Fn,Wn,Cn.c,Cn.c,null,!0)))}Wn=(Ur=er(Fn=oe(Fn.i))).a,(Ur=fe(tr,Ur,null)).c===Wn?(Ur=(Wn=Ur).c,vr=er(Fn),hn=!1,(fr=Fn.a).b.a!==(yr=vr.a).b.a&&Ue(tr,Fn),C(fr.a,tr.a)&&(m(Ur.b.e,fr),Ur=er(Fn=oe(Fn)).a,fe(tr,er(Fn),vr),hn=!0),C(yr.a,tr.a)&&(m(Wn,yr.b.e),Wn=fe(tr,vr,null),hn=!0),hn?De(tr,Fn,Wn.c,Ur,Ur,!0):(Cn=b(yr.a,fr.a)?yr.b.e:fr,De(tr,Fn,Cn=E(Wn.c.b,Cn),Cn.c,Cn.c,!1),Cn.b.i.c=!0,Je(tr,Fn))):De(tr,Fn,Ur.c,Wn,Wn,!0)}(this,$n)}for(this.a=this.f.a.a.b.a.a,$n=0;null!==(On=this.f.a.a.b);)On.h||++$n,we(On);for(this.f=null,($n=this.e).b=null,$n.d=null,this.e=$n.c=null,rt=($n=this.b).a.b;rt!==$n.a;rt=On)On=rt.b,(rt=rt.a).e.e===rt&&(te(rt.c,rt),g(rt));if(!this.n){if($n=this.b,this.m)for(rt=$n.b.h;rt!==$n.b;rt=On)On=rt.h,rt.b.d.c!==rt.d.c?rt.f=rt.d.c?1:-1:g(rt);else for(rt=$n.a.b;rt!==$n.a;rt=On)if(On=rt.b,rt.c){for(rt=rt.a;b(rt.b.a,rt.a);rt=rt.c.b);for(;b(rt.a,rt.b.a);rt=rt.e);for(bt=rt.c.b,gn=void 0;rt.e!==bt;)if(b(rt.b.a,bt.a)){for(;bt.e!==rt&&(b((wt=bt.e).b.a,wt.a)||I(bt.a,bt.b.a,bt.e.b.a)<=0);)bt=(gn=E(bt.e,bt)).b;bt=bt.c.b}else{for(;bt.e!==rt&&(b((gt=rt.c.b).a,gt.b.a)||0<=I(rt.b.a,rt.a,rt.c.b.a));)rt=(gn=E(rt,rt.c.b)).b;rt=rt.e}for(;bt.e.e!==rt;)bt=(gn=E(bt.e,bt)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(On=($n=this.b).a.b;On!==$n.a;On=On.b)if(On.c){for(this.h&&this.h(2,this.c),rt=On.a;this.k&&this.k(rt.a.d,this.c),(rt=rt.e)!==On.a;);this.i&&this.i(this.c)}}else{for(On=!!this.l,rt=!1,bt=-1,gn=($n=this.b).a.d;gn!==$n.a;gn=gn.d)if(gn.c)for(rt||(this.h&&this.h(4,this.c),rt=!0),Cr=gn.a;On&&bt!==(sr=Cr.b.d.c?0:1)&&(bt=sr,this.l&&this.l(!!bt,this.c)),this.k&&this.k(Cr.a.d,this.c),(Cr=Cr.e)!==gn.a;);rt&&this.i&&this.i(this.c)}if(this.r){for(rt=($n=this.b).a.b;rt!==$n.a;rt=On)if(On=rt.b,!rt.c){for(gn=(bt=rt.a).e,Cr=void 0;gn=(Cr=gn).e,(Cr.d=null)===Cr.b.d&&(Cr.c===Cr?V(Cr.a,null):(Cr.a.c=Cr.c,L(Cr,Cr.b.e)),(sr=Cr.b).c===sr?V(sr.a,null):(sr.a.c=sr.c,L(sr,sr.b.e)),G(Cr)),Cr!==bt;);bt=rt.d,((rt=rt.b).d=bt).b=rt}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:Ft,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},Ft.prototype.gluDeleteTess=Ft.prototype.x,Ft.prototype.gluTessProperty=Ft.prototype.B,Ft.prototype.gluGetTessProperty=Ft.prototype.y,Ft.prototype.gluTessNormal=Ft.prototype.A,Ft.prototype.gluTessCallback=Ft.prototype.z,Ft.prototype.gluTessVertex=Ft.prototype.C,Ft.prototype.gluTessBeginPolygon=Ft.prototype.u,Ft.prototype.gluTessBeginContour=Ft.prototype.t,Ft.prototype.gluTessEndContour=Ft.prototype.v,Ft.prototype.gluTessEndPolygon=Ft.prototype.w,void 0!==be&&(be.exports=this.libtess)},{}],256:[function(l,be,Z){"use strict";function C(b,w,I,D){for(var d=b[w++],f=1<<d,h=1+f,p=1+h,m=d+1,g=(1<<m)-1,x=0,E=0,S=0,L=b[w++],q=new Int32Array(4096),J=null;;){for(;x<16&&0!==L;)E|=b[w++]<<x,x+=8,1===L?L=b[w++]:--L;if(x<m)break;var G=E&g;if(E>>=m,x-=m,G==f)p=1+h,g=(1<<(m=d+1))-1,J=null;else{if(G==h)break;for(var V=G<p?G:J,K=0,H=V;f<H;)H=q[H]>>8,++K;var te=H;if(D<S+K+(V!==G?1:0))return void console.log("Warning, gif stream longer than expected.");I[S++]=te;var Y=S+=K;for(V!==G&&(I[S++]=te),H=V;K--;)I[--Y]=255&(H=q[H]),H>>=8;null!==J&&p<4096&&(q[p++]=J<<8|te,g+1<=p&&m<12&&(++m,g=g<<1|1)),J=G}}S!==D&&console.log("Warning, gif stream shorter than expected.")}try{Z.GifWriter=function M(b,w,I,D){var d=0,f=void 0===(D=void 0===D?{}:D).loop?null:D.loop,h=void 0===D.palette?null:D.palette;if(w<=0||I<=0||65535<w||65535<I)throw new Error("Width/Height invalid.");function p(J){if((J=J.length)<2||256<J||J&J-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return J}b[d++]=71,b[d++]=73,b[d++]=70,b[d++]=56,b[d++]=57,b[d++]=97;var m=0,g=0;if(null!==h){for(var x=p(h);x>>=1;)++m;if(x=1<<m,--m,void 0!==D.background){if(x<=(g=D.background))throw new Error("Background index out of range.");if(0===g)throw new Error("Background index explicitly passed as 0.")}}if(b[d++]=255&w,b[d++]=w>>8&255,b[d++]=255&I,b[d++]=I>>8&255,b[d++]=(null!==h?128:0)|m,b[d++]=g,b[d++]=0,null!==h)for(var E=0,S=h.length;E<S;++E){var L=h[E];b[d++]=L>>16&255,b[d++]=L>>8&255,b[d++]=255&L}if(null!==f){if(f<0||65535<f)throw new Error("Loop count invalid.");b[d++]=33,b[d++]=255,b[d++]=11,b[d++]=78,b[d++]=69,b[d++]=84,b[d++]=83,b[d++]=67,b[d++]=65,b[d++]=80,b[d++]=69,b[d++]=50,b[d++]=46,b[d++]=48,b[d++]=3,b[d++]=1,b[d++]=255&f,b[d++]=f>>8&255,b[d++]=0}var q=!1;this.addFrame=function(J,G,V,K,H,te){if(!0===q&&(--d,q=!1),te=void 0===te?{}:te,J<0||G<0||65535<J||65535<G)throw new Error("x/y invalid.");if(V<=0||K<=0||65535<V||65535<K)throw new Error("Width/Height invalid.");if(H.length<V*K)throw new Error("Not enough pixels for the frame size.");var Y=!0,we=te.palette;if(null==we&&(Y=!1,we=h),null==we)throw new Error("Must supply either a local or global palette.");for(var oe=p(we),Se=0;oe>>=1;)++Se;oe=1<<Se;var ge=void 0===te.delay?0:te.delay,re=void 0===te.disposal?0:te.disposal;if(re<0||3<re)throw new Error("Disposal out of range.");var Q=!1,fe=0;if(null!=te.transparent&&(Q=!0,(fe=te.transparent)<0||oe<=fe))throw new Error("Transparent color index.");if(0===re&&!Q&&0===ge||(b[d++]=33,b[d++]=249,b[d++]=4,b[d++]=re<<2|(!0===Q?1:0),b[d++]=255&ge,b[d++]=ge>>8&255,b[d++]=fe,b[d++]=0),b[d++]=44,b[d++]=255&J,b[d++]=J>>8&255,b[d++]=255&G,b[d++]=G>>8&255,b[d++]=255&V,b[d++]=V>>8&255,b[d++]=255&K,b[d++]=K>>8&255,b[d++]=!0===Y?128|Se-1:0,!0===Y)for(var De=0,it=we.length;De<it;++De){var le=we[De];b[d++]=le>>16&255,b[d++]=le>>8&255,b[d++]=255&le}return d=function(z,ye,Ue,Je){z[ye++]=Ue;var vt=ye++,Ct=1<<Ue,zt=Ct-1,_t=1+Ct,Ft=1+_t,Wt=Ue+1,mt=0,Nt=0;function kt(Er){for(;Er<=mt;)z[ye++]=255&Nt,Nt>>=8,mt-=8,ye===vt+256&&(z[vt]=255,vt=ye++)}function Ut(Er){Nt|=Er<<mt,mt+=Wt,kt(8)}var Tt=Je[0]&zt,qt={};Ut(Ct);for(var mn=1,Zn=Je.length;mn<Zn;++mn){var An=Je[mn]&zt,Qn=Tt<<8|An,Rn=qt[Qn];if(void 0===Rn){for(Nt|=Tt<<mt,mt+=Wt;8<=mt;)z[ye++]=255&Nt,Nt>>=8,mt-=8,ye===vt+256&&(z[vt]=255,vt=ye++);4096===Ft?(Ut(Ct),Ft=1+_t,Wt=Ue+1,qt={}):(1<<Wt<=Ft&&++Wt,qt[Qn]=Ft++),Tt=An}else Tt=Rn}return Ut(Tt),Ut(_t),kt(1),vt+1===ye?z[vt]=0:(z[vt]=ye-vt-1,z[ye++]=0),ye}(b,d,Se<2?2:Se,H)},this.end=function(){return!1===q&&(b[d++]=59,q=!0),d},this.getOutputBuffer=function(){return b},this.setOutputBuffer=function(J){b=J},this.getOutputBufferPosition=function(){return d},this.setOutputBufferPosition=function(J){d=J}},Z.GifReader=function(b){var w=0;if(71!==b[w++]||73!==b[w++]||70!==b[w++]||56!==b[w++]||56!=(b[w++]+1&253)||97!==b[w++])throw new Error("Invalid GIF 87a/89a header.");var I=b[w++]|b[w++]<<8,D=b[w++]|b[w++]<<8,d=b[w++],h=(w++,w++,null),p=null,m=(d>>7&&(h=w,w+=3*(p=1<<1+(7&d))),!0),g=[],x=0,E=null,S=0,L=null;for(this.width=I,this.height=D;m&&w<b.length;)switch(b[w++]){case 33:switch(b[w++]){case 255:if(11!==b[w]||78==b[w+1]&&69==b[w+2]&&84==b[w+3]&&83==b[w+4]&&67==b[w+5]&&65==b[w+6]&&80==b[w+7]&&69==b[w+8]&&50==b[w+9]&&46==b[w+10]&&48==b[w+11]&&3==b[w+12]&&1==b[w+13]&&0==b[w+16])w+=14,L=b[w++]|b[w++]<<8,w++;else for(w+=12;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}break;case 249:if(4!==b[w++]||0!==b[w+4])throw new Error("Invalid graphics extension block.");var q=b[w++];x=b[w++]|b[w++]<<8,E=b[w++],!(1&q)&&(E=null),S=q>>2&7,w++;break;case 254:for(;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}break;default:throw new Error("Unknown graphic control label: 0x"+b[w-1].toString(16))}break;case 44:var J,G=b[w++]|b[w++]<<8,V=b[w++]|b[w++]<<8,K=b[w++]|b[w++]<<8,H=b[w++]|b[w++]<<8,te=(ge=b[w++])>>6&1,we=h,Se=p,oe=!1,ge=(ge>>7&&(oe=!0,we=w,w+=3*(Se=1<<1+(7&ge))),w);for(w++;;){if(!(0<=(J=b[w++])))throw Error("Invalid block size");if(0===J)break;w+=J}g.push({x:G,y:V,width:K,height:H,has_local_palette:oe,palette_offset:we,palette_size:Se,data_offset:ge,data_length:w-ge,transparent_index:E,interlaced:!!te,delay:x,disposal:S});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+b[w-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return L},this.frameInfo=function(re){if(re<0||re>=g.length)throw new Error("Frame index out of range.");return g[re]},this.decodeAndBlitFrameBGRA=function(re,Q){for(var fe=(re=this.frameInfo(re)).width*re.height,De=new Uint8Array(fe),it=(C(b,re.data_offset,De,fe),re.palette_offset),le=re.transparent_index,z=(null===le&&(le=256),re.width),ye=I-z,Ue=z,Je=4*(re.y*I+re.x),vt=4*((re.y+re.height)*I+re.x),Ct=Je,zt=4*ye,_t=(!0===re.interlaced&&(zt+=4*I*7),8),Ft=0,Wt=De.length;Ft<Wt;++Ft){var mt,Nt,kt=De[Ft];0===Ue&&(Ue=z,vt<=(Ct+=zt)&&(zt=4*ye+4*I*(_t-1),Ct=Je+(z+ye)*(_t<<1),_t>>=1)),kt===le?Ct+=4:(mt=b[it+3*kt],Nt=b[it+3*kt+1],Q[Ct++]=kt=b[it+3*kt+2],Q[Ct++]=Nt,Q[Ct++]=mt,Q[Ct++]=255),--Ue}},this.decodeAndBlitFrameRGBA=function(re,Q){for(var fe=(re=this.frameInfo(re)).width*re.height,De=new Uint8Array(fe),it=(C(b,re.data_offset,De,fe),re.palette_offset),le=re.transparent_index,z=(null===le&&(le=256),re.width),ye=I-z,Ue=z,Je=4*(re.y*I+re.x),vt=4*((re.y+re.height)*I+re.x),Ct=Je,zt=4*ye,_t=(!0===re.interlaced&&(zt+=4*I*7),8),Ft=0,Wt=De.length;Ft<Wt;++Ft){var mt,Nt,kt=De[Ft];0===Ue&&(Ue=z,vt<=(Ct+=zt)&&(zt=4*ye+4*I*(_t-1),Ct=Je+(z+ye)*(_t<<1),_t>>=1)),kt===le?Ct+=4:(mt=b[it+3*kt],Nt=b[it+3*kt+1],kt=b[it+3*kt+2],Q[Ct++]=mt,Q[Ct++]=Nt,Q[Ct++]=kt,Q[Ct++]=255),--Ue}}}}catch{}},{}],257:[function(l,be,Z){(function(M){var b;b=function(w){"use strict";function I(Ie){if(null==this)throw TypeError();var X,se=String(this),he=se.length;if(!((Ie=(Ie=Ie?Number(Ie):0)!=Ie?0:Ie)<0||he<=Ie))return 55296<=(X=se.charCodeAt(Ie))&&X<=56319&&Ie+1<he&&56320<=(he=se.charCodeAt(Ie+1))&&he<=57343?1024*(X-55296)+he-56320+65536:X}String.prototype.codePointAt||((D=function(){try{var P={},X=Object.defineProperty,se=X(P,P,P)&&X}catch{}return se}())?D(String.prototype,"codePointAt",{value:I,configurable:!0,writable:!0}):String.prototype.codePointAt=I);var D;function h(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function p(P,X){this.source=P,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=X,this.destLen=0,this.ltree=new h,this.dtree=new h}var m=new h,g=new h,x=new Uint8Array(30),E=new Uint16Array(30),S=new Uint8Array(30),L=new Uint16Array(30),q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=new h,G=new Uint8Array(320);function V(P,X,se,he){for(var Ie,Ke=0;Ke<se;++Ke)P[Ke]=0;for(Ke=0;Ke<30-se;++Ke)P[Ke+se]=Ke/se|0;for(Ie=he,Ke=0;Ke<30;++Ke)X[Ke]=Ie,Ie+=1<<P[Ke]}var K=new Uint16Array(16);function H(P,X,se,he){for(var Ie,Ke=0;Ke<16;++Ke)P.table[Ke]=0;for(Ke=0;Ke<he;++Ke)P.table[X[se+Ke]]++;for(Ke=Ie=P.table[0]=0;Ke<16;++Ke)K[Ke]=Ie,Ie+=P.table[Ke];for(Ke=0;Ke<he;++Ke)X[se+Ke]&&(P.trans[K[X[se+Ke]]++]=Ke)}function te(P,X,se){if(!X)return se;for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;var he=P.tag&65535>>>16-X;return P.tag>>>=X,P.bitcount-=X,he+se}function Y(P,X){for(;P.bitcount<24;)P.tag|=P.source[P.sourceIndex++]<<P.bitcount,P.bitcount+=8;for(var se=0,he=0,Ie=0,Ke=P.tag;he=2*he+(1&Ke),Ke>>>=1,se+=X.table[++Ie],0<=(he-=X.table[Ie]););return P.tag=Ke,P.bitcount-=Ie,X.trans[se+he]}function we(P,X,se){for(;;){if(256===(he=Y(P,X)))return 0;if(he<256)P.dest[P.destLen++]=he;else for(var Ie,Ke=te(P,x[he-=257],E[he]),he=Y(P,se),nt=Ie=P.destLen-te(P,S[he],L[he]);nt<Ie+Ke;++nt)P.dest[P.destLen++]=P.dest[nt]}}for(var Se=m,oe=g,ge=0;ge<7;++ge)Se.table[ge]=0;for(Se.table[7]=24,Se.table[8]=152,Se.table[9]=112,ge=0;ge<24;++ge)Se.trans[ge]=256+ge;for(ge=0;ge<144;++ge)Se.trans[24+ge]=ge;for(ge=0;ge<8;++ge)Se.trans[168+ge]=280+ge;for(ge=0;ge<112;++ge)Se.trans[176+ge]=144+ge;for(ge=0;ge<5;++ge)oe.table[ge]=0;for(oe.table[5]=32,ge=0;ge<32;++ge)oe.trans[ge]=ge;V(x,E,4,3),V(S,L,2,1),x[28]=0,E[28]=258;var re=function(P,X){var se,he,Ie,Ke=new p(P,X);do{switch(void 0,(he=Ke).bitcount--||(he.tag=he.source[he.sourceIndex++],he.bitcount=7),Ie=1&he.tag,he.tag>>>=1,he=Ie,te(Ke,2,0)){case 0:se=function(Gn){for(var li,Zr;8<Gn.bitcount;)Gn.sourceIndex--,Gn.bitcount-=8;if((li=256*Gn.source[Gn.sourceIndex+1]+Gn.source[Gn.sourceIndex])!==(65535&~(256*Gn.source[Gn.sourceIndex+3]+Gn.source[Gn.sourceIndex+2])))return-3;for(Gn.sourceIndex+=4,Zr=li;Zr;--Zr)Gn.dest[Gn.destLen++]=Gn.source[Gn.sourceIndex++];return Gn.bitcount=0,0}(Ke);break;case 1:se=we(Ke,m,g);break;case 2:on=ht=ke=Dn=nt=Ve=void 0;for(var nt,At=Ke,Qt=Ke.ltree,Jt=Ke.dtree,Mn=te(At,5,257),je=te(At,5,1),xe=te(At,4,4),Ve=0;Ve<19;++Ve)G[Ve]=0;for(Ve=0;Ve<xe;++Ve){var ke=te(At,3,0);G[q[Ve]]=ke}for(H(J,G,0,19),nt=0;nt<Mn+je;){var ht=Y(At,J);switch(ht){case 16:for(var on=G[nt-1],Dn=te(At,2,3);Dn;--Dn)G[nt++]=on;break;case 17:for(Dn=te(At,3,3);Dn;--Dn)G[nt++]=0;break;case 18:for(Dn=te(At,7,11);Dn;--Dn)G[nt++]=0;break;default:G[nt++]=ht}}H(Qt,G,0,Mn),H(Jt,G,Mn,je),se=we(Ke,Ke.ltree,Ke.dtree);break;default:se=-3}if(0!==se)throw new Error("Data error")}while(!he);return Ke.destLen<Ke.dest.length?"function"==typeof Ke.dest.slice?Ke.dest.slice(0,Ke.destLen):Ke.dest.subarray(0,Ke.destLen):Ke.dest};function Q(P,X,se,he,Ie){return Math.pow(1-Ie,3)*P+3*Math.pow(1-Ie,2)*Ie*X+3*(1-Ie)*Math.pow(Ie,2)*se+Math.pow(Ie,3)*he}function fe(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function De(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function it(P){throw new Error(P)}function le(P,X){P||it(X)}fe.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},fe.prototype.addPoint=function(P,X){"number"==typeof P&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=P,this.x2=P),P<this.x1&&(this.x1=P),P>this.x2&&(this.x2=P)),"number"==typeof X&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=X,this.y2=X),X<this.y1&&(this.y1=X),X>this.y2&&(this.y2=X))},fe.prototype.addX=function(P){this.addPoint(P,null)},fe.prototype.addY=function(P){this.addPoint(null,P)},fe.prototype.addBezier=function(P,X,se,he,Ie,Ke,nt,At){var Qt=[P,X],Jt=[se,he],Mn=[Ie,Ke],je=[nt,At];this.addPoint(P,X),this.addPoint(nt,At);for(var xe=0;xe<=1;xe++){var Ve,ke=6*Qt[xe]-12*Jt[xe]+6*Mn[xe],ht=-3*Qt[xe]+9*Jt[xe]-9*Mn[xe]+3*je[xe],on=3*Jt[xe]-3*Qt[xe];0==ht?0==ke||0<(Ve=-on/ke)&&Ve<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],Ve)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],Ve))):(Ve=Math.pow(ke,2)-4*on*ht)<0||(0<(on=(-ke+Math.sqrt(Ve))/(2*ht))&&on<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],on)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],on))),0<(on=(-ke-Math.sqrt(Ve))/(2*ht))&&on<1&&(0===xe&&this.addX(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],on)),1===xe&&this.addY(Q(Qt[xe],Jt[xe],Mn[xe],je[xe],on))))}},fe.prototype.addQuad=function(P,X,se,he,Ie,Ke){this.addBezier(P,X,se=P+2/3*(se-P),he=X+2/3*(he-X),se+1/3*(Ie-P),he+1/3*(Ke-X),Ie,Ke)},De.prototype.moveTo=function(P,X){this.commands.push({type:"M",x:P,y:X})},De.prototype.lineTo=function(P,X){this.commands.push({type:"L",x:P,y:X})},De.prototype.curveTo=De.prototype.bezierCurveTo=function(P,X,se,he,Ie,Ke){this.commands.push({type:"C",x1:P,y1:X,x2:se,y2:he,x:Ie,y:Ke})},De.prototype.quadTo=De.prototype.quadraticCurveTo=function(P,X,se,he){this.commands.push({type:"Q",x1:P,y1:X,x:se,y:he})},De.prototype.close=De.prototype.closePath=function(){this.commands.push({type:"Z"})},De.prototype.extend=function(P){var X;if(P.commands)P=P.commands;else if(P instanceof fe)return this.moveTo((X=P).x1,X.y1),this.lineTo(X.x2,X.y1),this.lineTo(X.x2,X.y2),this.lineTo(X.x1,X.y2),void this.close();Array.prototype.push.apply(this.commands,P)},De.prototype.getBoundingBox=function(){for(var P=new fe,X=0,se=0,he=0,Ie=0,Ke=0;Ke<this.commands.length;Ke++){var nt=this.commands[Ke];switch(nt.type){case"M":P.addPoint(nt.x,nt.y),X=he=nt.x,se=Ie=nt.y;break;case"L":P.addPoint(nt.x,nt.y),he=nt.x,Ie=nt.y;break;case"Q":P.addQuad(he,Ie,nt.x1,nt.y1,nt.x,nt.y),he=nt.x,Ie=nt.y;break;case"C":P.addBezier(he,Ie,nt.x1,nt.y1,nt.x2,nt.y2,nt.x,nt.y),he=nt.x,Ie=nt.y;break;case"Z":he=X,Ie=se;break;default:throw new Error("Unexpected path command "+nt.type)}}return P.isEmpty()&&P.addPoint(0,0),P},De.prototype.draw=function(P){P.beginPath();for(var X=0;X<this.commands.length;X+=1){var se=this.commands[X];"M"===se.type?P.moveTo(se.x,se.y):"L"===se.type?P.lineTo(se.x,se.y):"C"===se.type?P.bezierCurveTo(se.x1,se.y1,se.x2,se.y2,se.x,se.y):"Q"===se.type?P.quadraticCurveTo(se.x1,se.y1,se.x,se.y):"Z"===se.type&&P.closePath()}this.fill&&(P.fillStyle=this.fill,P.fill()),this.stroke&&(P.strokeStyle=this.stroke,P.lineWidth=this.strokeWidth,P.stroke())},De.prototype.toPathData=function(P){function X(){for(var Ke=arguments,nt="",At=0;At<arguments.length;At+=1){var Qt=Ke[At];0<=Qt&&0<At&&(nt+=" "),nt+=Math.round(Qt)===Qt?""+Math.round(Qt):Qt.toFixed(P)}return nt}P=void 0!==P?P:2;for(var se="",he=0;he<this.commands.length;he+=1){var Ie=this.commands[he];"M"===Ie.type?se+="M"+X(Ie.x,Ie.y):"L"===Ie.type?se+="L"+X(Ie.x,Ie.y):"C"===Ie.type?se+="C"+X(Ie.x1,Ie.y1,Ie.x2,Ie.y2,Ie.x,Ie.y):"Q"===Ie.type?se+="Q"+X(Ie.x1,Ie.y1,Ie.x,Ie.y):"Z"===Ie.type&&(se+="Z")}return se},De.prototype.toSVG=function(P){var X=(X='<path d="')+this.toPathData(P)+'"';return this.fill&&"black"!==this.fill&&(X+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(X+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),X+"/>"},De.prototype.toDOMElement=function(X){X=this.toPathData(X);var se=document.createElementNS("http://www.w3.org/2000/svg","path");return se.setAttribute("d",X),se};var z={fail:it,argument:le,assert:le},ye={},Ue={},Je={};function vt(P){return function(){return P}}Ue.BYTE=function(P){return z.argument(0<=P&&P<=255,"Byte value should be between 0 and 255."),[P]},Je.BYTE=vt(1),Ue.CHAR=function(P){return[P.charCodeAt(0)]},Je.CHAR=vt(1),Ue.CHARARRAY=function(P){for(var X=[],se=0;se<P.length;se+=1)X[se]=P.charCodeAt(se);return X},Je.CHARARRAY=function(P){return P.length},Ue.USHORT=function(P){return[P>>8&255,255&P]},Je.USHORT=vt(2),Ue.SHORT=function(P){return[(P=32768<=P?-(65536-P):P)>>8&255,255&P]},Je.SHORT=vt(2),Ue.UINT24=function(P){return[P>>16&255,P>>8&255,255&P]},Je.UINT24=vt(3),Ue.ULONG=function(P){return[P>>24&255,P>>16&255,P>>8&255,255&P]},Je.ULONG=vt(4),Ue.LONG=function(P){return[(P=2147483648<=P?-(4294967296-P):P)>>24&255,P>>16&255,P>>8&255,255&P]},Je.LONG=vt(4),Ue.FIXED=Ue.ULONG,Je.FIXED=Je.ULONG,Ue.FWORD=Ue.SHORT,Je.FWORD=Je.SHORT,Ue.UFWORD=Ue.USHORT,Je.UFWORD=Je.USHORT,Ue.LONGDATETIME=function(P){return[0,0,0,0,P>>24&255,P>>16&255,P>>8&255,255&P]},Je.LONGDATETIME=vt(8),Ue.TAG=function(P){return z.argument(4===P.length,"Tag should be exactly 4 ASCII characters."),[P.charCodeAt(0),P.charCodeAt(1),P.charCodeAt(2),P.charCodeAt(3)]},Je.TAG=vt(4),Ue.Card8=Ue.BYTE,Je.Card8=Je.BYTE,Ue.Card16=Ue.USHORT,Je.Card16=Je.USHORT,Ue.OffSize=Ue.BYTE,Je.OffSize=Je.BYTE,Ue.SID=Ue.USHORT,Je.SID=Je.USHORT,Ue.NUMBER=function(P){return-107<=P&&P<=107?[P+139]:108<=P&&P<=1131?[247+((P-=108)>>8),255&P]:-1131<=P&&P<=-108?[251+((P=-P-108)>>8),255&P]:-32768<=P&&P<=32767?Ue.NUMBER16(P):Ue.NUMBER32(P)},Je.NUMBER=function(P){return Ue.NUMBER(P).length},Ue.NUMBER16=function(P){return[28,P>>8&255,255&P]},Je.NUMBER16=vt(3),Ue.NUMBER32=function(P){return[29,P>>24&255,P>>16&255,P>>8&255,255&P]},Je.NUMBER32=vt(5),Ue.REAL=function(P){for(var X=P.toString(),se=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(X),he=(se&&(se=parseFloat("1e"+((se[2]?+se[2]:0)+se[1].length)),X=(Math.round(P*se)/se).toString()),""),Ie=0,Ke=X.length;Ie<Ke;Ie+=1){var nt=X[Ie];he+="e"===nt?"-"===X[++Ie]?"c":"b":"."===nt?"a":"-"===nt?"e":nt}for(var At=[30],Qt=0,Jt=(he+=1&he.length?"f":"ff").length;Qt<Jt;Qt+=2)At.push(parseInt(he.substr(Qt,2),16));return At},Je.REAL=function(P){return Ue.REAL(P).length},Ue.NAME=Ue.CHARARRAY,Je.NAME=Je.CHARARRAY,Ue.STRING=Ue.CHARARRAY,Je.STRING=Je.CHARARRAY,ye.UTF8=function(P,X,se){for(var he=[],Ie=se,Ke=0;Ke<Ie;Ke++,X+=1)he[Ke]=P.getUint8(X);return String.fromCharCode.apply(null,he)},ye.UTF16=function(P,X,se){for(var he=[],Ie=se/2,Ke=0;Ke<Ie;Ke++,X+=2)he[Ke]=P.getUint16(X);return String.fromCharCode.apply(null,he)},Ue.UTF16=function(P){for(var X=[],se=0;se<P.length;se+=1){var he=P.charCodeAt(se);X[X.length]=he>>8&255,X[X.length]=255&he}return X},Je.UTF16=function(P){return 2*P.length};var Ct,zt={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},_t=(ye.MACSTRING=function(P,X,se,he){var Ie=zt[he];if(void 0!==Ie){for(var Ke="",nt=0;nt<se;nt++){var At=P.getUint8(X+nt);Ke+=At<=127?String.fromCharCode(At):Ie[127&At]}return Ke}},"function"==typeof WeakMap&&new WeakMap);function Ft(P){return-128<=P&&P<=127}Ue.MACSTRING=function(P,X){var se=function(nt){if(!Ct)for(var At in Ct={},zt)Ct[At]=new String(At);var Qt=Ct[nt];if(void 0!==Qt){if(_t){var Jt=_t.get(Qt);if(void 0!==Jt)return Jt}var Mn=zt[nt];if(void 0!==Mn){for(var je={},xe=0;xe<Mn.length;xe++)je[Mn.charCodeAt(xe)]=xe+128;return _t&&_t.set(Qt,je),je}}}(X);if(void 0!==se){for(var he=[],Ie=0;Ie<P.length;Ie++){var Ke=P.charCodeAt(Ie);if(128<=Ke&&void 0===(Ke=se[Ke]))return;he[Ie]=Ke}return he}},Je.MACSTRING=function(P,X){return void 0!==(P=Ue.MACSTRING(P,X))?P.length:0},Ue.VARDELTAS=function(P){for(var he=0,X=[];he<P.length;){var se=P[he];he=(0===se?function(Ie,Ke,nt){for(var At=0,Qt=Ie.length;Ke<Qt&&At<64&&0===Ie[Ke];)++Ke,++At;return nt.push(128|At-1),Ke}:-128<=se&&se<=127?function(Ie,Ke,nt){for(var At=0,Qt=Ie.length,Jt=Ke;Jt<Qt&&At<64;){var Mn=Ie[Jt];if(!Ft(Mn)||0===Mn&&Jt+1<Qt&&0===Ie[Jt+1])break;++Jt,++At}nt.push(At-1);for(var je=Ke;je<Jt;++je)nt.push(Ie[je]+256&255);return Jt}:function(Ie,Ke,nt){for(var At=0,Qt=Ie.length,Jt=Ke;Jt<Qt&&At<64;){var Mn=Ie[Jt];if(0===Mn||Ft(Mn)&&Jt+1<Qt&&Ft(Ie[Jt+1]))break;++Jt,++At}nt.push(64|At-1);for(var je=Ke;je<Jt;++je){var xe=Ie[je];nt.push(xe+65536>>8&255,xe+256&255)}return Jt})(P,he,X)}return X},Ue.INDEX=function(P){for(var X=1,se=[X],he=[],Ie=0;Ie<P.length;Ie+=1){var Ke=Ue.OBJECT(P[Ie]);Array.prototype.push.apply(he,Ke),se.push(X+=Ke.length)}if(0===he.length)return[0,0];for(var nt=[],At=1+Math.floor(Math.log(X)/Math.log(2))/8|0,Qt=[void 0,Ue.BYTE,Ue.USHORT,Ue.UINT24,Ue.ULONG][At],Jt=0;Jt<se.length;Jt+=1){var Mn=Qt(se[Jt]);Array.prototype.push.apply(nt,Mn)}return Array.prototype.concat(Ue.Card16(P.length),Ue.OffSize(At),nt,he)},Je.INDEX=function(P){return Ue.INDEX(P).length},Ue.DICT=function(P){for(var X=[],se=Object.keys(P),he=se.length,Ie=0;Ie<he;Ie+=1){var Ke=parseInt(se[Ie],0),nt=P[Ke];X=(X=X.concat(Ue.OPERAND(nt.value,nt.type))).concat(Ue.OPERATOR(Ke))}return X},Je.DICT=function(P){return Ue.DICT(P).length},Ue.OPERATOR=function(P){return P<1200?[P]:[12,P-1200]},Ue.OPERAND=function(P,X){var se=[];if(Array.isArray(X))for(var he=0;he<X.length;he+=1)z.argument(P.length===X.length,"Not enough arguments given for type"+X),se=se.concat(Ue.OPERAND(P[he],X[he]));else if("SID"===X)se=se.concat(Ue.NUMBER(P));else if("offset"===X)se=se.concat(Ue.NUMBER32(P));else if("number"===X)se=se.concat(Ue.NUMBER(P));else{if("real"!==X)throw new Error("Unknown operand type "+X);se=se.concat(Ue.REAL(P))}return se},Ue.OP=Ue.BYTE,Je.OP=Je.BYTE;var Wt="function"==typeof WeakMap&&new WeakMap;function mt(P,X,se){for(var he=0;he<X.length;he+=1){var Ie=X[he];this[Ie.name]=Ie.value}if(this.tableName=P,this.fields=X,se)for(var Ke=Object.keys(se),nt=0;nt<Ke.length;nt+=1){var At=Ke[nt];void 0!==this[At]&&(this[At]=se[At])}}function Nt(P,X,se){void 0===se&&(se=X.length);var he=new Array(X.length+1);he[0]={name:P+"Count",type:"USHORT",value:se};for(var Ie=0;Ie<X.length;Ie++)he[Ie+1]={name:P+Ie,type:"USHORT",value:X[Ie]};return he}function kt(P,X,se){var he=X.length,Ie=new Array(he+1);Ie[0]={name:P+"Count",type:"USHORT",value:he};for(var Ke=0;Ke<he;Ke++)Ie[Ke+1]={name:P+Ke,type:"TABLE",value:se(X[Ke],Ke)};return Ie}function Ut(P,X,se){var he=X.length,Ie=[];Ie[0]={name:P+"Count",type:"USHORT",value:he};for(var Ke=0;Ke<he;Ke++)Ie=Ie.concat(se(X[Ke],Ke));return Ie}function Tt(P){1===P.format?mt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Nt("glyph",P.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function qt(P){mt.call(this,"scriptListTable",Ut("scriptRecord",P,function(X,se){var he=X.script,Ie=he.defaultLangSys;return z.assert(!!Ie,"Unable to write GSUB: script "+X.tag+" has no default language system."),[{name:"scriptTag"+se,type:"TAG",value:X.tag},{name:"script"+se,type:"TABLE",value:new mt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new mt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Ie.reqFeatureIndex}].concat(Nt("featureIndex",Ie.featureIndexes)))}].concat(Ut("langSys",he.langSysRecords,function(Ke,nt){var At=Ke.langSys;return[{name:"langSysTag"+nt,type:"TAG",value:Ke.tag},{name:"langSys"+nt,type:"TABLE",value:new mt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:At.reqFeatureIndex}].concat(Nt("featureIndex",At.featureIndexes)))}]})))}]}))}function mn(P){mt.call(this,"featureListTable",Ut("featureRecord",P,function(X,se){var he=X.feature;return[{name:"featureTag"+se,type:"TAG",value:X.tag},{name:"feature"+se,type:"TABLE",value:new mt("featureTable",[{name:"featureParams",type:"USHORT",value:he.featureParams}].concat(Nt("lookupListIndex",he.lookupListIndexes)))}]}))}function Zn(P,X){mt.call(this,"lookupListTable",kt("lookup",P,function(se){var he=X[se.lookupType];return z.assert(!!he,"Unable to write GSUB lookup type "+se.lookupType+" tables."),new mt("lookupTable",[{name:"lookupType",type:"USHORT",value:se.lookupType},{name:"lookupFlag",type:"USHORT",value:se.lookupFlag}].concat(kt("subtable",se.subtables,he)))}))}Ue.CHARSTRING=function(P){if(Wt){var X=Wt.get(P);if(void 0!==X)return X}for(var Ke=[],se=P.length,he=0;he<se;he+=1){var Ie=P[he];Ke=Ke.concat(Ue[Ie.type](Ie.value))}return Wt&&Wt.set(P,Ke),Ke},Je.CHARSTRING=function(P){return Ue.CHARSTRING(P).length},Ue.OBJECT=function(P){var X=Ue[P.type];return z.argument(void 0!==X,"No encoding function for type "+P.type),X(P.value)},Je.OBJECT=function(P){var X=Je[P.type];return z.argument(void 0!==X,"No sizeOf function for type "+P.type),X(P.value)},Ue.TABLE=function(P){for(var X=[],se=P.fields.length,he=[],Ie=[],Ke=0;Ke<se;Ke+=1){var nt=P.fields[Ke],At=(z.argument(void 0!==(Qt=Ue[nt.type]),"No encoding function for field type "+nt.type+" ("+nt.name+")"),P[nt.name]),Qt=Qt(At=void 0===At?nt.value:At);"TABLE"===nt.type?(Ie.push(X.length),X=X.concat([0,0]),he.push(Qt)):X=X.concat(Qt)}for(var Jt=0;Jt<he.length;Jt+=1){var Mn=Ie[Jt],je=X.length;z.argument(je<65536,"Table "+P.tableName+" too big."),X[Mn]=je>>8,X[Mn+1]=255&je,X=X.concat(he[Jt])}return X},Je.TABLE=function(P){for(var X=0,se=P.fields.length,he=0;he<se;he+=1){var Ie=P.fields[he],Ke=Je[Ie.type],nt=(z.argument(void 0!==Ke,"No sizeOf function for field type "+Ie.type+" ("+Ie.name+")"),P[Ie.name]);X+=Ke(nt=void 0===nt?Ie.value:nt),"TABLE"===Ie.type&&(X+=2)}return X},Ue.RECORD=Ue.TABLE,Je.RECORD=Je.TABLE,Ue.LITERAL=function(P){return P},Je.LITERAL=function(P){return P.length},mt.prototype.encode=function(){return Ue.TABLE(this)},mt.prototype.sizeOf=function(){return Je.TABLE(this)};var An={Table:mt,Record:mt,Coverage:(Tt.prototype=Object.create(mt.prototype)).constructor=Tt,ScriptList:(qt.prototype=Object.create(mt.prototype)).constructor=qt,FeatureList:(mn.prototype=Object.create(mt.prototype)).constructor=mn,LookupList:(Zn.prototype=Object.create(mt.prototype)).constructor=Zn,ushortList:Nt,tableList:kt,recordList:Ut};function Qn(P,X){return P.getUint8(X)}function Rn(P,X){return P.getUint16(X,!1)}function Er(P,X){return P.getUint32(X,!1)}function Bn(P,X){return P.getInt16(X,!1)+P.getUint16(X+2,!1)/65535}var ur={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function vn(P,X){this.data=P,this.offset=X,this.relativeOffset=0}vn.prototype.parseByte=function(){var P=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},vn.prototype.parseChar=function(){var P=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,P},vn.prototype.parseCard8=vn.prototype.parseByte,vn.prototype.parseCard16=vn.prototype.parseUShort=function(){var P=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},vn.prototype.parseSID=vn.prototype.parseUShort,vn.prototype.parseOffset16=vn.prototype.parseUShort,vn.prototype.parseShort=function(){var P=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,P},vn.prototype.parseF2Dot14=function(){var P=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,P},vn.prototype.parseOffset32=vn.prototype.parseULong=function(){var P=Er(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},vn.prototype.parseFixed=function(){var P=Bn(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,P},vn.prototype.parseString=function(P){var X=this.data,se=this.offset+this.relativeOffset,he="";this.relativeOffset+=P;for(var Ie=0;Ie<P;Ie++)he+=String.fromCharCode(X.getUint8(se+Ie));return he},vn.prototype.parseTag=function(){return this.parseString(4)},vn.prototype.parseLongDateTime=function(){var P=Er(this.data,this.offset+this.relativeOffset+4);return P-=2082844800,this.relativeOffset+=8,P},vn.prototype.parseVersion=function(P){var X=Rn(this.data,this.offset+this.relativeOffset),se=Rn(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,X+se/(P=void 0===P?4096:P)/10},vn.prototype.skip=function(P,X){this.relativeOffset+=ur[P]*(X=void 0===X?1:X)},vn.prototype.parseULongList=function(P){void 0===P&&(P=this.parseULong());for(var X=new Array(P),se=this.data,he=this.offset+this.relativeOffset,Ie=0;Ie<P;Ie++)X[Ie]=se.getUint32(he),he+=4;return this.relativeOffset+=4*P,X},vn.prototype.parseOffset16List=vn.prototype.parseUShortList=function(P){void 0===P&&(P=this.parseUShort());for(var X=new Array(P),se=this.data,he=this.offset+this.relativeOffset,Ie=0;Ie<P;Ie++)X[Ie]=se.getUint16(he),he+=2;return this.relativeOffset+=2*P,X},vn.prototype.parseShortList=function(P){for(var X=new Array(P),se=this.data,he=this.offset+this.relativeOffset,Ie=0;Ie<P;Ie++)X[Ie]=se.getInt16(he),he+=2;return this.relativeOffset+=2*P,X},vn.prototype.parseByteList=function(P){for(var X=new Array(P),se=this.data,he=this.offset+this.relativeOffset,Ie=0;Ie<P;Ie++)X[Ie]=se.getUint8(he++);return this.relativeOffset+=P,X},vn.prototype.parseList=function(P,X){X||(X=P,P=this.parseUShort());for(var se=new Array(P),he=0;he<P;he++)se[he]=X.call(this);return se},vn.prototype.parseList32=function(P,X){X||(X=P,P=this.parseULong());for(var se=new Array(P),he=0;he<P;he++)se[he]=X.call(this);return se},vn.prototype.parseRecordList=function(P,X){X||(X=P,P=this.parseUShort());for(var se=new Array(P),he=Object.keys(X),Ie=0;Ie<P;Ie++){for(var Ke={},nt=0;nt<he.length;nt++){var At=he[nt];Ke[At]=X[At].call(this)}se[Ie]=Ke}return se},vn.prototype.parseRecordList32=function(P,X){X||(X=P,P=this.parseULong());for(var se=new Array(P),he=Object.keys(X),Ie=0;Ie<P;Ie++){for(var Ke={},nt=0;nt<he.length;nt++){var At=he[nt];Ke[At]=X[At].call(this)}se[Ie]=Ke}return se},vn.prototype.parseStruct=function(P){if("function"==typeof P)return P.call(this);for(var X=Object.keys(P),se={},he=0;he<X.length;he++){var Ie=X[he];se[Ie]=P[Ie].call(this)}return se},vn.prototype.parseValueRecord=function(P){var X;if(0!==(P=void 0===P?this.parseUShort():P))return X={},1&P&&(X.xPlacement=this.parseShort()),2&P&&(X.yPlacement=this.parseShort()),4&P&&(X.xAdvance=this.parseShort()),8&P&&(X.yAdvance=this.parseShort()),16&P&&(X.xPlaDevice=void 0,this.parseShort()),32&P&&(X.yPlaDevice=void 0,this.parseShort()),64&P&&(X.xAdvDevice=void 0,this.parseShort()),128&P&&(X.yAdvDevice=void 0,this.parseShort()),X},vn.prototype.parseValueRecordList=function(){for(var P=this.parseUShort(),X=this.parseUShort(),se=new Array(X),he=0;he<X;he++)se[he]=this.parseValueRecord(P);return se},vn.prototype.parsePointer=function(P){var X=this.parseOffset16();if(0<X)return new vn(this.data,this.offset+X).parseStruct(P)},vn.prototype.parsePointer32=function(P){var X=this.parseOffset32();if(0<X)return new vn(this.data,this.offset+X).parseStruct(P)},vn.prototype.parseListOfLists=function(P){for(var X=this.parseOffset16List(),se=X.length,he=this.relativeOffset,Ie=new Array(se),Ke=0;Ke<se;Ke++){var nt=X[Ke];if(0===nt)Ie[Ke]=void 0;else if(this.relativeOffset=nt,P){for(var At=this.parseOffset16List(),Qt=new Array(At.length),Jt=0;Jt<At.length;Jt++)this.relativeOffset=nt+At[Jt],Qt[Jt]=P.call(this);Ie[Ke]=Qt}else Ie[Ke]=this.parseUShortList()}return this.relativeOffset=he,Ie},vn.prototype.parseCoverage=function(){var P=this.offset+this.relativeOffset,X=this.parseUShort(),se=this.parseUShort();if(1===X)return{format:1,glyphs:this.parseUShortList(se)};if(2!==X)throw new Error("0x"+P.toString(16)+": Coverage format must be 1 or 2.");for(var he=new Array(se),Ie=0;Ie<se;Ie++)he[Ie]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:he}},vn.prototype.parseClassDef=function(){var P=this.offset+this.relativeOffset,X=this.parseUShort();if(1===X)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===X)return{format:2,ranges:this.parseRecordList({start:vn.uShort,end:vn.uShort,classId:vn.uShort})};throw new Error("0x"+P.toString(16)+": ClassDef format must be 1 or 2.")},vn.list=function(P,X){return function(){return this.parseList(P,X)}},vn.list32=function(P,X){return function(){return this.parseList32(P,X)}},vn.recordList=function(P,X){return function(){return this.parseRecordList(P,X)}},vn.recordList32=function(P,X){return function(){return this.parseRecordList32(P,X)}},vn.pointer=function(P){return function(){return this.parsePointer(P)}},vn.pointer32=function(P){return function(){return this.parsePointer32(P)}},vn.tag=vn.prototype.parseTag,vn.byte=vn.prototype.parseByte,vn.uShort=vn.offset16=vn.prototype.parseUShort,vn.uShortList=vn.prototype.parseUShortList,vn.uLong=vn.offset32=vn.prototype.parseULong,vn.uLongList=vn.prototype.parseULongList,vn.struct=vn.prototype.parseStruct,vn.coverage=vn.prototype.parseCoverage,vn.classDef=vn.prototype.parseClassDef;var er={reserved:vn.uShort,reqFeatureIndex:vn.uShort,featureIndexes:vn.uShortList},Pn=(vn.prototype.parseScriptList=function(){return this.parsePointer(vn.recordList({tag:vn.tag,script:vn.pointer({defaultLangSys:vn.pointer(er),langSysRecords:vn.recordList({tag:vn.tag,langSys:vn.pointer(er)})})}))||[]},vn.prototype.parseFeatureList=function(){return this.parsePointer(vn.recordList({tag:vn.tag,feature:vn.pointer({featureParams:vn.offset16,lookupListIndexes:vn.uShortList})}))||[]},vn.prototype.parseLookupList=function(P){return this.parsePointer(vn.list(vn.pointer(function(){var X=this.parseUShort(),se=(z.argument(1<=X&&X<=9,"GPOS/GSUB lookup type "+X+" unknown."),this.parseUShort()),he=16&se;return{lookupType:X,lookupFlag:se,subtables:this.parseList(vn.pointer(P[X])),markFilteringSet:he?this.parseUShort():void 0}})))||[]},vn.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var P=this.parseUShort(),X=this.parseUShort();return z.argument(1===P&&X<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:vn.offset32,featureTableSubstitutionOffset:vn.offset32})})||[]},{getByte:Qn,getCard8:Qn,getUShort:Rn,getCard16:Rn,getShort:function(P,X){return P.getInt16(X,!1)},getULong:Er,getFixed:Bn,getTag:function(P,X){for(var se="",he=X;he<X+4;he+=1)se+=String.fromCharCode(P.getInt8(he));return se},getOffset:function(P,X,se){for(var he=0,Ie=0;Ie<se;Ie+=1)he=(he<<=8)+P.getUint8(X+Ie);return he},getBytes:function(P,X,se){for(var he=[],Ie=X;Ie<se;Ie+=1)he.push(P.getUint8(Ie));return he},bytesToString:function(P){for(var X="",se=0;se<P.length;se+=1)X+=String.fromCharCode(P[se]);return X},Parser:vn}),gt_parse=function(P,X){for(var se={},he=(se.version=Pn.getUShort(P,X),z.argument(0===se.version,"cmap table version should be 0."),se.numTables=Pn.getUShort(P,X+2),-1),Ie=se.numTables-1;0<=Ie;--Ie){var Ke=Pn.getUShort(P,X+4+8*Ie),nt=Pn.getUShort(P,X+4+8*Ie+2);if(3===Ke&&(0===nt||1===nt||10===nt)||0===Ke&&(0===nt||1===nt||2===nt||3===nt||4===nt)){he=Pn.getULong(P,X+4+8*Ie+4);break}}if(-1===he)throw new Error("No valid cmap sub-tables found.");var At=new Pn.Parser(P,X+he);if(se.format=At.parseUShort(),12===se.format){var Qt,Jt=se,Mn=At;Mn.parseUShort(),Jt.length=Mn.parseULong(),Jt.language=Mn.parseULong(),Jt.groupCount=Qt=Mn.parseULong(),Jt.glyphIndexMap={};for(var je=0;je<Qt;je+=1)for(var xe=Mn.parseULong(),Ve=Mn.parseULong(),ke=Mn.parseULong(),ht=xe;ht<=Ve;ht+=1)Jt.glyphIndexMap[ht]=ke,ke++}else{if(4!==se.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+se.format+").");var on=se,Dn=P,Gn=X,li=he;on.length=At.parseUShort(),on.language=At.parseUShort(),on.segCount=Zr=At.parseUShort()>>1,At.skip("uShort",3),on.glyphIndexMap={};for(var Zr,Si=new Pn.Parser(Dn,Gn+li+14),_i=new Pn.Parser(Dn,Gn+li+16+2*Zr),Ji=new Pn.Parser(Dn,Gn+li+16+4*Zr),cs=new Pn.Parser(Dn,Gn+li+16+6*Zr),yo=Gn+li+16+8*Zr,vo=0;vo<Zr-1;vo+=1)for(var Po=void 0,Ao=Si.parseUShort(),ra=_i.parseUShort(),Vs=Ji.parseShort(),Qs=cs.parseUShort(),di=ra;di<=Ao;di+=1)0!==Qs?(yo=(yo=cs.offset+cs.relativeOffset-2)+Qs+2*(di-ra),0!==(Po=Pn.getUShort(Dn,yo))&&(Po=Po+Vs&65535)):Po=di+Vs&65535,on.glyphIndexMap[di]=Po}return se},gt_make=function(P){for(var X=!0,se=P.length-1;0<se;--se)if(65535<P.get(se).unicode){console.log("Adding CMAP format 12 (needed!)"),X=!1;break}var he,Ie,Ke=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:X?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:X?12:20}],nt=(Ke=(Ke=X?Ke:Ke.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new An.Table("cmap",Ke));for(nt.segments=[],se=0;se<P.length;se+=1){for(var At=P.get(se),Qt=0;Qt<At.unicodes.length;Qt+=1)nt.segments.push({end:he=At.unicodes[Qt],start:he,delta:-(he-(Ie=se)),offset:0,glyphIndex:Ie});nt.segments=nt.segments.sort(function(Gn,li){return Gn.start-li.start})}nt.segments.push({end:65535,start:65535,delta:1,offset:0});var Jt=nt.segments.length,Mn=0,je=[],xe=[],Ve=[],ke=[],ht=[],on=[];for(se=0;se<Jt;se+=1){var Dn=nt.segments[se];Dn.end<=65535&&Dn.start<=65535?(je=je.concat({name:"end_"+se,type:"USHORT",value:Dn.end}),xe=xe.concat({name:"start_"+se,type:"USHORT",value:Dn.start}),Ve=Ve.concat({name:"idDelta_"+se,type:"SHORT",value:Dn.delta}),ke=ke.concat({name:"idRangeOffset_"+se,type:"USHORT",value:Dn.offset}),void 0!==Dn.glyphId&&(ht=ht.concat({name:"glyph_"+se,type:"USHORT",value:Dn.glyphId}))):Mn+=1,X||void 0===Dn.glyphIndex||(on=(on=(on=on.concat({name:"cmap12Start_"+se,type:"ULONG",value:Dn.start})).concat({name:"cmap12End_"+se,type:"ULONG",value:Dn.end})).concat({name:"cmap12Glyph_"+se,type:"ULONG",value:Dn.glyphIndex}))}return nt.segCountX2=2*(Jt-Mn),nt.searchRange=2*Math.pow(2,Math.floor(Math.log(Jt-Mn)/Math.log(2))),nt.entrySelector=Math.log(nt.searchRange/2)/Math.log(2),nt.rangeShift=nt.segCountX2-nt.searchRange,nt.fields=nt.fields.concat(je),nt.fields.push({name:"reservedPad",type:"USHORT",value:0}),nt.fields=nt.fields.concat(xe),nt.fields=nt.fields.concat(Ve),nt.fields=nt.fields.concat(ke),nt.fields=nt.fields.concat(ht),nt.cmap4Length=14+2*je.length+2+2*xe.length+2*Ve.length+2*ke.length+2*ht.length,X||(Ke=16+4*on.length,nt.cmap12Offset=20+nt.cmap4Length,nt.fields=nt.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Ke},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:on.length/3}]),nt.fields=nt.fields.concat(on)),nt},wt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],rt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],bt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],gn=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function On(P){this.font=P}function $n(P){this.cmap=P}function sr(P,X){this.encoding=P,this.charset=X}function Cr(P){switch(P.version){case 1:this.names=gn.slice();break;case 2:this.names=new Array(P.numberOfGlyphs);for(var X=0;X<P.numberOfGlyphs;X++)this.names[X]=P.glyphNameIndex[X]<gn.length?gn[P.glyphNameIndex[X]]:P.names[P.glyphNameIndex[X]-gn.length];break;case 2.5:this.names=new Array(P.numberOfGlyphs);for(var se=0;se<P.numberOfGlyphs;se++)this.names[se]=gn[se+P.glyphNameIndex[se]];break;default:this.names=[]}}On.prototype.charToGlyphIndex=function(P){var X=P.codePointAt(0),se=this.font.glyphs;if(se)for(var he=0;he<se.length;he+=1)for(var Ie=se.get(he),Ke=0;Ke<Ie.unicodes.length;Ke+=1)if(Ie.unicodes[Ke]===X)return he;return null},$n.prototype.charToGlyphIndex=function(P){return this.cmap.glyphIndexMap[P.codePointAt(0)]||0},sr.prototype.charToGlyphIndex=function(P){return P=P.codePointAt(0),this.charset.indexOf(P=this.encoding[P])},Cr.prototype.nameToGlyphIndex=function(P){return this.names.indexOf(P)},Cr.prototype.glyphIndexToName=function(P){return this.names[P]};var Rr_line=function(P,X,se,he,Ie){P.beginPath(),P.moveTo(X,se),P.lineTo(he,Ie),P.stroke()};function Fr(P){this.bindConstructorValues(P)}function In(P,X,se){Object.defineProperty(P,X,{get:function(){return P[se]},set:function(he){P[se]=he},enumerable:!0,configurable:!0})}function cn(P,X){if(this.font=P,this.glyphs={},Array.isArray(X))for(var se=0;se<X.length;se++)this.glyphs[se]=X[se];this.length=X&&X.length||0}Fr.prototype.bindConstructorValues=function(P){var X;this.index=P.index||0,this.name=P.name||null,this.unicode=P.unicode||void 0,this.unicodes=P.unicodes||void 0!==P.unicode?[P.unicode]:[],P.xMin&&(this.xMin=P.xMin),P.yMin&&(this.yMin=P.yMin),P.xMax&&(this.xMax=P.xMax),P.yMax&&(this.yMax=P.yMax),P.advanceWidth&&(this.advanceWidth=P.advanceWidth),Object.defineProperty(this,"path",(X=(P=P.path)||new De,{configurable:!0,get:function(){return X="function"==typeof X?X():X},set:function(se){X=se}}))},Fr.prototype.addUnicode=function(P){0===this.unicodes.length&&(this.unicode=P),this.unicodes.push(P)},Fr.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Fr.prototype.getPath=function(P,X,se,he,Ie){P=void 0!==P?P:0,X=void 0!==X?X:0,se=void 0!==se?se:72;for(var Ke,nt,At=(he=he||{}).xScale,Qt=he.yScale,Jt=((Ke=he.hinting&&Ie&&Ie.hinting?this.path&&Ie.hinting.exec(this,se):Ke)?(nt=Ie.hinting.getCommands(Ke),P=Math.round(P),X=Math.round(X),At=Qt=1):(nt=this.path.commands,he=1/this.path.unitsPerEm*se,void 0===At&&(At=he),void 0===Qt&&(Qt=he)),new De),Mn=0;Mn<nt.length;Mn+=1){var je=nt[Mn];"M"===je.type?Jt.moveTo(P+je.x*At,X+-je.y*Qt):"L"===je.type?Jt.lineTo(P+je.x*At,X+-je.y*Qt):"Q"===je.type?Jt.quadraticCurveTo(P+je.x1*At,X+-je.y1*Qt,P+je.x*At,X+-je.y*Qt):"C"===je.type?Jt.curveTo(P+je.x1*At,X+-je.y1*Qt,P+je.x2*At,X+-je.y2*Qt,P+je.x*At,X+-je.y*Qt):"Z"===je.type&&Jt.closePath()}return Jt},Fr.prototype.getContours=function(){if(void 0===this.points)return[];for(var P=[],X=[],se=0;se<this.points.length;se+=1){var he=this.points[se];X.push(he),he.lastPointOfContour&&(P.push(X),X=[])}return z.argument(0===X.length,"There are still points left in the current contour."),P},Fr.prototype.getMetrics=function(){for(var P=this.path.commands,X=[],se=[],he=0;he<P.length;he+=1){var Ie=P[he];"Z"!==Ie.type&&(X.push(Ie.x),se.push(Ie.y)),"Q"!==Ie.type&&"C"!==Ie.type||(X.push(Ie.x1),se.push(Ie.y1)),"C"===Ie.type&&(X.push(Ie.x2),se.push(Ie.y2))}var Ke={xMin:Math.min.apply(null,X),yMin:Math.min.apply(null,se),xMax:Math.max.apply(null,X),yMax:Math.max.apply(null,se),leftSideBearing:this.leftSideBearing};return isFinite(Ke.xMin)||(Ke.xMin=0),isFinite(Ke.xMax)||(Ke.xMax=this.advanceWidth),isFinite(Ke.yMin)||(Ke.yMin=0),isFinite(Ke.yMax)||(Ke.yMax=0),Ke.rightSideBearing=this.advanceWidth-Ke.leftSideBearing-(Ke.xMax-Ke.xMin),Ke},Fr.prototype.draw=function(P,X,se,he,Ie){this.getPath(X,se,he,Ie).draw(P)},Fr.prototype.drawPoints=function(P,X,se,he){function Ie(Mn,je,xe,Ve){var ke=2*Math.PI;P.beginPath();for(var ht=0;ht<Mn.length;ht+=1)P.moveTo(je+Mn[ht].x*Ve,xe+Mn[ht].y*Ve),P.arc(je+Mn[ht].x*Ve,xe+Mn[ht].y*Ve,2,0,ke,!1);P.closePath(),P.fill()}X=void 0!==X?X:0,se=void 0!==se?se:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24);for(var Ke=[],nt=[],At=this.path,Qt=0;Qt<At.commands.length;Qt+=1){var Jt=At.commands[Qt];void 0!==Jt.x&&Ke.push({x:Jt.x,y:-Jt.y}),void 0!==Jt.x1&&nt.push({x:Jt.x1,y:-Jt.y1}),void 0!==Jt.x2&&nt.push({x:Jt.x2,y:-Jt.y2})}P.fillStyle="blue",Ie(Ke,X,se,he),P.fillStyle="red",Ie(nt,X,se,he)},Fr.prototype.drawMetrics=function(P,X,se,he){X=void 0!==X?X:0,se=void 0!==se?se:0,he=1/this.path.unitsPerEm*(he=void 0!==he?he:24),P.lineWidth=1,P.strokeStyle="black",Rr_line(P,X,-1e4,X,1e4),Rr_line(P,-1e4,se,1e4,se);var Ie=this.xMin||0,Ke=this.yMin||0,nt=this.xMax||0,At=this.yMax||0,Qt=this.advanceWidth||0;P.strokeStyle="blue",Rr_line(P,X+Ie*he,-1e4,X+Ie*he,1e4),Rr_line(P,X+nt*he,-1e4,X+nt*he,1e4),Rr_line(P,-1e4,se+-Ke*he,1e4,se+-Ke*he),Rr_line(P,-1e4,se+-At*he,1e4,se+-At*he),P.strokeStyle="green",Rr_line(P,X+Qt*he,-1e4,X+Qt*he,1e4)},cn.prototype.get=function(P){return"function"==typeof this.glyphs[P]&&(this.glyphs[P]=this.glyphs[P]()),this.glyphs[P]},cn.prototype.push=function(P,X){this.glyphs[P]=X,this.length++};var Tn={GlyphSet:cn,glyphLoader:function(P,X){return new Fr({index:X,font:P})},ttfGlyphLoader:function(P,X,se,he,Ie,Ke){return function(){var nt=new Fr({index:X,font:P});return nt.path=function(){se(nt,he,Ie);var At=Ke(P.glyphs,nt);return At.unitsPerEm=P.unitsPerEm,At},In(nt,"xMin","_xMin"),In(nt,"xMax","_xMax"),In(nt,"yMin","_yMin"),In(nt,"yMax","_yMax"),nt}},cffGlyphLoader:function(P,X,se,he){return function(){var Ie=new Fr({index:X,font:P});return Ie.path=function(){var Ke=se(P,Ie,he);return Ke.unitsPerEm=P.unitsPerEm,Ke},Ie}}};function sn(P){return P.length<1240?107:P.length<33900?1131:32768}function _n(P,X,se){var he,Ie=[],Ke=[],nt=Pn.getCard16(P,X);if(0!==nt){for(var At=Pn.getByte(P,X+2),Qt=X+(nt+1)*At+2,Jt=X+3,Mn=0;Mn<nt+1;Mn+=1)Ie.push(Pn.getOffset(P,Jt,At)),Jt+=At;he=Qt+Ie[nt]}else he=X+2;for(var je=0;je<Ie.length-1;je+=1){var xe=Pn.getBytes(P,Qt+Ie[je],Qt+Ie[je+1]);se&&(xe=se(xe)),Ke.push(xe)}return{objects:Ke,startOffset:X,endOffset:he}}function tr(P,X){if(28===X)return P.parseByte()<<8|P.parseByte();if(29===X)return P.parseByte()<<24|P.parseByte()<<16|P.parseByte()<<8|P.parseByte();if(30===X){for(var se=P,he="",Ie=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var Ke=(nt=se.parseByte())>>4,nt=15&nt;if(15==Ke||(he+=Ie[Ke],15==nt))break;he+=Ie[nt]}return parseFloat(he)}if(32<=X&&X<=246)return X-139;if(247<=X&&X<=250)return 256*(X-247)+P.parseByte()+108;if(251<=X&&X<=254)return 256*-(X-251)-P.parseByte()-108;throw new Error("Invalid b0 "+X)}function Xt(P,X,se){var he=new Pn.Parser(P,X=void 0!==X?X:0),Ie=[],Ke=[];for(se=void 0!==se?se:P.length;he.relativeOffset<se;){var nt=he.parseByte();nt<=21?(12===nt&&(nt=1200+he.parseByte()),Ie.push([nt,Ke]),Ke=[]):Ke.push(tr(he,nt))}for(var At=Ie,Qt={},Jt=0;Jt<At.length;Jt+=1){var xe,Mn=At[Jt][0],je=At[Jt][1];if(xe=1===je.length?je[0]:je,Qt.hasOwnProperty(Mn)&&!isNaN(Qt[Mn]))throw new Error("Object "+Qt+" already has key "+Mn);Qt[Mn]=xe}return Qt}function hn(P,X){return X<=390?wt[X]:P[X-391]}function Fn(P,X,se){for(var he,Ie={},Ke=0;Ke<X.length;Ke+=1){var nt=X[Ke];if(Array.isArray(nt.type)){var At=[];At.length=nt.type.length;for(var Qt=0;Qt<nt.type.length;Qt++)void 0===(he=void 0!==P[nt.op]?P[nt.op][Qt]:void 0)&&(he=void 0!==nt.value&&void 0!==nt.value[Qt]?nt.value[Qt]:null),"SID"===nt.type[Qt]&&(he=hn(se,he)),At[Qt]=he;Ie[nt.name]=At}else void 0===(he=P[nt.op])&&(he=void 0!==nt.value?nt.value:null),"SID"===nt.type&&(he=hn(se,he)),Ie[nt.name]=he}return Ie}var Cn=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Wn=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function yr(P,X,se,he){return Fn(Xt(P,X,se),Wn,he)}function fr(P,X,se,he){for(var Ie=[],Ke=0;Ke<se.length;Ke+=1){var nt,At=((At=he,nt=Fn(Xt(nt=new DataView(new Uint8Array(se[Ke]).buffer),0,nt.byteLength),Cn,At))._subrs=[],nt._subrsBias=0,nt.private[0]),Qt=nt.private[1];0!==At&&0!==Qt&&(At=yr(P,Qt+X,At,he),nt._defaultWidthX=At.defaultWidthX,nt._nominalWidthX=At.nominalWidthX,0!==At.subrs&&(Qt=_n(P,Qt+At.subrs+X),nt._subrs=Qt.objects,nt._subrsBias=sn(nt._subrs)),nt._privateDict=At),Ie.push(nt)}return Ie}function Ur(P,X,se){var he,Ie,Ke,nt,At,Qt,Jt,Mn,je,xe=new De,Ve=[],ke=0,ht=!1,on=!1,Dn=0,Gn=0,li=(je=(P.isCIDFont?(At=P.tables.cff.topDict._fdSelect[X.index],At=P.tables.cff.topDict._fdArray[At],Qt=At._subrs,Jt=At._subrsBias,Mn=At._defaultWidthX,At):(Qt=P.tables.cff.topDict._subrs,Jt=P.tables.cff.topDict._subrsBias,Mn=P.tables.cff.topDict._defaultWidthX,P.tables.cff.topDict))._nominalWidthX,Mn);function Zr(_i,Ji){on&&xe.closePath(),xe.moveTo(_i,Ji),on=!0}function Si(){Ve.length%2==0||ht||(li=Ve.shift()+je),ke+=Ve.length>>1,Ve.length=0,ht=!0}return function _i(Ji){for(var cs,yo,vo,Po,Ao,ra,Vs,Qs,di,eo,fo,js,bi=0;bi<Ji.length;){var Fo=Ji[bi];switch(bi+=1,Fo){case 1:case 3:case 18:case 23:Si();break;case 4:1<Ve.length&&!ht&&(li=Ve.shift()+je,ht=!0),Gn+=Ve.pop(),Zr(Dn,Gn);break;case 5:for(;0<Ve.length;)Dn+=Ve.shift(),Gn+=Ve.shift(),xe.lineTo(Dn,Gn);break;case 6:for(;0<Ve.length&&(Dn+=Ve.shift(),xe.lineTo(Dn,Gn),0!==Ve.length);)Gn+=Ve.shift(),xe.lineTo(Dn,Gn);break;case 7:for(;0<Ve.length&&(Gn+=Ve.shift(),xe.lineTo(Dn,Gn),0!==Ve.length);)Dn+=Ve.shift(),xe.lineTo(Dn,Gn);break;case 8:for(;0<Ve.length;)he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),Gn=nt+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);break;case 10:Ao=Ve.pop()+Jt,(ra=Qt[Ao])&&_i(ra);break;case 11:return;case 12:switch(Fo=Ji[bi],bi+=1,Fo){case 35:he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Vs=Ke+Ve.shift(),Qs=nt+Ve.shift(),di=Vs+Ve.shift(),eo=Qs+Ve.shift(),fo=di+Ve.shift(),js=eo+Ve.shift(),Dn=fo+Ve.shift(),Gn=js+Ve.shift(),Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Vs,Qs),xe.curveTo(di,eo,fo,js,Dn,Gn);break;case 34:he=Dn+Ve.shift(),Ie=Gn,Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Vs=Ke+Ve.shift(),Qs=nt,di=Vs+Ve.shift(),eo=nt,fo=di+Ve.shift(),js=Gn,Dn=fo+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Vs,Qs),xe.curveTo(di,eo,fo,js,Dn,Gn);break;case 36:he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Vs=Ke+Ve.shift(),Qs=nt,di=Vs+Ve.shift(),eo=nt,fo=di+Ve.shift(),js=eo+Ve.shift(),Dn=fo+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Vs,Qs),xe.curveTo(di,eo,fo,js,Dn,Gn);break;case 37:he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Vs=Ke+Ve.shift(),Qs=nt+Ve.shift(),di=Vs+Ve.shift(),eo=Qs+Ve.shift(),fo=di+Ve.shift(),js=eo+Ve.shift(),Math.abs(fo-Dn)>Math.abs(js-Gn)?Dn=fo+Ve.shift():Gn=js+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Vs,Qs),xe.curveTo(di,eo,fo,js,Dn,Gn);break;default:console.log("Glyph "+X.index+": unknown operator 1200"+Fo),Ve.length=0}break;case 14:0<Ve.length&&!ht&&(li=Ve.shift()+je,ht=!0),on&&(xe.closePath(),on=!1);break;case 19:case 20:Si(),bi+=ke+7>>3;break;case 21:2<Ve.length&&!ht&&(li=Ve.shift()+je,ht=!0),Gn+=Ve.pop(),Zr(Dn+=Ve.pop(),Gn);break;case 22:1<Ve.length&&!ht&&(li=Ve.shift()+je,ht=!0),Zr(Dn+=Ve.pop(),Gn);break;case 24:for(;2<Ve.length;)he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),Gn=nt+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);Dn+=Ve.shift(),Gn+=Ve.shift(),xe.lineTo(Dn,Gn);break;case 25:for(;6<Ve.length;)Dn+=Ve.shift(),Gn+=Ve.shift(),xe.lineTo(Dn,Gn);he=Dn+Ve.shift(),Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),Gn=nt+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);break;case 26:for(Ve.length%2&&(Dn+=Ve.shift());0<Ve.length;)he=Dn,Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke,Gn=nt+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);break;case 27:for(Ve.length%2&&(Gn+=Ve.shift());0<Ve.length;)he=Dn+Ve.shift(),Ie=Gn,Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),xe.curveTo(he,Ie,Ke,nt,Dn,Gn=nt);break;case 28:Ve.push(((cs=Ji[bi])<<24|(yo=Ji[bi+1])<<16)>>16),bi+=2;break;case 29:Ao=Ve.pop()+P.gsubrsBias,(ra=P.gsubrs[Ao])&&_i(ra);break;case 30:for(;0<Ve.length&&(he=Dn,Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),Gn=nt+(1===Ve.length?Ve.shift():0),xe.curveTo(he,Ie,Ke,nt,Dn,Gn),0!==Ve.length);)he=Dn+Ve.shift(),Ie=Gn,Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Gn=nt+Ve.shift(),Dn=Ke+(1===Ve.length?Ve.shift():0),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);break;case 31:for(;0<Ve.length&&(he=Dn+Ve.shift(),Ie=Gn,Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Gn=nt+Ve.shift(),Dn=Ke+(1===Ve.length?Ve.shift():0),xe.curveTo(he,Ie,Ke,nt,Dn,Gn),0!==Ve.length);)he=Dn,Ie=Gn+Ve.shift(),Ke=he+Ve.shift(),nt=Ie+Ve.shift(),Dn=Ke+Ve.shift(),Gn=nt+(1===Ve.length?Ve.shift():0),xe.curveTo(he,Ie,Ke,nt,Dn,Gn);break;default:Fo<32?console.log("Glyph "+X.index+": unknown operator "+Fo):Fo<247?Ve.push(Fo-139):Fo<251?(cs=Ji[bi],bi+=1,Ve.push(256*(Fo-247)+cs+108)):Fo<255?(cs=Ji[bi],bi+=1,Ve.push(256*-(Fo-251)-cs-108)):(cs=Ji[bi],yo=Ji[bi+1],vo=Ji[bi+2],Po=Ji[bi+3],bi+=4,Ve.push((cs<<24|yo<<16|vo<<8|Po)/65536))}}}(se),X.advanceWidth=li,xe}function vr(P,X){var se,he=wt.indexOf(P);return 0<=he&&(se=he),0<=(he=X.indexOf(P))?se=he+wt.length:(se=wt.length+X.length,X.push(P)),se}function ei(P,X,se){for(var he={},Ie=0;Ie<P.length;Ie+=1){var Ke=P[Ie],nt=X[Ke.name];void 0===nt||function At(Qt,Jt){if(Qt===Jt)return 1;if(Array.isArray(Qt)&&Array.isArray(Jt)&&Qt.length===Jt.length){for(var Mn=0;Mn<Qt.length;Mn+=1)if(!At(Qt[Mn],Jt[Mn]))return;return 1}}(nt,Ke.value)||("SID"===Ke.type&&(nt=vr(nt,se)),he[Ke.op]={name:Ke.name,type:Ke.type,value:nt})}return he}function ne(P,X){var se=new An.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return se.dict=ei(Cn,P,X),se}function Pe(P){var X=new An.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return X.topDicts=[{name:"topDict_0",type:"TABLE",value:P}],X}var T_parse=function(P,X,se){se.tables.cff={},(Ie={}).formatMajor=Pn.getCard8(At=P,he=X),Ie.formatMinor=Pn.getCard8(At,he+1),Ie.size=Pn.getCard8(At,he+2),Ie.offsetSize=Pn.getCard8(At,he+3),Ie.startOffset=he,Ie.endOffset=he+4;var At=_n(P,Ie.endOffset,Pn.bytesToString),he=_n(P,At.endOffset),Ie=_n(P,he.endOffset,Pn.bytesToString);if(At=_n(P,Ie.endOffset),se.gsubrs=At.objects,se.gsubrsBias=sn(se.gsubrs),1!==(At=fr(P,X,he.objects,Ie.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+At.length);if((se.tables.cff.topDict=he=At[0])._privateDict&&(se.defaultWidthX=he._privateDict.defaultWidthX,se.nominalWidthX=he._privateDict.nominalWidthX),void 0!==he.ros[0]&&void 0!==he.ros[1]&&(se.isCIDFont=!0),se.isCIDFont){var Ke=he.fdSelect;if(0===(At=he.fdArray)||0===Ke)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");At=fr(P,X,_n(P,At+=X).objects,Ie.objects),he._fdArray=At,he._fdSelect=function(xe,Ve,ke,ht){var on,Dn=[],Gn=new Pn.Parser(xe,Ve);if(0===(xe=Gn.parseCard8()))for(var li=0;li<ke;li++){if(ht<=(on=Gn.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+on+" (FD count "+ht+")");Dn.push(on)}else{if(3!==xe)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+xe);var Zr,Si=Gn.parseCard16(),_i=Gn.parseCard16();if(0!==_i)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+_i);for(var Ji=0;Ji<Si;Ji++){if(on=Gn.parseCard8(),Zr=Gn.parseCard16(),ht<=on)throw new Error("CFF table CID Font FDSelect has bad FD index value "+on+" (FD count "+ht+")");if(ke<Zr)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Zr);for(;_i<Zr;_i++)Dn.push(on);_i=Zr}if(Zr!==ke)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Zr)}return Dn}(P,Ke+=X,se.numGlyphs,At.length)}At=yr(P,Ke=X+he.private[1],he.private[0],Ie.objects);var nt=(se.defaultWidthX=At.defaultWidthX,se.nominalWidthX=At.nominalWidthX,0!==At.subrs?(Ke=_n(P,Ke+At.subrs),se.subrs=Ke.objects,se.subrsBias=sn(se.subrs)):(se.subrs=[],se.subrsBias=0),_n(P,X+he.charStrings));se.nGlyphs=nt.objects.length,At=function(Mn,je,xe,Ve){var ke=new Pn.Parser(Mn,je),ht=(--xe,[".notdef"]);if(0===(Mn=ke.parseCard8()))for(var on=0;on<xe;on+=1)Dn=ke.parseSID(),ht.push(hn(Ve,Dn));else if(1===Mn)for(;ht.length<=xe;)for(var Dn=ke.parseSID(),Gn=ke.parseCard8(),li=0;li<=Gn;li+=1)ht.push(hn(Ve,Dn)),Dn+=1;else{if(2!==Mn)throw new Error("Unknown charset format "+Mn);for(;ht.length<=xe;){Dn=ke.parseSID(),Gn=ke.parseCard16();for(var Zr=0;Zr<=Gn;Zr+=1)ht.push(hn(Ve,Dn)),Dn+=1}}return ht}(P,X+he.charset,se.nGlyphs,Ie.objects),se.cffEncoding=0===he.encoding?new sr(rt,At):1===he.encoding?new sr(bt,At):function(Mn,je,xe){var Ve={},ke=new Pn.Parser(Mn,je);if(0===(Mn=ke.parseCard8()))for(var ht=ke.parseCard8(),on=0;on<ht;on+=1)Ve[Gn=ke.parseCard8()]=on;else{if(1!==Mn)throw new Error("Unknown encoding format "+Mn);for(var Dn=ke.parseCard8(),Gn=1,li=0;li<Dn;li+=1)for(var Zr=ke.parseCard8(),Si=ke.parseCard8(),_i=Zr;_i<=Zr+Si;_i+=1)Ve[_i]=Gn,Gn+=1}return new sr(Ve,xe)}(P,X+he.encoding,At),se.encoding=se.encoding||se.cffEncoding,se.glyphs=new Tn.GlyphSet(se);for(var Qt=0;Qt<se.nGlyphs;Qt+=1)se.glyphs.push(Qt,Tn.cffGlyphLoader(se,Qt,Ur,nt.objects[Qt]))},T_make=function(P,Mn){for(var se,he=new An.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Ie={version:Mn.version,fullName:Mn.fullName,familyName:Mn.familyName,weight:Mn.weightName,fontBBox:Mn.fontBBox||[0,0,0,0],fontMatrix:[Ie=1/Mn.unitsPerEm,0,0,Ie,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Ke=[],nt=1;nt<P.length;nt+=1)se=P.get(nt),Ke.push(se.name);var At,Qt,Jt=[],je=(he.header=new An.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),he.nameIndex=function(xe){var Ve=new An.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ve.names=[];for(var ke=0;ke<xe.length;ke+=1)Ve.names.push({name:"name_"+ke,type:"NAME",value:xe[ke]});return Ve}([Mn.postScriptName]),Mn=ne(Ie,Jt),he.topDictIndex=Pe(Mn),he.globalSubrIndex=new An.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),he.charsets=function(xe,Ve){for(var ke=new An.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ht=0;ht<xe.length;ht+=1){var on=vr(xe[ht],Ve);ke.fields.push({name:"glyph_"+ht,type:"SID",value:on})}return ke}(Ke,Jt),he.charStringsIndex=function Qe(P){for(var X=new An.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),se=0;se<P.length;se+=1){var he=P.get(se),Ie=function(Ke){for(var nt=[],At=Ke.path,Qt=(nt.push({name:"width",type:"NUMBER",value:Ke.advanceWidth}),0),Jt=0,Mn=0;Mn<At.commands.length;Mn+=1){var je,xe,Ve,ke,ht=void 0,on=void 0,Dn=At.commands[Mn];"M"===(Dn="Q"===Dn.type?{type:"C",x:Dn.x,y:Dn.y,x1:1/3*Qt+2/3*Dn.x1,y1:1/3*Jt+2/3*Dn.y1,x2:1/3*Dn.x+2/3*Dn.x1,y2:1/3*Dn.y+2/3*Dn.y1}:Dn).type?(ht=Math.round(Dn.x-Qt),on=Math.round(Dn.y-Jt),nt.push({name:"dx",type:"NUMBER",value:ht}),nt.push({name:"dy",type:"NUMBER",value:on}),nt.push({name:"rmoveto",type:"OP",value:21}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y)):"L"===Dn.type?(ht=Math.round(Dn.x-Qt),on=Math.round(Dn.y-Jt),nt.push({name:"dx",type:"NUMBER",value:ht}),nt.push({name:"dy",type:"NUMBER",value:on}),nt.push({name:"rlineto",type:"OP",value:5}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y)):"C"===Dn.type&&(je=Math.round(Dn.x1-Qt),xe=Math.round(Dn.y1-Jt),Ve=Math.round(Dn.x2-Dn.x1),ke=Math.round(Dn.y2-Dn.y1),ht=Math.round(Dn.x-Dn.x2),on=Math.round(Dn.y-Dn.y2),nt.push({name:"dx1",type:"NUMBER",value:je}),nt.push({name:"dy1",type:"NUMBER",value:xe}),nt.push({name:"dx2",type:"NUMBER",value:Ve}),nt.push({name:"dy2",type:"NUMBER",value:ke}),nt.push({name:"dx",type:"NUMBER",value:ht}),nt.push({name:"dy",type:"NUMBER",value:on}),nt.push({name:"rrcurveto",type:"OP",value:8}),Qt=Math.round(Dn.x),Jt=Math.round(Dn.y))}return nt.push({name:"endchar",type:"OP",value:14}),nt}(he);X.charStrings.push({name:he.name,type:"CHARSTRING",value:Ie})}return X}(P),he.privateDict=(je={},At=Jt,(Qt=new An.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ei(Wn,je,At),Qt),he.stringIndex=function(xe){var Ve=new An.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ve.strings=[];for(var ke=0;ke<xe.length;ke+=1)Ve.strings.push({name:"string_"+ke,type:"STRING",value:xe[ke]});return Ve}(Jt),he.header.sizeOf()+he.nameIndex.sizeOf()+he.topDictIndex.sizeOf()+he.stringIndex.sizeOf()+he.globalSubrIndex.sizeOf());return Ie.charset=je,Ie.encoding=0,Ie.charStrings=Ie.charset+he.charsets.sizeOf(),Ie.private[1]=Ie.charStrings+he.charStringsIndex.sizeOf(),Mn=ne(Ie,Jt),he.topDictIndex=Pe(Mn),he},N_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.fontRevision=Math.round(1e3*he.parseFixed())/1e3,se.checkSumAdjustment=he.parseULong(),se.magicNumber=he.parseULong(),z.argument(1594834165===se.magicNumber,"Font header has wrong magic number."),se.flags=he.parseUShort(),se.unitsPerEm=he.parseUShort(),se.created=he.parseLongDateTime(),se.modified=he.parseLongDateTime(),se.xMin=he.parseShort(),se.yMin=he.parseShort(),se.xMax=he.parseShort(),se.yMax=he.parseShort(),se.macStyle=he.parseUShort(),se.lowestRecPPEM=he.parseUShort(),se.fontDirectionHint=he.parseShort(),se.indexToLocFormat=he.parseShort(),se.glyphDataFormat=he.parseShort(),se},N_make=function(P){var X=Math.round((new Date).getTime()/1e3)+2082844800,se=X;return P.createdTimestamp&&(se=P.createdTimestamp+2082844800),new An.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:se},{name:"modified",type:"LONGDATETIME",value:X},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],P)},R_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.ascender=he.parseShort(),se.descender=he.parseShort(),se.lineGap=he.parseShort(),se.advanceWidthMax=he.parseUShort(),se.minLeftSideBearing=he.parseShort(),se.minRightSideBearing=he.parseShort(),se.xMaxExtent=he.parseShort(),se.caretSlopeRise=he.parseShort(),se.caretSlopeRun=he.parseShort(),se.caretOffset=he.parseShort(),he.relativeOffset+=8,se.metricDataFormat=he.parseShort(),se.numberOfHMetrics=he.parseUShort(),se},R_make=function(P){return new An.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],P)},U_parse=function(P,X,se,he,Ie){for(var Ke,nt,At=new Pn.Parser(P,X),Qt=0;Qt<he;Qt+=1){Qt<se&&(Ke=At.parseUShort(),nt=At.parseShort());var Jt=Ie.get(Qt);Jt.advanceWidth=Ke,Jt.leftSideBearing=nt}},U_make=function(P){for(var X=new An.Table("hmtx",[]),se=0;se<P.length;se+=1){var he=(Ie=P.get(se)).advanceWidth||0,Ie=Ie.leftSideBearing||0;X.fields.push({name:"advanceWidth_"+se,type:"USHORT",value:he}),X.fields.push({name:"leftSideBearing_"+se,type:"SHORT",value:Ie})}return X},ie_make=function(P){for(var X=new An.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:P.length}]),se="",he=12+4*P.length,Ie=0;Ie<P.length;++Ie){var Ke=se.indexOf(P[Ie]);Ke<0&&(Ke=se.length,se+=P[Ie]),X.fields.push({name:"offset "+Ie,type:"USHORT",value:he+Ke}),X.fields.push({name:"length "+Ie,type:"USHORT",value:P[Ie].length})}return X.fields.push({name:"stringPool",type:"CHARARRAY",value:se}),X},ie_parse=function(P,X){for(var se=new Pn.Parser(P,X),he=se.parseULong(),Ie=(z.argument(1===he,"Unsupported ltag table version."),se.skip("uLong",1),se.parseULong()),Ke=[],nt=0;nt<Ie;nt++){for(var At="",Qt=X+se.parseUShort(),Jt=se.parseUShort(),Mn=Qt;Mn<Qt+Jt;++Mn)At+=String.fromCharCode(P.getInt8(Mn));Ke.push(At)}return Ke},$_parse=function(he,X){var se={};return he=new Pn.Parser(he,X),se.version=he.parseVersion(),se.numGlyphs=he.parseUShort(),1===se.version&&(se.maxPoints=he.parseUShort(),se.maxContours=he.parseUShort(),se.maxCompositePoints=he.parseUShort(),se.maxCompositeContours=he.parseUShort(),se.maxZones=he.parseUShort(),se.maxTwilightPoints=he.parseUShort(),se.maxStorage=he.parseUShort(),se.maxFunctionDefs=he.parseUShort(),se.maxInstructionDefs=he.parseUShort(),se.maxStackElements=he.parseUShort(),se.maxSizeOfInstructions=he.parseUShort(),se.maxComponentElements=he.parseUShort(),se.maxComponentDepth=he.parseUShort()),se},$_make=function(P){return new An.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:P}])},de=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ae={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},tt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},pt={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Kt="utf-16",Fe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},We={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function at(P,X,se){switch(P){case 0:return Kt;case 1:return We[se]||Fe[X];case 3:if(1===X||10===X)return Kt}}function Ze(P){var X,se={};for(X in P)se[P[X]]=parseInt(X);return se}function xt(P,X,se,he,Ie,Ke){return new An.Record("NameRecord",[{name:"platformID",type:"USHORT",value:P},{name:"encodingID",type:"USHORT",value:X},{name:"languageID",type:"USHORT",value:se},{name:"nameID",type:"USHORT",value:he},{name:"length",type:"USHORT",value:Ie},{name:"offset",type:"USHORT",value:Ke}])}function Zt(P,X){if((se=function(Ke,nt){var At=Ke.length,Qt=nt.length-At+1;e:for(var Jt=0;Jt<Qt;Jt++)for(;Jt<Qt;Jt++){for(var Mn=0;Mn<At;Mn++)if(nt[Jt+Mn]!==Ke[Mn])continue e;return Jt}return-1}(P,X))<0)for(var se=X.length,he=0,Ie=P.length;he<Ie;++he)X.push(P[he]);return se}var En_parse=function(P,X,se){for(var he={},Ie=new Pn.Parser(P,X),Ke=(X=Ie.parseUShort(),Ie.parseUShort()),nt=Ie.offset+Ie.parseUShort(),At=0;At<Ke;At++){var ke=Ie.parseUShort(),Qt=Ie.parseUShort(),Jt=Ie.parseUShort(),Mn=Ie.parseUShort(),je=(Mn=de[Mn]||Mn,Ie.parseUShort()),xe=Ie.parseUShort(),Ve=function(on,Dn,Gn){switch(on){case 0:if(65535===Dn)return"und";if(Gn)return Gn[Dn];break;case 1:return Ae[Dn];case 3:return pt[Dn]}}(ke,Jt,se);void 0!==(ke=at(ke,Qt,Jt))&&void 0!==Ve&&(Qt=void 0,(Qt=ke===Kt?ye.UTF16(P,nt+xe,je):ye.MACSTRING(P,nt+xe,je,ke))&&((Jt=void 0===(Jt=he[Mn])?he[Mn]={}:Jt)[Ve]=Qt))}return 1===X&&Ie.parseUShort(),he},En_make=function(P,X){var se,he=[],Ie={},Ke=Ze(de);for(se in P){var nt=Ke[se];if(void 0===nt&&(nt=se),xe=parseInt(nt),isNaN(xe))throw new Error('Name table entry "'+se+'" does not exist, see nameTableNames for complete list.');Ie[xe]=P[se],he.push(xe)}for(var At=Ze(Ae),Qt=Ze(pt),Jt=[],Mn=[],je=0;je<he.length;je++){var xe,Ve,ke=Ie[xe=he[je]];for(Ve in ke){var Zr,ht=ke[Ve],on=At[Ve],Dn=tt[on],Gn=at(Zr=1,Dn,on),li=(void 0===(Gn=Ue.MACSTRING(ht,Gn))&&(Zr=0,(on=X.indexOf(Ve))<0&&(on=X.length,X.push(Ve)),Dn=4,Gn=Ue.UTF16(ht)),Zt(Gn,Mn));void 0!==(Jt.push(xt(Zr,Dn,on,xe,Gn.length,li)),Zr=Qt[Ve])&&(on=Zt(Dn=Ue.UTF16(ht),Mn),Jt.push(xt(3,1,Zr,xe,Dn.length,on)))}}Jt.sort(function(Ji,cs){return Ji.platformID-cs.platformID||Ji.encodingID-cs.encodingID||Ji.languageID-cs.languageID||Ji.nameID-cs.nameID});for(var Si=new An.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Jt.length},{name:"stringOffset",type:"USHORT",value:6+12*Jt.length}]),_i=0;_i<Jt.length;_i++)Si.fields.push({name:"record_"+_i,type:"RECORD",value:Jt[_i]});return Si.fields.push({name:"strings",type:"LITERAL",value:Mn}),Si},zn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],or_parse=function(P,X){var se={},he=new Pn.Parser(P,X);se.version=he.parseUShort(),se.xAvgCharWidth=he.parseShort(),se.usWeightClass=he.parseUShort(),se.usWidthClass=he.parseUShort(),se.fsType=he.parseUShort(),se.ySubscriptXSize=he.parseShort(),se.ySubscriptYSize=he.parseShort(),se.ySubscriptXOffset=he.parseShort(),se.ySubscriptYOffset=he.parseShort(),se.ySuperscriptXSize=he.parseShort(),se.ySuperscriptYSize=he.parseShort(),se.ySuperscriptXOffset=he.parseShort(),se.ySuperscriptYOffset=he.parseShort(),se.yStrikeoutSize=he.parseShort(),se.yStrikeoutPosition=he.parseShort(),se.sFamilyClass=he.parseShort(),se.panose=[];for(var Ie=0;Ie<10;Ie++)se.panose[Ie]=he.parseByte();return se.ulUnicodeRange1=he.parseULong(),se.ulUnicodeRange2=he.parseULong(),se.ulUnicodeRange3=he.parseULong(),se.ulUnicodeRange4=he.parseULong(),se.achVendID=String.fromCharCode(he.parseByte(),he.parseByte(),he.parseByte(),he.parseByte()),se.fsSelection=he.parseUShort(),se.usFirstCharIndex=he.parseUShort(),se.usLastCharIndex=he.parseUShort(),se.sTypoAscender=he.parseShort(),se.sTypoDescender=he.parseShort(),se.sTypoLineGap=he.parseShort(),se.usWinAscent=he.parseUShort(),se.usWinDescent=he.parseUShort(),1<=se.version&&(se.ulCodePageRange1=he.parseULong(),se.ulCodePageRange2=he.parseULong()),2<=se.version&&(se.sxHeight=he.parseShort(),se.sCapHeight=he.parseShort(),se.usDefaultChar=he.parseUShort(),se.usBreakChar=he.parseUShort(),se.usMaxContent=he.parseUShort()),se},or_make=function(P){return new An.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],P)},or_getUnicodeRange=function(P){for(var X=0;X<zn.length;X+=1){var se=zn[X];if(P>=se.begin&&P<se.end)return X}return-1},ii_parse=function(P,X){var se={},he=new Pn.Parser(P,X);switch(se.version=he.parseVersion(),se.italicAngle=he.parseFixed(),se.underlinePosition=he.parseShort(),se.underlineThickness=he.parseShort(),se.isFixedPitch=he.parseULong(),se.minMemType42=he.parseULong(),se.maxMemType42=he.parseULong(),se.minMemType1=he.parseULong(),se.maxMemType1=he.parseULong(),se.version){case 1:se.names=gn.slice();break;case 2:se.numberOfGlyphs=he.parseUShort(),se.glyphNameIndex=new Array(se.numberOfGlyphs);for(var Ie=0;Ie<se.numberOfGlyphs;Ie++)se.glyphNameIndex[Ie]=he.parseUShort();se.names=[];for(var Ke,nt=0;nt<se.numberOfGlyphs;nt++)se.glyphNameIndex[nt]>=gn.length&&(Ke=he.parseChar(),se.names.push(he.parseString(Ke)));break;case 2.5:se.numberOfGlyphs=he.parseUShort(),se.offset=new Array(se.numberOfGlyphs);for(var At=0;At<se.numberOfGlyphs;At++)se.offset[At]=he.parseChar()}return se},ii_make=function(){return new An.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Bi=new Array(9),Rs=(Bi[1]=function(){var P=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{substFormat:1,coverage:this.parsePointer(vn.coverage),deltaGlyphId:this.parseUShort()}:2===X?{substFormat:2,coverage:this.parsePointer(vn.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+P.toString(16)+": lookup type 1 format must be 1 or 2.")},Bi[2]=function(){var P=this.parseUShort();return z.argument(1===P,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(vn.coverage),sequences:this.parseListOfLists()}},Bi[3]=function(){var P=this.parseUShort();return z.argument(1===P,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(vn.coverage),alternateSets:this.parseListOfLists()}},Bi[4]=function(){var P=this.parseUShort();return z.argument(1===P,"GSUB ligature table identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(vn.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:vn.uShort,lookupListIndex:vn.uShort});Bi[5]=function(){var P,X,se=this.offset+this.relativeOffset,he=this.parseUShort();return 1===he?{substFormat:he,coverage:this.parsePointer(vn.coverage),ruleSets:this.parseListOfLists(function(){var Ie=this.parseUShort(),Ke=this.parseUShort();return{input:this.parseUShortList(Ie-1),lookupRecords:this.parseRecordList(Ke,Rs)}})}:2===he?{substFormat:he,coverage:this.parsePointer(vn.coverage),classDef:this.parsePointer(vn.classDef),classSets:this.parseListOfLists(function(){var Ie=this.parseUShort(),Ke=this.parseUShort();return{classes:this.parseUShortList(Ie-1),lookupRecords:this.parseRecordList(Ke,Rs)}})}:3===he?(P=this.parseUShort(),X=this.parseUShort(),{substFormat:he,coverages:this.parseList(P,vn.pointer(vn.coverage)),lookupRecords:this.parseRecordList(X,Rs)}):void z.assert(!1,"0x"+se.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Bi[6]=function(){var P=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{substFormat:1,coverage:this.parsePointer(vn.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Rs)}})}:2===X?{substFormat:2,coverage:this.parsePointer(vn.coverage),backtrackClassDef:this.parsePointer(vn.classDef),inputClassDef:this.parsePointer(vn.classDef),lookaheadClassDef:this.parsePointer(vn.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Rs)}})}:3===X?{substFormat:3,backtrackCoverage:this.parseList(vn.pointer(vn.coverage)),inputCoverage:this.parseList(vn.pointer(vn.coverage)),lookaheadCoverage:this.parseList(vn.pointer(vn.coverage)),lookupRecords:this.parseRecordList(Rs)}:void z.assert(!1,"0x"+P.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Bi[7]=function(){var P=this.parseUShort(),X=(z.argument(1===P,"GSUB Extension Substitution subtable identifier-format must be 1"),P=this.parseUShort(),new vn(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:P,extension:Bi[P].call(X)}},Bi[8]=function(){var P=this.parseUShort();return z.argument(1===P,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:P,coverage:this.parsePointer(vn.coverage),backtrackCoverage:this.parseList(vn.pointer(vn.coverage)),lookaheadCoverage:this.parseList(vn.pointer(vn.coverage)),substitutes:this.parseUShortList()}};var Ps=new Array(9);Ps[1]=function(P){return new An.Table("substitutionTable",1===P.substFormat?[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(P.coverage)},{name:"deltaGlyphID",type:"USHORT",value:P.deltaGlyphId}]:[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new An.Coverage(P.coverage)}].concat(An.ushortList("substitute",P.substitute)))},Ps[3]=function(P){return z.assert(1===P.substFormat,"Lookup type 3 substFormat must be 1."),new An.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(P.coverage)}].concat(An.tableList("altSet",P.alternateSets,function(X){return new An.Table("alternateSetTable",An.ushortList("alternate",X))})))},Ps[4]=function(P){return z.assert(1===P.substFormat,"Lookup type 4 substFormat must be 1."),new An.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new An.Coverage(P.coverage)}].concat(An.tableList("ligSet",P.ligatureSets,function(X){return new An.Table("ligatureSetTable",An.tableList("ligature",X,function(se){return new An.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:se.ligGlyph}].concat(An.ushortList("component",se.components,se.components.length+1)))}))})))};var xi_parse=function(P,X){return X=(P=new vn(P,X=X||0)).parseVersion(1),z.argument(1===X||1.1===X,"Unsupported GSUB table version."),1===X?{version:X,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(Bi)}:{version:X,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(Bi),variations:P.parseFeatureVariationsList()}},xi_make=function(P){return new An.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new An.ScriptList(P.scripts)},{name:"features",type:"TABLE",value:new An.FeatureList(P.features)},{name:"lookups",type:"TABLE",value:new An.LookupList(P.lookups,Ps)}])},ws_parse=function(P,X){for(var se=new Pn.Parser(P,X),he=se.parseULong(),Ie=(z.argument(1===he,"Unsupported META table version."),se.parseULong(),se.parseULong(),se.parseULong()),Ke={},nt=0;nt<Ie;nt++){var At=se.parseTag(),Jt=se.parseULong(),Qt=se.parseULong();Jt=ye.UTF8(P,X+Jt,Qt),Ke[At]=Jt}return Ke},ws_make=function(P){var X,se=Object.keys(P).length,he="",Ie=16+12*se,Ke=new An.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Ie},{name:"numTags",type:"ULONG",value:se}]);for(X in P){var nt=he.length;he+=P[X],Ke.fields.push({name:"tag "+X,type:"TAG",value:X}),Ke.fields.push({name:"offset "+X,type:"ULONG",value:Ie+nt}),Ke.fields.push({name:"length "+X,type:"ULONG",value:P[X].length})}return Ke.fields.push({name:"stringPool",type:"CHARARRAY",value:he}),Ke};function co(P){return Math.log(P)/Math.log(2)|0}function Ls(P){for(;P.length%4!=0;)P.push(0);for(var X=0,se=0;se<P.length;se+=4)X+=(P[se]<<24)+(P[se+1]<<16)+(P[se+2]<<8)+P[se+3];return X%Math.pow(2,32)}function so(P,X,se,he){return new An.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==P?P:""},{name:"checkSum",type:"ULONG",value:void 0!==X?X:0},{name:"offset",type:"ULONG",value:void 0!==se?se:0},{name:"length",type:"ULONG",value:void 0!==he?he:0}])}function ea(P){for(var X=new An.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),se=(X.tables=P,X.numTables=P.length,Math.pow(2,co(X.numTables))),he=(X.searchRange=16*se,X.entrySelector=co(se),X.rangeShift=16*X.numTables-X.searchRange,[]),Ie=[],Ke=X.sizeOf()+so().sizeOf()*X.numTables;Ke%4!=0;)Ke+=1,Ie.push({name:"padding",type:"BYTE",value:0});for(var nt=0;nt<P.length;nt+=1){var At=P[nt],Qt=(z.argument(4===At.tableName.length,"Table name"+At.tableName+" is invalid."),At.sizeOf()),Jt=so(At.tableName,Ls(At.encode()),Ke,Qt);for(he.push({name:Jt.tag+" Table Record",type:"RECORD",value:Jt}),Ie.push({name:At.tableName+" table",type:"RECORD",value:At}),Ke+=Qt,z.argument(!isNaN(Ke),"Something went wrong calculating the offset.");Ke%4!=0;)Ke+=1,Ie.push({name:"padding",type:"BYTE",value:0})}return he.sort(function(Mn,je){return Mn.value.tag>je.value.tag?1:-1}),X.fields=X.fields.concat(he),X.fields=X.fields.concat(Ie),X}function So(P,X,se){for(var he=0;he<X.length;he+=1){var Ie=P.charToGlyphIndex(X[he]);if(0<Ie)return P.glyphs.get(Ie).getMetrics()}return se}var ca_fontToTable=function(P){for(var X,se=[],he=[],Ie=[],Ke=[],nt=[],At=[],Qt=[],Jt=0,Mn=0,je=0,xe=0,Ve=0,ke=0;ke<P.glyphs.length;ke+=1){var ht=P.glyphs.get(ke),on=0|ht.unicode;if(isNaN(ht.advanceWidth))throw new Error("Glyph "+ht.name+" ("+ke+"): advanceWidth is not a number.");if((on<X||void 0===X)&&0<on&&(X=on),Jt<on&&(Jt=on),(on=or_getUnicodeRange(on))<32)Mn|=1<<on;else if(on<64)je|=1<<on-32;else if(on<96)xe|=1<<on-64;else{if(!(on<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ve|=1<<on-96}".notdef"!==ht.name&&(on=ht.getMetrics(),se.push(on.xMin),he.push(on.yMin),Ie.push(on.xMax),Ke.push(on.yMax),At.push(on.leftSideBearing),Qt.push(on.rightSideBearing),nt.push(ht.advanceWidth))}var Dn,Gn={xMin:Math.min.apply(null,se),yMin:Math.min.apply(null,he),xMax:Math.max.apply(null,Ie),yMax:Math.max.apply(null,Ke),advanceWidthMax:Math.max.apply(null,nt),advanceWidthAvg:function(Fo){for(var pr=0,Yi=0;Yi<Fo.length;Yi+=1)pr+=Fo[Yi];return pr/Fo.length}(nt),minLeftSideBearing:Math.min.apply(null,At),maxLeftSideBearing:Math.max.apply(null,At),minRightSideBearing:Math.min.apply(null,Qt)},li=(Gn.ascender=P.ascender,Gn.descender=P.descender,N_make({flags:3,unitsPerEm:P.unitsPerEm,xMin:Gn.xMin,yMin:Gn.yMin,xMax:Gn.xMax,yMax:Gn.yMax,lowestRecPPEM:3,createdTimestamp:P.createdTimestamp})),Zr=R_make({ascender:Gn.ascender,descender:Gn.descender,advanceWidthMax:Gn.advanceWidthMax,minLeftSideBearing:Gn.minLeftSideBearing,minRightSideBearing:Gn.minRightSideBearing,xMaxExtent:Gn.maxLeftSideBearing+(Gn.xMax-Gn.xMin),numberOfHMetrics:P.glyphs.length}),Si=$_make(P.glyphs.length),_i=or_make({xAvgCharWidth:Math.round(Gn.advanceWidthAvg),usWeightClass:P.tables.os2.usWeightClass,usWidthClass:P.tables.os2.usWidthClass,usFirstCharIndex:X,usLastCharIndex:Jt,ulUnicodeRange1:Mn,ulUnicodeRange2:je,ulUnicodeRange3:xe,ulUnicodeRange4:Ve,fsSelection:P.tables.os2.fsSelection,sTypoAscender:Gn.ascender,sTypoDescender:Gn.descender,sTypoLineGap:0,usWinAscent:Gn.yMax,usWinDescent:Math.abs(Gn.yMin),ulCodePageRange1:1,sxHeight:So(P,"xyvw",{yMax:Math.round(Gn.ascender/2)}).yMax,sCapHeight:So(P,"HIKLEFJMNTZBDPRAGOQSUVWXY",Gn).yMax,usDefaultChar:P.hasChar(" ")?32:0,usBreakChar:P.hasChar(" ")?32:0}),Ji=U_make(P.glyphs),cs=gt_make(P.glyphs),Vs=(Qs=P.getEnglishName("fontFamily"))+" "+(di=P.getEnglishName("fontSubfamily")),yo=(yo=P.getEnglishName("postScriptName"))||Qs.replace(/\s/g,"")+"-"+di,vo={};for(Dn in P.names)vo[Dn]=P.names[Dn];vo.uniqueID||(vo.uniqueID={en:P.getEnglishName("manufacturer")+":"+Vs}),vo.postScriptName||(vo.postScriptName={en:yo}),vo.preferredFamily||(vo.preferredFamily=P.names.fontFamily),vo.preferredSubfamily||(vo.preferredSubfamily=P.names.fontSubfamily);var Po=En_make(vo,Ao=[]),Ao=0<Ao.length?ie_make(Ao):void 0,ra=ii_make(),Qs=(Vs=T_make(P.glyphs,{version:P.getEnglishName("version"),fullName:Vs,familyName:Qs,weightName:di,postScriptName:yo,unitsPerEm:P.unitsPerEm,fontBBox:[0,Gn.yMin,Gn.ascender,Gn.advanceWidthMax]}),P.metas&&0<Object.keys(P.metas).length?ws_make(P.metas):void 0),di=[li,Zr,Si,_i,Po,cs,ra,Vs,Ji];Ao&&di.push(Ao),P.tables.gsub&&di.push(xi_make(P.tables.gsub)),Qs&&di.push(Qs);for(var eo=Ls((yo=ea(di)).encode()),fo=yo.fields,js=!1,bi=0;bi<fo.length;bi+=1)if("head table"===fo[bi].name){fo[bi].value.checkSumAdjustment=2981146554-eo,js=!0;break}if(js)return yo;throw new Error("Could not find head table with checkSum to adjust.")};function ta(P,X){for(var se=0,he=P.length-1;se<=he;){var Ie=se+he>>>1,Ke=P[Ie].tag;if(Ke===X)return Ie;Ke<X?se=1+Ie:he=Ie-1}return-se-1}function qo(P,X){for(var se=0,he=P.length-1;se<=he;){var Ie=se+he>>>1,Ke=P[Ie];if(Ke===X)return Ie;Ke<X?se=1+Ie:he=Ie-1}return-se-1}function ua(P,X){for(var se=0,he=P.length-1;se<=he;){var Ie,Ke=se+he>>>1,nt=(Ie=P[Ke]).start;if(nt===X)return Ie;nt<X?se=1+Ke:he=Ke-1}if(0<se)return X>(Ie=P[se-1]).end?0:Ie}function mo(P,X){this.font=P,this.tableName=X}function Ta(P){mo.call(this,P,"gpos")}function To(P){mo.call(this,P,"gsub")}function Ja(P,X,se){for(var he=P.subtables,Ie=0;Ie<he.length;Ie++){var Ke=he[Ie];if(Ke.substFormat===X)return Ke}if(se)return he.push(se),se}function Va(P){for(var X=new ArrayBuffer(P.length),se=new Uint8Array(X),he=0;he<P.length;++he)se[he]=P[he];return X}function Ne(P,X){if(!P)throw X}function yt(P,X,se,he,Ie){var Ke=0<(X&he)?(Ke=P.parseByte(),se+(Ke=X&Ie?Ke:-Ke)):0<(X&Ie)?se:se+P.parseShort();return Ke}function Bt(P,X,se){var he,Ie=new Pn.Parser(X,se);if(P.numberOfContours=Ie.parseShort(),P._xMin=Ie.parseShort(),P._yMin=Ie.parseShort(),P._xMax=Ie.parseShort(),P._yMax=Ie.parseShort(),0<P.numberOfContours){for(var Ke=P.endPointIndices=[],nt=0;nt<P.numberOfContours;nt+=1)Ke.push(Ie.parseUShort());P.instructionLength=Ie.parseUShort(),P.instructions=[];for(var At=0;At<P.instructionLength;At+=1)P.instructions.push(Ie.parseByte());for(var Qt=Ke[Ke.length-1]+1,Jt=[],Mn=0;Mn<Qt;Mn+=1)if(he=Ie.parseByte(),Jt.push(he),0<(8&he))for(var je=Ie.parseByte(),xe=0;xe<je;xe+=1)Jt.push(he),Mn+=1;if(z.argument(Jt.length===Qt,"Bad flags."),0<Ke.length){var Ve,ke=[];if(0<Qt){for(var ht=0;ht<Qt;ht+=1)(Ve={}).onCurve=!!(1&(he=Jt[ht])),Ve.lastPointOfContour=0<=Ke.indexOf(ht),ke.push(Ve);for(var on=0,Dn=0;Dn<Qt;Dn+=1)(Ve=ke[Dn]).x=yt(Ie,he=Jt[Dn],on,2,16),on=Ve.x;for(var Gn=0,li=0;li<Qt;li+=1)(Ve=ke[li]).y=yt(Ie,he=Jt[li],Gn,4,32),Gn=Ve.y}P.points=ke}else P.points=[]}else if(0===P.numberOfContours)P.points=[];else{P.isComposite=!0,P.points=[],P.components=[];for(var Zr=!0;Zr;){Jt=Ie.parseUShort();var Si={glyphIndex:Ie.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Jt)?0<(2&Jt)?(Si.dx=Ie.parseShort(),Si.dy=Ie.parseShort()):Si.matchedPoints=[Ie.parseUShort(),Ie.parseUShort()]:0<(2&Jt)?(Si.dx=Ie.parseChar(),Si.dy=Ie.parseChar()):Si.matchedPoints=[Ie.parseByte(),Ie.parseByte()],0<(8&Jt)?Si.xScale=Si.yScale=Ie.parseF2Dot14():0<(64&Jt)?(Si.xScale=Ie.parseF2Dot14(),Si.yScale=Ie.parseF2Dot14()):0<(128&Jt)&&(Si.xScale=Ie.parseF2Dot14(),Si.scale01=Ie.parseF2Dot14(),Si.scale10=Ie.parseF2Dot14(),Si.yScale=Ie.parseF2Dot14()),P.components.push(Si),Zr=!!(32&Jt)}if(256&Jt){P.instructionLength=Ie.parseUShort(),P.instructions=[];for(var _i=0;_i<P.instructionLength;_i+=1)P.instructions.push(Ie.parseByte())}}}function He(P,X){for(var se=[],he=0;he<P.length;he+=1){var Ie;se.push(Ie={x:X.xScale*(Ie=P[he]).x+X.scale01*Ie.y+X.dx,y:X.scale10*Ie.x+X.yScale*Ie.y+X.dy,onCurve:Ie.onCurve,lastPointOfContour:Ie.lastPointOfContour})}return se}function Ht(P){var X=new De;if(P)for(var se=function(je){for(var xe=[],Ve=[],ke=0;ke<je.length;ke+=1){var ht=je[ke];Ve.push(ht),ht.lastPointOfContour&&(xe.push(Ve),Ve=[])}return z.argument(0===Ve.length,"There are still points left in the current contour."),xe}(P),he=0;he<se.length;++he){var Ie,Ke=se[he],At=Ke[0];(nt=Ke[Ke.length-1]).onCurve?X.moveTo(nt.x,nt.y):At.onCurve?X.moveTo(At.x,At.y):X.moveTo((Ie={x:.5*(nt.x+At.x),y:.5*(nt.y+At.y)}).x,Ie.y);for(var Qt=0;Qt<Ke.length;++Qt){var Jt,nt=At;At=Ke[(Qt+1)%Ke.length],nt.onCurve?X.lineTo(nt.x,nt.y):(Jt=At,At.onCurve||(Jt={x:.5*(nt.x+At.x),y:.5*(nt.y+At.y)}),X.quadraticCurveTo(nt.x,nt.y,Jt.x,Jt.y))}X.closePath()}return X}function kn(P,X){if(X.isComposite)for(var se=0;se<X.components.length;se+=1){var Ie=P.get((he=X.components[se]).glyphIndex);if(Ie.getPath(),Ie.points){var Ke=void 0;if(void 0===he.matchedPoints)Ke=He(Ie.points,he);else{if(he.matchedPoints[0]>X.points.length-1||he.matchedPoints[1]>Ie.points.length-1)throw Error("Matched points out of range in "+X.name);var he,nt=X.points[he.matchedPoints[0]],At=He([At=Ie.points[he.matchedPoints[1]]],he={xScale:he.xScale,scale01:he.scale01,scale10:he.scale10,yScale:he.yScale,dx:0,dy:0})[0];he.dx=nt.x-At.x,he.dy=nt.y-At.y,Ke=He(Ie.points,he)}X.points=X.points.concat(Ke)}}return Ht(X.points)}(Ta.prototype=mo.prototype={searchTag:ta,binSearch:qo,getTable:function(P){var X=this.font.tables[this.tableName];return!X&&P?this.font.tables[this.tableName]=this.createDefaultTable():X},getScriptNames:function(){var P=this.getTable();return P?P.scripts.map(function(X){return X.tag}):[]},getDefaultScriptName:function(){var P=this.getTable();if(P){for(var X=!1,se=0;se<P.scripts.length;se++){var he=P.scripts[se].tag;if("DFLT"===he)return he;"latn"===he&&(X=!0)}return X?"latn":void 0}},getScriptTable:function(P,X){var se,he=this.getTable(X);if(he)return se=he.scripts,0<=(he=ta(he.scripts,P=P||"DFLT"))?se[he].script:X?(se.splice(-1-he,0,X={tag:P,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),X.script):void 0},getLangSysTable:function(Ie,X,se){var he;if(Ie=this.getScriptTable(Ie,se))return X&&"dflt"!==X&&"DFLT"!==X?0<=(he=ta(Ie.langSysRecords,X))?Ie.langSysRecords[he].langSys:se?(Ie.langSysRecords.splice(-1-he,0,se={tag:X,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),se.langSys):void 0:Ie.defaultLangSys},getFeatureTable:function(P,X,se,he){if(P=this.getLangSysTable(P,X,he)){for(var Ie,Ke=P.featureIndexes,nt=this.font.tables[this.tableName].features,At=0;At<Ke.length;At++)if((Ie=nt[Ke[At]]).tag===se)return Ie.feature;if(he)return z.assert(0===(X=nt.length)||se>=nt[X-1].tag,"Features must be added in alphabetical order."),nt.push(Ie={tag:se,feature:{params:0,lookupListIndexes:[]}}),Ke.push(X),Ie.feature}},getLookupTables:function(Ke,X,se,he,Ie){var nt=[];if(Ke=this.getFeatureTable(Ke,X,se,Ie)){for(var At,Qt=Ke.lookupListIndexes,Jt=this.font.tables[this.tableName].lookups,Mn=0;Mn<Qt.length;Mn++)(At=Jt[Qt[Mn]]).lookupType===he&&nt.push(At);if(0===nt.length&&Ie)return X=Jt.length,Jt.push(At={lookupType:he,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Qt.push(X),[At]}return nt},getGlyphClass:function(P,X){switch(P.format){case 1:return P.startGlyph<=X&&X<P.startGlyph+P.classes.length?P.classes[X-P.startGlyph]:0;case 2:var se=ua(P.ranges,X);return se?se.classId:0}},getCoverageIndex:function(P,X){switch(P.format){case 1:var se=qo(P.glyphs,X);return 0<=se?se:-1;case 2:return(se=ua(P.ranges,X))?se.index+X-se.start:-1}},expandCoverage:function(P){if(1===P.format)return P.glyphs;for(var X=[],se=P.ranges,he=0;he<se.length;he++)for(var Ie=se[he],nt=Ie.end,At=Ie.start;At<=nt;At++)X.push(At);return X}}).init=function(){var P=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(P)},Ta.prototype.getKerningValue=function(P,X,se){for(var he=0;he<P.length;he++)for(var Ie=P[he].subtables,Ke=0;Ke<Ie.length;Ke++){var nt=Ie[Ke],At=this.getCoverageIndex(nt.coverage,X);if(!(At<0))switch(nt.posFormat){case 1:for(var Qt=nt.pairSets[At],Jt=0;Jt<Qt.length;Jt++){var Mn=Qt[Jt];if(Mn.secondGlyph===se)return Mn.value1&&Mn.value1.xAdvance||0}break;case 2:var xe=this.getGlyphClass(nt.classDef1,X),je=this.getGlyphClass(nt.classDef2,se);return(xe=nt.classRecords[xe][je]).value1&&xe.value1.xAdvance||0}}return 0},Ta.prototype.getKerningTables=function(P,X){if(this.font.tables.gpos)return this.getLookupTables(P,X,"kern",2)},(To.prototype=mo.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},To.prototype.getSingle=function(P,X,se){for(var he=[],Ie=this.getLookupTables(X,se,P,1),Ke=0;Ke<Ie.length;Ke++)for(var nt=Ie[Ke].subtables,At=0;At<nt.length;At++){var Qt=nt[At],Jt=this.expandCoverage(Qt.coverage),Mn=void 0;if(1===Qt.substFormat){var je=Qt.deltaGlyphId;for(Mn=0;Mn<Jt.length;Mn++){var xe=Jt[Mn];he.push({sub:xe,by:xe+je})}}else{var Ve=Qt.substitute;for(Mn=0;Mn<Jt.length;Mn++)he.push({sub:Jt[Mn],by:Ve[Mn]})}}return he},To.prototype.getAlternates=function(P,X,se){for(var he=[],Ie=this.getLookupTables(X,se,P,3),Ke=0;Ke<Ie.length;Ke++)for(var nt=Ie[Ke].subtables,At=0;At<nt.length;At++)for(var Qt=nt[At],Jt=this.expandCoverage(Qt.coverage),Mn=Qt.alternateSets,je=0;je<Jt.length;je++)he.push({sub:Jt[je],by:Mn[je]});return he},To.prototype.getLigatures=function(P,X,se){for(var he=[],Ie=this.getLookupTables(X,se,P,4),Ke=0;Ke<Ie.length;Ke++)for(var nt=Ie[Ke].subtables,At=0;At<nt.length;At++)for(var Qt=nt[At],Jt=this.expandCoverage(Qt.coverage),Mn=Qt.ligatureSets,je=0;je<Jt.length;je++)for(var xe=Jt[je],Ve=Mn[je],ke=0;ke<Ve.length;ke++){var ht=Ve[ke];he.push({sub:[xe].concat(ht.components),by:ht.ligGlyph})}return he},To.prototype.addSingle=function(P,X,se,he){se=Ja(this.getLookupTables(se,he,P,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),z.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(P=this.binSearch(se.coverage.glyphs,he=X.sub))<0&&(se.coverage.glyphs.splice(P=-1-P,0,he),se.substitute.splice(P,0,0)),se.substitute[P]=X.by},To.prototype.addAlternate=function(P,X,se,he){se=Ja(this.getLookupTables(se,he,P,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),z.assert(1===se.coverage.format,"Ligature: unable to modify coverage table format "+se.coverage.format),(P=this.binSearch(se.coverage.glyphs,he=X.sub))<0&&(se.coverage.glyphs.splice(P=-1-P,0,he),se.alternateSets.splice(P,0,0)),se.alternateSets[P]=X.by},To.prototype.addLigature=function(Ke,Qt,At,Ie){(Ie=(At=this.getLookupTables(At,Ie,Ke,4,!0)[0]).subtables[0])||(At.subtables[0]=Ie={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),z.assert(1===Ie.coverage.format,"Ligature: unable to modify coverage table format "+Ie.coverage.format),Ke=Qt.sub[0];var nt=Qt.sub.slice(1);if(At={ligGlyph:Qt.by,components:nt},0<=(Qt=this.binSearch(Ie.coverage.glyphs,Ke))){for(var Jt=Ie.ligatureSets[Qt],Mn=0;Mn<Jt.length;Mn++)if(function(je,xe){var Ve=je.length;if(Ve===xe.length){for(var ke=0;ke<Ve;ke++)if(je[ke]!==xe[ke])return;return 1}}(Jt[Mn].components,nt))return;Jt.push(At)}else Ie.coverage.glyphs.splice(Qt=-1-Qt,0,Ke),Ie.ligatureSets.splice(Qt,0,[At])},To.prototype.getFeature=function(P,X,se){if(/ss\d\d/.test(P))return this.getSingle(P,X,se);switch(P){case"aalt":case"salt":return this.getSingle(P,X,se).concat(this.getAlternates(P,X,se));case"dlig":case"liga":case"rlig":return this.getLigatures(P,X,se)}},To.prototype.add=function(P,X,se,he){if(/ss\d\d/.test(P))return this.addSingle(P,X,se,he);switch(P){case"aalt":case"salt":return"number"==typeof X.by?this.addSingle(P,X,se,he):this.addAlternate(P,X,se,he);case"dlig":case"liga":case"rlig":return this.addLigature(P,X,se,he)}};var fs={getPath:Ht,parse:function(P,X,se,he){for(var Ie=new Tn.GlyphSet(he),Ke=0;Ke<se.length-1;Ke+=1){var nt=se[Ke];Ie.push(Ke,nt!==se[Ke+1]?Tn.ttfGlyphLoader(he,Ke,Bt,P,X+nt,kn):Tn.glyphLoader(he,Ke))}return Ie}};function qs(P){this.font=P,this.getCommands=function(X){return fs.getPath(X).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function na(P){return P}function Ga(P){return Math.sign(P)*Math.round(Math.abs(P))}function Ma(P){return Math.sign(P)*Math.round(Math.abs(2*P))/2}function Ko(P){return Math.sign(P)*(Math.round(Math.abs(P)+.5)-.5)}function La(P){return Math.sign(P)*Math.ceil(Math.abs(P))}function Qa(P){return Math.sign(P)*Math.floor(Math.abs(P))}function Bl(P){var X=this.srPeriod,se=this.srPhase,he=1;return P<0&&(P=-P,he=-1),P+=this.srThreshold-se,P=Math.trunc(P/X)*X,(P+=se)<0?se*he:P*he}var Ro={x:1,y:0,axis:"x",distance:function(P,X,se,he){return(se?P.xo:P.x)-(he?X.xo:X.x)},interpolate:function(P,X,se,he){var Ie,Ke,nt,At,Qt,Jt,Mn;if(!he||he===this)return Ie=P.xo-X.xo,Ke=P.xo-se.xo,Qt=X.x-X.xo,Jt=se.x-se.xo,0===(Mn=(nt=Math.abs(Ie))+(At=Math.abs(Ke)))?void(P.x=P.xo+(Qt+Jt)/2):void(P.x=P.xo+(Qt*At+Jt*nt)/Mn);Ie=he.distance(P,X,!0,!0),Ke=he.distance(P,se,!0,!0),Qt=he.distance(X,X,!1,!0),Jt=he.distance(se,se,!1,!0),0===(Mn=(nt=Math.abs(Ie))+(At=Math.abs(Ke)))?Ro.setRelative(P,P,(Qt+Jt)/2,he,!0):Ro.setRelative(P,P,(Qt*At+Jt*nt)/Mn,he,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(P,X,se,he,Ie){var Ke,nt;he&&he!==this?(Ke=Ie?X.xo:X.x,nt=Ie?X.yo:X.y,P.x=(Ke+=se*he.x)+(P.y-(nt+=se*he.y))/he.normalSlope):P.x=(Ie?X.xo:X.x)+se},slope:0,touch:function(P){P.xTouched=!0},touched:function(P){return P.xTouched},untouch:function(P){P.xTouched=!1}},Vo={x:0,y:1,axis:"y",distance:function(P,X,se,he){return(se?P.yo:P.y)-(he?X.yo:X.y)},interpolate:function(P,X,se,he){var Ie,Ke,nt,At,Qt,Jt,Mn;if(!he||he===this)return Ie=P.yo-X.yo,Ke=P.yo-se.yo,Qt=X.y-X.yo,Jt=se.y-se.yo,0===(Mn=(nt=Math.abs(Ie))+(At=Math.abs(Ke)))?void(P.y=P.yo+(Qt+Jt)/2):void(P.y=P.yo+(Qt*At+Jt*nt)/Mn);Ie=he.distance(P,X,!0,!0),Ke=he.distance(P,se,!0,!0),Qt=he.distance(X,X,!1,!0),Jt=he.distance(se,se,!1,!0),0===(Mn=(nt=Math.abs(Ie))+(At=Math.abs(Ke)))?Vo.setRelative(P,P,(Qt+Jt)/2,he,!0):Vo.setRelative(P,P,(Qt*At+Jt*nt)/Mn,he,!0)},normalSlope:0,setRelative:function(P,X,se,he,Ie){var Ke,nt;he&&he!==this?(Ke=Ie?X.xo:X.x,nt=Ie?X.yo:X.y,P.y=(nt+=se*he.y)+he.normalSlope*(P.x-(Ke+=se*he.x))):P.y=(Ie?X.yo:X.y)+se},slope:Number.POSITIVE_INFINITY,touch:function(P){P.yTouched=!0},touched:function(P){return P.yTouched},untouch:function(P){P.yTouched=!1}};function oo(P,X){this.x=P,this.y=X,this.axis=void 0,this.slope=X/P,this.normalSlope=-P/X,Object.freeze(this)}function jo(P,X){var se=Math.sqrt(P*P+X*X);return X/=se,1==(P/=se)&&0===X?Ro:0===P&&1===X?Vo:new oo(P,X)}function ut(P,X,se,he){this.x=this.xo=Math.round(64*P)/64,this.y=this.yo=Math.round(64*X)/64,this.lastPointOfContour=se,this.onCurve=he,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ro),Object.freeze(Vo),oo.prototype.distance=function(P,X,se,he){return this.x*Ro.distance(P,X,se,he)+this.y*Vo.distance(P,X,se,he)},oo.prototype.interpolate=function(P,Ie,Ke,he){var nt=he.distance(P,Ie,!0,!0),At=he.distance(P,Ke,!0,!0),Qt=(Ie=he.distance(Ie,Ie,!1,!0),Ke=he.distance(Ke,Ke,!1,!0),(nt=Math.abs(nt))+(At=Math.abs(At)));this.setRelative(P,P,0===Qt?(Ie+Ke)/2:(Ie*At+Ke*nt)/Qt,he,!0)},oo.prototype.setRelative=function(P,Ke,Qt,Jt,At){var nt=At?Ke.xo:Ke.x,Mn=(At=At?Ke.yo:Ke.y,Ke=nt+Qt*(Jt=Jt||this).x,nt=At+Qt*Jt.y,At=Jt.normalSlope,P.y);P.x=((Qt=this.slope)*(Jt=P.x)-At*Ke+nt-Mn)/(Qt-At),P.y=Qt*(P.x-Jt)+Mn},oo.prototype.touch=function(P){P.xTouched=!0,P.yTouched=!0},ut.prototype.nextTouched=function(P){for(var X=this.nextPointOnContour;!P.touched(X)&&X!==this;)X=X.nextPointOnContour;return X},ut.prototype.prevTouched=function(P){for(var X=this.prevPointOnContour;!P.touched(X)&&X!==this;)X=X.prevPointOnContour;return X};var Ot=Object.freeze(new ut(0,0)),fn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function wn(P,X){switch(this.env=P,this.stack=[],this.prog=X,P){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ro,this.round=Ga}}function Nn(P){for(var X=P.tZone=new Array(P.gZone.length),se=0;se<X.length;se++)X[se]=new ut(0,0)}function jn(P,X){var se,he=P.prog,Ie=P.ip,Ke=1;do{if(88===(se=he[++Ie]))Ke++;else if(89===se)Ke--;else if(64===se)Ie+=he[Ie+1]+1;else if(65===se)Ie+=2*he[Ie+1]+1;else if(176<=se&&se<=183)Ie+=se-176+1;else if(184<=se&&se<=191)Ie+=2*(se-184+1);else if(X&&1===Ke&&27===se)break}while(0<Ke);P.ip=Ie}function hr(P,X){w.DEBUG&&console.log(X.step,"SVTCA["+P.axis+"]"),X.fv=X.pv=X.dpv=P}function br(P,X){w.DEBUG&&console.log(X.step,"SPVTCA["+P.axis+"]"),X.pv=X.dpv=P}function Mr(P,X){w.DEBUG&&console.log(X.step,"SFVTCA["+P.axis+"]"),X.fv=P}function Pr(P,X){var se,he=(Ie=X.stack).pop(),Ie=Ie.pop(),Ke=X.z2[he],nt=X.z1[Ie];w.DEBUG&&console.log("SPVTL["+P+"]",he,Ie),he=P?(se=Ke.y-nt.y,nt.x-Ke.x):(se=nt.x-Ke.x,nt.y-Ke.y),X.pv=X.dpv=jo(se,he)}function oi(P,X){var se,he=(Ie=X.stack).pop(),Ie=Ie.pop(),Ke=X.z2[he],nt=X.z1[Ie];w.DEBUG&&console.log("SFVTL["+P+"]",he,Ie),he=P?(se=Ke.y-nt.y,nt.x-Ke.x):(se=nt.x-Ke.x,nt.y-Ke.y),X.fv=jo(se,he)}function Jr(P){w.DEBUG&&console.log(P.step,"POP[]"),P.stack.pop()}function vi(P,X){var se=X.stack.pop(),he=X.z0[se],Ie=X.fv,Ke=X.pv,nt=(w.DEBUG&&console.log(X.step,"MDAP["+P+"]",se),Ke.distance(he,Ot));P&&(nt=X.round(nt)),Ie.setRelative(he,Ot,nt,Ke),Ie.touch(he),X.rp0=X.rp1=se}function Ei(P,X){var se,he,Ie,Ke=X.z2,nt=Ke.length-2;w.DEBUG&&console.log(X.step,"IUP["+P.axis+"]");for(var At=0;At<nt;At++)P.touched(se=Ke[At])||(he=se.prevTouched(P))!==se&&(he===(Ie=se.nextTouched(P))&&P.setRelative(se,se,P.distance(he,he,!1,!0),P,!0),P.interpolate(se,he,Ie,P))}function zi(P,X){for(var se=X.stack,Ie=(P?X.z0:X.z1)[P?X.rp1:X.rp2],Ke=X.fv,nt=X.pv,At=X.loop,Qt=X.z2;At--;){var Jt=se.pop(),Mn=Qt[Jt],je=nt.distance(Ie,Ie,!1,!0);Ke.setRelative(Mn,Mn,je,nt),Ke.touch(Mn),w.DEBUG&&console.log(X.step,(1<X.loop?"loop "+(X.loop-At)+": ":"")+"SHP["+(P?"rp1":"rp2")+"]",Jt)}X.loop=1}function ns(P,X){for(var he=(P?X.z0:X.z1)[P?X.rp1:X.rp2],Ie=X.fv,Ke=X.pv,nt=X.stack.pop(),At=X.z2[X.contours[nt]],Qt=At,Jt=(w.DEBUG&&console.log(X.step,"SHC["+P+"]",nt),Ke.distance(he,he,!1,!0));Qt!==he&&Ie.setRelative(Qt,Qt,Jt,Ke),(Qt=Qt.nextPointOnContour)!==At;);}function Ms(P,X){var se,he,Ie=(P?X.z0:X.z1)[Ie=P?X.rp1:X.rp2],Ke=X.fv,nt=X.pv,At=(At=X.stack).pop();switch(w.DEBUG&&console.log(X.step,"SHZ["+P+"]",At),At){case 0:se=X.tZone;break;case 1:se=X.gZone;break;default:throw new Error("Invalid zone")}for(var Qt=nt.distance(Ie,Ie,!1,!0),Jt=se.length-2,Mn=0;Mn<Jt;Mn++)Ke.setRelative(he=se[Mn],he,Qt,nt)}function Ki(P,X){var se=(he=X.stack).pop()/64,he=he.pop(),Ie=X.z1[he],nt=X.fv;nt.setRelative(Ie,X.z0[X.rp0],se,X.pv),nt.touch(Ie),w.DEBUG&&console.log(X.step,"MSIRP["+P+"]",se,he),X.rp1=X.rp0,X.rp2=he,P&&(X.rp0=he)}function Js(P,X){var At=(se=X.stack).pop(),se=se.pop(),he=X.z0[se],Ie=X.fv,Ke=X.pv,nt=X.cvt[At];w.DEBUG&&console.log(X.step,"MIAP["+P+"]",At,"(",nt,")",se),At=Ke.distance(he,Ot),P&&(Math.abs(At-nt)<X.cvCutIn&&(At=nt),At=X.round(At)),Ie.setRelative(he,Ot,At,Ke),0===X.zp0&&(he.xo=he.x,he.yo=he.y),Ie.touch(he),X.rp0=X.rp1=se}function Br(P,X){var se=X.stack,he=se.pop(),Ie=X.z2[he];w.DEBUG&&console.log(X.step,"GC["+P+"]",he),se.push(64*X.dpv.distance(Ie,Ot,P,!1))}function da(P,X){var se=(he=X.stack).pop(),he=he.pop(),Ke=X.dpv.distance(Ke=X.z0[he],X.z1[se],P,P);w.DEBUG&&console.log(X.step,"MD["+P+"]",se,he,"->",Ke),X.stack.push(Math.round(64*Ke))}function Na(P,X){var se=X.stack,he=se.pop(),Ie=X.fv,Ke=X.pv,nt=X.ppem,At=X.deltaBase+16*(P-1),Qt=X.deltaShift,Jt=X.z0;w.DEBUG&&console.log(X.step,"DELTAP["+P+"]",he,se);for(var Mn=0;Mn<he;Mn++){var je=se.pop(),xe=se.pop();At+((240&xe)>>4)===nt&&(0<=(xe=(15&xe)-8)&&xe++,w.DEBUG&&console.log(X.step,"DELTAPFIX",je,"by",xe*Qt),Ie.setRelative(je=Jt[je],je,xe*Qt,Ke))}}function uo(P,X){var se=X.stack,he=se.pop();w.DEBUG&&console.log(X.step,"ROUND[]"),se.push(64*X.round(he/64))}function El(P,X){var se=X.stack,he=se.pop(),Ie=X.ppem,Ke=X.deltaBase+16*(P-1),nt=X.deltaShift;w.DEBUG&&console.log(X.step,"DELTAC["+P+"]",he,se);for(var At=0;At<he;At++){var Qt=se.pop(),Jt=se.pop();Ke+((240&Jt)>>4)===Ie&&(0<=(Jt=(15&Jt)-8)&&Jt++,Jt*=nt,w.DEBUG&&console.log(X.step,"DELTACFIX",Qt,"by",Jt),X.cvt[Qt]+=Jt)}}function bc(P,X){var se,he=(Ie=X.stack).pop(),Ie=Ie.pop(),Ke=X.z2[he],nt=X.z1[Ie];w.DEBUG&&console.log(X.step,"SDPVTL["+P+"]",he,Ie),he=P?(se=Ke.y-nt.y,nt.x-Ke.x):(se=nt.x-Ke.x,nt.y-Ke.y),X.dpv=jo(se,he)}function ha(P,X){var se=X.stack,he=X.prog,Ie=X.ip;w.DEBUG&&console.log(X.step,"PUSHB["+P+"]");for(var Ke=0;Ke<P;Ke++)se.push(he[++Ie]);X.ip=Ie}function go(P,X){var se=X.ip,he=X.prog,Ie=X.stack;w.DEBUG&&console.log(X.ip,"PUSHW["+P+"]");for(var Ke=0;Ke<P;Ke++){var nt=he[++se]<<8|he[++se];32768&nt&&(nt=-(1+(65535^nt))),Ie.push(nt)}X.ip=se}function pi(P,X,se,he,Ie,Ke){var nt,At,Mn,Jt=Ke.stack,Qt=P&&Jt.pop(),je=(Jt=Jt.pop(),Ke.z1[Jt]),xe=Ke.minDis,Ve=Ke.fv,ke=Ke.dpv,ht=nt=ke.distance(je,Mn=Ke.z0[Mn=Ke.rp0],!0,!0),on=0<=ht?1:-1;ht=Math.abs(ht),P&&(At=Ke.cvt[Qt],he&&Math.abs(ht-At)<Ke.cvCutIn&&(ht=At)),se&&ht<xe&&(ht=xe),he&&(ht=Ke.round(ht)),Ve.setRelative(je,Mn,on*ht,ke),Ve.touch(je),w.DEBUG&&console.log(Ke.step,(P?"MIRP[":"MDRP[")+(X?"M":"m")+(se?">":"_")+(he?"R":"_")+(0===Ie?"Gr":1===Ie?"Bl":2===Ie?"Wh":"")+"]",P?Qt+"("+Ke.cvt[Qt]+","+At+")":"",Jt,"(d =",nt,"->",on*ht,")"),Ke.rp1=Ke.rp0,Ke.rp2=Jt,X&&(Ke.rp0=Jt)}qs.prototype.exec=function(P,X){if("number"!=typeof X)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var se=this.font,he=this._prepState;if(!he||he.ppem!==X){var Ie=this._fpgmState;if(!Ie){wn.prototype=fn,(Ie=this._fpgmState=new wn("fpgm",se.tables.fpgm)).funcs=[],Ie.font=se,w.DEBUG&&(console.log("---EXEC FPGM---"),Ie.step=-1);try{Aa(Ie)}catch(Jt){return console.log("Hinting error in FPGM:"+Jt),void(this._errorState=3)}}wn.prototype=Ie,(he=this._prepState=new wn("prep",se.tables.prep)).ppem=X;var Ke=se.tables.cvt;if(Ke)for(var nt=he.cvt=new Array(Ke.length),At=X/se.unitsPerEm,Qt=0;Qt<Ke.length;Qt++)nt[Qt]=Ke[Qt]*At;else he.cvt=[];w.DEBUG&&(console.log("---EXEC PREP---"),he.step=-1);try{Aa(he)}catch(Jt){this._errorState<2&&console.log("Hinting error in PREP:"+Jt),this._errorState=2}}if(!(1<this._errorState))try{return el(P,he)}catch(Jt){this._errorState<1&&(console.log("Hinting error:"+Jt),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var el=function(P,X){var se=X.ppem/X.font.unitsPerEm,he=se,Ie=P.components;if(wn.prototype=X,Ie){for(var Ke=X.font,nt=[],At=[],Qt=0;Qt<Ie.length;Qt++){var Jt=Ie[Qt],Mn=Ke.glyphs.get(Jt.glyphIndex),je=new wn("glyf",Mn.instructions);w.DEBUG&&(console.log("---EXEC COMP "+Qt+"---"),je.step=-1),al(Mn,je,se,he);for(var xe=Math.round(Jt.dx*se),Ve=Math.round(Jt.dy*he),ke=je.gZone,ht=je.contours,on=0;on<ke.length;on++){var Dn=ke[on];Dn.xTouched=Dn.yTouched=!1,Dn.xo=Dn.x=Dn.x+xe,Dn.yo=Dn.y=Dn.y+Ve}var Gn=nt.length;nt.push.apply(nt,ke);for(var li=0;li<ht.length;li++)At.push(ht[li]+Gn)}P.instructions&&!je.inhibitGridFit&&((je=new wn("glyf",P.instructions)).gZone=je.z0=je.z1=je.z2=nt,je.contours=At,nt.push(new ut(0,0),new ut(Math.round(P.advanceWidth*se),0)),w.DEBUG&&(console.log("---EXEC COMPOSITE---"),je.step=-1),Aa(je),nt.length-=2)}else je=new wn("glyf",P.instructions),w.DEBUG&&(console.log("---EXEC GLYPH---"),je.step=-1),al(P,je,se,he),nt=je.gZone;return nt},al=function(P,X,se,he){for(var Ie,Ke,At=P.points||[],Qt=At.length,Jt=X.gZone=X.z0=X.z1=X.z2=[],Mn=X.contours=[],je=0;je<Qt;je++)Jt[je]=new ut((Ie=At[je]).x*se,Ie.y*he,Ie.lastPointOfContour,Ie.onCurve);for(var xe=0;xe<Qt;xe++)Ie=Jt[xe],Ke||(Ke=Ie,Mn.push(xe)),Ie.lastPointOfContour?((Ie.nextPointOnContour=Ke).prevPointOnContour=Ie,Ke=void 0):(Ie.nextPointOnContour=Jt[xe+1]).prevPointOnContour=Ie;if(!X.inhibitGridFit){if(w.DEBUG){console.log("PROCESSING GLYPH",X.stack);for(var Ve=0;Ve<Qt;Ve++)console.log(Ve,Jt[Ve].x,Jt[Ve].y)}if(Jt.push(new ut(0,0),new ut(Math.round(P.advanceWidth*se),0)),Aa(X),Jt.length-=2,w.DEBUG){console.log("FINISHED GLYPH",X.stack);for(var ke=0;ke<Qt;ke++)console.log(ke,Jt[ke].x,Jt[ke].y)}}},Aa=function(P){var X=P.prog;if(X){var se,he=X.length;for(P.ip=0;P.ip<he;P.ip++){if(w.DEBUG&&P.step++,!(se=za[X[P.ip]]))throw new Error("unknown instruction: 0x"+Number(X[P.ip]).toString(16));se(P)}}},za=[hr.bind(void 0,Vo),hr.bind(void 0,Ro),br.bind(void 0,Vo),br.bind(void 0,Ro),Mr.bind(void 0,Vo),Mr.bind(void 0,Ro),Pr.bind(void 0,0),Pr.bind(void 0,1),oi.bind(void 0,0),oi.bind(void 0,1),function(P){var X=(se=P.stack).pop(),se=se.pop();w.DEBUG&&console.log(P.step,"SPVFS[]",X,se),P.pv=P.dpv=jo(se,X)},function(P){var X=(se=P.stack).pop(),se=se.pop();w.DEBUG&&console.log(P.step,"SPVFS[]",X,se),P.fv=jo(se,X)},function(P){var X=P.stack,se=P.pv;w.DEBUG&&console.log(P.step,"GPV[]"),X.push(16384*se.x),X.push(16384*se.y)},function(P){var X=P.stack,se=P.fv;w.DEBUG&&console.log(P.step,"GFV[]"),X.push(16384*se.x),X.push(16384*se.y)},function(P){P.fv=P.pv,w.DEBUG&&console.log(P.step,"SFVTPV[]")},function(X){var se=(nt=X.stack).pop(),he=nt.pop(),Ie=nt.pop(),Ke=nt.pop(),nt=nt.pop(),At=(Qt=X.z0)[se],Qt=Qt[he],Jt=(Mn=X.z1)[Ie],Mn=Mn[Ke],je=(X=X.z2[nt],w.DEBUG&&console.log("ISECT[], ",se,he,Ie,Ke,nt),se=At.x,he=At.y,At=Jt.y,se*(Ke=Qt.y)-he*(Ie=Qt.x)),xe=(nt=Jt.x)*(Jt=Mn.y)-At*(Qt=Mn.x);X.x=(je*(nt-Qt)-xe*(se-Ie))/(Mn=(se-Ie)*(At-Jt)-(he-Ke)*(nt-Qt)),X.y=(je*(At-Jt)-xe*(he-Ke))/Mn},function(P){P.rp0=P.stack.pop(),w.DEBUG&&console.log(P.step,"SRP0[]",P.rp0)},function(P){P.rp1=P.stack.pop(),w.DEBUG&&console.log(P.step,"SRP1[]",P.rp1)},function(P){P.rp2=P.stack.pop(),w.DEBUG&&console.log(P.step,"SRP2[]",P.rp2)},function(P){var X=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"SZP0[]",X),P.zp0=X){case 0:P.tZone||Nn(P),P.z0=P.tZone;break;case 1:P.z0=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var X=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"SZP1[]",X),P.zp1=X){case 0:P.tZone||Nn(P),P.z1=P.tZone;break;case 1:P.z1=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var X=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"SZP2[]",X),P.zp2=X){case 0:P.tZone||Nn(P),P.z2=P.tZone;break;case 1:P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){var X=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"SZPS[]",X),P.zp0=P.zp1=P.zp2=X){case 0:P.tZone||Nn(P),P.z0=P.z1=P.z2=P.tZone;break;case 1:P.z0=P.z1=P.z2=P.gZone;break;default:throw new Error("Invalid zone pointer")}},function(P){P.loop=P.stack.pop(),w.DEBUG&&console.log(P.step,"SLOOP[]",P.loop)},function(P){w.DEBUG&&console.log(P.step,"RTG[]"),P.round=Ga},function(P){w.DEBUG&&console.log(P.step,"RTHG[]"),P.round=Ko},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SMD[]",X),P.minDis=X/64},function(P){w.DEBUG&&console.log(P.step,"ELSE[]"),jn(P,!1)},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"JMPR[]",X),P.ip+=X-1},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SCVTCI[]",X),P.cvCutIn=X/64},void 0,void 0,function(P){var X=P.stack;w.DEBUG&&console.log(P.step,"DUP[]"),X.push(X[X.length-1])},Jr,function(P){w.DEBUG&&console.log(P.step,"CLEAR[]"),P.stack.length=0},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"SWAP[]"),X.push(se),X.push(he)},function(P){var X=P.stack;w.DEBUG&&console.log(P.step,"DEPTH[]"),X.push(X.length)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"CINDEX[]",se),X.push(X[X.length-se])},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"MINDEX[]",se),X.push(X.splice(X.length-se,1)[0])},void 0,void 0,void 0,function(P){var X=(he=P.stack).pop(),se=he.pop(),he=(w.DEBUG&&console.log(P.step,"LOOPCALL[]",X,se),P.ip),Ie=P.prog;P.prog=P.funcs[X];for(var Ke=0;Ke<se;Ke++)Aa(P),w.DEBUG&&console.log(++P.step,Ke+1<se?"next loopcall":"done loopcall",Ke);P.ip=he,P.prog=Ie},function(P){var X=P.stack.pop(),se=(w.DEBUG&&console.log(P.step,"CALL[]",X),P.ip),he=P.prog;P.prog=P.funcs[X],Aa(P),P.ip=se,P.prog=he,w.DEBUG&&console.log(++P.step,"returning from",X)},function(P){if("fpgm"!==P.env)throw new Error("FDEF not allowed here");var X=P.prog,se=P.ip,he=(he=P.stack).pop(),Ie=se;for(w.DEBUG&&console.log(P.step,"FDEF[]",he);45!==X[++se];);P.ip=se,P.funcs[he]=X.slice(Ie+1,se)},void 0,vi.bind(void 0,0),vi.bind(void 0,1),Ei.bind(void 0,Vo),Ei.bind(void 0,Ro),zi.bind(void 0,0),zi.bind(void 0,1),ns.bind(void 0,0),ns.bind(void 0,1),Ms.bind(void 0,0),Ms.bind(void 0,1),function(P){for(var X=P.stack,se=P.loop,he=P.fv,Ie=X.pop()/64,Ke=P.z2;se--;){var nt=X.pop(),At=Ke[nt];w.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-se)+": ":"")+"SHPIX[]",nt,Ie),he.setRelative(At,At,Ie),he.touch(At)}P.loop=1},function(P){for(var X=P.stack,se=P.rp1,he=P.rp2,Ie=P.loop,Ke=P.z0[se],nt=P.z1[he],At=P.fv,Qt=P.dpv,Jt=P.z2;Ie--;){var Mn=X.pop(),je=Jt[Mn];w.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Ie)+": ":"")+"IP[]",Mn,se,"<->",he),At.interpolate(je,Ke,nt,Qt),At.touch(je)}P.loop=1},Ki.bind(void 0,0),Ki.bind(void 0,1),function(P){for(var X=P.stack,he=P.z0[P.rp0],Ie=P.loop,Ke=P.fv,nt=P.pv,At=P.z1;Ie--;){var Qt=X.pop(),Jt=At[Qt];w.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-Ie)+": ":"")+"ALIGNRP[]",Qt),Ke.setRelative(Jt,he,0,nt),Ke.touch(Jt)}P.loop=1},function(P){w.DEBUG&&console.log(P.step,"RTDG[]"),P.round=Ma},Js.bind(void 0,0),Js.bind(void 0,1),function(P){var X=P.prog,se=P.ip,he=P.stack,Ie=X[++se];w.DEBUG&&console.log(P.step,"NPUSHB[]",Ie);for(var Ke=0;Ke<Ie;Ke++)he.push(X[++se]);P.ip=se},function(P){var X=P.ip,se=P.prog,he=P.stack,Ie=se[++X];w.DEBUG&&console.log(P.step,"NPUSHW[]",Ie);for(var Ke=0;Ke<Ie;Ke++){var nt=se[++X]<<8|se[++X];32768&nt&&(nt=-(1+(65535^nt))),he.push(nt)}P.ip=X},function(P){var he=P.stack,X=(X=P.store)||(P.store=[]),se=he.pop();he=he.pop(),w.DEBUG&&console.log(P.step,"WS",se,he),X[he]=se},function(Ie){var X=Ie.stack,se=Ie.store,he=X.pop();w.DEBUG&&console.log(Ie.step,"RS",he),X.push(Ie=se&&se[he]||0)},function(P){var X=(se=P.stack).pop(),se=se.pop();w.DEBUG&&console.log(P.step,"WCVTP",X,se),P.cvt[se]=X/64},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"RCVT",se),X.push(64*P.cvt[se])},Br.bind(void 0,0),Br.bind(void 0,1),void 0,da.bind(void 0,0),da.bind(void 0,1),function(P){w.DEBUG&&console.log(P.step,"MPPEM[]"),P.stack.push(P.ppem)},void 0,function(P){w.DEBUG&&console.log(P.step,"FLIPON[]"),P.autoFlip=!0},void 0,void 0,function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"LT[]",se,he),X.push(he<se?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"LTEQ[]",se,he),X.push(he<=se?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"GT[]",se,he),X.push(se<he?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"GTEQ[]",se,he),X.push(se<=he?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"EQ[]",se,he),X.push(se===he?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"NEQ[]",se,he),X.push(se!==he?1:0)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"ODD[]",se),X.push(Math.trunc(se)%2?1:0)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"EVEN[]",se),X.push(Math.trunc(se)%2?0:1)},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"IF[]",X),X||(jn(P,!0),w.DEBUG&&console.log(P.step,"EIF[]"))},function(P){w.DEBUG&&console.log(P.step,"EIF[]")},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"AND[]",se,he),X.push(se&&he?1:0)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"OR[]",se,he),X.push(se||he?1:0)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"NOT[]",se),X.push(se?0:1)},Na.bind(void 0,1),function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SDB[]",X),P.deltaBase=X},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SDS[]",X),P.deltaShift=Math.pow(.5,X)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"ADD[]",se,he),X.push(he+se)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"SUB[]",se,he),X.push(he-se)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"DIV[]",se,he),X.push(64*he/se)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"MUL[]",se,he),X.push(he*se/64)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"ABS[]",se),X.push(Math.abs(se))},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"NEG[]",se),X.push(-se)},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"FLOOR[]",se),X.push(64*Math.floor(se/64))},function(P){var X=P.stack,se=X.pop();w.DEBUG&&console.log(P.step,"CEILING[]",se),X.push(64*Math.ceil(se/64))},uo.bind(void 0,0),uo.bind(void 0,1),uo.bind(void 0,2),uo.bind(void 0,3),void 0,void 0,void 0,void 0,function(P){var X=(se=P.stack).pop(),se=se.pop();w.DEBUG&&console.log(P.step,"WCVTF[]",X,se),P.cvt[se]=X*P.ppem/P.font.unitsPerEm},Na.bind(void 0,2),Na.bind(void 0,3),El.bind(void 0,1),El.bind(void 0,2),El.bind(void 0,3),function(P){var X,se=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"SROUND[]",se),P.round=Bl,192&se){case 0:X=.5;break;case 64:X=1;break;case 128:X=2;break;default:throw new Error("invalid SROUND value")}switch(P.srPeriod=X,48&se){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*X;break;case 32:P.srPhase=.5*X;break;case 48:P.srPhase=.75*X;break;default:throw new Error("invalid SROUND value")}P.srThreshold=0==(se&=15)?0:(se/8-.5)*X},function(P){var X,se=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"S45ROUND[]",se),P.round=Bl,192&se){case 0:X=Math.sqrt(2)/2;break;case 64:X=Math.sqrt(2);break;case 128:X=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(P.srPeriod=X,48&se){case 0:P.srPhase=0;break;case 16:P.srPhase=.25*X;break;case 32:P.srPhase=.5*X;break;case 48:P.srPhase=.75*X;break;default:throw new Error("invalid S45ROUND value")}P.srThreshold=0==(se&=15)?0:(se/8-.5)*X},void 0,void 0,function(P){w.DEBUG&&console.log(P.step,"ROFF[]"),P.round=na},void 0,function(P){w.DEBUG&&console.log(P.step,"RUTG[]"),P.round=La},function(P){w.DEBUG&&console.log(P.step,"RDTG[]"),P.round=Qa},Jr,Jr,void 0,void 0,void 0,void 0,void 0,function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SCANCTRL[]",X)},bc.bind(void 0,0),bc.bind(void 0,1),function(P){var X=P.stack,se=X.pop(),he=0;w.DEBUG&&console.log(P.step,"GETINFO[]",se),1&se&&(he=35),32&se&&(he|=4096),X.push(he)},void 0,function(P){var X=P.stack,se=X.pop(),he=X.pop(),Ie=X.pop();w.DEBUG&&console.log(P.step,"ROLL[]"),X.push(he),X.push(se),X.push(Ie)},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"MAX[]",se,he),X.push(Math.max(he,se))},function(P){var X=P.stack,se=X.pop(),he=X.pop();w.DEBUG&&console.log(P.step,"MIN[]",se,he),X.push(Math.min(he,se))},function(P){var X=P.stack.pop();w.DEBUG&&console.log(P.step,"SCANTYPE[]",X)},function(P){var X=P.stack.pop(),se=P.stack.pop();switch(w.DEBUG&&console.log(P.step,"INSTCTRL[]",X,se),X){case 1:return void(P.inhibitGridFit=!!se);case 2:return void(P.ignoreCvt=!!se);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ha.bind(void 0,1),ha.bind(void 0,2),ha.bind(void 0,3),ha.bind(void 0,4),ha.bind(void 0,5),ha.bind(void 0,6),ha.bind(void 0,7),ha.bind(void 0,8),go.bind(void 0,1),go.bind(void 0,2),go.bind(void 0,3),go.bind(void 0,4),go.bind(void 0,5),go.bind(void 0,6),go.bind(void 0,7),go.bind(void 0,8),pi.bind(void 0,0,0,0,0,0),pi.bind(void 0,0,0,0,0,1),pi.bind(void 0,0,0,0,0,2),pi.bind(void 0,0,0,0,0,3),pi.bind(void 0,0,0,0,1,0),pi.bind(void 0,0,0,0,1,1),pi.bind(void 0,0,0,0,1,2),pi.bind(void 0,0,0,0,1,3),pi.bind(void 0,0,0,1,0,0),pi.bind(void 0,0,0,1,0,1),pi.bind(void 0,0,0,1,0,2),pi.bind(void 0,0,0,1,0,3),pi.bind(void 0,0,0,1,1,0),pi.bind(void 0,0,0,1,1,1),pi.bind(void 0,0,0,1,1,2),pi.bind(void 0,0,0,1,1,3),pi.bind(void 0,0,1,0,0,0),pi.bind(void 0,0,1,0,0,1),pi.bind(void 0,0,1,0,0,2),pi.bind(void 0,0,1,0,0,3),pi.bind(void 0,0,1,0,1,0),pi.bind(void 0,0,1,0,1,1),pi.bind(void 0,0,1,0,1,2),pi.bind(void 0,0,1,0,1,3),pi.bind(void 0,0,1,1,0,0),pi.bind(void 0,0,1,1,0,1),pi.bind(void 0,0,1,1,0,2),pi.bind(void 0,0,1,1,0,3),pi.bind(void 0,0,1,1,1,0),pi.bind(void 0,0,1,1,1,1),pi.bind(void 0,0,1,1,1,2),pi.bind(void 0,0,1,1,1,3),pi.bind(void 0,1,0,0,0,0),pi.bind(void 0,1,0,0,0,1),pi.bind(void 0,1,0,0,0,2),pi.bind(void 0,1,0,0,0,3),pi.bind(void 0,1,0,0,1,0),pi.bind(void 0,1,0,0,1,1),pi.bind(void 0,1,0,0,1,2),pi.bind(void 0,1,0,0,1,3),pi.bind(void 0,1,0,1,0,0),pi.bind(void 0,1,0,1,0,1),pi.bind(void 0,1,0,1,0,2),pi.bind(void 0,1,0,1,0,3),pi.bind(void 0,1,0,1,1,0),pi.bind(void 0,1,0,1,1,1),pi.bind(void 0,1,0,1,1,2),pi.bind(void 0,1,0,1,1,3),pi.bind(void 0,1,1,0,0,0),pi.bind(void 0,1,1,0,0,1),pi.bind(void 0,1,1,0,0,2),pi.bind(void 0,1,1,0,0,3),pi.bind(void 0,1,1,0,1,0),pi.bind(void 0,1,1,0,1,1),pi.bind(void 0,1,1,0,1,2),pi.bind(void 0,1,1,0,1,3),pi.bind(void 0,1,1,1,0,0),pi.bind(void 0,1,1,1,0,1),pi.bind(void 0,1,1,1,0,2),pi.bind(void 0,1,1,1,0,3),pi.bind(void 0,1,1,1,1,0),pi.bind(void 0,1,1,1,1,1),pi.bind(void 0,1,1,1,1,2),pi.bind(void 0,1,1,1,1,3)],ml=Array.from||function(P){return P.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Os(P){(P=P||{}).empty||(Ne(P.familyName,"When creating a new Font object, familyName is required."),Ne(P.styleName,"When creating a new Font object, styleName is required."),Ne(P.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ne(P.ascender,"When creating a new Font object, ascender is required."),Ne(P.descender,"When creating a new Font object, descender is required."),Ne(P.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:P.familyName||" "},fontSubfamily:{en:P.styleName||" "},fullName:{en:P.fullName||P.familyName+" "+P.styleName},postScriptName:{en:P.postScriptName||(P.familyName+P.styleName).replace(/\s/g,"")},designer:{en:P.designer||" "},designerURL:{en:P.designerURL||" "},manufacturer:{en:P.manufacturer||" "},manufacturerURL:{en:P.manufacturerURL||" "},license:{en:P.license||" "},licenseURL:{en:P.licenseURL||" "},version:{en:P.version||"Version 0.1"},description:{en:P.description||" "},copyright:{en:P.copyright||" "},trademark:{en:P.trademark||" "}},this.unitsPerEm=P.unitsPerEm||1e3,this.ascender=P.ascender,this.descender=P.descender,this.createdTimestamp=P.createdTimestamp,this.tables={os2:{usWeightClass:P.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:P.widthClass||this.usWidthClasses.MEDIUM,fsSelection:P.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Tn.GlyphSet(this,P.glyphs||[]),this.encoding=new On(this),this.position=new Ta(this),this.substitution=new To(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new qs(this):void 0)}})}Os.prototype.hasChar=function(P){return null!==this.encoding.charToGlyphIndex(P)},Os.prototype.charToGlyphIndex=function(P){return this.encoding.charToGlyphIndex(P)},Os.prototype.charToGlyph=function(P){return P=this.charToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},Os.prototype.stringToGlyphs=function(P,X){X=X||this.defaultRenderOptions;for(var se=ml(P),he=[],Ie=0;Ie<se.length;Ie+=1)he.push(this.charToGlyphIndex(se[Ie]));var nt=he.length;if(X.features){P=X.script||this.substitution.getDefaultScriptName();var At=[];X.features.liga&&(At=At.concat(this.substitution.getFeature("liga",P,X.language))),X.features.rlig&&(At=At.concat(this.substitution.getFeature("rlig",P,X.language)));for(var Qt=0;Qt<nt;Qt+=1)for(var Jt=0;Jt<At.length;Jt++){for(var Mn=At[Jt],je=Mn.sub,xe=je.length,Ve=0;Ve<xe&&je[Ve]===he[Qt+Ve];)Ve++;Ve===xe&&(he.splice(Qt,xe,Mn.by),nt=nt-xe+1)}}for(var ke=new Array(nt),ht=this.glyphs.get(0),on=0;on<nt;on+=1)ke[on]=this.glyphs.get(he[on])||ht;return ke},Os.prototype.nameToGlyphIndex=function(P){return this.glyphNames.nameToGlyphIndex(P)},Os.prototype.nameToGlyph=function(P){return P=this.nameToGlyphIndex(P),this.glyphs.get(P)||this.glyphs.get(0)},Os.prototype.glyphIndexToName=function(P){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(P):""},Os.prototype.getKerningValue=function(P,X){P=P.index||P,X=X.index||X;var se=this.position.defaultKerningTables;return se?this.position.getKerningValue(se,P,X):this.kerningPairs[P+","+X]||0},Os.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Os.prototype.forEachGlyph=function(P,X,se,he,Ie,Ke){X=void 0!==X?X:0,se=void 0!==se?se:0;var nt,At=1/this.unitsPerEm*(he=void 0!==he?he:72),Qt=this.stringToGlyphs(P,Ie=Ie||this.defaultRenderOptions);Ie.kerning&&(P=Ie.script||this.position.getDefaultScriptName(),nt=this.position.getKerningTables(P,Ie.language));for(var Jt=0;Jt<Qt.length;Jt+=1){var Mn=Qt[Jt];Ke.call(this,Mn,X,se,he,Ie),Mn.advanceWidth&&(X+=Mn.advanceWidth*At),Ie.kerning&&Jt<Qt.length-1&&(X+=(nt?this.position.getKerningValue(nt,Mn.index,Qt[Jt+1].index):this.getKerningValue(Mn,Qt[Jt+1]))*At),Ie.letterSpacing?X+=Ie.letterSpacing*he:Ie.tracking&&(X+=Ie.tracking/1e3*he)}return X},Os.prototype.getPath=function(P,X,se,he,Ie){var Ke=new De;return this.forEachGlyph(P,X,se,he,Ie,function(nt,At,Qt,Jt){nt=nt.getPath(At,Qt,Jt,Ie,this),Ke.extend(nt)}),Ke},Os.prototype.getPaths=function(P,X,se,he,Ie){var Ke=[];return this.forEachGlyph(P,X,se,he,Ie,function(nt,At,Qt,Jt){nt=nt.getPath(At,Qt,Jt,Ie,this),Ke.push(nt)}),Ke},Os.prototype.getAdvanceWidth=function(P,X,se){return this.forEachGlyph(P,0,0,X,se,function(){})},Os.prototype.draw=function(P,X,se,he,Ie,Ke){this.getPath(X,se,he,Ie,Ke).draw(P)},Os.prototype.drawPoints=function(P,X,se,he,Ie,Ke){this.forEachGlyph(X,se,he,Ie,Ke,function(nt,At,Qt,Jt){nt.drawPoints(P,At,Qt,Jt)})},Os.prototype.drawMetrics=function(P,X,se,he,Ie,Ke){this.forEachGlyph(X,se,he,Ie,Ke,function(nt,At,Qt,Jt){nt.drawMetrics(P,At,Qt,Jt)})},Os.prototype.getEnglishName=function(P){if(P=this.names[P])return P.en},Os.prototype.validate=function(){var P=this;function X(se){(se=P.getEnglishName(se))&&se.trim()}X("fontFamily"),X("weightName"),X("manufacturer"),X("copyright"),X("version")},Os.prototype.toTables=function(){return ca_fontToTable(this)},Os.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Os.prototype.toArrayBuffer=function(){for(var P=this.toTables().encode(),X=new ArrayBuffer(P.length),se=new Uint8Array(X),he=0;he<P.length;he++)se[he]=P[he];return X},Os.prototype.download=function(P){var X=this.getEnglishName("fontFamily"),se=this.getEnglishName("fontSubfamily"),he=(P=P||X.replace(/\s/g,"")+"-"+se+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,he.byteLength,function(Ie){Ie.root.getFile(P,{create:!0},function(Ke){Ke.createWriter(function(nt){var At=new DataView(he);At=new Blob([At],{type:"font/opentype"}),nt.write(At),nt.addEventListener("writeend",function(){location.href=Ke.toURL()},!1)})})},function(Ie){throw new Error(Ie.name+": "+Ie.message)})):(X=l("fs"),se=function(Ie){for(var Ke=new M(Ie.byteLength),nt=new Uint8Array(Ie),At=0;At<Ke.length;++At)Ke[At]=nt[At];return Ke}(he),X.writeFileSync(P,se))},Os.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Os.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Os.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Nc_parse=function(P,X,se){for(var he,Ke,nt,At=new Pn.Parser(P,X),Qt=At.parseULong(),Jt=(z.argument(65536===Qt,"Unsupported fvar table version."),At.parseOffset16()),Mn=(At.skip("uShort",1),At.parseUShort()),je=At.parseUShort(),xe=At.parseUShort(),Ve=At.parseUShort(),ke=[],ht=0;ht<Mn;ht++)ke.push((Ke=se,nt={},he=new Pn.Parser(he=P,X+Jt+ht*je),nt.tag=he.parseTag(),nt.minValue=he.parseFixed(),nt.defaultValue=he.parseFixed(),nt.maxValue=he.parseFixed(),he.skip("uShort",1),nt.name=Ke[he.parseUShort()]||{},nt));for(var on=[],Dn=X+Jt+Mn*je,Gn=0;Gn<xe;Gn++)on.push(function(li,Zr,Si,_i){var Ji={},cs=new Pn.Parser(li,Zr);Ji.name=_i[cs.parseUShort()]||{},cs.skip("uShort",1),Ji.coordinates={};for(var yo=0;yo<Si.length;++yo)Ji.coordinates[Si[yo].tag]=cs.parseFixed();return Ji}(P,Dn+Gn*Ve,ke,se));return{axes:ke,instances:on}},Ca=new Array(10);Ca[1]=function(){var P=this.offset+this.relativeOffset,X=this.parseUShort();return 1===X?{posFormat:1,coverage:this.parsePointer(vn.coverage),value:this.parseValueRecord()}:2===X?{posFormat:2,coverage:this.parsePointer(vn.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+P.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Ca[2]=function(){var P,X,se,he,Ke=this.offset+this.relativeOffset,Ie=this.parseUShort(),nt=(z.assert(1===Ie||2===Ie,"0x"+Ke.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),Ke=this.parsePointer(vn.coverage),this.parseUShort()),At=this.parseUShort();return 1===Ie?{posFormat:Ie,coverage:Ke,valueFormat1:nt,valueFormat2:At,pairSets:this.parseList(vn.pointer(vn.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(nt),value2:this.parseValueRecord(At)}})))}:2===Ie?(P=this.parsePointer(vn.classDef),X=this.parsePointer(vn.classDef),se=this.parseUShort(),he=this.parseUShort(),{posFormat:Ie,coverage:Ke,valueFormat1:nt,valueFormat2:At,classDef1:P,classDef2:X,class1Count:se,class2Count:he,classRecords:this.parseList(se,vn.list(he,function(){return{value1:this.parseValueRecord(nt),value2:this.parseValueRecord(At)}}))}):void 0},Ca[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Ca[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Ca[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Ca[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Ca[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Ca[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Ca[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var Vl_parse=function(P,X){return X=(P=new vn(P,X=X||0)).parseVersion(1),z.argument(1===X||1.1===X,"Unsupported GPOS table version "+X),1===X?{version:X,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(Ca)}:{version:X,scripts:P.parseScriptList(),features:P.parseFeatureList(),lookups:P.parseLookupList(Ca),variations:P.parseFeatureVariationsList()}},Mo_parse=function(P,X){if(0===(X=(P=new Pn.Parser(P,X)).parseUShort())){var se=P,he={},je=(se.skip("uShort"),se.parseUShort()),Ie=(z.argument(0===je,"Unsupported kern sub-table version."),se.skip("uShort",2),se.parseUShort());se.skip("uShort",3);for(var Ke=0;Ke<Ie;Ke+=1){var nt=se.parseUShort(),At=se.parseUShort(),Qt=se.parseShort();he[nt+","+At]=Qt}return he}if(1!==X)throw new Error("Unsupported kern table version ("+X+").");var Jt=P,Mn={};if(Jt.skip("uShort"),1<Jt.parseULong()&&console.warn("Only the first kern subtable is supported."),Jt.skip("uLong"),je=255&Jt.parseUShort(),Jt.skip("uShort"),0==je){var xe=Jt.parseUShort();Jt.skip("uShort",3);for(var Ve=0;Ve<xe;Ve+=1){var ke=Jt.parseUShort(),ht=Jt.parseUShort(),on=Jt.parseShort();Mn[ke+","+ht]=on}}return Mn},gl_parse=function(P,X,se,he){for(var Ie=new Pn.Parser(P,X),Ke=he?Ie.parseUShort:Ie.parseULong,nt=[],At=0;At<se+1;At+=1){var Qt=Ke.call(Ie);he&&(Qt*=2),nt.push(Qt)}return nt};function Tl(P,X){l("fs").readFile(P,function(se,he){if(se)return X(se.message);X(null,Va(he))})}function Da(P,X){var se=new XMLHttpRequest;se.open("get",P,!0),se.responseType="arraybuffer",se.onload=function(){return se.response?X(null,se.response):X("Font could not be loaded: "+se.statusText)},se.onerror=function(){X("Font could not be loaded")},se.send()}function Gl(P,X){for(var se=[],he=12,Ie=0;Ie<X;Ie+=1){var Ke=Pn.getTag(P,he),nt=Pn.getULong(P,he+4),At=Pn.getULong(P,he+8),Qt=Pn.getULong(P,he+12);se.push({tag:Ke,checksum:nt,offset:At,length:Qt,compression:!1}),he+=16}return se}function hi(se,X){if("WOFF"!==X.compression)return{data:se,offset:X.offset};se=new Uint8Array(se.buffer,X.offset+2,X.compressedLength-2);var he=new Uint8Array(X.length);if(re(se,he),he.byteLength!==X.length)throw new Error("Decompression error: "+X.tag+" decompressed length doesn't match recorded length");return{data:new DataView(he.buffer,0),offset:0}}function tl(Gn){var X,se,he,Ie,Ke,nt,At,Qt,Jt,Mn,je,xe,Ve,ke,ht=new Os({empty:!0}),on=new DataView(Gn,0),Dn=[];if("\0\x01\0\0"===(Gn=Pn.getTag(on,0))||"true"===Gn||"typ1"===Gn)ht.outlinesFormat="truetype",Dn=Gl(on,he=Pn.getUShort(on,4));else if("OTTO"===Gn)ht.outlinesFormat="cff",Dn=Gl(on,he=Pn.getUShort(on,4));else{if("wOFF"!==Gn)throw new Error("Unsupported OpenType signature "+Gn);if("\0\x01\0\0"===(li=Pn.getTag(on,4)))ht.outlinesFormat="truetype";else{if("OTTO"!==li)throw new Error("Unsupported OpenType flavor "+Gn);ht.outlinesFormat="cff"}Dn=function(Qs,di){for(var eo=[],fo=44,js=0;js<di;js+=1){var bi=Pn.getTag(Qs,fo),Fo=Pn.getULong(Qs,fo+4),pr=Pn.getULong(Qs,fo+8),Yi=Pn.getULong(Qs,fo+12);eo.push({tag:bi,offset:Fo,compression:pr<Yi&&"WOFF",compressedLength:pr,length:Yi}),fo+=20}return eo}(on,he=Pn.getUShort(on,12))}for(var Zr=0;Zr<he;Zr+=1){var Si=Dn[Zr],_i=void 0;switch(Si.tag){case"cmap":_i=hi(on,Si),ht.tables.cmap=gt_parse(_i.data,_i.offset),ht.encoding=new $n(ht.tables.cmap);break;case"cvt ":_i=hi(on,Si),ke=new Pn.Parser(_i.data,_i.offset),ht.tables.cvt=ke.parseShortList(Si.length/2);break;case"fvar":Ke=Si;break;case"fpgm":_i=hi(on,Si),ke=new Pn.Parser(_i.data,_i.offset),ht.tables.fpgm=ke.parseByteList(Si.length);break;case"head":_i=hi(on,Si),ht.tables.head=N_parse(_i.data,_i.offset),ht.unitsPerEm=ht.tables.head.unitsPerEm,X=ht.tables.head.indexToLocFormat;break;case"hhea":_i=hi(on,Si),ht.tables.hhea=R_parse(_i.data,_i.offset),ht.ascender=ht.tables.hhea.ascender,ht.descender=ht.tables.hhea.descender,ht.numberOfHMetrics=ht.tables.hhea.numberOfHMetrics;break;case"hmtx":Jt=Si;break;case"ltag":_i=hi(on,Si),se=ie_parse(_i.data,_i.offset);break;case"maxp":_i=hi(on,Si),ht.tables.maxp=$_parse(_i.data,_i.offset),ht.numGlyphs=ht.tables.maxp.numGlyphs;break;case"name":xe=Si;break;case"OS/2":_i=hi(on,Si),ht.tables.os2=or_parse(_i.data,_i.offset);break;case"post":_i=hi(on,Si),ht.tables.post=ii_parse(_i.data,_i.offset),ht.glyphNames=new Cr(ht.tables.post);break;case"prep":_i=hi(on,Si),ke=new Pn.Parser(_i.data,_i.offset),ht.tables.prep=ke.parseByteList(Si.length);break;case"glyf":nt=Si;break;case"loca":je=Si;break;case"CFF ":Ie=Si;break;case"kern":Mn=Si;break;case"GPOS":At=Si;break;case"GSUB":Qt=Si;break;case"meta":Ve=Si}}if(li=hi(on,xe),ht.tables.name=En_parse(li.data,li.offset,se),ht.names=ht.tables.name,nt&&je)Gn=0===X,li=hi(on,je),li=gl_parse(li.data,li.offset,ht.numGlyphs,Gn),Gn=hi(on,nt),ht.glyphs=fs.parse(Gn.data,Gn.offset,li,ht);else{if(!Ie)throw new Error("Font doesn't contain TrueType or CFF outlines.");Gn=hi(on,Ie),T_parse(Gn.data,Gn.offset,ht)}for(var li=hi(on,Jt),Ji=(U_parse(li.data,li.offset,ht.numberOfHMetrics,ht.numGlyphs,ht.glyphs),ht),cs=Ji.tables.cmap.glyphIndexMap,yo=Object.keys(cs),vo=0;vo<yo.length;vo+=1){var Po,Ao=yo[vo];(Po=Ji.glyphs.get(cs[Ao])).addUnicode(parseInt(Ao))}for(var Vs=0;Vs<Ji.glyphs.length;Vs+=1)Po=Ji.glyphs.get(Vs),Ji.cffEncoding?Po.name=Ji.isCIDFont?"gid"+Vs:Ji.cffEncoding.charset[Vs]:Ji.glyphNames.names&&(Po.name=Ji.glyphNames.glyphIndexToName(Vs));return Mn?(Gn=hi(on,Mn),ht.kerningPairs=Mo_parse(Gn.data,Gn.offset)):ht.kerningPairs={},At&&(li=hi(on,At),ht.tables.gpos=Vl_parse(li.data,li.offset),ht.position.init()),Qt&&(Gn=hi(on,Qt),ht.tables.gsub=xi_parse(Gn.data,Gn.offset)),Ke&&(li=hi(on,Ke),ht.tables.fvar=Nc_parse(li.data,li.offset,ht.names)),Ve&&(Gn=hi(on,Ve),ht.tables.meta=ws_parse(Gn.data,Gn.offset),ht.metas=ht.tables.meta),ht}w.Font=Os,w.Glyph=Fr,w.Path=De,w.BoundingBox=fe,w._parse=Pn,w.parse=tl,w.load=function(P,X){(typeof window>"u"?Tl:Da)(P,function(se,he){if(se)return X(se);var Ie;try{Ie=tl(he)}catch(Ke){return X(Ke,null)}return X(null,Ie)})},w.loadSync=function(P){return tl(Va(l("fs").readFileSync(P)))},Object.defineProperty(w,"__esModule",{value:!0})},b("object"==typeof Z&&void 0!==be?Z:this.opentype={})}).call(this,l("buffer").Buffer)},{buffer:4,fs:2}],258:[function(l,be,Z){(function(M){function C(I,D){for(var d=0,f=I.length-1;0<=f;f--){var h=I[f];"."===h?I.splice(f,1):".."===h?(I.splice(f,1),d++):d&&(I.splice(f,1),d--)}if(D)for(;d--;)I.unshift("..");return I}function b(I,D){if(I.filter)return I.filter(D);for(var d=[],f=0;f<I.length;f++)D(I[f],f,I)&&d.push(I[f]);return d}Z.resolve=function(){for(var I="",D=!1,d=arguments.length-1;-1<=d&&!D;d--){var f=0<=d?arguments[d]:M.cwd();if("string"!=typeof f)throw new TypeError("Arguments to path.resolve must be strings");f&&(I=f+"/"+I,D="/"===f.charAt(0))}return(D?"/":"")+(I=C(b(I.split("/"),function(h){return!!h}),!D).join("/"))||"."},Z.normalize=function(I){var D=Z.isAbsolute(I),d="/"===w(I,-1);return(I=(I=C(b(I.split("/"),function(f){return!!f}),!D).join("/"))||D?I:".")&&d&&(I+="/"),(D?"/":"")+I},Z.isAbsolute=function(I){return"/"===I.charAt(0)},Z.join=function(){var I=Array.prototype.slice.call(arguments,0);return Z.normalize(b(I,function(D,d){if("string"!=typeof D)throw new TypeError("Arguments to path.join must be strings");return D}).join("/"))},Z.relative=function(I,D){function d(E){for(var S=0;S<E.length&&""===E[S];S++);for(var L=E.length-1;0<=L&&""===E[L];L--);return L<S?[]:E.slice(S,L-S+1)}I=Z.resolve(I).substr(1),D=Z.resolve(D).substr(1);for(var f=d(I.split("/")),h=d(D.split("/")),p=Math.min(f.length,h.length),m=p,g=0;g<p;g++)if(f[g]!==h[g]){m=g;break}var x=[];for(g=m;g<f.length;g++)x.push("..");return(x=x.concat(h.slice(m))).join("/")},Z.sep="/",Z.delimiter=":",Z.dirname=function(I){if("string"!=typeof I&&(I+=""),0===I.length)return".";for(var D=47===I.charCodeAt(0),d=-1,f=!0,h=I.length-1;1<=h;--h)if(47===I.charCodeAt(h)){if(!f){d=h;break}}else f=!1;return-1===d?D?"/":".":D&&1===d?"/":I.slice(0,d)},Z.basename=function(I,D){return I=function(d){"string"!=typeof d&&(d+="");for(var f=0,h=-1,p=!0,m=d.length-1;0<=m;--m)if(47===d.charCodeAt(m)){if(!p){f=m+1;break}}else-1===h&&(p=!1,h=m+1);return-1===h?"":d.slice(f,h)}(I),D&&I.substr(-1*D.length)===D?I.substr(0,I.length-D.length):I},Z.extname=function(I){"string"!=typeof I&&(I+="");for(var D=-1,d=0,f=-1,h=!0,p=0,m=I.length-1;0<=m;--m){var g=I.charCodeAt(m);if(47===g){if(h)continue;d=m+1;break}-1===f&&(h=!1,f=m+1),46===g?-1===D?D=m:1!==p&&(p=1):-1!==D&&(p=-1)}return-1===D||-1===f||0===p||1===p&&D===f-1&&D===d+1?"":I.slice(D,f)};var w=function(I,D,d){return I.substr(D,d)}}).call(this,l("_process"))},{_process:259}],259:[function(l,b,Z){var M,C;function w(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}b=b.exports={};try{M="function"==typeof setTimeout?setTimeout:w}catch{M=w}try{C="function"==typeof clearTimeout?clearTimeout:I}catch{C=I}function D(S){if(M===setTimeout)return setTimeout(S,0);if((M===w||!M)&&setTimeout)return(M=setTimeout)(S,0);try{return M(S,0)}catch{try{return M.call(null,S,0)}catch{return M.call(this,S,0)}}}var d,f=[],h=!1,p=-1;function m(){h&&d&&(h=!1,d.length?f=d.concat(f):p=-1,f.length&&g())}function g(){if(!h){for(var S=D(m),L=(h=!0,f.length);L;){for(d=f,f=[];++p<L;)d&&d[p].run();p=-1,L=f.length}d=null,h=!1,function(q){if(C===clearTimeout)return clearTimeout(q);if((C===I||!C)&&clearTimeout)return(C=clearTimeout)(q);try{C(q)}catch{try{return C.call(null,q)}catch{return C.call(this,q)}}}(S)}}function x(S,L){this.fun=S,this.array=L}function E(){}b.nextTick=function(S){var L=new Array(arguments.length-1);if(1<arguments.length)for(var q=1;q<arguments.length;q++)L[q-1]=arguments[q];f.push(new x(S,L)),1!==f.length||h||D(g)},x.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=E,b.addListener=E,b.once=E,b.off=E,b.removeListener=E,b.removeAllListeners=E,b.emit=E,b.prependListener=E,b.prependOnceListener=E,b.listeners=function(S){return[]},b.binding=function(S){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(S){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],260:[function(l,be,Z){be=function(M){"use strict";var C,b=Object.prototype,w=b.hasOwnProperty,I=(J="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",D=J.asyncIterator||"@@asyncIterator",d=J.toStringTag||"@@toStringTag";function f(ge,ye,Q,Ue){var De,it,le,z;return ye=ye&&ye.prototype instanceof S?ye:S,ye=Object.create(ye.prototype),Ue=new we(Ue||[]),ye._invoke=(De=ge,it=Q,le=Ue,z=p,function(Je,vt){if(z===g)throw new Error("Generator is already running");if(z===x){if("throw"===Je)throw vt;return oe()}for(le.method=Je,le.arg=vt;;){var Ct=le.delegate;if(Ct&&(Ct=function zt(_t,Ft){var Wt=_t.iterator[Ft.method];if(Wt===C){if(Ft.delegate=null,"throw"===Ft.method){if(_t.iterator.return&&(Ft.method="return",Ft.arg=C,zt(_t,Ft),"throw"===Ft.method))return E;Ft.method="throw",Ft.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}return"throw"===(Wt=h(Wt,_t.iterator,Ft.arg)).type?(Ft.method="throw",Ft.arg=Wt.arg,Ft.delegate=null,E):(Wt=Wt.arg)?Wt.done?(Ft[_t.resultName]=Wt.value,Ft.next=_t.nextLoc,"return"!==Ft.method&&(Ft.method="next",Ft.arg=C),Ft.delegate=null,E):Wt:(Ft.method="throw",Ft.arg=new TypeError("iterator result is not an object"),Ft.delegate=null,E)}(Ct,le))){if(Ct===E)continue;return Ct}if("next"===le.method)le.sent=le._sent=le.arg;else if("throw"===le.method){if(z===p)throw z=x,le.arg;le.dispatchException(le.arg)}else"return"===le.method&&le.abrupt("return",le.arg);if(z=g,"normal"===(Ct=h(De,it,le)).type){if(z=le.done?x:m,Ct.arg!==E)return{value:Ct.arg,done:le.done}}else"throw"===Ct.type&&(z=x,le.method="throw",le.arg=Ct.arg)}}),ye}function h(ge,re,Q){try{return{type:"normal",arg:ge.call(re,Q)}}catch(fe){return{type:"throw",arg:fe}}}M.wrap=f;var p="suspendedStart",m="suspendedYield",g="executing",x="completed",E={};function S(){}function L(){}function q(){}var J,G,V=((J={})[I]=function(){return this},(G=(G=Object.getPrototypeOf)&&G(G(Se([]))))&&G!==b&&w.call(G,I)&&(J=G),q.prototype=S.prototype=Object.create(J));function K(ge){["next","throw","return"].forEach(function(re){ge[re]=function(Q){return this._invoke(re,Q)}})}function H(ge){var re;this._invoke=function(Q,fe){function De(){return new Promise(function(it,le){!function z(zt,Ue,Je,vt){var Ct;if("throw"!==(zt=h(ge[zt],ge,Ue)).type)return(Ue=(Ct=zt.arg).value)&&"object"==typeof Ue&&w.call(Ue,"__await")?Promise.resolve(Ue.__await).then(function(_t){z("next",_t,Je,vt)},function(_t){z("throw",_t,Je,vt)}):Promise.resolve(Ue).then(function(_t){Ct.value=_t,Je(Ct)},function(_t){return z("throw",_t,Je,vt)});vt(zt.arg)}(Q,fe,it,le)})}return re=re?re.then(De,De):De()}}function te(ge){var re={tryLoc:ge[0]};1 in ge&&(re.catchLoc=ge[1]),2 in ge&&(re.finallyLoc=ge[2],re.afterLoc=ge[3]),this.tryEntries.push(re)}function Y(ge){var re=ge.completion||{};re.type="normal",delete re.arg,ge.completion=re}function we(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(te,this),this.reset(!0)}function Se(ge){if(ge){var re,Q=ge[I];if(Q)return Q.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length))return re=-1,(Q=function fe(){for(;++re<ge.length;)if(w.call(ge,re))return fe.value=ge[re],fe.done=!1,fe;return fe.value=C,fe.done=!0,fe}).next=Q}return{next:oe}}function oe(){return{value:C,done:!0}}return(L.prototype=V.constructor=q).constructor=L,q[d]=L.displayName="GeneratorFunction",M.isGeneratorFunction=function(ge){return!!(ge="function"==typeof ge&&ge.constructor)&&(ge===L||"GeneratorFunction"===(ge.displayName||ge.name))},M.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,q):(ge.__proto__=q,d in ge||(ge[d]="GeneratorFunction")),ge.prototype=Object.create(V),ge},M.awrap=function(ge){return{__await:ge}},K(H.prototype),H.prototype[D]=function(){return this},M.AsyncIterator=H,M.async=function(ge,re,Q,fe){var De=new H(f(ge,re,Q,fe));return M.isGeneratorFunction(re)?De:De.next().then(function(it){return it.done?it.value:De.next()})},K(V),V[d]="Generator",V[I]=function(){return this},V.toString=function(){return"[object Generator]"},M.keys=function(ge){var re,Q=[];for(re in ge)Q.push(re);return Q.reverse(),function fe(){for(;Q.length;){var De=Q.pop();if(De in ge)return fe.value=De,fe.done=!1,fe}return fe.done=!0,fe}},M.values=Se,we.prototype={constructor:we,reset:function(ge){if(this.prev=0,this.next=0,this.sent=this._sent=C,this.done=!1,this.delegate=null,this.method="next",this.arg=C,this.tryEntries.forEach(Y),!ge)for(var re in this)"t"===re.charAt(0)&&w.call(this,re)&&!isNaN(+re.slice(1))&&(this[re]=C)},stop:function(){this.done=!0;var ge=this.tryEntries[0].completion;if("throw"===ge.type)throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var re=this;function Q(ye,Ue){return it.type="throw",it.arg=ge,re.next=ye,Ue&&(re.method="next",re.arg=C),!!Ue}for(var fe=this.tryEntries.length-1;0<=fe;--fe){var De=this.tryEntries[fe],it=De.completion;if("root"===De.tryLoc)return Q("end");if(De.tryLoc<=this.prev){var le=w.call(De,"catchLoc"),z=w.call(De,"finallyLoc");if(le&&z){if(this.prev<De.catchLoc)return Q(De.catchLoc,!0);if(this.prev<De.finallyLoc)return Q(De.finallyLoc)}else if(le){if(this.prev<De.catchLoc)return Q(De.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<De.finallyLoc)return Q(De.finallyLoc)}}}},abrupt:function(ge,re){for(var Q=this.tryEntries.length-1;0<=Q;--Q){var fe=this.tryEntries[Q];if(fe.tryLoc<=this.prev&&w.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var De=fe;break}}var it=(De=De&&("break"===ge||"continue"===ge)&&De.tryLoc<=re&&re<=De.finallyLoc?null:De)?De.completion:{};return it.type=ge,it.arg=re,De?(this.method="next",this.next=De.finallyLoc,E):this.complete(it)},complete:function(ge,re){if("throw"===ge.type)throw ge.arg;return"break"===ge.type||"continue"===ge.type?this.next=ge.arg:"return"===ge.type?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):"normal"===ge.type&&re&&(this.next=re),E},finish:function(ge){for(var re=this.tryEntries.length-1;0<=re;--re){var Q=this.tryEntries[re];if(Q.finallyLoc===ge)return this.complete(Q.completion,Q.afterLoc),Y(Q),E}},catch:function(ge){for(var re=this.tryEntries.length-1;0<=re;--re){var Q,fe,De=this.tryEntries[re];if(De.tryLoc===ge)return"throw"===(Q=De.completion).type&&(fe=Q.arg,Y(De)),fe}throw new Error("illegal catch attempt")},delegateYield:function(ge,re,Q){return this.delegate={iterator:Se(ge),resultName:re,nextLoc:Q},"next"===this.method&&(this.arg=C),E}},M}("object"==typeof be?be.exports:{});try{regeneratorRuntime=be}catch{Function("r","regeneratorRuntime = r")(be)}},{}],261:[function(l,be,Z){!function(M){"use strict";var C,b,w,I,D,d,f,h,p,m;function g(Y){if("string"!=typeof Y&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Y))throw new TypeError("Invalid character in header field name");return Y.toLowerCase()}function x(Y){return"string"!=typeof Y?String(Y):Y}function E(Y){var we={next:function(){var Se=Y.shift();return{done:void 0===Se,value:Se}}};return b&&(we[Symbol.iterator]=function(){return we}),we}function S(Y){this.map={},Y instanceof S?Y.forEach(function(we,Se){this.append(Se,we)},this):Array.isArray(Y)?Y.forEach(function(we){this.append(we[0],we[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(we){this.append(we,Y[we])},this)}function L(Y){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}function q(Y){return new Promise(function(we,Se){Y.onload=function(){we(Y.result)},Y.onerror=function(){Se(Y.error)}})}function J(Y){var we=new FileReader,Se=q(we);return we.readAsArrayBuffer(Y),Se}function G(Y){var we;return Y.slice?Y.slice(0):((we=new Uint8Array(Y.byteLength)).set(new Uint8Array(Y)),we.buffer)}function V(){return this.bodyUsed=!1,this._initBody=function(Y){if(this._bodyInit=Y)if("string"==typeof Y)this._bodyText=Y;else if(w&&Blob.prototype.isPrototypeOf(Y))this._bodyBlob=Y;else if(I&&FormData.prototype.isPrototypeOf(Y))this._bodyFormData=Y;else if(C&&URLSearchParams.prototype.isPrototypeOf(Y))this._bodyText=Y.toString();else if(D&&w&&f(Y))this._bodyArrayBuffer=G(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!D||!ArrayBuffer.prototype.isPrototypeOf(Y)&&!h(Y))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=G(Y)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof Y?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},w&&(this.blob=function(){var Y=L(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?L(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(J)}),this.text=function(){var Y,we,Se=L(this);if(Se)return Se;if(this._bodyBlob)return Se=this._bodyBlob,we=q(Y=new FileReader),Y.readAsText(Se),we;if(this._bodyArrayBuffer)return Promise.resolve(function(oe){for(var ge=new Uint8Array(oe),re=new Array(ge.length),Q=0;Q<ge.length;Q++)re[Q]=String.fromCharCode(ge[Q]);return re.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},I&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}function K(Y,we){var Se,oe=(we=we||{}).body;if(Y instanceof K){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,we.headers||(this.headers=new S(Y.headers)),this.method=Y.method,this.mode=Y.mode,oe||null==Y._bodyInit||(oe=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=we.credentials||this.credentials||"omit",!we.headers&&this.headers||(this.headers=new S(we.headers)),this.method=(Se=(Y=we.method||this.method||"GET").toUpperCase(),-1<p.indexOf(Se)?Se:Y),this.mode=we.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(oe)}function H(Y){var we=new FormData;return Y.trim().split("&").forEach(function(Se){var oe;Se&&(oe=(Se=Se.split("=")).shift().replace(/\+/g," "),Se=Se.join("=").replace(/\+/g," "),we.append(decodeURIComponent(oe),decodeURIComponent(Se)))}),we}function te(Y,we){we=we||{},this.type="default",this.status=void 0===we.status?200:we.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in we?we.statusText:"OK",this.headers=new S(we.headers),this.url=we.url||"",this._initBody(Y)}M.fetch||(C="URLSearchParams"in M,b="Symbol"in M&&"iterator"in Symbol,w="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch{return!1}}(),I="FormData"in M,(D="ArrayBuffer"in M)&&(d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(Y){return Y&&DataView.prototype.isPrototypeOf(Y)},h=ArrayBuffer.isView||function(Y){return Y&&-1<d.indexOf(Object.prototype.toString.call(Y))}),S.prototype.append=function(Y,we){Y=g(Y),we=x(we);var Se=this.map[Y];this.map[Y]=Se?Se+","+we:we},S.prototype.delete=function(Y){delete this.map[g(Y)]},S.prototype.get=function(Y){return Y=g(Y),this.has(Y)?this.map[Y]:null},S.prototype.has=function(Y){return this.map.hasOwnProperty(g(Y))},S.prototype.set=function(Y,we){this.map[g(Y)]=x(we)},S.prototype.forEach=function(Y,we){for(var Se in this.map)this.map.hasOwnProperty(Se)&&Y.call(we,this.map[Se],Se,this)},S.prototype.keys=function(){var Y=[];return this.forEach(function(we,Se){Y.push(Se)}),E(Y)},S.prototype.values=function(){var Y=[];return this.forEach(function(we){Y.push(we)}),E(Y)},S.prototype.entries=function(){var Y=[];return this.forEach(function(we,Se){Y.push([Se,we])}),E(Y)},b&&(S.prototype[Symbol.iterator]=S.prototype.entries),p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],K.prototype.clone=function(){return new K(this,{body:this._bodyInit})},V.call(K.prototype),V.call(te.prototype),te.prototype.clone=function(){return new te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},te.error=function(){var Y=new te(null,{status:0,statusText:""});return Y.type="error",Y},m=[301,302,303,307,308],te.redirect=function(Y,we){if(-1===m.indexOf(we))throw new RangeError("Invalid status code");return new te(null,{status:we,headers:{location:Y}})},M.Headers=S,M.Request=K,M.Response=te,M.fetch=function(Y,we){return new Promise(function(Se,oe){var ge=new K(Y,we),re=new XMLHttpRequest;re.onload=function(){var Q,fe={status:re.status,statusText:re.statusText,headers:(fe=re.getAllResponseHeaders()||"",Q=new S,fe.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(le){var z=(le=le.split(":")).shift().trim();z&&(le=le.join(":").trim(),Q.append(z,le))}),Q)},De=(fe.url="responseURL"in re?re.responseURL:fe.headers.get("X-Request-URL"),"response"in re?re.response:re.responseText);Se(new te(De,fe))},re.onerror=function(){oe(new TypeError("Network request failed"))},re.ontimeout=function(){oe(new TypeError("Network request failed"))},re.open(ge.method,ge.url,!0),"include"===ge.credentials?re.withCredentials=!0:"omit"===ge.credentials&&(re.withCredentials=!1),"responseType"in re&&w&&(re.responseType="blob"),ge.headers.forEach(function(Q,fe){re.setRequestHeader(fe,Q)}),re.send(void 0===ge._bodyInit?null:ge._bodyInit)})},M.fetch.polyfill=!0)}(typeof self<"u"?self:this)},{}],262:[function(l,be,Z){"use strict";l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M,C=w(l("../core/main")),b=w(l("../color/color_conversion"));function w(d){return d&&d.__esModule?d:{default:d}}var I=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],D=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];C.default.prototype._rgbColorName=function(p){p=b.default._rgbaToHSBA(p);var f,h,m=[(M=p)[0],p[1],p[2]];0!==m[0]&&(m[0]=Math.round(100*m[0]),(p=m[0].toString().split(""))[h=p.length-1]=parseInt(p[h]),p[h]<2.5?p[h]=0:2.5<=p[h]&&p[h]<7.5&&(p[h]=5),2===p.length?(p[0]=parseInt(p[0]),7.5<=p[h]&&(p[h]=0,p[0]=p[0]+1),m[0]=10*p[0]+p[1]):m[0]=7.5<=p[h]?10:p[h]),m[2]=m[2]/255;for(var g=m.length-1;1<=g;g--)m[g]=m[g]<=.25?0:.25<m[g]&&m[g]<.75?.5:1;if(0===m[0]&&0===m[1]&&1===m[2]){for(var x=2;0<=x;x--)M[x]=Math.round(1e4*M[x])/1e4;for(var E=0;E<I.length;E++){if(I[E].h===M[0]&&I[E].s===M[1]&&I[E].b===M[2]){f=I[E].name;break}f="white"}}else for(var S=0;S<D.length;S++)if(D[S].h===m[0]&&D[S].s===m[1]&&D[S].b===m[2]){f=D[S].name;break}return f},Z.default=l=C.default},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.replace"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l},C="_Description",b="_fallbackDesc",w="_fallbackTable",I="_Label",D="_labelDesc",d="_labelTable";function f(h){if("label"===h||"fallback"===h)throw new Error("description should not be LABEL or FALLBACK");return h.endsWith(".")||h.endsWith(";")||h.endsWith(",")||h.endsWith("?")||h.endsWith("!")||(h+="."),h}M.default.prototype.describe=function(h,p){var m;M.default._validateParameters("describe",arguments),"string"==typeof h&&(m=this.canvas.id,h=f(h),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==h&&(this.descriptions.fallback.innerHTML=h):this._describeHTML("fallback",h),p===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==h&&(this.descriptions.label.innerHTML=h):this._describeHTML("label",h)))},M.default.prototype.describeElement=function(h,p,m){var g,x;M.default._validateParameters("describeElement",arguments),"string"==typeof p&&"string"==typeof h&&(g=this.canvas.id,p=f(p),x=function(E){if("label"===E||"fallback"===E)throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(h),h=h.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(p,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[h]?this.descriptions.fallbackElements[h].innerHTML!==x&&(this.descriptions.fallbackElements[h].innerHTML=x):this._describeElementHTML("fallback",h,x),m===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[h]?this.descriptions.labelElements[h].innerHTML!==x&&(this.descriptions.labelElements[h].innerHTML=x):this._describeElementHTML("label",h,x)))},M.default.prototype._describeHTML=function(h,p){var m,g=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(g+C))?this.dummyDOM.querySelector("#"+g+w).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+b,'"></p>')):(m='<div id="'.concat(g).concat(C,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(b,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(g)).innerHTML=m),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(b)),this.descriptions.fallback.innerHTML=p):"label"===h&&(this.dummyDOM.querySelector("#".concat(g+I))?this.dummyDOM.querySelector("#".concat(g+d))&&this.dummyDOM.querySelector("#".concat(g+d)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(D,'"></p>')):(m='<div id="'.concat(g).concat(I,'" class="p5Label"><p id="').concat(g).concat(D,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",m)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+D),this.descriptions.label.innerHTML=p)},M.default.prototype._describeElementHTML=function(h,p,m){var g,x=this.canvas.id;"fallback"===h?(this.dummyDOM.querySelector("#".concat(x+C))?this.dummyDOM.querySelector("#"+x+w)||this.dummyDOM.querySelector("#"+x+b).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(x).concat(C,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(w,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).innerHTML=g),(g=document.createElement("tr")).id=x+"_fte_"+p,this.dummyDOM.querySelector("#"+x+w).appendChild(g),this.descriptions.fallbackElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(p)),this.descriptions.fallbackElements[p].innerHTML=m):"label"===h&&(this.dummyDOM.querySelector("#".concat(x+I))?this.dummyDOM.querySelector("#".concat(x+d))||this.dummyDOM.querySelector("#"+x+D).insertAdjacentHTML("afterend",'<table id="'.concat(x+d,'"></table>')):(g='<div id="'.concat(x).concat(I,'" class="p5Label"><table id="').concat(x).concat(d,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",g)),(h=document.createElement("tr")).id=x+"_lte_"+p,this.dummyDOM.querySelector("#"+x+d).appendChild(h),this.descriptions.labelElements[p]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(p)),this.descriptions.labelElements[p].innerHTML=m)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.map"),l("core-js/modules/es.string.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype._updateGridOutput=function(M){var C,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p="",m=0;for(f in d){var g,x=0;for(g in d[f]){var E='<li id="'.concat(D,"shape").concat(m,'">').concat(d[f][g].color," ").concat(f,",");"line"===f?E+=" location = ".concat(d[f][g].pos,", length = ").concat(d[f][g].length," pixels"):(E+=" location = ".concat(d[f][g].pos),"point"!==f&&(E+=", area = ".concat(d[f][g].area," %")),E+="</li>"),h+=E,x++,m++}p=1<x?"".concat(p," ").concat(x," ").concat(f,"s"):"".concat(p," ").concat(x," ").concat(f)}return{numShapes:[m,p],details:h}}(M,this.ingredients.shapes)).numShapes,f=this.width,h=this.height,d="".concat(d=this.ingredients.colors.background," canvas, ").concat(f," by ").concat(h," pixels, contains ").concat(D[0]),w=d="".concat(d,1===D[0]?" shape: ":" shapes: ").concat(D[1]),I=function(D,d){var f,h,p=0,m="",g=Array.from(Array(10),function(){return Array(10)});for(f in d)for(var x in d[f]){var E;E="line"!==f?'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f,"</a>"):'<a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][x].color," ").concat(f," midpoint</a>"),d[f][x].loc.locY<g.length&&d[f][x].loc.locX<g[d[f][x].loc.locY].length&&(g[d[f][x].loc.locY][d[f][x].loc.locX]=g[d[f][x].loc.locY][d[f][x].loc.locX]?g[d[f][x].loc.locY][d[f][x].loc.locX]+"  "+E:E,p++)}for(h in g){var S,L="<tr>";for(S in g[h])L+="<td>",void 0!==g[h][S]&&(L+=g[h][S]),L+="</td>";m=m+L+"</tr>"}return m}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),I!==C.map.innerHTML&&(C.map.innerHTML=I),b.details!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=b.details),this._accessibleOutputs[M]=C)},Z.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.to-fixed"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(w,I,D){return 10===(I=Math.floor(w[0]/I*10))&&(I-=1),10===(w=Math.floor(w[1]/D*10))&&(w-=1),{locX:I,locY:w}}M.default.prototype.textOutput=function(w){M.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},M.default.prototype.gridOutput=function(w){M.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),w===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},M.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},M.default.prototype._createOutput=function(w,I){var D,d,f,h=this.canvas.id,p=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),"");"Fallback"===I?(D=h+w,this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(h,"_Description"))?this.dummyDOM.querySelector("#".concat(h,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(h)).innerHTML='<div id="'.concat(d,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===I&&(D=h+w+(p=I),this.dummyDOM.querySelector("#".concat(d=h+"accessibleOutput"+I))||(this.dummyDOM.querySelector("#".concat(h,"_Label"))?this.dummyDOM.querySelector("#".concat(h,"_Label")):this.dummyDOM.querySelector("#".concat(h))).insertAdjacentHTML("afterend",'<div id="'.concat(d,'"></div>'))),this._accessibleOutputs[D]={},"textOutput"===w?(p="#".concat(h,"gridOutput").concat(p),f='<div id="'.concat(D,'">Text Output<div id="').concat(D,'Summary" aria-label="text output summary"><p id="').concat(D,'_summary"></p><ul id="').concat(D,'_list"></ul></div><table id="').concat(D,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].list=this.dummyDOM.querySelector("#".concat(D,"_list"))):"gridOutput"===w&&(p="#".concat(h,"textOutput").concat(p),f='<div id="'.concat(D,'">Grid Output<p id="').concat(D,'_summary" aria-label="grid output summary"><table id="').concat(D,'_map" summary="grid output content"></table><ul id="').concat(D,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(p)?this.dummyDOM.querySelector(p).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(d)).innerHTML=f,this._accessibleOutputs[D].map=this.dummyDOM.querySelector("#".concat(D,"_map"))),this._accessibleOutputs[D].shapeDetails=this.dummyDOM.querySelector("#".concat(D,"_shapeDetails")),this._accessibleOutputs[D].summary=this.dummyDOM.querySelector("#".concat(D,"_summary"))},M.default.prototype._updateAccsOutput=function(){var w=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(w+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(w+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(w+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(w+"gridOutputLabel"))},M.default.prototype._accsBackground=function(w){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==w&&(this.ingredients.colors.backgroundRGBA=w,this.ingredients.colors.background=this._rgbColorName(w))},M.default.prototype._accsCanvasColors=function(w,I){"fill"===w?this.ingredients.colors.fillRGBA!==I&&(this.ingredients.colors.fillRGBA=I,this.ingredients.colors.fill=this._rgbColorName(I)):"stroke"===w&&this.ingredients.colors.strokeRGBA!==I&&(this.ingredients.colors.strokeRGBA=I,this.ingredients.colors.stroke=this._rgbColorName(I))},M.default.prototype._accsOutput=function(w,I){"ellipse"===w&&I[2]===I[3]?w="circle":"rectangle"===w&&I[2]===I[3]&&(w="square");var D,d,g,x,E,f={},h=!0,p=(x=I,g="rectangle"===(g=w)||"ellipse"===g||"arc"===g||"circle"===g||"square"===g?(E=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):"triangle"===g?(E=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):"quadrilateral"===g?(E=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):"line"===g?(E=(x[0]+x[2])/2,(x[1]+x[3])/2):(E=x[0],x[1]),[E,g]);if("line"===w?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(I[0],I[1],I[2],I[3])),D=this._getPos(I[0],[1]),d=this._getPos(I[2],[3]),f.loc=b(p,this.width,this.height),f.pos=D===d?"at ".concat(D):"from ".concat(D," to ").concat(d)):("point"===w?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(w,I)),f.pos=this._getPos.apply(this,function C(w){return function(I){if(Array.isArray(I)){for(var D=0,d=new Array(I.length);D<I.length;D++)d[D]=I[D];return d}}(w)||function(I){if(Symbol.iterator in Object(I)||"[object Arguments]"===Object.prototype.toString.call(I))return Array.from(I)}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(p)),f.loc=b(p,this.width,this.height)),this.ingredients.shapes[w]){if(this.ingredients.shapes[w]!==[f]){for(var m in this.ingredients.shapes[w])JSON.stringify(this.ingredients.shapes[w][m])===JSON.stringify(f)&&(h=!1);!0===h&&this.ingredients.shapes[w].push(f)}}else this.ingredients.shapes[w]=[f]},M.default.prototype._getPos=function(d,D){d=new DOMPointReadOnly(d,D),D=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),D=(d=d.matrixTransform(D)).x,d=d.y;var f=this.width*this._pixelDensity,h=this.height*this._pixelDensity;return D<.4*f?d<.4*h?"top left":.6*h<d?"bottom left":"mid left":.6*f<D?d<.4*h?"top right":.6*h<d?"bottom right":"mid right":d<.4*h?"top middle":.6*h<d?"bottom middle":"middle"},M.default.prototype._getArea=function(w,I){var D,d,f=0,h=("arc"===w?(f=(D=((I[5]-I[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*I[2]*I[3]/8,"open"!==I[6]&&"chord"!==I[6]||(d=I[0],x=I[1],h=I[0]+I[2]/2*Math.cos(I[4]).toFixed(2),E=I[1]+I[3]/2*Math.sin(I[4]).toFixed(2),m=I[0]+I[2]/2*Math.cos(I[5]).toFixed(2),p=I[1]+I[3]/2*Math.sin(I[5]).toFixed(2),d=Math.abs(d*(E-p)+h*(p-x)+m*(x-E))/2,D>Math.PI?f+=d:f-=d)):"ellipse"===w||"circle"===w?f=3.14*I[2]/2*I[3]/2:"line"===w||"point"===w?f=0:"quadrilateral"===w?f=Math.abs((I[6]+I[0])*(I[7]-I[1])+(I[0]+I[2])*(I[1]-I[3])+(I[2]+I[4])*(I[3]-I[5])+(I[4]+I[6])*(I[5]-I[7]))/2:"rectangle"===w||"square"===w?f=I[2]*I[3]:"triangle"===w&&(f=Math.abs(I[0]*(I[3]-I[5])+I[2]*(I[5]-I[1])+I[4]*(I[1]-I[3]))/2),this.width*this._pixelDensity),p=this.height*this._pixelDensity,m=[new DOMPoint(0,0),new DOMPoint(h,0),new DOMPoint(h,p),new DOMPoint(0,p)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=m.map(function(S){return S.matrixTransform(g)}),E=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*f/E)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.concat"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype._updateTextOutput=function(M){var C,b,w,I,D,d,f,h;this.dummyDOM.querySelector("#".concat(M,"_summary"))&&(C=this._accessibleOutputs[M],D=(b=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<li><a href="#'.concat(D,"shape").concat(p,'">').concat(d[f][m].color," ").concat(f,"</a>");"line"===f?g+=", ".concat(d[f][m].pos,", ").concat(d[f][m].length," pixels long.</li>"):(g+=", at ".concat(d[f][m].pos),"point"!==f&&(g+=", covering ".concat(d[f][m].area,"% of the canvas")),g+=".</li>"),h+=g,p++}return{numShapes:p,listShapes:h}}(M,this.ingredients.shapes)).numShapes,d=this.ingredients.colors.background,h=this.height,f="Your output is a, ".concat(f=this.width," by ").concat(h," pixels, ").concat(d," canvas containing the following"),w=f=1===D?"".concat(f," shape:"):"".concat(f," ").concat(D," shapes:"),I=function(D,d){var f,h="",p=0;for(f in d)for(var m in d[f]){var g='<tr id="'.concat(D,"shape").concat(p,'"><th>').concat(d[f][m].color," ").concat(f,"</th>");"line"===f?g+="<td>location = ".concat(d[f][m].pos,"</td><td>length = ").concat(d[f][m].length," pixels</td></tr>"):(g+="<td>location = ".concat(d[f][m].pos,"</td>"),"point"!==f&&(g+="<td> area = ".concat(d[f][m].area,"%</td>")),g+="</tr>"),h+=g,p++}return h}(M,this.ingredients.shapes),w!==C.summary.innerHTML&&(C.summary.innerHTML=w),b.listShapes!==C.list.innerHTML&&(C.list.innerHTML=b.listShapes),I!==C.shapeDetails.innerHTML&&(C.shapeDetails.innerHTML=I),this._accessibleOutputs[M]=C)},Z.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(l,be,Z){"use strict";var M=(M=l("./core/main"))&&M.__esModule?M:{default:M};l("./core/constants"),l("./core/environment"),l("./core/friendly_errors/stacktrace"),l("./core/friendly_errors/validate_params"),l("./core/friendly_errors/file_errors"),l("./core/friendly_errors/fes_core"),l("./core/friendly_errors/sketch_reader"),l("./core/helpers"),l("./core/legacy"),l("./core/preload"),l("./core/p5.Element"),l("./core/p5.Graphics"),l("./core/p5.Renderer"),l("./core/p5.Renderer2D"),l("./core/rendering"),l("./core/shim"),l("./core/structure"),l("./core/transform"),l("./core/shape/2d_primitives"),l("./core/shape/attributes"),l("./core/shape/curves"),l("./core/shape/vertex"),l("./accessibility/outputs"),l("./accessibility/textOutput"),l("./accessibility/gridOutput"),l("./accessibility/color_namer"),l("./color/color_conversion"),l("./color/creating_reading"),l("./color/p5.Color"),l("./color/setting"),l("./data/p5.TypedDict"),l("./data/local_storage.js"),l("./dom/dom"),l("./accessibility/describe"),l("./events/acceleration"),l("./events/keyboard"),l("./events/mouse"),l("./events/touch"),l("./image/filters"),l("./image/image"),l("./image/loading_displaying"),l("./image/p5.Image"),l("./image/pixels"),l("./io/files"),l("./io/p5.Table"),l("./io/p5.TableRow"),l("./io/p5.XML"),l("./math/calculation"),l("./math/math"),l("./math/noise"),l("./math/p5.Vector"),l("./math/random"),l("./math/trigonometry"),l("./typography/attributes"),l("./typography/loading_displaying"),l("./typography/p5.Font"),l("./utilities/array_functions"),l("./utilities/conversion"),l("./utilities/string_functions"),l("./utilities/time_date"),l("./webgl/3d_primitives"),l("./webgl/interaction"),l("./webgl/light"),l("./webgl/loading"),l("./webgl/material"),l("./webgl/p5.Camera"),l("./webgl/p5.DataArray"),l("./webgl/p5.Geometry"),l("./webgl/p5.Matrix"),l("./webgl/p5.Quat"),l("./webgl/p5.RendererGL.Immediate"),l("./webgl/p5.RendererGL"),l("./webgl/p5.RendererGL.Retained"),l("./webgl/p5.Framebuffer"),l("./webgl/p5.Shader"),l("./webgl/p5.RenderBuffer"),l("./webgl/p5.Texture"),l("./webgl/text"),l("./core/init"),be.exports=M.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.ColorConversion={_hsbaToHSLA:function(M){var b=M[1],w=M[2],I=(2-b)*w/2;return 0!=I&&(1==I?b=0:I<.5?b/=2-b:b=b*w/(2-2*I)),[M[0],b,I,M[3]]},_hsbaToRGBA:function(M){var C,b,w,I,D,d=6*M[0],f=M[1],h=M[2];return 0===f?[h,h,h,M[3]]:(b=h*(1-f),w=h*(1-f*(d-(C=Math.floor(d)))),f=h*(1-f*(1+C-d)),d=1===C?(I=w,D=h,b):2===C?(I=b,D=h,f):3===C?(I=b,D=w,h):4===C?(I=f,D=b,h):5===C?(I=h,D=b,w):(I=h,D=f,b),[I,D,d,M[3]])},_hslaToHSBA:function(M){var b=M[1],w=M[2],I=w<.5?(1+b)*w:w+b-w*b;return[M[0],b=2*(I-w)/I,I,M[3]]},_hslaToRGBA:function(M){var C,b=6*M[0],w=M[1],I=M[2];return 0===w?[I,I,I,M[3]]:[(C=function(D,d,f){return D<0?D+=6:6<=D&&(D-=6),D<1?d+(f-d)*D:D<3?f:D<4?d+(f-d)*(4-D):d})(2+b,w=2*I-(I=I<.5?(1+w)*I:I+w-I*w),I),C(b,w,I),C(b-2,w,I),M[3]]},_rgbaToHSBA:function(M){var C,b,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d-Math.min(w,I,D);return 0==f?b=C=0:(b=f/d,w===d?C=(I-D)/f:I===d?C=2+(D-w)/f:D===d&&(C=4+(w-I)/f),C<0?C+=6:6<=C&&(C-=6)),[C/6,b,d,M[3]]},_rgbaToHSLA:function(M){var C,b,h,w=M[0],I=M[1],D=M[2],d=Math.max(w,I,D),f=d+(h=Math.min(w,I,D));return 0==(h=d-h)?b=C=0:(b=f<1?h/f:h/(2-f),w===d?C=(I-D)/h:I===d?C=2+(D-w)/h:D===d&&(C=4+(w-I)/h),C<0?C+=6:6<=C&&(C-=6)),[C/6,b,f/2,M[3]]}},Z.default=l=l.default.ColorConversion},{"../core/main":283}],269:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.map"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Color"),l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.alpha=function(d){return b.default._validateParameters("alpha",arguments),this.color(d)._getAlpha()},b.default.prototype.blue=function(d){return b.default._validateParameters("blue",arguments),this.color(d)._getBlue()},b.default.prototype.brightness=function(d){return b.default._validateParameters("brightness",arguments),this.color(d)._getBrightness()},b.default.prototype.color=function(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return b.default._validateParameters("color",h),h[0]instanceof b.default.Color?h[0]:(d=Array.isArray(h[0])?h[0]:h,new b.default.Color(this,d))},b.default.prototype.green=function(d){return b.default._validateParameters("green",arguments),this.color(d)._getGreen()},b.default.prototype.hue=function(d){return b.default._validateParameters("hue",arguments),this.color(d)._getHue()},b.default.prototype.lerpColor=function(d,f,h){b.default._validateParameters("lerpColor",arguments),d instanceof b.default.Color||(d=color(d)),f instanceof b.default.Color||(f=color(f));var p,m,g,x=this._colorMode,E=this._colorMaxes;if(x===w.RGB)m=d.levels.map(function(S){return S/255}),g=f.levels.map(function(S){return S/255});else if(x===w.HSB)d._getBrightness(),f._getBrightness(),m=d.hsba,g=f.hsba;else{if(x!==w.HSL)throw new Error("".concat(x," cannot be used for interpolation."));d._getLightness(),f._getLightness(),m=d.hsla,g=f.hsla}return h=Math.max(Math.min(h,1),0),void 0===this.lerp&&(this.lerp=function(S,L,q){return q*(L-S)+S}),x===w.RGB?p=this.lerp(m[0],g[0],h):(.5<Math.abs(m[0]-g[0])&&(m[0]>g[0]?g[0]+=1:m[0]+=1),1<=(p=this.lerp(m[0],g[0],h))&&--p),d=this.lerp(m[1],g[1],h),f=this.lerp(m[2],g[2],h),m=this.lerp(m[3],g[3],h),this.color(p*=E[x][0],d*=E[x][1],f*=E[x][2],m*=E[x][3])},b.default.prototype.paletteLerp=function(d,f){var h=d[0];if(f<h[1])return this.color(h[0]);for(var p=1;p<d.length;p++){var m,g=d[p];if(f<g[1])return this.lerpColor(this.color((m=d[p-1])[0]),this.color(g[0]),(f-m[1])/(g[1]-m[1]))}return this.color(d[d.length-1][0])},b.default.prototype.lightness=function(d){return b.default._validateParameters("lightness",arguments),this.color(d)._getLightness()},b.default.prototype.red=function(d){return b.default._validateParameters("red",arguments),this.color(d)._getRed()},b.default.prototype.saturation=function(d){return b.default._validateParameters("saturation",arguments),this.color(d)._getSaturation()};var D=b.default;Z.default=D},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(p,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(L){return M(L)}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":M(L)})(S)}p("core-js/modules/es.symbol"),p("core-js/modules/es.symbol.description"),p("core-js/modules/es.symbol.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.iterator"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.get-own-property-descriptor"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.iterator"),p("core-js/modules/es.string.trim"),p("core-js/modules/es.weak-map"),p("core-js/modules/web.dom-collections.iterator"),p("core-js/modules/es.array.includes"),p("core-js/modules/es.array.join"),p("core-js/modules/es.array.map"),p("core-js/modules/es.array.slice"),p("core-js/modules/es.object.to-string"),p("core-js/modules/es.regexp.constructor"),p("core-js/modules/es.regexp.exec"),p("core-js/modules/es.regexp.to-string"),p("core-js/modules/es.string.includes"),p("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=d(p("../core/main")),w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var L=D();if(L&&L.has(S))return L.get(S);var q,J={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in S){var V;Object.prototype.hasOwnProperty.call(S,q)&&((V=G?Object.getOwnPropertyDescriptor(S,q):null)&&(V.get||V.set)?Object.defineProperty(J,q,V):J[q]=S[q])}return J.default=S,L&&L.set(S,J),J}(p("../core/constants")),I=d(p("./color_conversion"));function D(){var S;return"function"!=typeof WeakMap?null:(D=function(){return S},S=new WeakMap)}function d(S){return S&&S.__esModule?S:{default:S}}function f(S,L){for(var q=0;q<L.length;q++){var J=L[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(S,J.key,J)}}var h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},E=(p=/\s*/,/(\d{1,3})/),m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(m.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",E.source,",",E.source,",",E.source,"\\)$"].join(p.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),RGBA:new RegExp(["^rgba\\(",E.source,",",E.source,",",E.source,",",m.source,"\\)$"].join(p.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSL:new RegExp(["^hsl\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSLA:new RegExp(["^hsla\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i"),HSB:new RegExp(["^hsb\\(",E.source,",",g.source,",",g.source,"\\)$"].join(p.source),"i"),HSBA:new RegExp(["^hsba\\(",E.source,",",g.source,",",g.source,",",m.source,"\\)$"].join(p.source),"i")};b.default.Color=function(){function S(G,V){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(G._colorMode,G._colorMaxes),![w.RGB,w.HSL,w.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=S._parseInputs.apply(this,V),this._calculateLevels()}var L,q,J;return L=S,J=[{key:"_parseInputs",value:function(G,V,K,H){var te,Y=arguments.length,we=this.mode,Se=this.maxes[we],oe=[];if(3<=Y){for(oe[0]=G/Se[0],oe[1]=V/Se[1],oe[2]=K/Se[2],oe[3]="number"==typeof H?H/Se[3]:1,te=oe.length-1;0<=te;--te){var ge=oe[te];ge<0?oe[te]=0:1<ge&&(oe[te]=1)}return we===w.HSL?I.default._hslaToRGBA(oe):we===w.HSB?I.default._hsbaToRGBA(oe):oe}if(1===Y&&"string"==typeof G){if(K=G.trim().toLowerCase(),h[K])return S._parseInputs.call(this,h[K]);if(x.HEX3.test(K))return(oe=x.HEX3.exec(K).slice(1).map(function(re){return parseInt(re+re,16)/255}))[3]=1,oe;if(x.HEX6.test(K))return(oe=x.HEX6.exec(K).slice(1).map(function(re){return parseInt(re,16)/255}))[3]=1,oe;if(x.HEX4.test(K))return x.HEX4.exec(K).slice(1).map(function(re){return parseInt(re+re,16)/255});if(x.HEX8.test(K))return x.HEX8.exec(K).slice(1).map(function(re){return parseInt(re,16)/255});if(x.RGB.test(K))return(oe=x.RGB.exec(K).slice(1).map(function(re){return re/255}))[3]=1,oe;if(x.RGB_PERCENT.test(K))return(oe=x.RGB_PERCENT.exec(K).slice(1).map(function(re){return parseFloat(re)/100}))[3]=1,oe;if(x.RGBA.test(K))return x.RGBA.exec(K).slice(1).map(function(re,Q){return 3===Q?parseFloat(re):re/255});if(x.RGBA_PERCENT.test(K))return x.RGBA_PERCENT.exec(K).slice(1).map(function(re,Q){return 3===Q?parseFloat(re):parseFloat(re)/100});if(x.HSL.test(K)?(oe=x.HSL.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:parseInt(re,10)/100}))[3]=1:x.HSLA.test(K)&&(oe=x.HSLA.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:3===Q?parseFloat(re):parseInt(re,10)/100})),(oe=oe.map(function(re){return Math.max(Math.min(re,1),0)})).length)return I.default._hslaToRGBA(oe);if(x.HSB.test(K)?(oe=x.HSB.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:parseInt(re,10)/100}))[3]=1:x.HSBA.test(K)&&(oe=x.HSBA.exec(K).slice(1).map(function(re,Q){return 0===Q?parseInt(re,10)/360:3===Q?parseFloat(re):parseInt(re,10)/100})),oe.length){for(te=oe.length-1;0<=te;--te)oe[te]=Math.max(Math.min(oe[te],1),0);return I.default._hsbaToRGBA(oe)}oe=[1,1,1,1]}else{if(1!==Y&&2!==Y||"number"!=typeof G)throw new Error("".concat(arguments,"is not a valid color representation."));oe[0]=G/Se[2],oe[1]=G/Se[2],oe[2]=G/Se[2],oe[3]="number"==typeof V?V/Se[3]:1,oe=oe.map(function(re){return Math.max(Math.min(re,1),0)})}return oe}}],(q=[{key:"toString",value:function(G){var V=this.levels,K=this._array,H=K[3];switch(G){case"#rrggbb":return"#".concat(V[0]<16?"0".concat(V[0].toString(16)):V[0].toString(16),V[1]<16?"0".concat(V[1].toString(16)):V[1].toString(16),V[2]<16?"0".concat(V[2].toString(16)):V[2].toString(16));case"#rrggbbaa":return"#".concat(V[0]<16?"0".concat(V[0].toString(16)):V[0].toString(16),V[1]<16?"0".concat(V[1].toString(16)):V[1].toString(16),V[2]<16?"0".concat(V[2].toString(16)):V[2].toString(16),V[3]<16?"0".concat(V[3].toString(16)):V[3].toString(16));case"#rgb":return"#".concat(Math.round(15*K[0]).toString(16),Math.round(15*K[1]).toString(16),Math.round(15*K[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*K[0]).toString(16),Math.round(15*K[1]).toString(16),Math.round(15*K[2]).toString(16),Math.round(15*K[3]).toString(16));case"rgb":return"rgb(".concat(V[0],", ",V[1],", ",V[2],")");case"rgb%":return"rgb(".concat((100*K[0]).toPrecision(3),"%, ",(100*K[1]).toPrecision(3),"%, ",(100*K[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*K[0]).toPrecision(3),"%, ",(100*K[1]).toPrecision(3),"%, ",(100*K[2]).toPrecision(3),"%, ",(100*K[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[w.HSB][0],", ",this.hsba[1]*this.maxes[w.HSB][1],", ",this.hsba[2]*this.maxes[w.HSB][2],", ",H,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*H).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[w.HSL][0],", ",this.hsla[1]*this.maxes[w.HSL][1],", ",this.hsla[2]*this.maxes[w.HSL][2],", ",H,")");case"hsla%":return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*H).toPrecision(3),"%)");default:return"rgba(".concat(V[0],",",V[1],",",V[2],",",H,")")}}},{key:"setRed",value:function(G){this._array[0]=G/this.maxes[w.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(G){this._array[1]=G/this.maxes[w.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(G){this._array[2]=G/this.maxes[w.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(G){this._array[3]=G/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var G=this._array,V=this.levels=new Array(G.length),K=G.length-1;0<=K;--K)V[K]=Math.round(255*G[K]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(G,V){this.mode=G,this.maxes=V}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[w.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[w.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[w.RGB][1]}},{key:"_getHue",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[w.HSB][0]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[w.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[w.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[w.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===w.HSB?(this.hsba||(this.hsba=I.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[w.HSB][1]):(this.hsla||(this.hsla=I.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[w.HSL][1])}}])&&f(L.prototype,q),J&&f(L,J),S}(),Z.default=E=b.default.Color},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.fill"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Color"),b.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},b.default.prototype.endClip=function(){this._renderer.endClip()},b.default.prototype.clip=function(d,f){this._renderer.beginClip(f),d(),this._renderer.endClip(f)},b.default.prototype.background=function(){var d;return(d=this._renderer).background.apply(d,arguments),this},b.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},b.default.prototype.colorMode=function(d,f,h,p,m){return b.default._validateParameters("colorMode",arguments),d!==w.RGB&&d!==w.HSB&&d!==w.HSL||(this._colorMode=d,d=this._colorMaxes[d],2===arguments.length?(d[0]=f,d[1]=f,d[2]=f,d[3]=f):4===arguments.length?(d[0]=f,d[1]=h,d[2]=p):5===arguments.length&&(d[0]=f,d[1]=h,d[2]=p,d[3]=m)),this},b.default.prototype.fill=function(){var d;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(d=this._renderer).fill.apply(d,arguments),this},b.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},b.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},b.default.prototype.stroke=function(){var d;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(d=this._renderer).stroke.apply(d,arguments),this},b.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},b.default.prototype.noErase=function(){return this._renderer.noErase(),this};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.QUADRATIC=Z.LINEAR=Z._CTX_MIDDLE=Z._DEFAULT_LEADMULT=Z._DEFAULT_TEXT_FILL=Z.WORD=Z.CHAR=Z.BOLDITALIC=Z.BOLD=Z.ITALIC=Z.NORMAL=Z.BLUR=Z.ERODE=Z.DILATE=Z.POSTERIZE=Z.INVERT=Z.OPAQUE=Z.GRAY=Z.THRESHOLD=Z.BURN=Z.DODGE=Z.SOFT_LIGHT=Z.HARD_LIGHT=Z.OVERLAY=Z.REPLACE=Z.SCREEN=Z.MULTIPLY=Z.EXCLUSION=Z.SUBTRACT=Z.DIFFERENCE=Z.LIGHTEST=Z.DARKEST=Z.ADD=Z.REMOVE=Z.BLEND=Z.UP_ARROW=Z.TAB=Z.SHIFT=Z.RIGHT_ARROW=Z.RETURN=Z.OPTION=Z.LEFT_ARROW=Z.ESCAPE=Z.ENTER=Z.DOWN_ARROW=Z.DELETE=Z.CONTROL=Z.BACKSPACE=Z.ALT=Z.AUTO=Z.HSL=Z.HSB=Z.RGB=Z.MITER=Z.BEVEL=Z.ROUND=Z.SQUARE=Z.PROJECT=Z.PIE=Z.CHORD=Z.OPEN=Z.CLOSE=Z.TESS=Z.QUAD_STRIP=Z.QUADS=Z.TRIANGLE_STRIP=Z.TRIANGLE_FAN=Z.TRIANGLES=Z.LINE_LOOP=Z.LINE_STRIP=Z.LINES=Z.POINTS=Z.BASELINE=Z.BOTTOM=Z.TOP=Z.CENTER=Z.LEFT=Z.RIGHT=Z.RADIUS=Z.CORNERS=Z.CORNER=Z.RAD_TO_DEG=Z.DEG_TO_RAD=Z.RADIANS=Z.DEGREES=Z.TWO_PI=Z.TAU=Z.QUARTER_PI=Z.PI=Z.HALF_PI=Z.WAIT=Z.TEXT=Z.MOVE=Z.HAND=Z.CROSS=Z.ARROW=Z.WEBGL2=Z.WEBGL=Z.P2D=Z.VERSION=void 0,Z.RGBA=Z.HALF_FLOAT=Z.FLOAT=Z.UNSIGNED_INT=Z.UNSIGNED_BYTE=Z.COVER=Z.CONTAIN=Z.FALLBACK=Z.LABEL=Z.AXES=Z.GRID=Z._DEFAULT_FILL=Z._DEFAULT_STROKE=Z.PORTRAIT=Z.LANDSCAPE=Z.SMOOTH=Z.FLAT=Z.MIRROR=Z.CLAMP=Z.REPEAT=Z.NEAREST=Z.IMAGE=Z.IMMEDIATE=Z.TEXTURE=Z.FILL=Z.STROKE=Z.CURVE=Z.BEZIER=void 0;var M=Math.PI,C=(Z.VERSION="1.11.3",Z.P2D="p2d",Z.WEBGL="webgl",Z.WEBGL2="webgl2",Z.ARROW="default",Z.CROSS="crosshair",Z.HAND="pointer",Z.MOVE="move",Z.TEXT="text",Z.WAIT="wait",M/2);Z.HALF_PI=C,Z.PI=C=M,Z.QUARTER_PI=C=M/4,Z.TAU=C=2*M,Z.TWO_PI=C=2*M,Z.DEGREES="degrees",Z.RADIANS="radians",Z.DEG_TO_RAD=C=M/180,Z.RAD_TO_DEG=C=180/M,Z.CORNER="corner",Z.CORNERS="corners",Z.RADIUS="radius",Z.RIGHT="right",Z.LEFT="left",Z.CENTER="center",Z.TOP="top",Z.BOTTOM="bottom",Z.BASELINE="alphabetic",Z.POINTS=0,Z.LINES=1,Z.LINE_STRIP=3,Z.LINE_LOOP=2,Z.TRIANGLES=4,Z.TRIANGLE_FAN=6,Z.TRIANGLE_STRIP=5,Z.QUADS="quads",Z.QUAD_STRIP="quad_strip",Z.TESS="tess",Z.CLOSE="close",Z.OPEN="open",Z.CHORD="chord",Z.PIE="pie",Z.PROJECT="square",Z.SQUARE="butt",Z.ROUND="round",Z.BEVEL="bevel",Z.MITER="miter",Z.RGB="rgb",Z.HSB="hsb",Z.HSL="hsl",Z.AUTO="auto",Z.ALT=18,Z.BACKSPACE=8,Z.CONTROL=17,Z.DELETE=46,Z.DOWN_ARROW=40,Z.ENTER=13,Z.ESCAPE=27,Z.LEFT_ARROW=37,Z.OPTION=18,Z.RETURN=13,Z.RIGHT_ARROW=39,Z.SHIFT=16,Z.TAB=9,Z.UP_ARROW=38,Z.BLEND="source-over",Z.REMOVE="destination-out",Z.ADD="lighter",Z.DARKEST="darken",Z.LIGHTEST="lighten",Z.DIFFERENCE="difference",Z.SUBTRACT="subtract",Z.EXCLUSION="exclusion",Z.MULTIPLY="multiply",Z.SCREEN="screen",Z.REPLACE="copy",Z.OVERLAY="overlay",Z.HARD_LIGHT="hard-light",Z.SOFT_LIGHT="soft-light",Z.DODGE="color-dodge",Z.BURN="color-burn",Z.THRESHOLD="threshold",Z.GRAY="gray",Z.OPAQUE="opaque",Z.INVERT="invert",Z.POSTERIZE="posterize",Z.DILATE="dilate",Z.ERODE="erode",Z.BLUR="blur",Z.NORMAL="normal",Z.ITALIC="italic",Z.BOLD="bold",Z.BOLDITALIC="bold italic",Z.CHAR="CHAR",Z.WORD="WORD",Z._DEFAULT_TEXT_FILL="#000000",Z._DEFAULT_LEADMULT=1.25,Z._CTX_MIDDLE="middle",Z.LINEAR="linear",Z.QUADRATIC="quadratic",Z.BEZIER="bezier",Z.CURVE="curve",Z.STROKE="stroke",Z.FILL="fill",Z.TEXTURE="texture",Z.IMMEDIATE="immediate",Z.IMAGE="image",Z.NEAREST="nearest",Z.REPEAT="repeat",Z.CLAMP="clamp",Z.MIRROR="mirror",Z.FLAT="flat",Z.SMOOTH="smooth",Z.LANDSCAPE="landscape",Z.PORTRAIT="portrait",Z._DEFAULT_STROKE="#000000",Z._DEFAULT_FILL="#FFFFFF",Z.GRID="grid",Z.AXES="axes",Z.LABEL="label",Z.FALLBACK="fallback",Z.CONTAIN="contain",Z.COVER="cover",Z.UNSIGNED_BYTE="unsigned-byte",Z.UNSIGNED_INT="unsigned-int",Z.FLOAT="float",Z.HALF_FLOAT="half-float",Z.RGBA="rgba"},{}],273:[function(l,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function C(m){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.search"),l("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(w=l("./main"))&&w.__esModule?w:{default:w},w=function(m){if(m&&m.__esModule)return m;if(null===m||"object"!==C(m)&&"function"!=typeof m)return{default:m};var g=I();if(g&&g.has(m))return g.get(m);var x,E={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in m){var L;Object.prototype.hasOwnProperty.call(m,x)&&((L=S?Object.getOwnPropertyDescriptor(m,x):null)&&(L.get||L.set)?Object.defineProperty(E,x,L):E[x]=m[x])}return E.default=m,g&&g.set(m,E),E}(l("./constants"));function I(){var m;return"function"!=typeof WeakMap?null:(I=function(){return m},m=new WeakMap)}var D=[w.ARROW,w.CROSS,w.HAND,w.MOVE,w.TEXT,w.WAIT],d=(b.default.prototype._frameRate=0,b.default.prototype._lastFrameTime=window.performance.now(),b.default.prototype._targetFrameRate=60,window.print),f=!1;function h(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function p(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}b.default.prototype.print=function(){var m;arguments.length?(m=console).log.apply(m,arguments):f||(d(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(f=!0))},b.default.prototype.frameCount=0,b.default.prototype.deltaTime=0,b.default.prototype.focused=document.hasFocus(),b.default.prototype.cursor=function(m,g,x){var E,S="auto",L=this._curElement.elt;D.includes(m)?S=m:"string"==typeof m&&(E="",g&&x&&"number"==typeof g&&"number"==typeof x&&(E="".concat(g," ").concat(x)),S="http://"===m.substring(0,7)||"https://"===m.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(m)?"url(".concat(m,") ").concat(E,", auto"):m),L.style.cursor=S},b.default.prototype.frameRate=function(m){return b.default._validateParameters("frameRate",arguments),"number"!=typeof m||m<0?this._frameRate:(this._setProperty("_targetFrameRate",m),0===m&&this._setProperty("_frameRate",m),this)},b.default.prototype.getFrameRate=function(){return this.frameRate()},b.default.prototype.setFrameRate=function(m){return this.frameRate(m)},b.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},b.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},b.default.prototype.webglVersion=w.P2D,b.default.prototype.displayWidth=screen.width,b.default.prototype.displayHeight=screen.height,b.default.prototype.windowWidth=0,b.default.prototype.windowHeight=0,b.default.prototype._onresize=function(m){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p());var g=this._isGlobal?window:this;"function"!=typeof g.windowResized||void 0===(g=g.windowResized(m))||g||m.preventDefault()},b.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",h()),this._setProperty("windowHeight",p())},b.default.prototype.width=0,b.default.prototype.height=0,b.default.prototype.fullscreen=function(m){if(b.default._validateParameters("fullscreen",arguments),void 0===m)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(m){if(m=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");m.requestFullscreen?m.requestFullscreen():m.mozRequestFullScreen?m.mozRequestFullScreen():m.webkitRequestFullscreen?m.webkitRequestFullscreen():m.msRequestFullscreen&&m.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},b.default.prototype.pixelDensity=function(m){var g;return b.default._validateParameters("pixelDensity",arguments),"number"==typeof m?(m!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=m),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},b.default.prototype.displayDensity=function(){return window.devicePixelRatio},b.default.prototype.getURL=function(){return location.href},b.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(m){return""!==m})},b.default.prototype.getURLParams=function(){for(var m,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};null!=(m=g.exec(location.search));)m.index===g.lastIndex&&g.lastIndex++,x[m[1]]=m[2];return x},Z.default=l=b.default},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.starts-with"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(D=l("../main"))&&D.__esModule?D:{default:D};function C(d,f){f=f||console.log.bind(console),b||I(),b.some(function(h){var p;if(d.message&&null!==d.message.match("\\W?".concat(h.name,"\\W")))return p="function"===h.type?"".concat(h.name,"()"):h.name,f("Did you just try to use p5.js's ".concat(p," ").concat(h.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(w)),!0})}l("../internationalization");var b=null,I=null,w=(M.default._friendlyError=M.default._checkForUserDefinedFunctions=M.default._fesErrorMonitor=function(){},b=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),D=(I=function(){function d(h){return Object.getOwnPropertyNames(h).filter(function(p){return"_"!==p[0]&&!(p in f)&&(f[p]=!0)}).map(function(p){var m="function"==typeof h[p]?"function":p===p.toUpperCase()?"constant":"variable";return{name:p,type:m}})}var f={};(b=[].concat(d(M.default.prototype),d(l("../constants")))).sort(function(h,p){return p.name.length-h.name.length})},M.default.prototype._helpForMisusedAtTopLevelCode=C,"complete"!==document.readyState&&(window.addEventListener("error",C,!1),window.addEventListener("load",function(){window.removeEventListener("error",C,!1)})),M.default);Z.default=D},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(M=l("../main"))&&M.__esModule?M:{default:M};l("../internationalization"),M.default._friendlyFileLoadError=function(){},Z.default=l=M.default},{"../internationalization":281,"../main":283}],276:[function(l,be,Z){"use strict";function M(z){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(z)}function C(z){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(ye){return M(ye)}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":M(ye)})(z)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=function re(z){return z&&z.__esModule?z:{default:z}}(l("../main"));function oe(){var z;return"function"!=typeof WeakMap?null:(oe=function(){return z},z=new WeakMap)}l("../internationalization"),function ge(z){if(z&&z.__esModule)return z;if(null===z||"object"!==C(z)&&"function"!=typeof z)return{default:z};var ye=oe();if(ye&&ye.has(z))return ye.get(z);var Ue,Je,vt={},Ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ue in z)Object.prototype.hasOwnProperty.call(z,Ue)&&((Je=Ct?Object.getOwnPropertyDescriptor(z,Ue):null)&&(Je.get||Je.set)?Object.defineProperty(vt,Ue,Je):vt[Ue]=z[Ue]);return vt.default=z,ye&&ye.set(z,vt),vt}(l("../constants")),b.default._fesCodeReader=function(){},Z.default=b.default},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(l,be,Z){"use strict";function M(){var C=/(^|@)\S+:\d+/,b=/^\s*at .*(\S+:\d+|\(native\))/m,w=/^(eval@)?(\[native code])?$/;return{parse:function(I){return void 0!==I.stacktrace||void 0!==I["opera#sourceloc"]?this.parseOpera(I):I.stack&&I.stack.match(b)?this.parseV8OrIE(I):I.stack?this.parseFFOrSafari(I):void 0},extractLocation:function(I){return-1===I.indexOf(":")?[I]:[(I=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(I.replace(/[()]/g,"")))[1],I[2]||void 0,I[3]||void 0]},parseV8OrIE:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(b)},this).map(function(D){var f=(d=(D=-1<D.indexOf("(eval ")?D.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):D).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),d=(d=f?d.replace(f[0],""):d).split(/\s+/).slice(1);return f=this.extractLocation(f?f[1]:d.pop()),{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseFFOrSafari:function(I){return I.stack.split("\n").filter(function(D){return!D.match(w)},this).map(function(D){var d,f;return-1===(D=-1<D.indexOf(" > eval")?D.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):D).indexOf("@")&&-1===D.indexOf(":")?{functionName:D}:{functionName:(f=D.match(d=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(D.replace(d,"")))[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)},parseOpera:function(I){return!I.stacktrace||-1<I.message.indexOf("\n")&&I.message.split("\n").length>I.stacktrace.split("\n").length?this.parseOpera9(I):I.stack?this.parseOpera11(I):this.parseOpera10(I)},parseOpera9:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)/i,d=I.message.split("\n"),f=[],h=2,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera10:function(I){for(var D=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=I.stacktrace.split("\n"),f=[],h=0,p=d.length;h<p;h+=2){var m=D.exec(d[h]);m&&f.push({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:d[h]})}return f},parseOpera11:function(I){return I.stack.split("\n").filter(function(D){return!!D.match(C)&&!D.match(/^Error created at/)},this).map(function(D){var d,h=D.split("@"),f=this.extractLocation(h.pop());return{functionName:(h=h.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(d=h.match(/\(([^)]*)\)/)?h.replace(/^[^(]+\(([^)]*)\)$/,"$1"):d)||"[arguments not available]"===d?void 0:d.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:D}},this)}}}l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../main"))&&l.__esModule?l:{default:l}).default._getErrorStackParser=function(){return new M},Z.default=l=l.default},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(l,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(C=l("../main"))&&C.__esModule?C:{default:C};function b(){var I;return"function"!=typeof WeakMap?null:(b=function(){return I},I=new WeakMap)}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}(function(I){if(!(I&&I.__esModule||null===I||"object"!==w(I)&&"function"!=typeof I)){var D=b();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}f.default=I,D&&D.set(I,f)}})(l("../constants")),l("../internationalization"),C.default._validateParameters=C.default._clearValidateParamsCache=function(){},Z.default=l=C.default},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(l,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}function C(I){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=function(I){if(I&&I.__esModule)return I;if(null===I||"object"!==C(I)&&"function"!=typeof I)return{default:I};var D=w();if(D&&D.has(I))return D.get(I);var d,f={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(d in I){var p;Object.prototype.hasOwnProperty.call(I,d)&&((p=h?Object.getOwnPropertyDescriptor(I,d):null)&&(p.get||p.set)?Object.defineProperty(f,d,p):f[d]=I[d])}return f.default=I,D&&D.set(I,f),f}(l("./constants"));function w(){var I;return"function"!=typeof WeakMap?null:(w=function(){return I},I=new WeakMap)}Z.default={modeAdjust:function(I,D,d,f,h){var p;return h===b.CORNER?p={x:I,y:D,w:Math.abs(d),h:Math.abs(f)}:h===b.CORNERS?p={x:Math.min(I,d),y:Math.min(D,f),w:Math.abs(d-I),h:Math.abs(f-D)}:h===b.RADIUS?p={x:I-(d=Math.abs(d)),y:D-(f=Math.abs(f)),w:2*d,h:2*f}:h===b.CENTER&&(p={x:I-.5*(d=Math.abs(d)),y:D-.5*(f=Math.abs(f)),w:d,h:f}),p}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(l,be,Z){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(C=l("../core/main"))&&C.__esModule?C:{default:C};l("./internationalization");var C=Promise.resolve();Promise.all([new Promise(function(b,w){"complete"===document.readyState?b():window.addEventListener("load",b,!1)}),C]).then(function(){var b;void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(b=new Event("p5Ready"),window.dispatchEvent(b),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!M.default.instance&&new M.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(l,be,Z){"use strict";l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.setTranslatorLanguage=Z.currentTranslatorLanguage=Z.availableTranslatorLanguages=Z.initialize=Z.translator=void 0;var M,b=I(l("i18next")),w=I(l("i18next-browser-languagedetector"));function I(f){return f&&f.__esModule?f:{default:f}}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var d=function(){function f(g,x){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(g,x)}var h,p;return h=f,(p=[{key:"fetchWithTimeout",value:function(g,x){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(g,x),new Promise(function(S,L){return setTimeout(function(){return L(new Error("timeout"))},E)})])}},{key:"init",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=g,this.options=x}},{key:"read",value:function(g,x,E){var S=this.options.loadPath;g===this.options.fallback?E(null,M[g][x]):undefined.includes(g)?(S=this.services.interpolator.interpolate(S,{lng:g,ns:x}),this.loadUrl(S,E)):E("Not found",!1)}},{key:"loadUrl",value:function(g,x){this.fetchWithTimeout(g).then(function(E){if(E.ok)return E.json();throw new Error("failed loading ".concat(g))},function(){throw new Error("failed loading ".concat(g))}).then(function(E){return x(null,E)}).catch(x)}}])&&D(h.prototype,p),f}();d.type="backend",Z.translator=function(f,h){console.debug("p5.js translator called before translations were loaded"),b.default.t(f,h)},Z.initialize=function(){return b.default.use(w.default).use(d).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:M}).then(function(f){Z.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},Z.availableTranslatorLanguages=function(){return b.default.languages},Z.currentTranslatorLanguage=function(f){return b.default.language},Z.setTranslatorLanguage=function(f){return b.default.changeLanguage(f||void 0,function(h){return console.debug("Translations failed to load (".concat(h,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},l.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},l.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},l.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},Z.default=l=l.default},{"./main":283}],283:[function(l,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-names"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,l("./shim");var b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var D,d=function(){function f(g,S){var E=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=S,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},S=Object.getOwnPropertyNames(f.prototype._registeredMethods);var L=!0,q=!1,J=void 0;try{for(var G,V=S[Symbol.iterator]();!(L=(G=V.next()).done);L=!0){var K=G.value;this._registeredMethods[K]=f.prototype._registeredMethods[K].slice()}}catch(Q){q=!0,J=Q}finally{try{L||null==V.return||V.return()}finally{if(q)throw J}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),f.prototype.callRegisteredHooksFor=function(Q){var fe=this||f.prototype,De=this._isGlobal?window:this;if(fe._registeredMethods.hasOwnProperty(Q)){fe=fe._registeredMethods[Q];var it=!0,le=void(Q=!1);try{for(var z,ye=fe[Symbol.iterator]();!(it=(z=ye.next()).done);it=!0){var Ue=z.value;"function"==typeof Ue&&Ue.call(De)}}catch(Ct){Q=!0,le=Ct}finally{try{it||null==ye.return||ye.return()}finally{if(Q)throw le}}}},this._start=function(){E._userNode&&"string"==typeof E._userNode&&(E._userNode=document.getElementById(E._userNode));var Q=E._isGlobal?window:E;if(Q.preload){E.callRegisteredHooksFor("beforePreload");var fe,De=document.getElementById(E._loadingScreenId),it=(De||((De=document.createElement("div")).innerHTML="Loading...",De.style.position="absolute",De.id=E._loadingScreenId,(E._userNode||document.body).appendChild(De)),E._preloadMethods);for(fe in it){it[fe]=it[fe]||f;var le=it[fe];le!==f.prototype&&le!==f||(E._isGlobal&&(window[fe]=E._wrapPreload(E,fe)),le=E),E._registeredPreloadMethods[fe]=le[fe],le[fe]=E._wrapPreload(le,fe)}Q.preload(),E._runIfPreloadsAreDone()}else E._setup(),E._recording||E._draw()},this._runIfPreloadsAreDone=function(){var Q,fe=this._isGlobal?window:this;0===fe._preloadCount&&((Q=document.getElementById(fe._loadingScreenId))&&Q.parentNode.removeChild(Q),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),fe._setup(),this._recording||fe._draw()))},this._decrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||"function"!=typeof Q.preload||(Q._setProperty("_preloadCount",Q._preloadCount-1),Q._runIfPreloadsAreDone())},this._wrapPreload=function(Q,fe){var De=this;return function(){De._incrementPreload();for(var it=arguments.length,le=new Array(it),z=0;z<it;z++)le[z]=arguments[z];return De._registeredPreloadMethods[fe].apply(Q,le)}},this._incrementPreload=function(){var Q=this._isGlobal?window:this;Q._preloadDone||Q._setProperty("_preloadCount",Q._preloadCount+1)},this._setup=function(){E.callRegisteredHooksFor("beforeSetup"),E.createCanvas(E._defaultCanvasSize.width,E._defaultCanvasSize.height,"p2d");var Q=E._isGlobal?window:E;if("function"==typeof Q.preload)for(var fe in E._preloadMethods)Q[fe]=E._preloadMethods[fe][fe],Q[fe]&&E&&(Q[fe]=Q[fe].bind(E));E._millisStart=window.performance.now(),Q._preloadDone=!0,"function"==typeof Q.setup&&Q.setup();var De=document.getElementsByTagName("canvas"),it=!0,le=!1,z=void 0;try{for(var ye,Ue=De[Symbol.iterator]();!(it=(ye=Ue.next()).done);it=!0){var Je=ye.value;"true"===Je.dataset.hidden&&(Je.style.visibility="",delete Je.dataset.hidden)}}catch(vt){le=!0,z=vt}finally{try{it||null==Ue.return||Ue.return()}finally{if(le)throw z}}E._lastTargetFrameTime=window.performance.now(),E._lastRealFrameTime=window.performance.now(),E._setupDone=!0,(E._accessibleOutputs.grid||E._accessibleOutputs.text)&&E._updateAccsOutput(),E.callRegisteredHooksFor("afterSetup")},this._draw=function(fe){fe=fe||window.performance.now();var it=1e3/E._targetFrameRate;(!E._loop||it-5<=fe-E._lastTargetFrameTime)&&(E.deltaTime=fe-E._lastRealFrameTime,E._setProperty("deltaTime",E.deltaTime),E._frameRate=1e3/E.deltaTime,E.redraw(),E._lastTargetFrameTime=Math.max(E._lastTargetFrameTime+it,fe),E._lastRealFrameTime=fe,void 0!==E._updateMouseCoords&&(E._updateMouseCoords(),E._setProperty("movedX",0),E._setProperty("movedY",0))),E._loop&&(E._requestAnimId=window.requestAnimationFrame(E._draw))},this._setProperty=function(Q,fe){E[Q]=fe,E._isGlobal&&(window[Q]=fe)},this.remove=function(){if(E._startListener&&window.removeEventListener("load",E._startListener,!1),(Q=document.getElementById(E._loadingScreenId))&&(Q.parentNode.removeChild(Q),E._incrementPreload()),E._curElement){for(var fe in E._loop=!1,E._requestAnimId&&window.cancelAnimationFrame(E._requestAnimId),E._events)window.removeEventListener(fe,E._events[fe]);var De=!0,Q=!1,it=void 0;try{for(var le,z=E._elements[Symbol.iterator]();!(De=(le=z.next()).done);De=!0){var ye,Ue=le.value;for(ye in Ue.elt&&Ue.elt.parentNode&&Ue.elt.parentNode.removeChild(Ue.elt),Ue._events)Ue.elt.removeEventListener(ye,Ue._events[ye])}}catch(_t){Q=!0,it=_t}finally{try{De||null==z.return||z.return()}finally{if(Q)throw it}}var Je=E;E._registeredMethods.remove.forEach(function(_t){void 0!==_t&&_t.call(Je)})}if(E._isGlobal){for(var vt in f.prototype)try{delete window[vt]}catch{window[vt]=void 0}for(var Ct in E)if(E.hasOwnProperty(Ct))try{delete window[Ct]}catch{window[Ct]=void 0}f.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(Q){void 0!==Q&&Q.call(this)},this),this._setupPromisePreloads();var H,te,Y=this._createFriendlyGlobalFunctionBinder();if(g)g(this),f._checkForUserDefinedFunctions(this);else{for(var we in this._isGlobal=!0,f.instance=this,f.prototype)"function"==typeof f.prototype[we]?(H=we.substring(2),this._events.hasOwnProperty(H)||(Math.hasOwnProperty(we)&&Math[we]===f.prototype[we]?Y(we,f.prototype[we]):Y(we,f.prototype[we].bind(this)))):Y(we,f.prototype[we]);for(var Se in this)this.hasOwnProperty(Se)&&Y(Se,this[Se])}for(te in this._events){var oe=this["_on".concat(te)];oe&&(oe=oe.bind(this),window.addEventListener(te,oe,{passive:!1}),this._events[te]=oe)}function ge(){E._setProperty("focused",!0)}function re(){E._setProperty("focused",!1)}window.addEventListener("focus",ge),window.addEventListener("blur",re),this.registerMethod("remove",function(){window.removeEventListener("focus",ge),window.removeEventListener("blur",re)}),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var h,p;return h=f,(p=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=b.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(g,x){f.prototype._preloadMethods.hasOwnProperty(g)||(f.prototype._preloadMethods[g]=x)}},{key:"registerMethod",value:function(g,x){var E=this||f.prototype;E._registeredMethods.hasOwnProperty(g)||(E._registeredMethods[g]=[]),E._registeredMethods[g].push(x)}},{key:"unregisterMethod",value:function(g,x){var E=this||f.prototype;if(E._registeredMethods.hasOwnProperty(g)){for(var S=E._registeredMethods[g],L=[],q=0;q<S.length;q++)S[q]===x&&L.push(q);for(var J=L.length-1;0<=J;J--)S.splice(L[J],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},x=g.globalObject||window;return g.log||console.log.bind(console),function(E,S){x[E]=S}}}])&&I(h.prototype,p),f}();for(D in d.instance=null,d.disableFriendlyErrors=!1,b)d.prototype[D]=b[D];d.VERSION=b.VERSION,d.prototype._preloadMethods={loadJSON:d.prototype,loadImage:d.prototype,loadStrings:d.prototype,loadXML:d.prototype,loadBytes:d.prototype,loadTable:d.prototype,loadFont:d.prototype,loadModel:d.prototype,loadShader:d.prototype},d.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},d.prototype._registeredPreloadMethods={},Z.default=d},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Element=function(){function b(d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.elt=d,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var w,I,D;return w=b,D=[{key:"_adjustListener",value:function(d,f,h){return!1===f?M.default.Element._detachListener(d,h):M.default.Element._attachListener(d,f,h),this}},{key:"_attachListener",value:function(d,f,h){h._events[d]&&M.default.Element._detachListener(d,h),f=f.bind(h),h.elt.addEventListener(d,f,!1),h._events[d]=f}},{key:"_detachListener",value:function(d,f){f.elt.removeEventListener(d,f._events[d],!1),f._events[d]=null}}],(I=[{key:"parent",value:function(d){return void 0===d?this.elt.parentNode:("string"==typeof d?("#"===d[0]&&(d=d.substring(1)),d=document.getElementById(d)):d instanceof M.default.Element&&(d=d.elt),d.appendChild(this.elt),this)}},{key:"id",value:function(d){return void 0===d?this.elt.id:(this.elt.id=d,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(d){return void 0===d?this.elt.className:(this.elt.className=d,this)}},{key:"mousePressed",value:function(d){return M.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),d.call(this,f)},this),this}},{key:"doubleClicked",value:function(d){return M.default.Element._adjustListener("dblclick",d,this),this}},{key:"mouseWheel",value:function(d){return M.default.Element._adjustListener("wheel",d,this),this}},{key:"mouseReleased",value:function(d){return M.default.Element._adjustListener("mouseup",d,this),this}},{key:"mouseClicked",value:function(d){return M.default.Element._adjustListener("click",d,this),this}},{key:"mouseMoved",value:function(d){return M.default.Element._adjustListener("mousemove",d,this),this}},{key:"mouseOver",value:function(d){return M.default.Element._adjustListener("mouseover",d,this),this}},{key:"mouseOut",value:function(d){return M.default.Element._adjustListener("mouseout",d,this),this}},{key:"touchStarted",value:function(d){return M.default.Element._adjustListener("touchstart",d,this),this}},{key:"touchMoved",value:function(d){return M.default.Element._adjustListener("touchmove",d,this),this}},{key:"touchEnded",value:function(d){return M.default.Element._adjustListener("touchend",d,this),this}},{key:"dragOver",value:function(d){return M.default.Element._adjustListener("dragover",d,this),this}},{key:"dragLeave",value:function(d){return M.default.Element._adjustListener("dragleave",d,this),this}},{key:"_setProperty",value:function(d,f){this[d]=f}}])&&C(w.prototype,I),D&&C(w,D),b}(),Z.default=l=M.default.Element},{"./main":283}],285:[function(l,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(g=l("./main"))&&g.__esModule?g:{default:g},w=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=I();if(E&&E.has(x))return E.get(x);var S,L={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(L,S,J):L[S]=x[S])}return L.default=x,E&&E.set(x,L),L}(l("./constants"));function I(){var x;return"function"!=typeof WeakMap?null:(I=function(){return x},x=new WeakMap)}function D(x,E){for(var S=0;S<E.length;S++){var L=E[S];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,L){return S.__proto__=L,S})(x,E)}function h(x,E){return!E||"object"!==C(E)&&"function"!=typeof E?p(x):E}function p(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function m(x){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}b.default.Graphics=function(x){var E=q;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var L=function f(x){return function(){var E,S=m(x);return h(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=m(this).constructor,Reflect.construct(S,arguments,E)):S.apply(this,arguments))}}(q);function q(J,G,Se,K,H){var te;if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");we=H||document.createElement("canvas"),(te=L.call(this,we,K)).canvas=we;var Y,we=Se||w.P2D;for(Y in Se=K._userNode||document.body,H||Se.appendChild(te.canvas),b.default.prototype)te[Y]||(te[Y]="function"==typeof b.default.prototype[Y]?b.default.prototype[Y].bind(p(te)):b.default.prototype[Y]);return b.default.prototype._initializeInstanceVariables.apply(p(te)),te.width=J,te.height=G,te._pixelDensity=K._pixelDensity,we===w.WEBGL?(te._renderer=new b.default.RendererGL(te.canvas,p(te),!1),J=(H=te._renderer._adjustDimensions(J,G)).adjustedWidth,G=H.adjustedHeight):te._renderer=new b.default.Renderer2D(te.canvas,p(te),!1),K._elements.push(p(te)),Object.defineProperty(p(te),"deltaTime",{get:function(){return this._pInst.deltaTime}}),te._renderer.resize(J,G),te._renderer._applyDefaults(),h(te,p(te))}return E=q,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var J,G=this._pInst._elements.indexOf(this);for(J in-1!==G&&this._pInst._elements.splice(G,1),this._events)this.elt.removeEventListener(J,this._events[J]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(J){return new b.default.Framebuffer(this,J)}}])&&D(E.prototype,x),q}(b.default.Element);var g=b.default.Graphics;Z.default=g},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(l,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(m=l("./main"))&&m.__esModule?m:{default:m},b=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==I(x)&&"function"!=typeof x)return{default:x};var E=w();if(E&&E.has(x))return E.get(x);var S,L={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(L,S,J):L[S]=x[S])}return L.default=x,E&&E.set(x,L),L}(l("../core/constants"));function w(){var x;return"function"!=typeof WeakMap?null:(w=function(){return x},x=new WeakMap)}function I(x){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}function D(x,E){for(var S=0;S<E.length;S++){var L=E[S];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}function d(x,E){return(d=Object.setPrototypeOf||function(S,L){return S.__proto__=L,S})(x,E)}function h(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function p(x){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)})(x)}var m=function(x){var E=q;if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),x&&d(E,x);var L=function f(x){return function(){var E,S,L=p(x);return E=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(E=p(this).constructor,Reflect.construct(L,arguments,E)):L.apply(this,arguments),L=this,!(S=E)||"object"!==I(S)&&"function"!=typeof S?h(L):S}}(q);function q(J,G,V){var K;if(this instanceof q)return(K=L.call(this,J,G)).canvas=J,K._pixelsState=G,V?(K._isMainCanvas=!0,K._pInst._setProperty("_curElement",h(K)),K._pInst._setProperty("canvas",K.canvas),K._pInst._setProperty("width",K.width),K._pInst._setProperty("height",K.height)):(K.canvas.style.display="none",K._styles=[]),K._clipping=!1,K._clipInvert=!1,K._textSize=12,K._textLeading=15,K._textFont="sans-serif",K._textStyle=b.NORMAL,K._textAscent=null,K._textDescent=null,K._textAlign=b.LEFT,K._textBaseline=b.BASELINE,K._textWrap=b.WORD,K._rectMode=b.CORNER,K._ellipseMode=b.CENTER,K._curveTightness=0,K._imageMode=b.CORNER,K._tint=null,K._doStroke=!0,K._doFill=!0,K._strokeSet=!1,K._fillSet=!1,K._leadingSet=!1,K._pushPopDepth=0,K;throw new TypeError("Cannot call a class as a function")}return E=q,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(J){this._pushPopDepth--,J.properties&&Object.assign(this,J.properties)}},{key:"beginClip",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=J.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(J,G){this.width=J,this.height=G,this.elt.width=J*this._pInst._pixelDensity,this.elt.height=G*this._pInst._pixelDensity,this.elt.style.width="".concat(J,"px"),this.elt.style.height="".concat(G,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(J,G,V,K){var H=this._pixelsState,te=H._pixelDensity,Y=this.canvas;if(void 0===J&&void 0===G)J=G=0,V=H.width,K=H.height;else if(J*=te,G*=te,void 0===V&&void 0===K)return J<0||G<0||J>=Y.width||G>=Y.height?[0,0,0,0]:this._getPixel(J,G);return(H=new C.default.Image(V*te,K*te)).pixelDensity(te),H.canvas.getContext("2d").drawImage(Y,J,G,V*te,K*te,0,0,V*te,K*te),H}},{key:"textLeading",value:function(J){return"number"==typeof J?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",J),this._pInst):this._textLeading}},{key:"textStyle",value:function(J){return J?(J!==b.NORMAL&&J!==b.ITALIC&&J!==b.BOLD&&J!==b.BOLDITALIC||this._setProperty("_textStyle",J),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(J,G){return void 0!==J?(this._setProperty("_textAlign",J),void 0!==G&&this._setProperty("_textBaseline",G),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(J){return this._setProperty("_textWrap",J),this._textWrap}},{key:"text",value:function(J,G,V,K,H){var te,Y,we,Se,oe=this._pInst,ge=this._textWrap,re=Number.MAX_VALUE,Q=V;if((this._doFill||this._doStroke)&&void 0!==J){if(te=(J=(J="string"!=typeof J?J.toString():J).replace(/(\t)/g,"  ")).split("\n"),void 0!==K){switch(this._rectMode===b.CENTER&&(G-=K/2),this._textAlign){case b.CENTER:G+=K/2;break;case b.RIGHT:G+=K}if(void 0!==H){this._rectMode===b.CENTER&&(V-=H/2,Q-=H/2),J=V;var fe=oe.textAscent();switch(this._textBaseline){case b.BOTTOM:Se=V+H,V=Math.max(Se,V),Q+=fe;break;case b.CENTER:Se=V+H/2,V=Math.max(Se,V),Q+=fe/2}re=V+H-fe,this._textBaseline===b.CENTER&&(re=J+H-fe/2)}else this._textBaseline!==b.BOTTOM&&this._textBaseline!==b.CENTER||(Q=V-(J=oe.textSize()*this._textLeading)/2,re=V+J/2);if(ge===b.WORD){for(var De=[],it=0;it<te.length;it++){for(var le="",z=te[it].split(" "),ye=0;ye<z.length;ye++)Y="".concat(le+z[ye])+" ",le=K<(we=this.textWidth(Y))&&0<le.length?(De.push(le),"".concat(z[ye])+" "):Y;De.push(le)}var Ue=0;this._textBaseline===b.CENTER?Ue=(De.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Ue=(De.length-1)*oe.textLeading());for(var Je=0;Je<te.length;Je++){le="",z=te[Je].split(" ");for(var vt=0;vt<z.length;vt++)Y="".concat(le+z[vt])+" ",K<(we=this.textWidth(Y))&&0<le.length?(this._renderText(oe,le.trim(),G,V-Ue,re,Q),le="".concat(z[vt])+" ",V+=oe.textLeading()):le=Y;this._renderText(oe,le.trim(),G,V-Ue,re,Q),V+=oe.textLeading()}}else{for(var Ct=[],zt=0;zt<te.length;zt++)for(var _t=te[zt].split(le=""),Ft=0;Ft<_t.length;Ft++)Y="".concat(le+_t[Ft]),(we=this.textWidth(Y))<=K?le+=_t[Ft]:K<we&&0<le.length&&(Ct.push(le),le="".concat(_t[Ft]));Ct.push(le);var Wt=0;this._textBaseline===b.CENTER?Wt=(Ct.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(Wt=(Ct.length-1)*oe.textLeading());for(var mt=0;mt<te.length;mt++){_t=te[mt].split(le="");for(var Nt=0;Nt<_t.length;Nt++)Y="".concat(le+_t[Nt]),(we=this.textWidth(Y))<=K?le+=_t[Nt]:K<we&&0<le.length&&(this._renderText(oe,le.trim(),G,V-Wt,re,Q),V+=oe.textLeading(),le="".concat(_t[Nt]))}this._renderText(oe,le.trim(),G,V-Wt,re,Q),V+=oe.textLeading()}}else{var kt=0;this._textBaseline===b.CENTER?kt=(te.length-1)*oe.textLeading()/2:this._textBaseline===b.BOTTOM&&(kt=(te.length-1)*oe.textLeading());for(var Ut=0;Ut<te.length;Ut++)this._renderText(oe,te[Ut],G,V-kt,re,Q-kt),V+=oe.textLeading()}return oe}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===I(J)&&J.font&&J.font.supported}},{key:"_updateTextMetrics",value:function(){var J,G,V,K,H,te;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((J=document.createElement("span")).style.fontFamily=this._textFont,J.style.fontSize="".concat(this._textSize,"px"),J.innerHTML="ABCjgq|",(te=document.createElement("div")).style.display="inline-block",te.style.width="1px",te.style.height="0px",(G=document.createElement("div")).appendChild(J),G.appendChild(te),G.style.height="0px",G.style.overflow="hidden",document.body.appendChild(G),te.style.verticalAlign="baseline",K=g(te),H=g(J),V=K[1]-H[1],te.style.verticalAlign="bottom",K=g(te),H=g(J),te=K[1]-H[1]-V,document.body.removeChild(G),this._setProperty("_textAscent",V),this._setProperty("_textDescent",te)),this}}])&&D(E.prototype,x),q}(C.default.Element);function g(x){var E=0,S=0;if(x.offsetParent)for(;E+=x.offsetLeft,S+=x.offsetTop,x=x.offsetParent;);else E+=x.offsetLeft,S+=x.offsetTop;return[E,S]}m.prototype.textSize=function(x){return"number"==typeof x?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*b._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},C.default.Renderer=m,Z.default=l=C.default.Renderer},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(x,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(g=x("./main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var L,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in E){var G;Object.prototype.hasOwnProperty.call(E,L)&&((G=J?Object.getOwnPropertyDescriptor(E,L):null)&&(G.get||G.set)?Object.defineProperty(q,L,G):q[L]=E[L])}return q.default=E,S&&S.set(E,q),q}(x("./constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){for(var L=0;L<S.length;L++){var q=S[L];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function d(E,S,L){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,J,G){if(V=function(K,H){for(;!Object.prototype.hasOwnProperty.call(K,H)&&null!==(K=p(K)););return K}(V,J))return(V=Object.getOwnPropertyDescriptor(V,J)).get?V.get.call(G):V.value})(E,S,L||E)}function f(E,S){return(f=Object.setPrototypeOf||function(L,q){return L.__proto__=q,L})(E,S)}function p(E){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}x("./p5.Renderer");var m="rgba(0,0,0,0)",g=function(E){var S=J;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&f(S,E);var q=function h(E){return function(){var S,L=p(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=p(this).constructor,Reflect.construct(L,arguments,S)):L.apply(this,arguments),L=this,!S||"object"!==C(S)&&"function"!=typeof S){if(void 0!==L)return L;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(J);function J(G,V,K){if(this instanceof J)return(G=q.call(this,G,V,K)).drawingContext=G.canvas.getContext("2d"),G._pInst._setProperty("drawingContext",G.drawingContext),G;throw new TypeError("Cannot call a class as a function")}return S=J,(E=[{key:"getFilterGraphicsLayer",value:function(){return this.filterGraphicsLayer||(this.filterGraphicsLayer=new b.default.Graphics(this.width,this.height,w.WEBGL,(this._pInst instanceof b.default.Graphics?this._pInst:this)._pInst)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=w.BLEND,this._setFill(w._DEFAULT_FILL),this._setStroke(w._DEFAULT_STROKE),this.drawingContext.lineCap=w.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(G,V){d(p(J.prototype),"resize",this).call(this,G,V),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var G,V;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof b.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(G=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(G,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(G=this._getFill(),V=(V=this._pInst).color.apply(V,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(V.levels),V=V.toString(),this._setFill(V),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(G),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setFill(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",G.levels)}},{key:"stroke",value:function(){var G=(G=this._pInst).color.apply(G,arguments);this._setStroke(G.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",G.levels)}},{key:"erase",value:function(G,V){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,G).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,V).toString(),this.drawingContext.strokeStyle=G,V=this._cachedBlendMode,this.blendMode(w.REMOVE),this._cachedBlendMode=V,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(p(J.prototype),"beginClip",this).call(this,G),this._cachedFillStyle=this.drawingContext.fillStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=G,this._cachedStrokeStyle=this.drawingContext.strokeStyle,G=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=G,G=this._cachedBlendMode,this.blendMode(w.BLEND),this._cachedBlendMode=G,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),d(p(J.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(G,V,K,H,te,Y,we,Se,oe){G.gifProperties&&G._animateGif(this._pInst);try{b.default.MediaElement&&G instanceof b.default.MediaElement&&G._ensureCanvas();var ge=(ge=this._tint&&G.canvas?this._getTintedImageCanvas(G):ge)||G.canvas||G.elt,re=1;G.width&&0<G.width&&(re=ge.width/G.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(ge,re*V,re*K,re*H,re*te,Y,we,Se,oe),this._isErasing&&this._pInst.erase()}catch(Q){if("NS_ERROR_NOT_AVAILABLE"!==Q.name)throw Q}}},{key:"_getTintedImageCanvas",value:function(G){if(!G.canvas)return G;G.tintCanvas||(G.tintCanvas=document.createElement("canvas")),G.tintCanvas.width!==G.canvas.width&&(G.tintCanvas.width=G.canvas.width),G.tintCanvas.height!==G.canvas.height&&(G.tintCanvas.height=G.canvas.height);var V=G.tintCanvas.getContext("2d");return V.save(),V.clearRect(0,0,G.canvas.width,G.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(V.drawImage(G.canvas,0,0),V.globalCompositeOperation="luminosity",V.drawImage(G.canvas,0,0),V.globalCompositeOperation="color",V.drawImage(G.canvas,0,0),V.globalCompositeOperation="multiply",V.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),V.fillRect(0,0,G.canvas.width,G.canvas.height),V.globalCompositeOperation="destination-in"),V.globalAlpha=this._tint[3]/255,V.drawImage(G.canvas,0,0),V.restore(),G.tintCanvas}},{key:"blendMode",value:function(G){if(G===w.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(G!==w.BLEND&&G!==w.REMOVE&&G!==w.DARKEST&&G!==w.LIGHTEST&&G!==w.DIFFERENCE&&G!==w.MULTIPLY&&G!==w.EXCLUSION&&G!==w.SCREEN&&G!==w.REPLACE&&G!==w.OVERLAY&&G!==w.HARD_LIGHT&&G!==w.SOFT_LIGHT&&G!==w.DODGE&&G!==w.BURN&&G!==w.ADD)throw new Error("Mode ".concat(G," not recognized."));this._cachedBlendMode=G,this.drawingContext.globalCompositeOperation=G}}},{key:"blend",value:function(){for(var G=this.drawingContext.globalCompositeOperation,V=arguments.length,K=new Array(V),H=0;H<V;H++)K[H]=arguments[H];var te=K[K.length-1],Y=Array.prototype.slice.call(K,0,K.length-1);this.drawingContext.globalCompositeOperation=te,b.default.prototype.copy.apply(this,Y),this.drawingContext.globalCompositeOperation=G}},{key:"_getPixel",value:function(G,V){return[(G=this.drawingContext.getImageData(G,V,1,1).data)[0],G[1],G[2],G[3]]}},{key:"loadPixels",value:function(){var V,G=this._pixelsState,K=this.drawingContext.getImageData(0,0,K=this.width*(V=G._pixelDensity),V*=this.height);G._setProperty("imageData",K),G._setProperty("pixels",K.data)}},{key:"set",value:function(G,V,K){G=Math.floor(G),V=Math.floor(V);var H=this._pixelsState;if(K instanceof b.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(H._pixelDensity,H._pixelDensity),this.drawingContext.clearRect(G,V,K.width,K.height),this.drawingContext.drawImage(K.canvas,G,V),this.drawingContext.restore();else{var te=0,Y=0,we=0,Se=0,oe=4*(V*H._pixelDensity*(this.width*H._pixelDensity)+G*H._pixelDensity);if(H.imageData||H.loadPixels(),"number"==typeof K)oe<H.pixels.length&&(we=Y=te=K,Se=255);else if(Array.isArray(K)){if(K.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");oe<H.pixels.length&&(te=K[0],Y=K[1],we=K[2],Se=K[3])}else K instanceof b.default.Color&&oe<H.pixels.length&&(te=K.levels[0],Y=K.levels[1],we=K.levels[2],Se=K.levels[3]);for(var ge=0;ge<H._pixelDensity;ge++)for(var re=0;re<H._pixelDensity;re++)H.pixels[oe=4*((V*H._pixelDensity+re)*this.width*H._pixelDensity+(G*H._pixelDensity+ge))]=te,H.pixels[oe+1]=Y,H.pixels[oe+2]=we,H.pixels[oe+3]=Se}}},{key:"updatePixels",value:function(G,V,K,H){var te=this._pixelsState,Y=te._pixelDensity;void 0===G&&void 0===V&&void 0===K&&void 0===H&&(V=G=0,K=this.width,H=this.height),G*=Y,V*=Y,K*=Y,H*=Y,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=te.imageData),this.drawingContext.putImageData(te.imageData,0,0,G,V,K,H)}},{key:"arc",value:function(oe,ge,re,Q,te,Y,we){var Se=this.drawingContext,fe=(oe+=re/2,ge+=Q/2,re/=2,Q/=2,!(we===w.CHORD||we===w.OPEN||(Y-te)%w.TWO_PI==0));return this._doFill&&(this._clipping||Se.beginPath(),Se.ellipse(oe,ge,re,Q,0,te,Y),fe&&Se.lineTo(oe,ge),Se.closePath(),this._clipping||Se.fill()),this._doStroke&&(this._clipping||Se.beginPath(),Se.ellipse(oe,ge,re,Q,0,te,Y),we===w.PIE&&fe&&Se.lineTo(oe,ge),we!==w.PIE&&we!==w.CHORD||Se.closePath(),this._clipping||Se.stroke()),this}},{key:"ellipse",value:function(Se){var V=this.drawingContext,K=this._doFill,H=this._doStroke,te=parseFloat(Se[0]),Y=parseFloat(Se[1]),we=parseFloat(Se[2]);if(Se=parseFloat(Se[3]),K&&!H){if(this._getFill()===m)return this}else if(!K&&H&&this._getStroke()===m)return this;te+=we/2,Y+=Se/2,we/=2,Se/=2,this._clipping||V.beginPath(),V.ellipse(te,Y,we,Se,0,0,2*Math.PI),V.closePath(),!this._clipping&&K&&V.fill(),!this._clipping&&H&&V.stroke()}},{key:"line",value:function(G,V,K,H){var te=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(this._clipping||te.beginPath(),te.moveTo(G,V),te.lineTo(K,H),te.stroke()),this}},{key:"point",value:function(G,V){var K,H,te=this.drawingContext;return this._doStroke&&this._getStroke()!==m?(K=this._getStroke(),H=this._getFill(),this._clipping||this._setFill(K),this._clipping||te.beginPath(),te.arc(G,V,te.lineWidth/2,0,w.TWO_PI,!1),void(this._clipping||(te.fill(),this._setFill(H)))):this}},{key:"quad",value:function(G,V,K,H,te,Y,we,Se){var oe=this.drawingContext,ge=this._doFill,re=this._doStroke;if(ge&&!re){if(this._getFill()===m)return this}else if(!ge&&re&&this._getStroke()===m)return this;return this._clipping||oe.beginPath(),oe.moveTo(G,V),oe.lineTo(K,H),oe.lineTo(te,Y),oe.lineTo(we,Se),oe.closePath(),!this._clipping&&ge&&oe.fill(),!this._clipping&&re&&oe.stroke(),this}},{key:"rect",value:function(re){var V,K,H=re[0],te=re[1],Y=re[2],we=re[3],Se=re[4],oe=re[5],ge=re[6],Q=(re=re[7],this.drawingContext),fe=this._doFill,De=this._doStroke;if(fe&&!De){if(this._getFill()===m)return this}else if(!fe&&De&&this._getStroke()===m)return this;return this._clipping||Q.beginPath(),void 0===Se?Q.rect(H,te,Y,we):(void 0===oe&&(oe=Se),void 0===ge&&(ge=oe),void 0===re&&(re=ge),De=(fe=Math.abs(Y))/2,K=(V=Math.abs(we))/2,Q.roundRect(H,te,Y,we,[Se=V<2*(Se=fe<2*Se?De:Se)?K:Se,oe=V<2*(oe=fe<2*oe?De:oe)?K:oe,ge=V<2*(ge=fe<2*ge?De:ge)?K:ge,re=V<2*(re=fe<2*re?De:re)?K:re])),!this._clipping&&this._doFill&&Q.fill(),!this._clipping&&this._doStroke&&Q.stroke(),this}},{key:"triangle",value:function(ge){var V=this.drawingContext,K=this._doFill,H=this._doStroke,te=ge[0],Y=ge[1],we=ge[2],Se=ge[3],oe=ge[4];if(ge=ge[5],K&&!H){if(this._getFill()===m)return this}else if(!K&&H&&this._getStroke()===m)return this;this._clipping||V.beginPath(),V.moveTo(te,Y),V.lineTo(we,Se),V.lineTo(oe,ge),V.closePath(),!this._clipping&&K&&V.fill(),!this._clipping&&H&&V.stroke()}},{key:"endShape",value:function(G,V,K,H,te,Y,we){if(0!==V.length&&(this._doStroke||this._doFill)){var Se,oe,ge,re=G===w.CLOSE,Q=(re&&!Y&&V.push(V[0]),V.length);if(K&&null===we){if(3<Q){var fe=[],De=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[1][0],V[1][1]),oe=1;oe+2<Q;oe++)fe[0]=[(Se=V[oe])[0],Se[1]],fe[1]=[Se[0]+(De*V[oe+1][0]-De*V[oe-1][0])/6,Se[1]+(De*V[oe+1][1]-De*V[oe-1][1])/6],fe[2]=[V[oe+1][0]+(De*V[oe][0]-De*V[oe+2][0])/6,V[oe+1][1]+(De*V[oe][1]-De*V[oe+2][1])/6],fe[3]=[V[oe+1][0],V[oe+1][1]],this.drawingContext.bezierCurveTo(fe[1][0],fe[1][1],fe[2][0],fe[2][1],fe[3][0],fe[3][1]);re&&this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this._doFillStrokeClose(re)}}else if(H&&null===we){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<Q;oe++)V[oe].isVert?V[oe].moveTo?this.drawingContext.moveTo(V[oe][0],V[oe][1]):this.drawingContext.lineTo(V[oe][0],V[oe][1]):this.drawingContext.bezierCurveTo(V[oe][0],V[oe][1],V[oe][2],V[oe][3],V[oe][4],V[oe][5]);this._doFillStrokeClose(re)}else if(te&&null===we){for(this._clipping||this.drawingContext.beginPath(),oe=0;oe<Q;oe++)V[oe].isVert?V[oe].moveTo?this.drawingContext.moveTo(V[oe][0],V[oe][1]):this.drawingContext.lineTo(V[oe][0],V[oe][1]):this.drawingContext.quadraticCurveTo(V[oe][0],V[oe][1],V[oe][2],V[oe][3]);this._doFillStrokeClose(re)}else if(we===w.POINTS)for(oe=0;oe<Q;oe++)Se=V[oe],this._doStroke&&this._pInst.stroke(Se[6]),this._pInst.point(Se[0],Se[1]);else if(we===w.LINES)for(oe=0;oe+1<Q;oe+=2)Se=V[oe],this._doStroke&&this._pInst.stroke(V[oe+1][6]),this._pInst.line(Se[0],Se[1],V[oe+1][0],V[oe+1][1]);else if(we===w.TRIANGLES)for(oe=0;oe+2<Q;oe+=3)Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(V[oe+2][0],V[oe+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(V[oe+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(V[oe+2][6]),this.drawingContext.stroke());else if(we===w.TRIANGLE_STRIP)for(oe=0;oe+1<Q;oe++)Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(Se[0],Se[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+1][5]),oe+2<Q&&(this.drawingContext.lineTo(V[oe+2][0],V[oe+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+2][5])),this._doFillStrokeClose(re);else if(we===w.TRIANGLE_FAN){if(2<Q){for(this._clipping||this.drawingContext.beginPath(),oe=2;oe<Q;oe++)Se=V[oe],this.drawingContext.moveTo(V[0][0],V[0][1]),this.drawingContext.lineTo(V[oe-1][0],V[oe-1][1]),this.drawingContext.lineTo(Se[0],Se[1]),this.drawingContext.lineTo(V[0][0],V[0][1]),oe<Q-1&&(this._doFill&&Se[5]!==V[oe+1][5]||this._doStroke&&Se[6]!==V[oe+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(Se[5]),this.drawingContext.fill(),this._pInst.fill(V[oe+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(Se[6]),this.drawingContext.stroke(),this._pInst.stroke(V[oe+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(re)}}else if(we===w.QUADS)for(oe=0;oe+3<Q;oe+=4){for(Se=V[oe],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(Se[0],Se[1]),ge=1;ge<4;ge++)this.drawingContext.lineTo(V[oe+ge][0],V[oe+ge][1]);this.drawingContext.lineTo(Se[0],Se[1]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+3][6]),this._doFillStrokeClose(re)}else if(we===w.QUAD_STRIP){if(3<Q)for(oe=0;oe+1<Q;oe+=2)Se=V[oe],this._clipping||this.drawingContext.beginPath(),oe+3<Q?(this.drawingContext.moveTo(V[oe+2][0],V[oe+2][1]),this.drawingContext.lineTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1]),this.drawingContext.lineTo(V[oe+3][0],V[oe+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(V[oe+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(V[oe+3][6])):(this.drawingContext.moveTo(Se[0],Se[1]),this.drawingContext.lineTo(V[oe+1][0],V[oe+1][1])),this._doFillStrokeClose(re)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(V[0][0],V[0][1]),oe=1;oe<Q;oe++)(Se=V[oe]).isVert&&(Se.moveTo?(re&&this.drawingContext.closePath(),this.drawingContext.moveTo(Se[0],Se[1])):this.drawingContext.lineTo(Se[0],Se[1]));this._doFillStrokeClose(re)}Y=te=H=K=!1,re&&V.pop()}return this}},{key:"strokeCap",value:function(G){return G!==w.ROUND&&G!==w.SQUARE&&G!==w.PROJECT||(this.drawingContext.lineCap=G),this}},{key:"strokeJoin",value:function(G){return G!==w.ROUND&&G!==w.BEVEL&&G!==w.MITER||(this.drawingContext.lineJoin=G),this}},{key:"strokeWeight",value:function(G){return this.drawingContext.lineWidth=void 0===G||0===G?1e-4:G,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(G){G!==this._cachedFillStyle&&(this.drawingContext.fillStyle=G,this._cachedFillStyle=G)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(G){G!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=G,this._cachedStrokeStyle=G)}},{key:"bezier",value:function(G,V,K,H,te,Y,we,Se){return this._pInst.beginShape(),this._pInst.vertex(G,V),this._pInst.bezierVertex(K,H,te,Y,we,Se),this._pInst.endShape(),this}},{key:"curve",value:function(G,V,K,H,te,Y,we,Se){return this._pInst.beginShape(),this._pInst.curveVertex(G,V),this._pInst.curveVertex(K,H),this._pInst.curveVertex(te,Y),this._pInst.curveVertex(we,Se),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(G){G&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(G,V,K,H,te,Y){this.drawingContext.transform(G,V,K,H,te,Y)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(G){this.drawingContext.rotate(G)}},{key:"scale",value:function(G,V){return this.drawingContext.scale(G,V),this}},{key:"translate",value:function(G,V){return G instanceof b.default.Vector&&(V=G.y,G=G.x),this.drawingContext.translate(G,V),this}},{key:"_renderText",value:function(G,V,K,H,te,Y){if(!(H<Y||te<=H))return G.push(),this._isOpenType()?this._textFont._renderPath(V,K,H,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(V,K,H),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(w._DEFAULT_TEXT_FILL),this.drawingContext.fillText(V,K,H))),G.pop(),G}},{key:"textWidth",value:function(G){return this._isOpenType()?this._textFont._textWidth(G,this._textSize):this.drawingContext.measureText(G).width}},{key:"_applyTextProperties",value:function(){var G=this._pInst,V=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),V=this._textFont,this._isOpenType()&&(V=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),V||"sans-serif");return/\s/.exec(V)&&(V='"'.concat(V,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(V),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===w.CENTER?w._CTX_MIDDLE:this._textBaseline,G}},{key:"push",value:function(){return this.drawingContext.save(),d(p(J.prototype),"push",this).call(this)}},{key:"pop",value:function(G){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,d(p(J.prototype),"pop",this).call(this,G)}}])&&D(S.prototype,E),J}(b.default.Renderer);g.prototype.text=function(E,S,L,V,J){var G;return void 0!==V&&this.drawingContext.textBaseline===w.BASELINE&&(G=!0,this.drawingContext.textBaseline=w.TOP),V=b.default.Renderer.prototype.text.apply(this,arguments),G&&(this.drawingContext.textBaseline=w.BASELINE),V},b.default.Renderer2D=g,Z.default=x=b.default.Renderer2D},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator");var M=(l=l("./main"))&&l.__esModule?l:{default:l};function C(){return{}}M.default.prototype._promisePreloads=[];var b=!(M.default.prototype.registerPromisePreload=function(w){M.default.prototype._promisePreloads.push(w)});M.default.prototype._setupPromisePreloads=function(){var w=!0,I=!1,D=void 0;try{for(var d,f=this._promisePreloads[Symbol.iterator]();!(w=(d=f.next()).done);w=!0){var h=d.value,p=this,m=h.method,g=h.addCallbacks,x=h.legacyPreloadSetup,E=h.target||this,S=E[m].bind(E);if(E===M.default.prototype){if(b)continue;p=null,S=E[m]}E[m]=this._wrapPromisePreload(p,S,g),x&&(E[x.method]=this._legacyPreloadGenerator(p,x,E[m]))}}catch(L){I=!0,D=L}finally{try{w||null==f.return||f.return()}finally{if(I)throw D}}b=!0},M.default.prototype._wrapPromisePreload=function(w,I,D){var d=function(){for(var f=this,h=(this._incrementPreload(),null),p=null,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];if(D)for(var E=g.length-1;0<=E&&!p&&"function"==typeof g[E];E--)p=h,h=g.pop();var S=Promise.resolve(I.apply(this,g));return h&&S.then(h),p&&S.catch(p),S.then(function(){return f._decrementPreload()}),S};return w?d.bind(w):d},M.default.prototype._legacyPreloadGenerator=function(w,f,D){var d=f.createBaseObject||C;return f=function(){var h=this;this._incrementPreload();for(var p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];var x=d.apply(this,m);return D.apply(this,m).then(function(E){Object.assign(x,E),h._decrementPreload()}),x},w?f.bind(w):f}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(l,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(d=l("./main"))&&d.__esModule?d:{default:d},b=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==I(f)&&"function"!=typeof f)return{default:f};var h=w();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("./constants"));function w(){var f;return"function"!=typeof WeakMap?null:(w=function(){return f},f=new WeakMap)}function I(f){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("./p5.Graphics"),l("./p5.Renderer2D"),l("../webgl/p5.RendererGL");var D="defaultCanvas0",d=(C.default.prototype.createCanvas=function(f,h,p,m){var g,x,E;if(C.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(p=b.P2D,m=arguments[2]):g=p||b.P2D,m)(E=document.getElementById(D))&&E.parentNode.removeChild(E),E=m,this._defaultGraphicsCreated=!1;else{if(g===b.WEBGL)(E=document.getElementById(D))&&(E.parentNode.removeChild(E),x=this._renderer,this._elements=this._elements.filter(function(L){return L!==x})),(E=document.createElement("canvas")).id=D,E.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)E=this.canvas;else{E=m||document.createElement("canvas");for(var S=0;document.getElementById("defaultCanvas".concat(S));)S++;D="defaultCanvas".concat(S),E.id=D,E.classList.add("p5Canvas")}this._setupDone||(E.dataset.hidden=!0,E.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(p=document.createElement("main"),document.body.appendChild(p)),document.getElementsByTagName("main")[0])).appendChild(E)}return g===b.WEBGL?(this._setProperty("_renderer",new C.default.RendererGL(E,this,!0)),this._elements.push(this._renderer),f=(m=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=m.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new C.default.Renderer2D(E,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,h),this._renderer._applyDefaults(),this._renderer},C.default.prototype.resizeCanvas=function(f,h,p){if(C.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,g,x,E={};for(m in this.drawingContext){var S=this.drawingContext[m];"object"!==I(S)&&"function"!=typeof S&&(E[m]=S)}for(x in this._renderer instanceof C.default.RendererGL&&(f=(g=this._renderer._adjustDimensions(f,h)).adjustedWidth,h=g.adjustedHeight),this.width=f,this.height=h,this._renderer.resize(f,h),E)try{this.drawingContext[x]=E[x]}catch{}p||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},C.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},C.default.prototype.createGraphics=function(f,h){for(var p=arguments.length,m=new Array(2<p?p-2:0),g=2;g<p;g++)m[g-2]=arguments[g];return m[0]instanceof HTMLCanvasElement&&(m[1]=m[0],m[0]=b.P2D),C.default._validateParameters("createGraphics",arguments),new C.default.Graphics(f,h,m[0],this,m[1])},C.default.prototype.createFramebuffer=function(f){return new C.default.Framebuffer(this,f)},C.default.prototype.clearDepth=function(f){this._assert3d("clearDepth"),this._renderer.clearDepth(f)},C.default.prototype.blendMode=function(f){C.default._validateParameters("blendMode",arguments),f===b.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=b.BLEND),this._renderer.blendMode(f)},C.default);Z.default=d},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(l,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=d(l("../main")),w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../constants")),I=d(l("../helpers"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){return h&&h.__esModule?h:{default:h}}l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),b.default.prototype._normalizeArcAngles=function(h,p,m,g,x){var E;return h-=w.TWO_PI*Math.floor(h/w.TWO_PI),p-=w.TWO_PI*Math.floor(p/w.TWO_PI),E=Math.min(Math.abs(h-p),w.TWO_PI-Math.abs(h-p)),x&&(h=h<=w.HALF_PI?Math.atan(m/g*Math.tan(h)):h>w.HALF_PI&&h<=3*w.HALF_PI?Math.atan(m/g*Math.tan(h))+w.PI:Math.atan(m/g*Math.tan(h))+w.TWO_PI,p=p<=w.HALF_PI?Math.atan(m/g*Math.tan(p)):p>w.HALF_PI&&p<=3*w.HALF_PI?Math.atan(m/g*Math.tan(p))+w.PI:Math.atan(m/g*Math.tan(p))+w.TWO_PI),p<h&&(p+=w.TWO_PI),{start:h,stop:p,correspondToSamePoint:E<1e-5}},b.default.prototype.arc=function(h,p,m,g,x,E,S,L){return b.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==E&&(x=this._toRadians(x),E=this._toRadians(E),h=I.default.modeAdjust(h,p,m,g,this._renderer._ellipseMode),(p=this._normalizeArcAngles(x,E,h.w,h.h,!0)).correspondToSamePoint?this._renderer.ellipse([h.x,h.y,h.w,h.h,L]):(this._renderer.arc(h.x,h.y,h.w,h.h,p.start,p.stop,S,L),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[h.x,h.y,h.w,h.h,p.start,p.stop,S]))),this},b.default.prototype.ellipse=function(h,p,m,g,x){return b.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},b.default.prototype.circle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];b.default._validateParameters("circle",p);var g=p.slice(0,2);return g.push(p[2],p[2]),this._renderEllipse.apply(this,function f(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(g))},b.default.prototype._renderEllipse=function(h,p,m,g,x){return(this._renderer._doStroke||this._renderer._doFill)&&(h=I.default.modeAdjust(h,p,m,g=void 0===g?m:g,this._renderer._ellipseMode),this._renderer.ellipse([h.x,h.y,h.w,h.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[h.x,h.y,h.w,h.h])),this},b.default.prototype.line=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("line",m),this._renderer._doStroke&&(h=this._renderer).line.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},b.default.prototype.point=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("point",m),this._renderer._doStroke&&(1===m.length&&m[0]instanceof b.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((h=this._renderer).point.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},b.default.prototype.quad=function(){for(var h,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return b.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((h=this._renderer).quad.apply(h,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},b.default.prototype.rect=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("rect",p),this._renderRect.apply(this,p)},b.default.prototype.square=function(h,p,m,g,x,E,S){return b.default._validateParameters("square",arguments),this._renderRect.call(this,h,p,m,m,g,x,E,S)},b.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var h=I.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),p=(this._renderer._rectMode===w.CORNER&&(h.w=arguments[2],h.h=arguments[3]),[h.x,h.y,h.w,h.h]),m=4;m<arguments.length;m++)p[m]=arguments[m];this._renderer.rect(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[h.x,h.y,h.w,h.h])}return this},b.default.prototype.triangle=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return b.default._validateParameters("triangle",p),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(p),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",p),this},Z.default=l=b.default},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype.ellipseMode=function(d){return b.default._validateParameters("ellipseMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._ellipseMode=d),this},b.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},b.default.prototype.rectMode=function(d){return b.default._validateParameters("rectMode",arguments),d!==w.CORNER&&d!==w.CORNERS&&d!==w.RADIUS&&d!==w.CENTER||(this._renderer._rectMode=d),this},b.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},b.default.prototype.strokeCap=function(d){return b.default._validateParameters("strokeCap",arguments),d!==w.ROUND&&d!==w.SQUARE&&d!==w.PROJECT||this._renderer.strokeCap(d),this},b.default.prototype.strokeJoin=function(d){return b.default._validateParameters("strokeJoin",arguments),d!==w.ROUND&&d!==w.BEVEL&&d!==w.MITER||this._renderer.strokeJoin(d),this},b.default.prototype.strokeWeight=function(d){return b.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(d),this};var D=b.default;Z.default=D},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(C=l("../main"))&&C.__esModule?C:{default:C};l("../friendly_errors/fes_core"),l("../friendly_errors/file_errors"),l("../friendly_errors/validate_params"),M.default.prototype.bezier=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("bezier",I),(this._renderer._doStroke||this._renderer._doFill)&&(b=this._renderer).bezier.apply(b,I),this},M.default.prototype.bezierDetail=function(b){return M.default._validateParameters("bezierDetail",arguments),this._bezierDetail=b,this},M.default.prototype.bezierPoint=function(b,w,I,D,d){M.default._validateParameters("bezierPoint",arguments);var f=1-d;return Math.pow(f,3)*b+3*Math.pow(f,2)*d*w+3*f*Math.pow(d,2)*I+Math.pow(d,3)*D},M.default.prototype.bezierTangent=function(b,w,I,D,d){M.default._validateParameters("bezierTangent",arguments);var f=1-d;return 3*D*Math.pow(d,2)-3*I*Math.pow(d,2)+6*I*f*d-6*w*f*d+3*w*Math.pow(f,2)-3*b*Math.pow(f,2)},M.default.prototype.curve=function(){for(var b,w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("curve",I),this._renderer._doStroke&&(b=this._renderer).curve.apply(b,I),this},M.default.prototype.curveDetail=function(b){return M.default._validateParameters("curveDetail",arguments),this._curveDetail=b<3?3:b,this},M.default.prototype.curveTightness=function(b){return M.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=b,this},M.default.prototype.curvePoint=function(b,w,I,D,d){M.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,h=d*d*d,p=d*d;return b*((f-1)/2*h+(1-f)*p+(f-1)/2*d)+w*((f+3)/2*h+(-5-f)/2*p+1)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2*d)+D*((1-f)/2*h+(f-1)/2*p)},M.default.prototype.curveTangent=function(b,w,I,D,p){M.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,h=p*p*3;return b*((f-1)/2*h+(1-f)*(p*=2)+(f-1)/2)+w*((f+3)/2*h+(-5-f)/2*p)+I*((-3-f)/2*h+(f+2)*p+(1-f)/2)+D*((1-f)/2*h+(f-1)/2*p)};var C=M.default;Z.default=C},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(l,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(S)}function C(S){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(L){return M(L)}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":M(L)})(S)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(E=l("../main"))&&E.__esModule?E:{default:E},w=function(S){if(S&&S.__esModule)return S;if(null===S||"object"!==C(S)&&"function"!=typeof S)return{default:S};var L=I();if(L&&L.has(S))return L.get(S);var q,J={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(q in S){var V;Object.prototype.hasOwnProperty.call(S,q)&&((V=G?Object.getOwnPropertyDescriptor(S,q):null)&&(V.get||V.set)?Object.defineProperty(J,q,V):J[q]=S[q])}return J.default=S,L&&L.set(S,J),J}(l("../constants"));function I(){var S;return"function"!=typeof WeakMap?null:(I=function(){return S},S=new WeakMap)}var D=null,d=[],f=[],h=!1,p=!1,m=!1,g=!1,x=!0,E=(b.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(f=[],g=!0),this},b.default.prototype.beginShape=function(S){var L;return b.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(L=this._renderer).beginShape.apply(L,arguments):(D=S===w.POINTS||S===w.LINES||S===w.TRIANGLES||S===w.TRIANGLE_FAN||S===w.TRIANGLE_STRIP||S===w.QUADS||S===w.QUAD_STRIP?S:null,d=[],f=[]),this},b.default.prototype.bezierVertex=function(){for(var S,L=arguments.length,q=new Array(L),J=0;J<L;J++)q[J]=arguments[J];if(b.default._validateParameters("bezierVertex",q),this._renderer.isP3D)(S=this._renderer).bezierVertex.apply(S,q);else if(0===d.length)b.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{h=!0;for(var G=[],V=0;V<q.length;V++)G[V]=q[V];G.isVert=!1,(g?f:d).push(G)}return this},b.default.prototype.curveVertex=function(){for(var S,L=arguments.length,q=new Array(L),J=0;J<L;J++)q[J]=arguments[J];return b.default._validateParameters("curveVertex",q),this._renderer.isP3D?(S=this._renderer).curveVertex.apply(S,q):(p=!0,this.vertex(q[0],q[1])),this},b.default.prototype.endContour=function(){if(!this._renderer.isP3D){var S=f[0].slice();S.isVert=f[0].isVert,S.moveTo=!1,f.push(S),x&&(d.push(d[0]),x=!1);for(var L=0;L<f.length;L++)d.push(f[L])}return this},b.default.prototype.endShape=function(S){var L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(b.default._validateParameters("endShape",arguments),L<1&&(console.log("\u{1f338} p5.js says: You can not have less than one instance"),L=1),this._renderer.isP3D)this._renderer.endShape(S,p,h,m,g,D,L);else{if(1!==L&&console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode"),0===d.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(L=S===w.CLOSE)&&!g&&d.push(d[0]),this._renderer.endShape(S,d,p,h,m,g,D),x=!(g=m=h=p=!1),L&&d.pop()}return this},b.default.prototype.quadraticVertex=function(){for(var S,L=arguments.length,q=new Array(L),J=0;J<L;J++)q[J]=arguments[J];if(b.default._validateParameters("quadraticVertex",q),this._renderer.isP3D)(S=this._renderer).quadraticVertex.apply(S,q);else{if(this._contourInited)return(S={}).x=q[0],S.y=q[1],S.x3=q[2],S.y3=q[3],S.type=w.QUADRATIC,this._contourVertices.push(S),this;if(0<d.length){m=!0;for(var G=[],V=0;V<q.length;V++)G[V]=q[V];G.isVert=!1,(g?f:d).push(G)}else b.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},b.default.prototype.vertex=function(S,L,q,J,G){var V;return this._renderer.isP3D?(V=this._renderer).vertex.apply(V,arguments):((V=[]).isVert=!0,V[0]=S,V[1]=L,V[2]=0,V[3]=0,V[4]=0,V[5]=this._renderer._getFill(),V[6]=this._renderer._getStroke(),q&&(V.moveTo=q),(g?(0===f.length&&(V.moveTo=!0),f):d).push(V)),this},b.default.prototype.normal=function(S,L,q){var J;return this._assert3d("normal"),b.default._validateParameters("normal",arguments),(J=this._renderer).normal.apply(J,arguments),this},b.default);Z.default=E},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(l,be,Z){},{}],295:[function(l,be,Z){"use strict";l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.assign"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("./main"))&&l.__esModule?l:{default:l}).default.prototype.noLoop=function(){this._loop=!1},l.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},l.default.prototype.isLooping=function(){return this._loop},l.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},l.default.prototype.pop=function(){var M=this._styles.pop();M?(this._renderer.pop(M.renderer),Object.assign(this,M.props)):console.warn("pop() was called without matching push()")},l.default.prototype.redraw=function(M){if(!this._inUserDraw&&this._setupDone){var C=parseInt(M),b=((isNaN(C)||C<1)&&(C=1),this._isGlobal?window:this);if("function"==typeof b.draw){void 0===b.setup&&b.scale(b._pixelDensity,b._pixelDensity);for(var w=0;w<C;w++){b.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),b._renderer.isP3D&&b._renderer._update(),b._setProperty("frameCount",b.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{b.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},Z.default=l=l.default},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("./main"))&&l.__esModule?l:{default:l};M.default.prototype.applyMatrix=function(){var b=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||b?(b=this._renderer).applyMatrix.apply(b,function C(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(b=this._renderer).applyMatrix.apply(b,arguments),this},M.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},M.default.prototype.rotate=function(b,w){return M.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(b),w),this},M.default.prototype.rotateX=function(b){return this._assert3d("rotateX"),M.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(b)),this},M.default.prototype.rotateY=function(b){return this._assert3d("rotateY"),M.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(b)),this},M.default.prototype.rotateZ=function(b){return this._assert3d("rotateZ"),M.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(b)),this},M.default.prototype.scale=function(b,w,I){var D;return M.default._validateParameters("scale",arguments),b instanceof M.default.Vector?(b=(D=b).x,w=D.y,I=D.z):Array.isArray(b)&&(b=(D=b)[0],w=D[1],I=D[2]||1),isNaN(w)?w=I=b:isNaN(I)&&(I=1),this._renderer.scale(b,w,I),this},M.default.prototype.shearX=function(b){return M.default._validateParameters("shearX",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,0,Math.tan(b),1,0,0),this},M.default.prototype.shearY=function(b){return M.default._validateParameters("shearY",arguments),b=this._toRadians(b),this._renderer.applyMatrix(1,Math.tan(b),0,1,0,0),this},M.default.prototype.translate=function(b,w,I){return M.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(b,w,I):this._renderer.translate(b,w),this},Z.default=l=M.default},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(l,be,Z){"use strict";function M(I){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(I)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.ends-with"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator");var C=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(I){return(w="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(D){return M(D)}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":M(D)})(I)}C.default.prototype.storeItem=function(I,D){"string"!=typeof I&&console.log("The argument that you passed to storeItem() - ".concat(I," is not a string.")),I.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(I," must not end with 'p5TypeID'.")),void 0===D&&console.log("You cannot store undefined variables using storeItem().");var d=w(D);switch(d){case"number":case"boolean":D=D.toString();break;case"object":D instanceof C.default.Color?d="p5.Color":D instanceof C.default.Vector&&(d="p5.Vector",D=[D.x,D.y,D.z]),D=JSON.stringify(D)}localStorage.setItem(I,D),I="".concat(I,"p5TypeID"),localStorage.setItem(I,d)},C.default.prototype.getItem=function(I){var D=localStorage.getItem(I),d=localStorage.getItem("".concat(I,"p5TypeID"));if(void 0===d)console.log("Unable to determine type of item stored under ".concat(I,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==D)switch(d){case"number":D=parseFloat(D);break;case"boolean":D="true"===D;break;case"object":D=JSON.parse(D);break;case"p5.Color":D=JSON.parse(D),D=this.color.apply(this,b(D.levels));break;case"p5.Vector":D=JSON.parse(D),D=this.createVector.apply(this,b(D))}return D},C.default.prototype.clearStorage=function(){var I=this;Object.keys(localStorage).forEach(function(D){D.endsWith("p5TypeID")&&I.removeItem(D.replace("p5TypeID",""))})},C.default.prototype.removeItem=function(I){"string"!=typeof I&&console.log("The argument that you passed to removeItem() - ".concat(I," is not a string.")),localStorage.removeItem(I),localStorage.removeItem("".concat(I,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(l,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function C(m){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.object.keys"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(l=l("../core/main"))&&l.__esModule?l:{default:l};function w(m,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&I(m,g)}function I(m,g){return(I=Object.setPrototypeOf||function(x,E){return x.__proto__=E,x})(m,g)}function D(m){return function(){var g,x=d(m);if(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=d(this).constructor,Reflect.construct(x,arguments,g)):x.apply(this,arguments),x=this,!g||"object"!==C(g)&&"function"!=typeof g){if(void 0!==x)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function d(m){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function h(m,g){for(var x=0;x<g.length;x++){var E=g[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function p(m,g,x){g&&h(m.prototype,g),x&&h(m,x)}b.default.prototype.createStringDict=function(m,g){return b.default._validateParameters("createStringDict",arguments),new b.default.StringDict(m,g)},b.default.prototype.createNumberDict=function(m,g){return b.default._validateParameters("createNumberDict",arguments),new b.default.NumberDict(m,g)},b.default.TypedDict=function(){function m(g,x){return f(this,m),g instanceof Object?this.data=g:(this.data={},this.data[g]=x),this}return p(m,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,x){this._validate(x)?this.data[g]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var x in g)this.set(x,g[x])}},{key:"create",value:function(g,x){g instanceof Object&&void 0===x?this._addObj(g):void 0!==g?this.set(g,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var x,E="";for(x in this.data)E+="".concat(x,",").concat(this.data[x],"\n");var S=new Blob([E],{type:"text/csv"});b.default.prototype.downloadFile(S,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,x){b.default.prototype.saveJSON(this.data,g,x)}},{key:"_validate",value:function(g){return!0}}]),m}(),b.default.StringDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"string"==typeof x}}]),g}(),b.default.NumberDict=function(){w(g,b.default.TypedDict);var m=D(g);function g(){f(this,g);for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];return m.call.apply(m,[this].concat(E))}return p(g,[{key:"_validate",value:function(x){return"number"==typeof x}},{key:"add",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]+=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,E){this.add(x,-E)}},{key:"mult",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]*=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,E){this.data.hasOwnProperty(x)?this.data[x]/=E:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var E,S=this.data[Object.keys(this.data)[0]];for(E in this.data)this.data[E]*x<S*x&&(S=this.data[E]);return S}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var E=Object.keys(this.data)[0],S=1;S<Object.keys(this.data).length;S++)Object.keys(this.data)[S]*x<E*x&&(E=Object.keys(this.data)[S]);return E}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),Z.default=l=b.default.TypedDict},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(l,be,Z){"use strict";function M(S){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(S)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(l=l("../core/main"))&&l.__esModule?l:{default:l};function b(S,L){for(var q=0;q<L.length;q++){var J=L[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(S,J.key,J)}}function w(S,L,q){L&&b(S.prototype,L),q&&b(S,q)}function I(S,L){return(I=Object.setPrototypeOf||function(q,J){return q.__proto__=J,q})(S,L)}function d(S){if(void 0===S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function f(S){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(S)}function h(S,L){if(!(S instanceof L))throw new TypeError("Cannot call a class as a function")}function p(S){return(p="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(L){return M(L)}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":M(L)})(S)}function m(S,L,q){return(L._userNode||document.body).appendChild(S),q=new(q?C.default.MediaElement:C.default.Element)(S,L),L._elements.push(q),q}C.default.prototype.select=function(S,L){return C.default._validateParameters("select",arguments),(L=this._getContainer(L).querySelector(S))?this._wrapElement(L):null},C.default.prototype.selectAll=function(S,L){C.default._validateParameters("selectAll",arguments);var q=[],J=this._getContainer(L).querySelectorAll(S);if(J)for(var G=0;G<J.length;G++){var V=this._wrapElement(J[G]);q.push(V)}return q},C.default.prototype._getContainer=function(S){var L=document;return"string"==typeof S?L=document.querySelector(S)||document:S instanceof C.default.Element?L=S.elt:S instanceof HTMLElement&&(L=S),L},C.default.prototype._wrapElement=function(S){var L,q=Array.prototype.slice.call(S.children);return"INPUT"===S.tagName&&"checkbox"===S.type?((L=new C.default.Element(S,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},L):"VIDEO"===S.tagName||"AUDIO"===S.tagName?new C.default.MediaElement(S,this):"SELECT"===S.tagName?this.createSelect(new C.default.Element(S,this)):0<q.length&&q.every(function(J){return"INPUT"===J.tagName||"LABEL"===J.tagName})&&("DIV"===S.tagName||"SPAN"===S.tagName)?this.createRadio(new C.default.Element(S,this)):new C.default.Element(S,this)},C.default.prototype.removeElements=function(S){C.default._validateParameters("removeElements",arguments),this._elements.filter(function(L){return!(L.elt instanceof HTMLCanvasElement)}).map(function(L){return L.remove()})},C.default.Element.prototype.changed=function(S){return C.default.Element._adjustListener("change",S,this),this},C.default.Element.prototype.input=function(S){return C.default.Element._adjustListener("input",S,this),this},C.default.prototype.createDiv=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",L=document.createElement("div");return L.innerHTML=S,m(L,this)},C.default.prototype.createP=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",L=document.createElement("p");return L.innerHTML=S,m(L,this)},C.default.prototype.createSpan=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",L=document.createElement("span");return L.innerHTML=S,m(L,this)},C.default.prototype.createImg=function(){C.default._validateParameters("createImg",arguments);var S,L=document.createElement("img"),q=arguments;return 1<q.length&&"string"==typeof q[1]&&(L.alt=q[1]),2<q.length&&"string"==typeof q[2]&&(L.crossOrigin=q[2]),L.src=q[0],S=m(L,this),L.addEventListener("load",function(){S.width=L.offsetWidth||L.width,S.height=L.offsetHeight||L.height;var J=q[q.length-1];"function"==typeof J&&J(S)}),S},C.default.prototype.createA=function(S,L,q){C.default._validateParameters("createA",arguments);var J=document.createElement("a");return J.href=S,J.innerHTML=L,q&&(J.target=q),m(J,this)},C.default.prototype.createSlider=function(S,L,q,J){C.default._validateParameters("createSlider",arguments);var G=document.createElement("input");return G.type="range",G.min=S,G.max=L,0===J?G.step=1e-18:J&&(G.step=J),"number"==typeof q&&(G.value=q),m(G,this)},C.default.prototype.createButton=function(S,L){C.default._validateParameters("createButton",arguments);var q=document.createElement("button");return q.innerHTML=S,L&&(q.value=L),m(q,this)},C.default.prototype.createCheckbox=function(){for(var S=arguments.length,L=new Array(S),q=0;q<S;q++)L[q]=arguments[q];C.default._validateParameters("createCheckbox",L);var J=document.createElement("div"),G=document.createElement("input"),V=(G.type="checkbox",document.createElement("label")),K=(V.appendChild(G),J.appendChild(V),m(J,this));return K.checked=function(){var H=K.elt.firstElementChild.getElementsByTagName("input")[0];if(H){if(0===arguments.length)return H.checked;H.checked=!(arguments.length<=0||!arguments[0])}return K},this.value=function(H){return K.value=H,this},L[0]&&(K.value(L[0]),(J=document.createElement("span")).innerHTML=L[0],V.appendChild(J)),L[1]&&(G.checked=!0),K},C.default.prototype.createSelect=function(){for(var S,L=arguments.length,q=new Array(L),J=0;J<L;J++)q[J]=arguments[J];C.default._validateParameters("createSelect",q);var G,V=q[0];return V instanceof C.default.Element&&V.elt instanceof HTMLSelectElement?this.elt=(S=V).elt:V instanceof HTMLSelectElement?(S=m(V,this),this.elt=V):(G=document.createElement("select"),V&&"boolean"==typeof V&&G.setAttribute("multiple","true"),S=m(G,this),this.elt=G),S.option=function(K,H){var te;if(void 0!==K){for(var Y,we=0;we<this.elt.length;we+=1)if(this.elt[we].textContent===K){te=we;break}void 0!==te?!1===H?this.elt.remove(te):this.elt[te].value=H:((Y=document.createElement("option")).textContent=K,Y.value=void 0===H?K:H,this.elt.appendChild(Y),this._pInst._elements.push(Y))}},S.selected=function(K){if(void 0!==K){for(var H=0;H<this.elt.length;H+=1)this.elt[H].value.toString()===K.toString()&&(this.elt.selectedIndex=H);return this}if(this.elt.getAttribute("multiple")){var te=[],Y=!0,we=!1,Se=void 0;try{for(var oe,ge=this.elt.selectedOptions[Symbol.iterator]();!(Y=(oe=ge.next()).done);Y=!0)te.push(oe.value.value)}catch(Q){we=!0,Se=Q}finally{try{Y||null==ge.return||ge.return()}finally{if(we)throw Se}}return te}return this.elt.value},S.disable=function(K){if("string"==typeof K)for(var H=0;H<this.elt.length;H++)this.elt[H].value.toString()===K&&(this.elt[H].disabled=!0,this.elt[H].selected=!1);else this.elt.disabled=!0;return this},S.enable=function(K){if("string"==typeof K)for(var H=0;H<this.elt.length;H++)this.elt[H].value.toString()===K&&(this.elt[H].disabled=!1,this.elt[H].selected=!1);else{this.elt.disabled=!1;for(var te=0;te<this.elt.length;te++)this.elt[te].disabled=!1,this.elt[te].selected=!1}return this},S};var g=0;function x(S,K,q,J){var G=document.createElement(K),V=("string"==typeof(q=q||"")&&(q=[q]),!0),H=void(K=!1);try{for(var te,Y=q[Symbol.iterator]();!(V=(te=Y.next()).done);V=!0){var we=te.value,Se=document.createElement("source");Se.setAttribute("src",we),G.appendChild(Se)}}catch(ge){K=!0,H=ge}finally{try{V||null==Y.return||Y.return()}finally{if(K)throw H}}"function"==typeof J&&G.addEventListener("canplaythrough",function ge(){J(),G.removeEventListener("canplaythrough",ge)});var oe=m(G,S,!0);return oe.loadedmetadata=!1,G.addEventListener("loadedmetadata",function(){oe.width=G.videoWidth,oe.height=G.videoHeight,0===oe.elt.width&&(oe.elt.width=G.videoWidth),0===oe.elt.height&&(oe.elt.height=G.videoHeight),oe.presetPlaybackRate&&(oe.elt.playbackRate=oe.presetPlaybackRate,delete oe.presetPlaybackRate),oe.loadedmetadata=!0}),oe}function E(S,L,q,J){h(this,E),this.callback=S,this.time=L,this.id=q,this.val=J}C.default.prototype.createRadio=function(){function S(K){return K instanceof HTMLInputElement&&"radio"===K.type}function L(K){return K instanceof HTMLLabelElement}var q,J,G,V=arguments.length<=0?void 0:arguments[0];return V instanceof C.default.Element&&(V.elt instanceof HTMLDivElement||V.elt instanceof HTMLSpanElement)?(q=V,this.elt=V.elt):V instanceof HTMLDivElement||V instanceof HTMLSpanElement?(q=m(V,this),J=this.elt=V,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(G=arguments.length<=1?void 0:arguments[1])):("string"==typeof V&&(G=V),J=document.createElement("div"),q=m(J,this),this.elt=J),q._name=G||"radioOption_".concat(g++),q._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(K){return S(K)||L(K)&&S(K.firstElementChild)}).map(function(K){return S(K)?K:K.firstElementChild})},q.option=function(K,H){var te,Y,we,Se=!0,oe=!1,ge=void 0;try{for(var re,Q=q._getOptionsArray()[Symbol.iterator]();!(Se=(re=Q.next()).done);Se=!0){var fe=re.value;if(fe.value===K){te=fe;break}}}catch(De){oe=!0,ge=De}finally{try{Se||null==Q.return||Q.return()}finally{if(oe)throw ge}}return void 0===te&&((te=document.createElement("input")).setAttribute("type","radio"),te.setAttribute("value",K)),te.setAttribute("name",q._name),L(te.parentElement)?Y=te.parentElement:(Y=document.createElement("label")).insertAdjacentElement("afterbegin",te),Y.lastElementChild instanceof HTMLSpanElement?we=Y.lastElementChild:(we=document.createElement("span"),te.insertAdjacentElement("afterend",we)),we.innerHTML=void 0===H?K:H,this.elt.appendChild(Y),te},q.remove=function(K){var H=!0,te=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!(H=(we=Se.next()).done);H=!0){var oe=we.value;if(oe.value===K)return void(L(oe.parentElement)?oe.parentElement:oe).remove()}}catch(ge){te=!0,Y=ge}finally{try{H||null==Se.return||Se.return()}finally{if(te)throw Y}}},q.value=function(){var K="",H=!0,te=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!(H=(we=Se.next()).done);H=!0){var oe=we.value;if(oe.checked){K=oe.value;break}}}catch(ge){te=!0,Y=ge}finally{try{H||null==Se.return||Se.return()}finally{if(te)throw Y}}return K},q.selected=function(K){var H=null;if(void 0===K){var te=!0,Y=!1,we=void 0;try{for(var Se,oe=q._getOptionsArray()[Symbol.iterator]();!(te=(Se=oe.next()).done);te=!0){var ge=Se.value;if(ge.checked){H=ge;break}}}catch(it){Y=!0,we=it}finally{try{te||null==oe.return||oe.return()}finally{if(Y)throw we}}}else{q._getOptionsArray().forEach(function(z){z.checked=!1,z.removeAttribute("checked")});var re=!0;Y=!1,we=void 0;try{for(var Q,fe=q._getOptionsArray()[Symbol.iterator]();!(re=(Q=fe.next()).done);re=!0){var De=Q.value;De.value===K&&(De.setAttribute("checked",!0),De.checked=!0,H=De)}}catch(z){Y=!0,we=z}finally{try{re||null==fe.return||fe.return()}finally{if(Y)throw we}}}return H},q.disable=function(){var K=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],H=!0,te=!1,Y=void 0;try{for(var we,Se=q._getOptionsArray()[Symbol.iterator]();!(H=(we=Se.next()).done);H=!0)we.value.setAttribute("disabled",K)}catch(oe){te=!0,Y=oe}finally{try{H||null==Se.return||Se.return()}finally{if(te)throw Y}}},q},C.default.prototype.createColorPicker=function(S){C.default._validateParameters("createColorPicker",arguments);var L=document.createElement("input");return L.type="color",S?S instanceof C.default.Color?L.value=S.toString("#rrggbb"):(C.default.prototype._colorMode="rgb",C.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},L.value=C.default.prototype.color(S).toString("#rrggbb")):L.value="#000000",(L=m(L,this)).color=function(){return S&&(S.mode&&(C.default.prototype._colorMode=S.mode),S.maxes&&(C.default.prototype._colorMaxes=S.maxes)),C.default.prototype.color(this.elt.value)},L},C.default.prototype.createInput=function(){var S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",q=(C.default._validateParameters("createInput",arguments),document.createElement("input"));return q.setAttribute("value",S),q.setAttribute("type",L),m(q,this)},C.default.prototype.createFileInput=function(S){var L,q=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(C.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(L=document.createElement("input")).setAttribute("type","file"),q&&L.setAttribute("multiple",!0),L.addEventListener("change",function(J){var G=!0,V=!1,K=void 0;try{for(var H,te=J.target.files[Symbol.iterator]();!(G=(H=te.next()).done);G=!0)C.default.File._load(H.value,S)}catch(we){V=!0,K=we}finally{try{G||null==te.return||te.return()}finally{if(V)throw K}}},!1),m(L,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},C.default.prototype.createVideo=function(S,L){return C.default._validateParameters("createVideo",arguments),x(this,"video",S,L)},C.default.prototype.createAudio=function(S,L){return C.default._validateParameters("createAudio",arguments),x(this,"audio",S,L)},C.default.prototype.VIDEO="video",C.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(S){var L=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return L?new Promise(function(q,J){L.call(navigator,S,q,J)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),C.default.prototype.createCapture=function(){for(var S=arguments.length,L=new Array(S),q=0;q<S;q++)L[q]=arguments[q];if(C.default._validateParameters("createCapture",L),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var J,G=!0,V=!0,K=!1,H=0,te=L;H<te.length;H++){var Y=te[H];Y===C.default.prototype.VIDEO?V=!1:Y===C.default.prototype.AUDIO?G=!1:"object"===p(Y)?(void 0!==Y.flipped&&(K=Y.flipped,delete Y.flipped),we=Object.assign({},we,Y)):"function"==typeof Y&&(J=Y)}var we=Object.assign({},{video:G,audio:V},we),Se=document.createElement("video"),oe=(Se.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(we).then(function(ge){try{"srcObject"in Se?Se.srcObject=ge:Se.src=window.URL.createObjectURL(ge)}catch{Se.src=ge}}).catch(function(ge){"NotFoundError"===ge.name&&C.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===ge.name&&C.default._friendlyError("Access to the camera was denied","createCapture"),console.error(ge)}),m(Se,this,!0));return oe.loadedmetadata=!1,Se.addEventListener("loadedmetadata",function(){Se.play(),Se.width?(oe.width=Se.width,oe.height=Se.height,K&&(oe.elt.style.transform="scaleX(-1)")):(oe.width=oe.elt.width=Se.videoWidth,oe.height=oe.elt.height=Se.videoHeight),oe.loadedmetadata=!0,J&&J(Se.srcObject)}),oe.flipped=K,oe},C.default.prototype.createElement=function(S,L){return C.default._validateParameters("createElement",arguments),S=document.createElement(S),void 0!==L&&(S.innerHTML=L),m(S,this)},C.default.Element.prototype.addClass=function(S){return this.elt.className?this.hasClass(S)||(this.elt.className=this.elt.className+" "+S):this.elt.className=S,this},C.default.Element.prototype.removeClass=function(S){return this.elt.classList.remove(S),this},C.default.Element.prototype.hasClass=function(S){return this.elt.classList.contains(S)},C.default.Element.prototype.toggleClass=function(S){return this.elt.classList.contains(S)?this.elt.classList.remove(S):this.elt.classList.add(S),this},C.default.Element.prototype.child=function(S){return void 0===S?this.elt.childNodes:("string"==typeof S?("#"===S[0]&&(S=S.substring(1)),S=document.getElementById(S)):S instanceof C.default.Element&&(S=S.elt),S instanceof HTMLElement&&this.elt.appendChild(S),this)},C.default.Element.prototype.center=function(S){var L=this.elt.style.display,q="none"===this.elt.style.display,J="none"===this.parent().style.display,G={x:this.elt.offsetLeft,y:this.elt.offsetTop},V=(q&&this.show(),J&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),K=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===S||void 0===S?this.position(V/2+this.parent().offsetLeft,K/2+this.parent().offsetTop):"horizontal"===S?this.position(V/2+this.parent().offsetLeft,G.y):"vertical"===S&&this.position(G.x,K/2+this.parent().offsetTop),this.style("display",L),q&&this.hide(),J&&this.parent().hide(),this},C.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},C.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},C.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=S,this},C.default.Element.prototype._rotate=function(){var S="";return this.elt.style.transform&&(S=(S=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=S,this},C.default.Element.prototype.style=function(S,L){if(void 0===(L=L instanceof C.default.Color?"rgba("+L.levels[0]+","+L.levels[1]+","+L.levels[2]+","+L.levels[3]/255+")":L)){if(-1===S.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(S);for(var q=S.split(";"),J=0;J<q.length;J++){var G=q[J].split(":");G[0]&&G[1]&&(this.elt.style[G[0].trim()]=G[1].trim())}}else this.elt.style[S]=L,"width"!==S&&"height"!==S&&"left"!==S&&"top"!==S||(L=window.getComputedStyle(this.elt).getPropertyValue(S).replace(/[^\d.]/g,""),this[S]=Math.round(parseFloat(L,10)));return this},C.default.Element.prototype.attribute=function(S,L){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===L?this.elt.getAttribute(S):(this.elt.setAttribute(S,L),this);if(void 0===L)return this.elt.firstChild.getAttribute(S);for(var q=0;q<this.elt.childNodes.length;q++)this.elt.childNodes[q].setAttribute(S,L)},C.default.Element.prototype.removeAttribute=function(S){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var L=0;L<this.elt.childNodes.length;L++)this.elt.childNodes[L].removeAttribute(S);return this.elt.removeAttribute(S),this},C.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},C.default.Element.prototype.show=function(){return this.elt.style.display="block",this},C.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},C.default.Element.prototype.size=function(S,L){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var q=S,J=L,G=C.default.prototype.AUTO;if(q!==G||J!==G){if(q===G?q=L*this.width/this.height:J===G&&(J=S*this.height/this.width),this.elt instanceof HTMLCanvasElement){var V,K={},H=this.elt.getContext("2d");for(V in H)K[V]=H[V];for(V in this.elt.setAttribute("width",q*this._pInst._pixelDensity),this.elt.setAttribute("height",J*this._pInst._pixelDensity),this.elt.style.width=q+"px",this.elt.style.height=J+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),K)this.elt.getContext("2d")[V]=K[V]}else this.elt.style.width=q+"px",this.elt.style.height=J+"px",this.elt.width=q,this.elt.height=J;this.width=q,this.height=J,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",q),this._pInst._setProperty("height",J))}return this},C.default.Element.prototype.remove=function(){this instanceof C.default.MediaElement&&(this.stop(),null!==(L=this.elt.srcObject)&&L.getTracks().forEach(function(q){q.stop()}));var S,L=this._pInst._elements.indexOf(this);for(S in-1!==L&&this._pInst._elements.splice(L,1),this._events)this.elt.removeEventListener(S,this._events[S]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},C.default.Element.prototype.drop=function(S,L){var q;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",q=function(J){J.preventDefault()}),this.elt.addEventListener("dragleave",q)),C.default.Element._attachListener("drop",function(G){G.preventDefault(),"function"==typeof L&&L.call(this,G),G=G.dataTransfer.files;var V=!0,K=!1,H=void 0;try{for(var te,Y=G[Symbol.iterator]();!(V=(te=Y.next()).done);V=!0)C.default.File._load(te.value,S)}catch(Se){K=!0,H=Se}finally{try{V||null==Y.return||Y.return()}finally{if(K)throw H}}},this)):console.log("The File APIs are not fully supported in this browser."),this},C.default.Element.prototype.draggable=function(S){var L,q="ontouchstart"in window,J=0,G=0,V=0,K=0,H=q?"touchend":"mouseup",te=q?"touchmove":"mousemove";function Y(Se){var oe;Se=Se||window.event,K=q?(oe=Se.changedTouches,J=V-parseInt(oe[0].clientX),G=K-parseInt(oe[0].clientY),V=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(J=V-parseInt(Se.clientX),G=K-parseInt(Se.clientY),V=parseInt(Se.clientX),parseInt(Se.clientY)),S.style.left=S.offsetLeft-J+"px",S.style.top=S.offsetTop-G+"px"}function we(){document.removeEventListener(H,we,!1),document.removeEventListener(te,Y,!1)}return void 0===S?L=S=this.elt:S!==this.elt&&S.elt!==this.elt&&(S=S.elt,L=this.elt),L.addEventListener(q?"touchstart":"mousedown",function(Se){var oe;return Se=Se||window.event,K=q?(oe=Se.changedTouches,V=parseInt(oe[0].clientX),parseInt(oe[0].clientY)):(V=parseInt(Se.clientX),parseInt(Se.clientY)),document.addEventListener(H,we,!1),document.addEventListener(te,Y,!1),!1},!1),L.style.cursor="move",this},l=function(S){var L=J;if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(S&&S.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),S&&I(L,S);var q=function D(S){return function(){var L,q,J=f(S);return L=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(L=f(this).constructor,Reflect.construct(J,arguments,L)):J.apply(this,arguments),J=this,!(q=L)||"object"!==p(q)&&"function"!=typeof q?d(J):q}}(J);function J(G,V){h(this,J);var K=d(V=q.call(this,G,V));return V.elt.crossOrigin="anonymous",V._prevTime=0,V._cueIDCounter=0,V._cues=[],V.pixels=[],V._pixelsState=d(V),V._pixelDensity=1,V._modified=!1,V._frameOnCanvas=-1,Object.defineProperty(K,"src",{get:function(){var H=K.elt.children[0].src,te=K.elt.src===window.location.href?"":K.elt.src;return H===window.location.href?te:H},set:function(H){for(var te=0;te<K.elt.children.length;te++)K.elt.removeChild(K.elt.children[te]);var Y=document.createElement("source");Y.src=H,G.appendChild(Y),K.elt.src=H,K.modified=!0}}),K._onended=function(){},K.elt.onended=function(){K._onended(K)},V}return w(J,[{key:"play",value:function(){var G;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(G=this.elt.play())&&G.catch&&G.catch(function(V){"NotAllowedError"===V.name?console.error(V):console.error("Media play method encountered an unexpected error",V)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var G=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(G)},{passive:!0,once:!0})}},{key:"autoplay",value:function(G){var V=this,K=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",G),G&&!K&&(G=function(){return V._setupAutoplayFailDetection()},4===this.elt.readyState?G():this.elt.addEventListener("canplay",G,{passive:!0,once:!0})),this}},{key:"volume",value:function(G){if(void 0===G)return this.elt.volume;this.elt.volume=G}},{key:"speed",value:function(G){if(void 0===G)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=G:this.presetPlaybackRate=G}},{key:"time",value:function(G){return void 0===G?this.elt.currentTime:(this.elt.currentTime=G,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&this._frameOnCanvas!==this._pInst.frameCount&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype.loadPixels.apply(this,V)}},{key:"updatePixels",value:function(G,V,K,H){return this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.updatePixels.call(this,G,V,K,H)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype.get.apply(this,V)}},{key:"_getPixel",value:function(){this.loadPixels();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];return C.default.Renderer2D.prototype._getPixel.apply(this,V)}},{key:"set",value:function(G,V,K){this.loadedmetadata&&(this._ensureCanvas(),C.default.Renderer2D.prototype.set.call(this,G,V,K),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];C.default.prototype.copy.apply(this,V)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var G=arguments.length,V=new Array(G),K=0;K<G;K++)V[K]=arguments[K];C.default.Image.prototype.mask.apply(this,V)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(G){this._modified=G}},{key:"onended",value:function(G){return this._onended=G,this}},{key:"connect",value:function(G){var V,K;if("function"==typeof C.default.prototype.getAudioContext)V=C.default.prototype.getAudioContext(),K=C.default.soundOut.input;else try{K=(V=G.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=V.createMediaElementSource(this.elt),this.audioSourceNode.connect(K)),this.audioSourceNode.connect(G?G.input?G.input:G:K)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(G,te,K){var H=this._cueIDCounter++;return te=new E(te,G,H,K),this._cues.push(te),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),H}},{key:"removeCue",value:function(G){for(var V=0;V<this._cues.length;V++)this._cues[V].id===G&&(console.log(G),this._cues.splice(V,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var G=this.time(),V=0;V<this._cues.length;V++){var K=this._cues[V].time;this._prevTime<K&&K<=G&&this._cues[V].callback(this._cues[V].val)}this._prevTime=G}}]),J}(C.default.Element),C.default.MediaElement=l,l=function(){function S(L,q){h(this,S),this.file=L,this._pInst=q,q=L.type.split("/"),this.type=q[0],this.subtype=q[1],this.name=L.name,this.size=L.size,this.data=void 0}return w(S,null,[{key:"_createLoader",value:function(L,q){var J=new FileReader;return J.onload=function(G){var V,K=new C.default.File(L);"application/json"===K.file.type?K.data=JSON.parse(G.target.result):"text/xml"===K.file.type?(V=(new DOMParser).parseFromString(G.target.result,"text/xml"),K.data=new C.default.XML(V.documentElement)):K.data=G.target.result,q(K)},J}},{key:"_load",value:function(L,q){var J;/^text\//.test(L.type)||"application/json"===L.type?C.default.File._createLoader(L,q).readAsText(L):/^(video|audio)\//.test(L.type)?((J=new C.default.File(L)).data=URL.createObjectURL(L),q(J)):C.default.File._createLoader(L,q).readAsDataURL(L)}}]),S}(),C.default.File=l,Z.default=l=C.default},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(p,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(p=p("../core/main"))&&p.__esModule?p:{default:p};M.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",M.default.prototype.accelerationX=0,M.default.prototype.accelerationY=0,M.default.prototype.accelerationZ=0,M.default.prototype.pAccelerationX=0,M.default.prototype.pAccelerationY=0,M.default.prototype.pAccelerationZ=0,M.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},M.default.prototype.rotationX=0,M.default.prototype.rotationY=0,M.default.prototype.rotationZ=0,M.default.prototype.pRotationX=0,M.default.prototype.pRotationY=0;var C=M.default.prototype.pRotationZ=0,b=0,w=0,I="clockwise",D="clockwise",d="clockwise",f=(M.default.prototype.pRotateDirectionX=void 0,M.default.prototype.pRotateDirectionY=void 0,M.default.prototype.pRotateDirectionZ=void 0,M.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},M.default.prototype.turnAxis=void 0,.5),h=30;M.default.prototype.setMoveThreshold=function(m){M.default._validateParameters("setMoveThreshold",arguments),f=m},M.default.prototype.setShakeThreshold=function(m){M.default._validateParameters("setShakeThreshold",arguments),h=m},M.default.prototype._ondeviceorientation=function(m){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(m.beta)),this._setProperty("rotationY",this._fromDegrees(m.gamma)),this._setProperty("rotationZ",this._fromDegrees(m.alpha)),this._handleMotion()},M.default.prototype._ondevicemotion=function(m){this._updatePAccelerations(),this._setProperty("accelerationX",2*m.acceleration.x),this._setProperty("accelerationY",2*m.acceleration.y),this._setProperty("accelerationZ",2*m.acceleration.z),this._handleMotion()},M.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var m,g,x,E,S,L=this._isGlobal?window:this;"function"==typeof L.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&L.deviceMoved(),"function"==typeof L.deviceTurned&&(g=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,m=C+180,0<g-x&&g-x<270||g-x<-270?I="clockwise":(g-x<0||270<g-x)&&(I="counter-clockwise"),I!==this.pRotateDirectionX&&(m=g),90<Math.abs(g-m)&&Math.abs(g-m)<270&&(m=g,this._setProperty("turnAxis","X"),L.deviceTurned()),this.pRotateDirectionX=I,C=m-180,x=this._toDegrees(this.rotationY)+180,g=this._toDegrees(this.pRotationY)+180,m=b+180,0<x-g&&x-g<270||x-g<-270?D="clockwise":(x-g<0||270<x-this.pRotationY)&&(D="counter-clockwise"),D!==this.pRotateDirectionY&&(m=x),90<Math.abs(x-m)&&Math.abs(x-m)<270&&(m=x,this._setProperty("turnAxis","Y"),L.deviceTurned()),this.pRotateDirectionY=D,b=m-180,0<(g=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&g-x<270||g-x<-270?d="clockwise":(g-x<0||270<g-x)&&(d="counter-clockwise"),d!==this.pRotateDirectionZ&&(w=g),90<Math.abs(g-w)&&Math.abs(g-w)<270&&(w=g,this._setProperty("turnAxis","Z"),L.deviceTurned()),this.pRotateDirectionZ=d,this._setProperty("turnAxis",void 0)),"function"==typeof L.deviceShaken&&(null!==this.pAccelerationX&&(E=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),h<E+S&&L.deviceShaken())},Z.default=p=M.default},{"../core/main":283}],301:[function(l,be,Z){"use strict";l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.string.repeat"),l("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.isKeyPressed=!1,M.default.prototype.keyIsPressed=!1,M.default.prototype.key="",M.default.prototype.keyCode=0,M.default.prototype._onkeydown=function(C){var b;C.repeat||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",C.which),this._downKeys[C.which]=!0,this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),C.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(C.which)),"function"!=typeof(b=this._isGlobal?window:this).keyPressed||C.charCode||!1===b.keyPressed(C)&&C.preventDefault())},M.default.prototype._onkeyup=function(C){var b=this,w=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[C.which]=!1,"Meta"===C.key&&this._metaKeys&&(this._metaKeys.forEach(function(I){b._downKeys[I]=!1}),this._metaKeys=[]),this._isGlobal?window:this);"function"==typeof w.keyReleased&&!1===w.keyReleased(C)&&C.preventDefault()},M.default.prototype._onkeypress=function(C){var b;C.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",C.which),this._setProperty("key",C.key||String.fromCharCode(C.which)||C.which),"function"==typeof(b=this._isGlobal?window:this).keyTyped&&!1===b.keyTyped(C)&&C.preventDefault())},M.default.prototype._onblur=function(C){this._downKeys={}},M.default.prototype.keyIsDown=function(C){return M.default._validateParameters("keyIsDown",arguments),this._downKeys[C]||!1},M.default.prototype._areDownKeys=function(){for(var C in this._downKeys)if(this._downKeys.hasOwnProperty(C)&&!0===this._downKeys[C])return!0;return!1},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(l,be,Z){"use strict";function M(D){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(D)}function C(D){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(d){return M(d)}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":M(d)})(D)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(b=l("../core/main"))&&b.__esModule?b:{default:b},w=function(D){if(D&&D.__esModule)return D;if(null===D||"object"!==C(D)&&"function"!=typeof D)return{default:D};var d=I();if(d&&d.has(D))return d.get(D);var f,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in D){var m;Object.prototype.hasOwnProperty.call(D,f)&&((m=p?Object.getOwnPropertyDescriptor(D,f):null)&&(m.get||m.set)?Object.defineProperty(h,f,m):h[f]=D[f])}return h.default=D,d&&d.set(D,h),h}(l("../core/constants"));function I(){var D;return"function"!=typeof WeakMap?null:(I=function(){return D},D=new WeakMap)}b.default.prototype.movedX=0,b.default.prototype.movedY=0,b.default.prototype._hasMouseInteracted=!1,b.default.prototype.mouseX=0,b.default.prototype.mouseY=0,b.default.prototype.pmouseX=0,b.default.prototype.pmouseY=0,b.default.prototype.winMouseX=0,b.default.prototype.winMouseY=0,b.default.prototype.pwinMouseX=0,b.default.prototype.pwinMouseY=0,b.default.prototype.mouseButton=0,b.default.prototype.mouseIsPressed=!1,b.default.prototype._updateNextMouseCoords=function(D){var d,f,h,p,m;null!==this._curElement&&(!D.touches||0<D.touches.length)&&(f=this.width,h=this.height,(p=D)&&!p.clientX&&(p.touches?p=p.touches[0]:p.changedTouches&&(p=p.changedTouches[0])),m=(d=this._curElement.elt).getBoundingClientRect(),h={x:(p.clientX-m.left)/(f=d.scrollWidth/f||1),y:(p.clientY-m.top)/(d=d.scrollHeight/h||1),winX:p.clientX,winY:p.clientY,id:p.identifier},this._setProperty("movedX",D.movementX),this._setProperty("movedY",D.movementY),this._setProperty("mouseX",h.x),this._setProperty("mouseY",h.y),this._setProperty("winMouseX",h.winX),this._setProperty("winMouseY",h.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},b.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},b.default.prototype._setMouseButton=function(D){this._setProperty("mouseButton",1===D.button?w.CENTER:2===D.button?w.RIGHT:w.LEFT)},b.default.prototype._onmousemove=function(D){var d=this._isGlobal?window:this;this._updateNextMouseCoords(D),this.mouseIsPressed?"function"==typeof d.mouseDragged?!1===d.mouseDragged(D)&&D.preventDefault():"function"==typeof d.touchMoved&&!1===d.touchMoved(D)&&D.preventDefault():"function"==typeof d.mouseMoved&&!1===d.mouseMoved(D)&&D.preventDefault()},b.default.prototype._onmousedown=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(D),this._updateNextMouseCoords(D),this.touchstart||("function"==typeof d.mousePressed?!1===d.mousePressed(D)&&D.preventDefault():"function"==typeof d.touchStarted&&!1===d.touchStarted(D)&&D.preventDefault(),this.touchstart=!1)},b.default.prototype._onmouseup=function(D){var d=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof d.mouseReleased?!1===d.mouseReleased(D)&&D.preventDefault():"function"==typeof d.touchEnded&&!1===d.touchEnded(D)&&D.preventDefault(),this.touchend=!1)},b.default.prototype._ondragend=b.default.prototype._onmouseup,b.default.prototype._ondragover=b.default.prototype._onmousemove,b.default.prototype._onclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.mouseClicked&&!1===d.mouseClicked(D)&&D.preventDefault()},b.default.prototype._ondblclick=function(D){var d=this._isGlobal?window:this;"function"==typeof d.doubleClicked&&!1===d.doubleClicked(D)&&D.preventDefault()},b.default.prototype._mouseWheelDeltaY=0,b.default.prototype._pmouseWheelDeltaY=0,b.default.prototype._onwheel=function(D){var d=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",D.deltaY),"function"==typeof d.mouseWheel&&(D.delta=D.deltaY,!1===d.mouseWheel(D)&&D.preventDefault())},b.default.prototype.requestPointerLock=function(){var D=this._curElement.elt;return D.requestPointerLock=D.requestPointerLock||D.mozRequestPointerLock,D.requestPointerLock?(D.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},b.default.prototype.exitPointerLock=function(){document.exitPointerLock()},Z.default=l=b.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.touches=[],l.default.prototype._updateTouchCoords=function(M){if(null!==this._curElement){for(var C=[],b=0;b<M.touches.length;b++)C[b]=function(m,p,g,d){var f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=m.getBoundingClientRect();return p=m.scrollWidth/p||1,m=m.scrollHeight/g||1,{x:((g=d.touches[f]||d.changedTouches[f]).clientX-h.left)/p,y:(g.clientY-h.top)/m,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,M,b);this._setProperty("touches",C)}},l.default.prototype._ontouchstart=function(M){var C=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(M),this._updateNextMouseCoords(M),this._updateMouseCoords(),"function"==typeof C.touchStarted&&(!1===C.touchStarted(M)&&M.preventDefault(),this.touchstart=!0)},l.default.prototype._ontouchmove=function(M){var C=this._isGlobal?window:this;this._updateTouchCoords(M),this._updateNextMouseCoords(M),"function"==typeof C.touchMoved?!1===C.touchMoved(M)&&M.preventDefault():"function"==typeof C.mouseDragged&&!1===C.mouseDragged(M)&&M.preventDefault()},l.default.prototype._ontouchend=function(M){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(M),this._updateNextMouseCoords(M);var C=this._isGlobal?window:this;"function"==typeof C.touchEnded&&(!1===C.touchEnded(M)&&M.preventDefault(),this.touchend=!0)},Z.default=l=l.default},{"../core/main":283}],304:[function(l,be,Z){"use strict";l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.int32-array"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M,C,b,w,I={_toPixels:function(D){var d,f;return D instanceof ImageData?D.data:D.getContext("2d")?D.getContext("2d").getImageData(0,0,D.width,D.height).data:D.getContext("webgl")?(f=(d=D.getContext("webgl")).drawingBufferWidth*d.drawingBufferHeight*4,f=new Uint8Array(f),d.readPixels(0,0,D.width,D.height,d.RGBA,d.UNSIGNED_BYTE,f),f):void 0},_getARGB:function(D,d){return D[3+(d*=4)]<<24&4278190080|D[d]<<16&16711680|D[1+d]<<8&65280|255&D[2+d]},_setPixels:function(D,d){for(var f,h=0,p=D.length;h<p;h++)D[0+(f=4*h)]=(16711680&d[h])>>>16,D[1+f]=(65280&d[h])>>>8,D[2+f]=255&d[h],D[3+f]=(4278190080&d[h])>>>24},_toImageData:function(D){return D instanceof ImageData?D:D.getContext("2d").getImageData(0,0,D.width,D.height)},_createImageData:function(D,d){return I._tmpCanvas=document.createElement("canvas"),I._tmpCtx=I._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(D,d)},apply:function(D,m,f){var h=D.getContext("2d"),p=h.getImageData(0,0,D.width,D.height);(m=m(p,f))instanceof ImageData?h.putImageData(m,0,0,0,0,D.width,D.height):h.putImageData(p,0,0,0,0,D.width,D.height)},threshold:function(D){for(var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,f=I._toPixels(D),h=Math.floor(255*d),p=0;p<f.length;p+=4)f[p]=f[p+1]=f[p+2]=h<=.2126*f[p]+.7152*f[p+1]+.0722*f[p+2]?255:0},gray:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=d[f+1]=d[f+2]=.2126*d[f]+.7152*d[f+1]+.0722*d[f+2]},opaque:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f+3]=255;return d},invert:function(D){for(var d=I._toPixels(D),f=0;f<d.length;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2]},posterize:function(D){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,f=I._toPixels(D);if(d<2||255<d)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=d-1,p=0;p<f.length;p+=4){var g=f[p+1],x=f[p+2];f[p]=255*(f[p]*d>>8)/h,f[p+1]=255*(g*d>>8)/h,f[p+2]=255*(x*d>>8)/h}},dilate:function(D){for(var d,f,h,p,m,g,x,E,S,L=I._toPixels(D),q=0,J=L.length?L.length/4:0,G=new Int32Array(J);q<J;)for(f=(d=q)+D.width;q<f;)p=h=I._getARGB(L,q),(S=q-1)<d&&(S=q),f<=(E=q+1)&&(E=q),(m=q-D.width)<0&&(m=0),J<=(g=q+D.width)&&(g=q),m=I._getARGB(L,m),S=I._getARGB(L,S),g=I._getARGB(L,g),(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(x=77*((S=I._getARGB(L,E))>>16&255)+151*(S>>8&255)+28*(255&S))&&(h=S,p=x),p<(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(h=m,p=E),p<(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,p=S),G[q++]=h;I._setPixels(L,G)},erode:function(D){for(var d,f,h,p,m,g,x,E,S,L=I._toPixels(D),q=0,J=L.length?L.length/4:0,G=new Int32Array(J);q<J;)for(f=(d=q)+D.width;q<f;)p=h=I._getARGB(L,q),(S=q-1)<d&&(S=q),f<=(E=q+1)&&(E=q),(m=q-D.width)<0&&(m=0),J<=(g=q+D.width)&&(g=q),m=I._getARGB(L,m),S=I._getARGB(L,S),g=I._getARGB(L,g),(x=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(h=S,p=x),(x=77*((S=I._getARGB(L,E))>>16&255)+151*(S>>8&255)+28*(255&S))<p&&(h=S,p=x),(E=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<p&&(h=m,p=E),(S=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<p&&(h=g,p=S),G[q++]=h;I._setPixels(L,G)},blur:function(D,d){for(var f,h,p,m,g,x,E,S,L,q,J=I._toPixels(D),G=D.width,V=D.height,K=G*V,H=new Int32Array(K),te=0;te<K;te++)H[te]=I._getARGB(J,te);var Y,we,Se,oe,ge,re,Q,fe,De=new Int32Array(K),it=new Int32Array(K),le=new Int32Array(K),z=new Int32Array(K),ye=0,Ue=3.5*d|0;if(M!==(Ue=Ue<1?1:Ue<248?Ue:248)){C=1+(M=Ue)<<1,b=new Int32Array(C),w=new Array(C);for(var Je=0;Je<C;Je++)w[Je]=new Int32Array(256);for(var vt=1,Ct=Ue-1;vt<Ue;vt++){b[Ue+vt]=b[Ct]=re=Ct*Ct,Q=w[Ue+vt],fe=w[Ct--];for(var zt=0;zt<256;zt++)Q[zt]=fe[zt]=re*zt}ge=b[Ue]=Ue*Ue,Q=w[Ue];for(var _t=0;_t<256;_t++)Q[_t]=ge*_t}for(we=0;we<V;we++){for(Y=0;Y<G;Y++){if(m=p=h=g=f=0,(x=Y-M)<0)q=-x,x=0;else{if(G<=x)break;q=0}for(Se=q;Se<C&&!(G<=x);Se++){var Ft=H[x+ye];g+=(oe=w[Se])[(-16777216&Ft)>>>24],h+=oe[(16711680&Ft)>>16],p+=oe[(65280&Ft)>>8],m+=oe[255&Ft],f+=b[Se],x++}De[E=ye+Y]=g/f,it[E]=h/f,le[E]=p/f,z[E]=m/f}ye+=G}for(L=(S=-M)*G,we=ye=0;we<V;we++){for(Y=0;Y<G;Y++){if(m=p=h=g=f=0,S<0)q=E=-S,x=Y;else{if(V<=S)break;q=0,E=S,x=Y+L}for(Se=q;Se<C&&!(V<=E);Se++)g+=(oe=w[Se])[De[x]],h+=oe[it[x]],p+=oe[le[x]],m+=oe[z[x]],f+=b[Se],E++,x+=G;H[Y+ye]=g/f<<24|h/f<<16|p/f<<8|m/f}ye+=G,L+=G,S++}I._setPixels(J,H)}};Z.default=I},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(l("../core/main")),C=b(l("omggif"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I){return function(D){if(Array.isArray(D)){for(var d=0,f=new Array(D.length);d<D.length;d++)f[d]=D[d];return f}}(I)||function(D){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D))return Array.from(D)}(I)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.createImage=function(I,D){return M.default._validateParameters("createImage",arguments),new M.default.Image(I,D)},M.default.prototype.saveCanvas=function(){for(var I,D,d,f,h,p,m=arguments.length,g=new Array(m),x=0;x<m;x++)g[x]=arguments[x];switch(M.default._validateParameters("saveCanvas",g),g[0]instanceof HTMLCanvasElement?(I=g[0],g.shift()):g[0]instanceof M.default.Element?(I=g[0].elt,g.shift()):g[0]instanceof M.default.Framebuffer?((h=this.createGraphics((f=g[0]).width,f.height)).pixelDensity(pixelDensity()),f.loadPixels(),h.loadPixels(),h.pixels.set(f.pixels),h.updatePixels(),I=h.elt,g.shift()):I=this._curElement&&this._curElement.elt,1<=g.length&&(D=g[0]),d=(d=2<=g.length?g[1]:d)||M.default.prototype._checkFileExtension(D,d)[1]||"png"){default:p="image/png";break;case"webp":p="image/webp";break;case"jpeg":case"jpg":p="image/jpeg"}I.toBlob(function(E){M.default.prototype.downloadFile(E,D,d),h&&h.remove()},p)},M.default.prototype.encodeAndDownloadGif=function(I,D){for(var d=I.gifProperties,h=(1===(f=d.loopLimit)?f=null:null===f&&(f=0),new Uint8Array(I.width*I.height*d.numFrames)),p=[],m={},g=0;g<d.numFrames;g++){for(var x=new Set,E=d.frames[g].image.data,S=E.length,L=new Uint32Array(I.width*I.height),q=0,J=0;q<S;q+=4,J++){var G=E[q+0]<<16|E[q+1]<<8|E[q+2];x.add(G),L[J]=G}var V=w(x).sort().toString();void 0===m[V]?m[V]={freq:1,frames:[g]}:(m[V].freq+=1,m[V].frames.push(g)),p.push(L)}for(var te=[],K=Object.keys(m).sort(function(le,z){return m[z].freq-m[le].freq}),H=K[0].split(",").map(function(le){return parseInt(le)}),Y=(te=te.concat(m[H].frames),new Set(H)),we=1;we<K.length;we++){var Se=K[we].split(",").map(function(le){return parseInt(le)}).filter(function(le){return!Y.has(le)});if(H.length+Se.length<=256){for(var oe=0;oe<Se.length;oe++)H.push(Se[oe]),Y.add(Se[oe]);te=te.concat(m[K[we]].frames)}}te=new Set(te);for(var ge={},re=0;re<H.length;re++)ge[H[re]]||(ge[H[re]]=re);for(var Q=1;Q<H.length;)Q<<=1;H.length=Q;for(var f={loop:f,palette:new Uint32Array(H)},fe=new C.default.GifWriter(h,I.width,I.height,f),De={},it=0;it<d.numFrames;it++)!function(z){var ye=!te.has(z),Ue=ye?[]:H,Je=new Uint8Array(I.width*I.height),vt={},Ct=new Set,zt=(p[z].forEach(function(Nt,kt){ye?(void 0===vt[Nt]&&(vt[Nt]=Ue.length,Ue.push(Nt)),Je[kt]=vt[Nt]):Je[kt]=ge[Nt],0<z&&p[z-1][kt]!==Nt&&Ct.add(Nt)}),{});if(0<(_t=Ue.filter(function(Nt){return!Ct.has(Nt)})).length){var _t,Ft=(ye?vt:ge)[_t=_t[0]];if(0<z){for(var Wt=0;Wt<p[z].length;Wt++)p[z-1][Wt]===p[z][Wt]&&(Je[Wt]=Ft);zt.transparent=Ft,De.frameOpts.disposal=1}}if(zt.delay=d.frames[z].delay/10,ye){for(var mt=1;mt<Ue.length;)mt<<=1;Ue.length=mt,zt.palette=new Uint32Array(Ue)}0<z&&fe.addFrame(0,0,I.width,I.height,De.pixelPaletteIndex,De.frameOpts),De={pixelPaletteIndex:Je,frameOpts:zt}}(it);De.frameOpts.disposal=1,fe.addFrame(0,0,I.width,I.height,De.pixelPaletteIndex,De.frameOpts),f=new Blob([h.slice(0,fe.end())],{type:"image/gif"}),M.default.prototype.downloadFile(f,D,"gif")},M.default.prototype.saveFrames=function(I,D,d,p,h){M.default._validateParameters("saveFrames",arguments),d=M.default.prototype.constrain(d=d||3,0,15),d*=1e3,p=M.default.prototype.constrain(p||15,0,22);var m=0,g=M.default.prototype._makeFrame,x=this._curElement.elt,E=[],S=setInterval(function(){E.push(g(I+m,D,x)),m++},1e3/p);setTimeout(function(){if(clearInterval(S),h)h(E);else for(var L=0,q=E;L<q.length;L++){var J=q[L];M.default.prototype.downloadFile(J.imageData,J.filename,J.ext)}E=[]},.01+d)},M.default.prototype._makeFrame=function(I,D,h){var f;if(h=this?this._curElement.elt:h,D)switch(D.toLowerCase()){case"png":default:f="image/png";break;case"jpeg":case"jpg":f="image/jpeg"}else D="png",f="image/png";h=(h=h.toDataURL(f)).replace(f,"image/octet-stream");var p={};return p.imageData=h,p.filename=I,p.ext=D,p},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(l,be,Z){"use strict";function M(x){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(x)}function C(x){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(E){return M(E)}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":M(E)})(x)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.copy-within"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.uint8-clamped-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,l("regenerator-runtime/runtime");var b=h(l("../core/main")),w=h(l("../core/helpers")),I=function(x){if(x&&x.__esModule)return x;if(null===x||"object"!==C(x)&&"function"!=typeof x)return{default:x};var E=f();if(E&&E.has(x))return E.get(x);var S,L={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in x){var J;Object.prototype.hasOwnProperty.call(x,S)&&((J=q?Object.getOwnPropertyDescriptor(x,S):null)&&(J.get||J.set)?Object.defineProperty(L,S,J):L[S]=x[S])}return L.default=x,E&&E.set(x,L),L}(l("../core/constants")),D=h(l("omggif")),d=l("gifenc");function f(){var x;return"function"!=typeof WeakMap?null:(f=function(){return x},x=new WeakMap)}function h(x){return x&&x.__esModule?x:{default:x}}function p(x,E,S,L,q,J,G){try{var V=x[J](G),K=V.value}catch(H){return void S(H)}V.done?E(K):Promise.resolve(K).then(L,q)}function g(x,E){return 0<x&&x<E?x:E}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.loadImage=function(x,E,S){b.default._validateParameters("loadImage",arguments);var L=new b.default.Image(1,1,this),q=this,J=new Request(x,{method:"GET",mode:"cors"});return fetch(x,J).then(function(G){var V,K=G.headers.get("content-type");null===K&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),K&&K.includes("image/gif")?G.arrayBuffer().then(function(H){if(H){H=new Uint8Array(H);for(var te=L,Y=E,we=S,Se=function(ye){q._decrementPreload()}.bind(q),oe=new D.default.GifReader(H),ge=(te.width=te.canvas.width=oe.width,te.height=te.canvas.height=oe.height,[]),re=oe.numFrames(),Q=new Uint8ClampedArray(te.width*te.height*4),fe=0;fe<re;fe++){var De=oe.frameInfo(fe),it=te.drawingContext.getImageData(0,0,te.width,te.height),le=(Q=it.data.slice(),function(ye,Ue){try{Ue.decodeAndBlitFrameRGBA(ye,Q)}catch(Je){b.default._friendlyFileLoadError(8,te.src),"function"==typeof we?we(Je):console.error(Je)}}(fe,oe),new ImageData(Q,te.width,te.height));0===(te.drawingContext.putImageData(le,0,0),le=De.delay)&&(le=10),ge.push({image:te.drawingContext.getImageData(0,0,te.width,te.height),delay:10*le}),2===De.disposal?te.drawingContext.clearRect(De.x,De.y,De.width,De.height):3===De.disposal&&te.drawingContext.putImageData(it,0,0,De.x,De.y,De.width,De.height)}null===(H=oe.loopCount())?H=1:0===H&&(H=null),te.drawingContext.putImageData(ge[0].image,0,0),1<ge.length&&(te.gifProperties={displayIndex:0,loopLimit:H,loopCount:0,frames:ge,numFrames:re,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof Y&&Y(te),Se()}},function(H){"function"==typeof S?(S(H),q._decrementPreload()):console.error(H)}):((V=new Image).onload=function(){L.width=L.canvas.width=V.width,L.height=L.canvas.height=V.height,L.drawingContext.drawImage(V,0,0),L.modified=!0,"function"==typeof E&&E(L),q._decrementPreload()},V.onerror=function(H){b.default._friendlyFileLoadError(0,V.src),"function"==typeof S?(S(H),q._decrementPreload()):console.error(H)},0!==x.indexOf("data:image/")&&(V.crossOrigin="Anonymous"),V.src=x),L.modified=!0}).catch(function(G){b.default._friendlyFileLoadError(0,x),"function"==typeof S?(S(G),q._decrementPreload()):console.error(G)}),L},b.default.prototype.saveGif=function(){x=F.mark(function S(L,q){var J,G,V,K,H,te,Y,we,Se,oe,ge,re,Q,fe,De,it,le,z,ye,Ue,Je,vt,Ct,zt,_t,Ft,Wt=arguments;return F.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(J=2<Wt.length&&void 0!==Wt[2]?Wt[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof L)throw TypeError("fileName parameter must be a string");mt.next=3;break;case 3:if("number"!=typeof q)throw TypeError("Duration parameter must be a number");mt.next=5;break;case 5:if(V=J&&J.units||"seconds",K=J&&J.silent||!1,H=J&&J.notificationDuration||0,te=J&&J.notificationID||"progressBar","number"!=typeof(G=J&&J.delay||0))throw TypeError("Delay parameter must be a number");mt.next=12;break;case 12:if("seconds"!==V&&"frames"!==V)throw TypeError('Units parameter must be either "frames" or "seconds"');mt.next=14;break;case 14:if("boolean"!=typeof K)throw TypeError("Silent parameter must be a boolean");mt.next=16;break;case 16:if("number"!=typeof H)throw TypeError("Notification duration parameter must be a number");mt.next=18;break;case 18:if("string"!=typeof te)throw TypeError("Notification ID parameter must be a string");mt.next=20;break;case 20:return this._recording=!0,Y=(Y=1/(oe=(oe=this._targetFrameRate)!==1/0&&void 0!==oe&&0!==oe?oe:60)*1e3)<20?20:Y,Se=(we="seconds"===V?q*oe:q)+(oe="seconds"===V?G*oe:G),this.frameCount=oe,ge=this._pixelDensity,this.pixelDensity(1),re=[],null!==document.getElementById(te)&&document.getElementById(te).remove(),K||((Q=this.createP("")).id(te),Q.style("font-size","16px"),Q.style("font-family","Montserrat"),Q.style("background-color","#ffffffa0"),Q.style("padding","8px"),Q.style("border-radius","10px"),Q.position(0,0)),this._renderer instanceof b.default.RendererGL&&(De=this.drawingContext,fe=new Uint8Array(De.drawingBufferWidth*De.drawingBufferHeight*4)),this.noLoop(),mt.next=39,Promise.resolve();case 39:if(oe<Se)return this.redraw(),zt=void 0,zt=this._renderer instanceof b.default.RendererGL?(fe=new Uint8Array(De.drawingBufferWidth*De.drawingBufferHeight*4),De.readPixels(0,0,De.drawingBufferWidth,De.drawingBufferHeight,De.RGBA,De.UNSIGNED_BYTE,fe),function(Nt,kt,Ut){for(var Tt=parseInt(Ut/2),qt=4*kt,mn=new Uint8Array(4*kt),Zn=0;Zn<Tt;++Zn){var An=Zn*qt,Qn=(Ut-Zn-1)*qt;mn.set(Nt.subarray(An,An+qt)),Nt.copyWithin(An,Qn,Qn+qt),Nt.set(mn,Qn)}return Nt}(fe,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,re.push(zt),oe++,K||Q.html("Saved frame <b>"+re.length.toString()+"</b> out of "+we.toString()),mt.next=48,new Promise(function(Nt){return setTimeout(Nt,0)});mt.next=50;break;case 48:mt.next=39;break;case 50:K||Q.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(ge),it=(0,d.GIFEncoder)(),le=function(Nt){for(var kt=new Uint8Array(Nt.length*Nt[0].length),Ut=0;Ut<Nt.length;Ut++)kt.set(Nt[Ut],Ut*Nt[0].length);var Tt=(0,d.quantize)(kt,256,{format:"rgba4444",oneBitAlpha:!0});return 256===Tt.length?Tt[Tt.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Tt.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Tt}(re),z={},ye=function(Nt){for(var kt=Nt.length/4,Ut=new Uint8Array(kt),Tt=0;Tt<kt;Tt++){var qt=Nt[4*Tt]<<24|Nt[4*Tt+1]<<16|Nt[4*Tt+2]<<8|Nt[4*Tt+3];void 0===z[qt]&&(z[qt]=(0,d.nearestColorIndex)(le,Nt.slice(4*Tt,4*(Tt+1)))),Ut[Tt]=z[qt]}return Ut},Ue=le.length-1,Je=[],vt=0;case 60:if(!(vt<re.length)){mt.next=71;break}if(Ct=ye(re[vt]),zt=Ct.slice(),0===vt)it.writeFrame(Ct,this.width,this.height,{palette:le,delay:Y,dispose:1});else{for(_t=0;_t<Ct.length;_t++)Ct[_t]===Je[_t]&&(Ct[_t]=Ue);it.writeFrame(Ct,this.width,this.height,{delay:Y,transparent:!0,transparentIndex:Ue,dispose:1})}return Je=zt,K||Q.html("Rendered frame <b>"+vt.toString()+"</b> out of "+we.toString()),mt.next=68,new Promise(function(Nt){return setTimeout(Nt,0)});case 68:vt++,mt.next=60;break;case 71:it.finish(),Ft=it.bytesView(),Ft=new Blob([Ft],{type:"image/gif"}),re=[],this._recording=!1,this.loop(),K||(Q.html("Done. Downloading your gif!\u{1f338}"),0<H&&setTimeout(function(){return Q.remove()},1e3*H)),b.default.prototype.downloadFile(Ft,L,"gif");case 80:case"end":return mt.stop()}},S,this)});var x,E=function(){var S=this,L=arguments;return new Promise(function(q,J){var G=x.apply(S,L);function V(H){p(G,q,J,V,K,"next",H)}function K(H){p(G,q,J,V,K,"throw",H)}V(void 0)})};return function(S,L){return E.apply(this,arguments)}}(),b.default.prototype.image=function(x,E,S,L,oe,ge,re,Q,De,H,te,Y){b.default._validateParameters("image",arguments);var fe=x.width,we=x.height,Se=(Y=Y||I.CENTER,te=te||I.CENTER,x.elt&&(fe=void 0!==fe?fe:x.elt.width,we=void 0!==we?we:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(fe=void 0!==fe?fe:x.elt.videoWidth,we=void 0!==we?we:x.elt.videoHeight),L||fe);oe=oe||we,ge=ge||0,re=re||0,Q=g(void 0!==Q?Q:fe,fe),fe=g(void 0!==De?De:we,we),De=1,x.elt&&!x.canvas&&x.elt.style.width&&(De=x.elt.videoWidth&&!L?x.elt.videoWidth:x.elt.width,De/=parseInt(x.elt.style.width,10)),ge*=De,re*=De,fe*=De,Q*=De,we=function m(x,E,S,L,q,J,G,V,K,H,te){var Y,we,Se,oe,ge,re,Q,fe,De;return x===I.COVER&&(Y=E,Se=S,Q=J,fe=G,re=V,De=K,we=H,oe=te,Q/=ge=Math.max(Q/we,fe/oe),fe/=ge,ge=re,re=De,Y===I.CENTER?ge+=(we-Q)/2:Y===I.RIGHT&&(ge+=we-Q),Se===I.CENTER?re+=(oe-fe)/2:Se===I.BOTTOM&&(re+=oe-fe),V=(De={x:ge,y:re,w:Q,h:fe}).x,K=De.y,H=De.w,te=De.h),x===I.CONTAIN&&(Y=E,we=S,Se=L,oe=q,ge=J,re=G,Q=H,fe=te,Q/=De=Math.max(Q/ge,fe/re),fe/=De,De=Se,Se=oe,Y===I.CENTER?De+=(ge-Q)/2:Y===I.RIGHT&&(De+=ge-Q),we===I.CENTER?Se+=(re-fe)/2:we===I.BOTTOM&&(Se+=re-fe),L=(x={x:De,y:Se,w:Q,h:fe}).x,q=x.y,J=x.w,G=x.h),{sx:V,sy:K,sw:H,sh:te,dx:L,dy:q,dw:J,dh:G}}(H,te,Y,(we=w.default.modeAdjust(E,S,Se,oe,this._renderer._imageMode)).x,we.y,we.w,we.h,ge,re,Q,fe),this._renderer.image(x,we.sx,we.sy,we.sw,we.sh,we.dx,we.dy,we.dw,we.dh)},b.default.prototype.tint=function(){for(var x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];b.default._validateParameters("tint",E);var L=this.color.apply(this,E);this._renderer._tint=L.levels},b.default.prototype.noTint=function(){this._renderer._tint=null},b.default.prototype._getTintedImageCanvas=b.default.Renderer2D.prototype._getTintedImageCanvas,b.default.prototype.imageMode=function(x){b.default._validateParameters("imageMode",arguments),x!==I.CORNER&&x!==I.CORNERS&&x!==I.CENTER||(this._renderer._imageMode=x)},Z.default=l=b.default},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(l("../core/main")),C=b(l("./filters"));function b(I){return I&&I.__esModule?I:{default:I}}function w(I,D){for(var d=0;d<D.length;d++){var f=D[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(I,f.key,f)}}M.default.Image=function(){function I(h,p){if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.width=h,this.height=p,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var D,d;return D=I,(d=[{key:"pixelDensity",value:function(h){return void 0!==h?(h<=0&&(M.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),h=1),this._pixelDensity=h,this.width/=h,this.height/=h,this):this._pixelDensity}},{key:"_animateGif",value:function(g){var p,m=this.gifProperties;g=g._lastRealFrameTime||window.performance.now(),0===m.lastChangeTime&&(m.lastChangeTime=g),m.playing&&(m.timeDisplayed=g-m.lastChangeTime,m.timeDisplayed>=(p=m.frames[m.displayIndex].delay)&&(p=Math.floor(m.timeDisplayed/p),m.timeDisplayed=0,m.lastChangeTime=g,m.displayIndex+=p,m.loopCount=Math.floor(m.displayIndex/m.numFrames),null!==m.loopLimit&&m.loopCount>=m.loopLimit?m.playing=!1:(this.drawingContext.putImageData(m.frames[g=m.displayIndex%m.numFrames].image,0,0),m.displayIndex=g,this.setModified(!0))))}},{key:"_setProperty",value:function(h,p){this[h]=p,this.setModified(!0)}},{key:"loadPixels",value:function(){M.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(h,p,m,g){M.default.Renderer2D.prototype.updatePixels.call(this,h,p,m,g),this.setModified(!0)}},{key:"get",value:function(h,p,m,g){return M.default._validateParameters("p5.Image.get",arguments),M.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return M.default.Renderer2D.prototype._getPixel.apply(this,p)}},{key:"set",value:function(h,p,m){M.default.Renderer2D.prototype.set.call(this,h,p,m),this.setModified(!0)}},{key:"resize",value:function(h,p){0===h&&0===p?(h=this.canvas.width,p=this.canvas.height):0===h?h=this.canvas.width*p/this.canvas.height:0===p&&(p=this.canvas.height*h/this.canvas.width),h=Math.floor(h),p=Math.floor(p);var m=document.createElement("canvas");if(m.width=h,m.height=p,this.gifProperties)for(var g=this.gifProperties,x=0;x<g.numFrames;x++){for(var E=this.drawingContext.createImageData(h,p),S=(V=V=G=J=q=void 0,g.frames[x].image),L=E,q=0,J=0;J<L.height;J++)for(var G=0;G<L.width;G++){var V=Math.floor(G*S.width/L.width);V=4*(Math.floor(J*S.height/L.height)*S.width+V),L.data[q++]=S.data[V++],L.data[q++]=S.data[V++],L.data[q++]=S.data[V++],L.data[q++]=S.data[+V]}g.frames[x].image=E}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=h,this.canvas.height=this.height=p,this.drawingContext.drawImage(m,0,0,h,p,0,0,h,p),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default.prototype.copy.apply(this,p)}},{key:"mask",value:function(h){var p=this.drawingContext.globalCompositeOperation,m=this._pixelDensity,g=1,x=[h=void 0===h?this:h,0,0,(g=h instanceof M.default.Renderer?h._pInst._pixelDensity:g)*h.width,g*h.height,0,0,m*this.width,m*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var E=0;E<this.gifProperties.frames.length;E++)this.drawingContext.putImageData(this.gifProperties.frames[E].image,0,0),this.copy.apply(this,x),this.gifProperties.frames[E].image=this.drawingContext.getImageData(0,0,m*this.width,m*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,x);this.drawingContext.globalCompositeOperation=p,this.setModified(!0)}},{key:"filter",value:function(h,p){C.default.apply(this.canvas,C.default[h],p),this.setModified(!0)}},{key:"blend",value:function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];M.default._validateParameters("p5.Image.blend",arguments),M.default.prototype.blend.apply(this,p),this.setModified(!0)}},{key:"setModified",value:function(h){this._modified=h}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(h,p){this.gifProperties?M.default.prototype.encodeAndDownloadGif(this,h):M.default.prototype.saveCanvas(this.canvas,h,p)}},{key:"reset",value:function(){var h;this.gifProperties&&((h=this.gifProperties).playing=!0,h.timeSinceStart=0,h.timeDisplayed=0,h.lastChangeTime=0,h.loopCount=0,h.displayIndex=0,this.drawingContext.putImageData(h.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var h;if(this.gifProperties)return(h=this.gifProperties).displayIndex%h.numFrames}},{key:"setFrame",value:function(h){var p;this.gifProperties&&(h<(p=this.gifProperties).numFrames&&0<=h?(p.timeDisplayed=0,p.lastChangeTime=0,p.displayIndex=h,this.drawingContext.putImageData(p.frames[h].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(h,p){if(this.gifProperties){var m=this.gifProperties;if(p<m.numFrames&&0<=p)m.frames[p].delay=h;else{var g=!0,x=void(p=!1);try{for(var E,S=m.frames[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)E.value.delay=h}catch(q){p=!0,x=q}finally{try{g||null==S.return||S.return()}finally{if(p)throw x}}}}}}])&&w(D.prototype,d),I}(),Z.default=l=M.default.Image},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(l,be,Z){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=b(l("../core/main")),C=b(l("./filters"));function b(w){return w&&w.__esModule?w:{default:w}}l("../color/p5.Color"),M.default.prototype.pixels=[],M.default.prototype.blend=function(){for(var w,I=arguments.length,D=new Array(I),d=0;d<I;d++)D[d]=arguments[d];M.default._validateParameters("blend",D),this._renderer?(w=this._renderer).blend.apply(w,D):M.default.Renderer2D.prototype.blend.apply(this,D)},M.default.prototype.copy=function(){for(var w,I,D,d,f,h,p,m,g,x=arguments.length,E=new Array(x),S=0;S<x;S++)E[S]=arguments[S];if(M.default._validateParameters("copy",E),9===E.length)w=E[0],I=E[1],D=E[2],d=E[3],f=E[4],h=E[5],p=E[6],m=E[7],g=E[8];else{if(8!==E.length)throw new Error("Signature not supported");w=this,I=E[0],D=E[1],d=E[2],f=E[3],h=E[4],p=E[5],m=E[6],g=E[7]}M.default.prototype._copyHelper(this,w,I,D,d,f,h,p,m,g)},M.default.prototype._copyHelper=function(w,I,D,d,f,h,p,m,g,x){var E=I.canvas.width/I.width,S=0,L=0;I._renderer&&I._renderer.isP3D&&(S=I.width/2,L=I.height/2),w._renderer&&w._renderer.isP3D?(w.push(),w.resetMatrix(),w.noLights(),w.blendMode(w.BLEND),w.imageMode(w.CORNER),M.default.RendererGL.prototype.image.call(w._renderer,I,D+S,d+L,f,h,p,m,g,x),w.pop()):w.drawingContext.drawImage(I.canvas,E*(D+S),E*(d+L),E*f,E*h,p,m,g,x)},M.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},M.default.prototype.filter=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("filter",I);var p=function(){var m,g={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof M.default.Shader?g.shader=arguments.length<=0?void 0:arguments[0]:(g.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(g.value=arguments.length<=1?void 0:arguments[1]),!1===((m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m])&&(g.useWebGL=!1)),g}.apply(void 0,I),d=p.shader,f=p.operation,h=p.value;p=p.useWebGL,this._renderer.isP3D&&d?M.default.RendererGL.prototype.filter.call(this._renderer,d):p||this._renderer.isP3D?(!p&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?M.default.RendererGL.prototype.filter.call(this._renderer,f,h):((d=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),d.filter.apply(d,I),this.copy(d._renderer,0,0,this.width,this.height,0,0,this.width,this.height),d.clear())):C.default.apply(void 0!==this.canvas?this.canvas:this.elt,C.default[f],h)},M.default.prototype.get=function(w,I,D,d){var f;return M.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},M.default.prototype.loadPixels=function(){for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];M.default._validateParameters("loadPixels",I),this._renderer.loadPixels()},M.default.prototype.set=function(w,I,D){this._renderer.set(w,I,D)},M.default.prototype.updatePixels=function(w,I,D,d){M.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(w,I,D,d)},Z.default=l=M.default},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(l,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/web.url"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=I(l("../core/main")),b=(l("whatwg-fetch"),l("es6-promise/auto"),I(l("fetch-jsonp"))),w=I(l("file-saver"));function I(h){return h&&h.__esModule?h:{default:h}}function D(h){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}function d(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(h,p){p&&!0!==p&&"true"!==p||(p="");var m="";return(h=h||"untitled")&&h.includes(".")&&(m=h.split(".").pop()),p&&m!==p&&(m=p,h="".concat(h,".").concat(m)),[h,m]}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),C.default.prototype.loadJSON=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];C.default._validateParameters("loadJSON",p);for(var g,x,E,S=p[0],L={},q="json",J=1;J<p.length;J++){var G=p[J];"string"==typeof G?"jsonp"!==G&&"json"!==G||(q=G):"function"==typeof G?g?x=G:g=G:"object"===D(G)&&(G.hasOwnProperty("jsonpCallback")||G.hasOwnProperty("jsonpCallbackFunction"))&&(q="jsonp",E=G)}var V=this;return this.httpDo(S,"GET",E,q,function(K){for(var H in K)L[H]=K[H];void 0!==g&&g(K),V._decrementPreload()},function(K){if(C.default._friendlyFileLoadError(5,S),!x)throw K;x(K)}),L},C.default.prototype.loadStrings=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];C.default._validateParameters("loadStrings",p);for(var g,x,E=[],S=1;S<p.length;S++){var L=p[S];"function"==typeof L&&(void 0===g?g=L:void 0===x&&(x=L))}var q=this;return C.default.prototype.httpDo.call(this,p[0],"GET","text",function(J){for(var G=J.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),V=0,K=G.length;V<K;V+=32768)Array.prototype.push.apply(E,G.slice(V,Math.min(V+32768,K)));void 0!==g&&g(E),q._decrementPreload()},function(J){if(C.default._friendlyFileLoadError(3,J),!x)throw J;x(J)}),E},C.default.prototype.loadTable=function(h){var p,m,g,x=[],E=!1,S=h.substring(h.lastIndexOf(".")+1,h.length);"csv"===S?g=",":"ssv"===S?g=";":"tsv"===S&&(g="\t");for(var L=1;L<arguments.length;L++)"function"==typeof arguments[L]?void 0===p?p=arguments[L]:void 0===m&&(m=arguments[L]):"string"==typeof arguments[L]&&(x.push(arguments[L]),"header"===arguments[L]&&(E=!0),"csv"===arguments[L]?g=",":"ssv"===arguments[L]?g=";":"tsv"===arguments[L]&&(g="\t"));var q=new C.default.Table,J=this;return this.httpDo(h,"GET","table",function(G){for(var V,K,H={},Y=[],we=0,Se=null,oe=function(){H.currentState=0,H.token=""},ge=function(){Se.push(H.token),oe()},re=function(){H.currentState=4,Y.push(Se),Se=null};;){if(null==(V=G[we++])){if(H.escaped)throw new Error("Unclosed quote in file.");if(Se){ge(),re();break}}if(null===Se&&(H.escaped=!1,Se=[],oe()),0===H.currentState){if('"'===V){H.escaped=!0,H.currentState=1;continue}H.currentState=1}if(1===H.currentState&&H.escaped)if('"'===V)'"'===G[we]?(H.token+='"',we++):(H.escaped=!1,H.currentState=2);else{if("\r"===V)continue;H.token+=V}else"\r"===V?("\n"===G[we]&&we++,ge(),re()):"\n"===V?(ge(),re()):V===g?ge():1===H.currentState&&(H.token+=V)}if(E)q.columns=Y.shift();else for(var Q=0;Q<Y[0].length;Q++)q.columns[Q]="null";for(var fe=0;fe<Y.length;fe++)(1!==Y[fe].length||"undefined"!==Y[fe][0]&&""!==Y[fe][0])&&((K=new C.default.TableRow).arr=Y[fe],K.obj=function(De,it){if(void 0===(it=it||[]))for(var le=0;le<De.length;le++)it[le.toString()]=le;return Object.fromEntries(it.map(function(z,ye){return[z,De[ye]]}))}(Y[fe],q.columns),q.addRow(K));"function"==typeof p&&p(q),J._decrementPreload()},function(G){C.default._friendlyFileLoadError(2,h),m?m(G):console.error(G)}),q},C.default.prototype.loadXML=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];for(var g,x,E=new C.default.XML,S=1;S<p.length;S++){var L=p[S];"function"==typeof L&&(void 0===g?g=L:void 0===x&&(x=L))}var q=this;return this.httpDo(p[0],"GET","xml",function(J){for(var G in J)E[G]=J[G];void 0!==g&&g(E),q._decrementPreload()},function(J){if(C.default._friendlyFileLoadError(1,J),!x)throw J;x(J)}),E},C.default.prototype.loadBytes=function(h,p,m){var g={},x=this;return this.httpDo(h,"GET","arrayBuffer",function(E){g.bytes=new Uint8Array(E),"function"==typeof p&&p(g),x._decrementPreload()},function(E){if(C.default._friendlyFileLoadError(6,h),!m)throw E;m(E)}),g},C.default.prototype.httpGet=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return C.default._validateParameters("httpGet",p),p.splice(1,0,"GET"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpPost=function(){for(var h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return C.default._validateParameters("httpPost",p),p.splice(1,0,"POST"),C.default.prototype.httpDo.apply(this,p)},C.default.prototype.httpDo=function(){for(var h,p,m,g={},x=0,E="text/plain",S=arguments.length-1;0<S&&"function"==typeof(S<0||arguments.length<=S?void 0:arguments[S]);S--)x++;var q=arguments.length<=0?void 0:arguments[0];if(2==(L=arguments.length-x)&&"string"==typeof q&&"object"===D(arguments.length<=1?void 0:arguments[1]))te=new Request(q,arguments.length<=1?void 0:arguments[1]),p=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var J,G="GET",V=1;V<arguments.length;V++){var K=V<0||arguments.length<=V?void 0:arguments[V];if("string"==typeof K)"GET"===K||"POST"===K||"PUT"===K||"DELETE"===K?G=K:"json"===K||"jsonp"===K||"binary"===K||"arrayBuffer"===K||"xml"===K||"text"===K||"table"===K?h=K:J=K;else if("number"==typeof K)J=K.toString();else if("object"===D(K))if(K.hasOwnProperty("jsonpCallback")||K.hasOwnProperty("jsonpCallbackFunction"))for(var H in K)g[H]=K[H];else E=K instanceof C.default.XML?(J=K.serialize(),"application/xml"):(J=JSON.stringify(K),"application/json");else"function"==typeof K&&(p?m=K:p=K)}var L="GET"===G?new Headers:new Headers({"Content-Type":E}),te=new Request(q,{method:G,mode:"cors",body:J,headers:L})}return(L=(L="jsonp"===(h=h||(q.includes("json")?"json":q.includes("xml")?"xml":"text"))?(0,b.default)(q,g):fetch(te)).then(function(Y){if(!Y.ok)throw(we=new Error(Y.body)).status=Y.status,we.ok=!1,we;var we=0;switch((we="jsonp"!==h?Y.headers.get("content-length"):we)&&64e6<we&&C.default._friendlyFileLoadError(7,q),h){case"json":case"jsonp":return Y.json();case"binary":return Y.blob();case"arrayBuffer":return Y.arrayBuffer();case"xml":return Y.text().then(function(Se){return Se=(new DOMParser).parseFromString(Se,"text/xml"),new C.default.XML(Se.documentElement)});default:return Y.text()}})).then(p||function(){}),L.catch(m||console.error),L},window.URL=window.URL||window.webkitURL,C.default.prototype._pWriters=[],C.default.prototype.createWriter=function(h,p){var m,g;for(g in C.default.prototype._pWriters)if(C.default.prototype._pWriters[g].name===h)return m=new C.default.PrintWriter(h+this.millis(),p),C.default.prototype._pWriters.push(m),m;return m=new C.default.PrintWriter(h,p),C.default.prototype._pWriters.push(m),m},C.default.PrintWriter=function(h,p){var m=this;this.name=h,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,"\n")},this.clear=function(){this.content=""},this.close=function(){var g,x=[];for(g in x.push(this.content),C.default.prototype.writeFile(x,h,p),C.default.prototype._pWriters)C.default.prototype._pWriters[g].name===this.name&&C.default.prototype._pWriters.splice(g,1);m.clear(),m={}}},C.default.prototype.save=function(h,p,m){var g=arguments,x=(this._curElement||this).elt;if(0===g.length)C.default.prototype.saveCanvas(x);else if(g[0]instanceof C.default.Renderer||g[0]instanceof C.default.Graphics)C.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(1===g.length&&"string"==typeof g[0])C.default.prototype.saveCanvas(x,g[0]);else switch(f(g[1],g[2])[1]){case"json":return void C.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void C.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?C.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof C.default.Table?C.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof C.default.Image?C.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof C.default.SoundFile&&C.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},C.default.prototype.saveJSON=function(h,p,m){C.default._validateParameters("saveJSON",arguments),m=m?JSON.stringify(h):JSON.stringify(h,void 0,2),this.saveStrings(m.split("\n"),p,"json")},C.default.prototype.saveJSONObject=C.default.prototype.saveJSON,C.default.prototype.saveJSONArray=C.default.prototype.saveJSON,C.default.prototype.saveStrings=function(h,p,m,g){C.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(p,m||"txt"),E=0;E<h.length;E++)x.write(g?h[E]+"\r\n":h[E]+"\n");x.close(),x.clear()},C.default.prototype.saveTable=function(h,p,m){C.default._validateParameters("saveTable",arguments),g=void 0===m?p.substring(p.lastIndexOf(".")+1,p.length):m;var g,x=this.createWriter(p,g),E=h.columns,S="tsv"===g?"\t":",";if("html"!==g){if("0"!==E[0]){for(var L=0;L<E.length;L++)x.write(L<E.length-1?E[L]+S:E[L]);x.write("\n")}for(var q=0;q<h.rows.length;q++){var J=void 0;for(J=0;J<h.rows[q].arr.length;J++)J<h.rows[q].arr.length-1?"csv"===g&&String(h.rows[q].arr[J]).includes(",")?x.write('"'+h.rows[q].arr[J]+'"'+S):x.write(h.rows[q].arr[J]+S):"csv"===g&&String(h.rows[q].arr[J]).includes(",")?x.write('"'+h.rows[q].arr[J]+'"'):x.write(h.rows[q].arr[J]);x.write("\n")}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),"0"!==E[0]){x.print("    <tr>");for(var G=0;G<E.length;G++){var V=d(E[G]);x.print("      <td>".concat(V)),x.print("      </td>")}x.print("    </tr>")}for(var K=0;K<h.rows.length;K++){x.print("    <tr>");for(var H=0;H<h.columns.length;H++){var te=d(h.rows[K].getString(H));x.print("      <td>".concat(te)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},C.default.prototype.writeFile=function(x,p,m){var g="application/octet-stream";C.default.prototype._isSafari()&&(g="text/plain"),x=new Blob(x,{type:g}),C.default.prototype.downloadFile(x,p,m)},C.default.prototype.downloadFile=function(h,x,E){var g;E=(x=f(x,E))[0],h instanceof Blob?w.default.saveAs(h,E):((g=document.createElement("a")).href=h,g.download=E,g.onclick=function(S){document.body.removeChild(S.target),S.stopPropagation()},g.style.display="none",document.body.appendChild(g),C.default.prototype._isSafari()&&(h=(h='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(h)),g.click())},C.default.prototype._checkFileExtension=f,C.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},Z.default=l=C.default},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.replace"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Table=function(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=d}var w,I;return w=b,(I=[{key:"addRow",value:function(d){if(void 0===(d=d||new M.default.TableRow).arr||void 0===d.obj)throw new Error("invalid TableRow: ".concat(d));return(d.table=this).rows.push(d),d}},{key:"removeRow",value:function(d){this.rows[d].table=null,d=this.rows.splice(d+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(d)}},{key:"getRow",value:function(d){return this.rows[d]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(d,f){if("string"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[f]===d)return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].arr[f]===d)return this.rows[p];return null}},{key:"findRows",value:function(d,f){var h=[];if("string"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].obj[f]===d&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[f]===d&&h.push(this.rows[m]);return h}},{key:"matchRow",value:function(d,f){if("number"==typeof f){for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[f].match(d))return this.rows[h]}else for(var p=0;p<this.rows.length;p++)if(this.rows[p].obj[f].match(d))return this.rows[p];return null}},{key:"matchRows",value:function(d,f){var h=[];if("number"==typeof f)for(var p=0;p<this.rows.length;p++)this.rows[p].arr[f].match(d)&&h.push(this.rows[p]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[f].match(d)&&h.push(this.rows[m]);return h}},{key:"getColumn",value:function(d){var f=[];if("string"==typeof d)for(var h=0;h<this.rows.length;h++)f.push(this.rows[h].obj[d]);else for(var p=0;p<this.rows.length;p++)f.push(this.rows[p].arr[d]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(d){this.columns.push(d||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(d,f){for(var h=[],p=0;p<d.length;p++)h.push(d.charAt(p).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(h.join("|"),"g");if(void 0===f)for(var g=0;g<this.columns.length;g++)for(var x=0;x<this.rows.length;x++){var E=(E=this.rows[x].arr[g]).replace(m,"");this.rows[x].arr[g]=E,this.rows[x].obj[this.columns[g]]=E}else if("string"==typeof f)for(var S=0;S<this.rows.length;S++){var L=(L=this.rows[S].obj[f]).replace(m,""),q=(this.rows[S].obj[f]=L,this.columns.indexOf(f));this.rows[S].arr[q]=L}else for(var J=0;J<this.rows.length;J++){var G=(G=this.rows[J].arr[f]).replace(m,"");this.rows[J].arr[f]=G,this.rows[J].obj[this.columns[f]]=G}}},{key:"trim",value:function(d){var f=new RegExp(" ","g");if(void 0===d)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var m=(m=this.rows[p].arr[h]).replace(f,"");this.rows[p].arr[h]=m,this.rows[p].obj[this.columns[h]]=m}else if("string"==typeof d)for(var g=0;g<this.rows.length;g++){var x=(x=this.rows[g].obj[d]).replace(f,""),E=(this.rows[g].obj[d]=x,this.columns.indexOf(d));this.rows[g].arr[E]=x}else for(var S=0;S<this.rows.length;S++){var L=(L=this.rows[S].arr[d]).replace(f,"");this.rows[S].arr[d]=L,this.rows[S].obj[this.columns[d]]=L}}},{key:"removeColumn",value:function(p){var f,h;"string"==typeof p?h=this.columns.indexOf(f=p):f=this.columns[h=p],p=this.columns.splice(h+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(p);for(var m=0;m<this.rows.length;m++){var g=this.rows[m].arr,x=g.splice(h+1,g.length);g.pop(),this.rows[m].arr=g.concat(x),delete this.rows[m].obj[f]}}},{key:"set",value:function(d,f,h){this.rows[d].set(f,h)}},{key:"setNum",value:function(d,f,h){this.rows[d].setNum(f,h)}},{key:"setString",value:function(d,f,h){this.rows[d].setString(f,h)}},{key:"get",value:function(d,f){return this.rows[d].get(f)}},{key:"getNum",value:function(d,f){return this.rows[d].getNum(f)}},{key:"getString",value:function(d,f){return this.rows[d].getString(f)}},{key:"getObject",value:function(d){for(var f,h={},p=0;p<this.rows.length;p++)if(f=this.rows[p].obj,"string"==typeof d){if(!(0<=this.columns.indexOf(d)))throw new Error('This table has no column named "'.concat(d,'"'));h[f[d]]=f}else h[p]=this.rows[p].obj;return h}},{key:"getArray",value:function(){for(var d=[],f=0;f<this.rows.length;f++)d.push(this.rows[f].arr);return d}}])&&C(w.prototype,I),b}(),Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(l,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.from-entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.TableRow=function(){function C(D,d){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");var f=[];D&&(f=D.split(d=d||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var b,w;return b=C,(w=[{key:"set",value:function(D,d){if("string"==typeof D){var f=this.table.columns.indexOf(D);if(!(0<=f))throw new Error('This table has no column named "'.concat(D,'"'));this.obj[D]=d,this.arr[f]=d}else{if(!(D<this.table.columns.length))throw new Error("Column #".concat(D," is out of the range of this table"));this.arr[D]=d,this.obj[f=this.table.columns[D]]=d}}},{key:"setNum",value:function(D,d){d=parseFloat(d),this.set(D,d)}},{key:"setString",value:function(D,d){d=d.toString(),this.set(D,d)}},{key:"get",value:function(D){return("string"==typeof D?this.obj:this.arr)[D]}},{key:"getNum",value:function(D){var d=parseFloat("string"==typeof D?this.obj[D]:this.arr[D]);if("NaN"===d.toString())throw"Error: ".concat(this.obj[D]," is NaN (Not a Number)");return d}},{key:"getString",value:function(D){return("string"==typeof D?this.obj:this.arr)[D].toString()}}])&&M(b.prototype,w),C}(),Z.default=l=l.default},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.XML=function(){function w(f){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");f?this.DOM=f:(f=document.implementation.createDocument(null,"doc"),this.DOM=f.createElement("root"))}var I,D;return I=w,(D=[{key:"getParent",value:function(){return new M.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(f){var h=this.DOM.innerHTML,p=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(f);m.innerHTML=h;for(var g=0;g<p.length;g++)m.setAttribute(p[g].nodeName,p[g].nodeValue);this.DOM=m}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var f=[],h=0;h<this.DOM.childNodes.length;h++)f.push(this.DOM.childNodes[h].nodeName);return f}},{key:"getChildren",value:function(f){return function b(w){for(var I=[],D=0;D<w.length;D++)I.push(new M.default.XML(w[D]));return I}(f?this.DOM.getElementsByTagName(f):this.DOM.children)}},{key:"getChild",value:function(f){if("string"!=typeof f)return new M.default.XML(this.DOM.children[f]);var h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.children[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value;if(E.tagName===f)return new M.default.XML(E)}}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"addChild",value:function(f){f instanceof M.default.XML&&this.DOM.appendChild(f.DOM)}},{key:"removeChild",value:function(f){var h=-1;if("string"==typeof f){for(var p=0;p<this.DOM.children.length;p++)if(this.DOM.children[p].tagName===f){h=p;break}}else h=f;-1!==h&&this.DOM.removeChild(this.DOM.children[h])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=this.DOM.attributes[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)f.push(g.value.nodeName)}catch(S){p=!0,m=S}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}},{key:"hasAttribute",value:function(f){var h={},p=!0,m=!1,g=void 0;try{for(var x,E=this.DOM.attributes[Symbol.iterator]();!(p=(x=E.next()).done);p=!0){var S=x.value;h[S.nodeName]=S.nodeValue}}catch(L){m=!0,g=L}finally{try{p||null==E.return||E.return()}finally{if(m)throw g}}return!!h[f]}},{key:"getNum",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var L=E.value;p[L.nodeName]=L.nodeValue}}catch(q){g=!0,x=q}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return Number(p[f])||h||0}},{key:"getString",value:function(f,h){var p={},m=!0,g=!1,x=void 0;try{for(var E,S=this.DOM.attributes[Symbol.iterator]();!(m=(E=S.next()).done);m=!0){var L=E.value;p[L.nodeName]=L.nodeValue}}catch(q){g=!0,x=q}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}return p[f]?String(p[f]):h||null}},{key:"setAttribute",value:function(f,h){this.DOM.setAttribute(f,h)}},{key:"getContent",value:function(f){var h=this.DOM.textContent;return(h=h.replace(/\s\s+/g,","))||f||null}},{key:"setContent",value:function(f){this.DOM.children.length||(this.DOM.textContent=f)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&C(I.prototype,D),w}(),Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.string.includes"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(b){return function(w){if(Array.isArray(w)){for(var I=0,D=new Array(w.length);I<w.length;I++)D[I]=w[I];return D}}(b)||function(w){if(Symbol.iterator in Object(w)||"[object Arguments]"===Object.prototype.toString.call(w))return Array.from(w)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}M.default.prototype.abs=Math.abs,M.default.prototype.ceil=Math.ceil,M.default.prototype.constrain=function(b,w,I){return M.default._validateParameters("constrain",arguments),Math.max(Math.min(b,I),w)},M.default.prototype.dist=function(){for(var b=arguments.length,w=new Array(b),I=0;I<b;I++)w[I]=arguments[I];return M.default._validateParameters("dist",w),4===w.length?Math.hypot(w[2]-w[0],w[3]-w[1]):6===w.length?Math.hypot(w[3]-w[0],w[4]-w[1],w[5]-w[2]):void 0},M.default.prototype.exp=Math.exp,M.default.prototype.floor=Math.floor,M.default.prototype.lerp=function(b,w,I){return M.default._validateParameters("lerp",arguments),I*(w-b)+b},M.default.prototype.log=Math.log,M.default.prototype.mag=function(b,w){return M.default._validateParameters("mag",arguments),Math.hypot(b,w)},M.default.prototype.map=function(b,w,I,D,d,f){return M.default._validateParameters("map",arguments),b=(b-w)/(I-w)*(d-D)+D,f?D<d?this.constrain(b,D,d):this.constrain(b,d,D):b},M.default.prototype.max=function(){for(var b=function(d){return Math.max.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.min=function(){for(var b=function(d){return Math.min.apply(Math,C(d))},w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return Array.isArray(I[0])?b(I[0]):b(I)},M.default.prototype.norm=function(b,w,I){return M.default._validateParameters("norm",arguments),this.map(b,w,I,0,1)},M.default.prototype.pow=Math.pow,M.default.prototype.round=function(b,w){return w?(w=Math.pow(10,w),Math.round(b*w)/w):Math.round(b)},M.default.prototype.sq=function(b){return b*b},M.default.prototype.sqrt=Math.sqrt,M.default.prototype.fract=function(D){M.default._validateParameters("fract",arguments);var w,I=0;return D=Number(D),isNaN(D)||Math.abs(D)===1/0?D:(D<0&&(D=-D,I=1),String(D).includes(".")&&!String(D).includes("e")?(w=+("0"+(w=String(D)).slice(w.indexOf("."))),Math.abs(I-w)):D<1?Math.abs(I-D):0)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(w,I,D){return(C=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(d,f,h){var p=[null];return p.push.apply(p,f),f=new(Function.bind.apply(d,p)),h&&b(f,h.prototype),f}).apply(null,arguments)}function b(w,I){return(b=Object.setPrototypeOf||function(D,d){return D.__proto__=d,D})(w,I)}M.default.prototype.createVector=function(w,I,D){return this instanceof M.default?C(M.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new M.default.Vector(w,I,D)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(D,be,Z){"use strict";function M(d){return.5*(1-Math.cos(d*Math.PI))}Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,D=(D=D("../core/main"))&&D.__esModule?D:{default:D};var C,b=4095,w=4,I=.5;D.default.prototype.noise=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==C){C=new Array(4096);for(var p=0;p<4096;p++)C[p]=Math.random()}d<0&&(d=-d),f<0&&(f=-f),h<0&&(h=-h);for(var m,g,x=Math.floor(d),E=Math.floor(f),S=Math.floor(h),L=d-x,q=f-E,J=h-S,G=0,V=.5,K=0;K<w;K++){var H=x+(E<<4)+(S<<8),te=M(L),Y=M(q),we=C[H&b];we+=te*(C[H+1&b]-we),m=C[H+16&b],we+=Y*((m+=te*(C[H+16+1&b]-m))-we),m=C[(H+=256)&b],m+=te*(C[H+1&b]-m),g=C[H+16&b],m+=Y*((g+=te*(C[H+16+1&b]-g))-m),G+=(we+=M(J)*(m-we))*V,V*=I,x<<=1,E<<=1,S<<=1,1<=(L*=2)&&(x++,L--),1<=(q*=2)&&(E++,q--),1<=(J*=2)&&(S++,J--)}return G},D.default.prototype.noiseDetail=function(d,f){0<d&&(w=d),0<f&&(I=f)},D.default.prototype.noiseSeed=function(d){p=4294967296;var h,p,m_rand=function(){return(h=(1664525*h+1013904223)%p)/p};(function(x){h=(null==x?Math.random()*p:x)>>>0})(d),C=new Array(4096);for(var g=0;g<4096;g++)C[g]=m_rand()},Z.default=D=D.default},{"../core/main":283}],316:[function(l,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.some"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.number.epsilon"),l("core-js/modules/es.number.is-finite"),l("core-js/modules/es.string.sub"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(d=l("../core/main"))&&d.__esModule?d:{default:d},w=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("../core/constants"));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h){for(var p=0;p<h.length;p++){var m=h[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}b.default.Vector=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var x,E,S="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,E=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,E=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=E,this.z=S}var h,p,m;return h=f,m=[{key:"fromAngle",value:function(g){var x=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new b.default.Vector(x*Math.cos(g),x*Math.sin(g),0)}},{key:"fromAngles",value:function(J,L){var E=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,S=Math.cos(L),q=(L=Math.sin(L),Math.cos(J));return J=Math.sin(J),new b.default.Vector(E*J*L,-E*q,E*J*S)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*w.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*w.TWO_PI,x=2*Math.random()-1,E=(S=Math.sqrt(1-x*x))*Math.cos(g),S=S*Math.sin(g);return new b.default.Vector(E,S,x)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),q.add(L),q}},{key:"rem",value:function(g,x){if(g instanceof b.default.Vector&&x instanceof b.default.Vector)return(g=g.copy()).rem(x),g}},{key:"sub",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),q.sub(L),q}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),q.mult(L),q}},{key:"rotate",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return 2===x.length?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),q.set(S)),q.rotate(L),q}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return q?q.set(S):(q=S.copy(),3===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),q.div(L),q}},{key:"dot",value:function(g,x){return g.dot(x)}},{key:"cross",value:function(g,x){return g.cross(x)}},{key:"dist",value:function(g,x){return g.dist(x)}},{key:"lerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2],J=x[3];return J?J.set(S):(J=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),J.lerp(L,q),J}},{key:"slerp",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2],J=x[3];return J?J.set(S):(J=S.copy(),4===x.length&&b.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),J.slerp(L,q),J}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1];return x.length<2?L=S.copy():(L instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),L.set(S)),L.normalize()}},{key:"limit",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),q.set(S)),q.limit(L)}},{key:"setMag",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),q.set(S)),q.setMag(L)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,x){return g.angleBetween(x)}},{key:"reflect",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];return x.length<3?q=S.copy():(q instanceof b.default.Vector||b.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),q.set(S)),q.reflect(L)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,x){var E;return g instanceof b.default.Vector?E=g:Array.isArray(g)?E=(new b.default.Vector).set(g):b.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),E.equals(x)}}],(p=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,x,E){return g instanceof b.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=x||0,this.z=E||0),this}},{key:"copy",value:function(){return this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new b.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,x,E){return g instanceof b.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=x||0,this.z+=E||0),this}},{key:"calculateRemainder2D",value:function(g,x){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(g,x,E){return 0!==g&&(this.x=this.x%g),0!==x&&(this.y=this.y%x),0!==E&&(this.z=this.z%E),this}},{key:"rem",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,L,q,J=x[0],G=x[1],V=x[2];if(J instanceof b.default.Vector){if([J.x,J.y,J.z].every(Number.isFinite))return S=parseFloat(J.x),L=parseFloat(J.y),q=parseFloat(J.z),this.calculateRemainder3D(S,L,q)}else if(Array.isArray(J)){if(J.every(Number.isFinite))return 2===J.length?this.calculateRemainder2D(J[0],J[1]):3===J.length?this.calculateRemainder3D(J[0],J[1],J[2]):void 0}else if(1===x.length){if(Number.isFinite(J)&&0!==J)return this.x=this.x%J,this.y=this.y%J,this.z=this.z%J,this}else if(2===x.length){if(x.every(Number.isFinite))return this.calculateRemainder2D(J,G)}else if(3===x.length&&x.every(Number.isFinite))return this.calculateRemainder3D(J,G,V)}},{key:"sub",value:function(g,x,E){return g instanceof b.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=x||0,this.z-=E||0),this}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S,L=x[0],q=x[1],J=x[2];return L instanceof b.default.Vector?Number.isFinite(L.x)&&Number.isFinite(L.y)&&Number.isFinite(L.z)&&"number"==typeof L.x&&"number"==typeof L.y&&"number"==typeof L.z?(this.x*=L.x,this.y*=L.y,this.z*=L.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(L)?L.every(function(G){return Number.isFinite(G)})&&L.every(function(G){return"number"==typeof G})?1===L.length?(this.x*=L[0],this.y*=L[0],this.z*=L[0]):2===L.length?(this.x*=L[0],this.y*=L[1]):3===L.length&&(this.x*=L[0],this.y*=L[1],this.z*=L[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(S=x).every(function(G){return Number.isFinite(G)})&&S.every(function(G){return"number"==typeof G})?(1===x.length&&(this.x*=L,this.y*=L,this.z*=L),2===x.length&&(this.x*=L,this.y*=q),3===x.length&&(this.x*=L,this.y*=q,this.z*=J)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),E=0;E<g;E++)x[E]=arguments[E];var S=x[0],L=x[1],q=x[2];if(S instanceof b.default.Vector)if(Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&"number"==typeof S.x&&"number"==typeof S.y&&"number"==typeof S.z){var J=0===S.z&&0===this.z;if(0===S.x||0===S.y||!J&&0===S.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=S.x,this.y/=S.y,J||(this.z/=S.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(S))if(S.every(Number.isFinite)&&S.every(function(G){return"number"==typeof G})){if(S.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===S.length?(this.x/=S[0],this.y/=S[0],this.z/=S[0]):2===S.length?(this.x/=S[0],this.y/=S[1]):3===S.length&&(this.x/=S[0],this.y/=S[1],this.z/=S[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(G){return"number"==typeof G})){if(x.some(function(G){return 0===G}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===x.length&&(this.x/=S,this.y/=S,this.z/=S),2===x.length&&(this.x/=S,this.y/=L),3===x.length&&(this.x/=S,this.y/=L,this.z/=q)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,x=this.y,E=this.z;return g*g+x*x+E*E}},{key:"dot",value:function(g,x,E){return g instanceof b.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(x||0)+this.z*(E||0)}},{key:"cross",value:function(S){var x=this.y*S.z-this.z*S.y,E=this.z*S.x-this.x*S.z;return S=this.x*S.y-this.y*S.x,this.isPInst?new b.default.Vector(this._fromRadians,this._toRadians,x,E,S):new b.default.Vector(x,E,S)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return 0!==g&&this.mult(1/g),this}},{key:"limit",value:function(g){var x=this.magSq();return g*g<x&&this.div(Math.sqrt(x)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var x=this.mag();return this.x=x*Math.cos(g),this.y=x*Math.sin(g),this}},{key:"rotate",value:function(x){x=this.heading()+x;var E=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*E,this.y=Math.sin(x)*E,this}},{key:"angleBetween",value:function(g){var x;return this.magSq()*g.magSq()==0?NaN:(x=this.cross(g),g=Math.atan2(x.mag(),this.dot(g))*Math.sign(x.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,x,E,S){return g instanceof b.default.Vector?this.lerp(g.x,g.y,g.z,x):(this.x+=(g-this.x)*S||0,this.y+=(x-this.y)*S||0,this.z+=(E-this.z)*S||0,this)}},{key:"slerp",value:function(g,x){if(0!==x){if(1===x)return this.set(g);var E=this.mag(),S=g.mag();if(E*S==0)this.mult(1-x).add(g.x*x,g.y*x,g.z*x);else{var L=this.cross(g),q=L.mag(),J=Math.atan2(q,this.dot(g));if(0<q)L.x/=q,L.y/=q,L.z/=q;else{if(J<.5*Math.PI)return this.mult(1-x).add(g.x*x,g.y*x,g.z*x),this;0===this.z&&0===g.z?L.set(0,0,1):0!==this.x?L.set(this.y,-this.x,0).normalize():L.set(1,0,0)}q=L.cross(this),L=(g=1-x+x*S/E)*Math.cos(x*J),S=g*Math.sin(x*J),this.x=this.x*L+q.x*S,this.y=this.y*L+q.y*S,this.z=this.z*L+q.z*S}}return this}},{key:"reflect",value:function(g){return g=b.default.Vector.normalize(g),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(q,x,E){var S,L;return q=q instanceof b.default.Vector?(S=q.x||0,L=q.y||0,q.z||0):Array.isArray(q)?(S=q[0]||0,L=q[1]||0,q[2]||0):(S=q||0,L=x||0,E||0),this.x===S&&this.y===L&&this.z===q}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(g){return Math.abs(+(g||0))<=Number.EPSILON?0:g}}])&&D(h.prototype,p),m&&D(h,m),f}();var d=b.default.Vector;Z.default=d},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(I,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I},C="_lcg_random_state",b=4294967296,w=0;M.default.prototype._lcg=function(D){return this[D]=(1664525*this[D]+1013904223)%b,this[D]/b},M.default.prototype._lcgSetSeed=function(D,d){this[D]=(null==d?Math.random()*b:d)>>>0},M.default.prototype.randomSeed=function(D){this._lcgSetSeed(C,D),this._gaussian_previous=!1},M.default.prototype.random=function(D,d){var f,h;return M.default._validateParameters("random",arguments),f=null!=this[C]?this._lcg(C):Math.random(),void 0===D?f:void 0===d?Array.isArray(D)?D[Math.floor(f*D.length)]:f*D:(d<D&&(h=D,D=d,d=h),f*(d-D)+D)},M.default.prototype.randomGaussian=function(D){var d,f,h,p,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)d=w,this._gaussian_previous=!1;else{for(;1<=(p=(f=this.random(2)-1)*f+(h=this.random(2)-1)*h););d=f*(p=Math.sqrt(-2*Math.log(p)/p)),w=h*p,this._gaussian_previous=!0}return d*m+(D||0)},Z.default=I=M.default},{"../core/main":283}],318:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.prototype._angleMode=w.RADIANS,b.default.prototype.acos=function(d){return this._fromRadians(Math.acos(d))},b.default.prototype.asin=function(d){return this._fromRadians(Math.asin(d))},b.default.prototype.atan=function(d){return this._fromRadians(Math.atan(d))},b.default.prototype.atan2=function(d,f){return this._fromRadians(Math.atan2(d,f))},b.default.prototype.cos=function(d){return Math.cos(this._toRadians(d))},b.default.prototype.sin=function(d){return Math.sin(this._toRadians(d))},b.default.prototype.tan=function(d){return Math.tan(this._toRadians(d))},b.default.prototype.degrees=function(d){return d*w.RAD_TO_DEG},b.default.prototype.radians=function(d){return d*w.DEG_TO_RAD},b.default.prototype.angleMode=function(d){if(b.default._validateParameters("angleMode",arguments),void 0===d)return this._angleMode;d!==w.DEGREES&&d!==w.RADIANS||d!==this._angleMode&&(d===w.RADIANS?(this._setProperty("pRotationX",this.pRotationX*w.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*w.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*w.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*w.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*w.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*w.RAD_TO_DEG)),this._angleMode=d)},b.default.prototype._toRadians=function(d){return this._angleMode===w.DEGREES?d*w.DEG_TO_RAD:d},b.default.prototype._toDegrees=function(d){return this._angleMode===w.RADIANS?d*w.RAD_TO_DEG:d},b.default.prototype._fromRadians=function(d){return this._angleMode===w.DEGREES?d*w.RAD_TO_DEG:d},b.default.prototype._fromDegrees=function(d){return this._angleMode===w.RADIANS?d*w.DEG_TO_RAD:d};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(l,be,Z){"use strict";l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.textAlign=function(C,b){var w;return M.default._validateParameters("textAlign",arguments),(w=this._renderer).textAlign.apply(w,arguments)},M.default.prototype.textLeading=function(C){var b;return M.default._validateParameters("textLeading",arguments),(b=this._renderer).textLeading.apply(b,arguments)},M.default.prototype.textSize=function(C){var b;return M.default._validateParameters("textSize",arguments),(b=this._renderer).textSize.apply(b,arguments)},M.default.prototype.textStyle=function(C){var b;return M.default._validateParameters("textStyle",arguments),(b=this._renderer).textStyle.apply(b,arguments)},M.default.prototype.textWidth=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];if(b[0]+="",M.default._validateParameters("textWidth",b),0===b[0].length)return 0;for(var I=b[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),D=[],d=0;d<I.length;d++)D.push(this._renderer.textWidth(I[d]));return Math.max.apply(Math,D)},M.default.prototype.textAscent=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("textAscent",b),this._renderer.textAscent()},M.default.prototype.textDescent=function(){for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("textDescent",b),this._renderer.textDescent()},M.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},M.default.prototype.textWrap=function(C){return M.default._validateParameters("textWrap",[C]),this._renderer.textWrap(C)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(l,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.split"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=d(l("../core/constants")),I=d(l("opentype.js"));function D(){var h;return"function"!=typeof WeakMap?null:(D=function(){return h},h=new WeakMap)}function d(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=D();if(p&&p.has(h))return p.get(h);var m,g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&((g=E?Object.getOwnPropertyDescriptor(h,m):null)&&(g.get||g.set)?Object.defineProperty(x,m,g):x[m]=h[m]);return x.default=h,p&&p.set(h,x),x}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),b.default.prototype.loadFont=function(h,p,m){b.default._validateParameters("loadFont",arguments);var g=new b.default.Font(this),x=this;return I.load(h,function(L,q){if(L)return b.default._friendlyFileLoadError(4,h),void 0!==m?m(L):void console.error(L,h);g.font=q,void 0!==p&&p(g),x._decrementPreload();var J=(q=(L=h.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:L.slice(q+1);["ttf","otf","woff","woff2"].includes(J)&&(J=L.slice(0,-1!==q?q:0),(L=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(J,";\nsrc: url(").concat(h,");\n}\n"))),document.head.appendChild(L))}),g},b.default.prototype.text=function(h,p,m,g,x){var E;return b.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(E=this._renderer).text.apply(E,arguments):this},b.default.prototype.textFont=function(h,p){if(b.default._validateParameters("textFont",arguments),arguments.length){if(h)return this._renderer._setProperty("_textFont",h),p&&(this._renderer._setProperty("_textSize",p),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",p*w._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=b.default;Z.default=f},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(l,be,Z){"use strict";function M(G){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(G)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.function.name"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(C=l("../core/main"))&&C.__esModule?C:{default:C},b=function(G){if(G&&G.__esModule)return G;if(null===G||"object"!==I(G)&&"function"!=typeof G)return{default:G};var V=w();if(V&&V.has(G))return V.get(G);var K,H={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(K in G){var Y;Object.prototype.hasOwnProperty.call(G,K)&&((Y=te?Object.getOwnPropertyDescriptor(G,K):null)&&(Y.get||Y.set)?Object.defineProperty(H,K,Y):H[K]=G[K])}return H.default=G,V&&V.set(G,H),H}(l("../core/constants"));function w(){var G;return"function"!=typeof WeakMap?null:(w=function(){return G},G=new WeakMap)}function I(G){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(V){return M(V)}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":M(V)})(G)}function D(G,V){for(var K=0;K<V.length;K++){var H=V[K];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(G,H.key,H)}}function d(G,V){var K=G.length;return G[V<0?V%K+K:V%K]}function f(G,V,K,H){var te,Y,we;return H?(void 0===f.tmpPoint1&&(f.tmpPoint1=[],f.tmpPoint2=[]),we=f.tmpPoint2,(Y=f.tmpPoint1).x=V.x-G.x,Y.y=V.y-G.y,we.x=K.x-V.x,we.y=K.y-V.y,te=Y.x*we.x+Y.y*we.y,Y=Math.sqrt(Y.x*Y.x+Y.y*Y.y),we=Math.sqrt(we.x*we.x+we.y*we.y),Math.acos(te/(Y*we))<H):(V[0]-G[0])*(K[1]-G[1])-(K[0]-G[0])*(V[1]-G[1])==0}function h(z,Ue,ye,Je,vt,Y,we,Se,oe){var ge=1-oe,re=(Q=Math.pow(ge,3))*z+3*(fe=Math.pow(ge,2))*oe*ye+3*ge*oe*oe*vt+(De=(le=oe*oe)*oe)*we,Q=Q*Ue+3*fe*oe*Je+3*ge*oe*oe*Y+De*Se,fe=z+2*oe*(ye-z)+le*(vt-2*ye+z),De=Ue+2*oe*(Je-Ue)+le*(Y-2*Je+Ue),it=ye+2*oe*(vt-ye)+le*(we-2*vt+ye),le=Je+2*oe*(Y-Je)+le*(Se-2*Y+Je);return z=ge*z+oe*ye,ye=ge*Ue+oe*Je,Ue=ge*vt+oe*we,Je=ge*Y+oe*Se,vt=90-180*Math.atan2(fe-it,De-le)/Math.PI,(it<fe||De<le)&&(vt+=180),{x:re,y:Q,m:{x:fe,y:De},n:{x:it,y:le},start:{x:z,y:ye},end:{x:Ue,y:Je},alpha:vt}}function p(G,V,K,H,te,Y,we,Se,oe){return null==oe?q(G,V,K,H,te,Y,we,Se):h(G,V,K,H,te,Y,we,Se,function(ge,re,Q,fe,De,it,le,z,ye){if(!(ye<0||q(ge,re,Q,fe,De,it,le,z)<ye)){var Ue,Je=.5,vt=1-Je;for(Ue=q(ge,re,Q,fe,De,it,le,z,vt);.01<Math.abs(Ue-ye);)Ue=q(ge,re,Q,fe,De,it,le,z,vt+=(Ue<ye?1:-1)*(Je/=2));return vt}}(G,V,K,H,te,Y,we,Se,oe))}function m(G,V,K){for(var H,te,Y,we,Se,oe=0,ge=0,re=(G=function(Q,fe){function De(Tt,qt,mn){var Zn,An;if(!Tt)return["C",qt.x,qt.y,qt.x,qt.y,qt.x,qt.y];switch(Tt[0]in{T:1,Q:1}||(qt.qx=qt.qy=null),Tt[0]){case"M":qt.X=Tt[1],qt.Y=Tt[2];break;case"A":Tt=["C"].concat(x.apply(0,[qt.x,qt.y].concat(Tt.slice(1))));break;case"S":An="C"===mn||"S"===mn?(Zn=2*qt.x-qt.bx,2*qt.y-qt.by):(Zn=qt.x,qt.y),Tt=["C",Zn,An].concat(Tt.slice(1));break;case"T":"Q"===mn||"T"===mn?(qt.qx=2*qt.x-qt.qx,qt.qy=2*qt.y-qt.qy):(qt.qx=qt.x,qt.qy=qt.y),Tt=["C"].concat(L(qt.x,qt.y,qt.qx,qt.qy,Tt[1],Tt[2]));break;case"Q":qt.qx=Tt[1],qt.qy=Tt[2],Tt=["C"].concat(L(qt.x,qt.y,Tt[1],Tt[2],Tt[3],Tt[4]));break;case"L":Tt=["C"].concat(S(qt.x,qt.y,Tt[1],Tt[2]));break;case"H":Tt=["C"].concat(S(qt.x,qt.y,Tt[1],qt.y));break;case"V":Tt=["C"].concat(S(qt.x,qt.y,qt.x,Tt[1]));break;case"Z":Tt=["C"].concat(S(qt.x,qt.y,qt.X,qt.Y))}return Tt}function it(Tt,qt){if(7<Tt[qt].length){Tt[qt].shift();for(var mn=Tt[qt];mn.length;)Ct[qt]="A",Ue&&(zt[qt]="A"),Tt.splice(qt++,0,["C"].concat(mn.splice(0,6)));Tt.splice(qt,1),z=Math.max(ye.length,Ue&&Ue.length||0)}}function le(Tt,qt,mn,Zn,An){Tt&&qt&&"M"===Tt[An][0]&&"M"!==qt[An][0]&&(qt.splice(An,0,["M",Zn.x,Zn.y]),mn.bx=0,mn.by=0,mn.x=Tt[An][1],mn.y=Tt[An][2],z=Math.max(ye.length,Ue&&Ue.length||0))}var z,ye=g(Q),Ue=undefined,Je={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},vt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ct=[],zt=[],_t="",Ft="";z=Math.max(ye.length,Ue&&Ue.length||0);for(var Wt=0;Wt<z;Wt++){"C"!==(_t=ye[Wt]?ye[Wt][0]:_t)&&(Ct[Wt]=_t,Wt&&(Ft=Ct[Wt-1])),ye[Wt]=De(ye[Wt],Je,Ft),"A"!==Ct[Wt]&&"C"===_t&&(Ct[Wt]="C"),it(ye,Wt),Ue&&("C"!==(_t=Ue[Wt]?Ue[Wt][0]:_t)&&(zt[Wt]=_t,Wt&&(Ft=zt[Wt-1])),Ue[Wt]=De(Ue[Wt],vt,Ft),"A"!==zt[Wt]&&"C"===_t&&(zt[Wt]="C"),it(Ue,Wt)),le(ye,Ue,Je,vt,Wt),le(Ue,ye,vt,Je,Wt);var mt=ye[Wt],Nt=Ue&&Ue[Wt],kt=mt.length,Ut=Ue&&Nt.length;Je.x=mt[kt-2],Je.y=mt[kt-1],Je.bx=parseFloat(mt[kt-4])||Je.x,Je.by=parseFloat(mt[kt-3])||Je.y,vt.bx=Ue&&(parseFloat(Nt[Ut-4])||vt.x),vt.by=Ue&&(parseFloat(Nt[Ut-3])||vt.y),vt.x=Ue&&Nt[Ut-2],vt.y=Ue&&Nt[Ut-1]}return Ue?[ye,Ue]:ye}(G)).length;ge<re;ge++){if("M"===(Y=G[ge])[0])H=+Y[1],te=+Y[2];else{if(V<oe+(we=p(H,te,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]))&&!K)return{x:(Se=p(H,te,Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],V-oe)).x,y:Se.y,alpha:Se.alpha};oe+=we,H=+Y[5],te=+Y[6]}Y.shift()}return(Se=K?oe:h(H,te,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],1)).alpha?{x:Se.x,y:Se.y,alpha:Se.alpha}:Se}function g(G){var V=[],K=0,H=0,te=0,Y=0,we=0;if(G){"M"===G[0][0]&&(te=K=+G[0][1],Y=H=+G[0][2],we++,V[0]=["M",K,H]);for(var Se,oe,ge=3===G.length&&"M"===G[0][0]&&"R"===G[1][0].toUpperCase()&&"Z"===G[2][0].toUpperCase(),re=we,Q=G.length;re<Q;re++){if(V.push(Se=[]),(oe=G[re])[0]!==oe[0].toUpperCase())switch(Se[0]=oe[0].toUpperCase(),Se[0]){case"A":Se[1]=oe[1],Se[2]=oe[2],Se[3]=oe[3],Se[4]=oe[4],Se[5]=oe[5],Se[6]=+(oe[6]+K),Se[7]=+(oe[7]+H);break;case"V":Se[1]=+oe[1]+H;break;case"H":Se[1]=+oe[1]+K;break;case"R":for(var fe,De=2,it=(fe=[K,H].concat(oe.slice(1))).length;De<it;De++)fe[De]=+fe[De]+K,fe[++De]=+fe[De]+H;V.pop(),V=V.concat(E(fe,ge));break;case"M":te=+oe[1]+K,Y=+oe[2]+H;break;default:for(var le=1,z=oe.length;le<z;le++)Se[le]=+oe[le]+(le%2?K:H)}else if("R"===oe[0])fe=[K,H].concat(oe.slice(1)),V.pop(),V=V.concat(E(fe,ge)),Se=["R"].concat(oe.slice(-2));else for(var ye=0,Ue=oe.length;ye<Ue;ye++)Se[ye]=oe[ye];switch(Se[0]){case"Z":K=te,H=Y;break;case"H":K=Se[1];break;case"V":H=Se[1];break;case"M":te=Se[Se.length-2],Y=Se[Se.length-1];break;default:K=Se[Se.length-2],H=Se[Se.length-1]}}}return V}function x(G,V,K,H,Ue,Ct,Je,Se,oe,ge){function re(Ut,Tt,qt){return{x:Ut*Math.cos(qt)-Tt*Math.sin(qt),y:Ut*Math.sin(qt)+Tt*Math.cos(qt)}}var Q,ye=120*(z=Math.PI)/180,fe=z/180*(+Ue||0),De=[],it=(ge?(Wt=ge[0],Q=ge[1],_t=ge[2],Ft=ge[3]):(G=(vt=re(G,V,-fe)).x,V=vt.y,1<(it=(le=(G-(Se=(vt=re(Se,oe,-fe)).x))/2)*le/(K*K)+(vt=(V-(oe=vt.y))/2)*vt/(H*H))&&(K*=it=Math.sqrt(it),H*=it),it=K*K,zt=H*H,_t=(Ct=(Ct===Je?-1:1)*Math.sqrt(Math.abs((it*zt-it*vt*vt-zt*le*le)/(it*vt*vt+zt*le*le))))*K*vt/H+(G+Se)/2,Ft=Ct*-H*le/K+(V+oe)/2,Wt=Math.asin(((V-Ft)/H).toFixed(9)),Q=Math.asin(((oe-Ft)/H).toFixed(9)),(Wt=G<_t?z-Wt:Wt)<0&&(Wt=2*z+Wt),(Q=Se<_t?z-Q:Q)<0&&(Q=2*z+Q),Je&&Q<Wt&&(Wt-=2*z),!Je&&Wt<Q&&(Q-=2*z)),Q-Wt),le=(Math.abs(it)>ye&&(zt=Q,vt=Se,Ct=oe,Q=Wt+ye*(Je&&Wt<Q?1:-1),De=x(Se=_t+K*Math.cos(Q),oe=Ft+H*Math.sin(Q),K,H,Ue,0,Je,vt,Ct,[Q,zt,_t,Ft])),it=Q-Wt,Math.cos(Wt)),z=Math.sin(Wt),vt=(ye=Math.cos(Q),Ue=Math.sin(Q),4/3*K*(Je=Math.tan(it/4))),zt=[G,V],_t=[G+vt*z,V-(Ct=4/3*H*Je)*le],Ft=[Se+vt*Ue,oe-Ct*ye],Wt=[Se,oe];if(_t[0]=2*zt[0]-_t[0],_t[1]=2*zt[1]-_t[1],ge)return[_t,Ft,Wt].concat(De);for(var mt=[],Nt=0,kt=(De=[_t,Ft,Wt].concat(De).join().split(",")).length;Nt<kt;Nt++)mt[Nt]=Nt%2?re(De[Nt-1],De[Nt],fe).y:re(De[Nt],De[Nt+1],fe).x;return mt}function E(G,V){for(var K=[],H=0,te=G.length;H<te-2*!V;H+=2){var Y=[{x:+G[H-2],y:+G[H-1]},{x:+G[H],y:+G[H+1]},{x:+G[H+2],y:+G[H+3]},{x:+G[H+4],y:+G[H+5]}];V?H?te-4===H?Y[3]={x:+G[0],y:+G[1]}:te-2===H&&(Y[2]={x:+G[0],y:+G[1]},Y[3]={x:+G[2],y:+G[3]}):Y[0]={x:+G[te-2],y:+G[te-1]}:te-4===H?Y[3]=Y[2]:H||(Y[0]={x:+G[H],y:+G[H+1]}),K.push(["C",(6*Y[1].x-Y[0].x+Y[2].x)/6,(6*Y[1].y-Y[0].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return K}function S(G,V,K,H){return[G,V,K,H,K,H]}function L(G,V,K,H,te,Y){return[1/3*G+2/3*K,1/3*V+2/3*H,1/3*te+2/3*K,1/3*Y+2/3*H,te,Y]}function q(G,V,K,H,te,Y,we,Se,oe){for(var ge=(oe=1<(oe=null==oe?1:oe)?1:oe<0?0:oe)/2,re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Q=0,fe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],De=0;De<12;De++){var it=J(le=ge*re[De]+ge,G,K,te,we),le=J(le,V,H,Y,Se);Q+=fe[De]*Math.sqrt(it*it+le*le)}return ge*Q}function J(G,V,K,H,te){return G*(G*(-3*V+9*K-9*H+3*te)+6*V-12*K+6*H)-3*V+3*K}C.default.Font=function(){function G(te){if(!(this instanceof G))throw new TypeError("Cannot call a class as a function");this.parent=te,this.cache={},this.font=void 0}var V,K;return V=G,(K=[{key:"textBounds",value:function(te){var Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,we=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Se=4<arguments.length?arguments[4]:void 0,oe=Se&&Se.renderer&&Se.renderer._pInst||this.parent,ge=oe._renderer.drawingContext,re=(re=3<arguments.length?arguments[3]:void 0)||oe._renderer._textSize;if(!Ct){for(var Q=[],fe=[],De=[],it=(De[0]=[],[]),le=this._scale(re),z=oe._renderer.textLeading(),ye=0,Ue=(this.font.forEachGlyph(te,Y,we,re,Se,function(Ft,Wt,mt,Nt){var kt=Ft.getMetrics();0===Ft.index?De[ye+=1]=[]:(De[ye].push(Wt+kt.xMin*le),De[ye].push(Wt+kt.xMax*le),it.push(mt+ye*z+-kt.yMin*le),it.push(mt+ye*z+-kt.yMax*le))}),0<De[ye].length&&(Q[ye]=Math.min.apply(null,De[ye]),fe[ye]=Math.max.apply(null,De[ye])),0),Je=0;Je<=ye;Je++){Q[Je]=Math.min.apply(null,De[Je]),fe[Je]=Math.max.apply(null,De[Je]);var vt=fe[Je]-Q[Je];Ue<vt&&(Ue=vt)}var Ct={x:ge=Math.min.apply(null,Q),y:we=Math.min.apply(null,it),h:Math.max.apply(null,it)-we,w:Ue,advance:ge-Y};re=this._handleAlignment(oe._renderer,te,Ct.x,Ct.y,Ct.w+Ct.advance),Ct.x=re.x,Ct.y=re.y}return Ct}},{key:"textToPoints",value:function(te,Y,we,Se,oe){var ge,re=Y,Q=[],fe=this.parent,De=te.split(/\r?\n|\r|\n/g);Se=Se||this.parent._renderer._textSize;for(var it,le,z,ye=0;ye<De.length;ye++){var Ue=0;Y=re;for(var Je=(Je=De[ye]).replace("\t","  "),vt=this._getGlyphs(Je),Ct=0;Ct<vt.length;Ct++){if(le=Je,!((z=vt)[it=Ct].name&&"space"===z[it].name||le.length===z.length&&" "===le[it]))for(var zt=function(mt){for(var Nt,kt=[],Ut=0;Ut<mt.length;Ut++)"M"===mt[Ut].type&&(Nt&&kt.push(Nt),Nt=[]),Nt.push((qt=void 0,qt=[(Tt=mt[Ut]).type],"M"===Tt.type||"L"===Tt.type?qt.push(Tt.x,Tt.y):"C"===Tt.type?qt.push(Tt.x1,Tt.y1,Tt.x2,Tt.y2,Tt.x,Tt.y):"Q"===Tt.type&&qt.push(Tt.x1,Tt.y1,Tt.x,Tt.y),qt));var Tt,qt;return kt.push(Nt),kt}(vt[Ct].getPath(Y,we,Se).commands),_t=0;_t<zt.length;_t++)for(var Ft=function(mt,Nt){Nt=function(Zn,An){if("object"!==I(Zn))Zn=An;else for(var Qn in An)void 0===Zn[Qn]&&(Zn[Qn]=An[Qn]);return Zn}(Nt,{sampleFactor:.1,simplifyThreshold:0});for(var kt=m(mt,0,1),Ut=kt/(kt*Nt.sampleFactor),Tt=[],qt=0;qt<kt;qt+=Ut)Tt.push(m(mt,qt));return Nt.simplifyThreshold&&function(mn){for(var Zn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Qn=mn.length-1;3<mn.length&&0<=Qn;--Qn)f(d(mn,Qn-1),d(mn,Qn),d(mn,Qn+1),Zn)&&mn.splice(Qn%mn.length,1)}(Tt,Nt.simplifyThreshold),Tt}(zt[_t],oe),Wt=0;Wt<Ft.length;Wt++)Ft[Wt].x+=Ue,ge=this._handleAlignment(fe._renderer,Je,Ft[Wt].x,Ft[Wt].y),Ft[Wt].x=ge.x,Ft[Wt].y=ge.y,Q.push(Ft[Wt]);Ue+=vt[Ct].advanceWidth*this._scale(Se)}we+=this.parent._renderer._textLeading}return Q}},{key:"_getGlyphs",value:function(te){return this.font.stringToGlyphs(te)}},{key:"_getPath",value:function(te,ge,we,Se){var oe=(Se&&Se.renderer&&Se.renderer._pInst||this.parent)._renderer;return ge=this._handleAlignment(oe,te,ge,we),this.font.getPath(te,ge.x,ge.y,oe._textSize,Se)}},{key:"_getPathData",value:function(te,Y,we,Se){var oe=3;return"string"==typeof te&&2<arguments.length?te=this._getPath(te,Y,we,Se):"object"===I(Y)&&(Se=Y),Se&&"number"==typeof Se.decimals&&(oe=Se.decimals),te.toPathData(oe)}},{key:"_getSVG",value:function(te,Y,we,Se){var oe=3;return"string"==typeof te&&2<arguments.length?te=this._getPath(te,Y,we,Se):"object"===I(Y)&&(Se=Y),Se&&("number"==typeof Se.decimals&&(oe=Se.decimals),"number"==typeof Se.strokeWidth&&(te.strokeWidth=Se.strokeWidth),void 0!==Se.fill&&(te.fill=Se.fill),void 0!==Se.stroke&&(te.stroke=Se.stroke)),te.toSVG(oe)}},{key:"_renderPath",value:function(re,fe,De,Se){var oe=Se&&Se.renderer||this.parent._renderer,ge=oe.drawingContext,Q=(re=("object"===I(re)&&re.commands?re:this._getPath(re,fe,De,Se)).commands,oe._clipping||ge.beginPath(),!0);fe=!1,De=void 0;try{for(var it,le=re[Symbol.iterator]();!(Q=(it=le.next()).done);Q=!0){var z=it.value;"M"===z.type?ge.moveTo(z.x,z.y):"L"===z.type?ge.lineTo(z.x,z.y):"C"===z.type?ge.bezierCurveTo(z.x1,z.y1,z.x2,z.y2,z.x,z.y):"Q"===z.type?ge.quadraticCurveTo(z.x1,z.y1,z.x,z.y):"Z"===z.type&&ge.closePath()}}catch(ye){fe=!0,De=ye}finally{try{Q||null==le.return||le.return()}finally{if(fe)throw De}}return oe._doStroke&&oe._strokeSet&&!oe._clipping&&ge.stroke(),oe._doFill&&!oe._clipping&&(oe._fillSet||oe._setFill(b._DEFAULT_TEXT_FILL),ge.fill()),this}},{key:"_textWidth",value:function(te,Y){return this.font.getAdvanceWidth(te,Y)}},{key:"_textAscent",value:function(te){return this.font.ascender*this._scale(te)}},{key:"_textDescent",value:function(te){return-this.font.descender*this._scale(te)}},{key:"_scale",value:function(te){return 1/this.font.unitsPerEm*(te||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(te,Y,we,Se,oe){var ge=te._textSize;switch(void 0===oe&&(oe=this._textWidth(Y,ge)),te._textAlign){case b.CENTER:we-=oe/2;break;case b.RIGHT:we-=oe}switch(te._textBaseline){case b.TOP:Se+=this._textAscent(ge);break;case b.CENTER:Se+=this._textAscent(ge)/2;break;case b.BOTTOM:Se-=this._textDescent(ge)}return{x:we,y:Se}}}])&&D(V.prototype,K),G}(),Z.default=l=C.default},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(l,be,Z){"use strict";l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.object.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.append=function(M,C){return M.push(C),M},l.default.prototype.arrayCopy=function(M,C,b,w,I){var D,d;M=void 0!==I?(d=Math.min(I,M.length),D=w,M.slice(C,d+C)):(d=void 0!==b?(d=b,Math.min(d,M.length)):M.length,b=C,M.slice(D=0,d)),Array.prototype.splice.apply(b,[D,d].concat(M))},l.default.prototype.concat=function(M,C){return M.concat(C)},l.default.prototype.reverse=function(M){return M.reverse()},l.default.prototype.shorten=function(M){return M.pop(),M},l.default.prototype.shuffle=function(M,C){for(var b,w,I=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(M),D=(M=C||I?M:M.slice()).length;1<D;)b=this.random(0,1)*D|0,w=M[--D],M[D]=M[b],M[b]=w;return M},l.default.prototype.sort=function(M,w){var b=w?M.slice(0,Math.min(w,M.length)):M;return w=w?M.slice(Math.min(w,M.length)):[],(b="string"==typeof b[0]?b.sort():b.sort(function(I,D){return I-D})).concat(w)},l.default.prototype.splice=function(M,C,b){return Array.prototype.splice.apply(M,[b,0].concat(C)),M},l.default.prototype.subset=function(M,C,b){return M.slice(C,void 0!==b?C+b:M.length)},Z.default=l=l.default},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(l,be,Z){"use strict";l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),l("core-js/modules/es.array.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.repeat"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.float=function(C){return C instanceof Array?C.map(parseFloat):parseFloat(C)},M.default.prototype.int=function(C){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return C===1/0||"Infinity"===C?1/0:C===-1/0||"-Infinity"===C?-1/0:"string"==typeof C?parseInt(C,b):"number"==typeof C?0|C:"boolean"==typeof C?C?1:0:C instanceof Array?C.map(function(w){return M.default.prototype.int(w,b)}):void 0},M.default.prototype.str=function(C){return C instanceof Array?C.map(M.default.prototype.str):String(C)},M.default.prototype.boolean=function(C){return"number"==typeof C?0!==C:"string"==typeof C?"true"===C.toLowerCase():"boolean"==typeof C?C:C instanceof Array?C.map(M.default.prototype.boolean):void 0},M.default.prototype.byte=function(C){return"number"==typeof(C=M.default.prototype.int(C,10))?(C+128)%256-128:C instanceof Array?C.map(M.default.prototype.byte):void 0},M.default.prototype.char=function(C){return"number"!=typeof C||isNaN(C)?C instanceof Array?C.map(M.default.prototype.char):"string"==typeof C?M.default.prototype.char(parseInt(C,10)):void 0:String.fromCharCode(C)},M.default.prototype.unchar=function(C){return"string"==typeof C&&1===C.length?C.charCodeAt(0):C instanceof Array?C.map(M.default.prototype.unchar):void 0},M.default.prototype.hex=function(C,b){if(b=null==b?8:b,C instanceof Array)return C.map(function(I){return M.default.prototype.hex(I,b)});if(C===1/0||C===-1/0)return(C===1/0?"F":"0").repeat(b);if("number"==typeof C){C<0&&(C=4294967295+C+1);for(var w=Number(C).toString(16).toUpperCase();w.length<b;)w="0".concat(w);return w.length>=b?w.substring(w.length-b,w.length):w}},M.default.prototype.unhex=function(C){return C instanceof Array?C.map(M.default.prototype.unhex):parseInt("0x".concat(C),16)},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.constructor"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.pad-start"),l("core-js/modules/es.string.replace"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(d=l("../core/main"))&&d.__esModule?d:{default:d};function C(f,h){return function(p){if(Array.isArray(p))return p}(f)||function(p,m){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p)){var g=[],x=!0,E=!1,S=void 0;try{for(var L,q=p[Symbol.iterator]();!(x=(L=q.next()).done)&&(g.push(L.value),!m||g.length!==m);x=!0);}catch(J){E=!0,S=J}finally{try{x||null==q.return||q.return()}finally{if(E)throw S}}return g}}(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(f,h,p){var m,g=f<0,x=(E=C((f=Math.abs(f)).toString().split("."),2))[0],E=E[1];return void 0===p?(x=x.padStart(h,"0"),m=E?x+"."+E:x,g?"-"+m:m):(x=(m=C(f.toFixed(p).toString().split("."),2))[0],E=m[1],x=x.padStart(h,"0"),f=void 0===E?x:x+"."+E,g?"-"+f:f)}function w(g,h){var p=(g=g.toString()).indexOf("."),m=-1!==p?g.substring(p):"";if(g=(g=-1!==p?g.substring(0,p):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===h)m="";else if(void 0!==h)if(h>m.length)for(var x=h-(m+=-1===p?".":"").length+1,E=0;E<x;E++)m+="0";else m=m.substring(0,h+1);return g+m}function I(f){return 0<parseFloat(f)?"+".concat(f.toString()):f.toString()}function D(f){return 0<=parseFloat(f)?" ".concat(f.toString()):f.toString()}l("../core/friendly_errors/validate_params"),l("../core/friendly_errors/file_errors"),l("../core/friendly_errors/fes_core"),M.default.prototype.join=function(f,h){return M.default._validateParameters("join",arguments),f.join(h)},M.default.prototype.match=function(f,h){return M.default._validateParameters("match",arguments),f.match(h)},M.default.prototype.matchAll=function(f,h){M.default._validateParameters("matchAll",arguments);for(var p=new RegExp(h,"g"),m=p.exec(f),g=[];null!==m;)g.push(m),m=p.exec(f);return g},M.default.prototype.nf=function(f,h,p){return M.default._validateParameters("nf",arguments),f instanceof Array?f.map(function(m){return b(m,h,p)}):"[object Arguments]"===Object.prototype.toString.call(f)?3===f.length?this.nf(f[0],f[1],f[2]):2===f.length?this.nf(f[0],f[1]):this.nf(f[0]):b(f,h,p)},M.default.prototype.nfc=function(f,h){return M.default._validateParameters("nfc",arguments),f instanceof Array?f.map(function(p){return w(p,h)}):w(f,h)},M.default.prototype.nfp=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfp",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(I):I(m)},M.default.prototype.nfs=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];M.default._validateParameters("nfs",h);var m=M.default.prototype.nf.apply(this,h);return m instanceof Array?m.map(D):D(m)},M.default.prototype.split=function(f,h){return M.default._validateParameters("split",arguments),f.split(h)},M.default.prototype.splitTokens=function(f,h){var p,m;return M.default._validateParameters("splitTokens",arguments),m=void 0!==h?(m=/\]/g.exec(h),(p=/\[/g.exec(h))&&m?(h=h.slice(0,m.index)+h.slice(m.index+1),p=/\[/g.exec(h),h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[\\[".concat(h,"\\]]"),"g")):m?(h=h.slice(0,m.index)+h.slice(m.index+1),new RegExp("[".concat(h,"\\]]"),"g")):p?(h=h.slice(0,p.index)+h.slice(p.index+1),new RegExp("[".concat(h,"\\[]"),"g")):new RegExp("[".concat(h,"]"),"g")):/\s/g,f.split(m).filter(function(g){return g})},M.default.prototype.trim=function(f){return M.default._validateParameters("trim",arguments),f instanceof Array?f.map(this.trim):f.trim()};var d=M.default;Z.default=d},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.prototype.day=function(){return(new Date).getDate()},l.default.prototype.hour=function(){return(new Date).getHours()},l.default.prototype.minute=function(){return(new Date).getMinutes()},l.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},l.default.prototype.month=function(){return(new Date).getMonth()+1},l.default.prototype.second=function(){return(new Date).getSeconds()},l.default.prototype.year=function(){return(new Date).getFullYear()},Z.default=l=l.default},{"../core/main":283}],326:[function(l,be,Z){"use strict";function M(f){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function C(f){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(h){return M(h)}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":M(h)})(f)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.number.to-fixed"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(d=l("../core/main"))&&d.__esModule?d:{default:d},w=(l("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==C(f)&&"function"!=typeof f)return{default:f};var h=I();if(h&&h.has(f))return h.get(f);var p,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in f){var x;Object.prototype.hasOwnProperty.call(f,p)&&((x=g?Object.getOwnPropertyDescriptor(f,p):null)&&(x.get||x.set)?Object.defineProperty(m,p,x):m[p]=f[p])}return m.default=f,h&&h.set(f,m),m}(l("../core/constants")));function I(){var f;return"function"!=typeof WeakMap?null:(I=function(){return f},f=new WeakMap)}function D(f,h,p,m,g,x,E){f=f<=0?1:f,h=h<0?0:h,p=p<=0?f:p,m=m<3?3:m;for(var S,L,q=(x=void 0===x||x)?-2:0,J=(g=g<1?1:g)+((E=void 0===E?0!==h:E)?2:0),G=Math.atan2(f-h,p),V=Math.sin(G),K=Math.cos(G),H=q;H<=J;++H){var te=H/g,Y=p*te,we=void 0;for(we=H<0?(te=Y=0,f):g<H?(Y=p,te=1,h):f+(h-f)*te,-2!==H&&H!==g+2||(we=0),Y-=p/2,S=0;S<m;++S){var Se=S/(m-1),ge=2*Math.PI*Se,oe=Math.sin(ge),re=(ge=Math.cos(ge),this.vertices.push(new b.default.Vector(oe*we,Y,ge*we)));re=H<0?new b.default.Vector(0,-1,0):g<H&&h?new b.default.Vector(0,1,0):new b.default.Vector(oe*K,V,ge*K),this.vertexNormals.push(re),this.uvs.push(Se,te)}}var Q=0;if(x){for(L=0;L<m;++L)this.faces.push([Q+L,Q+m+(L+1)%m,Q+m+L]);Q+=2*m}for(H=0;H<g;++H){for(S=0;S<m;++S){var fe=(S+1)%m;this.faces.push([Q+S,Q+fe,Q+m+fe]),this.faces.push([Q+S,Q+m+fe,Q+m+S])}Q+=m}if(E)for(Q+=m,S=0;S<m;++S)this.faces.push([Q+S,Q+(S+1)%m,Q+m])}b.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},b.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},b.default.prototype.buildGeometry=function(f){return this._renderer.buildGeometry(f)},b.default.prototype.freeGeometry=function(f){this._renderer._freeBuffers(f.gid)},b.default.prototype.plane=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=(this._assert3d("plane"),b.default._validateParameters("plane",arguments),"plane|".concat(m,"|").concat(g));return this._renderer.geometryInHash(x)||((f=new b.default.Geometry(m,g,function(){for(var E,S,L=0;L<=this.detailY;L++)for(var q=L/this.detailY,J=0;J<=this.detailX;J++)S=new b.default.Vector((E=J/this.detailX)-.5,q-.5,0),this.vertices.push(S),this.uvs.push(E,q)})).computeFaces().computeNormals(),m<=1&&g<=1?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,h,p,1),this},b.default.prototype.box=function(f,h,p,m,g){this._assert3d("box"),b.default._validateParameters("box",arguments),void 0===f&&(f=50),void 0===h&&(h=f),void 0===p&&(p=h);var x,E=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===g&&(g=E?1:4),E="box|".concat(m=void 0===m?E?1:4:m,"|").concat(g),this._renderer.geometryInHash(E)||((x=new b.default.Geometry(m,g,function(){var S=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(L,q){q*=4;for(var J=0;J<4;J++){var G=new b.default.Vector((2*(1&(G=L[J]))-1)/2,((2&G)-1)/2,((4&G)/2-1)/2);S.vertices.push(G),S.uvs.push(1&J,(2&J)/2)}S.faces.push([q,1+q,2+q]),S.faces.push([2+q,1+q,3+q])})})).computeNormals(),m<=4&&g<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(E,x)),this._renderer.drawBuffersScaled(E,f,h,p),this},b.default.prototype.sphere=function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),b.default._validateParameters("sphere",arguments),this.ellipsoid(f,f,f,h,p),this},b.default.prototype.cylinder=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],S=(this._assert3d("cylinder"),b.default._validateParameters("cylinder",arguments),"cylinder|".concat(m,"|").concat(g,"|").concat(x,"|").concat(E));return this._renderer.geometryInHash(S)||(f=new b.default.Geometry(m,g),D.call(f,1,1,1,m,g,x,E),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(S,f)),this._renderer.drawBuffersScaled(S,h,p,h),this},b.default.prototype.cone=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,x=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],E=(this._assert3d("cone"),b.default._validateParameters("cone",arguments),"cone|".concat(m,"|").concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||(f=new b.default.Geometry(m,g),D.call(f,1,0,1,m,g,x,!1),m<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,h),this},b.default.prototype.ellipsoid=function(){var f,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h,m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:h,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,x=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,E=(this._assert3d("ellipsoid"),b.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(g,"|").concat(x));return this._renderer.geometryInHash(E)||((f=new b.default.Geometry(g,x,function(){for(var S=0;S<=this.detailY;S++)for(var L=S/this.detailY,q=Math.PI*L-Math.PI/2,J=Math.cos(q),G=Math.sin(q),V=0;V<=this.detailX;V++){var K=V/this.detailX,te=2*Math.PI*K,H=Math.cos(te);te=Math.sin(te),te=new b.default.Vector(J*te,G,J*H),this.vertices.push(te),this.vertexNormals.push(te),this.uvs.push(K,L)}})).computeFaces(),g<=24&&x<=24?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(E,f)),this._renderer.drawBuffersScaled(E,h,p,m),this},b.default.prototype.torus=function(f,E,p,m){if(this._assert3d("torus"),b.default._validateParameters("torus",arguments),void 0===f)f=50;else if(!f)return;if(void 0===E)E=10;else if(!E)return;void 0===p&&(p=24),void 0===m&&(m=16);var g,x=(E/f).toPrecision(4);return E="torus|".concat(x,"|").concat(p,"|").concat(m),this._renderer.geometryInHash(E)||((g=new b.default.Geometry(p,m,function(){for(var S=0;S<=this.detailY;S++)for(var L=S/this.detailY,q=2*Math.PI*L,J=Math.cos(q),G=Math.sin(q),V=1+x*J,K=0;K<=this.detailX;K++){var H=K/this.detailX,te=2*Math.PI*H,we=Math.cos(te),Y=(te=Math.sin(te),new b.default.Vector(V*we,V*te,x*G));we=new b.default.Vector(J*we,J*te,G),this.vertices.push(Y),this.vertexNormals.push(we),this.uvs.push(H,L)}})).computeFaces(),p<=24&&m<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,g)),this._renderer.drawBuffersScaled(E,f,f,f),this},b.default.RendererGL.prototype.point=function(f,h){var p=[];return p.push(new b.default.Vector(f,h,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(p,this.immediateMode.buffers.point),this},b.default.RendererGL.prototype.triangle=function(E){var h=E[0],p=E[1],m=E[2],g=E[3],x=E[4],S=(E=E[5],this.geometryInHash("tri")||((S=new b.default.Geometry(1,1,function(){var J=[];J.push(new b.default.Vector(0,0,0)),J.push(new b.default.Vector(1,0,0)),J.push(new b.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=J,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),S.computeNormals(),this.createBuffers("tri",S)),this.uModelMatrix.copy());try{var L=Math.sign(h*g-m*p+m*E-x*g+x*p-h*E),q=new b.default.Matrix([m-h,g-p,0,0,x-h,E-p,0,0,0,0,L,0,h,p,0,1]).mult(this.uModelMatrix);this.uModelMatrix=q,this.drawBuffers("tri")}finally{this.uModelMatrix=S}return this},b.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,w.TWO_PI,w.OPEN,f[4])},b.default.RendererGL.prototype.arc=function(){var f,h=arguments.length<=0?void 0:arguments[0],p=arguments.length<=1?void 0:arguments[1],m=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],E=arguments.length<=5?void 0:arguments[5],S=arguments.length<=6?void 0:arguments[6],L=(arguments.length<=7?void 0:arguments[7])||25,q=(Math.abs(E-x)>=w.TWO_PI?"".concat(J="ellipse","|"):"".concat(J="arc","|").concat(x,"|").concat(E,"|").concat(S,"|")).concat(L,"|"),J=(this.geometryInHash(q)||((f=new b.default.Geometry(L,1,function(){if(x.toFixed(10)!==E.toFixed(10)){S!==w.PIE&&void 0!==S||(this.vertices.push(new b.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var G=0;G<=L;G++){var K=G/L*(E-x)+x,V=.5+Math.cos(K)/2;K=.5+Math.sin(K)/2,this.vertices.push(new b.default.Vector(V,K,0)),this.uvs.push([V,K]),G<L-1&&(this.faces.push([0,G+1,G+2]),this.edges.push([G+1,G+2]))}switch(S){case w.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case w.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case w.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),L<=50?f._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(J," with more than 50 detail")),this.createBuffers(q,f)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(q)}finally{this.uModelMatrix=J}return this},b.default.RendererGL.prototype.rect=function(f){var h=f[0],p=f[1],m=f[2],g=f[3];if(void 0===f[4]){var S=this._pInst._glAttributes.perPixelLighting,x=f[4]||(S?1:24),E=f[5]||(S?1:16),L=(S="rect|".concat(x,"|").concat(E),this.geometryInHash(S)||((L=new b.default.Geometry(x,E,function(){for(var re=0;re<=this.detailY;re++)for(var Q=re/this.detailY,fe=0;fe<=this.detailX;fe++){var De=fe/this.detailX,it=new b.default.Vector(De,Q,0);this.vertices.push(it),this.uvs.push(De,Q)}0<x&&0<E&&(this.edges=[[0,x],[x,(x+1)*(E+1)-1],[(x+1)*(E+1)-1,(x+1)*E],[(x+1)*E,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,L)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([h,p,0]),this.uModelMatrix.scale(m,g,1),this.drawBuffers(S)}finally{this.uModelMatrix=L}}else{S=f[4],L=void 0===f[5]?S:f[5];var q=void 0===f[6]?L:f[6],te=(f=void 0===f[7]?q:f[7],m),J=g,G=((te+=h)<h&&(K=h,h=te,te=K),(J+=p)<p&&(K=p,p=J,J=K),(K=Math.min((te-h)/2,(J-p)/2))<S&&(S=K),K<L&&(L=K),K<q&&(q=K),K<f&&(f=K),h),V=p,K=te,H=(h=J,this.beginShape(),0!==L?(this.vertex(K-L,V),this.quadraticVertex(K,V,K,V+L)):this.vertex(K,V),0!==q?(this.vertex(K,h-q),this.quadraticVertex(K,h,K-q,h)):this.vertex(K,h),0!==f?(this.vertex(G+f,h),this.quadraticVertex(G,h,G,h-f)):this.vertex(G,h),0!==S?(this.vertex(G,V+S),this.quadraticVertex(G,V,G+S,V)):this.vertex(G,V),!(this.immediateMode.geometry.uvs.length=0));p=!1,te=void 0;try{for(var Y,we=this.immediateMode.geometry.vertices[Symbol.iterator]();!(H=(Y=we.next()).done);H=!0){var Se=Y.value;this.immediateMode.geometry.uvs.push((Se.x-G)/m,(Se.y-V)/g)}}catch(le){p=!0,te=le}finally{try{H||null==we.return||we.return()}finally{if(p)throw te}}this.endShape(w.CLOSE)}return this},b.default.RendererGL.prototype.quad=function(f,h,p,m,g,x,E,S,L,q,J,G){var V=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,K=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,H="quad|".concat(f,"|").concat(h,"|").concat(p,"|").concat(m,"|").concat(g,"|").concat(x,"|").concat(E,"|").concat(S,"|").concat(L,"|").concat(q,"|").concat(J,"|").concat(G,"|").concat(V,"|").concat(K);if(!this.geometryInHash(H)){var te=new b.default.Geometry(V,K,function(){for(var fe=1/(this.detailX-1),De=1/(this.detailY-1),it=0;it<this.detailY;it++)for(var le=0;le<this.detailX;le++){var z=le*fe,ye=it*De;this.vertices.push(new b.default.Vector((1-z)*((1-ye)*f+ye*q)+z*((1-ye)*m+ye*E),(1-z)*((1-ye)*h+ye*J)+z*((1-ye)*g+ye*S),(1-z)*((1-ye)*p+ye*G)+z*((1-ye)*x+ye*L))),this.uvs.push([z,ye])}});te.faces=[];for(var Y=0;Y<K-1;Y++)for(var we=0;we<V-1;we++){var Se=we+Y*V,oe=we+1+(Y+1)*V,ge=we+(Y+1)*V;te.faces.push([Se,we+1+Y*V,oe]),te.faces.push([Se,oe,ge])}te.computeNormals();for(var re=[te.edges.length=0,2,3,1],Q=0;Q<re.length;Q++)te.edges.push([re[Q],re[(Q+1)%re.length]]);te._edgesToVertices(),this.createBuffers(H,te)}return this.drawBuffers(H),this},b.default.RendererGL.prototype.bezier=function(f,h,p,m,g,x,E,S,L,q,J,G){8===arguments.length&&(J=S,q=E,S=x,E=g,g=m,m=p,p=x=L=G=0);var V=this._pInst._bezierDetail||20;this.beginShape();for(var K=0;K<=V;K++){var H=Math.pow(1-K/V,3),te=K/V*3*Math.pow(1-K/V,2),Y=3*Math.pow(K/V,2)*(1-K/V),we=Math.pow(K/V,3);this.vertex(f*H+m*te+E*Y+q*we,h*H+g*te+S*Y+J*we,p*H+x*te+L*Y+G*we)}return this.endShape(),this},b.default.RendererGL.prototype.curve=function(f,h,p,m,g,x,E,S,L,q,J,G){8===arguments.length&&(q=E,J=S,E=g,S=m,g=m=p,p=x=L=G=0);var V=this._pInst._curveDetail;this.beginShape();for(var K=0;K<=V;K++){var H=.5*Math.pow(K/V,3),te=.5*Math.pow(K/V,2),Y=K/V*.5;this.vertex(H*(3*m-f-3*E+q)+te*(2*f-5*m+4*E-q)+Y*(-f+E)+2*m*.5,H*(3*g-h-3*S+J)+te*(2*h-5*g+4*S-J)+Y*(-h+S)+2*g*.5,H*(3*x-p-3*L+G)+te*(2*p-5*x+4*L-G)+Y*(-p+L)+2*x*.5)}return this.endShape(),this},b.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(w.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},b.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var f,h,p,m,g,x,E=[],S=[],L=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var q=1/this._lutBezierDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableBezier[V]=this._bezierCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableBezier[V]=this._bezierCoefficients(x);break}J+=q,G-=q,++V}}for(var K=this._lookUpTableBezier.length,H=[],te=0;te<4;te++)H.push([]);H[0]=this.immediateMode.geometry.vertexColors.slice(-4),H[3]=this.curFillColor.slice();var Y=[];for(te=0;te<4;te++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[3]=this.curStrokeColor.slice(),6===L){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var we=Math.hypot(E[0]-E[1],S[0]-S[1]),oe=Math.hypot(E[1]-E[2],S[1]-S[2]),Se=Math.hypot(E[2]-E[3],S[2]-S[3]);for(we/=oe=we+oe+Se,Se/=oe,g=0;g<4;g++)H[1].push(H[0][g]*(1-we)+H[3][g]*we),H[2].push(H[0][g]*Se+H[3][g]*(1-Se)),Y[1].push(Y[0][g]*(1-we)+Y[3][g]*we),Y[2].push(Y[0][g]*Se+Y[3][g]*(1-Se));for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],te=f=h=0;te<4;te++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][te]*H[te][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][te]*Y[te][g];f+=E[te]*this._lookUpTableBezier[m][te],h+=S[te]*this._lookUpTableBezier[m][te]}this.vertex(f,h)}this.curFillColor=H[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===L){this.isBezier=!0,E=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],S=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var ge=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],re=Math.hypot(E[0]-E[1],S[0]-S[1],ge[0]-ge[1]),Q=(oe=Math.hypot(E[1]-E[2],S[1]-S[2],ge[1]-ge[2]),Math.hypot(E[2]-E[3],S[2]-S[3],ge[2]-ge[3]));for(re/=L=re+oe+Q,Q/=L,g=0;g<4;g++)H[1].push(H[0][g]*(1-re)+H[3][g]*re),H[2].push(H[0][g]*Q+H[3][g]*(1-Q)),Y[1].push(Y[0][g]*(1-re)+Y[3][g]*re),Y[2].push(Y[0][g]*Q+Y[3][g]*(1-Q));for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],te=f=h=p=0;te<4;te++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[m][te]*H[te][g],this.curStrokeColor[g]+=this._lookUpTableBezier[m][te]*Y[te][g];f+=E[te]*this._lookUpTableBezier[m][te],h+=S[te]*this._lookUpTableBezier[m][te],p+=ge[te]*this._lookUpTableBezier[m][te]}this.vertex(f,h,p)}this.curFillColor=H[3],this.curStrokeColor=Y[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},b.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var f,h,p,m,g,x,E=[],S=[],L=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var q=1/this._lutQuadraticDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableQuadratic[V]=this._quadraticCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableQuadratic[V]=this._quadraticCoefficients(x);break}J+=q,G-=q,++V}}for(var K=this._lookUpTableQuadratic.length,H=[],te=0;te<3;te++)H.push([]);H[0]=this.immediateMode.geometry.vertexColors.slice(-4),H[2]=this.curFillColor.slice();var Y=[];for(te=0;te<3;te++)Y.push([]);if(Y[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Y[2]=this.curStrokeColor.slice(),4===L){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var we=Math.hypot(E[0]-E[1],S[0]-S[1]);for(we/=we+Math.hypot(E[1]-E[2],S[1]-S[2]),g=0;g<4;g++)H[1].push(H[0][g]*(1-we)+H[2][g]*we),Y[1].push(Y[0][g]*(1-we)+Y[2][g]*we);for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],te=f=h=0;te<3;te++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][te]*H[te][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][te]*Y[te][g];f+=E[te]*this._lookUpTableQuadratic[m][te],h+=S[te]*this._lookUpTableQuadratic[m][te]}this.vertex(f,h)}this.curFillColor=H[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===L){this.isQuadratic=!0,E=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],S=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var Se=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],oe=Math.hypot(E[0]-E[1],S[0]-S[1],Se[0]-Se[1]);for(oe/=oe+Math.hypot(E[1]-E[2],S[1]-S[2],Se[1]-Se[2]),g=0;g<4;g++)H[1].push(H[0][g]*(1-oe)+H[2][g]*oe),Y[1].push(Y[0][g]*(1-oe)+Y[2][g]*oe);for(m=0;m<K;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],te=f=h=p=0;te<3;te++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[m][te]*H[te][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[m][te]*Y[te][g];f+=E[te]*this._lookUpTableQuadratic[m][te],h+=S[te]*this._lookUpTableQuadratic[m][te],p+=Se[te]*this._lookUpTableQuadratic[m][te]}this.vertex(f,h,p)}this.curFillColor=H[2],this.curStrokeColor=Y[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},b.default.RendererGL.prototype.curveVertex=function(){var f,g,x,E=[],S=[],L=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var q=1/this._lutBezierDetail,J=q,G=1,V=0;J<1;){if(x=parseFloat(J.toFixed(6)),this._lookUpTableBezier[V]=this._bezierCoefficients(x),G.toFixed(6)===q.toFixed(6)){x=parseFloat(G.toFixed(6))+parseFloat(J.toFixed(6)),++V,this._lookUpTableBezier[V]=this._bezierCoefficients(x);break}J+=q,G-=q,++V}}var K=this._lookUpTableBezier.length;if(2===L){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<K;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3]);for(g=0;g<L;g++)this.immediateMode._curveVertex.shift()}}else if(3===L&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,E=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),S=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<K;g++)this.vertex(E[0]*this._lookUpTableBezier[g][0]+E[1]*this._lookUpTableBezier[g][1]+E[2]*this._lookUpTableBezier[g][2]+E[3]*this._lookUpTableBezier[g][3],S[0]*this._lookUpTableBezier[g][0]+S[1]*this._lookUpTableBezier[g][1]+S[2]*this._lookUpTableBezier[g][2]+S[3]*this._lookUpTableBezier[g][3],f[0]*this._lookUpTableBezier[g][0]+f[1]*this._lookUpTableBezier[g][1]+f[2]*this._lookUpTableBezier[g][2]+f[3]*this._lookUpTableBezier[g][3]);for(g=0;g<L;g++)this.immediateMode._curveVertex.shift()}},b.default.RendererGL.prototype.image=function(f,G,p,V,g,x,E,S,L){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(w.NORMAL);var q=0,J=(G<=f.width&&(q=G/f.width),1);G+V<=f.width&&(J=(G+V)/f.width),G=0,p<=f.height&&(G=p/f.height),V=1,p+g<=f.height&&(V=(p+g)/f.height),this.beginShape(),this.vertex(x,E,0,q,G),this.vertex(x+S,E,0,J,G),this.vertex(x+S,E+L,0,J,V),this.vertex(x,E+L,0,q,V),this.endShape(w.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(w.REMOVE)};var d=b.default;Z.default=d},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(l,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.every"),l("core-js/modules/es.array.map"),l("core-js/modules/es.object.assign"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(h,p){for(var m=0;m<p.length;m++){var g=p[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}var f=function(){function h(x){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(this.renderer=x)._pInst.push(),this.identityMatrix=new b.default.Matrix,x.uModelMatrix=new b.default.Matrix,this.geometry=new b.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(h.nextGeometryId),h.nextGeometryId++,this.hasTransform=!1}var p,m;return p=h,(m=[{key:"transformVertices",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uModelMatrix.multiplyPoint(S)}):x}},{key:"transformNormals",value:function(x){var E=this;return this.hasTransform?x.map(function(S){return E.renderer.uNMatrix.multiplyVec3(S)}):x}},{key:"addGeometry",value:function(x){for(var E,S=this,L=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(J,G){return J===S.identityMatrix.mat4[G]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),q=((E=this.geometry.vertices).push.apply(E,D(this.transformVertices(x.vertices))),(E=this.geometry.vertexNormals).push.apply(E,D(this.transformNormals(x.vertexNormals))),(E=this.geometry.uvs).push.apply(E,D(x.uvs)),this.renderer._doFill&&(E=this.geometry.faces).push.apply(E,D(x.faces.map(function(J){return J.map(function(G){return G+L})}))),this.renderer._doStroke&&(E=this.geometry.edges).push.apply(E,D(x.edges.map(function(J){return J.map(function(G){return G+L})}))),D(x.vertexColors));q.length<4*x.vertices.length;)q.push.apply(q,D(this.renderer.curFillColor));(E=this.geometry.vertexColors).push.apply(E,D(q))}},{key:"addImmediate",value:function(){var x=this.renderer.immediateMode.geometry,E=this.renderer.immediateMode.shapeMode,S=[];if(this.renderer._doFill)if(E===w.TRIANGLE_STRIP||E===w.QUAD_STRIP)for(var L=2;L<x.vertices.length;L++)S.push(L%2==0?[L,L-1,L-2]:[L,L-2,L-1]);else if(E===w.TRIANGLE_FAN)for(var q=2;q<x.vertices.length;q++)S.push([0,q-1,q]);else for(var J=0;J<x.vertices.length;J+=3)S.push([J,J+1,J+2]);this.addGeometry(Object.assign({},x,{faces:S}))}},{key:"addRetained",value:function(x){this.addGeometry(x.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&d(p.prototype,m),h}();f.nextGeometryId=0,Z.default=f},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.math.sign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var C=(D=l("../core/main"))&&D.__esModule?D:{default:D},b=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==I(d)&&"function"!=typeof d)return{default:d};var f=w();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function w(){var d;return"function"!=typeof WeakMap?null:(w=function(){return d},d=new WeakMap)}function I(d){return(I="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}C.default.prototype.orbitControl=function(d,f,h,L){var m=this,g=(this._assert3d("orbitControl"),C.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===d&&(d=1),void 0===f&&(f=d),void 0===h&&(h=1),"object"!==I(L)&&(L={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var J=L.disableTouchActions;!0===this.touchActionsDisabled||void 0!==J&&!J||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),L=void 0!==(J=L.freeRotation)&&J;var x,E,S,q=[],G=(this.touches.forEach(function(we){m._renderer.prevTouches.forEach(function(Se){we.id===Se.id&&q.push(Se={x:we.x,y:we.y,px:Se.x,py:Se.y})})}),this._renderer.prevTouches=this.touches,J=0,0),V=0,K=0,H=0,te=this.height<this.width?this.height:this.width,Y=!1;return 0<q.length?(Y=0<q[0].x&&q[0].x<this.width&&0<q[0].y&&q[0].y<this.height,1===q.length?(G=-d*((x=q[0]).x-x.px)/te,V=f*(x.y-x.py)/te):(x=q[0],E=q[1],J=-(Math.hypot(x.x-E.x,x.y-E.y)-Math.hypot(x.px-E.px,x.py-E.py))*h*4e-4,K=.5*(x.x+E.x)-.5*(x.px+E.px),H=.5*(x.y+E.y)-.5*(x.py+E.py)),0<this.touches.length?Y&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(Y=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(J=Math.sign(this._mouseWheelDeltaY)*h,J*=.01,this._mouseWheelDeltaY=0,Y&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(G=-d*this.movedX/te,V=f*this.movedY/te):this.mouseButton===this.RIGHT&&(K=this.movedX,H=this.movedY*g.yScale),Y&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==J&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=J),.001<Math.abs(this._renderer.zoomVelocity)?(L?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),0!==g.projMatrix.mat4[15]&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===G&&0===V||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*G,.6*V),1e-6<this._renderer.rotateVelocity.magSq()?(L?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===K&&0===H||!this._renderer.executeRotateAndMove||this._renderer.moveVelocity.add(.15*(x=2*K/this.width),.15*(E=2*-H/this.height)),1e-6<this._renderer.moveVelocity.magSq()?(h=g._getLocalAxes(),d=g.eyeX-g.centerX,f=g.eyeY-g.centerY,te=g.eyeZ-g.centerZ,Y=Math.sqrt(d*d+f*f+te*te),J=new C.default.Vector(g.centerX,g.centerY,g.centerZ),J=g.cameraMatrix.multiplyPoint(J),(J=this._renderer.uPMatrix.multiplyAndNormalizePoint(J)).x-=this._renderer.moveVelocity.x,J.y-=this._renderer.moveVelocity.y,V=0===(G=this._renderer.uPMatrix.mat4)[15]?(S=(G[8]+J.x)/G[0]*Y,(G[9]+J.y)/G[5]*Y):(S=(J.x-G[12])/G[0],(J.y-G[13])/G[5]),g.setPosition(g.eyeX+S*h.x[0]+V*h.y[0],g.eyeY+S*h.x[1]+V*h.y[1],g.eyeZ+S*h.x[2]+V*h.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},C.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];C.default._validateParameters("debugMode",f);for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1);f[0]===b.GRID?this.registerMethod("post",this._grid(f[1],f[2],f[3],f[4],f[5])):f[0]===b.AXES?this.registerMethod("post",this._axesIcon(f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid(f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon(f[5],f[6],f[7],f[8])))},C.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var d=this._registeredMethods.post.length-1;0<=d;d--)this._registeredMethods.post[d].toString()!==this._grid().toString()&&this._registeredMethods.post[d].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(d,1)},C.default.prototype._grid=function(d,f,h,p,m){void 0===d&&(d=this.width/2),void 0===f&&(f=Math.round(d/30)<4?4:Math.round(d/30)),void 0===h&&(h=0),void 0===p&&(p=0),void 0===m&&(m=0);var g=d/f,x=d/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var E=0;E<=f;E++)this.beginShape(this.LINES),this.vertex(-x+h,p,E*g-x+m),this.vertex(x+h,p,E*g-x+m),this.endShape();for(var S=0;S<=f;S++)this.beginShape(this.LINES),this.vertex(S*g-x+h,p,-x+m),this.vertex(S*g-x+h,p,x+m),this.endShape();this.pop()}},C.default.prototype._axesIcon=function(d,f,h,p){return void 0===d&&(d=40<this.width/20?this.width/20:40),void 0===f&&(f=-this.width/4),void 0===h&&(h=f),void 0===p&&(p=f),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f+d,h,p),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h+d,p),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,h,p),this.vertex(f,h,p+d),this.endShape(),this.pop()}};var D=C.default;Z.default=D},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(l,be,Z){"use strict";l("core-js/modules/es.array.filter"),l("core-js/modules/es.array.filter"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};M.default.prototype.ambientLight=function(C,b,w,I){this._assert3d("ambientLight"),M.default._validateParameters("ambientLight",arguments);var D=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(D._array[0],D._array[1],D._array[2]),this._renderer._enableLighting=!0,this},M.default.prototype.specularColor=function(C,b,w){this._assert3d("specularColor"),M.default._validateParameters("specularColor",arguments);var I=this.color.apply(this,arguments);return this._renderer.specularColors=[I._array[0],I._array[1],I._array[2]],this},M.default.prototype.directionalLight=function(C,m,p,I,D,d){var f,h;return this._assert3d("directionalLight"),M.default._validateParameters("directionalLight",arguments),C=C instanceof M.default.Color?C:this.color(C,m,p),p="number"==typeof(m=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=m.x,h=m.y,m.z),m=Math.sqrt(f*f+h*h+p*p),this._renderer.directionalLightDirections.push(f/m,h/m,p/m),this._renderer.directionalLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.pointLight=function(C,p,m,I,D,d){var f,h;return this._assert3d("pointLight"),M.default._validateParameters("pointLight",arguments),C=C instanceof M.default.Color?C:this.color(C,p,m),m="number"==typeof(p=arguments[arguments.length-1])?(f=arguments[arguments.length-3],h=arguments[arguments.length-2],arguments[arguments.length-1]):(f=p.x,h=p.y,p.z),this._renderer.pointLightPositions.push(f,h,m),this._renderer.pointLightDiffuseColors.push(C._array[0],C._array[1],C._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},M.default.prototype.imageLight=function(C){this._renderer.activeImageLight=C,this._renderer._enableLighting=!0},M.default.prototype.panorama=function(C){this.filter(this._renderer._getSphereMapping(C))},M.default.prototype.lights=function(){this._assert3d("lights");var C=this.color("rgb(128,128,128)");return this.ambientLight(C),this.directionalLight(C,0,0,-1),this},M.default.prototype.lightFalloff=function(C,b,w){return this._assert3d("lightFalloff"),M.default._validateParameters("lightFalloff",arguments),C<0&&(C=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),b<0&&(b=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),w<0&&(w=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===C&&0===b&&0===w&&(C=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=C,this._renderer.linearAttenuation=b,this._renderer.quadraticAttenuation=w,this},M.default.prototype.spotLight=function(C,b,w,I,D,d,f,h,p,m,g){this._assert3d("spotLight"),M.default._validateParameters("spotLight",arguments);var x,E,S,L=arguments.length;switch(L){case 11:case 10:x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p);break;case 9:C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),S=new M.default.Vector(D,d,f),m=h,g=p):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=new M.default.Vector(D,d,f),m=h,g=p):f instanceof M.default.Vector?(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=f,m=h,g=p):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),S=new M.default.Vector(f,h,p));break;case 8:S=C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),f),m=h;break;case 7:C instanceof M.default.Color&&b instanceof M.default.Vector?(x=C,E=b,S=new M.default.Vector(w,I,D),m=d,g=f):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D,m=d,g=f):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D,m=d,g=f):S=C instanceof M.default.Color?(x=C,E=new M.default.Vector(b,w,I),new M.default.Vector(D,d,f)):I instanceof M.default.Vector?(x=this.color(C,b,w),E=I,new M.default.Vector(D,d,f)):(x=this.color(C,b,w),E=new M.default.Vector(I,D,d),f);break;case 6:I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D,m=d):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D,m=d):C instanceof M.default.Color&&b instanceof M.default.Vector&&(x=C,E=b,S=new M.default.Vector(w,I,D),m=d);break;case 5:C instanceof M.default.Color&&b instanceof M.default.Vector&&w instanceof M.default.Vector?(x=C,E=b,S=w,m=I,g=D):I instanceof M.default.Vector&&D instanceof M.default.Vector?(x=this.color(C,b,w),E=I,S=D):C instanceof M.default.Color&&D instanceof M.default.Vector?(x=C,E=new M.default.Vector(b,w,I),S=D):C instanceof M.default.Color&&b instanceof M.default.Vector&&(x=C,E=b,S=new M.default.Vector(w,I,D));break;case 4:x=C,E=b,S=w,m=I;break;case 3:x=C,E=b,S=w;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(L<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(E.x,E.y,E.z),S.normalize(),this._renderer.spotLightDirections.push(S.x,S.y,S.z),void 0===m&&(m=Math.PI/3),void 0!==g&&g<1?(g=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===g&&(g=100),m=this._renderer._pInst._toRadians(m),this._renderer.spotLightAngle.push(Math.cos(m)),this._renderer.spotLightConc.push(g),this._renderer._enableLighting=!0,this},M.default.prototype.noLights=function(){this._assert3d("noLights");for(var C=arguments.length,b=new Array(C),w=0;w<C;w++)b[w]=arguments[w];return M.default._validateParameters("noLights",b),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},Z.default=l=M.default},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(l,be,Z){"use strict";function M(m){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.splice"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.promise"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.match"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.trim"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,l("regenerator-runtime/runtime");var C=(p=l("../core/main"))&&p.__esModule?p:{default:p};function b(m){return function(g){if(Array.isArray(g)){for(var x=0,E=new Array(g.length);x<g.length;x++)E[x]=g[x];return E}}(m)||function(g){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g))return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(m,g,x,E,S,L,q){try{var J=m[L](q),G=J.value}catch(V){return void x(V)}J.done?g(G):Promise.resolve(G).then(E,S)}function I(m){return function(){var g=this,x=arguments;return new Promise(function(E,S){var L=m.apply(g,x);function q(G){w(L,E,S,q,J,"next",G)}function J(G){w(L,E,S,q,J,"throw",G)}q(void 0)})}}function D(m){return(D="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(g){return M(g)}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":M(g)})(m)}function d(m,g,x){for(var E=2<arguments.length&&void 0!==x?x:{},S={v:[],vt:[],vn:[]},L={},q=null,J=new Set,G=!1,V=!1,K=0;K<g.length;++K){var H=g[K].trim().split(/\b\s+/);if(0<H.length)if("usemtl"===H[0])q=H[1];else if("v"===H[0]||"vn"===H[0]){var te=new C.default.Vector(parseFloat(H[1]),parseFloat(H[2]),parseFloat(H[3]));S[H[0]].push(te)}else if("vt"===H[0])te=[parseFloat(H[1]),1-parseFloat(H[2])],S[H[0]].push(te);else if("f"===H[0])for(var Y=3;Y<H.length;++Y){for(var we=[],Se=[1,Y-1,Y],oe=0;oe<Se.length;++oe){for(var ge,re=H[Se[oe]],Q=re.split("/"),fe=0;fe<Q.length;fe++)Q[fe]=parseInt(Q[fe])-1;L[re]||(L[re]={}),void 0===L[re][q]?(ge=m.vertices.length,m.vertices.push(S.v[Q[0]].copy()),m.uvs.push(S.vt[Q[1]]?S.vt[Q[1]].slice():[0,0]),m.vertexNormals.push(S.vn[Q[2]]?S.vn[Q[2]].copy():new C.default.Vector),L[re][q]=ge,we.push(ge),q&&E[q]&&E[q].diffuseColor&&J.add(S.v[Q[0]])):we.push(L[re][q])}if(we[0]!==we[1]&&we[0]!==we[2]&&we[1]!==we[2])if(m.faces.push(we),q&&E[q]&&E[q].diffuseColor){G=G=!0;for(var De=E[q].diffuseColor,it=0;it<we.length;it++)m.vertexColors.push(De[0]),m.vertexColors.push(De[1]),m.vertexColors.push(De[2])}else V=!0}}if(0===m.vertexNormals.length&&m.computeNormals(),G===V)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function f(m,g){if(function(Wt){for(var mt=new DataView(Wt),Nt=[115,111,108,105,100],kt=0;kt<5;kt++)if(function(Ut,Tt,qt){for(var mn=0,Zn=Ut.length;mn<Zn;mn++)if(Ut[mn]!==Tt.getUint8(qt+mn,!1))return;return 1}(Nt,mt,kt))return;return 1}(g)){for(var x,E,S,L,q,J,G,V=m,K=new DataView(g),H=K.getUint32(80,!0),te=!1,Y=0;Y<70;Y++)1129270351===K.getUint32(Y,!1)&&82===K.getUint8(Y+4)&&61===K.getUint8(Y+5)&&(te=!0,L=[],q=K.getUint8(Y+6)/255,J=K.getUint8(Y+7)/255,G=K.getUint8(Y+8)/255);for(var we=0;we<H;we++){for(var Se,oe=84+50*we,ge=K.getFloat32(oe,!0),re=K.getFloat32(4+oe,!0),Q=K.getFloat32(8+oe,!0),fe=(te&&(S=32768&(Se=K.getUint16(48+oe,!0))?(x=q,E=J,G):(x=(31&Se)/31,E=(Se>>5&31)/31,(Se>>10&31)/31)),new C.default.Vector(ge,re,Q)),De=1;De<=3;De++){var it=new C.default.Vector(K.getFloat32(it=oe+12*De,!0),K.getFloat32(4+it,!0),K.getFloat32(8+it,!0));V.vertices.push(it),V.vertexNormals.push(fe),te&&L.push(x,E,S)}V.faces.push([3*we,3*we+1,3*we+2]),V.uvs.push([0,0],[0,0],[0,0])}}else if(g=new DataView(g),"TextDecoder"in window)for(var le,z,ye=m,Ue=new TextDecoder("utf-8").decode(g).split("\n"),Je="",vt=[],Ct=0;Ct<Ue.length;++Ct){for(var zt=Ue[Ct].trim(),_t=zt.split(" "),Ft=0;Ft<_t.length;++Ft)""===_t[Ft]&&_t.splice(Ft,1);if(0!==_t.length)switch(Je){case"":if("solid"!==_t[0])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "solid"'));Je="solid";break;case"solid":if("facet"!==_t[0]||"normal"!==_t[1])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "facet normal"'));le=new C.default.Vector(parseFloat(_t[2]),parseFloat(_t[3]),parseFloat(_t[4])),ye.vertexNormals.push(le,le,le),Je="facet normal";break;case"facet normal":if("outer"!==_t[0]||"loop"!==_t[1])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "outer loop"'));Je="vertex";break;case"vertex":if("vertex"===_t[0])z=new C.default.Vector(parseFloat(_t[1]),parseFloat(_t[2]),parseFloat(_t[3])),ye.vertices.push(z),ye.uvs.push([0,0]),vt.push(ye.vertices.indexOf(z));else{if("endloop"!==_t[0])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "vertex" or "endloop"'));ye.faces.push(vt),vt=[],Je="endloop"}break;case"endloop":if("endfacet"!==_t[0])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "endfacet"'));Je="endfacet";break;case"endfacet":if("endsolid"!==_t[0]){if("facet"!==_t[0]||"normal"!==_t[1])return console.error(zt),void console.error('Invalid state "'.concat(_t[0],'", should be "endsolid" or "facet normal"'));le=new C.default.Vector(parseFloat(_t[2]),parseFloat(_t[3]),parseFloat(_t[4])),ye.vertexNormals.push(le,le,le),Je="facet normal"}break;default:console.error('Invalid state "'.concat(Je,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}l("./p5.Geometry"),C.default.prototype.loadModel=function(m,g){C.default._validateParameters("loadModel",arguments);var x,E,te,S=!1,L=!1,q=!1,J=m.slice(-4),G=(g&&"object"===D(g)?(S=g.normalize||!1,x=g.successCallback,E=g.failureCallback,J=g.fileType||J,L=g.flipU||!1,q=g.flipV||!1):"boolean"==typeof g?(S=g,x=arguments[2],E=arguments[3],void 0!==arguments[4]&&(J=arguments[4])):(x="function"==typeof g?g:void 0,E=arguments[2],void 0!==arguments[3]&&(J=arguments[3])),new C.default.Geometry),V=(G.gid="".concat(m,"|").concat(S),this);function K(){return(K=I(F.mark(function te(Y){var we,Se,oe,ge;return F.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:for(we=[],Se=0;Se<Y.length;Se++)(oe=Y[Se].match(/^mtllib (.+)/))&&function(){var Q,fe=oe[1],De=m.split("/");Q=1<De.length?(De.pop(),De.join("/")+"/"+fe):fe,we.push(function(){return H.apply(this,arguments)}(Q).then(function(it){return it?(le=V,z=Q,new Promise(function(ye,Ue){var Je=null,vt={};le.loadStrings(z,function(Ct){for(var zt=0;zt<Ct.length;++zt){var Ft=Ct[zt].trim().split(/\s+/);"newmtl"===Ft[0]?vt[Je=Ft[1]]={}:"Kd"===Ft[0]?vt[Je].diffuseColor=[parseFloat(Ft[1]),parseFloat(Ft[2]),parseFloat(Ft[3])]:"Ka"===Ft[0]?vt[Je].ambientColor=[parseFloat(Ft[1]),parseFloat(Ft[2]),parseFloat(Ft[3])]:"Ks"===Ft[0]?vt[Je].specularColor=[parseFloat(Ft[1]),parseFloat(Ft[2]),parseFloat(Ft[3])]:"map_Kd"===Ft[0]&&(vt[Je].texturePath=Ft[1])}ye(vt)},Ue)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Q)),{});var le,z}).catch(function(it){return console.warn("Error loading MTL file: ".concat(Q),it),{}}))}();return re.prev=2,re.next=5,Promise.all(we);case 5:return ge=re.sent,ge=Object.assign.apply(Object,[{}].concat(b(ge))),re.abrupt("return",ge);case 10:return re.prev=10,re.t0=re.catch(2),re.abrupt("return",{});case 13:case"end":return re.stop()}},te,null,[[2,10]])}))).apply(this,arguments)}function H(){return(H=I(F.mark(function te(Y){return F.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.prev=0,Se.next=3,fetch(Y,{method:"HEAD"});case 3:return Se.abrupt("return",Se.sent.ok);case 7:return Se.prev=7,Se.t0=Se.catch(0),Se.abrupt("return",!1);case 10:case"end":return Se.stop()}},te,null,[[0,7]])}))).apply(this,arguments)}return J.match(/\.stl$/i)?this.httpDo(m,"GET","arrayBuffer",function(te){f(G,te),S&&G.normalize(),L&&G.flipU(),q&&G.flipV(),V._decrementPreload(),"function"==typeof x&&x(G)},E):J.match(/\.obj$/i)?this.loadStrings(m,(te=I(F.mark(function Y(we){return F.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,function(){return K.apply(this,arguments)}(we);case 3:d(G,we,oe.sent),oe.next=11;break;case 7:return oe.prev=7,oe.t0=oe.catch(0),E?E(oe.t0):C.default._friendlyError("Error during parsing: "+oe.t0.message),oe.abrupt("return");case 11:return oe.prev=11,S&&G.normalize(),L&&G.flipU(),q&&G.flipV(),G._makeTriangleEdges(),V._decrementPreload(),"function"==typeof x&&x(G),oe.finish(11);case 19:case"end":return oe.stop()}},Y,null,[[0,7,11,19]])})),function(Y){return te.apply(this,arguments)}),E):(C.default._friendlyFileLoadError(3,m),E?E():C.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),G},C.default.prototype.model=function(m){this._assert3d("model"),C.default._validateParameters("model",arguments),0<m.vertices.length&&(this._renderer.geometryInHash(m.gid)||(m._edgesToVertices(),this._renderer.createBuffers(m.gid,m)),this._renderer.drawBuffers(m.gid))};var h=0,p=(C.default.prototype.createModel=function(m){var g,x,E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ",J=2<arguments.length?arguments[2]:void 0,S=(C.default._validateParameters("createModel",arguments),!1),L=!1,q=!1;if((J&&"object"===D(J)?(S=J.normalize||!1,g=J.successCallback,x=J.failureCallback,L=J.flipU||!1,q=J.flipV||!1):x="boolean"==typeof J?(S=J,g=arguments[3],arguments[4]):(g="function"==typeof arguments[2]?arguments[2]:void 0,arguments[3]),J=new C.default.Geometry).gid="".concat(E,"|").concat(S,"|").concat(h++),E.match(/\.stl$/i))try{f(J,(new TextEncoder).encode(m).buffer)}catch(G){return void(x?x(G):C.default._friendlyError("Error during parsing: "+G.message))}else if(E.match(/\.obj$/i))try{d(J,m.split("\n"))}catch(G){return void(x?x(G):C.default._friendlyError("Error during parsing: "+G.message))}else C.default._friendlyFileLoadError(3,m),x?x():C.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return S&&J.normalize(),L&&J.flipU(),q&&J.flipV(),J._makeTriangleEdges(),"function"==typeof g&&g(J),J},C.default);Z.default=p},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.includes"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.join"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.includes"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants"));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}l("./p5.Texture"),b.default.prototype.loadShader=function(d,f,h,p){function m(){x._decrementPreload(),h&&h(g)}b.default._validateParameters("loadShader",arguments),p=p||console.error;var g=new b.default.Shader,x=this,E=!1,S=!1;return this.loadStrings(d,function(L){g._vertSrc=L.join("\n"),S=!0,E&&m()},p),this.loadStrings(f,function(L){g._fragSrc=L.join("\n"),E=!0,S&&m()},p),g},b.default.prototype.createShader=function(d,f,h){return b.default._validateParameters("createShader",arguments),new b.default.Shader(this._renderer,d,f,h)},b.default.prototype.createFilterShader=function(d){b.default._validateParameters("createFilterShader",arguments);var f=d.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return(f=new b.default.Shader(this._renderer,f,d)).ensureCompiledOnContext(this._renderer.GL?this:this._renderer.getFilterGraphicsLayer()),f},b.default.prototype.shader=function(d){return this._assert3d("shader"),b.default._validateParameters("shader",arguments),d.ensureCompiledOnContext(this),d.isStrokeShader()?this._renderer.userStrokeShader=d:(this._renderer.userFillShader=d,this._renderer._useNormalMaterial=!1),d.setDefaultUniforms(),this},b.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},b.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},b.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},b.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},b.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},b.default.prototype.texture=function(d){return this._assert3d("texture"),b.default._validateParameters("texture",arguments),d.gifProperties&&d._animateGif(this),this._renderer.drawMode=w.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=d,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.textureMode=function(d){d!==w.IMAGE&&d!==w.NORMAL?console.warn("You tried to set ".concat(d," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=d},b.default.prototype.textureWrap=function(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,h=(this._renderer.textureWrapX=d,this._renderer.textureWrapY=f,!0),p=!1,m=void 0;try{for(var g,x=this._renderer.textures.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)g.value.setWrapMode(d,f)}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}},b.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return b.default._validateParameters("normalMaterial",f),this._renderer.drawMode=w.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},b.default.prototype.ambientMaterial=function(d,f,h){this._assert3d("ambientMaterial"),b.default._validateParameters("ambientMaterial",arguments);var p=b.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=p._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},b.default.prototype.emissiveMaterial=function(d,f,h,p){this._assert3d("emissiveMaterial"),b.default._validateParameters("emissiveMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.specularMaterial=function(d,f,h,p){this._assert3d("specularMaterial"),b.default._validateParameters("specularMaterial",arguments);var m=b.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},b.default.prototype.shininess=function(d){return this._assert3d("shininess"),b.default._validateParameters("shininess",arguments),this._renderer._useShininess=d=d<1?1:d,this},b.default.prototype.metalness=function(d){return this._assert3d("metalness"),d=1-Math.exp(-d/100),this._renderer._useMetalness=d,this},b.default.RendererGL.prototype._applyColorBlend=function(d,m){var h=this.GL;return(m=m||this.userFillShader||this.userStrokeShader||this.userPointShader||this.drawMode===w.TEXTURE||this.curBlendMode!==w.BLEND||d[d.length-1]<1||this._isErasing)!==this._isBlending&&(m||this.curBlendMode!==w.BLEND&&this.curBlendMode!==w.ADD?h.enable(h.BLEND):h.disable(h.BLEND),h.depthMask(!0),this._isBlending=m),this._applyBlendMode(),d},b.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var d=this.GL;switch(this.curBlendMode){case w.BLEND:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.ADD:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE);break;case w.REMOVE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ZERO,d.ONE_MINUS_SRC_ALPHA);break;case w.MULTIPLY:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA);break;case w.SCREEN:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_COLOR);break;case w.EXCLUSION:d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD),d.blendFuncSeparate(d.ONE_MINUS_DST_COLOR,d.ONE_MINUS_SRC_COLOR,d.ONE,d.ONE);break;case w.REPLACE:d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO);break;case w.SUBTRACT:d.blendEquationSeparate(d.FUNC_REVERSE_SUBTRACT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case w.DARKEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case w.LIGHTEST:this.blendExt?(d.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,d.FUNC_ADD),d.blendFuncSeparate(d.ONE,d.ONE,d.ONE,d.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var D=b.default;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(l,be,Z){"use strict";l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.hypot"),l("core-js/modules/es.string.sub"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.prototype.camera=function(){var b;this._assert3d("camera");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("camera",I),(b=this._renderer._curCamera).camera.apply(b,I),this},M.default.prototype.perspective=function(){var b;this._assert3d("perspective");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("perspective",I),(b=this._renderer._curCamera).perspective.apply(b,I),this},M.default.prototype.linePerspective=function(b){if(M.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof M.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===b)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=b},M.default.prototype.ortho=function(){var b;this._assert3d("ortho");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("ortho",I),(b=this._renderer._curCamera).ortho.apply(b,I),this},M.default.prototype.frustum=function(){var b;this._assert3d("frustum");for(var w=arguments.length,I=new Array(w),D=0;D<w;D++)I[D]=arguments[D];return M.default._validateParameters("frustum",I),(b=this._renderer._curCamera).frustum.apply(b,I),this},M.default.prototype.createCamera=function(){this._assert3d("createCamera");var b=new M.default.Camera(this._renderer);return b._computeCameraDefaultSettings(),b._setDefaultCamera(),this._renderer._curCamera=b},M.default.Camera=function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._renderer=d,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new M.default.Matrix,this.projMatrix=new M.default.Matrix,this.yScale=1}var w,I;return w=b,(I=[{key:"perspective",value:function(m,f,h,p){this.cameraType=0<arguments.length?"custom":"default",this.cameraFOV=void 0===m?m=this.defaultCameraFOV:this._renderer._pInst._toRadians(m),void 0===f&&(f=this.defaultAspectRatio),void 0===h&&(h=this.defaultCameraNear),void 0===p&&(p=this.defaultCameraFar),h<=1e-4&&(h=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),p<h&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=h,this.cameraFar=p,this.projMatrix=M.default.Matrix.identity(),m=1/Math.tan(this.cameraFOV/2);var g=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/f,0,0,0,0,-m*this.yScale,0,0,0,0,(p+h)*g,-1,0,0,2*p*h*g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(G,J,h,p,m,g){var V=this.fbo||this._renderer,x=(void 0===G&&(G=-V.width/2),void 0===J&&(J=+V.width/2),void 0===h&&(h=-V.height/2),void 0===p&&(p=+V.height/2),void 0===m&&(m=0),void 0===g&&(g=Math.max(V.width,V.height)+800),this.cameraNear=m,V=J-G,p-h),E=(this.cameraFar=g)-m,S=2/V,L=2/x*this.yScale,q=-2/E;J=-(J+G)/V,G=-(p+h)/x,V=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-L,0,0,0,0,q,0,J,G,V,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(G,J,h,p,m,g){void 0===G&&(G=.05*-this._renderer.width),void 0===J&&(J=.05*+this._renderer.width),void 0===h&&(h=.05*+this._renderer.height),void 0===p&&(p=.05*-this._renderer.height),void 0===m&&(m=this.defaultCameraNear),void 0===g&&(g=this.defaultCameraFar),this.cameraNear=m;var V=J-G,x=p-h,E=(this.cameraFar=g)-m,S=2*m/V,L=2*m/x*this.yScale,q=-2*g*m/E;J=(J+G)/V,G=(p+h)/x,V=-(g+m)/E,this.projMatrix=M.default.Matrix.identity(),this.projMatrix.set(S,0,0,0,0,-L,0,0,J,G,V,-1,0,0,q,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(S,f,h,p){var m=this.centerX,g=this.centerY,x=this.centerZ,E=(m-=this.eyeX,g-=this.eyeY,x-=this.eyeZ,M.default.Matrix.identity(this._renderer._pInst));(E.rotate(this._renderer._pInst._toRadians(S),f,h,p),S=[m*E.mat4[0]+g*E.mat4[4]+x*E.mat4[8],m*E.mat4[1]+g*E.mat4[5]+x*E.mat4[9],m*E.mat4[2]+g*E.mat4[6]+x*E.mat4[10]])[0]+=this.eyeX,S[1]+=this.eyeY,S[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,S[0],S[1],S[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(h){var f=this._getLocalAxes();h=M.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(h),f.z[0],f.z[1],f.z[2]).rotateVector(new M.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"pan",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(d){var f=this._getLocalAxes();this._rotateView(d,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(d,f,h){this.camera(this.eyeX,this.eyeY,this.eyeZ,d,f,h,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(d,f,h,p,m,g,x,E,S){return void 0===d&&(h=this.defaultEyeZ,p=d=this.defaultEyeX,m=f=this.defaultEyeY,E=1,S=x=g=0),this.eyeX=d,this.eyeY=f,this.eyeZ=h,void 0!==p&&(this.centerX=p,this.centerY=m,this.centerZ=g),void 0!==x&&(this.upX=x,this.upY=E,this.upZ=S),p=this._getLocalAxes(),this.cameraMatrix.set(p.x[0],p.y[0],p.z[0],0,p.x[1],p.y[1],p.z[1],0,p.x[2],p.y[2],p.z[2],0,0,0,0,1),this.cameraMatrix.translate([m=-d,-f,-h]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(p,m,h){var g=this._getLocalAxes();this.camera(this.eyeX+(p=[g.x[0]*p,g.x[1]*p,g.x[2]*p])[0]+(m=[g.y[0]*m,g.y[1]*m,g.y[2]*m])[0]+(g=[g.z[0]*h,g.z[1]*h,g.z[2]*h])[0],this.eyeY+p[1]+m[1]+g[1],this.eyeZ+p[2]+m[2]+g[2],this.centerX+p[0]+m[0]+g[0],this.centerY+p[1]+m[1]+g[1],this.centerZ+p[2]+m[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(d,f,h){this.camera(d,f,h,this.centerX+(d-this.eyeX),this.centerY+(f-this.eyeY),this.centerZ+(h-this.eyeZ),this.upX,this.upY,this.upZ)}},{key:"set",value:function(d){for(var f=0,h=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];f<h.length;f++){var p=h[f];this[p]=d[p]}this.cameraMatrix=d.cameraMatrix.copy(),this.projMatrix=d.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(d,f,h){var p,m,g,x,E,S,L,q,J,G,V,K,H,te,Y,we,Se,oe;0===h?this.set(d):1===h?this.set(f):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=d.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/d.projMatrix.mat4[0],h),this.projMatrix.mat4[5]=d.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/d.projMatrix.mat4[5],h),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),x=new M.default.Vector(d.eyeX,d.eyeY,d.eyeZ),E=new M.default.Vector(f.eyeX,f.eyeY,f.eyeZ),we=new M.default.Vector(d.centerX,d.centerY,d.centerZ),oe=new M.default.Vector(f.centerX,f.centerY,f.centerZ),g=M.default.Vector.dist(x,we),p=M.default.Vector.dist(E,oe),p=g*Math.pow(p/g,h),g=M.default.Vector.sub(x,E),m=1,1e-6<(Se=(te=x.copy().sub(E).sub(we).add(oe)).magSq())&&(m=M.default.Vector.dot(g,te)/Se,m=Math.max(0,Math.min(m,1))),g=M.default.Vector.lerp(M.default.Vector.lerp(x,we,m),M.default.Vector.lerp(E,oe,m),h),te=d.cameraMatrix.createSubMatrix3x3(),Se=f.cameraMatrix.createSubMatrix3x3(),x=te.row(2),we=Se.row(2),E=te.row(1),oe=Se.row(1),d=new M.default.Vector,f=new M.default.Vector,S=new M.default.Vector,L=new M.default.Vector,1-(q=.5*((te=(Se=Se.mult3x3(te.copy().transpose3x3())).diagonal())[0]+te[1]+te[2]-1))<1e-7?(d.set(M.default.Vector.lerp(x,we,h)).normalize(),S.set(d).mult(m*p).add(g),L.set(d).mult((m-1)*p).add(g),f.set(M.default.Vector.lerp(E,oe,h)).normalize()):(we=1/(1-q),oe=Math.max(te[0],te[1],te[2]),K=Se.mat3[1]+Se.mat3[3],H=Se.mat3[2]+Se.mat3[6],Y=Se.mat3[5]+Se.mat3[7],oe=oe===te[0]?(G=.5*K*(we/=J=Math.sqrt((te[0]-q)*we)),V=.5*H*we,.5*(Se.mat3[7]-Se.mat3[5])/J):oe===te[1]?(V=.5*Y*(we/=G=Math.sqrt((te[1]-q)*we)),J=.5*K*we,.5*(Se.mat3[2]-Se.mat3[6])/G):(J=.5*H*(we/=V=Math.sqrt((te[2]-q)*we)),G=.5*Y*we,.5*(Se.mat3[3]-Se.mat3[1])/V),K=h*Math.atan2(oe,q),H=Math.cos(K),te=Math.sin(K),(oe=new M.default.Matrix("mat3",[H+(Y=1-H)*J*J,Y*(we=J*G)+te*V,Y*(Se=V*J)-te*G,Y*we-te*V,H+Y*G*G,Y*(h=G*V)+te*J,Y*Se+te*G,Y*h-te*J,H+Y*V*V])).multiplyVec3(x,d),S.set(d).mult(m*p).add(g),L.set(d).mult((m-1)*p).add(g),oe.multiplyVec3(E,f)),this.camera(S.x,S.y,S.z,L.x,L.y,L.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var d=new M.default.Camera(this._renderer);return d.cameraFOV=this.cameraFOV,d.aspectRatio=this.aspectRatio,d.eyeX=this.eyeX,d.eyeY=this.eyeY,d.eyeZ=this.eyeZ,d.centerX=this.centerX,d.centerY=this.centerY,d.centerZ=this.centerZ,d.upX=this.upX,d.upY=this.upY,d.upZ=this.upZ,d.cameraNear=this.cameraNear,d.cameraFar=this.cameraFar,d.cameraType=this.cameraType,d.useLinePerspective=this.useLinePerspective,d.cameraMatrix=this.cameraMatrix.copy(),d.projMatrix=this.projMatrix.copy(),d.yScale=this.yScale,d}},{key:"_getLocalAxes",value:function(){var L,d=this.eyeX-this.centerX,f=this.eyeY-this.centerY,h=this.eyeZ-this.centerZ,x=(0!==(x=Math.sqrt(d*d+f*f+h*h))&&(d/=x,f/=x,h/=x),this.upX),p=(E=this.upY)*h-(S=this.upZ)*f,m=-x*h+S*d,g=x*f-E*d,E=(x=f*g-h*m,-d*g+h*p),S=d*m-f*p;return 0!==(0!==(L=Math.sqrt(p*p+m*m+g*g))&&(p/=L,m/=L,g/=L),L=Math.sqrt(x*x+E*E+S*S))&&(x/=L,E/=L,S/=L),{x:[p,m,g],y:[x,E,S],z:[d,f,h]}}},{key:"_orbit",value:function(d,L,S){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ).normalize(),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(x,g));(p=(p*=Math.pow(10,S))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.acos(Math.max(-1,Math.min(1,M.default.Vector.dot(m,g))))+L,L=d,(S<=0||S>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),g.mult(Math.cos(S)),E.mult(Math.cos(L)*Math.sin(S)),x.mult(Math.sin(L)*Math.sin(S)),m.set(g).add(E).add(x),this.eyeX=p*m.x+this.centerX,this.eyeY=p*m.y+this.centerY,this.eyeZ=p*m.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(S,L,J){var m=this.eyeX-this.centerX,g=this.eyeY-this.centerY,x=this.eyeZ-this.centerZ,p=Math.hypot(m,g,x),E=(m=new M.default.Vector(m,g,x).normalize(),g=new M.default.Vector(this.upX,this.upY,this.upZ),x=M.default.Vector.cross(g,m).normalize(),M.default.Vector.cross(m,x)),G=Math.atan2(L,S),q=(E.mult(Math.sin(G)),x.mult(Math.cos(G)).add(E),G=Math.sqrt(S*S+L*L),E=M.default.Vector.cross(m,x),(p=(p*=Math.pow(10,J))<this.cameraNear?this.cameraNear:p)>this.cameraFar&&(p=this.cameraFar),S=Math.cos(G),L=Math.sin(G),(J=g.dot(m))*S+(G=g.dot(x))*L);J=-J*L+G*S,G=g.dot(E),g.x=q*m.x+J*x.x+G*E.x,g.y=q*m.y+J*x.y+G*E.y,g.z=q*m.z+J*x.z+G*E.z,x.mult(-L),m.mult(S).add(x).mult(p),this.camera(m.x+this.centerX,m.y+this.centerY,m.z+this.centerZ,this.centerX,this.centerY,this.centerZ,g.x,g.y,g.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&C(w.prototype,I),b}(),M.default.prototype.setCamera=function(b){this._renderer._curCamera=b,this._renderer.uPMatrix.set(b.projMatrix),this._renderer.uViewMatrix.set(b.cameraMatrix)},Z.default=l=M.default.Camera},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(l,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.math.log2"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.DataArray=function(){function C(){var D=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(D),this.initialLength=D}var b,w;return b=C,(w=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var D;this.length<this.data.length/2&&(D=1<<Math.ceil(Math.log2(this.length)),(D=new Float32Array(D)).set(this.data.subarray(0,this.length),0),this.data=D)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var D=arguments.length,d=new Array(D),f=0;f<D;f++)d[f]=arguments[f];this.ensureLength(this.length+d.length),this.data.set(d,this.length),this.length+=d.length}},{key:"slice",value:function(D,d){return this.data.slice(D,Math.min(d,this.length))}},{key:"subArray",value:function(D,d){return this.data.subarray(D,Math.min(d,this.length))}},{key:"ensureLength",value:function(D){for(;this.data.length<D;){var d=new Float32Array(2*this.data.length);d.set(this.data,0),this.data=d}}}])&&M(b.prototype,w),C}(),Z.default=l=l.default.DataArray},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(V,be,Z){"use strict";function M(K){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(K)}function C(K){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(H){return M(H)}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":M(H)})(K)}V("core-js/modules/es.symbol"),V("core-js/modules/es.symbol.description"),V("core-js/modules/es.symbol.iterator"),V("core-js/modules/es.array.fill"),V("core-js/modules/es.array.includes"),V("core-js/modules/es.array.iterator"),V("core-js/modules/es.object.get-own-property-descriptor"),V("core-js/modules/es.object.get-prototype-of"),V("core-js/modules/es.object.to-string"),V("core-js/modules/es.reflect.construct"),V("core-js/modules/es.reflect.get"),V("core-js/modules/es.regexp.to-string"),V("core-js/modules/es.string.includes"),V("core-js/modules/es.string.iterator"),V("core-js/modules/es.typed-array.float32-array"),V("core-js/modules/es.typed-array.uint8-array"),V("core-js/modules/es.typed-array.uint8-clamped-array"),V("core-js/modules/es.typed-array.copy-within"),V("core-js/modules/es.typed-array.every"),V("core-js/modules/es.typed-array.fill"),V("core-js/modules/es.typed-array.filter"),V("core-js/modules/es.typed-array.find"),V("core-js/modules/es.typed-array.find-index"),V("core-js/modules/es.typed-array.for-each"),V("core-js/modules/es.typed-array.includes"),V("core-js/modules/es.typed-array.index-of"),V("core-js/modules/es.typed-array.iterator"),V("core-js/modules/es.typed-array.join"),V("core-js/modules/es.typed-array.last-index-of"),V("core-js/modules/es.typed-array.map"),V("core-js/modules/es.typed-array.reduce"),V("core-js/modules/es.typed-array.reduce-right"),V("core-js/modules/es.typed-array.reverse"),V("core-js/modules/es.typed-array.set"),V("core-js/modules/es.typed-array.slice"),V("core-js/modules/es.typed-array.some"),V("core-js/modules/es.typed-array.sort"),V("core-js/modules/es.typed-array.subarray"),V("core-js/modules/es.typed-array.to-locale-string"),V("core-js/modules/es.typed-array.to-string"),V("core-js/modules/es.weak-map"),V("core-js/modules/web.dom-collections.iterator"),V("core-js/modules/es.array.fill"),V("core-js/modules/es.array.includes"),V("core-js/modules/es.array.iterator"),V("core-js/modules/es.object.get-prototype-of"),V("core-js/modules/es.object.to-string"),V("core-js/modules/es.string.includes"),V("core-js/modules/es.typed-array.float32-array"),V("core-js/modules/es.typed-array.uint8-array"),V("core-js/modules/es.typed-array.uint8-clamped-array"),V("core-js/modules/es.typed-array.copy-within"),V("core-js/modules/es.typed-array.every"),V("core-js/modules/es.typed-array.fill"),V("core-js/modules/es.typed-array.filter"),V("core-js/modules/es.typed-array.find"),V("core-js/modules/es.typed-array.find-index"),V("core-js/modules/es.typed-array.for-each"),V("core-js/modules/es.typed-array.includes"),V("core-js/modules/es.typed-array.index-of"),V("core-js/modules/es.typed-array.iterator"),V("core-js/modules/es.typed-array.join"),V("core-js/modules/es.typed-array.last-index-of"),V("core-js/modules/es.typed-array.map"),V("core-js/modules/es.typed-array.reduce"),V("core-js/modules/es.typed-array.reduce-right"),V("core-js/modules/es.typed-array.reverse"),V("core-js/modules/es.typed-array.set"),V("core-js/modules/es.typed-array.slice"),V("core-js/modules/es.typed-array.some"),V("core-js/modules/es.typed-array.sort"),V("core-js/modules/es.typed-array.subarray"),V("core-js/modules/es.typed-array.to-locale-string"),V("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(G=V("../core/main"))&&G.__esModule?G:{default:G},w=function(K){if(K&&K.__esModule)return K;if(null===K||"object"!==C(K)&&"function"!=typeof K)return{default:K};var H=d();if(H&&H.has(K))return H.get(K);var te,Y={},we=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(te in K){var Se;Object.prototype.hasOwnProperty.call(K,te)&&((Se=we?Object.getOwnPropertyDescriptor(K,te):null)&&(Se.get||Se.set)?Object.defineProperty(Y,te,Se):Y[te]=K[te])}return Y.default=K,H&&H.set(K,Y),Y}(V("../core/constants")),I=V("./p5.Texture"),D=V("./p5.RendererGL");function d(){var K;return"function"!=typeof WeakMap?null:(d=function(){return K},K=new WeakMap)}function f(K,H){return function(te){if(Array.isArray(te))return te}(K)||function(te,Y){if(Symbol.iterator in Object(te)||"[object Arguments]"===Object.prototype.toString.call(te)){var we=[],Se=!0,oe=!1,ge=void 0;try{for(var re,Q=te[Symbol.iterator]();!(Se=(re=Q.next()).done)&&(we.push(re.value),!Y||we.length!==Y);Se=!0);}catch(fe){oe=!0,ge=fe}finally{try{Se||null==Q.return||Q.return()}finally{if(oe)throw ge}}return we}}(K,H)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(K,H,te){return H in K?Object.defineProperty(K,H,{value:te,enumerable:!0,configurable:!0,writable:!0}):K[H]=te,K}function p(K,H){if(!(K instanceof H))throw new TypeError("Cannot call a class as a function")}function m(K,H){for(var te=0;te<H.length;te++){var Y=H[te];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(K,Y.key,Y)}}function g(K,H,te){H&&m(K.prototype,H),te&&m(K,te)}function x(K,H,te){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(oe,we,Se){if(oe=function(ge,re){for(;!Object.prototype.hasOwnProperty.call(ge,re)&&null!==(ge=L(ge)););return ge}(oe,we))return(oe=Object.getOwnPropertyDescriptor(oe,we)).get?oe.get.call(Se):oe.value})(K,H,te||K)}function E(K,H){return(E=Object.setPrototypeOf||function(te,Y){return te.__proto__=Y,te})(K,H)}function L(K){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)})(K)}var q=function(K){var H=Y;if("function"!=typeof K&&null!==K)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(K&&K.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),K&&E(H,K);var te=function S(K){return function(){var H,te=L(K);if(H=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(H=L(this).constructor,Reflect.construct(te,arguments,H)):te.apply(this,arguments),te=this,!H||"object"!==C(H)&&"function"!=typeof H){if(void 0!==te)return te;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return H}}(Y);function Y(we){var Se;return p(this,Y),(Se=te.call(this,we.target._renderer)).fbo=we,Se.yScale=-1,Se}return g(Y,[{key:"_computeCameraDefaultSettings",value:function(){x(L(Y.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),Y}(b.default.Camera),J=(b.default.FramebufferCamera=q,function(){function K(H,te){p(this,K),this.framebuffer=H,this.property=te}return g(K,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),K}()),G=(b.default.FramebufferTexture=J,function(){function K(H){var te=this,Y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},we=(p(this,K),this.target=H,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=Y.format||w.UNSIGNED_BYTE,this.channels=Y.channels||(H._renderer._pInst._glAttributes.alpha?w.RGBA:w.RGB),this.useDepth=void 0===Y.depth||Y.depth,this.depthFormat=Y.depthFormat||w.FLOAT,this.textureFiltering=Y.textureFiltering||w.LINEAR,this.antialiasSamples=void 0===Y.antialias?H._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof Y.antialias?Y.antialias:Y.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&H.webglVersion!==w.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=Y.density||H.pixelDensity(),H._renderer.GL);if(this.gl=we,Y.width&&Y.height?(Se=H._renderer._adjustDimensions(Y.width,Y.height),this.width=Se.adjustedWidth,this.height=Se.adjustedHeight,this._autoSized=!1):(void 0===Y.width!=(void 0===Y.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=H.width,this.height=H.height,this._autoSized=!0),this._checkIfFormatsAvailable(),Y.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===Y.stencil||Y.stencil),this.framebuffer=we.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=we.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var Se=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=Se,this.draw(function(){return te.target.clear()})}return g(K,[{key:"resize",value:function(H,te){this._autoSized=!1;var Y=this.target._renderer._adjustDimensions(H,te);te=Y.adjustedHeight,this.width=H=Y.adjustedWidth,this.height=te,this._handleResize()}},{key:"pixelDensity",value:function(H){if(!H)return this.density;this._autoSized=!1,this.density=H,this._handleResize()}},{key:"autoSized",value:function(H){if(void 0===H)return this._autoSized;this._autoSized=H,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var H=this.gl;(this.useDepth&&this.target.webglVersion===w.WEBGL&&!H.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===w.WEBGL&&this.depthFormat===w.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),[w.UNSIGNED_BYTE,w.FLOAT,w.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&![w.UNSIGNED_INT,w.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=w.FLOAT),H=(0,I.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==w.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.useDepth&&!H.float&&this.depthFormat===w.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=w.UNSIGNED_INT),H.halfFloat||this.format!==w.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=w.UNSIGNED_BYTE),this.channels===w.RGB&&[w.FLOAT,w.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=w.RGBA)}},{key:"_recreateTextures",value:function(){var H=this.gl,te=(this._updateSize(),H.getParameter(H.TEXTURE_BINDING_2D)),Y=H.getParameter(H.FRAMEBUFFER_BINDING);if(!(we=H.createTexture()))throw new Error("Unable to create color texture");H.bindTexture(H.TEXTURE_2D,we);var Se=this._glColorFormat();if(H.texImage2D(H.TEXTURE_2D,0,Se.internalFormat,this.width*this.density,this.height*this.density,0,Se.format,Se.type,null),this.colorTexture=we,H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,we,0),this.useDepth){var we;if(!(we=H.createTexture()))throw new Error("Unable to create depth texture");var oe=this._glDepthFormat();H.bindTexture(H.TEXTURE_2D,we),H.texImage2D(H.TEXTURE_2D,0,oe.internalFormat,this.width*this.density,this.height*this.density,0,oe.format,oe.type,null),H.framebufferTexture2D(H.FRAMEBUFFER,this.useStencil?H.DEPTH_STENCIL_ATTACHMENT:H.DEPTH_ATTACHMENT,H.TEXTURE_2D,we,0),this.depthTexture=we}this.antialias&&(this.colorRenderbuffer=H.createRenderbuffer(),H.bindRenderbuffer(H.RENDERBUFFER,this.colorRenderbuffer),H.renderbufferStorageMultisample(H.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,H.getParameter(H.MAX_SAMPLES))),Se.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(oe=this._glDepthFormat(),this.depthRenderbuffer=H.createRenderbuffer(),H.bindRenderbuffer(H.RENDERBUFFER,this.depthRenderbuffer),H.renderbufferStorageMultisample(H.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,H.getParameter(H.MAX_SAMPLES))),oe.internalFormat,this.width*this.density,this.height*this.density)),H.bindFramebuffer(H.FRAMEBUFFER,this.aaFramebuffer),H.framebufferRenderbuffer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&H.framebufferRenderbuffer(H.FRAMEBUFFER,this.useStencil?H.DEPTH_STENCIL_ATTACHMENT:H.DEPTH_ATTACHMENT,H.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new J(this,"depthTexture"),this.depthP5Texture=new b.default.Texture(this.target._renderer,this.depth,{minFilter:we=H.NEAREST,magFilter:we}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new J(this,"colorTexture"),this.colorP5Texture=new b.default.Texture(this.target._renderer,this.color,{minFilter:Se=this.textureFiltering===w.LINEAR?H.LINEAR:H.NEAREST,magFilter:Se}),this.target._renderer.textures.set(this.color,this.colorP5Texture),H.bindTexture(H.TEXTURE_2D,te),H.bindFramebuffer(H.FRAMEBUFFER,Y)}},{key:"_glColorFormat",value:function(){var H,te,Y=this.gl,we=this.format===w.FLOAT?Y.FLOAT:this.format===w.HALF_FLOAT?this.target.webglVersion===w.WEBGL2?Y.HALF_FLOAT:Y.getExtension("OES_texture_half_float").HALF_FLOAT_OES:Y.UNSIGNED_BYTE,Se=this.channels===w.RGBA?Y.RGBA:Y.RGB;return{internalFormat:this.target.webglVersion===w.WEBGL2?(h(te={},Y.FLOAT,h({},Y.RGBA,Y.RGBA32F)),h(te,Y.HALF_FLOAT,h({},Y.RGBA,Y.RGBA16F)),h(te,Y.UNSIGNED_BYTE,(h(H={},Y.RGBA,Y.RGBA8),h(H,Y.RGB,Y.RGB8),H)),te[we][Se]):this.format===w.HALF_FLOAT?Y.RGBA:Se,format:Se,type:we}}},{key:"_glDepthFormat",value:function(){var Y=this.gl,H=this.useStencil?this.depthFormat===w.FLOAT?Y.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===w.WEBGL2?Y.UNSIGNED_INT_24_8:Y.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===w.FLOAT?Y.FLOAT:Y.UNSIGNED_INT,te=this.useStencil?Y.DEPTH_STENCIL:Y.DEPTH_COMPONENT;return{internalFormat:Y=this.useStencil?this.depthFormat===w.FLOAT?Y.DEPTH32F_STENCIL8:this.target.webglVersion===w.WEBGL2?Y.DEPTH24_STENCIL8:Y.DEPTH_STENCIL:this.target.webglVersion===w.WEBGL2?this.depthFormat===w.FLOAT?Y.DEPTH_COMPONENT32F:Y.DEPTH_COMPONENT24:Y.DEPTH_COMPONENT,format:te,type:H}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var H=this.depth,te=this.colorRenderbuffer,Y=this.depthRenderbuffer,we=(this._deleteTexture(we=this.color),H&&this._deleteTexture(H),this.gl);te&&we.deleteRenderbuffer(te),Y&&we.deleteRenderbuffer(Y),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var H=new q(this);return H._computeCameraDefaultSettings(),H._setDefaultCamera(),this.target._renderer._curCamera=H}},{key:"_deleteTexture",value:function(H){this.gl.deleteTexture(H.rawTexture()),this.target._renderer.textures.delete(H)}},{key:"remove",value:function(){var H=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),H.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&H.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&H.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&H.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var H=this.gl;H.bindFramebuffer(H.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var H=this.gl,te=(H.bindFramebuffer(H.READ_FRAMEBUFFER,this.aaFramebuffer),H.bindFramebuffer(H.DRAW_FRAMEBUFFER,this.framebuffer),[[H.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&te.push([H.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var Y=0,we=te;Y<we.length;Y++){var oe=f(we[Y],2);H.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,oe[0],oe=oe[1])}}}},{key:"end",value:function(){var H=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(H.bindFramebuffer(H.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(H){this.begin(),H(),this.end()}},{key:"loadPixels",value:function(){var H=this.gl,te=this.target._renderer.activeFramebuffer(),Y=(H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,D.readPixelsWebGL)(this.pixels,H,this.framebuffer,0,0,this.width*this.density,this.height*this.density,Y.format,Y.type),H.bindFramebuffer(H.FRAMEBUFFER,te?te._framebufferToBind():null)}},{key:"get",value:function(H,te,Y,we){b.default._validateParameters("p5.Framebuffer.get",arguments);var Se=this._glColorFormat();if(void 0===H&&void 0===te)te=H=0,Y=this.width,we=this.height;else if(void 0===Y&&void 0===we)return(H<0||te<0||H>=this.width||te>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),H=this.target.constrain(H,0,this.width-1),te=this.target.constrain(te,0,this.height-1)),(0,D.readPixelWebGL)(this.gl,this.framebuffer,H*this.density,te*this.density,Se.format,Se.type);H=this.target.constrain(H,0,this.width-1),te=this.target.constrain(te,0,this.height-1),Y=this.target.constrain(Y,1,this.width-H),we=this.target.constrain(we,1,this.height-te);for(var oe=(0,D.readPixelsWebGL)(void 0,this.gl,this.framebuffer,H*this.density,te*this.density,Y*this.density,we*this.density,Se.format,Se.type),ge=new Uint8ClampedArray(Y*we*this.density*this.density*4),re=(ge.fill(255),Se.type===this.gl.RGB?3:4),Q=0;Q<we*this.density;Q++)for(var fe=0;fe<Y*this.density;fe++)for(var De=0;De<4;De++){var le=4*(Q*Y*this.density+fe)+De;De<re&&(ge[le]=oe[4==re?le:(Q*Y*this.density+fe)*re+De])}return(H=new b.default.Image(Y*this.density,we*this.density)).imageData=H.canvas.getContext("2d").createImageData(H.width,H.height),H.imageData.data.set(ge),H.pixels=H.imageData.data,H.updatePixels(),1!==this.density&&H.resize(Y,we),H}},{key:"updatePixels",value:function(){var H=this.gl,te=(this.colorP5Texture.bindTexture(),this._glColorFormat()),Y=this.width*this.height*this.density*this.density*(Y=te.format===H.RGBA?4:3),we=te.type===H.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof we)||this.pixels.length!==Y)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");H.texImage2D(H.TEXTURE_2D,0,te.internalFormat,this.width*this.density,this.height*this.density,0,te.format,te.type,this.pixels),this.colorP5Texture.unbindTexture(),we=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(H.clearDepth(1),H.clear(H.DEPTH_BUFFER_BIT)),this.end()):(H.bindFramebuffer(H.FRAMEBUFFER,this.framebuffer),this.useDepth&&(H.clearDepth(1),H.clear(H.DEPTH_BUFFER_BIT)),H.bindFramebuffer(H.FRAMEBUFFER,we?we._framebufferToBind():null))}}]),K}());V=b.default.Framebuffer=G,Z.default=V},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(l,be,Z){"use strict";function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}function C(p){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(m){return M(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":M(m)})(p)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.flat"),l("core-js/modules/es.array.for-each"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.last-index-of"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.unscopables.flat"),l("core-js/modules/es.array-buffer.constructor"),l("core-js/modules/es.map"),l("core-js/modules/es.number.constructor"),l("core-js/modules/es.object.entries"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.set"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.for-each"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(h=l("../core/main"))&&h.__esModule?h:{default:h},w=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==C(p)&&"function"!=typeof p)return{default:p};var m=I();if(m&&m.has(p))return m.get(p);var g,x={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in p){var S;Object.prototype.hasOwnProperty.call(p,g)&&((S=E?Object.getOwnPropertyDescriptor(p,g):null)&&(S.get||S.set)?Object.defineProperty(x,g,S):x[g]=p[g])}return x.default=p,m&&m.set(p,x),x}(l("../core/constants"));function I(){var p;return"function"!=typeof WeakMap?null:(I=function(){return p},p=new WeakMap)}function D(p){return function(m){if(Array.isArray(m)){for(var g=0,x=new Array(m.length);g<m.length;g++)x[g]=m[g];return x}}(p)||function(m){if(Symbol.iterator in Object(m)||"[object Arguments]"===Object.prototype.toString.call(m))return Array.from(m)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(p,m){return function(g){if(Array.isArray(g))return g}(p)||function(g,x){if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g)){var E=[],S=!0,L=!1,q=void 0;try{for(var J,G=g[Symbol.iterator]();!(S=(J=G.next()).done)&&(E.push(J.value),!x||E.length!==x);S=!0);}catch(V){L=!0,q=V}finally{try{S||null==G.return||G.return()}finally{if(L)throw q}}return E}}(p,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(p,m){for(var g=0;g<m.length;g++){var x=m[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(p,x.key,x)}}b.default.Geometry=function(){function p(E,S,L){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new b.default.DataArray,this.lineTangentsIn=new b.default.DataArray,this.lineTangentsOut=new b.default.DataArray,this.lineSides=new b.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new b.default.DataArray,this.detailX=void 0!==E?E:1,this.detailY=void 0!==S?S:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,L instanceof Function&&L.call(this)}var m,g;return m=p,(g=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var E=new b.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),S=new b.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),L=0;L<this.vertices.length;L++){var q=this.vertices[L];E.x=Math.min(E.x,q.x),E.y=Math.min(E.y,q.y),E.z=Math.min(E.z,q.z),S.x=Math.max(S.x,q.x),S.y=Math.max(S.y,q.y),S.z=Math.max(S.z,q.z)}var J=new b.default.Vector(S.x-E.x,S.y-E.y,S.z-E.z),G=new b.default.Vector((E.x+S.x)/2,(E.y+S.y)/2,(E.z+S.z)/2);this.boundingBoxCache={min:E,max:S,size:J,offset:G}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var E=0;E<this.vertexColors.length;E+=4)if(this.vertexColors[E+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var E=0;E<this.lineVertexColors.length;E+=4)if(this.lineVertexColors[E+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var E=this,S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",L="";if(this.vertices.forEach(function(G){L+="v ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.uvs&&0<this.uvs.length)for(var q=0;q<this.uvs.length;q+=2)L+="vt ".concat(this.uvs[q]," ").concat(this.uvs[q+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(G){L+="vn ".concat(G.x," ").concat(G.y," ").concat(G.z,"\n")}),this.faces.forEach(function(G){var V="f";G.forEach(function(K){V=V+" "+(K+1),(0<E.vertexNormals.length||0<E.uvs.length)&&(V+="/",0<E.uvs.length&&(V+=K+1),V+="/",0<E.vertexNormals.length&&(V+=K+1))}),L+=V+"\n"});var J=new Blob([L],{type:"text/plain"});b.default.prototype.downloadFile(J,S,"obj")}},{key:"saveStl",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",S=void 0!==(S=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&S,L=E.substring(0,E.lastIndexOf(".")),q=[],J=!0,G=!1,V=void 0;try{for(var K,H=this.faces[Symbol.iterator]();!(J=(K=H.next()).done);J=!0){var te=K.value,Y=b.default.Vector.sub(this.vertices[te[1]],this.vertices[te[0]]),we=b.default.Vector.sub(this.vertices[te[2]],this.vertices[te[0]]);q.push(new b.default.Vector(Y.y*we.z-Y.z*we.y,Y.z*we.x-Y.x*we.z,Y.x*we.y-Y.y*we.x).normalize())}}catch(mn){G=!0,V=mn}finally{try{J||null==H.return||H.return()}finally{if(G)throw V}}if(S){var re,Q=80;G=2*this.faces.length+3*this.faces.length*4*4+80+4,V=new ArrayBuffer(G),(re=new DataView(V)).setUint32(Q,this.faces.length,!0),Q+=4;for(var fe=0,De=Object.entries(this.faces);fe<De.length;fe++){var z=(it=d(De[fe],2))[0],it=it[1],le=(re.setFloat32(Q,(z=q[z]).x,!0),re.setFloat32(Q+=4,z.y,!0),re.setFloat32(Q+=4,z.z,!0),Q+=4,!0),ye=void(z=!1);try{for(var Ue,Je=it[Symbol.iterator]();!(le=(Ue=Je.next()).done);le=!0){var Ct=this.vertices[Ue.value];re.setFloat32(Q,Ct.x,!0),re.setFloat32(Q+=4,Ct.y,!0),re.setFloat32(Q+=4,Ct.z,!0),Q+=4}}catch(An){z=!0,ye=An}finally{try{le||null==Je.return||Je.return()}finally{if(z)throw ye}}re.setUint16(Q,0,!0),Q+=2}}else{re="solid "+L+"\n";for(var zt=0,_t=Object.entries(this.faces);zt<_t.length;zt++){var mt=(Ft=d(_t[zt],2))[0],Ft=Ft[1],Wt=(re=re+" facet norm "+(mt=q[mt]).x+" "+mt.y+" "+mt.z+"\n  outer loop\n",!0),Nt=void(mt=!1);try{for(var kt,Ut=Ft[Symbol.iterator]();!(Wt=(kt=Ut.next()).done);Wt=!0){var qt=this.vertices[kt.value];re+="   vertex "+qt.x+" "+qt.y+" "+qt.z+"\n"}}catch(mn){mt=!0,Nt=mn}finally{try{Wt||null==Ut.return||Ut.return()}finally{if(mt)throw Nt}}re+="  endloop\n endfacet\n"}re+="endsolid "+L+"\n"}S=new Blob([re],{type:"text/plain"}),b.default.prototype.downloadFile(S,E,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?1-E:E})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(E,S){return S%2==0?E:1-E})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var E,S,L,q=this.detailX+1,J=0;J<this.detailY;J++)for(var G=0;G<this.detailX;G++)S=(J+1)*q+G+1,this.faces.push([J*q+G,E=J*q+G+1,L=(J+1)*q+G]),this.faces.push([L,E,S]);return this}},{key:"_getFaceNormal",value:function(S){var L=this.vertices[(S=this.faces[S])[0]],J=this.vertices[S[1]],q=(S=this.vertices[S[2]],J=b.default.Vector.sub(J,L),S=b.default.Vector.sub(S,L),L=b.default.Vector.cross(J,S),b.default.Vector.mag(L));return 0==(J=q/(b.default.Vector.mag(J)*b.default.Vector.mag(S)))||isNaN(J)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),L):(1<J&&(J=1),L.mult(Math.asin(J)/q))}},{key:"computeNormals",value:function(){var E,S=this,q=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,J=this.vertexNormals,G=this.vertices,V=this.faces;if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:w.FLAT)===w.SMOOTH){for(var K={},H=[],te=Math.pow(10,void 0===q?3:q),Y=function(re){return Math.round(re*te)/te},we=function(re){return"".concat(Y(re.x),",").concat(Y(re.y),",").concat(Y(re.z))},Se=0;Se<G.length;Se++){var oe=G[Se],ge=we(oe);void 0===K[ge]&&(K[ge]=H.length,H.push(oe))}V.forEach(function(re){for(var Q=0;Q<3;++Q){var fe=we(fe=G[fe=re[Q]]);re[Q]=K[fe]}}),this.edges.forEach(function(re){for(var Q=0;Q<2;++Q){var fe=we(fe=G[fe=re[Q]]);re[Q]=K[fe]}}),this.vertices=G=H}for(E=J.length=0;E<G.length;++E)J.push(new b.default.Vector);for(V.forEach(function(re,Q){for(var fe=S._getFaceNormal(Q),De=0;De<3;++De)J[re[De]].add(fe)}),E=0;E<G.length;++E)J[E].normalize();return this}},{key:"averageNormals",value:function(){for(var E=0;E<=this.detailY;E++){var S=this.detailX+1,L=b.default.Vector.add(this.vertexNormals[E*S],this.vertexNormals[E*S+this.detailX]);L=b.default.Vector.div(L,2),this.vertexNormals[E*S]=L,this.vertexNormals[E*S+this.detailX]=L}return this}},{key:"averagePoleNormals",value:function(){for(var E=new b.default.Vector(0,0,0),S=0;S<this.detailX;S++)E.add(this.vertexNormals[S]);E=b.default.Vector.div(E,this.detailX);for(var L=0;L<this.detailX;L++)this.vertexNormals[L]=E;E=new b.default.Vector(0,0,0);for(var q=this.vertices.length-1;q>this.vertices.length-1-this.detailX;q--)E.add(this.vertexNormals[q]);E=b.default.Vector.div(E,this.detailX);for(var J=this.vertices.length-1;J>this.vertices.length-1-this.detailX;J--)this.vertexNormals[J]=E;return this}},{key:"_makeTriangleEdges",value:function(){for(var E=this.edges.length=0;E<this.faces.length;E++)this.edges.push([this.faces[E][0],this.faces[E][1]]),this.edges.push([this.faces[E][1],this.faces[E][2]]),this.edges.push([this.faces[E][2],this.faces[E][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var E,S=new Map,L=new Set,q=0;q<this.edges.length;q++){var J,G=this.edges[q-1],V=this.edges[q],K=this.vertices[V[0]],H=this.vertices[V[1]],te=0<this.vertexStrokeColors.length&&G?this.vertexStrokeColors.slice(4*G[1],4*(G[1]+1)):[0,0,0,0],Y=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*V[0],4*(V[0]+1)):[0,0,0,0],we=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*V[1],4*(V[1]+1)):[0,0,0,0],Se=H.copy().sub(K).normalize(),oe=0<Se.magSq();oe&&this._addSegment(K,H,Y,we,Se),0<q&&G[1]===V[0]?L.has(V[0])||(L.add(V[0]),S.delete(V[0]),E&&oe&&Se.dot(E)<1-1e-8&&this._addJoin(K,E,Se,Y)):(oe&&!L.has(V[0])&&((J=S.get(V[0]))?(this._addJoin(K,J.dir,Se,Y),S.delete(V[0]),L.add(V[0])):S.set(V[0],{point:K,dir:Se.copy().mult(-1),color:Y})),E&&!L.has(G[1])&&((J=S.get(G[1]))?(this._addJoin(this.vertices[G[1]],E,J.dir.copy().mult(-1),te),S.delete(G[1]),L.add(G[1])):S.set(G[1],{point:this.vertices[G[1]],dir:E,color:te}),E=void 0)),q!==this.edges.length-1||L.has(V[1])||((K=S.get(V[1]))?(this._addJoin(H,Se,K.dir.copy().mult(-1),we),S.delete(V[1]),L.add(V[1])):S.set(V[1],{point:H,dir:Se,color:we})),oe&&(E=Se)}var ge=!0,re=!1,Q=void 0;try{for(var fe,De=S.values()[Symbol.iterator]();!(ge=(fe=De.next()).done);ge=!0){var it=fe.value;this._addCap(it.point,it.dir,it.color)}}catch(Ue){re=!0,Q=Ue}finally{try{ge||null==De.return||De.return()}finally{if(re)throw Q}}return this}},{key:"_addSegment",value:function(G,V,L,q,J){G=G.array(),V=V.array();var K=J.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var H=0,te=[this.lineTangentsIn,this.lineTangentsOut];H<te.length;H++)for(var Y=te[H],we=0;we<6;we++)Y.push.apply(Y,D(K));return(J=this.lineVertices).push.apply(J,D(G).concat(D(V),D(G),D(V),D(V),D(G))),(J=this.lineVertexColors).push.apply(J,D(L).concat(D(q),D(L),D(q),D(q),D(L))),this}},{key:"_addCap",value:function(E,S,L){for(var q,J=E.array(),G=S.array(),V=[0,0,0],K=0;K<6;K++)(q=this.lineVertices).push.apply(q,D(J)),(q=this.lineTangentsIn).push.apply(q,D(G)),(q=this.lineTangentsOut).push.apply(q,V),(q=this.lineVertexColors).push.apply(q,D(L));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(E,S,L,q){for(var J,G=E.array(),V=S.array(),K=L.array(),H=0;H<12;H++)(J=this.lineVertices).push.apply(J,D(G)),(J=this.lineTangentsIn).push.apply(J,D(V)),(J=this.lineTangentsOut).push.apply(J,D(K)),(J=this.lineVertexColors).push.apply(J,D(q));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var E=this.vertices[0].copy(),S=this.vertices[0].copy(),L=0;L<this.vertices.length;L++)E.x=Math.max(E.x,this.vertices[L].x),S.x=Math.min(S.x,this.vertices[L].x),E.y=Math.max(E.y,this.vertices[L].y),S.y=Math.min(S.y,this.vertices[L].y),E.z=Math.max(E.z,this.vertices[L].z),S.z=Math.min(S.z,this.vertices[L].z);for(var q=b.default.Vector.lerp(E,S,.5),J=b.default.Vector.sub(E,S),G=200/Math.max(Math.max(J.x,J.y),J.z),V=0;V<this.vertices.length;V++)this.vertices[V].sub(q),this.vertices[V].mult(G)}return this}}])&&f(m.prototype,g),p}();var h=b.default.Geometry;Z.default=h},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(I,be,Z){"use strict";I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(I=I("../core/main"))&&I.__esModule?I:{default:I};function C(D,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(D,h.key,h)}}var b=Array,w=function(D){return Array.isArray(D)};typeof Float32Array<"u"&&(b=Float32Array,w=function(D){return Array.isArray(D)||D instanceof Float32Array}),M.default.Matrix=function(){function D(){var p=this,m=D;if(p instanceof m)return arguments.length&&((p=arguments.length-1)<0||arguments.length<=p?void 0:arguments[p])instanceof M.default&&(this.p5=(m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new b([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new b([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var d,f,h;return d=D,h=[{key:"identity",value:function(p){return new M.default.Matrix(p)}}],(f=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(p){var m=arguments;if(p instanceof M.default.Matrix?m=p.mat4:w(p)&&(m=p),16!==m.length)M.default._friendlyError("Expected 16 values but received ".concat(m.length,"."),"p5.Matrix.set");else for(var g=0;g<16;g++)this.mat4[g]=m[g];return this}},{key:"get",value:function(){return new M.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var p;return void 0!==this.mat3?((p=new M.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],p.mat3[1]=this.mat3[1],p.mat3[2]=this.mat3[2],p.mat3[3]=this.mat3[3],p.mat3[4]=this.mat3[4],p.mat3[5]=this.mat3[5],p.mat3[6]=this.mat3[6],p.mat3[7]=this.mat3[7],p.mat3[8]=this.mat3[8]):((p=new M.default.Matrix(this.p5)).mat4[0]=this.mat4[0],p.mat4[1]=this.mat4[1],p.mat4[2]=this.mat4[2],p.mat4[3]=this.mat4[3],p.mat4[4]=this.mat4[4],p.mat4[5]=this.mat4[5],p.mat4[6]=this.mat4[6],p.mat4[7]=this.mat4[7],p.mat4[8]=this.mat4[8],p.mat4[9]=this.mat4[9],p.mat4[10]=this.mat4[10],p.mat4[11]=this.mat4[11],p.mat4[12]=this.mat4[12],p.mat4[13]=this.mat4[13],p.mat4[14]=this.mat4[14],p.mat4[15]=this.mat4[15]),p}},{key:"transpose",value:function(p){var m,g,x,E,S,L;return p instanceof M.default.Matrix?(m=p.mat4[1],g=p.mat4[2],x=p.mat4[3],E=p.mat4[6],S=p.mat4[7],L=p.mat4[11],this.mat4[0]=p.mat4[0],this.mat4[1]=p.mat4[4],this.mat4[2]=p.mat4[8],this.mat4[3]=p.mat4[12],this.mat4[4]=m,this.mat4[5]=p.mat4[5],this.mat4[6]=p.mat4[9],this.mat4[7]=p.mat4[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p.mat4[10],this.mat4[11]=p.mat4[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=L,this.mat4[15]=p.mat4[15]):w(p)&&(m=p[1],g=p[2],x=p[3],E=p[6],S=p[7],L=p[11],this.mat4[0]=p[0],this.mat4[1]=p[4],this.mat4[2]=p[8],this.mat4[3]=p[12],this.mat4[4]=m,this.mat4[5]=p[5],this.mat4[6]=p[9],this.mat4[7]=p[13],this.mat4[8]=g,this.mat4[9]=E,this.mat4[10]=p[10],this.mat4[11]=p[14],this.mat4[12]=x,this.mat4[13]=S,this.mat4[14]=L,this.mat4[15]=p[15]),this}},{key:"invert",value:function(oe){oe instanceof M.default.Matrix?(m=oe.mat4[0],g=oe.mat4[1],x=oe.mat4[2],E=oe.mat4[3],S=oe.mat4[4],L=oe.mat4[5],q=oe.mat4[6],J=oe.mat4[7],G=oe.mat4[8],V=oe.mat4[9],K=oe.mat4[10],H=oe.mat4[11],te=oe.mat4[12],Y=oe.mat4[13],we=oe.mat4[14],Se=oe.mat4[15]):w(oe)&&(m=oe[0],g=oe[1],x=oe[2],E=oe[3],S=oe[4],L=oe[5],q=oe[6],J=oe[7],G=oe[8],V=oe[9],K=oe[10],H=oe[11],te=oe[12],Y=oe[13],we=oe[14],Se=oe[15]);var m,g,x,E,S,L,q,J,G,V,K,H,te,Y,we,Se,ge=m*q-x*S,re=m*J-E*S,Q=g*q-x*L,fe=g*J-E*L,De=x*J-E*q,it=G*Y-V*te,le=G*we-K*te,z=G*Se-H*te,ye=V*we-K*Y,Ue=V*Se-H*Y,Je=K*Se-H*we,vt=(oe=m*L-g*S)*Je-ge*Ue+re*ye+Q*z-fe*le+De*it;return vt?(this.mat4[0]=(L*Je-q*Ue+J*ye)*(vt=1/vt),this.mat4[1]=(x*Ue-g*Je-E*ye)*vt,this.mat4[2]=(Y*De-we*fe+Se*Q)*vt,this.mat4[3]=(K*fe-V*De-H*Q)*vt,this.mat4[4]=(q*z-S*Je-J*le)*vt,this.mat4[5]=(m*Je-x*z+E*le)*vt,this.mat4[6]=(we*re-te*De-Se*ge)*vt,this.mat4[7]=(G*De-K*re+H*ge)*vt,this.mat4[8]=(S*Ue-L*z+J*it)*vt,this.mat4[9]=(g*z-m*Ue-E*it)*vt,this.mat4[10]=(te*fe-Y*re+Se*oe)*vt,this.mat4[11]=(V*re-G*fe-H*oe)*vt,this.mat4[12]=(L*le-S*ye-q*it)*vt,this.mat4[13]=(m*ye-g*le+x*it)*vt,this.mat4[14]=(Y*ge-te*Q-we*oe)*vt,this.mat4[15]=(G*Q-V*ge+K*oe)*vt,this):null}},{key:"invert3x3",value:function(){var p=this.mat3[0],m=this.mat3[1],g=this.mat3[2],x=this.mat3[3],E=this.mat3[4],S=this.mat3[5],L=this.mat3[6],q=this.mat3[7],J=this.mat3[8],G=J*E-S*q,V=-J*x+S*L,K=q*x-E*L,H=p*G+m*V+g*K;return H?(this.mat3[0]=G*(H=1/H),this.mat3[1]=(-J*m+g*q)*H,this.mat3[2]=(S*m-g*E)*H,this.mat3[3]=V*H,this.mat3[4]=(J*p-g*L)*H,this.mat3[5]=(-S*p+g*x)*H,this.mat3[6]=K*H,this.mat3[7]=(-q*p+m*L)*H,this.mat3[8]=(E*p-m*x)*H,this):null}},{key:"transpose3x3",value:function(p){var m=(p=void 0===p?this.mat3:p)[1],g=p[2],x=p[5];return this.mat3[0]=p[0],this.mat3[1]=p[3],this.mat3[2]=p[6],this.mat3[3]=m,this.mat3[4]=p[4],this.mat3[5]=p[7],this.mat3[6]=g,this.mat3[7]=x,this.mat3[8]=p[8],this}},{key:"inverseTranspose",value:function(p){if(p=p.mat4,void 0===this.mat3?M.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=p[0],this.mat3[1]=p[1],this.mat3[2]=p[2],this.mat3[3]=p[4],this.mat3[4]=p[5],this.mat3[5]=p[6],this.mat3[6]=p[8],this.mat3[7]=p[9],this.mat3[8]=p[10]),p=this.invert3x3())p.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this}},{key:"determinant",value:function(){return(this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4])*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-(this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4])*(this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13])+(this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4])*(this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13])+(this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5])*(this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12])-(this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5])*(this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12])+(this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6])*(this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12])}},{key:"mult",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var x=this.mat4[1],E=this.mat4[2],S=this.mat4[3];return this.mat4[0]=(g=this.mat4[0])*m[0]+x*m[4]+E*m[8]+S*m[12],this.mat4[1]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[2]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[3]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[4]=(g=this.mat4[4])*m[0]+(x=this.mat4[5])*m[4]+(E=this.mat4[6])*m[8]+(S=this.mat4[7])*m[12],this.mat4[5]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[6]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[7]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[8]=(g=this.mat4[8])*m[0]+(x=this.mat4[9])*m[4]+(E=this.mat4[10])*m[8]+(S=this.mat4[11])*m[12],this.mat4[9]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[10]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[11]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this.mat4[12]=(g=this.mat4[12])*m[0]+(x=this.mat4[13])*m[4]+(E=this.mat4[14])*m[8]+(S=this.mat4[15])*m[12],this.mat4[13]=g*m[1]+x*m[5]+E*m[9]+S*m[13],this.mat4[14]=g*m[2]+x*m[6]+E*m[10]+S*m[14],this.mat4[15]=g*m[3]+x*m[7]+E*m[11]+S*m[15],this}},{key:"apply",value:function(g){var m;if(g===this||g===this.mat4)m=this.copy().mat4;else if(g instanceof M.default.Matrix)m=g.mat4;else if(w(g))m=g;else{if(16!==arguments.length)return;m=arguments}var E,S,L,x=((g=this.mat4)[0]=m[0]*(x=g[0])+m[1]*(E=g[4])+m[2]*(S=g[8])+m[3]*(L=g[12]),g[4]=m[4]*x+m[5]*E+m[6]*S+m[7]*L,g[8]=m[8]*x+m[9]*E+m[10]*S+m[11]*L,g[12]=m[12]*x+m[13]*E+m[14]*S+m[15]*L,g[1]);return g[1]=m[0]*x+m[1]*(E=g[5])+m[2]*(S=g[9])+m[3]*(L=g[13]),g[5]=m[4]*x+m[5]*E+m[6]*S+m[7]*L,g[9]=m[8]*x+m[9]*E+m[10]*S+m[11]*L,g[13]=m[12]*x+m[13]*E+m[14]*S+m[15]*L,g[2]=m[0]*(x=g[2])+m[1]*(E=g[6])+m[2]*(S=g[10])+m[3]*(L=g[14]),g[6]=m[4]*x+m[5]*E+m[6]*S+m[7]*L,g[10]=m[8]*x+m[9]*E+m[10]*S+m[11]*L,g[14]=m[12]*x+m[13]*E+m[14]*S+m[15]*L,g[3]=m[0]*(x=g[3])+m[1]*(E=g[7])+m[2]*(S=g[11])+m[3]*(L=g[15]),g[7]=m[4]*x+m[5]*E+m[6]*S+m[7]*L,g[11]=m[8]*x+m[9]*E+m[10]*S+m[11]*L,g[15]=m[12]*x+m[13]*E+m[14]*S+m[15]*L,this}},{key:"scale",value:function(p,m,g){return p instanceof M.default.Vector?(m=p.y,g=p.z,p=p.x):p instanceof Array&&(m=p[1],g=p[2],p=p[0]),this.mat4[0]*=p,this.mat4[1]*=p,this.mat4[2]*=p,this.mat4[3]*=p,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(oe,Ue,ye,x){Ue instanceof M.default.Vector?(ye=Ue.y,x=Ue.z,Ue=Ue.x):Ue instanceof Array&&(ye=Ue[1],x=Ue[2],Ue=Ue[0]);var E=(Ue*=1/(E=Math.sqrt(Ue*Ue+ye*ye+x*x)),ye*=1/E,x*=1/E,this.mat4[0]),S=this.mat4[1],L=this.mat4[2],q=this.mat4[3],J=this.mat4[4],G=this.mat4[5],V=this.mat4[6],K=this.mat4[7],H=this.mat4[8],te=this.mat4[9],Y=this.mat4[10],we=this.mat4[11],Se=Math.sin(oe),ge=1-(oe=Math.cos(oe)),re=Ue*Ue*ge+oe,Q=ye*Ue*ge+x*Se,fe=x*Ue*ge-ye*Se,De=Ue*ye*ge-x*Se,it=ye*ye*ge+oe,le=x*ye*ge+Ue*Se,z=Ue*x*ge+ye*Se;return ye=ye*x*ge-Ue*Se,Ue=x*x*ge+oe,this.mat4[0]=E*re+J*Q+H*fe,this.mat4[1]=S*re+G*Q+te*fe,this.mat4[2]=L*re+V*Q+Y*fe,this.mat4[3]=q*re+K*Q+we*fe,this.mat4[4]=E*De+J*it+H*le,this.mat4[5]=S*De+G*it+te*le,this.mat4[6]=L*De+V*it+Y*le,this.mat4[7]=q*De+K*it+we*le,this.mat4[8]=E*z+J*ye+H*Ue,this.mat4[9]=S*z+G*ye+te*Ue,this.mat4[10]=L*z+V*ye+Y*Ue,this.mat4[11]=q*z+K*ye+we*Ue,this}},{key:"translate",value:function(x){var m=x[0],g=x[1];this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*g+this.mat4[8]*(x=x[2]||0),this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*g+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*g+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*g+this.mat4[11]*x}},{key:"rotateX",value:function(p){this.rotate(p,1,0,0)}},{key:"rotateY",value:function(p){this.rotate(p,0,1,0)}},{key:"rotateZ",value:function(p){this.rotate(p,0,0,1)}},{key:"perspective",value:function(E,m,g,x){E=1/Math.tan(E/2);var S=1/(g-x);return this.mat4[0]=E/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=E,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+g)*S,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*g*S,this.mat4[15]=0,this}},{key:"ortho",value:function(p,m,g,x,E,S){var L=1/(p-m),q=1/(g-x),J=1/(E-S);return this.mat4[0]=-2*L,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*q,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*J,this.mat4[11]=0,this.mat4[12]=(p+m)*L,this.mat4[13]=(x+g)*q,this.mat4[14]=(S+E)*J,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(p,m,g,x){var E=new Array(4),S=this.mat4;return E[0]=S[0]*p+S[4]*m+S[8]*g+S[12]*x,E[1]=S[1]*p+S[5]*m+S[9]*g+S[13]*x,E[2]=S[2]*p+S[6]*m+S[10]*g+S[14]*x,E[3]=S[3]*p+S[7]*m+S[11]*g+S[15]*x,E}},{key:"multiplyPoint",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,1);return new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var x;return(x=this.multiplyVec4(x=g.x,g.y,g=g.z,1))[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new M.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(g){var x=this.multiplyVec4(x=g.x,g.y,g=g.z,0);return new M.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(g){var m;if(g===this||g===this.mat3)m=this.copy().mat3;else if(g instanceof M.default.Matrix)m=g.mat3;else if(w(g))m=g;else{if(9!==arguments.length)return;m=arguments}var x=this.mat3[1],E=this.mat3[2];return this.mat3[0]=(g=this.mat3[0])*m[0]+x*m[3]+E*m[6],this.mat3[1]=g*m[1]+x*m[4]+E*m[7],this.mat3[2]=g*m[2]+x*m[5]+E*m[8],this.mat3[3]=(g=this.mat3[3])*m[0]+(x=this.mat3[4])*m[3]+(E=this.mat3[5])*m[6],this.mat3[4]=g*m[1]+x*m[4]+E*m[7],this.mat3[5]=g*m[2]+x*m[5]+E*m[8],this.mat3[6]=(g=this.mat3[6])*m[0]+(x=this.mat3[7])*m[3]+(E=this.mat3[8])*m[6],this.mat3[7]=g*m[1]+x*m[4]+E*m[7],this.mat3[8]=g*m[2]+x*m[5]+E*m[8],this}},{key:"column",value:function(p){return new M.default.Vector(this.mat3[3*p],this.mat3[3*p+1],this.mat3[3*p+2])}},{key:"row",value:function(p){return new M.default.Vector(this.mat3[p],this.mat3[p+3],this.mat3[p+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(p,m){return(m=void 0===m?p.copy():m).x=this.row(0).dot(p),m.y=this.row(1).dot(p),m.z=this.row(2).dot(p),m}},{key:"createSubMatrix3x3",value:function(){var p=new M.default.Matrix("mat3");return p.mat3[0]=this.mat4[0],p.mat3[1]=this.mat4[1],p.mat3[2]=this.mat4[2],p.mat3[3]=this.mat4[4],p.mat3[4]=this.mat4[5],p.mat3[5]=this.mat4[6],p.mat3[6]=this.mat4[8],p.mat3[7]=this.mat4[9],p.mat3[8]=this.mat4[10],p}}])&&C(d.prototype,f),h&&C(d,h),D}(),Z.default=I=M.default.Matrix},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(l,be,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}M.default.Quat=function(){function b(d,f,h,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.w=d,this.vec=new M.default.Vector(f,h,p)}var w,I,D;return w=b,D=[{key:"fromAxisAngle",value:function(d,g,h,p){var m=Math.cos(d/2);return g=new M.default.Vector(g,h,p).normalize().mult(Math.sin(d/2)),new M.default.Quat(m,g.x,g.y,g.z)}}],(I=[{key:"conjugate",value:function(){return new M.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(d){return new M.default.Quat(this.w*d.w-this.vec.x*d.vec.x-this.vec.y*d.vec.y-this.vec.z-d.vec.z,this.w*d.vec.x+this.vec.x*d.w+this.vec.y*d.vec.z-this.vec.z*d.vec.y,this.w*d.vec.y-this.vec.x*d.vec.z+this.vec.y*d.w+this.vec.z*d.vec.x,this.w*d.vec.z+this.vec.x*d.vec.y-this.vec.y*d.vec.x+this.vec.z*d.w)}},{key:"rotateVector",value:function(d){return new M.default.Vector.mult(d,this.w*this.w-this.vec.dot(this.vec)).add(M.default.Vector.mult(this.vec,2*d.dot(this.vec))).add(M.default.Vector.mult(this.vec,2*this.w).cross(d)).clampToZero()}},{key:"rotateBy",value:function(d){return d.multiply(this).multiply(d.conjugate()).vec.clampToZero()}}])&&C(w.prototype,I),D&&C(w,D),b}(),Z.default=l=M.default.Quat},{"../core/main":283}],338:[function(l,be,Z){"use strict";function M(C,b){for(var w=0;w<b.length;w++){var I=b[w];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(C,I.key,I)}}l("core-js/modules/es.array.map"),l("core-js/modules/es.array.map"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0,(l=(l=l("../core/main"))&&l.__esModule?l:{default:l}).default.RenderBuffer=function(){function C(D,d,f,h,p,m){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.size=D,this.src=d,this.dst=f,this.attr=h,this._renderer=p,this.map=m}var b,w;return b=C,(w=[{key:"_prepareBuffer",value:function(D,d){var f,h,p,x,m=this._renderer.GL,g=D.model||D;(x=(x=d.attributes)[this.attr])&&(f=D[this.dst],0<(h=g[this.src]).length?((p=!f)&&(D[this.dst]=f=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,f),!p&&!1===g.dirtyFlags[this.src]||(p=(D=this.map)?D(h):h,this._renderer._bindBuffer(f,m.ARRAY_BUFFER,p),g.dirtyFlags[this.src]=!1),d.enableAttrib(x,this.size)):-1!==(D=x.location)&&this._renderer.registerEnabled.has(D)&&(m.disableVertexAttribArray(D),this._renderer.registerEnabled.delete(D)))}}])&&M(b.prototype,w),C}(),Z.default=l=l.default.RenderBuffer},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(l,be,Z){"use strict";function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function C(h){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(p){return M(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":M(p)})(h)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.from"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.find-index"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.map"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.map"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(f=l("../core/main"))&&f.__esModule?f:{default:f},w=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==C(h)&&"function"!=typeof h)return{default:h};var p=I();if(p&&p.has(h))return p.get(h);var m,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in h){var E;Object.prototype.hasOwnProperty.call(h,m)&&((E=x?Object.getOwnPropertyDescriptor(h,m):null)&&(E.get||E.set)?Object.defineProperty(g,m,E):g[m]=h[m])}return g.default=h,p&&p.set(h,g),g}(l("../core/constants"));function I(){var h;return"function"!=typeof WeakMap?null:(I=function(){return h},h=new WeakMap)}function D(h){return function(p){if(Array.isArray(p)){for(var m=0,g=new Array(p.length);m<p.length;m++)g[m]=p[m];return g}}(h)||function(p){if(Symbol.iterator in Object(p)||"[object Arguments]"===Object.prototype.toString.call(p))return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l("./p5.RenderBuffer"),b.default.RendererGL.prototype.beginShape=function(h){return this.immediateMode.shapeMode=void 0!==h?h:w.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var d={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(b.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==w.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},b.default.RendererGL.prototype.vertex=function(h,p){if(this.immediateMode.shapeMode===w.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in d){var g=d[m];(m=this.immediateMode.geometry[m]).push.apply(m,D(m.slice(m.length-3*g,m.length-2*g)).concat(D(m.slice(m.length-g,m.length))))}var x,E,S=x=E=0,L=(3===arguments.length?S=arguments[2]:4===arguments.length?(x=arguments[2],E=arguments[3]):5===arguments.length&&(S=arguments[2],x=arguments[3],E=arguments[4]),new b.default.Vector(h,p,S));return this.immediateMode.geometry.vertices.push(L),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.immediateMode.geometry.vertexColors.push((L=this.curFillColor||[.5,.5,.5,1])[0],L[1],L[2],L[3]),this.immediateMode.geometry.vertexStrokeColors.push((L=this.curStrokeColor||[.5,.5,.5,1])[0],L[1],L[2],L[3]),this.textureMode!==w.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,E/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,E),this.immediateMode._bezierVertex[0]=h,this.immediateMode._bezierVertex[1]=p,this.immediateMode._bezierVertex[2]=S,this.immediateMode._quadraticVertex[0]=h,this.immediateMode._quadraticVertex[1]=p,this.immediateMode._quadraticVertex[2]=S,this},b.default.RendererGL.prototype.normal=function(h,p,m){return this._currentNormal=h instanceof b.default.Vector?h:new b.default.Vector(h,p,m),this},b.default.RendererGL.prototype.endShape=function(h,p,m,g,x,E){var S,L=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===w.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===w.TESS&&(this.immediateMode.shapeMode=w.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),S=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==w.LINE_STRIP&&this.immediateMode.shapeMode!==w.LINES||(this.immediateMode.shapeMode=w.TRIANGLE_FAN,S=!0),this.immediateMode.shapeMode===w.QUADS?this.immediateMode.shapeMode=w.TRIANGLES:this.immediateMode.shapeMode===w.QUAD_STRIP&&(this.immediateMode.shapeMode=w.TRIANGLE_STRIP),this._doFill&&!S&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(L),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},b.default.RendererGL.prototype._processVertices=function(h){var p;0!==this.immediateMode.geometry.vertices.length&&(h=h===w.CLOSE,this._doStroke&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,h),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),p=this.immediateMode.shapeMode===w.TESS,h=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||p||h)&&this.immediateMode.shapeMode!==w.LINES&&this._tesselateShape())},b.default.RendererGL.prototype._calculateEdges=function(h,p,m){var g=[],x=0,E=this.immediateMode.contourIndices.slice(),S=0;switch(h){case w.TRIANGLE_STRIP:for(x=0;x<p.length-2;x++)g.push([x,x+1]),g.push([x,x+2]);g.push([x,x+1]);break;case w.TRIANGLE_FAN:for(x=1;x<p.length-1;x++)g.push([0,x]),g.push([x,x+1]);g.push([0,p.length-1]);break;case w.TRIANGLES:for(x=0;x<p.length-2;x+=3)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+2,x]);break;case w.LINES:for(x=0;x<p.length-1;x+=2)g.push([x,x+1]);break;case w.QUADS:for(x=0;x<p.length-5;x+=6)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+3,x+5]),g.push([x+4,x+5]);break;case w.QUAD_STRIP:for(x=0;x<p.length-2;x+=2)g.push([x,x+1]),g.push([x,x+2]),g.push([x+1,x+3]);g.push([x,x+1]);break;default:for(x=0;x<p.length;x++)x+1<p.length&&x+1!==E[0]?g.push([x,x+1]):((m||S)&&g.push([x,S]),0<E.length&&(S=E.shift()))}return h!==w.TESS&&m&&g.push([p.length-1,0]),g},b.default.RendererGL.prototype._tesselateShape=function(){for(var h=this,p=(this.immediateMode.shapeMode=w.TRIANGLES,[[]]),m=0;m<this.immediateMode.geometry.vertices.length;m++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===m&&(this.immediateMode.contourIndices.shift(),p.push([])),p[p.length-1].push(this.immediateMode.geometry.vertices[m].x,this.immediateMode.geometry.vertices[m].y,this.immediateMode.geometry.vertices[m].z,this.immediateMode.geometry.uvs[2*m],this.immediateMode.geometry.uvs[2*m+1],this.immediateMode.geometry.vertexColors[4*m],this.immediateMode.geometry.vertexColors[4*m+1],this.immediateMode.geometry.vertexColors[4*m+2],this.immediateMode.geometry.vertexColors[4*m+3],this.immediateMode.geometry.vertexNormals[m].x,this.immediateMode.geometry.vertexNormals[m].y,this.immediateMode.geometry.vertexNormals[m].z);for(var g,x=this._triangulate(p),E=this.immediateMode.geometry.vertices,S=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),L=0,q=x.length;L<q;L+=b.default.RendererGL.prototype.tessyVertexSize)S.push.apply(S,D(x.slice(L+5,L+9))),this.normal.apply(this,D(x.slice(L+9,L+12))),this.vertex.apply(this,D(x.slice(L,L+5)));this.geometryBuilder&&(g=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(J){return J.map(function(G){if(!g.has(G)){var V=E[G],K=h.immediateMode.geometry.vertices.findIndex(function(ge){return V.x===ge.x&&V.y===ge.y&&V.z===ge.z});if(-1===K){for(var H=1/0,te=0,Y=0;Y<h.immediateMode.geometry.vertices.length;Y++){var Se,oe,we=V.y-(Se=h.immediateMode.geometry.vertices[Y]).y;(oe=(oe=V.x-Se.x)*oe+we*we+(Se=V.z-Se.z)*Se)<H&&(H=oe,te=Y)}K=te}g.set(G,K)}return g.get(G)})})),this.immediateMode.geometry.vertexColors=S},b.default.RendererGL.prototype._drawImmediateFill=function(){var h,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,m=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,h=this._getImmediateFillShader(),this._setFillUniforms(h),!0),x=!1,E=void 0;try{for(var S,L=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(S=L.next()).done);g=!0)S.value._prepareBuffer(this.immediateMode.geometry,h)}catch(q){x=!0,E=q}finally{try{g||null==L.return||L.return()}finally{if(x)throw E}}if(h.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===p)m.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{m.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,p)}catch{console.log("\u{1f338} p5.js says: Instancing is only supported in WebGL2 mode")}h.unbindShader()},b.default.RendererGL.prototype._drawImmediateStroke=function(){var h=this.GL,p=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),m=(this._setStrokeUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.immediateMode.buffers.stroke[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(this.immediateMode.geometry,p)}catch(L){g=!0,x=L}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),h.drawArrays(h.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),p.unbindShader()},b.default.RendererGL);Z.default=f},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(l,be,Z){"use strict";function M(d){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function C(d){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(f){return M(f)}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":M(f)})(d)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.fill"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.some"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.uint16-array"),l("core-js/modules/es.typed-array.uint32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var b=(D=l("../core/main"))&&D.__esModule?D:{default:D},w=(l("./p5.RendererGL"),l("./p5.RenderBuffer"),function(d){if(d&&d.__esModule)return d;if(null===d||"object"!==C(d)&&"function"!=typeof d)return{default:d};var f=I();if(f&&f.has(d))return f.get(d);var h,p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in d){var g;Object.prototype.hasOwnProperty.call(d,h)&&((g=m?Object.getOwnPropertyDescriptor(d,h):null)&&(g.get||g.set)?Object.defineProperty(p,h,g):p[h]=d[h])}return p.default=d,f&&f.set(d,p),p}(l("../core/constants")));function I(){var d;return"function"!=typeof WeakMap?null:(I=function(){return d},d=new WeakMap)}b.default.RendererGL.prototype.freeGeometry=function(d){d.gid?this._freeBuffers(d.gid):console.warn("The model you passed to freeGeometry does not have an id!")},b.default.RendererGL.prototype._initBufferDefaults=function(d){var f;return this._freeBuffers(d),1e3<Object.keys(this.retainedMode.geometry).length&&(f=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(f)),this.retainedMode.geometry[d]={}},b.default.RendererGL.prototype._freeBuffers=function(d){var f,h=this.retainedMode.geometry[d];function p(m){var g=!0,x=!1,E=void 0;try{for(var S,L=m[Symbol.iterator]();!(g=(S=L.next()).done);g=!0){var q=S.value;h[q.dst]&&(f.deleteBuffer(h[q.dst]),h[q.dst]=null)}}catch(J){x=!0,E=J}finally{try{g||null==L.return||L.return()}finally{if(x)throw E}}}h&&(delete this.retainedMode.geometry[d],f=this.GL,h.indexBuffer&&f.deleteBuffer(h.indexBuffer),p(this.retainedMode.buffers.stroke),p(this.retainedMode.buffers.fill))},b.default.RendererGL.prototype.createBuffers=function(x,f){var h,p,m,g=this.GL,E=((x=this._initBufferDefaults(x)).model=f,x.indexBuffer);return f.faces.length?(E=E||(x.indexBuffer=g.createBuffer()),m=(p=(h=b.default.RendererGL.prototype._flatten(f.faces)).some(function(S){return 65535<S}))?Uint32Array:Uint16Array,this._bindBuffer(E,g.ELEMENT_ARRAY_BUFFER,h,m),x.indexBufferType=p?g.UNSIGNED_INT:g.UNSIGNED_SHORT,x.vertexCount=3*f.faces.length):(E&&(g.deleteBuffer(E),x.indexBuffer=null),x.vertexCount=f.vertices?f.vertices.length:0),x.lineVertexCount=f.lineVertices?f.lineVertices.length/3:0,x},b.default.RendererGL.prototype.drawBuffers=function(d){var f=this.GL,h=this.retainedMode.geometry[d];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[d].vertexCount){this._useVertexColor=0<h.model.vertexColors.length;var p=this._getRetainedFillShader(),m=(this._setFillUniforms(p),!0),g=!1,x=void 0;try{for(var E,S=this.retainedMode.buffers.fill[Symbol.iterator]();!(m=(E=S.next()).done);m=!0)E.value._prepareBuffer(h,p)}catch(V){g=!0,x=V}finally{try{m||null==S.return||S.return()}finally{if(g)throw x}}p.disableRemainingAttributes(),h.indexBuffer&&this._bindBuffer(h.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,h.model.hasFillTransparency()),this._drawElements(f.TRIANGLES,d),p.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<h.lineVertexCount){this._useLineColor=0<h.model.vertexStrokeColors.length;var L=this._getRetainedStrokeShader(),q=(this._setStrokeUniforms(L),!0);g=!1,x=void 0;try{for(var J,G=this.retainedMode.buffers.stroke[Symbol.iterator]();!(q=(J=G.next()).done);q=!0)J.value._prepareBuffer(h,L)}catch(H){g=!0,x=H}finally{try{q||null==G.return||G.return()}finally{if(g)throw x}}L.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,h.model.hasStrokeTransparency()),this._drawArrays(f.TRIANGLES,d),L.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(h),this},b.default.RendererGL.prototype.drawBuffersScaled=function(d,f,h,p){var m=this.uModelMatrix.copy();try{this.uModelMatrix.scale(f,h,p),this.drawBuffers(d)}finally{this.uModelMatrix=m}},b.default.RendererGL.prototype._drawArrays=function(d,f){return this.GL.drawArrays(d,0,this.retainedMode.geometry[f].lineVertexCount),this},b.default.RendererGL.prototype._drawElements=function(d,h){var p=this.GL;if((h=this.retainedMode.geometry[h]).indexBuffer){if(this._pInst.webglVersion!==w.WEBGL2&&h.indexBufferType===p.UNSIGNED_INT&&!p.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");p.drawElements(p.TRIANGLES,h.vertexCount,h.indexBufferType,0)}else p.drawArrays(d||p.TRIANGLES,0,h.vertexCount)},b.default.RendererGL.prototype._drawPoints=function(d,f){var h=this.GL,p=this._getImmediatePointShader();this._setPointUniforms(p),this._bindBuffer(f,h.ARRAY_BUFFER,this._vToNArray(d),Float32Array,h.STATIC_DRAW),p.enableAttrib(p.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),h.drawArrays(h.Points,0,d.length),p.unbindShader()};var D=b.default.RendererGL;Z.default=D},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(Y,be,Z){"use strict";function M(Q){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(Q)}function C(Q){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(fe){return M(fe)}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":M(fe)})(Q)}Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.get-own-property-descriptor"),Y("core-js/modules/es.object.get-prototype-of"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.reflect.construct"),Y("core-js/modules/es.reflect.get"),Y("core-js/modules/es.regexp.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/es.weak-map"),Y("core-js/modules/web.dom-collections.iterator"),Y("core-js/modules/es.symbol"),Y("core-js/modules/es.symbol.description"),Y("core-js/modules/es.symbol.iterator"),Y("core-js/modules/es.array.concat"),Y("core-js/modules/es.array.copy-within"),Y("core-js/modules/es.array.every"),Y("core-js/modules/es.array.fill"),Y("core-js/modules/es.array.flat"),Y("core-js/modules/es.array.flat-map"),Y("core-js/modules/es.array.from"),Y("core-js/modules/es.array.includes"),Y("core-js/modules/es.array.iterator"),Y("core-js/modules/es.array.map"),Y("core-js/modules/es.array.slice"),Y("core-js/modules/es.array.some"),Y("core-js/modules/es.array.unscopables.flat"),Y("core-js/modules/es.array.unscopables.flat-map"),Y("core-js/modules/es.map"),Y("core-js/modules/es.object.assign"),Y("core-js/modules/es.object.to-string"),Y("core-js/modules/es.set"),Y("core-js/modules/es.string.includes"),Y("core-js/modules/es.string.iterator"),Y("core-js/modules/es.typed-array.float32-array"),Y("core-js/modules/es.typed-array.float64-array"),Y("core-js/modules/es.typed-array.int16-array"),Y("core-js/modules/es.typed-array.uint8-array"),Y("core-js/modules/es.typed-array.uint16-array"),Y("core-js/modules/es.typed-array.uint32-array"),Y("core-js/modules/es.typed-array.copy-within"),Y("core-js/modules/es.typed-array.every"),Y("core-js/modules/es.typed-array.fill"),Y("core-js/modules/es.typed-array.filter"),Y("core-js/modules/es.typed-array.find"),Y("core-js/modules/es.typed-array.find-index"),Y("core-js/modules/es.typed-array.for-each"),Y("core-js/modules/es.typed-array.includes"),Y("core-js/modules/es.typed-array.index-of"),Y("core-js/modules/es.typed-array.iterator"),Y("core-js/modules/es.typed-array.join"),Y("core-js/modules/es.typed-array.last-index-of"),Y("core-js/modules/es.typed-array.map"),Y("core-js/modules/es.typed-array.reduce"),Y("core-js/modules/es.typed-array.reduce-right"),Y("core-js/modules/es.typed-array.reverse"),Y("core-js/modules/es.typed-array.set"),Y("core-js/modules/es.typed-array.slice"),Y("core-js/modules/es.typed-array.some"),Y("core-js/modules/es.typed-array.sort"),Y("core-js/modules/es.typed-array.subarray"),Y("core-js/modules/es.typed-array.to-locale-string"),Y("core-js/modules/es.typed-array.to-string"),Y("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.readPixelsWebGL=ge,Z.readPixelWebGL=re,Z.default=void 0;var b=h(Y("../core/main")),w=function(Q){if(Q&&Q.__esModule)return Q;if(null===Q||"object"!==C(Q)&&"function"!=typeof Q)return{default:Q};var fe=f();if(fe&&fe.has(Q))return fe.get(Q);var De,it={},le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(De in Q){var z;Object.prototype.hasOwnProperty.call(Q,De)&&((z=le?Object.getOwnPropertyDescriptor(Q,De):null)&&(z.get||z.set)?Object.defineProperty(it,De,z):it[De]=Q[De])}return it.default=Q,fe&&fe.set(Q,it),it}(Y("../core/constants")),I=h(Y("./GeometryBuilder")),D=h(Y("libtess")),d=(Y("./p5.Shader"),Y("./p5.Camera"),Y("../core/p5.Renderer"),Y("./p5.Matrix"),Y("./p5.Framebuffer"),Y("path"),Y("./p5.Texture"));function f(){var Q;return"function"!=typeof WeakMap?null:(f=function(){return Q},Q=new WeakMap)}function h(Q){return Q&&Q.__esModule?Q:{default:Q}}function p(Q){return function(fe){if(Array.isArray(fe)){for(var De=0,it=new Array(fe.length);De<fe.length;De++)it[De]=fe[De];return it}}(Q)||function(fe){if(Symbol.iterator in Object(fe)||"[object Arguments]"===Object.prototype.toString.call(fe))return Array.from(fe)}(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(Q,fe){for(var De=0;De<fe.length;De++){var it=fe[De];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Q,it.key,it)}}function g(Q,fe,De){return(g=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(ye,le,z){if(ye=function(Ue,Je){for(;!Object.prototype.hasOwnProperty.call(Ue,Je)&&null!==(Ue=L(Ue)););return Ue}(ye,le))return(ye=Object.getOwnPropertyDescriptor(ye,le)).get?ye.get.call(z):ye.value})(Q,fe,De||Q)}function x(Q,fe){return(x=Object.setPrototypeOf||function(De,it){return De.__proto__=it,De})(Q,fe)}function S(Q){if(void 0===Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function L(Q){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(Q)}function q(Q,fe,De){fe in Q?Object.defineProperty(Q,fe,{value:De,enumerable:!0,configurable:!0,writable:!0}):Q[fe]=De}function J(Q,fe){te+="#define STROKE_CAP_".concat(Q," ").concat(fe,"\n"),K[w[Q]]=fe}function G(Q,fe){te+="#define STROKE_JOIN_".concat(Q," ").concat(fe,"\n"),H[w[Q]]=fe}var V,K={},H={},te="",we={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 positionVec4 = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  gl_Position = uProjectionMatrix * positionVec4;\n\n  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));\n  vVertTexCoord = HOOK_getUV(aTexCoord);\n  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",lightVert:(J("ROUND",0),J("PROJECT",1),J("SQUARE",2),G("ROUND",0),G("MITER",1),G("BEVEL",2),(Y='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));\n  vTexCoord = HOOK_getUV(aTexCoord);\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));\n  HOOK_afterVertex();\n}\n",phongFrag:Y+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:te+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  HOOK_beforeVertex();\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);\n  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);\n  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);\n  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);\n  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);\n  vStrokeWeight = strokeWeight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(-0.00045, -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = HOOK_getLineCenter(p.xy);\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * strokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * strokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * strokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * strokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * strokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));\n    } else {\n      vMaxDist = strokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      strokeWeight * 0.5;\n    vMaxDist = strokeWeight / 2.;\n  }\n  vPosition = HOOK_getLinePosition(vCenter + offset);\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",lineFrag:te+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},Se=we.sphereMappingFrag;for(V in we)we[V]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+we[V];q(Y={},w.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),q(Y,w.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),q(Y,w.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),q(Y,w.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),q(Y,w.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),q(Y,w.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),q(Y,w.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),q(Y,w.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var oe=Y;function ge(Q,fe,zt,it,le,z,ye,Ue,Je,vt){var Ct=fe.getParameter(fe.FRAMEBUFFER_BINDING),_t=z*ye*(fe.bindFramebuffer(fe.FRAMEBUFFER,zt),zt=Ue===fe.RGBA?4:3),Ft=Je===fe.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Q instanceof Ft&&Q.length===_t||(Q=new Ft(_t)),fe.readPixels(it,vt?vt-le-ye:le,z,ye,Ue,Je,Q),fe.bindFramebuffer(fe.FRAMEBUFFER,Ct),vt)for(var Wt=Math.floor(ye/2),mt=new Ft(z*zt),Nt=0;Nt<Wt;Nt++){var kt=Nt*z*4,Ut=(ye-Nt-1)*z*4;mt.set(Q.subarray(kt,kt+4*z)),Q.copyWithin(kt,Ut,Ut+4*z),Q.set(mt,Ut)}return Q}function re(Q,Je,De,it,le,z,ye){var Ue=Q.getParameter(Q.FRAMEBUFFER_BINDING);return Q.bindFramebuffer(Q.FRAMEBUFFER,Je),Je=le===Q.RGBA?4:3,Je=new(z===Q.UNSIGNED_BYTE?Uint8Array:Float32Array)(Je),Q.readPixels(De,ye?ye-it-1:it,1,1,le,z,Je),Q.bindFramebuffer(Q.FRAMEBUFFER,Ue),Array.from(Je)}b.default.prototype.setAttributes=function(Q,fe){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var De=!0;if(void 0!==fe?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[Q]!==fe&&(this._glAttributes[Q]=fe,De=!1)):Q instanceof Object&&this._glAttributes!==Q&&(this._glAttributes=Q,De=!1),this._renderer.isP3D&&!De){if(!this._setupDone)for(var it in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(it))return void b.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},b.default.RendererGL=function(Q){var fe=le;if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(Q&&Q.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Q&&x(fe,Q);var it=function E(Q){return function(){var fe,De,it=L(Q);return fe=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(fe=L(this).constructor,Reflect.construct(it,arguments,fe)):it.apply(this,arguments),it=this,!(De=fe)||"object"!==C(De)&&"function"!=typeof De?S(it):De}}(le);function le(z,ye,Ue,Je){if(this instanceof le)return(z=it.call(this,z,ye,Ue))._setAttributeDefaults(ye),z._initContext(),z.isP3D=!0,z.geometryBuilder=void 0,z.GL=z.drawingContext,z._pInst._setProperty("drawingContext",z.drawingContext),z._isErasing=!1,z._clipDepths=[],z._isClipApplied=!1,z._stencilTestOn=!1,z._enableLighting=!1,z.ambientLightColors=[],z.mixedAmbientLight=[],z.mixedSpecularColor=[],z.specularColors=[1,1,1],z.directionalLightDirections=[],z.directionalLightDiffuseColors=[],z.directionalLightSpecularColors=[],z.pointLightPositions=[],z.pointLightDiffuseColors=[],z.pointLightSpecularColors=[],z.spotLightPositions=[],z.spotLightDirections=[],z.spotLightDiffuseColors=[],z.spotLightSpecularColors=[],z.spotLightAngle=[],z.spotLightConc=[],z.activeImageLight=null,z.diffusedTextures=new Map,z.specularTextures=new Map,z.drawMode=w.FILL,z.curFillColor=z._cachedFillStyle=[1,1,1,1],z.curAmbientColor=z._cachedFillStyle=[1,1,1,1],z.curSpecularColor=z._cachedFillStyle=[0,0,0,0],z.curEmissiveColor=z._cachedFillStyle=[0,0,0,0],z.curStrokeColor=z._cachedStrokeStyle=[0,0,0,1],z.curBlendMode=w.BLEND,z.preEraseBlend=void 0,z._cachedBlendMode=void 0,z.blendExt=z.webglVersion===w.WEBGL2?z.GL:z.GL.getExtension("EXT_blend_minmax"),z._isBlending=!1,z._hasSetAmbient=!1,z._useSpecularMaterial=!1,z._useEmissiveMaterial=!1,z._useNormalMaterial=!1,z._useShininess=1,z._useMetalness=0,z._useLineColor=!1,z._useVertexColor=!1,z.registerEnabled=new Set,z._tint=[255,255,255,255],z.constantAttenuation=1,z.linearAttenuation=0,z.quadraticAttenuation=0,z.uModelMatrix=new b.default.Matrix,z.uViewMatrix=new b.default.Matrix,z.uMVMatrix=new b.default.Matrix,z.uPMatrix=new b.default.Matrix,z.uNMatrix=new b.default.Matrix("mat3"),z.curMatrix=new b.default.Matrix("mat3"),z._currentNormal=new b.default.Vector(0,0,1),z._curCamera=new b.default.Camera(S(z)),z._curCamera._computeCameraDefaultSettings(),z._curCamera._setDefaultCamera(),z.filterCamera=new b.default.Camera(S(z)),z.filterCamera._computeCameraDefaultSettings(),z.filterCamera._setDefaultCamera(),z.prevTouches=[],z.zoomVelocity=0,z.rotateVelocity=new b.default.Vector(0,0),z.moveVelocity=new b.default.Vector(0,0),z.executeZoom=!1,z.executeRotateAndMove=!1,z.specularShader=void 0,z.sphereMapping=void 0,z.diffusedShader=void 0,z._defaultLightShader=void 0,z._defaultImmediateModeShader=void 0,z._defaultNormalShader=void 0,z._defaultColorShader=void 0,z._defaultPointShader=void 0,z.userFillShader=void 0,z.userStrokeShader=void 0,z.userPointShader=void 0,z.retainedMode={geometry:{},buffers:{stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(z)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(z)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(z)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(z))],fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(z),z._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(z)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)],text:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)]}},z.immediateMode={geometry:new b.default.Geometry,shapeMode:w.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new b.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",S(z),z._vToNArray),new b.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",S(z),z._vToNArray),new b.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",S(z)),new b.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",S(z),z._flatten)],stroke:[new b.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",S(z)),new b.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",S(z)),new b.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",S(z)),new b.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",S(z)),new b.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",S(z))],point:z.GL.createBuffer()}},z.pointSize=5,z.curStrokeWeight=1,z.curStrokeCap=w.ROUND,z.curStrokeJoin=w.ROUND,z.textures=new Map,z.framebuffers=new Set,z.activeFramebuffers=[],z.filterShader=void 0,z.filterLayer=void 0,z.filterLayerTemp=void 0,z.defaultFilterShaders={},z.textureMode=w.IMAGE,z.textureWrapX=w.CLAMP,z.textureWrapY=w.CLAMP,z._tex=null,z._curveTightness=6,z._lookUpTableBezier=[],z._lookUpTableQuadratic=[],z._lutBezierDetail=0,z._lutQuadraticDetail=0,z.isProcessingVertices=!1,z._tessy=z._initTessy(),z.fontInfos={},z._curShader=void 0,z;throw new TypeError("Cannot call a class as a function")}return fe=le,(Q=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new I.default(this)}},{key:"endGeometry",value:function(){var z;if(this.geometryBuilder)return z=this.geometryBuilder.finish(),this.geometryBuilder=void 0,z;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(z){return this.beginGeometry(),z(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(z){var ye={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};z._glAttributes=null===z._glAttributes?ye:Object.assign(ye,z._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?w.WEBGL2:w.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var z=this.drawingContext;z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.viewport(0,0,z.drawingBufferWidth,z.drawingBufferHeight),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var z=this.drawingContext;return z.getParameter(z.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(z,ye){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Je=this._maxTextureSize,Ue=(Je=Math.floor(Je/this.pixelDensity()),Math.min(z,Je));return Je=Math.min(ye,Je),Ue===z&&Je===ye||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(Ue,", height: ").concat(Je,".")),{adjustedWidth:Ue,adjustedHeight:Je}}},{key:"_resetContext",value:function(z,ye){var Ue,Je=this.width,vt=this.height,zt=this.canvas.id,Ct=this._pInst instanceof b.default.Graphics;Ct?((Ue=this._pInst).canvas.parentNode.removeChild(Ue.canvas),Ue.canvas=document.createElement("canvas"),(Ue._pInst._userNode||document.body).appendChild(Ue.canvas),b.default.Element.call(Ue,Ue.canvas,Ue._pInst),Ue.width=Je,Ue.height=vt):((Ue=this.canvas)&&Ue.parentNode.removeChild(Ue),(Ue=document.createElement("canvas")).id=zt,(this._pInst._userNode||document.body).appendChild(Ue),this._pInst.canvas=Ue,this.canvas=Ue),zt=new b.default.RendererGL(this._pInst.canvas,this._pInst,!Ct),this._pInst._setProperty("_renderer",zt),zt.resize(Je,vt),zt._applyDefaults(),Ct||this._pInst._elements.push(zt),"function"==typeof ye&&setTimeout(function(){ye.apply(window._renderer,z)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Je=(Je=this._pInst).color.apply(Je,arguments);this.clear(Je.levels[0]/255,Je.levels[1]/255,Je.levels[2]/255,Je=Je.levels[3]/255)}},{key:"fill",value:function(z,ye,Ue,Je){var vt=b.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=vt._array,this.drawMode=w.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(z,ye,Ue,Je){var vt=b.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=vt._array}},{key:"strokeCap",value:function(z){this.curStrokeCap=z}},{key:"strokeJoin",value:function(z){this.curStrokeJoin=z}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(z,ye){z.width===ye.width&&z.height===ye.height||z.resize(ye.width,ye.height),z.pixelDensity()!==ye.pixelDensity()&&z.pixelDensity(ye.pixelDensity())}},{key:"filter",value:function(){var z,ye,Ue=this,Je=this.getFilterLayer(),vt=void 0,Ct=void 0,zt=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(Ct=arguments.length<=0?void 0:arguments[0],q(z={},w.BLUR,3),q(z,w.POSTERIZE,4),q(z,w.THRESHOLD,.5),vt=Ct in z&&void 0===(arguments.length<=1?void 0:arguments[1])?z[Ct]:arguments.length<=1?void 0:arguments[1],Ct in this.defaultFilterShaders||(this.defaultFilterShaders[Ct]=new b.default.Shader(Je._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",oe[Ct])),this.filterShader=this.defaultFilterShaders[Ct]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),_t=(this.matchSize(Je,zt),Je.draw(function(){return Ue._pInst.clear()}),[1/(zt.width*zt.pixelDensity()),1/(zt.height*zt.pixelDensity())]);Ct===w.BLUR?(ye=this.getFilterLayerTemp(),this.matchSize(ye,zt),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(w.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",_t),this.filterShader.setUniform("canvasSize",[zt.width,zt.height]),this.filterShader.setUniform("radius",Math.max(1,vt)),ye.draw(function(){Ue.filterShader.setUniform("direction",[1,0]),Ue.filterShader.setUniform("tex0",zt),Ue._pInst.clear(),Ue._pInst.shader(Ue.filterShader),Ue._pInst.noLights(),Ue._pInst.plane(zt.width,zt.height)}),Je.draw(function(){Ue.filterShader.setUniform("direction",[0,1]),Ue.filterShader.setUniform("tex0",ye),Ue._pInst.clear(),Ue._pInst.shader(Ue.filterShader),Ue._pInst.noLights(),Ue._pInst.plane(zt.width,zt.height)}),this._pInst.pop()):Je.draw(function(){Ue._pInst.noStroke(),Ue._pInst.blendMode(w.BLEND),Ue._pInst.shader(Ue.filterShader),Ue.filterShader.setUniform("tex0",zt),Ue.filterShader.setUniform("texelSize",_t),Ue.filterShader.setUniform("canvasSize",[zt.width,zt.height]),Ue.filterShader.setUniform("filterParameter",vt),Ue._pInst.noLights(),Ue._pInst.plane(zt.width,zt.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(w.CORNER),this._pInst.blendMode(w.BLEND),zt.filterCamera._resize(),this._pInst.setCamera(zt.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Je,-zt.width/2,-zt.height/2,zt.width,zt.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(z){return z?this._pInst.pixelDensity(z):this._pInst.pixelDensity()}},{key:"blendMode",value:function(z){z===w.DARKEST||z===w.LIGHTEST||z===w.ADD||z===w.BLEND||z===w.SUBTRACT||z===w.SCREEN||z===w.EXCLUSION||z===w.REPLACE||z===w.MULTIPLY||z===w.REMOVE?this.curBlendMode=z:z!==w.BURN&&z!==w.OVERLAY&&z!==w.HARD_LIGHT&&z!==w.SOFT_LIGHT&&z!==w.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(z,ye){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(w.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,z/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,ye/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(g(L(le.prototype),"beginClip",this).call(this,z),this.drawTarget()._isClipApplied=!0,z=this.GL).clearStencil(0),z.clear(z.STENCIL_BUFFER_BIT),z.enable(z.STENCIL_TEST),this._stencilTestOn=!0,z.stencilFunc(z.ALWAYS,1,255),z.stencilOp(z.KEEP,z.KEEP,z.REPLACE),z.disable(z.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var z=this.GL;z.stencilOp(z.KEEP,z.KEEP,z.KEEP),z.stencilFunc(this._clipInvert?z.EQUAL:z.NOTEQUAL,0,255),z.enable(z.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),g(L(le.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(z){this.curStrokeWeight!==z&&(this.pointSize=z,this.curStrokeWeight=z)}},{key:"_getPixel",value:function(z,ye){var Ue=this.GL;return re(Ue,null,z,ye,Ue.RGBA,Ue.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var z,ye,Ue=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):Ue._setProperty("pixels",ge(Ue.pixels,ye=this.GL,null,0,0,this.width*(z=this._pInst._pixelDensity),this.height*z,ye.RGBA,ye.UNSIGNED_BYTE,this.height*z))}},{key:"updatePixels",value:function(){var z=this._getTempFramebuffer();z.pixels=this._pixelsState.pixels,z.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(w.CENTER),this._pInst.image(z,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:w.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:w.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(z){return void 0!==this.retainedMode.geometry[z]}},{key:"viewport",value:function(z,ye){this._viewport=[0,0,z,ye],this.GL.viewport(0,0,z,ye)}},{key:"resize",value:function(vt,Je){b.default.Renderer.prototype.resize.call(this,vt,Je),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Ue=(void 0!==(vt=this._pixelsState).pixels&&vt._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);Je=!1,vt=void 0;try{for(var Ct,zt=this.framebuffers[Symbol.iterator]();!(Ue=(Ct=zt.next()).done);Ue=!0)Ct.value._canvasSizeChanged()}catch(_t){Je=!0,vt=_t}finally{try{Ue||null==zt.return||zt.return()}finally{if(Je)throw vt}}}},{key:"clear",value:function(){var z=(arguments.length<=0?void 0:arguments[0])||0,ye=(arguments.length<=1?void 0:arguments[1])||0,Ue=(arguments.length<=2?void 0:arguments[2])||0,Je=(arguments.length<=3?void 0:arguments[3])||0,vt=this.activeFramebuffer();vt&&vt.format===w.UNSIGNED_BYTE&&!vt.antialias&&0===Je&&(Je=1e-10),this.GL.clearColor(z*Je,ye*Je,Ue*Je,Je),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(z,ye,Ue,Je,vt,Ct){16===arguments.length?b.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([z,ye,0,0,Ue,Je,0,0,0,0,1,0,vt,Ct,0,1])}},{key:"translate",value:function(z,ye,Ue){return z instanceof b.default.Vector&&(Ue=z.z,ye=z.y,z=z.x),this.uModelMatrix.translate([z,ye,Ue]),this}},{key:"scale",value:function(z,ye,Ue){return this.uModelMatrix.scale(z,ye,Ue),this}},{key:"rotate",value:function(z,ye){return void 0===ye?this.rotateZ(z):(b.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(z){return this.rotate(z,1,0,0),this}},{key:"rotateY",value:function(z){return this.rotate(z,0,1,0),this}},{key:"rotateZ",value:function(z){return this.rotate(z,0,0,1),this}},{key:"push",value:function(){var z=b.default.Renderer.prototype.push.apply(this),ye=z.properties;return ye.uModelMatrix=this.uModelMatrix.copy(),ye.uViewMatrix=this.uViewMatrix.copy(),ye.uPMatrix=this.uPMatrix.copy(),ye._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),ye.ambientLightColors=this.ambientLightColors.slice(),ye.specularColors=this.specularColors.slice(),ye.directionalLightDirections=this.directionalLightDirections.slice(),ye.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),ye.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),ye.pointLightPositions=this.pointLightPositions.slice(),ye.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),ye.pointLightSpecularColors=this.pointLightSpecularColors.slice(),ye.spotLightPositions=this.spotLightPositions.slice(),ye.spotLightDirections=this.spotLightDirections.slice(),ye.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),ye.spotLightSpecularColors=this.spotLightSpecularColors.slice(),ye.spotLightAngle=this.spotLightAngle.slice(),ye.spotLightConc=this.spotLightConc.slice(),ye.userFillShader=this.userFillShader,ye.userStrokeShader=this.userStrokeShader,ye.userPointShader=this.userPointShader,ye.pointSize=this.pointSize,ye.curStrokeWeight=this.curStrokeWeight,ye.curStrokeColor=this.curStrokeColor,ye.curFillColor=this.curFillColor,ye.curAmbientColor=this.curAmbientColor,ye.curSpecularColor=this.curSpecularColor,ye.curEmissiveColor=this.curEmissiveColor,ye._hasSetAmbient=this._hasSetAmbient,ye._useSpecularMaterial=this._useSpecularMaterial,ye._useEmissiveMaterial=this._useEmissiveMaterial,ye._useShininess=this._useShininess,ye._useMetalness=this._useMetalness,ye.constantAttenuation=this.constantAttenuation,ye.linearAttenuation=this.linearAttenuation,ye.quadraticAttenuation=this.quadraticAttenuation,ye._enableLighting=this._enableLighting,ye._useNormalMaterial=this._useNormalMaterial,ye._tex=this._tex,ye.drawMode=this.drawMode,ye._currentNormal=this._currentNormal,ye.curBlendMode=this.curBlendMode,ye.activeImageLight=this.activeImageLight,ye.textureMode=this.textureMode,z}},{key:"pop",value:function(){var z;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var ye=arguments.length,Ue=new Array(ye),Je=0;Je<ye;Je++)Ue[Je]=arguments[Je];(z=g(L(le.prototype),"pop",this)).call.apply(z,[this].concat(Ue)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var z=this.drawTarget();z._isClipApplied!==this._stencilTestOn&&(z._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var z=this.userStrokeShader;return z&&z.isStrokeShader()?z:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(z){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(Se)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",z),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var z=this.userFillShader;if(this._useNormalMaterial&&(!z||!z.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getImmediateModeShader();return z}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var z=this.userFillShader;if(this._enableLighting){if(!z||!z.isLightShader())return this._getLightShader()}else if(this._tex){if(!z||!z.isTextureShader())return this._getLightShader()}else if(!z)return this._getColorShader();return z}},{key:"_getImmediatePointShader",value:function(){var z=this.userPointShader;return z&&z.isPointShader()?z:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._defaultLightShader=this._pInst._glAttributes.perPixelLighting?new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+we.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+we.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+we.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+we.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===w.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new b.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+we.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+we.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(z,ye){var Ue="";return this.webglVersion===w.WEBGL2&&(Ue+="#version 300 es\n#define WEBGL2\n"),"vert"===z?Ue+="#define VERTEX_SHADER\n":"frag"===z&&(Ue+="#define FRAGMENT_SHADER\n"),ye&&(Ue+="precision ".concat(ye," float;\n")),Ue}},{key:"_getEmptyTexture",value:function(){var z;return this._emptyTexture||((z=new b.default.Image(1,1)).set(0,0,255),this._emptyTexture=new b.default.Texture(this,z)),this._emptyTexture}},{key:"getTexture",value:function(z){z instanceof b.default.Framebuffer&&(z=z.color);var ye=this.textures.get(z);return ye||(ye=new b.default.Texture(this,z),this.textures.set(z,ye),ye)}},{key:"getDiffusedTexture",value:function(z){var ye,Ue,Je=this;return null!=this.diffusedTextures.get(z)?this.diffusedTextures.get(z):(ye=Math.floor(z.height/z.width*200),Ue=this._pInst.createFramebuffer({width:200,height:ye,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(we.imageLightVert,we.imageLightDiffusedFrag)),Ue.draw(function(){Je._pInst.shader(Je.diffusedShader),Je.diffusedShader.setUniform("environmentMap",z),Je._pInst.noStroke(),Je._pInst.rectMode(w.CENTER),Je._pInst.noLights(),Je._pInst.rect(0,0,200,ye)}),this.diffusedTextures.set(z,Ue),Ue)}},{key:"getSpecularTexture",value:function(z){var ye=this;if(null!=this.specularTextures.get(z))return this.specularTextures.get(z);for(var Ue,Je=[],vt=this._pInst.createFramebuffer({width:512,height:512,density:1}),Ct=Math.log(512)/Math.log(2),zt=(this.specularShader||(this.specularShader=this._pInst.createShader(we.imageLightVert,we.imageLightSpecularFrag)),512);1<=zt;zt/=2)!function(_t){vt.resize(_t,_t);var Ft=1-Math.log(_t)/Math.log(2)/Ct;vt.draw(function(){ye._pInst.shader(ye.specularShader),ye._pInst.clear(),ye.specularShader.setUniform("environmentMap",z),ye.specularShader.setUniform("roughness",Ft),ye._pInst.noStroke(),ye._pInst.noLights(),ye._pInst.plane(_t,_t)}),Je.push(vt.get().drawingContext.getImageData(0,0,_t,_t))}(zt);return vt.remove(),Ue=new d.MipmapTexture(this,Je,{}),this.specularTextures.set(z,Ue),Ue}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(z){return new b.default.Framebuffer(this,z)}},{key:"_setStrokeUniforms",value:function(z){z.bindShader(),z.setUniform("uUseLineColor",this._useLineColor),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uStrokeWeight",this.curStrokeWeight),z.setUniform("uStrokeCap",K[this.curStrokeCap]),z.setUniform("uStrokeJoin",H[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(z){var ye=this,Ue=(z.bindShader(),this.mixedSpecularColor=p(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Je,vt){return ye.curFillColor[vt]*ye._useMetalness+Je*(1-ye._useMetalness)})),z.setUniform("uUseVertexColor",this._useVertexColor),z.setUniform("uMaterialColor",this.curFillColor),z.setUniform("isTexture",!!this._tex),this._tex&&z.setUniform("uSampler",this._tex),z.setUniform("uTint",this._tint),z.setUniform("uHasSetAmbient",this._hasSetAmbient),z.setUniform("uAmbientMatColor",this.curAmbientColor),z.setUniform("uSpecularMatColor",this.mixedSpecularColor),z.setUniform("uEmissiveMatColor",this.curEmissiveColor),z.setUniform("uSpecular",this._useSpecularMaterial),z.setUniform("uEmissive",this._useEmissiveMaterial),z.setUniform("uShininess",this._useShininess),z.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(z),z.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);z.setUniform("uPointLightCount",Ue),z.setUniform("uPointLightLocation",this.pointLightPositions),z.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),z.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),z.setUniform("uDirectionalLightCount",Ue=this.directionalLightDiffuseColors.length/3),z.setUniform("uLightingDirection",this.directionalLightDirections),z.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),z.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),Ue=this.ambientLightColors.length/3,this.mixedAmbientLight=p(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Je){return Math.max(0,Je-=ye._useMetalness)})),z.setUniform("uAmbientLightCount",Ue),z.setUniform("uAmbientColor",this.mixedAmbientLight),z.setUniform("uSpotLightCount",Ue=this.spotLightDiffuseColors.length/3),z.setUniform("uSpotLightAngle",this.spotLightAngle),z.setUniform("uSpotLightConc",this.spotLightConc),z.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),z.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),z.setUniform("uSpotLightLocation",this.spotLightPositions),z.setUniform("uSpotLightDirection",this.spotLightDirections),z.setUniform("uConstantAttenuation",this.constantAttenuation),z.setUniform("uLinearAttenuation",this.linearAttenuation),z.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),z.bindTextures()}},{key:"_setImageLightUniforms",value:function(z){var ye;z.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(ye=this.getDiffusedTexture(this.activeImageLight),z.setUniform("environmentMapDiffused",ye),ye=this.getSpecularTexture(this.activeImageLight),z.setUniform("environmentMapSpecular",ye))}},{key:"_setPointUniforms",value:function(z){z.bindShader(),z.setUniform("uMaterialColor",this.curStrokeColor),z.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(z,ye,Ue,Je,vt){this.GL.bindBuffer(ye=ye||this.GL.ARRAY_BUFFER,z),void 0!==Ue&&((z=Ue)instanceof b.default.DataArray?z=Ue.dataArray():z instanceof(Je||Float32Array)||(z=new(Je||Float32Array)(z)),this.GL.bufferData(ye,z,vt||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(z,ye){return z.length===ye.length&&z.every(function(Ue,Je){return Ue===ye[Je]})}},{key:"_isTypedArray",value:function(z){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(ye){return z instanceof ye})}},{key:"_flatten",value:function(z){return z.flat()}},{key:"_vToNArray",value:function(z){return z.flatMap(function(ye){return[ye.x,ye.y,ye.z]})}},{key:"_bezierCoefficients",value:function(z){var ye=z*z,Ue=1-z,Je=Ue*Ue;return[Je*Ue,3*Je*z,3*Ue*ye,ye*z]}},{key:"_quadraticCoefficients",value:function(z){var ye=1-z;return[ye*ye,2*ye*z,z*z]}},{key:"_bezierToCatmull",value:function(z){return[z[1],z[1]+(z[2]-z[0])/this._curveTightness,z[2]-(z[3]-z[1])/this._curveTightness,z[2]]}},{key:"_initTessy",value:function(){var z=new D.default.GluTesselator;return z.gluTessCallback(D.default.gluEnum.GLU_TESS_VERTEX_DATA,function(ye,Ue){var Je=!0,vt=!1,Ct=void 0;try{for(var zt,_t=ye[Symbol.iterator]();!(Je=(zt=_t.next()).done);Je=!0)Ue.push(zt.value)}catch(Wt){vt=!0,Ct=Wt}finally{try{Je||null==_t.return||_t.return()}finally{if(vt)throw Ct}}}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_BEGIN,function(ye){ye!==D.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(ye))}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_ERROR,function(ye){console.log("error callback"),console.log("error number: ".concat(ye))}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_COMBINE,function(ye,Ue,Je){for(var vt=new Array(b.default.RendererGL.prototype.tessyVertexSize).fill(0),Ct=0;Ct<Je.length;Ct++)for(var zt=0;zt<vt.length;zt++)0!==Je[Ct]&&Ue[Ct]&&(vt[zt]+=Ue[Ct][zt]*Je[Ct]);return vt}),z.gluTessCallback(D.default.gluEnum.GLU_TESS_EDGE_FLAG,function(ye){}),z.gluTessProperty(D.default.gluEnum.GLU_TESS_WINDING_RULE,D.default.windingRule.GLU_TESS_WINDING_NONZERO),z}},{key:"_triangulate",value:function(z){var ye=z[0]?z[0][2]:void 0,Ue=!0,Je=!0,Ft=!1,mt=void 0;try{for(var vt,Ct=z[Symbol.iterator]();!(Je=(vt=Ct.next()).done);Je=!0)for(var zt=vt.value,_t=0;_t<zt.length;_t+=b.default.RendererGL.prototype.tessyVertexSize)if(zt[_t+2]!==ye){Ue=!1;break}}catch(Zn){Ft=!0,mt=Zn}finally{try{Je||null==Ct.return||Ct.return()}finally{if(Ft)throw mt}}this._tessy.gluTessNormal(0,0,Ue?1:0);var Wt=(this._tessy.gluTessBeginPolygon(Ft=[]),!0),Nt=void(mt=!1);try{for(var kt,Ut=z[Symbol.iterator]();!(Wt=(kt=Ut.next()).done);Wt=!0){var Tt=kt.value;this._tessy.gluTessBeginContour();for(var qt=0;qt<Tt.length;qt+=b.default.RendererGL.prototype.tessyVertexSize){var mn=Tt.slice(qt,qt+b.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(mn,mn)}this._tessy.gluTessEndContour()}}catch(Zn){mt=!0,Nt=Zn}finally{try{Wt||null==Ut.return||Ut.return()}finally{if(mt)throw Nt}}return this._tessy.gluTessEndPolygon(),Ft}}])&&m(fe.prototype,Q),le}(b.default.Renderer),b.default.prototype._assert3d=function(Q){if(!this._renderer.isP3D)throw new Error("".concat(Q,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},b.default.RendererGL.prototype.tessyVertexSize=12,Z.default=Y=b.default.RendererGL},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(l,be,Z){"use strict";l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.concat"),l("core-js/modules/es.array.index-of"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.array.slice"),l("core-js/modules/es.array.some"),l("core-js/modules/es.function.name"),l("core-js/modules/es.object.assign"),l("core-js/modules/es.object.keys"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=(l=l("../core/main"))&&l.__esModule?l:{default:l};function C(w,I){return function(D){if(Array.isArray(D))return D}(w)||function(D,d){if(Symbol.iterator in Object(D)||"[object Arguments]"===Object.prototype.toString.call(D)){var f=[],h=!0,p=!1,m=void 0;try{for(var g,x=D[Symbol.iterator]();!(h=(g=x.next()).done)&&(f.push(g.value),!d||f.length!==d);h=!0);}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}return f}}(w,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(w,I){for(var D=0;D<I.length;D++){var d=I[D];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,d.key,d)}}M.default.Shader=function(){function w(f,h,p){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this._renderer=f,this._vertSrc=h,this._fragSrc=p,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:m.uniforms||{},declarations:m.declarations,helpers:m.helpers||{},vertex:m.vertex||{},fragment:m.fragment||{},modified:{vertex:m.modified&&m.modified.vertex||{},fragment:m.modified&&m.modified.fragment||{}}}}var I,D;return I=w,(D=[{key:"shaderSrc",value:function(L,h){var p,m,g,x,E,S=(L=C(L.split("void main"),2))[0],q=(L=L[1],"");for(p in this.hooks.uniforms)q+="uniform ".concat(p,";\n");for(m in this.hooks.declarations&&(q+=this.hooks.declarations+"\n"),this.hooks[h].declarations&&(q+=this.hooks[h].declarations+"\n"),this.hooks.helpers)q+="".concat(m).concat(this.hooks.helpers[m],"\n");for(g in this.hooks[h])"declarations"!==g&&(x=(E=C(g.split(" "),2))[0],E=E[1],this.hooks.modified[h][g]&&(q+="#define AUGMENTED_HOOK_"+E+"\n"),q+=x+" HOOK_"+E+this.hooks[h][g]+"\n");return S+q+"void main"+L}},{key:"version",value:function(){var f=/#version (.+)$/.exec(this.vertSrc());return f?f[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var f in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[f]?"[MODIFIED] ":"")+f+this.hooks.vertex[f]);for(var h in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[h]?"[MODIFIED] ":"")+h+this.hooks.fragment[h]);for(var p in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(p+this.hooks.helpers[p])}},{key:"modify",value:function(f){M.default._validateParameters("p5.Shader.modify",arguments);var h,p={vertex:{},fragment:{},helpers:{}};for(h in f)"declarations"!==h&&"uniforms"!==h&&("vertexDeclarations"===h?p.vertex.declarations=(p.vertex.declarations||"")+"\n"+f[h]:"fragmentDeclarations"===h?p.fragment.declarations=(p.fragment.declarations||"")+"\n"+f[h]:this.hooks.vertex[h]?p.vertex[h]=f[h]:this.hooks.fragment[h]?p.fragment[h]=f[h]:p.helpers[h]=f[h]);var m,g,x=Object.assign({},this.hooks.modified.vertex),E=Object.assign({},this.hooks.modified.fragment);for(m in p.vertex||{})"declarations"!==m&&(x[m]=!0);for(g in p.fragment||{})"declarations"!==g&&(E[g]=!0);return new M.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(f.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,f.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,p.fragment||{}),vertex:Object.assign({},this.hooks.vertex,p.vertex||{}),helpers:Object.assign({},this.hooks.helpers,p.helpers||{}),modified:{vertex:x,fragment:E}})}},{key:"init",value:function(){if(0===this._glProgram){var f,h=this._renderer.GL;if(this._vertShader=h.createShader(h.VERTEX_SHADER),h.shaderSource(this._vertShader,this.vertSrc()),h.compileShader(this._vertShader),!h.getShaderParameter(this._vertShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._vertShader),console.error(f),null;if(this._fragShader=h.createShader(h.FRAGMENT_SHADER),h.shaderSource(this._fragShader,this.fragSrc()),h.compileShader(this._fragShader),!h.getShaderParameter(this._fragShader,h.COMPILE_STATUS))return f=h.getShaderInfoLog(this._fragShader),console.error(f),null;this._glProgram=h.createProgram(),h.attachShader(this._glProgram,this._vertShader),h.attachShader(this._glProgram,this._fragShader),h.linkProgram(this._glProgram),h.getProgramParameter(this._glProgram,h.LINK_STATUS)||M.default._friendlyError("Snap! Error linking shader program: ".concat(h.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var f in this.hooks.uniforms){var p,h=C(f.split(" "),2)[1];null!=(p=(f=this.hooks.uniforms[f])instanceof Function?f():f)&&this.setUniform(h,p)}}},{key:"copyToContext",value:function(f){var h=new M.default.Shader(f._renderer,this._vertSrc,this._fragSrc);return h.ensureCompiledOnContext(f),h}},{key:"ensureCompiledOnContext",value:function(f){if(0!==this._glProgram&&this._renderer!==f._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=f._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_ATTRIBUTES),p=0;p<h;++p){var m=f.getActiveAttrib(this._glProgram,p),g=m.name,x=f.getAttribLocation(this._glProgram,g),E={};E.name=g,E.location=x,E.index=p,E.type=m.type,E.size=m.size,this.attributes[g]=E}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var f=this._renderer.GL,h=f.getProgramParameter(this._glProgram,f.ACTIVE_UNIFORMS),p=0,m=0;m<h;++m){var g=f.getActiveUniform(this._glProgram,m),x={},E=(x.location=f.getUniformLocation(this._glProgram,g.name),x.size=g.size,g.name);1<g.size&&(E=E.substring(0,E.indexOf("[0]"))),x.name=E,x.type=g.type,x._cachedData=void 0,x.type===f.SAMPLER_2D&&(x.samplerIndex=p,p++,this.samplers.push(x)),x.isArray=1<g.size||x.type===f.FLOAT_MAT3||x.type===f.FLOAT_MAT4||x.type===f.FLOAT_VEC2||x.type===f.FLOAT_VEC3||x.type===f.FLOAT_VEC4||x.type===f.INT_VEC2||x.type===f.INT_VEC4||x.type===f.INT_VEC3,this.uniforms[E]=x}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var f=this._renderer.GL,h=!0,p=!1,m=void 0;try{for(var g,x=this.samplers[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var E=g.value,S=E.texture;void 0===S&&(S=this._renderer._getEmptyTexture()),f.activeTexture(f.TEXTURE0+E.samplerIndex),S.bindTexture(),S.update(),f.uniform1i(E.location,E.samplerIndex)}}catch(L){p=!0,m=L}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}},{key:"updateTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var x=m.value.texture;x&&x.update()}}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"unbindTextures",value:function(){var f=!0,h=!1,p=void 0;try{for(var m,g=this.samplers[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)this.setUniform(m.value.name,this._renderer._getEmptyTexture())}catch(E){h=!0,p=E}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},{key:"_setMatrixUniforms",value:function(){var f=this._renderer.uModelMatrix,h=this._renderer.uViewMatrix,p=this._renderer.uPMatrix,m=f.copy().mult(h),g=(this._renderer.uMVMatrix=m).copy();g.mult(p),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",h.mat4),this.setUniform("uProjectionMatrix",p.mat4),this.setUniform("uModelMatrix",f.mat4),this.setUniform("uModelViewMatrix",m.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){return this._renderer._curShader!==this&&(this._renderer.GL.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(f,h){var p=this.uniforms[f];if(p){var m=this._renderer.GL;if(p.isArray){if(p._cachedData&&this._renderer._arraysEqual(p._cachedData,h))return;p._cachedData=h.slice(0)}else{if(p._cachedData&&p._cachedData===h)return;p._cachedData=Array.isArray(h)?h.slice(0):h}var g=p.location;switch(this.useProgram(),p.type){case m.BOOL:m.uniform1i(g,!0===h?1:0);break;case m.INT:1<p.size?h.length&&m.uniform1iv(g,h):m.uniform1i(g,h);break;case m.FLOAT:1<p.size?h.length&&m.uniform1fv(g,h):m.uniform1f(g,h);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(g,!1,h);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(g,!1,h);break;case m.FLOAT_VEC2:1<p.size?h.length&&m.uniform2fv(g,h):m.uniform2f(g,h[0],h[1]);break;case m.FLOAT_VEC3:1<p.size?h.length&&m.uniform3fv(g,h):m.uniform3f(g,h[0],h[1],h[2]);break;case m.FLOAT_VEC4:1<p.size?h.length&&m.uniform4fv(g,h):m.uniform4f(g,h[0],h[1],h[2],h[3]);break;case m.INT_VEC2:1<p.size?h.length&&m.uniform2iv(g,h):m.uniform2i(g,h[0],h[1]);break;case m.INT_VEC3:1<p.size?h.length&&m.uniform3iv(g,h):m.uniform3i(g,h[0],h[1],h[2]);break;case m.INT_VEC4:1<p.size?h.length&&m.uniform4iv(g,h):m.uniform4i(g,h[0],h[1],h[2],h[3]);break;case m.SAMPLER_2D:if("number"==typeof h){if(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h))return console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;m.activeTexture(h),m.uniform1i(g,h)}else m.activeTexture(m.TEXTURE0+p.samplerIndex),p.texture=h instanceof M.default.Texture?h:this._renderer.getTexture(h),m.uniform1i(g,p.samplerIndex),p.texture.src.gifProperties&&p.texture.src._animateGif(this._renderer._pInst);break;case m.SAMPLER_CUBE:case m.SAMPLER_3D:case m.SAMPLER_2D_SHADOW:case m.SAMPLER_2D_ARRAY:case m.SAMPLER_2D_ARRAY_SHADOW:case m.SAMPLER_CUBE_SHADOW:case m.INT_SAMPLER_2D:case m.INT_SAMPLER_3D:case m.INT_SAMPLER_CUBE:case m.INT_SAMPLER_2D_ARRAY:case m.UNSIGNED_INT_SAMPLER_2D:case m.UNSIGNED_INT_SAMPLER_3D:case m.UNSIGNED_INT_SAMPLER_CUBE:case m.UNSIGNED_INT_SAMPLER_2D_ARRAY:"number"==typeof h&&(h<m.TEXTURE0||h>m.TEXTURE31||h!==Math.ceil(h)?console.log("\u{1f338} p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(m.activeTexture(h),m.uniform1i(g,h)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(f){return void 0!==f})}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(f,h,p,m,g,x){var E;return f&&-1!==(f=f.location)&&(E=this._renderer.GL,this._renderer.registerEnabled.has(f)||(E.enableVertexAttribArray(f),this._renderer.registerEnabled.add(f)),this._renderer.GL.vertexAttribPointer(f,h,p||E.FLOAT,m||!1,g||0,x||0)),this}},{key:"disableRemainingAttributes",value:function(){var f=this,h=!0,p=!1,m=void 0;try{for(var g,x=this._renderer.registerEnabled.values()[Symbol.iterator]();!(h=(g=x.next()).done);h=!0)!function(){var E=g.value;Object.keys(f.attributes).some(function(S){return f.attributes[S].location===E})||(f._renderer.GL.disableVertexAttribArray(E),f._renderer.registerEnabled.delete(E))}()}catch(E){p=!0,m=E}finally{try{h||null==x.return||x.return()}finally{if(p)throw m}}}}])&&b(I.prototype,D),w}(),Z.default=l=M.default.Shader},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(l,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.get-prototype-of"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.reflect.construct"),l("core-js/modules/es.regexp.to-string"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.uint8-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(Z,"__esModule",{value:!0}),Z.checkWebGLCapabilities=x,Z.default=Z.MipmapTexture=void 0;var b=(g=l("../core/main"))&&g.__esModule?g:{default:g},w=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=I();if(S&&S.has(E))return S.get(E);var L,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in E){var G;Object.prototype.hasOwnProperty.call(E,L)&&((G=J?Object.getOwnPropertyDescriptor(E,L):null)&&(G.get||G.set)?Object.defineProperty(q,L,G):q[L]=E[L])}return q.default=E,S&&S.set(E,q),q}(l("../core/constants"));function I(){var E;return"function"!=typeof WeakMap?null:(I=function(){return E},E=new WeakMap)}function D(E,S){return(D=Object.setPrototypeOf||function(L,q){return L.__proto__=q,L})(E,S)}function f(E){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(E)}function h(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function p(E,S){for(var L=0;L<S.length;L++){var q=S[L];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function m(E,S,L){S&&p(E.prototype,S),L&&p(E,L)}b.default.Texture=function(){function E(V,L,G){h(this,E),this._renderer=V;var J=this._renderer.GL;return G=G||{},this.src=L,this.glTex=void 0,this.glTarget=J.TEXTURE_2D,this.glFormat=G.format||J.RGBA,this.mipmaps=!1,this.glMinFilter=G.minFilter||J.LINEAR,this.glMagFilter=G.magFilter||J.LINEAR,this.glWrapS=G.wrapS||J.CLAMP_TO_EDGE,this.glWrapT=G.wrapT||J.CLAMP_TO_EDGE,this.glDataType=G.dataType||J.UNSIGNED_BYTE,G=x(V),this.glFormat!==J.HALF_FLOAT||G.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=J.FLOAT),this.glFormat!==J.HALF_FLOAT||this.glMinFilter!==J.LINEAR&&this.glMagFilter!==J.LINEAR||G.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===J.LINEAR&&(this.glMinFilter=J.NEAREST),this.glMagFilter===J.LINEAR&&(this.glMagFilter=J.NEAREST)),this.glFormat!==J.FLOAT||G.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=J.UNSIGNED_BYTE),this.glFormat!==J.FLOAT||this.glMinFilter!==J.LINEAR&&this.glMagFilter!==J.LINEAR||G.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===J.LINEAR&&(this.glMinFilter=J.NEAREST),this.glMagFilter===J.LINEAR&&(this.glMagFilter=J.NEAREST)),this.isSrcMediaElement=void 0!==b.default.MediaElement&&L instanceof b.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==b.default.Element&&L instanceof b.default.Element&&!(L instanceof b.default.Graphics)&&!(L instanceof b.default.Renderer),this.isSrcP5Image=L instanceof b.default.Image,this.isSrcP5Graphics=L instanceof b.default.Graphics,this.isSrcP5Renderer=L instanceof b.default.Renderer,this.isImageData=typeof ImageData<"u"&&L instanceof ImageData,this.isFramebufferTexture=L instanceof b.default.FramebufferTexture,V=this._getTextureDataFromSource(),this.width=V.width,this.height=V.height,this.init(V),this}return m(E,[{key:"_getTextureDataFromSource",value:function(){var S;return this.isFramebufferTexture?S=this.src.rawTexture():this.isSrcP5Image?S=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),S=this.src.canvas||this.src.elt):this.isImageData&&(S=this.src),S}},{key:"init",value:function(S){var L,q=this._renderer.GL;this.isFramebufferTexture||(this.glTex=q.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,this.glMagFilter),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(L=new Uint8Array([1,1,1,1]),q.texImage2D(this.glTarget,0,q.RGBA,1,1,0,this.glFormat,this.glDataType,L)):q.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S))}},{key:"update",value:function(){var S,L,q,J=this.src;return 0!==J.width&&0!==J.height&&!this.isFramebufferTexture&&(S=this._getTextureDataFromSource(),L=!1,q=this._renderer.GL,S.width!==this.width||S.height!==this.height?(L=!0,this.width=S.width||J.width,this.height=S.height||J.height,this.isSrcP5Image?J.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&J.setModified(!0)):this.isSrcP5Image?J.isModified()&&J.setModified(!(L=!0)):this.isSrcMediaElement?J.isModified()?J.setModified(!(L=!0)):J.loadedmetadata&&this._videoPrevUpdateTime!==J.time()&&(this._videoPrevUpdateTime=J.time(),L=!0):this.isImageData?J._dirty&&(L=!(J._dirty=!1)):L=!0,L&&(this.bindTexture(),q.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,S)),L)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(S,L){var q=this._renderer.GL;this.glMinFilter=this.glFilter(S),this.glMagFilter=this.glFilter(L),this.bindTexture(),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,this.glMinFilter),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(S){var L=this._renderer.GL;return S===w.NEAREST?L.NEAREST:L.LINEAR}},{key:"setWrapMode",value:function(S,L){function q(K){return!(K&K-1)}var J=this._renderer.GL,V=(V=this._getTextureDataFromSource()).naturalWidth&&V.naturalHeight?(G=V.naturalWidth,V.naturalHeight):(G=this.width,this.height),G=q(G);V=q(V),S===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapS=J.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=J.CLAMP_TO_EDGE):S===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapS=J.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=J.CLAMP_TO_EDGE):this.glWrapS=J.CLAMP_TO_EDGE,L===w.REPEAT?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapT=J.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=J.CLAMP_TO_EDGE):L===w.MIRROR?this._renderer.webglVersion===w.WEBGL2||G&&V?this.glWrapT=J.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=J.CLAMP_TO_EDGE):this.glWrapT=J.CLAMP_TO_EDGE,this.bindTexture(),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,this.glWrapS),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),E}();var g=function(E){var S=q;if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),E&&D(S,E);var L=function d(E){return function(){var S,L=f(E);if(S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=f(this).constructor,Reflect.construct(L,arguments,S)):L.apply(this,arguments),L=this,!S||"object"!==C(S)&&"function"!=typeof S){if(void 0!==L)return L;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return S}}(q);function q(J,G,V){return h(this,q),G=(J=L.call(this,J,G,V))._renderer.GL,J.glMinFilter===G.LINEAR&&(J.glMinFilter=G.LINEAR_MIPMAP_LINEAR),J}return m(q,[{key:"glFilter",value:function(J){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(J){var G=this._renderer.GL;this.glTex=G.createTexture(),this.bindTexture();for(var V=0;V<J.length;V++)G.texImage2D(this.glTarget,V,this.glFormat,this.glFormat,this.glDataType,J[V]);this.glMinFilter=G.LINEAR_MIPMAP_LINEAR,G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,this.glMagFilter),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),q}(b.default.Texture);function x(J){var S=J.GL,L=(J=J.webglVersion)===w.WEBGL2?S.getExtension("EXT_color_buffer_float")&&S.getExtension("EXT_float_blend"):S.getExtension("OES_texture_float");return{float:L,floatLinear:L&&S.getExtension("OES_texture_float_linear"),halfFloat:J=S.getExtension(J===w.WEBGL2?"EXT_color_buffer_float":"OES_texture_half_float"),halfFloatLinear:J&&S.getExtension("OES_texture_half_float_linear")}}Z.MipmapTexture=g,Z.default=l=b.default.Texture},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(l,be,Z){"use strict";function M(E){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(E)}function C(E){return(C="function"==typeof Symbol&&"symbol"===M(Symbol.iterator)?function(S){return M(S)}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":M(S)})(E)}l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.get-own-property-descriptor"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/es.weak-map"),l("core-js/modules/web.dom-collections.iterator"),l("core-js/modules/es.symbol"),l("core-js/modules/es.symbol.description"),l("core-js/modules/es.symbol.iterator"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.regexp.exec"),l("core-js/modules/es.string.iterator"),l("core-js/modules/es.string.split"),l("core-js/modules/es.string.sub"),l("core-js/modules/web.dom-collections.iterator");var b,w=(b=l("../core/main"))&&b.__esModule?b:{default:b},I=function(E){if(E&&E.__esModule)return E;if(null===E||"object"!==C(E)&&"function"!=typeof E)return{default:E};var S=D();if(S&&S.has(E))return S.get(E);var L,q={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in E){var G;Object.prototype.hasOwnProperty.call(E,L)&&((G=J?Object.getOwnPropertyDescriptor(E,L):null)&&(G.get||G.set)?Object.defineProperty(q,L,G):q[L]=E[L])}return q.default=E,S&&S.set(E,q),q}(l("../core/constants"));function D(){var E;return"function"!=typeof WeakMap?null:(D=function(){return E},E=new WeakMap)}function d(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function f(E,S){for(var L=0;L<S.length;L++){var q=S[L];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}function h(E,S,L){S&&f(E.prototype,S),L&&f(E,L)}l("./p5.Shader"),l("./p5.RendererGL.Retained"),w.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},w.default.RendererGL.prototype.textWidth=function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):0};var p=function(){function E(S,L){d(this,E),this.width=S,this.height=L,this.infos=[]}return h(E,[{key:"findImage",value:function(S){var L,q,J=this.width*this.height;if(J<S)throw new Error("font is too complex to render in 3D");for(var G=this.infos.length-1;0<=G;--G){var V=this.infos[G];if(V.index+S<J){q=(L=V).imageData;break}}if(!L){try{q=new ImageData(this.width,this.height)}catch{var K=document.getElementsByTagName("canvas")[0],H=!K,te=(K||((K=document.createElement("canvas")).style.display="none",document.body.appendChild(K)),K.getContext("2d"));te&&(q=te.createImageData(this.width,this.height)),H&&document.body.removeChild(K)}this.infos.push(L={index:0,imageData:q})}return te=L.index,L.index+=S,q._dirty=!0,{imageData:q,index:te}}}]),E}();function m(V,S,L,q,J){var G=V.imageData.data;V=4*V.index++,G[V++]=S,G[V++]=L,G[V++]=q,G[+V]=J}var g=Math.sqrt(3),x=function(){function E(S){d(this,E),this.font=S,this.strokeImageInfos=new p(64,64),this.colDimImageInfos=new p(64,64),this.rowDimImageInfos=new p(64,64),this.colCellImageInfos=new p(64,64),this.rowCellImageInfos=new p(64,64),this.glyphInfos={}}return h(E,[{key:"getGlyphInfo",value:function(S){var L=this.glyphInfos[S.index];if(!L){var q=S.getBoundingBox(),J=q.x1,G=q.y1,V=q.x2-J,K=q.y2-G,H=S.path.commands;if(0==V||0==K||!H.length)return this.glyphInfos[S.index]={};for(var te=[],Y=[],we=[],Se=8;0<=Se;--Se)we.push([]);for(Se=8;0<=Se;--Se)Y.push([]);var oe,ge,re,Q,fe=function(){function Rn(Er,Bn,ur,vn){d(this,Rn),this.p0=Er,this.c0=Bn,this.c1=ur,this.p1=vn}return h(Rn,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return w.default.Vector.sub(w.default.Vector.sub(this.p1,this.p0),w.default.Vector.mult(w.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(er){var Bn=w.default.Vector.lerp(this.p0,this.c0,er),vn=w.default.Vector.lerp(this.c0,this.c1,er),ur=w.default.Vector.lerp(Bn,vn,er);return this.c1=w.default.Vector.lerp(this.c1,this.p1,er),this.c0=w.default.Vector.lerp(vn,this.c1,er),vn=w.default.Vector.lerp(ur,this.c0,er),er=new Rn(this.p0,Bn,ur,vn),this.p0=vn,er}},{key:"splitInflections",value:function(){var Er=w.default.Vector.sub(this.c0,this.p0),Bn=w.default.Vector.sub(w.default.Vector.sub(this.c1,this.c0),Er),ur=w.default.Vector.sub(w.default.Vector.sub(w.default.Vector.sub(this.p1,this.c1),Er),w.default.Vector.mult(Bn,2)),vn=[],er=Bn.x*ur.y-Bn.y*ur.x;return 0!==er&&0<=(Er=(ur=Er.x*ur.y-Er.y*ur.x)*ur-4*er*(Er.x*Bn.y-Er.y*Bn.x))&&(er<0&&(er=-er,ur=-ur),Er=(-ur+(Bn=Math.sqrt(Er)))/(2*er),0<(ur=(-ur-Bn)/(2*er))&&ur<1&&(vn.push(this.split(ur)),Er=1-(1-Er)/(1-ur)),0<Er&&Er<1&&vn.push(this.split(Er))),vn.push(this),vn}}]),Rn}(),De=!0,it=!1,le=void 0;try{for(var z,ye=H[Symbol.iterator]();!(De=(z=ye.next()).done);De=!0){var Ue=z.value,Je=(Ue.x-J)/V,vt=(Ue.y-G)/K;if(!An(oe,ge,Je,vt)){switch(Ue.type){case"M":re=Je,Q=vt;break;case"L":Zn(oe,ge,Je,vt);break;case"Q":var Ct=(Ue.x1-J)/V,zt=(Ue.y1-G)/K;qt([oe,Je,Ct],[ge,vt,zt],{x:oe,y:ge,cx:Ct,cy:zt});break;case"Z":An(oe,ge,re,Q)?te.push({x:oe,y:ge}):(Zn(oe,ge,re,Q),te.push({x:re,y:Q}));break;case"C":for(var _t=function(wt,On,$n,ur,vn,er,Pn,gt){wt=new fe(new w.default.Vector(wt,On),new w.default.Vector($n,ur),new w.default.Vector(vn,er),new w.default.Vector(Pn,gt)).splitInflections();var rt=[],bt=30/g,gn=!0;On=!1,$n=void 0;try{for(var sr,Cr=wt[Symbol.iterator]();!(gn=(sr=Cr.next()).done);gn=!0){for(var Rr=sr.value,Fr=[],In=void 0;!(.125<=(In=bt/Rr.quadError()));){var cn=Math.pow(In,.3333333333333333),Tn=Rr.split(cn),sn=Rr.split(1-cn/(1-cn));rt.push(Tn),Fr.push(Rr),Rr=sn}In<1&&rt.push(Rr.split(.5)),rt.push(Rr),Array.prototype.push.apply(rt,Fr.reverse())}}catch(_n){On=!0,$n=_n}finally{try{gn||null==Cr.return||Cr.return()}finally{if(On)throw $n}}return rt}(oe,ge,(Ue.x1-J)/V,(Ue.y1-G)/K,(Ue.x2-J)/V,(Ue.y2-G)/K,Je,vt),Ft=0;Ft<_t.length;Ft++){var Wt=_t[Ft].toQuadratic();qt([Wt.x,Wt.x1,Wt.cx],[Wt.y,Wt.y1,Wt.cy],Wt)}break;default:throw new Error("unknown command type: ".concat(Ue.type))}oe=Je,ge=vt}}}catch(Rn){it=!0,le=Rn}finally{try{De||null==ye.return||ye.return()}finally{if(it)throw le}}for(var mt=te.length,Nt=this.strokeImageInfos.findImage(mt),kt=Nt.index,Ut=0;Ut<mt;++Ut){var Tt=te[Ut];m(Nt,mn(Tt.x),mn(Tt.y),mn(Tt.cx),mn(Tt.cy))}(L=this.glyphInfos[S.index]={glyph:S,uGlyphRect:[q.x1,-q.y1,q.x2,-q.y2],strokeImageInfo:Nt,strokes:te,colInfo:Qn(we,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Qn(Y,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[L.colInfo.dimOffset,L.rowInfo.dimOffset]}return L;function qt(Rn,Er,Bn){var ur=te.length;function vn(rt,bt,gn){for(var On=rt.length;0<On--;){var $n=rt[On];$n<bt&&(bt=$n),gn<$n&&(gn=$n)}return{min:bt,max:gn}}te.push(Bn),Bn=vn(Rn,1,0),Rn=Math.max(Math.floor(9*Bn.min-.5),0);for(var er=Math.min(Math.ceil(9*Bn.max+.5),9),Pn=Rn;Pn<er;++Pn)we[Pn].push(ur);Bn=vn(Er,1,0),Rn=Math.max(Math.floor(9*Bn.min-.5),0);for(var gt=Math.min(Math.ceil(9*Bn.max+.5),9),wt=Rn;wt<gt;++wt)Y[wt].push(ur)}function mn(Rn){return(Rn=255*Rn)<0?0:255<Rn?255:Rn}function Zn(Rn,Er,Bn,ur){qt([Rn,Bn],[Er,ur],{x:Rn,y:Er,cx:(Rn+Bn)/2,cy:(Er+ur)/2})}function An(Rn,Er,Bn,ur){return Math.abs(Bn-Rn)<1e-5&&Math.abs(ur-Er)<1e-5}function Qn(Rn,Er,Bn){for(var ur=Rn.length,vn=Er.findImage(ur),er=(Er=vn.index,0),Pn=0;Pn<ur;++Pn)er+=Rn[Pn].length;for(var gt=Bn.findImage(er),wt=0;wt<ur;++wt){var rt=Rn[wt],bt=rt.length,gn=gt.index;m(vn,gn>>7,127&gn,bt>>7,127&bt);for(var On=0;On<bt;++On){var $n=rt[On]+kt;m(gt,$n>>7,127&$n,0,0)}}return{cellImageInfo:gt,dimOffset:Er,dimImageInfo:vn}}}}]),E}();w.default.RendererGL.prototype._renderText=function(E,S,L,q,J){if(this._textFont&&"string"!=typeof this._textFont){if(!(J<=q)&&this._doFill){if(this._isOpenType()){E.push(),J=this._doStroke;var G=this.drawMode,V=(this._doStroke=!1,this.drawMode=I.TEXTURE,this._textFont.font),K=(K=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(V)),H=(L=this._textFont._handleAlignment(this,S,L,q),q=this._textSize/V.unitsPerEm,this.translate(L.x,L.y,0),this.scale(q,q,1),this.GL),te=(L=!this._defaultFontShader,this._getFontShader()),Y=(te.init(),te.bindShader(),L&&(te.setUniform("uGridImageSize",[64,64]),te.setUniform("uCellsImageSize",[64,64]),te.setUniform("uStrokeImageSize",[64,64]),te.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),we=(Y||((q=this._textGeom=new w.default.Geometry(1,1,function(){for(var Ft=0;Ft<=1;Ft++)for(var Wt=0;Wt<=1;Wt++)this.vertices.push(new w.default.Vector(Wt,Ft,0)),this.uvs.push(Wt,Ft)})).computeFaces().computeNormals(),Y=this.createBuffers("glyph",q)),!0);L=!1,q=void 0;try{for(var Se,oe=this.retainedMode.buffers.text[Symbol.iterator]();!(we=(Se=oe.next()).done);we=!0)Se.value._prepareBuffer(Y,te)}catch(Ft){L=!0,q=Ft}finally{try{we||null==oe.return||oe.return()}finally{if(L)throw q}}this._bindBuffer(Y.indexBuffer,H.ELEMENT_ARRAY_BUFFER),te.setUniform("uMaterialColor",this.curFillColor),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var ge=0,re=null,Q=V.stringToGlyphs(S),fe=!0,De=!1,it=void 0;try{for(var le,z=Q[Symbol.iterator]();!(fe=(le=z.next()).done);fe=!0){var ye,Ue,Je=le.value,vt=(re&&(ge+=V.getKerningValue(re,Je)),K.getGlyphInfo(Je));vt.uGlyphRect&&(ye=vt.rowInfo,Ue=vt.colInfo,te.setUniform("uSamplerStrokes",vt.strokeImageInfo.imageData),te.setUniform("uSamplerRowStrokes",ye.cellImageInfo.imageData),te.setUniform("uSamplerRows",ye.dimImageInfo.imageData),te.setUniform("uSamplerColStrokes",Ue.cellImageInfo.imageData),te.setUniform("uSamplerCols",Ue.dimImageInfo.imageData),te.setUniform("uGridOffset",vt.uGridOffset),te.setUniform("uGlyphRect",vt.uGlyphRect),te.setUniform("uGlyphOffset",ge),te.bindTextures(),H.drawElements(H.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),ge+=Je.advanceWidth,re=Je}}catch(Ft){De=!0,it=Ft}finally{try{fe||null==z.return||z.return()}finally{if(De)throw it}}}finally{te.unbindShader(),this._doStroke=J,this.drawMode=G,H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),E.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return E}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)},4023:(Ir,Un,Ge)=>{function F(d){this.mode=Rt.MODE_8BIT_BYTE,this.data=d,this.parsedData=[];for(var f=0,h=this.data.length;f<h;f++){var p=[],m=this.data.charCodeAt(f);m>65536?(p[0]=240|(1835008&m)>>>18,p[1]=128|(258048&m)>>>12,p[2]=128|(4032&m)>>>6,p[3]=128|63&m):m>2048?(p[0]=224|(61440&m)>>>12,p[1]=128|(4032&m)>>>6,p[2]=128|63&m):m>128?(p[0]=192|(1984&m)>>>6,p[1]=128|63&m):p[0]=m,this.parsedData.push(p)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function j(d,f){this.typeNumber=d,this.errorCorrectLevel=f,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}F.prototype={getLength:function(d){return this.parsedData.length},write:function(d){for(var f=0,h=this.parsedData.length;f<h;f++)d.put(this.parsedData[f],8)}},j.prototype={addData:function(d){var f=new F(d);this.dataList.push(f),this.dataCache=null},isDark:function(d,f){if(d<0||this.moduleCount<=d||f<0||this.moduleCount<=f)throw new Error(d+","+f);return this.modules[d][f]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(d,f){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++){this.modules[h]=new Array(this.moduleCount);for(var p=0;p<this.moduleCount;p++)this.modules[h][p]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(d,f),this.typeNumber>=7&&this.setupTypeNumber(d),null==this.dataCache&&(this.dataCache=j.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,f)},setupPositionProbePattern:function(d,f){for(var h=-1;h<=7;h++)if(!(d+h<=-1||this.moduleCount<=d+h))for(var p=-1;p<=7;p++)f+p<=-1||this.moduleCount<=f+p||(this.modules[d+h][f+p]=0<=h&&h<=6&&(0==p||6==p)||0<=p&&p<=6&&(0==h||6==h)||2<=h&&h<=4&&2<=p&&p<=4)},getBestMaskPattern:function(){for(var d=0,f=0,h=0;h<8;h++){this.makeImpl(!0,h);var p=be.getLostPoint(this);(0==h||d>p)&&(d=p,f=h)}return f},createMovieClip:function(d,f,h){var p=d.createEmptyMovieClip(f,h);this.make();for(var g=0;g<this.modules.length;g++)for(var x=1*g,E=0;E<this.modules[g].length;E++){var S=1*E;this.modules[g][E]&&(p.beginFill(0,100),p.moveTo(S,x),p.lineTo(S+1,x),p.lineTo(S+1,x+1),p.lineTo(S,x+1),p.endFill())}return p},setupTimingPattern:function(){for(var d=8;d<this.moduleCount-8;d++)null==this.modules[d][6]&&(this.modules[d][6]=d%2==0);for(var f=8;f<this.moduleCount-8;f++)null==this.modules[6][f]&&(this.modules[6][f]=f%2==0)},setupPositionAdjustPattern:function(){for(var d=be.getPatternPosition(this.typeNumber),f=0;f<d.length;f++)for(var h=0;h<d.length;h++){var p=d[f],m=d[h];if(null==this.modules[p][m])for(var g=-2;g<=2;g++)for(var x=-2;x<=2;x++)this.modules[p+g][m+x]=-2==g||2==g||-2==x||2==x||0==g&&0==x}},setupTypeNumber:function(d){for(var f=be.getBCHTypeNumber(this.typeNumber),h=0;h<18;h++){var p=!d&&1==(f>>h&1);this.modules[Math.floor(h/3)][h%3+this.moduleCount-8-3]=p}for(h=0;h<18;h++)p=!d&&1==(f>>h&1),this.modules[h%3+this.moduleCount-8-3][Math.floor(h/3)]=p},setupTypeInfo:function(d,f){for(var p=be.getBCHTypeInfo(this.errorCorrectLevel<<3|f),m=0;m<15;m++){var g=!d&&1==(p>>m&1);m<6?this.modules[m][8]=g:m<8?this.modules[m+1][8]=g:this.modules[this.moduleCount-15+m][8]=g}for(m=0;m<15;m++)g=!d&&1==(p>>m&1),m<8?this.modules[8][this.moduleCount-m-1]=g:m<9?this.modules[8][15-m-1+1]=g:this.modules[8][15-m-1]=g;this.modules[this.moduleCount-8][8]=!d},mapData:function(d,f){for(var h=-1,p=this.moduleCount-1,m=7,g=0,x=this.moduleCount-1;x>0;x-=2)for(6==x&&x--;;){for(var E=0;E<2;E++)if(null==this.modules[p][x-E]){var S=!1;g<d.length&&(S=1==(d[g]>>>m&1)),be.getMask(f,p,x-E)&&(S=!S),this.modules[p][x-E]=S,-1==--m&&(g++,m=7)}if((p+=h)<0||this.moduleCount<=p){p-=h,h=-h;break}}}},j.PAD0=236,j.PAD1=17,j.createData=function(d,f,h){for(var p=b.getRSBlocks(d,f),m=new w,g=0;g<h.length;g++){var x=h[g];m.put(x.mode,4),m.put(x.getLength(),be.getLengthInBits(x.mode,d)),x.write(m)}var E=0;for(g=0;g<p.length;g++)E+=p[g].dataCount;if(m.getLengthInBits()>8*E)throw new Error("code length overflow. ("+m.getLengthInBits()+">"+8*E+")");for(m.getLengthInBits()+4<=8*E&&m.put(0,4);m.getLengthInBits()%8!=0;)m.putBit(!1);for(;!(m.getLengthInBits()>=8*E||(m.put(j.PAD0,8),m.getLengthInBits()>=8*E));)m.put(j.PAD1,8);return j.createBytes(m,p)},j.createBytes=function(d,f){for(var h=0,p=0,m=0,g=new Array(f.length),x=new Array(f.length),E=0;E<f.length;E++){var S=f[E].dataCount,L=f[E].totalCount-S;p=Math.max(p,S),m=Math.max(m,L),g[E]=new Array(S);for(var q=0;q<g[E].length;q++)g[E][q]=255&d.buffer[q+h];h+=S;var J=be.getErrorCorrectPolynomial(L),V=new C(g[E],J.getLength()-1).mod(J);for(x[E]=new Array(J.getLength()-1),q=0;q<x[E].length;q++){var K=q+V.getLength()-x[E].length;x[E][q]=K>=0?V.get(K):0}}var H=0;for(q=0;q<f.length;q++)H+=f[q].totalCount;var te=new Array(H),Y=0;for(q=0;q<p;q++)for(E=0;E<f.length;E++)q<g[E].length&&(te[Y++]=g[E][q]);for(q=0;q<m;q++)for(E=0;E<f.length;E++)q<x[E].length&&(te[Y++]=x[E][q]);return te};for(var Rt={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},rn={L:1,M:0,Q:3,H:2},l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},be={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(d){for(var f=d<<10;be.getBCHDigit(f)-be.getBCHDigit(be.G15)>=0;)f^=be.G15<<be.getBCHDigit(f)-be.getBCHDigit(be.G15);return(d<<10|f)^be.G15_MASK},getBCHTypeNumber:function(d){for(var f=d<<12;be.getBCHDigit(f)-be.getBCHDigit(be.G18)>=0;)f^=be.G18<<be.getBCHDigit(f)-be.getBCHDigit(be.G18);return d<<12|f},getBCHDigit:function(d){for(var f=0;0!=d;)f++,d>>>=1;return f},getPatternPosition:function(d){return be.PATTERN_POSITION_TABLE[d-1]},getMask:function(d,f,h){switch(d){case l.PATTERN000:return(f+h)%2==0;case l.PATTERN001:return f%2==0;case l.PATTERN010:return h%3==0;case l.PATTERN011:return(f+h)%3==0;case l.PATTERN100:return(Math.floor(f/2)+Math.floor(h/3))%2==0;case l.PATTERN101:return f*h%2+f*h%3==0;case l.PATTERN110:return(f*h%2+f*h%3)%2==0;case l.PATTERN111:return(f*h%3+(f+h)%2)%2==0;default:throw new Error("bad maskPattern:"+d)}},getErrorCorrectPolynomial:function(d){for(var f=new C([1],0),h=0;h<d;h++)f=f.multiply(new C([1,Z.gexp(h)],0));return f},getLengthInBits:function(d,f){if(1<=f&&f<10)switch(d){case Rt.MODE_NUMBER:return 10;case Rt.MODE_ALPHA_NUM:return 9;case Rt.MODE_8BIT_BYTE:case Rt.MODE_KANJI:return 8;default:throw new Error("mode:"+d)}else if(f<27)switch(d){case Rt.MODE_NUMBER:return 12;case Rt.MODE_ALPHA_NUM:return 11;case Rt.MODE_8BIT_BYTE:return 16;case Rt.MODE_KANJI:return 10;default:throw new Error("mode:"+d)}else{if(!(f<41))throw new Error("type:"+f);switch(d){case Rt.MODE_NUMBER:return 14;case Rt.MODE_ALPHA_NUM:return 13;case Rt.MODE_8BIT_BYTE:return 16;case Rt.MODE_KANJI:return 12;default:throw new Error("mode:"+d)}}},getLostPoint:function(d){for(var f=d.getModuleCount(),h=0,p=0;p<f;p++)for(var m=0;m<f;m++){for(var g=0,x=d.isDark(p,m),E=-1;E<=1;E++)if(!(p+E<0||f<=p+E))for(var S=-1;S<=1;S++)m+S<0||f<=m+S||0==E&&0==S||x==d.isDark(p+E,m+S)&&g++;g>5&&(h+=3+g-5)}for(p=0;p<f-1;p++)for(m=0;m<f-1;m++){var L=0;d.isDark(p,m)&&L++,d.isDark(p+1,m)&&L++,d.isDark(p,m+1)&&L++,d.isDark(p+1,m+1)&&L++,(0==L||4==L)&&(h+=3)}for(p=0;p<f;p++)for(m=0;m<f-6;m++)d.isDark(p,m)&&!d.isDark(p,m+1)&&d.isDark(p,m+2)&&d.isDark(p,m+3)&&d.isDark(p,m+4)&&!d.isDark(p,m+5)&&d.isDark(p,m+6)&&(h+=40);for(m=0;m<f;m++)for(p=0;p<f-6;p++)d.isDark(p,m)&&!d.isDark(p+1,m)&&d.isDark(p+2,m)&&d.isDark(p+3,m)&&d.isDark(p+4,m)&&!d.isDark(p+5,m)&&d.isDark(p+6,m)&&(h+=40);var q=0;for(m=0;m<f;m++)for(p=0;p<f;p++)d.isDark(p,m)&&q++;return h+Math.abs(100*q/f/f-50)/5*10}},Z={glog:function(d){if(d<1)throw new Error("glog("+d+")");return Z.LOG_TABLE[d]},gexp:function(d){for(;d<0;)d+=255;for(;d>=256;)d-=255;return Z.EXP_TABLE[d]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},M=0;M<8;M++)Z.EXP_TABLE[M]=1<<M;for(M=8;M<256;M++)Z.EXP_TABLE[M]=Z.EXP_TABLE[M-4]^Z.EXP_TABLE[M-5]^Z.EXP_TABLE[M-6]^Z.EXP_TABLE[M-8];for(M=0;M<255;M++)Z.LOG_TABLE[Z.EXP_TABLE[M]]=M;function C(d,f){if(null==d.length)throw new Error(d.length+"/"+f);for(var h=0;h<d.length&&0==d[h];)h++;this.num=new Array(d.length-h+f);for(var p=0;p<d.length-h;p++)this.num[p]=d[p+h]}function b(d,f){this.totalCount=d,this.dataCount=f}function w(){this.buffer=[],this.length=0}C.prototype={get:function(d){return this.num[d]},getLength:function(){return this.num.length},multiply:function(d){for(var f=new Array(this.getLength()+d.getLength()-1),h=0;h<this.getLength();h++)for(var p=0;p<d.getLength();p++)f[h+p]^=Z.gexp(Z.glog(this.get(h))+Z.glog(d.get(p)));return new C(f,0)},mod:function(d){if(this.getLength()-d.getLength()<0)return this;for(var f=Z.glog(this.get(0))-Z.glog(d.get(0)),h=new Array(this.getLength()),p=0;p<this.getLength();p++)h[p]=this.get(p);for(p=0;p<d.getLength();p++)h[p]^=Z.gexp(Z.glog(d.get(p))+f);return new C(h,0).mod(d)}},b.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b.getRSBlocks=function(d,f){var h=b.getRsBlockTable(d,f);if(null==h)throw new Error("bad rs block @ typeNumber:"+d+"/errorCorrectLevel:"+f);for(var p=h.length/3,m=[],g=0;g<p;g++)for(var x=h[3*g+0],E=h[3*g+1],S=h[3*g+2],L=0;L<x;L++)m.push(new b(E,S));return m},b.getRsBlockTable=function(d,f){switch(f){case rn.L:return b.RS_BLOCK_TABLE[4*(d-1)+0];case rn.M:return b.RS_BLOCK_TABLE[4*(d-1)+1];case rn.Q:return b.RS_BLOCK_TABLE[4*(d-1)+2];case rn.H:return b.RS_BLOCK_TABLE[4*(d-1)+3];default:return}},w.prototype={get:function(d){var f=Math.floor(d/8);return 1==(this.buffer[f]>>>7-d%8&1)},put:function(d,f){for(var h=0;h<f;h++)this.putBit(1==(d>>>f-h-1&1))},getLengthInBits:function(){return this.length},putBit:function(d){var f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0),d&&(this.buffer[f]|=128>>>this.length%8),this.length++}};var I=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function D(d){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof d&&(d={content:d}),d)for(var h in d)this.options[h]=d[h];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var x=this.options.content,E=function m(L,q){for(var J=function g(L){var q=encodeURI(L).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return q.length+(q.length!=L?3:0)}(L),G=1,V=0,K=0,H=I.length;K<=H;K++){var te=I[K];if(!te)throw new Error("Content too long: expected "+V+" but got "+J);switch(q){case"L":V=te[0];break;case"M":V=te[1];break;case"Q":V=te[2];break;case"H":V=te[3];break;default:throw new Error("Unknwon error correction level: "+q)}if(J<=V)break;G++}if(G>I.length)throw new Error("Content too long");return G}(x,this.options.ecl),S=function p(L){switch(L){case"L":return rn.L;case"M":return rn.M;case"Q":return rn.Q;case"H":return rn.H;default:throw new Error("Unknwon error correction level: "+L)}}(this.options.ecl);this.qrcode=new j(E,S),this.qrcode.addData(x),this.qrcode.make()}D.prototype.svg=function(d){var f=this.options||{},h=this.qrcode.modules;typeof d>"u"&&(d={container:f.container||"svg"});for(var p=!(typeof f.pretty<"u"&&!f.pretty),m=p?"  ":"",g=p?"\r\n":"",x=f.width,E=f.height,S=h.length,L=x/(S+2*f.padding),q=E/(S+2*f.padding),J=typeof f.join<"u"&&!!f.join,G=typeof f.swap<"u"&&!!f.swap,V=!(typeof f.xmlDeclaration<"u"&&!f.xmlDeclaration),K=typeof f.predefined<"u"&&!!f.predefined,H=K?m+'<defs><path id="qrmodule" d="M0 0 h'+q+" v"+L+' H0 z" style="fill:'+f.color+';shape-rendering:crispEdges;" /></defs>'+g:"",te=m+'<rect x="0" y="0" width="'+x+'" height="'+E+'" style="fill:'+f.background+';shape-rendering:crispEdges;"/>'+g,Y="",we="",Se=0;Se<S;Se++)for(var oe=0;oe<S;oe++)if(h[oe][Se]){var re=oe*L+f.padding*L,Q=Se*q+f.padding*q;if(G){var fe=re;re=Q,Q=fe}if(J){var De=L+re,it=q+Q;re=Number.isInteger(re)?Number(re):re.toFixed(2),Q=Number.isInteger(Q)?Number(Q):Q.toFixed(2),De=Number.isInteger(De)?Number(De):De.toFixed(2),we+="M"+re+","+Q+" V"+(it=Number.isInteger(it)?Number(it):it.toFixed(2))+" H"+De+" V"+Q+" H"+re+" Z "}else Y+=K?m+'<use x="'+re.toString()+'" y="'+Q.toString()+'" href="#qrmodule" />'+g:m+'<rect x="'+re.toString()+'" y="'+Q.toString()+'" width="'+L+'" height="'+q+'" style="fill:'+f.color+';shape-rendering:crispEdges;"/>'+g}J&&(Y=m+'<path x="0" y="0" style="fill:'+f.color+';shape-rendering:crispEdges;" d="'+we+'" />');var le="";switch(d.container){case"svg":V&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+x+'" height="'+E+'">'+g,le+=H+te+Y,le+="</svg>";break;case"svg-viewbox":V&&(le+='<?xml version="1.0" standalone="yes"?>'+g),le+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+x+" "+E+'">'+g,le+=H+te+Y,le+="</svg>";break;case"g":le+='<g width="'+x+'" height="'+E+'">'+g,le+=H+te+Y,le+="</g>";break;default:le+=(H+te+Y).replace(/^\s+/,"")}return le},D.prototype.save=function(d,f){var h=this.svg();"function"!=typeof f&&(f=function(m,g){});try{Ge(Object(function(){var g=new Error("Cannot find module 'fs'");throw g.code="MODULE_NOT_FOUND",g}())).writeFile(d,h,f)}catch(m){f(m)}},Ir.exports=D},4412:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{t:()=>j});var F=Ge(1413);class j extends F.B{constructor(rn){super(),this._value=rn}get value(){return this.getValue()}_subscribe(rn){const l=super._subscribe(rn);return!l.closed&&rn.next(this._value),l}getValue(){const{hasError:rn,thrownError:l,_value:be}=this;if(rn)throw l;return this._throwIfClosed(),be}next(rn){super.next(this._value=rn)}}},1985:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{c:()=>M});var F=Ge(7707),j=Ge(8359),Rt=Ge(3494),rn=Ge(1203),l=Ge(1026),be=Ge(8071),Z=Ge(9786);let M=(()=>{class I{constructor(d){d&&(this._subscribe=d)}lift(d){const f=new I;return f.source=this,f.operator=d,f}subscribe(d,f,h){const p=function w(I){return I&&I instanceof F.vU||function b(I){return I&&(0,be.T)(I.next)&&(0,be.T)(I.error)&&(0,be.T)(I.complete)}(I)&&(0,j.Uv)(I)}(d)?d:new F.Ms(d,f,h);return(0,Z.Y)(()=>{const{operator:m,source:g}=this;p.add(m?m.call(p,g):g?this._subscribe(p):this._trySubscribe(p))}),p}_trySubscribe(d){try{return this._subscribe(d)}catch(f){d.error(f)}}forEach(d,f){return new(f=C(f))((h,p)=>{const m=new F.Ms({next:g=>{try{d(g)}catch(x){p(x),m.unsubscribe()}},error:p,complete:h});this.subscribe(m)})}_subscribe(d){var f;return null===(f=this.source)||void 0===f?void 0:f.subscribe(d)}[Rt.s](){return this}pipe(...d){return(0,rn.m)(d)(this)}toPromise(d){return new(d=C(d))((f,h)=>{let p;this.subscribe(m=>p=m,m=>h(m),()=>f(p))})}}return I.create=D=>new I(D),I})();function C(I){var D;return null!==(D=null!=I?I:l.$.Promise)&&void 0!==D?D:Promise}},1413:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B:()=>Z});var F=Ge(1985),j=Ge(8359);const rn=(0,Ge(1853).L)(C=>function(){C(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var l=Ge(7908),be=Ge(9786);let Z=(()=>{class C extends F.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(w){const I=new M(this,this);return I.operator=w,I}_throwIfClosed(){if(this.closed)throw new rn}next(w){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const I of this.currentObservers)I.next(w)}})}error(w){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=w;const{observers:I}=this;for(;I.length;)I.shift().error(w)}})}complete(){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:w}=this;for(;w.length;)w.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var w;return(null===(w=this.observers)||void 0===w?void 0:w.length)>0}_trySubscribe(w){return this._throwIfClosed(),super._trySubscribe(w)}_subscribe(w){return this._throwIfClosed(),this._checkFinalizedStatuses(w),this._innerSubscribe(w)}_innerSubscribe(w){const{hasError:I,isStopped:D,observers:d}=this;return I||D?j.Kn:(this.currentObservers=null,d.push(w),new j.yU(()=>{this.currentObservers=null,(0,l.o)(d,w)}))}_checkFinalizedStatuses(w){const{hasError:I,thrownError:D,isStopped:d}=this;I?w.error(D):d&&w.complete()}asObservable(){const w=new F.c;return w.source=this,w}}return C.create=(b,w)=>new M(b,w),C})();class M extends Z{constructor(b,w){super(),this.destination=b,this.source=w}next(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.next)||void 0===I||I.call(w,b)}error(b){var w,I;null===(I=null===(w=this.destination)||void 0===w?void 0:w.error)||void 0===I||I.call(w,b)}complete(){var b,w;null===(w=null===(b=this.destination)||void 0===b?void 0:b.complete)||void 0===w||w.call(b)}_subscribe(b){var w,I;return null!==(I=null===(w=this.source)||void 0===w?void 0:w.subscribe(b))&&void 0!==I?I:j.Kn}}},7707:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Ms:()=>h,vU:()=>I});var F=Ge(8071),j=Ge(8359),Rt=Ge(1026),rn=Ge(5334),l=Ge(5343);const be=C("C",void 0,void 0);function C(E,S,L){return{kind:E,value:S,error:L}}var b=Ge(9270),w=Ge(9786);class I extends j.yU{constructor(S){super(),this.isStopped=!1,S?(this.destination=S,(0,j.Uv)(S)&&S.add(this)):this.destination=x}static create(S,L,q){return new h(S,L,q)}next(S){this.isStopped?g(function M(E){return C("N",E,void 0)}(S),this):this._next(S)}error(S){this.isStopped?g(function Z(E){return C("E",void 0,E)}(S),this):(this.isStopped=!0,this._error(S))}complete(){this.isStopped?g(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(S){this.destination.next(S)}_error(S){try{this.destination.error(S)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const D=Function.prototype.bind;function d(E,S){return D.call(E,S)}class f{constructor(S){this.partialObserver=S}next(S){const{partialObserver:L}=this;if(L.next)try{L.next(S)}catch(q){p(q)}}error(S){const{partialObserver:L}=this;if(L.error)try{L.error(S)}catch(q){p(q)}else p(S)}complete(){const{partialObserver:S}=this;if(S.complete)try{S.complete()}catch(L){p(L)}}}class h extends I{constructor(S,L,q){let J;if(super(),(0,F.T)(S)||!S)J={next:null!=S?S:void 0,error:null!=L?L:void 0,complete:null!=q?q:void 0};else{let G;this&&Rt.$.useDeprecatedNextContext?(G=Object.create(S),G.unsubscribe=()=>this.unsubscribe(),J={next:S.next&&d(S.next,G),error:S.error&&d(S.error,G),complete:S.complete&&d(S.complete,G)}):J=S}this.destination=new f(J)}}function p(E){Rt.$.useDeprecatedSynchronousErrorHandling?(0,w.l)(E):(0,rn.m)(E)}function g(E,S){const{onStoppedNotification:L}=Rt.$;L&&b.f.setTimeout(()=>L(E,S))}const x={closed:!0,next:l.l,error:function m(E){throw E},complete:l.l}},8359:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Kn:()=>be,yU:()=>l,Uv:()=>Z});var F=Ge(8071);const Rt=(0,Ge(1853).L)(C=>function(w){C(this),this.message=w?`${w.length} errors occurred during unsubscription:\n${w.map((I,D)=>`${D+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=w});var rn=Ge(7908);class l{constructor(b){this.initialTeardown=b,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let b;if(!this.closed){this.closed=!0;const{_parentage:w}=this;if(w)if(this._parentage=null,Array.isArray(w))for(const d of w)d.remove(this);else w.remove(this);const{initialTeardown:I}=this;if((0,F.T)(I))try{I()}catch(d){b=d instanceof Rt?d.errors:[d]}const{_finalizers:D}=this;if(D){this._finalizers=null;for(const d of D)try{M(d)}catch(f){b=null!=b?b:[],f instanceof Rt?b=[...b,...f.errors]:b.push(f)}}if(b)throw new Rt(b)}}add(b){var w;if(b&&b!==this)if(this.closed)M(b);else{if(b instanceof l){if(b.closed||b._hasParent(this))return;b._addParent(this)}(this._finalizers=null!==(w=this._finalizers)&&void 0!==w?w:[]).push(b)}}_hasParent(b){const{_parentage:w}=this;return w===b||Array.isArray(w)&&w.includes(b)}_addParent(b){const{_parentage:w}=this;this._parentage=Array.isArray(w)?(w.push(b),w):w?[w,b]:b}_removeParent(b){const{_parentage:w}=this;w===b?this._parentage=null:Array.isArray(w)&&(0,rn.o)(w,b)}remove(b){const{_finalizers:w}=this;w&&(0,rn.o)(w,b),b instanceof l&&b._removeParent(this)}}l.EMPTY=(()=>{const C=new l;return C.closed=!0,C})();const be=l.EMPTY;function Z(C){return C instanceof l||C&&"closed"in C&&(0,F.T)(C.remove)&&(0,F.T)(C.add)&&(0,F.T)(C.unsubscribe)}function M(C){(0,F.T)(C)?C():C.unsubscribe()}},1026:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{$:()=>F});const F={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{G:()=>be});var F=Ge(1985),j=Ge(8359),Rt=Ge(9898),rn=Ge(4360),l=Ge(9974);class be extends F.c{constructor(M,C){super(),this.source=M,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,l.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,null==M||M.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new j.yU;const C=this.getSubject();M.add(this.source.subscribe((0,rn._)(C,void 0,()=>{this._teardown(),C.complete()},b=>{this._teardown(),C.error(b)},()=>this._teardown()))),M.closed&&(this._connection=null,M=j.yU.EMPTY)}return M}refCount(){return(0,Rt.B)()(this)}}},4572:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{z:()=>b});var F=Ge(1985),j=Ge(3073),Rt=Ge(6648),rn=Ge(3669),l=Ge(6450),be=Ge(9326),Z=Ge(8496),M=Ge(4360),C=Ge(5225);function b(...D){const d=(0,be.lI)(D),f=(0,be.ms)(D),{args:h,keys:p}=(0,j.D)(D);if(0===h.length)return(0,Rt.H)([],d);const m=new F.c(function w(D,d,f=rn.D){return h=>{I(d,()=>{const{length:p}=D,m=new Array(p);let g=p,x=p;for(let E=0;E<p;E++)I(d,()=>{const S=(0,Rt.H)(D[E],d);let L=!1;S.subscribe((0,M._)(h,q=>{m[E]=q,L||(L=!0,x--),x||h.next(f(m.slice()))},()=>{--g||h.complete()}))},h)},h)}}(h,d,p?g=>(0,Z.e)(p,g):rn.D));return f?m.pipe((0,l.I)(f)):m}function I(D,d,f){D?(0,C.N)(f,D,d):d()}},8793:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{x:()=>l});var F=Ge(6365),Rt=Ge(9326),rn=Ge(6648);function l(...be){return function j(){return(0,F.U)(1)}()((0,rn.H)(be,(0,Rt.lI)(be)))}},9030:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{v:()=>Rt});var F=Ge(1985),j=Ge(8750);function Rt(rn){return new F.c(l=>{(0,j.Tg)(rn()).subscribe(l)})}},983:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{w:()=>j});const j=new(Ge(1985).c)(l=>l.complete())},6648:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{H:()=>q});var F=Ge(8750),j=Ge(5225),Rt=Ge(9974),rn=Ge(4360);function l(J,G=0){return(0,Rt.N)((V,K)=>{V.subscribe((0,rn._)(K,H=>(0,j.N)(K,J,()=>K.next(H),G),()=>(0,j.N)(K,J,()=>K.complete(),G),H=>(0,j.N)(K,J,()=>K.error(H),G)))})}function be(J,G=0){return(0,Rt.N)((V,K)=>{K.add(J.schedule(()=>V.subscribe(K),G))})}var C=Ge(1985),w=Ge(4761),I=Ge(8071);function d(J,G){if(!J)throw new Error("Iterable cannot be null");return new C.c(V=>{(0,j.N)(V,G,()=>{const K=J[Symbol.asyncIterator]();(0,j.N)(V,G,()=>{K.next().then(H=>{H.done?V.complete():V.next(H.value)})},0,!0)})})}var f=Ge(5055),h=Ge(7477),p=Ge(7441),m=Ge(5397),g=Ge(7953),x=Ge(591),E=Ge(5196);function q(J,G){return G?function L(J,G){if(null!=J){if((0,f.l)(J))return function Z(J,G){return(0,F.Tg)(J).pipe(be(G),l(G))}(J,G);if((0,p.X)(J))return function b(J,G){return new C.c(V=>{let K=0;return G.schedule(function(){K===J.length?V.complete():(V.next(J[K++]),V.closed||this.schedule())})})}(J,G);if((0,h.y)(J))return function M(J,G){return(0,F.Tg)(J).pipe(be(G),l(G))}(J,G);if((0,g.T)(J))return d(J,G);if((0,m.x)(J))return function D(J,G){return new C.c(V=>{let K;return(0,j.N)(V,G,()=>{K=J[w.l](),(0,j.N)(V,G,()=>{let H,te;try{({value:H,done:te}=K.next())}catch(Y){return void V.error(Y)}te?V.complete():V.next(H)},0,!0)}),()=>(0,I.T)(null==K?void 0:K.return)&&K.return()})}(J,G);if((0,E.U)(J))return function S(J,G){return d((0,E.C)(J),G)}(J,G)}throw(0,x.L)(J)}(J,G):(0,F.Tg)(J)}},3726:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{R:()=>b});var F=Ge(8750),j=Ge(1985),Rt=Ge(1397),rn=Ge(7441),l=Ge(8071),be=Ge(6450);const Z=["addListener","removeListener"],M=["addEventListener","removeEventListener"],C=["on","off"];function b(f,h,p,m){if((0,l.T)(p)&&(m=p,p=void 0),m)return b(f,h,p).pipe((0,be.I)(m));const[g,x]=function d(f){return(0,l.T)(f.addEventListener)&&(0,l.T)(f.removeEventListener)}(f)?M.map(E=>S=>f[E](h,S,p)):function I(f){return(0,l.T)(f.addListener)&&(0,l.T)(f.removeListener)}(f)?Z.map(w(f,h)):function D(f){return(0,l.T)(f.on)&&(0,l.T)(f.off)}(f)?C.map(w(f,h)):[];if(!g&&(0,rn.X)(f))return(0,Rt.Z)(E=>b(E,h,p))((0,F.Tg)(f));if(!g)throw new TypeError("Invalid event target");return new j.c(E=>{const S=(...L)=>E.next(1<L.length?L:L[0]);return g(S),()=>x(S)})}function w(f,h){return p=>m=>f[p](h,m)}},8750:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Tg:()=>D});var F=Ge(1635),j=Ge(7441),Rt=Ge(7477),rn=Ge(1985),l=Ge(5055),be=Ge(7953),Z=Ge(591),M=Ge(5397),C=Ge(5196),b=Ge(8071),w=Ge(5334),I=Ge(3494);function D(E){if(E instanceof rn.c)return E;if(null!=E){if((0,l.l)(E))return function d(E){return new rn.c(S=>{const L=E[I.s]();if((0,b.T)(L.subscribe))return L.subscribe(S);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(E);if((0,j.X)(E))return function f(E){return new rn.c(S=>{for(let L=0;L<E.length&&!S.closed;L++)S.next(E[L]);S.complete()})}(E);if((0,Rt.y)(E))return function h(E){return new rn.c(S=>{E.then(L=>{S.closed||(S.next(L),S.complete())},L=>S.error(L)).then(null,w.m)})}(E);if((0,be.T)(E))return m(E);if((0,M.x)(E))return function p(E){return new rn.c(S=>{for(const L of E)if(S.next(L),S.closed)return;S.complete()})}(E);if((0,C.U)(E))return function g(E){return m((0,C.C)(E))}(E)}throw(0,Z.L)(E)}function m(E){return new rn.c(S=>{(function x(E,S){var L,q,J,G;return(0,F.sH)(this,void 0,void 0,function*(){try{for(L=(0,F.xN)(E);!(q=yield L.next()).done;)if(S.next(q.value),S.closed)return}catch(V){J={error:V}}finally{try{q&&!q.done&&(G=L.return)&&(yield G.call(L))}finally{if(J)throw J.error}}S.complete()})})(E,S).catch(L=>S.error(L))})}},7673:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{of:()=>Rt});var F=Ge(9326),j=Ge(6648);function Rt(...rn){const l=(0,F.lI)(rn);return(0,j.H)(rn,l)}},8810:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{$:()=>Rt});var F=Ge(1985),j=Ge(8071);function Rt(rn,l){const be=(0,j.T)(rn)?rn:()=>rn,Z=M=>M.error(be());return new F.c(l?M=>l.schedule(Z,0,M):Z)}},4360:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{_:()=>j});var F=Ge(7707);function j(rn,l,be,Z,M){return new Rt(rn,l,be,Z,M)}class Rt extends F.vU{constructor(l,be,Z,M,C,b){super(l),this.onFinalize=C,this.shouldUnsubscribe=b,this._next=be?function(w){try{be(w)}catch(I){l.error(I)}}:super._next,this._error=M?function(w){try{M(w)}catch(I){l.error(I)}finally{this.unsubscribe()}}:super._error,this._complete=Z?function(){try{Z()}catch(w){l.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}}}},5964:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{p:()=>Rt});var F=Ge(9974),j=Ge(4360);function Rt(rn,l){return(0,F.N)((be,Z)=>{let M=0;be.subscribe((0,j._)(Z,C=>rn.call(l,C,M++)&&Z.next(C)))})}},6354:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{T:()=>Rt});var F=Ge(9974),j=Ge(4360);function Rt(rn,l){return(0,F.N)((be,Z)=>{let M=0;be.subscribe((0,j._)(Z,C=>{Z.next(rn.call(l,C,M++))}))})}},3703:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{u:()=>j});var F=Ge(6354);function j(Rt){return(0,F.T)(()=>Rt)}},6365:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{U:()=>Rt});var F=Ge(1397),j=Ge(3669);function Rt(rn=1/0){return(0,F.Z)(j.D,rn)}},1397:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Z:()=>M});var F=Ge(6354),j=Ge(8750),Rt=Ge(9974),rn=Ge(5225),l=Ge(4360),Z=Ge(8071);function M(C,b,w=1/0){return(0,Z.T)(b)?M((I,D)=>(0,F.T)((d,f)=>b(I,d,D,f))((0,j.Tg)(C(I,D))),w):("number"==typeof b&&(w=b),(0,Rt.N)((I,D)=>function be(C,b,w,I,D,d,f,h){const p=[];let m=0,g=0,x=!1;const E=()=>{x&&!p.length&&!m&&b.complete()},S=q=>m<I?L(q):p.push(q),L=q=>{d&&b.next(q),m++;let J=!1;(0,j.Tg)(w(q,g++)).subscribe((0,l._)(b,G=>{null==D||D(G),d?S(G):b.next(G)},()=>{J=!0},void 0,()=>{if(J)try{for(m--;p.length&&m<I;){const G=p.shift();f?(0,rn.N)(b,f,()=>L(G)):L(G)}E()}catch(G){b.error(G)}}))};return C.subscribe((0,l._)(b,S,()=>{x=!0,E()})),()=>{null==h||h()}}(I,D,C,w)))}},9898:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B:()=>Rt});var F=Ge(9974),j=Ge(4360);function Rt(){return(0,F.N)((rn,l)=>{let be=null;rn._refCount++;const Z=(0,j._)(l,void 0,void 0,void 0,()=>{if(!rn||rn._refCount<=0||0<--rn._refCount)return void(be=null);const M=rn._connection,C=be;be=null,M&&(!C||M===C)&&M.unsubscribe(),l.unsubscribe()});rn.subscribe(Z),Z.closed||(be=rn.connect())})}},5558:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{n:()=>rn});var F=Ge(8750),j=Ge(9974),Rt=Ge(4360);function rn(l,be){return(0,j.N)((Z,M)=>{let C=null,b=0,w=!1;const I=()=>w&&!C&&M.complete();Z.subscribe((0,Rt._)(M,D=>{null==C||C.unsubscribe();let d=0;const f=b++;(0,F.Tg)(l(D,f)).subscribe(C=(0,Rt._)(M,h=>M.next(be?be(D,h,f,d++):h),()=>{C=null,I()}))},()=>{w=!0,I()}))})}},6697:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{s:()=>rn});var F=Ge(983),j=Ge(9974),Rt=Ge(4360);function rn(l){return l<=0?()=>F.w:(0,j.N)((be,Z)=>{let M=0;be.subscribe((0,Rt._)(Z,C=>{++M<=l&&(Z.next(C),l<=M&&Z.complete())}))})}},8141:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{M:()=>l});var F=Ge(8071),j=Ge(9974),Rt=Ge(4360),rn=Ge(3669);function l(be,Z,M){const C=(0,F.T)(be)||Z||M?{next:be,error:Z,complete:M}:be;return C?(0,j.N)((b,w)=>{var I;null===(I=C.subscribe)||void 0===I||I.call(C);let D=!0;b.subscribe((0,Rt._)(w,d=>{var f;null===(f=C.next)||void 0===f||f.call(C,d),w.next(d)},()=>{var d;D=!1,null===(d=C.complete)||void 0===d||d.call(C),w.complete()},d=>{var f;D=!1,null===(f=C.error)||void 0===f||f.call(C,d),w.error(d)},()=>{var d,f;D&&(null===(d=C.unsubscribe)||void 0===d||d.call(C)),null===(f=C.finalize)||void 0===f||f.call(C)}))}):rn.D}},9270:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{f:()=>F});const F={setTimeout(j,Rt,...rn){const{delegate:l}=F;return null!=l&&l.setTimeout?l.setTimeout(j,Rt,...rn):setTimeout(j,Rt,...rn)},clearTimeout(j){const{delegate:Rt}=F;return((null==Rt?void 0:Rt.clearTimeout)||clearTimeout)(j)},delegate:void 0}},4761:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{l:()=>j});const j=function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{s:()=>F});const F="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{R0:()=>be,lI:()=>l,ms:()=>rn});var F=Ge(8071),j=Ge(9470);function Rt(Z){return Z[Z.length-1]}function rn(Z){return(0,F.T)(Rt(Z))?Z.pop():void 0}function l(Z){return(0,j.m)(Rt(Z))?Z.pop():void 0}function be(Z,M){return"number"==typeof Rt(Z)?Z.pop():M}},3073:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{D:()=>l});const{isArray:F}=Array,{getPrototypeOf:j,prototype:Rt,keys:rn}=Object;function l(Z){if(1===Z.length){const M=Z[0];if(F(M))return{args:M,keys:null};if(function be(Z){return Z&&"object"==typeof Z&&j(Z)===Rt}(M)){const C=rn(M);return{args:C.map(b=>M[b]),keys:C}}}return{args:Z,keys:null}}},7908:(Ir,Un,Ge)=>{"use strict";function F(j,Rt){if(j){const rn=j.indexOf(Rt);0<=rn&&j.splice(rn,1)}}Ge.d(Un,{o:()=>F})},1853:(Ir,Un,Ge)=>{"use strict";function F(j){const rn=j(l=>{Error.call(l),l.stack=(new Error).stack});return rn.prototype=Object.create(Error.prototype),rn.prototype.constructor=rn,rn}Ge.d(Un,{L:()=>F})},8496:(Ir,Un,Ge)=>{"use strict";function F(j,Rt){return j.reduce((rn,l,be)=>(rn[l]=Rt[be],rn),{})}Ge.d(Un,{e:()=>F})},9786:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Y:()=>Rt,l:()=>rn});var F=Ge(1026);let j=null;function Rt(l){if(F.$.useDeprecatedSynchronousErrorHandling){const be=!j;if(be&&(j={errorThrown:!1,error:null}),l(),be){const{errorThrown:Z,error:M}=j;if(j=null,Z)throw M}}else l()}function rn(l){F.$.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=l)}},5225:(Ir,Un,Ge)=>{"use strict";function F(j,Rt,rn,l=0,be=!1){const Z=Rt.schedule(function(){rn(),be?j.add(this.schedule(null,l)):this.unsubscribe()},l);if(j.add(Z),!be)return Z}Ge.d(Un,{N:()=>F})},3669:(Ir,Un,Ge)=>{"use strict";function F(j){return j}Ge.d(Un,{D:()=>F})},7441:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{X:()=>F});const F=j=>j&&"number"==typeof j.length&&"function"!=typeof j},7953:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{T:()=>j});var F=Ge(8071);function j(Rt){return Symbol.asyncIterator&&(0,F.T)(null==Rt?void 0:Rt[Symbol.asyncIterator])}},8071:(Ir,Un,Ge)=>{"use strict";function F(j){return"function"==typeof j}Ge.d(Un,{T:()=>F})},5055:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{l:()=>Rt});var F=Ge(3494),j=Ge(8071);function Rt(rn){return(0,j.T)(rn[F.s])}},5397:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{x:()=>Rt});var F=Ge(4761),j=Ge(8071);function Rt(rn){return(0,j.T)(null==rn?void 0:rn[F.l])}},7477:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{y:()=>j});var F=Ge(8071);function j(Rt){return(0,F.T)(null==Rt?void 0:Rt.then)}},5196:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{C:()=>Rt,U:()=>rn});var F=Ge(1635),j=Ge(8071);function Rt(l){return(0,F.AQ)(this,arguments,function*(){const Z=l.getReader();try{for(;;){const{value:M,done:C}=yield(0,F.N3)(Z.read());if(C)return yield(0,F.N3)(void 0);yield yield(0,F.N3)(M)}}finally{Z.releaseLock()}})}function rn(l){return(0,j.T)(null==l?void 0:l.getReader)}},9470:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{m:()=>j});var F=Ge(8071);function j(Rt){return Rt&&(0,F.T)(Rt.schedule)}},9974:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{N:()=>Rt,S:()=>j});var F=Ge(8071);function j(rn){return(0,F.T)(null==rn?void 0:rn.lift)}function Rt(rn){return l=>{if(j(l))return l.lift(function(be){try{return rn(be,this)}catch(Z){this.error(Z)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{I:()=>rn});var F=Ge(6354);const{isArray:j}=Array;function rn(l){return(0,F.T)(be=>function Rt(l,be){return j(be)?l(...be):l(be)}(l,be))}},5343:(Ir,Un,Ge)=>{"use strict";function F(){}Ge.d(Un,{l:()=>F})},1203:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{F:()=>j,m:()=>Rt});var F=Ge(3669);function j(...rn){return Rt(rn)}function Rt(rn){return 0===rn.length?F.D:1===rn.length?rn[0]:function(be){return rn.reduce((Z,M)=>M(Z),be)}}},5334:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{m:()=>Rt});var F=Ge(1026),j=Ge(9270);function Rt(rn){j.f.setTimeout(()=>{const{onUnhandledError:l}=F.$;if(!l)throw rn;l(rn)})}},591:(Ir,Un,Ge)=>{"use strict";function F(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Ge.d(Un,{L:()=>F})},8996:(Ir,Un,Ge)=>{var F={"./ion-accordion_2.entry.js":[2375,2076,2375],"./ion-action-sheet.entry.js":[8814,2076,8814],"./ion-alert.entry.js":[5222,2076,5222],"./ion-app_8.entry.js":[7720,2076,7720],"./ion-avatar_3.entry.js":[1049,1049],"./ion-back-button.entry.js":[3162,2076,3162],"./ion-backdrop.entry.js":[7240,7240],"./ion-breadcrumb_2.entry.js":[8314,2076,8314],"./ion-button_2.entry.js":[4591,4591],"./ion-card_5.entry.js":[8584,8584],"./ion-checkbox.entry.js":[3511,3511],"./ion-chip.entry.js":[6024,6024],"./ion-col_3.entry.js":[5100,5100],"./ion-datetime-button.entry.js":[7428,1293,7428],"./ion-datetime_3.entry.js":[2885,1293,2076,2885],"./ion-fab_3.entry.js":[4463,2076,4463],"./ion-img.entry.js":[4183,4183],"./ion-infinite-scroll_2.entry.js":[4171,2076,4171],"./ion-input-password-toggle.entry.js":[6521,2076,6521],"./ion-input.entry.js":[9344,2076,9344],"./ion-item-option_3.entry.js":[5949,2076,5949],"./ion-item_8.entry.js":[3506,2076,3506],"./ion-loading.entry.js":[7372,2076,7372],"./ion-menu_3.entry.js":[2075,2076,2075],"./ion-modal.entry.js":[441,2076,441],"./ion-nav_2.entry.js":[5712,5712],"./ion-picker-column-option.entry.js":[9013,9013],"./ion-picker-column.entry.js":[1459,2076,1459],"./ion-picker.entry.js":[6840,6840],"./ion-popover.entry.js":[6433,2076,6433],"./ion-progress-bar.entry.js":[9977,9977],"./ion-radio_2.entry.js":[8066,2076,8066],"./ion-range.entry.js":[8477,2076,8477],"./ion-refresher_2.entry.js":[5197,2076,5197],"./ion-reorder_2.entry.js":[7030,2076,7030],"./ion-ripple-effect.entry.js":[964,964],"./ion-route_4.entry.js":[8970,8970],"./ion-searchbar.entry.js":[8193,2076,8193],"./ion-segment_2.entry.js":[2560,2076,2560],"./ion-select_3.entry.js":[7076,2076,7076],"./ion-spinner.entry.js":[8805,2076,8805],"./ion-split-pane.entry.js":[5887,5887],"./ion-tab-bar_2.entry.js":[4406,2076,4406],"./ion-tab_2.entry.js":[1102,1102],"./ion-text.entry.js":[1577,1577],"./ion-textarea.entry.js":[2348,2076,2348],"./ion-toast.entry.js":[2415,2076,2415],"./ion-toggle.entry.js":[3814,2076,3814]};function j(Rt){if(!Ge.o(F,Rt))return Promise.resolve().then(()=>{var be=new Error("Cannot find module '"+Rt+"'");throw be.code="MODULE_NOT_FOUND",be});var rn=F[Rt],l=rn[0];return Promise.all(rn.slice(1).map(Ge.e)).then(()=>Ge(l))}j.keys=()=>Object.keys(F),j.id=8996,Ir.exports=j},5235:(Ir,Un,Ge)=>{var F={"./pwa-action-sheet.entry.js":[6301,6301],"./pwa-camera-modal-instance.entry.js":[5640,5640],"./pwa-camera-modal.entry.js":[2982,2982],"./pwa-camera.entry.js":[6086,6086],"./pwa-toast.entry.js":[3574,3574]};function j(Rt){if(!Ge.o(F,Rt))return Promise.resolve().then(()=>{var be=new Error("Cannot find module '"+Rt+"'");throw be.code="MODULE_NOT_FOUND",be});var rn=F[Rt],l=rn[0];return Ge.e(rn[1]).then(()=>Ge(l))}j.keys=()=>Object.keys(F),j.id=5235,Ir.exports=j},4633:(Ir,Un,Ge)=>{var F=Ge(3738).default;function j(){"use strict";Ir.exports=j=function(){return rn},Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports;var Rt,rn={},l=Object.prototype,be=l.hasOwnProperty,Z=Object.defineProperty||function(ge,re,Q){ge[re]=Q.value},M="function"==typeof Symbol?Symbol:{},C=M.iterator||"@@iterator",b=M.asyncIterator||"@@asyncIterator",w=M.toStringTag||"@@toStringTag";function I(ge,re,Q){return Object.defineProperty(ge,re,{value:Q,enumerable:!0,configurable:!0,writable:!0}),ge[re]}try{I({},"")}catch{I=function(Q,fe,De){return Q[fe]=De}}function D(ge,re,Q,fe){var it=Object.create((re&&re.prototype instanceof x?re:x).prototype),le=new Se(fe||[]);return Z(it,"_invoke",{value:H(ge,Q,le)}),it}function d(ge,re,Q){try{return{type:"normal",arg:ge.call(re,Q)}}catch(fe){return{type:"throw",arg:fe}}}rn.wrap=D;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function x(){}function E(){}function S(){}var L={};I(L,C,function(){return this});var q=Object.getPrototypeOf,J=q&&q(q(oe([])));J&&J!==l&&be.call(J,C)&&(L=J);var G=S.prototype=x.prototype=Object.create(L);function V(ge){["next","throw","return"].forEach(function(re){I(ge,re,function(Q){return this._invoke(re,Q)})})}function K(ge,re){function Q(De,it,le,z){var ye=d(ge[De],ge,it);if("throw"!==ye.type){var Ue=ye.arg,Je=Ue.value;return Je&&"object"==F(Je)&&be.call(Je,"__await")?re.resolve(Je.__await).then(function(vt){Q("next",vt,le,z)},function(vt){Q("throw",vt,le,z)}):re.resolve(Je).then(function(vt){Ue.value=vt,le(Ue)},function(vt){return Q("throw",vt,le,z)})}z(ye.arg)}var fe;Z(this,"_invoke",{value:function(it,le){function z(){return new re(function(ye,Ue){Q(it,le,ye,Ue)})}return fe=fe?fe.then(z,z):z()}})}function H(ge,re,Q){var fe=f;return function(De,it){if(fe===p)throw Error("Generator is already running");if(fe===m){if("throw"===De)throw it;return{value:Rt,done:!0}}for(Q.method=De,Q.arg=it;;){var le=Q.delegate;if(le){var z=te(le,Q);if(z){if(z===g)continue;return z}}if("next"===Q.method)Q.sent=Q._sent=Q.arg;else if("throw"===Q.method){if(fe===f)throw fe=m,Q.arg;Q.dispatchException(Q.arg)}else"return"===Q.method&&Q.abrupt("return",Q.arg);fe=p;var ye=d(ge,re,Q);if("normal"===ye.type){if(fe=Q.done?m:h,ye.arg===g)continue;return{value:ye.arg,done:Q.done}}"throw"===ye.type&&(fe=m,Q.method="throw",Q.arg=ye.arg)}}}function te(ge,re){var Q=re.method,fe=ge.iterator[Q];if(fe===Rt)return re.delegate=null,"throw"===Q&&ge.iterator.return&&(re.method="return",re.arg=Rt,te(ge,re),"throw"===re.method)||"return"!==Q&&(re.method="throw",re.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),g;var De=d(fe,ge.iterator,re.arg);if("throw"===De.type)return re.method="throw",re.arg=De.arg,re.delegate=null,g;var it=De.arg;return it?it.done?(re[ge.resultName]=it.value,re.next=ge.nextLoc,"return"!==re.method&&(re.method="next",re.arg=Rt),re.delegate=null,g):it:(re.method="throw",re.arg=new TypeError("iterator result is not an object"),re.delegate=null,g)}function Y(ge){var re={tryLoc:ge[0]};1 in ge&&(re.catchLoc=ge[1]),2 in ge&&(re.finallyLoc=ge[2],re.afterLoc=ge[3]),this.tryEntries.push(re)}function we(ge){var re=ge.completion||{};re.type="normal",delete re.arg,ge.completion=re}function Se(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(Y,this),this.reset(!0)}function oe(ge){if(ge||""===ge){var re=ge[C];if(re)return re.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length)){var Q=-1,fe=function De(){for(;++Q<ge.length;)if(be.call(ge,Q))return De.value=ge[Q],De.done=!1,De;return De.value=Rt,De.done=!0,De};return fe.next=fe}}throw new TypeError(F(ge)+" is not iterable")}return E.prototype=S,Z(G,"constructor",{value:S,configurable:!0}),Z(S,"constructor",{value:E,configurable:!0}),E.displayName=I(S,w,"GeneratorFunction"),rn.isGeneratorFunction=function(ge){var re="function"==typeof ge&&ge.constructor;return!!re&&(re===E||"GeneratorFunction"===(re.displayName||re.name))},rn.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,S):(ge.__proto__=S,I(ge,w,"GeneratorFunction")),ge.prototype=Object.create(G),ge},rn.awrap=function(ge){return{__await:ge}},V(K.prototype),I(K.prototype,b,function(){return this}),rn.AsyncIterator=K,rn.async=function(ge,re,Q,fe,De){void 0===De&&(De=Promise);var it=new K(D(ge,re,Q,fe),De);return rn.isGeneratorFunction(re)?it:it.next().then(function(le){return le.done?le.value:it.next()})},V(G),I(G,w,"Generator"),I(G,C,function(){return this}),I(G,"toString",function(){return"[object Generator]"}),rn.keys=function(ge){var re=Object(ge),Q=[];for(var fe in re)Q.push(fe);return Q.reverse(),function De(){for(;Q.length;){var it=Q.pop();if(it in re)return De.value=it,De.done=!1,De}return De.done=!0,De}},rn.values=oe,Se.prototype={constructor:Se,reset:function(re){if(this.prev=0,this.next=0,this.sent=this._sent=Rt,this.done=!1,this.delegate=null,this.method="next",this.arg=Rt,this.tryEntries.forEach(we),!re)for(var Q in this)"t"===Q.charAt(0)&&be.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=Rt)},stop:function(){this.done=!0;var re=this.tryEntries[0].completion;if("throw"===re.type)throw re.arg;return this.rval},dispatchException:function(re){if(this.done)throw re;var Q=this;function fe(Ue,Je){return le.type="throw",le.arg=re,Q.next=Ue,Je&&(Q.method="next",Q.arg=Rt),!!Je}for(var De=this.tryEntries.length-1;De>=0;--De){var it=this.tryEntries[De],le=it.completion;if("root"===it.tryLoc)return fe("end");if(it.tryLoc<=this.prev){var z=be.call(it,"catchLoc"),ye=be.call(it,"finallyLoc");if(z&&ye){if(this.prev<it.catchLoc)return fe(it.catchLoc,!0);if(this.prev<it.finallyLoc)return fe(it.finallyLoc)}else if(z){if(this.prev<it.catchLoc)return fe(it.catchLoc,!0)}else{if(!ye)throw Error("try statement without catch or finally");if(this.prev<it.finallyLoc)return fe(it.finallyLoc)}}}},abrupt:function(re,Q){for(var fe=this.tryEntries.length-1;fe>=0;--fe){var De=this.tryEntries[fe];if(De.tryLoc<=this.prev&&be.call(De,"finallyLoc")&&this.prev<De.finallyLoc){var it=De;break}}it&&("break"===re||"continue"===re)&&it.tryLoc<=Q&&Q<=it.finallyLoc&&(it=null);var le=it?it.completion:{};return le.type=re,le.arg=Q,it?(this.method="next",this.next=it.finallyLoc,g):this.complete(le)},complete:function(re,Q){if("throw"===re.type)throw re.arg;return"break"===re.type||"continue"===re.type?this.next=re.arg:"return"===re.type?(this.rval=this.arg=re.arg,this.method="return",this.next="end"):"normal"===re.type&&Q&&(this.next=Q),g},finish:function(re){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var fe=this.tryEntries[Q];if(fe.finallyLoc===re)return this.complete(fe.completion,fe.afterLoc),we(fe),g}},catch:function(re){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var fe=this.tryEntries[Q];if(fe.tryLoc===re){var De=fe.completion;if("throw"===De.type){var it=De.arg;we(fe)}return it}}throw Error("illegal catch attempt")},delegateYield:function(re,Q,fe){return this.delegate={iterator:oe(re),resultName:Q,nextLoc:fe},"next"===this.method&&(this.arg=Rt),g}},rn}Ir.exports=j,Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports},3738:Ir=>{function Un(Ge){return Ir.exports=Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports,Un(Ge)}Ir.exports=Un,Ir.exports.__esModule=!0,Ir.exports.default=Ir.exports},4756:(Ir,Un,Ge)=>{var F=Ge(4633)();Ir.exports=F;try{regeneratorRuntime=F}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}},9969:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{FX:()=>G,If:()=>F,K2:()=>be,hZ:()=>Rt,i0:()=>rn,iF:()=>Z,kY:()=>b,kp:()=>j,sf:()=>q,ui:()=>J});var F=function(V){return V[V.State=0]="State",V[V.Transition=1]="Transition",V[V.Sequence=2]="Sequence",V[V.Group=3]="Group",V[V.Animate=4]="Animate",V[V.Keyframes=5]="Keyframes",V[V.Style=6]="Style",V[V.Trigger=7]="Trigger",V[V.Reference=8]="Reference",V[V.AnimateChild=9]="AnimateChild",V[V.AnimateRef=10]="AnimateRef",V[V.Query=11]="Query",V[V.Stagger=12]="Stagger",V}(F||{});const j="*";function Rt(V,K){return{type:F.Trigger,name:V,definitions:K,options:{}}}function rn(V,K=null){return{type:F.Animate,styles:K,timings:V}}function be(V,K=null){return{type:F.Sequence,steps:V,options:K}}function Z(V){return{type:F.Style,styles:V,offset:null}}function b(V,K,H=null){return{type:F.Transition,expr:V,animation:K,options:H}}class q{constructor(K=0,H=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=K+H}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}onStart(K){this._originalOnStartFns.push(K),this._onStartFns.push(K)}onDone(K){this._originalOnDoneFns.push(K),this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(K=>K()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(K){this._position=this.totalTime?K*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(K){const H="start"==K?this._onStartFns:this._onDoneFns;H.forEach(te=>te()),H.length=0}}class J{constructor(K){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=K;let H=0,te=0,Y=0;const we=this.players.length;0==we?queueMicrotask(()=>this._onFinish()):this.players.forEach(Se=>{Se.onDone(()=>{++H==we&&this._onFinish()}),Se.onDestroy(()=>{++te==we&&this._onDestroy()}),Se.onStart(()=>{++Y==we&&this._onStart()})}),this.totalTime=this.players.reduce((Se,oe)=>Math.max(Se,oe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}init(){this.players.forEach(K=>K.init())}onStart(K){this._onStartFns.push(K)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(K=>K()),this._onStartFns=[])}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(K=>K.play())}pause(){this.players.forEach(K=>K.pause())}restart(){this.players.forEach(K=>K.restart())}finish(){this._onFinish(),this.players.forEach(K=>K.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(K=>K.destroy()),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this.players.forEach(K=>K.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(K){const H=K*this.totalTime;this.players.forEach(te=>{const Y=te.totalTime?Math.min(1,H/te.totalTime):1;te.setPosition(Y)})}getPosition(){const K=this.players.reduce((H,te)=>null===H||te.totalTime>H.totalTime?te:H,null);return null!=K?K.getPosition():0}beforeDestroy(){this.players.forEach(K=>{K.beforeDestroy&&K.beforeDestroy()})}triggerCallback(K){const H="start"==K?this._onStartFns:this._onDoneFns;H.forEach(te=>te()),H.length=0}}const G="!"},177:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{AJ:()=>jn,MD:()=>Nn,N0:()=>zi,QT:()=>Rt,Sm:()=>h,Sq:()=>zn,T3:()=>qo,UE:()=>br,VF:()=>l,Vy:()=>Mr,Xr:()=>oi,ZD:()=>rn,_b:()=>Fe,aZ:()=>m,bT:()=>Bi,fw:()=>p,hb:()=>d,hj:()=>C,qQ:()=>Z});var F=Ge(3953);let j=null;function Rt(){return j}function rn(Te){var et;null!==(et=j)&&void 0!==et||(j=Te)}class l{}const Z=new F.nKC("");let M=(()=>{var Te;class et{historyGo(Ye){throw new Error("")}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>(0,F.WQX)(b),providedIn:"platform"}),et})();const C=new F.nKC("");let b=(()=>{var Te;class et extends M{constructor(){super(),this._doc=(0,F.WQX)(Z),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rt().getBaseHref(this._doc)}onPopState(Ye){const jt=Rt().getGlobalEventTarget(this._doc,"window");return jt.addEventListener("popstate",Ye,!1),()=>jt.removeEventListener("popstate",Ye)}onHashChange(Ye){const jt=Rt().getGlobalEventTarget(this._doc,"window");return jt.addEventListener("hashchange",Ye,!1),()=>jt.removeEventListener("hashchange",Ye)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Ye){this._location.pathname=Ye}pushState(Ye,jt,an){this._history.pushState(Ye,jt,an)}replaceState(Ye,jt,an){this._history.replaceState(Ye,jt,an)}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ye=0){this._history.go(Ye)}getState(){return this._history.state}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>new Te,providedIn:"platform"}),et})();function w(Te,et){if(0==Te.length)return et;if(0==et.length)return Te;let nn=0;return Te.endsWith("/")&&nn++,et.startsWith("/")&&nn++,2==nn?Te+et.substring(1):1==nn?Te+et:Te+"/"+et}function I(Te){const et=Te.match(/#|\?|$/),nn=et&&et.index||Te.length;return Te.slice(0,nn-("/"===Te[nn-1]?1:0))+Te.slice(nn)}function D(Te){return Te&&"?"!==Te[0]?"?"+Te:Te}let d=(()=>{var Te;class et{historyGo(Ye){throw new Error("")}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)},Te.\u0275prov=F.jDH({token:Te,factory:()=>(0,F.WQX)(h),providedIn:"root"}),et})();const f=new F.nKC("");let h=(()=>{var Te;class et extends d{constructor(Ye,jt){var an,St,Nr;super(),this._platformLocation=Ye,this._removeListenerFns=[],this._baseHref=null!==(an=null!==(St=null!=jt?jt:this._platformLocation.getBaseHrefFromDOM())&&void 0!==St?St:null===(Nr=(0,F.WQX)(Z).location)||void 0===Nr?void 0:Nr.origin)&&void 0!==an?an:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ye){this._removeListenerFns.push(this._platformLocation.onPopState(Ye),this._platformLocation.onHashChange(Ye))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ye){return w(this._baseHref,Ye)}path(Ye=!1){const jt=this._platformLocation.pathname+D(this._platformLocation.search),an=this._platformLocation.hash;return an&&Ye?`${jt}${an}`:jt}pushState(Ye,jt,an,St){const Nr=this.prepareExternalUrl(an+D(St));this._platformLocation.pushState(Ye,jt,Nr)}replaceState(Ye,jt,an,St){const Nr=this.prepareExternalUrl(an+D(St));this._platformLocation.replaceState(Ye,jt,Nr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ye=0){var jt,an;null===(jt=(an=this._platformLocation).historyGo)||void 0===jt||jt.call(an,Ye)}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)(F.KVO(M),F.KVO(f,8))},Te.\u0275prov=F.jDH({token:Te,factory:Te.\u0275fac,providedIn:"root"}),et})(),p=(()=>{var Te;class et extends d{constructor(Ye,jt){super(),this._platformLocation=Ye,this._baseHref="",this._removeListenerFns=[],null!=jt&&(this._baseHref=jt)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ye){this._removeListenerFns.push(this._platformLocation.onPopState(Ye),this._platformLocation.onHashChange(Ye))}getBaseHref(){return this._baseHref}path(Ye=!1){var jt;const an=null!==(jt=this._platformLocation.hash)&&void 0!==jt?jt:"#";return an.length>0?an.substring(1):an}prepareExternalUrl(Ye){const jt=w(this._baseHref,Ye);return jt.length>0?"#"+jt:jt}pushState(Ye,jt,an,St){let Nr=this.prepareExternalUrl(an+D(St));0==Nr.length&&(Nr=this._platformLocation.pathname),this._platformLocation.pushState(Ye,jt,Nr)}replaceState(Ye,jt,an,St){let Nr=this.prepareExternalUrl(an+D(St));0==Nr.length&&(Nr=this._platformLocation.pathname),this._platformLocation.replaceState(Ye,jt,Nr)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Ye=0){var jt,an;null===(jt=(an=this._platformLocation).historyGo)||void 0===jt||jt.call(an,Ye)}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)(F.KVO(M),F.KVO(f,8))},Te.\u0275prov=F.jDH({token:Te,factory:Te.\u0275fac}),et})(),m=(()=>{var Te;class et{constructor(Ye){this._subject=new F.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Ye;const jt=this._locationStrategy.getBaseHref();this._basePath=function S(Te){if(new RegExp("^(https?:)?//").test(Te)){const[,nn]=Te.split(/\/\/[^\/]+/);return nn}return Te}(I(E(jt))),this._locationStrategy.onPopState(an=>{this._subject.emit({url:this.path(!0),pop:!0,state:an.state,type:an.type})})}ngOnDestroy(){var Ye;null===(Ye=this._urlChangeSubscription)||void 0===Ye||Ye.unsubscribe(),this._urlChangeListeners=[]}path(Ye=!1){return this.normalize(this._locationStrategy.path(Ye))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Ye,jt=""){return this.path()==this.normalize(Ye+D(jt))}normalize(Ye){return et.stripTrailingSlash(function x(Te,et){if(!Te||!et.startsWith(Te))return et;const nn=et.substring(Te.length);return""===nn||["/",";","?","#"].includes(nn[0])?nn:et}(this._basePath,E(Ye)))}prepareExternalUrl(Ye){return Ye&&"/"!==Ye[0]&&(Ye="/"+Ye),this._locationStrategy.prepareExternalUrl(Ye)}go(Ye,jt="",an=null){this._locationStrategy.pushState(an,"",Ye,jt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ye+D(jt)),an)}replaceState(Ye,jt="",an=null){this._locationStrategy.replaceState(an,"",Ye,jt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ye+D(jt)),an)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Ye=0){var jt,an;null===(jt=(an=this._locationStrategy).historyGo)||void 0===jt||jt.call(an,Ye)}onUrlChange(Ye){var jt;return this._urlChangeListeners.push(Ye),null!==(jt=this._urlChangeSubscription)&&void 0!==jt||(this._urlChangeSubscription=this.subscribe(an=>{this._notifyUrlChangeListeners(an.url,an.state)})),()=>{const an=this._urlChangeListeners.indexOf(Ye);var St;this._urlChangeListeners.splice(an,1),0===this._urlChangeListeners.length&&(null===(St=this._urlChangeSubscription)||void 0===St||St.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Ye="",jt){this._urlChangeListeners.forEach(an=>an(Ye,jt))}subscribe(Ye,jt,an){return this._subject.subscribe({next:Ye,error:jt,complete:an})}}return(Te=et).normalizeQueryParams=D,Te.joinWithSlash=w,Te.stripTrailingSlash=I,Te.\u0275fac=function(Ye){return new(Ye||Te)(F.KVO(d))},Te.\u0275prov=F.jDH({token:Te,factory:()=>function g(){return new m((0,F.KVO)(d))}(),providedIn:"root"}),et})();function E(Te){return Te.replace(/\/index.html$/,"")}function Fe(Te,et){et=encodeURIComponent(et);for(const nn of Te.split(";")){const Ye=nn.indexOf("="),[jt,an]=-1==Ye?[nn,""]:[nn.slice(0,Ye),nn.slice(Ye+1)];if(jt.trim()===et)return decodeURIComponent(an)}return null}class En{constructor(et,nn,Ye,jt){this.$implicit=et,this.ngForOf=nn,this.index=Ye,this.count=jt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{var Te;class et{set ngForOf(Ye){this._ngForOf=Ye,this._ngForOfDirty=!0}set ngForTrackBy(Ye){this._trackByFn=Ye}get ngForTrackBy(){return this._trackByFn}constructor(Ye,jt,an){this._viewContainer=Ye,this._template=jt,this._differs=an,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Ye){Ye&&(this._template=Ye)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ye=this._ngForOf;!this._differ&&Ye&&(this._differ=this._differs.find(Ye).create(this.ngForTrackBy))}if(this._differ){const Ye=this._differ.diff(this._ngForOf);Ye&&this._applyChanges(Ye)}}_applyChanges(Ye){const jt=this._viewContainer;Ye.forEachOperation((an,St,Nr)=>{if(null==an.previousIndex)jt.createEmbeddedView(this._template,new En(an.item,this._ngForOf,-1,-1),null===Nr?void 0:Nr);else if(null==Nr)jt.remove(null===St?void 0:St);else if(null!==St){const rs=jt.get(St);jt.move(rs,Nr),or(rs,an)}});for(let an=0,St=jt.length;an<St;an++){const rs=jt.get(an).context;rs.index=an,rs.count=St,rs.ngForOf=this._ngForOf}Ye.forEachIdentityChange(an=>{or(jt.get(an.currentIndex),an)})}static ngTemplateContextGuard(Ye,jt){return!0}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)(F.rXU(F.c1b),F.rXU(F.C4Q),F.rXU(F._q3))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),et})();function or(Te,et){Te.context.$implicit=et.item}let Bi=(()=>{var Te;class et{constructor(Ye,jt){this._viewContainer=Ye,this._context=new Rs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=jt}set ngIf(Ye){this._context.$implicit=this._context.ngIf=Ye,this._updateView()}set ngIfThen(Ye){Ps("ngIfThen",Ye),this._thenTemplateRef=Ye,this._thenViewRef=null,this._updateView()}set ngIfElse(Ye){Ps("ngIfElse",Ye),this._elseTemplateRef=Ye,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ye,jt){return!0}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)(F.rXU(F.c1b),F.rXU(F.C4Q))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),et})();class Rs{constructor(){this.$implicit=null,this.ngIf=null}}function Ps(Te,et){if(et&&!et.createEmbeddedView)throw new Error(`${Te} must be a TemplateRef, but received '${(0,F.Tbb)(et)}'.`)}let qo=(()=>{var Te;class et{constructor(Ye){this._viewContainerRef=Ye,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Ye){if(this._shouldRecreateView(Ye)){var jt;const an=this._viewContainerRef;if(this._viewRef&&an.remove(an.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const St=this._createContextForwardProxy();this._viewRef=an.createEmbeddedView(this.ngTemplateOutlet,St,{injector:null!==(jt=this.ngTemplateOutletInjector)&&void 0!==jt?jt:void 0})}}_shouldRecreateView(Ye){return!!Ye.ngTemplateOutlet||!!Ye.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(Ye,jt,an)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,jt,an),get:(Ye,jt,an)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,jt,an)}})}}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)(F.rXU(F.c1b))},Te.\u0275dir=F.FsC({type:Te,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[F.OA$]}),et})(),Nn=(()=>{var Te;class et{}return(Te=et).\u0275fac=function(Ye){return new(Ye||Te)},Te.\u0275mod=F.$C({type:Te}),Te.\u0275inj=F.G2t({}),et})();const jn="browser",hr="server";function br(Te){return Te===jn}function Mr(Te){return Te===hr}let oi=(()=>{var Te;class et{}return(Te=et).\u0275prov=(0,F.jDH)({token:Te,providedIn:"root",factory:()=>br((0,F.WQX)(F.Agw))?new Jr((0,F.WQX)(Z),window):new Ei}),et})();class Jr{constructor(et,nn){this.document=et,this.window=nn,this.offset=()=>[0,0]}setOffset(et){this.offset=Array.isArray(et)?()=>et:et}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(et){this.window.scrollTo(et[0],et[1])}scrollToAnchor(et){const nn=function vi(Te,et){const nn=Te.getElementById(et)||Te.getElementsByName(et)[0];if(nn)return nn;if("function"==typeof Te.createTreeWalker&&Te.body&&"function"==typeof Te.body.attachShadow){const Ye=Te.createTreeWalker(Te.body,NodeFilter.SHOW_ELEMENT);let jt=Ye.currentNode;for(;jt;){const an=jt.shadowRoot;if(an){const St=an.getElementById(et)||an.querySelector(`[name="${et}"]`);if(St)return St}jt=Ye.nextNode()}}return null}(this.document,et);nn&&(this.scrollToElement(nn),nn.focus())}setHistoryScrollRestoration(et){this.window.history.scrollRestoration=et}scrollToElement(et){const nn=et.getBoundingClientRect(),Ye=nn.left+this.window.pageXOffset,jt=nn.top+this.window.pageYOffset,an=this.offset();this.window.scrollTo(Ye-an[0],jt-an[1])}}class Ei{setOffset(et){}getScrollPosition(){return[0,0]}scrollToPosition(et){}scrollToAnchor(et){}setHistoryScrollRestoration(et){}}class zi{}},3953:(Ir,Un,Ge)=>{"use strict";function F(n,i){return Object.is(n,i)}Ge.d(Un,{bc$:()=>_E,iLQ:()=>bb,sZ2:()=>oh,hnV:()=>JA,Hbi:()=>PP,o8S:()=>Ru,BIS:()=>Jv,gRc:()=>hC,Ql9:()=>sP,Ocv:()=>hP,Z63:()=>mi,aKT:()=>Jh,uvJ:()=>Hl,zcH:()=>Rc,bkB:()=>aa,$GK:()=>As,nKC:()=>di,zZn:()=>ya,_q3:()=>YS,MKu:()=>ZS,xe9:()=>xb,Co$:()=>Q_,Vns:()=>Pd,SKi:()=>la,Xx1:()=>ki,Agw:()=>Ip,PLl:()=>E1,sFG:()=>wy,_9s:()=>Pf,czy:()=>zg,WPN:()=>Td,kdw:()=>Xi,C4Q:()=>ph,NYb:()=>QR,giA:()=>YA,RxE:()=>zA,c1b:()=>_h,gXe:()=>nl,mal:()=>fm,L39:()=>fO,EWP:()=>mO,a0P:()=>xO,Ol2:()=>ni,w6W:()=>Wx,oH4:()=>lC,SmG:()=>yP,Rfq:()=>Gl,WQX:()=>lt,QuC:()=>kr,EmA:()=>pa,fpN:()=>RP,HJs:()=>SO,N4e:()=>Mh,vPA:()=>fi,O8t:()=>gO,H3F:()=>$A,zAP:()=>FC,H8p:()=>Wf,KH2:()=>Nm,TgB:()=>Kl,wOt:()=>Br,WHO:()=>qA,e01:()=>KA,lNU:()=>Js,h9k:()=>w0,$MX:()=>zp,ZF7:()=>ch,Kcf:()=>B1,e5t:()=>$1,UyX:()=>G1,cWb:()=>V1,osQ:()=>z1,H5H:()=>yS,mq5:()=>oM,JZv:()=>ho,LfX:()=>cs,plB:()=>ed,jNT:()=>US,zjR:()=>ZA,TL$:()=>vE,Tbb:()=>Mo,rcV:()=>bu,Vt3:()=>wo,GFd:()=>J_,OA$:()=>Wc,Jv_:()=>yA,aNF:()=>vA,R7$:()=>Yg,BMQ:()=>rS,AVh:()=>uS,wni:()=>$M,VBU:()=>$e,FsC:()=>Vn,jDH:()=>Zr,G2t:()=>_i,$C:()=>Pt,EJ8:()=>xr,rXU:()=>Yu,nrm:()=>mS,eu8:()=>gS,bVm:()=>db,qex:()=>ub,k0s:()=>cb,j41:()=>lb,RV6:()=>rM,xGo:()=>pg,KVO:()=>ve,kS0:()=>qh,QTQ:()=>F0,bIt:()=>bS,lsd:()=>XM,XpG:()=>PM,SdG:()=>kM,NAR:()=>OM,Y8G:()=>aS,lJ4:()=>wA,eq3:()=>xA,mGM:()=>WM,sdS:()=>qM,Njj:()=>Tc,eBV:()=>tg,B4B:()=>Bg,n$t:()=>S0,Aen:()=>Cu,xc7:()=>cS,DNE:()=>jl,EFF:()=>iA,JRh:()=>ES,SpI:()=>mb,Lme:()=>TS,DH7:()=>fA,mxI:()=>AS,R50:()=>MS,GBs:()=>HM});let j=null,Rt=!1,rn=1;const l=Symbol("SIGNAL");function be(n){const i=j;return j=n,i}const b={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function w(n){if(Rt)throw new Error("");if(null===j)return;j.consumerOnSignalRead(n);const i=j.nextProducerIndex++;q(j),i<j.producerNode.length&&j.producerNode[i]!==n&&L(j)&&S(j.producerNode[i],j.producerIndexOfThis[i]),j.producerNode[i]!==n&&(j.producerNode[i]=n,j.producerIndexOfThis[i]=L(j)?E(n,j,i):0),j.producerLastReadVersion[i]=n.version}function D(n){if((!L(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==rn)){if(!n.producerMustRecompute(n)&&!g(n))return n.dirty=!1,void(n.lastCleanEpoch=rn);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=rn}}function d(n){if(void 0===n.liveConsumerNode)return;const i=Rt;Rt=!0;try{for(const o of n.liveConsumerNode)o.dirty||h(o)}finally{Rt=i}}function f(){var n;return!1!==(null===(n=j)||void 0===n?void 0:n.consumerAllowSignalWrites)}function h(n){var i;n.dirty=!0,d(n),null===(i=n.consumerMarkedDirty)||void 0===i||i.call(n,n)}function p(n){return n&&(n.nextProducerIndex=0),be(n)}function m(n,i){if(be(i),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(L(n))for(let o=n.nextProducerIndex;o<n.producerNode.length;o++)S(n.producerNode[o],n.producerIndexOfThis[o]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function g(n){q(n);for(let i=0;i<n.producerNode.length;i++){const o=n.producerNode[i],c=n.producerLastReadVersion[i];if(c!==o.version||(D(o),c!==o.version))return!0}return!1}function x(n){if(q(n),L(n))for(let i=0;i<n.producerNode.length;i++)S(n.producerNode[i],n.producerIndexOfThis[i]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function E(n,i,o){if(J(n),0===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)n.producerIndexOfThis[c]=E(n.producerNode[c],n,c);return n.liveConsumerIndexOfThis.push(o),n.liveConsumerNode.push(i)-1}function S(n,i){if(J(n),1===n.liveConsumerNode.length&&G(n))for(let c=0;c<n.producerNode.length;c++)S(n.producerNode[c],n.producerIndexOfThis[c]);const o=n.liveConsumerNode.length-1;if(n.liveConsumerNode[i]=n.liveConsumerNode[o],n.liveConsumerIndexOfThis[i]=n.liveConsumerIndexOfThis[o],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,i<n.liveConsumerNode.length){const c=n.liveConsumerIndexOfThis[i],y=n.liveConsumerNode[i];q(y),y.producerIndexOfThis[c]=i}}function L(n){var i,o;return n.consumerIsAlwaysLive||(null!==(i=null==n||null===(o=n.liveConsumerNode)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>0}function q(n){var i,o,c;null!==(i=n.producerNode)&&void 0!==i||(n.producerNode=[]),null!==(o=n.producerIndexOfThis)&&void 0!==o||(n.producerIndexOfThis=[]),null!==(c=n.producerLastReadVersion)&&void 0!==c||(n.producerLastReadVersion=[])}function J(n){var i,o;null!==(i=n.liveConsumerNode)&&void 0!==i||(n.liveConsumerNode=[]),null!==(o=n.liveConsumerIndexOfThis)&&void 0!==o||(n.liveConsumerIndexOfThis=[])}function G(n){return void 0!==n.producerNode}const K=Symbol("UNSET"),H=Symbol("COMPUTING"),te=Symbol("ERRORED"),Y={...b,value:K,dirty:!0,error:null,equal:F,producerMustRecompute:n=>n.value===K||n.value===H,producerRecomputeValue(n){if(n.value===H)throw new Error("Detected cycle in computations.");const i=n.value;n.value=H;const o=p(n);let c;try{c=n.computation()}catch(y){c=te,n.error=y}finally{m(n,o)}i!==K&&i!==te&&c!==te&&n.equal(i,c)?n.value=i:(n.value=c,n.version++)}};let Se=function we(){throw new Error};function oe(){Se()}let re=null;function it(n,i){f()||oe(),n.equal(n.value,i)||(n.value=i,function Ue(n){var i;n.version++,function I(){rn++}(),d(n),null===(i=re)||void 0===i||i()}(n))}const ye={...b,equal:F,value:void 0};var ns,_t=Ge(4412),Ft=Ge(1413),Wt=Ge(8359),mt=Ge(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Js="https://g.co/ng/security#xss";class Br extends Error{constructor(i,o){super(function da(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,o)),this.code=i}}function go(n){return{toString:n}.toString()}const el="__parameters__";function ml(n,i,o){return go(()=>{const c=function za(n){return function(...o){if(n){const c=n(...o);for(const y in c)this[y]=c[y]}}}(i);function y(...O){if(this instanceof y)return c.apply(this,O),this;const W=new y(...O);return ce.annotation=W,ce;function ce(Ee,Xe,ct){const Et=Ee.hasOwnProperty(el)?Ee[el]:Object.defineProperty(Ee,el,{value:[]})[el];for(;Et.length<=ct;)Et.push(null);return(Et[ct]=Et[ct]||[]).push(W),Ee}}return o&&(y.prototype=Object.create(o.prototype)),y.prototype.ngMetadataName=n,y.annotationCls=y,y})}const ho=globalThis;function Ns(n){for(let i in n)if(n[i]===Ns)return i;throw Error("Could not find renamed property on target object.")}function Vl(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function Mo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Mo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function gl(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const Da=Ns({__forward_ref__:Ns});function Gl(n){return n.__forward_ref__=Gl,n.toString=function(){return Mo(this())},n}function hi(n){return tl(n)?n():n}function tl(n){return"function"==typeof n&&n.hasOwnProperty(Da)&&n.__forward_ref__===Gl}function Zr(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _i(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ji(n){return yo(n,Ao)||yo(n,Vs)}function cs(n){return null!==Ji(n)}function yo(n,i){return n.hasOwnProperty(i)?n[i]:null}function Po(n){return n&&(n.hasOwnProperty(ra)||n.hasOwnProperty(Qs))?n[ra]:null}const Ao=Ns({\u0275prov:Ns}),ra=Ns({\u0275inj:Ns}),Vs=Ns({ngInjectableDef:Ns}),Qs=Ns({ngInjectorDef:Ns});class di{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Zr({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zl(n){return n&&!!n.\u0275providers}const yl=Ns({\u0275cmp:Ns}),cc=Ns({\u0275dir:Ns}),Fc=Ns({\u0275pipe:Ns}),$a=Ns({\u0275mod:Ns}),vl=Ns({\u0275fac:Ns}),uc=Ns({__NG_ELEMENT_ID__:Ns}),su=Ns({__NG_ENV_ID__:Ns});function os(n){return"string"==typeof n?n:null==n?"":String(n)}function ou(n,i){throw new Br(-201,!1)}var As=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(As||{});let Ha;function ec(){return Ha}function Ia(n){const i=Ha;return Ha=n,i}function _o(n,i,o){const c=Ji(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&As.Optional?null:void 0!==i?i:void ou()}const Te={},et="__NG_DI_FLAG__",nn="ngTempTokenPath",jt=/\n/gm,St="__source";let Nr;function ot(n){const i=Nr;return Nr=n,i}function ue(n,i=As.Default){if(void 0===Nr)throw new Br(-203,!1);return null===Nr?_o(n,void 0,i):Nr.get(n,i&As.Optional?null:void 0,i)}function ve(n,i=As.Default){return(ec()||ue)(hi(n),i)}function lt(n,i=As.Default){return ve(n,Lt(i))}function Lt(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Sn(n){const i=[];for(let o=0;o<n.length;o++){const c=hi(n[o]);if(Array.isArray(c)){if(0===c.length)throw new Br(900,!1);let y,O=As.Default;for(let W=0;W<c.length;W++){const ce=c[W],Ee=Hn(ce);"number"==typeof Ee?-1===Ee?y=ce.token:O|=Ee:y=ce}i.push(ve(y,O))}else i.push(ve(c))}return i}function xn(n,i){return n[et]=i,n.prototype[et]=i,n}function Hn(n){return n[et]}const ki=xn(ml("Optional"),8),Xi=xn(ml("SkipSelf"),4);function Ks(n,i){return n.hasOwnProperty(vl)?n[vl]:null}function po(n,i){n.forEach(o=>Array.isArray(o)?po(o,i):i(o))}function ia(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function ll(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Li(n,i,o){let c=Yo(n,i);return c>=0?n[1|c]=o:(c=~c,function ul(n,i,o,c){let y=n.length;if(y==i)n.push(o,c);else if(1===y)n.push(c,n[0]),n[0]=o;else{for(y--,n.push(n[y-1],n[y]);y>i;)n[y]=n[y-2],y--;n[i]=o,n[i+1]=c}}(n,c,i,o)),c}function Al(n,i){const o=Yo(n,i);if(o>=0)return n[1|o]}function Yo(n,i){return function Ou(n,i,o){let c=0,y=n.length>>o;for(;y!==c;){const O=c+(y-c>>1),W=n[O<<o];if(i===W)return O<<o;W>i?y=O:c=O+1}return~(y<<o)}(n,i,1)}const ci={},Qr=[],mi=new di(""),Ss=new di("",-1),Oo=new di("");class $o{get(i,o=Te){if(o===Te){const c=new Error(`NullInjectorError: No provider for ${Mo(i)}!`);throw c.name="NullInjectorError",c}return o}}var _a=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_a||{}),nl=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(nl||{}),ao=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ao||{});function Uc(n,i,o){let c=n.length;for(;;){const y=n.indexOf(i,o);if(-1===y)return y;if(0===y||n.charCodeAt(y-1)<=32){const O=i.length;if(y+O===c||n.charCodeAt(y+O)<=32)return y}o=y+1}}function Cl(n,i,o){let c=0;for(;c<o.length;){const y=o[c];if("number"==typeof y){if(0!==y)break;c++;const O=o[c++],W=o[c++],ce=o[c++];n.setAttribute(i,W,ce,O)}else{const O=y,W=o[++c];Dl(O)?n.setProperty(i,O,W):n.setAttribute(i,O,W),c++}}return c}function oa(n){return 3===n||4===n||6===n}function Dl(n){return 64===n.charCodeAt(0)}function Ra(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let c=0;c<i.length;c++){const y=i[c];"number"==typeof y?o=y:0===o||lu(n,o,y,null,-1===o||2===o?i[++c]:null)}}return n}function lu(n,i,o,c,y){let O=0,W=n.length;if(-1===i)W=-1;else for(;O<n.length;){const ce=n[O++];if("number"==typeof ce){if(ce===i){W=-1;break}if(ce>i){W=O-1;break}}}for(;O<n.length;){const ce=n[O];if("number"==typeof ce)break;if(ce===o){if(null===c)return void(null!==y&&(n[O+1]=y));if(c===n[O+1])return void(n[O+2]=y)}O++,null!==c&&O++,null!==y&&O++}-1!==W&&(n.splice(W,0,i),O=W+1),n.splice(O++,0,o),null!==c&&n.splice(O++,0,c),null!==y&&n.splice(O++,0,y)}const cu="ng-template";function zf(n,i,o,c){let y=0;if(c){for(;y<i.length&&"string"==typeof i[y];y+=2)if("class"===i[y]&&-1!==Uc(i[y+1].toLowerCase(),o,0))return!0}else if(kd(n))return!1;if(y=i.indexOf(1,y),y>-1){let O;for(;++y<i.length&&"string"==typeof(O=i[y]);)if(O.toLowerCase()===o)return!0}return!1}function kd(n){return 4===n.type&&n.value!==cu}function $f(n,i,o){return i===(4!==n.type||o?n.value:cu)}function Bm(n,i,o){let c=4;const y=n.attrs,O=null!==y?function Bc(n){for(let i=0;i<n.length;i++)if(oa(n[i]))return i;return n.length}(y):0;let W=!1;for(let ce=0;ce<i.length;ce++){const Ee=i[ce];if("number"!=typeof Ee){if(!W)if(4&c){if(c=2|1&c,""!==Ee&&!$f(n,Ee,o)||""===Ee&&1===i.length){if(rl(c))return!1;W=!0}}else if(8&c){if(null===y||!zf(n,y,Ee,o)){if(rl(c))return!1;W=!0}}else{const Xe=i[++ce],ct=Ld(Ee,y,kd(n),o);if(-1===ct){if(rl(c))return!1;W=!0;continue}if(""!==Xe){let Et;if(Et=ct>O?"":y[ct+1].toLowerCase(),2&c&&Xe!==Et){if(rl(c))return!1;W=!0}}}}else{if(!W&&!rl(c)&&!rl(Ee))return!1;if(W&&rl(Ee))continue;W=!1,c=Ee|1&c}}return rl(c)||W}function rl(n){return!(1&n)}function Ld(n,i,o,c){if(null===i)return-1;let y=0;if(c||!o){let O=!1;for(;y<i.length;){const W=i[y];if(W===n)return y;if(3===W||6===W)O=!0;else{if(1===W||2===W){let ce=i[++y];for(;"string"==typeof ce;)ce=i[++y];continue}if(4===W)break;if(0===W){y+=4;continue}}y+=O?1:2}return-1}return function Hf(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===i)return o;o++}return-1}(i,n)}function Eo(n,i,o=!1){for(let c=0;c<i.length;c++)if(Bm(n,i[c],o))return!0;return!1}function Vc(n,i){e:for(let o=0;o<i.length;o++){const c=i[o];if(n.length===c.length){for(let y=0;y<n.length;y++)if(n[y]!==c[y])continue e;return!0}}return!1}function ku(n,i){return n?":not("+i.trim()+")":i}function rd(n){let i=n[0],o=1,c=2,y="",O=!1;for(;o<n.length;){let W=n[o];if("string"==typeof W)if(2&c){const ce=n[++o];y+="["+W+(ce.length>0?'="'+ce+'"':"")+"]"}else 8&c?y+="."+W:4&c&&(y+=" "+W);else""!==y&&!rl(W)&&(i+=ku(O,y),y=""),c=W,O=O||!rl(c);o++}return""!==y&&(i+=ku(O,y)),i}function $e(n){return go(()=>{var i;const o=Zo(n),c={...o,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_a.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:null!==(i=n.signals)&&void 0!==i&&i,data:n.data||{},encapsulation:n.encapsulation||nl.Emulated,styles:n.styles||Qr,_:null,schemas:n.schemas||null,tView:null,id:""};Zs(c);const y=n.dependencies;return c.directiveDefs=Co(y,!1),c.pipeDefs=Co(y,!0),c.id=function $l(n){let i=0;const o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const y of o)i=Math.imul(31,i)+y.charCodeAt(0)|0;return i+=2147483648,"c"+i}(c),c})}function Me(n){return Ln(n)||Gr(n)}function qe(n){return null!==n}function Pt(n){return go(()=>({type:n.type,bootstrap:n.bootstrap||Qr,declarations:n.declarations||Qr,imports:n.imports||Qr,exports:n.exports||Qr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Vt(n,i){if(null==n)return ci;const o={};for(const y in n)if(n.hasOwnProperty(y)){const O=n[y];let W,ce,Ee=ao.None;var c;Array.isArray(O)?(Ee=O[0],W=O[1],ce=null!==(c=O[2])&&void 0!==c?c:W):(W=O,ce=O),i?(o[W]=Ee!==ao.None?[y,Ee]:y,i[W]=ce):o[W]=y}return o}function Vn(n){return go(()=>{const i=Zo(n);return Zs(i),i})}function xr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ln(n){return n[yl]||null}function Gr(n){return n[cc]||null}function Ci(n){return n[Fc]||null}function kr(n){const i=Ln(n)||Gr(n)||Ci(n);return null!==i&&i.standalone}function gi(n,i){const o=n[$a]||null;if(!o&&!0===i)throw new Error(`Type ${Mo(n)} does not have '\u0275mod' property.`);return o}function Zo(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:n.inputs||ci,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Qr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vt(n.inputs,i),outputs:Vt(n.outputs),debugInfo:null}}function Zs(n){var i;null===(i=n.features)||void 0===i||i.forEach(o=>o(n))}function Co(n,i){if(!n)return null;const o=i?Ci:Me;return()=>("function"==typeof n?n():n).map(c=>o(c)).filter(qe)}function pa(n){return{\u0275providers:n}}function uu(...n){return{\u0275providers:Nd(0,n),\u0275fromNgModule:!0}}function Nd(n,...i){const o=[],c=new Set;let y;const O=W=>{o.push(W)};return po(i,W=>{const ce=W;hc(ce,O,[],c)&&(y||(y=[]),y.push(ce))}),void 0!==y&&ma(y,O),o}function ma(n,i){for(let o=0;o<n.length;o++){const{ngModule:c,providers:y}=n[o];to(y,O=>{i(O,c)})}}function hc(n,i,o,c){if(!(n=hi(n)))return!1;let y=null,O=Po(n);const W=!O&&Ln(n);if(O||W){if(W&&!W.standalone)return!1;y=n}else{const Ee=n.ngModule;if(O=Po(Ee),!O)return!1;y=Ee}const ce=c.has(y);if(W){if(ce)return!1;if(c.add(y),W.dependencies){const Ee="function"==typeof W.dependencies?W.dependencies():W.dependencies;for(const Xe of Ee)hc(Xe,i,o,c)}}else{if(!O)return!1;{if(null!=O.imports&&!ce){let Xe;c.add(y);try{po(O.imports,ct=>{hc(ct,i,o,c)&&(Xe||(Xe=[]),Xe.push(ct))})}finally{}void 0!==Xe&&ma(Xe,i)}if(!ce){const Xe=Ks(y)||(()=>new y);i({provide:y,useFactory:Xe,deps:Qr},y),i({provide:Oo,useValue:y,multi:!0},y),i({provide:mi,useValue:()=>ve(y),multi:!0},y)}const Ee=O.providers;if(null!=Ee&&!ce){const Xe=n;to(Ee,ct=>{i(ct,Xe)})}}}return y!==n&&void 0!==n.providers}function to(n,i){for(let o of n)zl(o)&&(o=o.\u0275providers),Array.isArray(o)?to(o,i):i(o)}const rE=Ns({provide:String,useValue:Ns});function Xy(n){return null!==n&&"object"==typeof n&&rE in n}function Lu(n){return"function"==typeof n}const Wf=new di(""),Vm={},Ni={};let Gm;function Rl(){return void 0===Gm&&(Gm=new $o),Gm}class Hl{}class xc extends Hl{get destroyed(){return this._destroyed}constructor(i,o,c,y){super(),this.parent=o,this.source=c,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jd(i,W=>this.processProvider(W)),this.records.set(Ss,id(void 0,this)),y.has("environment")&&this.records.set(Hl,id(void 0,this));const O=this.records.get(Wf);null!=O&&"string"==typeof O.value&&this.scopes.add(O.value),this.injectorDefTypes=new Set(this.get(Oo,Qr,As.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const i=be(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of o)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(i)}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const o=ot(this),c=Ia(void 0);try{return i()}finally{ot(o),Ia(c)}}get(i,o=Te,c=As.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(su))return i[su](this);c=Lt(c);const O=ot(this),W=Ia(void 0);try{if(!(c&As.SkipSelf)){let Ee=this.records.get(i);if(void 0===Ee){const Xe=function qy(n){return"function"==typeof n||"object"==typeof n&&n instanceof di}(i)&&Ji(i);Ee=Xe&&this.injectableDefInScope(Xe)?id(Pl(i),Vm):null,this.records.set(i,Ee)}if(null!=Ee)return this.hydrate(i,Ee)}return(c&As.Self?Rl():this.parent).get(i,o=c&As.Optional&&o===Te?null:o)}catch(ce){if("NullInjectorError"===ce.name){if((ce[nn]=ce[nn]||[]).unshift(Mo(i)),O)throw ce;return function ar(n,i,o,c){const y=n[nn];throw i[St]&&y.unshift(i[St]),n.message=function Wr(n,i,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let y=Mo(i);if(Array.isArray(i))y=i.map(Mo).join(" -> ");else if("object"==typeof i){let O=[];for(let W in i)if(i.hasOwnProperty(W)){let ce=i[W];O.push(W+":"+("string"==typeof ce?JSON.stringify(ce):Mo(ce)))}y=`{${O.join(", ")}}`}return`${o}${c?"("+c+")":""}[${y}]: ${n.replace(jt,"\n  ")}`}("\n"+n.message,y,o,c),n.ngTokenPath=y,n[nn]=null,n}(ce,i,"R3InjectorError",this.source)}throw ce}finally{Ia(W),ot(O)}}resolveInjectorInitializers(){const i=be(null),o=ot(this),c=Ia(void 0);try{const O=this.get(mi,Qr,As.Self);for(const W of O)W()}finally{ot(o),Ia(c),be(i)}}toString(){const i=[],o=this.records;for(const c of o.keys())i.push(Mo(c));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Br(205,!1)}processProvider(i){let o=Lu(i=hi(i))?i:hi(i&&i.provide);const c=function il(n){return Xy(n)?id(void 0,n.useValue):id(gs(n),Vm)}(i);if(!Lu(i)&&!0===i.multi){let y=this.records.get(o);y||(y=id(void 0,Vm,!0),y.factory=()=>Sn(y.multi),this.records.set(o,y)),o=i,y.multi.push(i)}this.records.set(o,c)}hydrate(i,o){const c=be(null);try{return o.value===Vm&&(o.value=Ni,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Xf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{be(c)}}injectableDefInScope(i){if(!i.providedIn)return!1;const o=hi(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Pl(n){const i=Ji(n),o=null!==i?i.factory:Ks(n);if(null!==o)return o;if(n instanceof di)throw new Br(204,!1);if(n instanceof Function)return function Th(n){if(n.length>0)throw new Br(204,!1);const o=function vo(n){return n&&(n[Ao]||n[Vs])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Br(204,!1)}function gs(n,i,o){let c;if(Lu(n)){const y=hi(n);return Ks(y)||Pl(y)}if(Xy(n))c=()=>hi(n.useValue);else if(function Pb(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...Sn(n.deps||[]));else if(function Rb(n){return!(!n||!n.useExisting)}(n))c=()=>ve(hi(n.useExisting));else{const y=hi(n&&(n.useClass||n.provide));if(!function sd(n){return!!n.deps}(n))return Ks(y)||Pl(y);c=()=>new y(...Sn(n.deps))}return c}function id(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function jd(n,i){for(const o of n)Array.isArray(o)?jd(o,i):o&&zl(o)?jd(o.\u0275providers,i):i(o)}function Mh(n,i){n instanceof xc&&n.assertNotDestroyed();const c=ot(n),y=Ia(void 0);try{return i()}finally{ot(c),Ia(y)}}function Ah(){return void 0!==ec()||null!=function rs(){return Nr}()}const Ho=0,Xr=1,es=2,Pa=3,ko=4,ba=5,ja=6,od=7,Do=8,Fa=9,sl=10,ps=11,ad=12,Yf=13,Nu=14,Jo=15,zc=16,Ua=17,_l=18,ld=19,cd=20,fc=21,$c=22,dl=23,Vi=25,ud=1,nc=7,hu=9,wa=10;var Vd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vd||{});function Wa(n){return Array.isArray(n)&&"object"==typeof n[ud]}function bl(n){return Array.isArray(n)&&!0===n[ud]}function Gd(n){return!!(4&n.flags)}function Hc(n){return n.componentOffset>-1}function Ch(n){return!(1&~n.flags)}function Sc(n){return!!n.template}function zd(n){return!!(512&n[es])}class Vb{constructor(i,o,c){this.previousValue=i,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function iv(n,i,o,c){null!==i?i.applyValueToInputSignal(i,c):n[o]=c}function Wc(){return Uu}function Uu(n){return n.type.prototype.ngOnChanges&&(n.setInput=tp),ep}function ep(){const n=sv(this),i=null==n?void 0:n.current;if(i){const o=n.previous;if(o===ci)n.previous=i;else for(let c in i)o[c]=i[c];n.current=null,this.ngOnChanges(i)}}function tp(n,i,o,c,y){const O=this.declaredInputs[c],W=sv(n)||function Gb(n,i){return n[np]=i}(n,{previous:ci,current:null}),ce=W.current||(W.current={}),Ee=W.previous,Xe=Ee[O];ce[O]=new Vb(Xe&&Xe.currentValue,o,Ee===ci),iv(n,i,y,o)}Wc.ngInherit=!0;const np="__ngSimpleChanges__";function sv(n){return n[np]||null}const Xc=function(n,i,o){};function zs(n){for(;Array.isArray(n);)n=n[Ho];return n}function $d(n,i){return zs(i[n])}function kl(n,i){return zs(i[n.index])}function Ba(n,i){return n.data[i]}function rc(n,i){const o=i[n];return Wa(o)?o:o[Ho]}function Zm(n){return!(128&~n[es])}function Ll(n,i){return null==i?null:n[i]}function Oh(n){n[Ua]=0}function Jm(n){1024&n[es]||(n[es]|=1024,Zm(n)&&Lh(n))}function Bu(n){var i;return!!(9216&n[es]||null!==(i=n[dl])&&void 0!==i&&i.dirty)}function kh(n){var i;null===(i=n[sl].changeDetectionScheduler)||void 0===i||i.notify(7),64&n[es]&&(n[es]|=1024),Bu(n)&&Lh(n)}function Lh(n){var i;null===(i=n[sl].changeDetectionScheduler)||void 0===i||i.notify(0);let o=Kc(n);for(;null!==o&&!(8192&o[es])&&(o[es]|=8192,Zm(o));)o=Kc(o)}function Ec(n,i){if(!(256&~n[es]))throw new Br(911,!1);null===n[fc]&&(n[fc]=[]),n[fc].push(i)}function Kc(n){const i=n[Pa];return bl(i)?i[Pa]:i}const ds={lFrame:dp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Vu=!1;function Xd(){return ds.bindingsEnabled}function Gu(){return null!==ds.skipHydrationRootTNode}function Sr(){return ds.lFrame.lView}function $s(){return ds.lFrame.tView}function tg(n){return ds.lFrame.contextLView=n,n[Do]}function Tc(n){return ds.lFrame.contextLView=null,n}function bo(){let n=ov();for(;null!==n&&64===n.type;)n=n.parent;return n}function ov(){return ds.lFrame.currentTNode}function Xl(n,i){const o=ds.lFrame;o.currentTNode=n,o.isParent=i}function Nh(){return ds.lFrame.isParent}function jh(){ds.lFrame.isParent=!1}function lv(){return Vu}function cv(n){Vu=n}function Xa(){const n=ds.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Mc(){return ds.lFrame.bindingIndex++}function pu(n){const i=ds.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Wb(n,i){const o=ds.lFrame;o.bindingIndex=o.bindingRootIndex=n,rg(i)}function rg(n){ds.lFrame.currentDirectiveIndex=n}function cp(){return ds.lFrame.currentQueryIndex}function Uh(n){ds.lFrame.currentQueryIndex=n}function up(n){const i=n[Xr];return 2===i.type?i.declTNode:1===i.type?n[ba]:null}function hv(n,i,o){if(o&As.SkipSelf){let y=i,O=n;for(;!(y=y.parent,null!==y||o&As.Host||(y=up(O),null===y||(O=O[Nu],10&y.type))););if(null===y)return!1;i=y,n=O}const c=ds.lFrame=Bh();return c.currentTNode=i,c.lView=n,!0}function qd(n){const i=Bh(),o=n[Xr];ds.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Bh(){const n=ds.lFrame,i=null===n?null:n.child;return null===i?dp(n):i}function dp(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function hp(){const n=ds.lFrame;return ds.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Kd=hp;function Vh(){const n=hp();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qa(){return ds.lFrame.selectedIndex}function Yc(n){ds.lFrame.selectedIndex=n}function Io(){const n=ds.lFrame;return Ba(n.tView,n.selectedIndex)}let sg=!0;function Ac(){return sg}function ql(n){sg=n}function pp(n,i){for(let Xe=i.directiveStart,ct=i.directiveEnd;Xe<ct;Xe++){const un=n.data[Xe].type.prototype,{ngAfterContentInit:yn,ngAfterContentChecked:pn,ngAfterViewInit:ir,ngAfterViewChecked:Or,ngOnDestroy:$r}=un;var o,c,y,O,W,ce,Ee;yn&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-Xe,yn),pn&&((null!==(c=n.contentHooks)&&void 0!==c?c:n.contentHooks=[]).push(Xe,pn),(null!==(y=n.contentCheckHooks)&&void 0!==y?y:n.contentCheckHooks=[]).push(Xe,pn)),ir&&(null!==(O=n.viewHooks)&&void 0!==O?O:n.viewHooks=[]).push(-Xe,ir),Or&&((null!==(W=n.viewHooks)&&void 0!==W?W:n.viewHooks=[]).push(Xe,Or),(null!==(ce=n.viewCheckHooks)&&void 0!==ce?ce:n.viewCheckHooks=[]).push(Xe,Or)),null!=$r&&(null!==(Ee=n.destroyHooks)&&void 0!==Ee?Ee:n.destroyHooks=[]).push(Xe,$r)}}function mp(n,i,o){pv(n,i,3,o)}function gp(n,i,o,c){(3&n[es])===o&&pv(n,i,o,c)}function og(n,i){let o=n[es];(3&o)===i&&(o&=16383,o+=1,n[es]=o)}function pv(n,i,o,c){const O=null!=c?c:-1,W=i.length-1;let ce=0;for(let Ee=void 0!==c?65535&n[Ua]:0;Ee<W;Ee++)if("number"==typeof i[Ee+1]){if(ce=i[Ee],null!=c&&ce>=c)break}else i[Ee]<0&&(n[Ua]+=65536),(ce<O||-1==O)&&(Kb(n,o,i,Ee),n[Ua]=(4294901760&n[Ua])+Ee+2),Ee++}function mv(n,i){Xc(4,n,i);const o=be(null);try{i.call(n)}finally{be(o),Xc(5,n,i)}}function Kb(n,i,o,c){const y=o[c]<0,O=o[c+1],ce=n[y?-o[c]:o[c]];y?n[es]>>14<n[Ua]>>16&&(3&n[es])===i&&(n[es]+=16384,mv(ce,O)):mv(ce,O)}const Zd=-1;class Gh{constructor(i,o,c){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}const yp={};class Zc{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,c){c=Lt(c);const y=this.injector.get(i,yp,c);return y!==yp||o===yp?y:this.parentInjector.get(i,o,c)}}function Qd(n){return n!==Zd}function $h(n){return 32767&n}function Wh(n,i){let o=function Hh(n){return n>>16}(n),c=i;for(;o>0;)c=c[Nu],o--;return c}let vp=!0;function zu(n){const i=vp;return vp=n,i}const _v=255,Jc=5;let bv=0;const Cc={};function _p(n,i){const o=bp(n,i);if(-1!==o)return o;const c=i[Xr];c.firstCreatePass&&(n.injectorIndex=i.length,cg(c.data,n),cg(i,null),cg(c.blueprint,null));const y=md(n,i),O=n.injectorIndex;if(Qd(y)){const W=$h(y),ce=Wh(y,i),Ee=ce[Xr].data;for(let Xe=0;Xe<8;Xe++)i[O+Xe]=ce[W+Xe]|Ee[W+Xe]}return i[O+8]=y,O}function cg(n,i){n.push(0,0,0,0,0,0,0,0,i)}function bp(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function md(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,y=i;for(;null!==y;){if(c=xv(y),null===c)return Zd;if(o++,y=y[Nu],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return Zd}function gd(n,i,o){!function lg(n,i,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(uc)&&(c=o[uc]),null==c&&(c=o[uc]=bv++);const y=c&_v;i.data[n+(y>>Jc)]|=1<<y}(n,i,o)}function wp(n,i,o){if(o&As.Optional||void 0!==n)return n;ou()}function wv(n,i,o,c){if(o&As.Optional&&void 0===c&&(c=null),!(o&(As.Self|As.Host))){const y=n[Fa],O=Ia(void 0);try{return y?y.get(i,c,o&As.Optional):_o(i,c,o&As.Optional)}finally{Ia(O)}}return wp(c,0,o)}function Xh(n,i,o,c=As.Default,y){if(null!==n){if(2048&i[es]&&!(c&As.Self)){const W=function Qb(n,i,o,c,y){let O=n,W=i;for(;null!==O&&null!==W&&2048&W[es]&&!(512&W[es]);){const ce=xp(O,W,o,c|As.Self,Cc);if(ce!==Cc)return ce;let Ee=O.parent;if(!Ee){const Xe=W[cd];if(Xe){const ct=Xe.get(o,Cc,c);if(ct!==Cc)return ct}Ee=xv(W),W=W[Nu]}O=Ee}return y}(n,i,o,c,Cc);if(W!==Cc)return W}const O=xp(n,i,o,c,Cc);if(O!==Cc)return O}return wv(i,o,c,y)}function xp(n,i,o,c,y){const O=function Jb(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(uc)?n[uc]:void 0;return"number"==typeof i?i>=0?i&_v:Dc:i}(o);if("function"==typeof O){if(!hv(i,n,c))return c&As.Host?wp(y,0,c):wv(i,o,c,y);try{let W;if(W=O(c),null!=W||c&As.Optional)return W;ou()}finally{Kd()}}else if("number"==typeof O){let W=null,ce=bp(n,i),Ee=Zd,Xe=c&As.Host?i[Jo][ba]:null;for((-1===ce||c&As.SkipSelf)&&(Ee=-1===ce?md(n,i):i[ce+8],Ee!==Zd&&fg(c,!1)?(W=i[Xr],ce=$h(Ee),i=Wh(Ee,i)):ce=-1);-1!==ce;){const ct=i[Xr];if(hg(O,ce,ct.data)){const Et=dg(ce,i,o,W,c,Xe);if(Et!==Cc)return Et}Ee=i[ce+8],Ee!==Zd&&fg(c,i[Xr].data[ce+8]===Xe)&&hg(O,ce,i)?(W=ct,ce=$h(Ee),i=Wh(Ee,i)):ce=-1}}return y}function dg(n,i,o,c,y,O){const W=i[Xr],ce=W.data[n+8],ct=eh(ce,W,o,null==c?Hc(ce)&&vp:c!=W&&!!(3&ce.type),y&As.Host&&O===ce);return null!==ct?mu(i,W,ct,ce):Cc}function eh(n,i,o,c,y){const O=n.providerIndexes,W=i.data,ce=1048575&O,Ee=n.directiveStart,ct=O>>20,un=y?ce+ct:n.directiveEnd;for(let yn=c?ce:ce+ct;yn<un;yn++){const pn=W[yn];if(yn<Ee&&o===pn||yn>=Ee&&pn.type===o)return yn}if(y){const yn=W[Ee];if(yn&&Sc(yn)&&yn.type===o)return Ee}return null}function mu(n,i,o,c){let y=n[o];const O=i.data;if(function Yb(n){return n instanceof Gh}(y)){const W=y;W.resolving&&function Ml(n,i){throw i&&i.join(" > "),new Br(-200,n)}(function Ys(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():os(n)}(O[o]));const ce=zu(W.canSeeViewProviders);W.resolving=!0;const Xe=W.injectImpl?Ia(W.injectImpl):null;hv(n,c,As.Default);try{y=n[o]=W.factory(void 0,O,n,c),i.firstCreatePass&&o>=c.directiveStart&&function qb(n,i,o){const{ngOnChanges:c,ngOnInit:y,ngDoCheck:O}=i.type.prototype;if(c){var W,ce;const Et=Uu(i);(null!==(W=o.preOrderHooks)&&void 0!==W?W:o.preOrderHooks=[]).push(n,Et),(null!==(ce=o.preOrderCheckHooks)&&void 0!==ce?ce:o.preOrderCheckHooks=[]).push(n,Et)}var Ee,Xe,ct;y&&(null!==(Ee=o.preOrderHooks)&&void 0!==Ee?Ee:o.preOrderHooks=[]).push(0-n,y),O&&((null!==(Xe=o.preOrderHooks)&&void 0!==Xe?Xe:o.preOrderHooks=[]).push(n,O),(null!==(ct=o.preOrderCheckHooks)&&void 0!==ct?ct:o.preOrderCheckHooks=[]).push(n,O))}(o,O[o],i)}finally{null!==Xe&&Ia(Xe),zu(ce),W.resolving=!1,Kd()}}return y}function hg(n,i,o){return!!(o[i+(n>>Jc)]&1<<n)}function fg(n,i){return!(n&As.Self||n&As.Host&&i)}class ga{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,c){return Xh(this._tNode,this._lView,i,Lt(c),o)}}function Dc(){return new ga(bo(),Sr())}function pg(n){return go(()=>{const i=n.prototype.constructor,o=i[vl]||mg(i),c=Object.prototype;let y=Object.getPrototypeOf(n.prototype).constructor;for(;y&&y!==c;){const O=y[vl]||mg(y);if(O&&O!==o)return O;y=Object.getPrototypeOf(y)}return O=>new O})}function mg(n){return tl(n)?()=>{const i=mg(hi(n));return i&&i()}:Ks(n)}function xv(n){const i=n[Xr],o=i.type;return 2===o?i.declTNode:1===o?n[ba]:null}function qh(n){return function ug(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const c=o.length;let y=0;for(;y<c;){const O=o[y];if(oa(O))break;if(0===O)y+=2;else if("number"==typeof O)for(y++;y<c&&"string"==typeof o[y];)y++;else{if(O===i)return o[y+1];y+=2}}}return null}(bo(),n)}function Av(n,i=null,o=null,c){const y=Ic(n,i,o,c);return y.resolveInjectorInitializers(),y}function Ic(n,i=null,o=null,c,y=new Set){const O=[o||Qr,uu(n)];return c=c||("object"==typeof n?void 0:Mo(n)),new xc(O,i||Rl(),c||null,y)}class ya{static create(i,o){if(Array.isArray(i))return Av({name:""},o,i,"");{var c;const y=null!==(c=i.name)&&void 0!==c?c:"";return Av({name:y},i.parent,i.providers,y)}}}(ns=ya).THROW_IF_NOT_FOUND=Te,ns.NULL=new $o,ns.\u0275prov=Zr({token:ns,providedIn:"any",factory:()=>ve(Ss)}),ns.__NG_ELEMENT_ID__=-1,new di("").__NG_ELEMENT_ID__=n=>{const i=bo();if(null===i)throw new Br(204,!1);if(2&i.type)return i.value;if(n&As.Optional)return null;throw new Br(204,!1)};function $u(n){return n.ngOriginalError}let gu=(()=>{var n;class i{}return(n=i).__NG_ELEMENT_ID__=o1,n.__NG_ENV_ID__=o=>o,i})();class s1 extends gu{constructor(i){super(),this._lView=i}onDestroy(i){return Ec(this._lView,i),()=>function Wd(n,i){if(null===n[fc])return;const o=n[fc].indexOf(i);-1!==o&&n[fc].splice(o,1)}(this._lView,i)}}function o1(){return new s1(Sr())}let Kl=(()=>{var n;class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _t.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(n=i).\u0275prov=Zr({token:n,providedIn:"root",factory:()=>new n}),i})();const aa=class l1 extends Ft.B{constructor(i=!1){var o,c;super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=i,Ah()&&(this.destroyRef=null!==(o=lt(gu,{optional:!0}))&&void 0!==o?o:void 0,this.pendingTasks=null!==(c=lt(Kl,{optional:!0}))&&void 0!==c?c:void 0)}emit(i){const o=be(null);try{super.next(i)}finally{be(o)}}subscribe(i,o,c){let y=i,O=o||(()=>null),W=c;if(i&&"object"==typeof i){var ce,Ee,Xe;const Et=i;y=null===(ce=Et.next)||void 0===ce?void 0:ce.bind(Et),O=null===(Ee=Et.error)||void 0===Ee?void 0:Ee.bind(Et),W=null===(Xe=Et.complete)||void 0===Xe?void 0:Xe.bind(Et)}this.__isAsync&&(O=this.wrapInTimeout(O),y&&(y=this.wrapInTimeout(y)),W&&(W=this.wrapInTimeout(W)));const ct=super.subscribe({next:y,error:O,complete:W});return i instanceof Wt.yU&&i.add(ct),ct}wrapInTimeout(i){return o=>{var c;const y=null===(c=this.pendingTasks)||void 0===c?void 0:c.add();setTimeout(()=>{var O;i(o),void 0!==y&&(null===(O=this.pendingTasks)||void 0===O||O.remove(y))})}}};function pc(...n){}function Cv(n){let i,o;function c(){n=pc;try{void 0!==o&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(o),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{n(),c()}),"function"==typeof requestAnimationFrame&&(o=requestAnimationFrame(()=>{n(),c()})),()=>c()}function ic(n){return queueMicrotask(()=>n()),()=>{n=pc}}class la{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),typeof Zone>"u")throw new Br(908,!1);Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!c&&o,y.shouldCoalesceRunChangeDetection=c,y.callbackScheduled=!1,function c1(n){const i=()=>{!function dE(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{Cv(()=>{n.callbackScheduled=!1,yu(n),n.isCheckStableRunning=!0,Dv(n),n.isCheckStableRunning=!1})}),yu(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,y,O,W,ce)=>{if(function Rv(n){return Pv(n,"__ignore_ng_zone__")}(ce))return o.invokeTask(y,O,W,ce);try{return Iv(n),o.invokeTask(y,O,W,ce)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===O.type||n.shouldCoalesceRunChangeDetection)&&i(),Ep(n)}},onInvoke:(o,c,y,O,W,ce,Ee)=>{try{return Iv(n),o.invoke(y,O,W,ce,Ee)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function bg(n){return Pv(n,"__scheduler_tick__")}(ce)&&i(),Ep(n)}},onHasTask:(o,c,y,O)=>{o.hasTask(y,O),c===y&&("microTask"==O.change?(n._hasPendingMicrotasks=O.microTask,yu(n),Dv(n)):"macroTask"==O.change&&(n.hasPendingMacrotasks=O.macroTask))},onHandleError:(o,c,y,O)=>(o.handleError(y,O),n.runOutsideAngular(()=>n.onError.emit(O)),!1)})}(y)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Br(909,!1)}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Br(909,!1)}run(i,o,c){return this._inner.run(i,o,c)}runTask(i,o,c,y){const O=this._inner,W=O.scheduleEventTask("NgZoneEvent: "+y,i,Sp,pc,pc);try{return O.runTask(W,o,c)}finally{O.cancelTask(W)}}runGuarded(i,o,c){return this._inner.runGuarded(i,o,c)}runOutsideAngular(i){return this._outer.run(i)}}const Sp={};function Dv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yu(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Iv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ep(n){n._nesting--,Dv(n)}class Tp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(i,o,c){return i.apply(o,c)}runGuarded(i,o,c){return i.apply(o,c)}runOutsideAngular(i){return i()}runTask(i,o,c,y){return i.apply(o,c)}}function Pv(n,i){var o;return!(!Array.isArray(n)||1!==n.length)&&!0===(null===(o=n[0])||void 0===o||null===(o=o.data)||void 0===o?void 0:o[i])}class Rc{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&$u(i);for(;o&&$u(o);)o=$u(o);return o||null}}const Zh=new di("",{providedIn:"root",factory:()=>{const n=lt(la),i=lt(Rc);return o=>n.runOutsideAngular(()=>i.handleError(o))}});function Lv(){return ih(bo(),Sr())}function ih(n,i){return new Jh(kl(n,i))}let Jh=(()=>{class i{constructor(c){this.nativeElement=c}}return i.__NG_ELEMENT_ID__=Lv,i})();function Nv(n){return n instanceof Jh?n.nativeElement:n}function xg(){return this._results[Symbol.iterator]()}class vu{get changes(){var i;return null!==(i=this._changes)&&void 0!==i?i:this._changes=new aa}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const o=vu.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=xg)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){this.dirty=!1;const c=function us(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Go(n,i,o){if(n.length!==i.length)return!1;for(let c=0;c<n.length;c++){let y=n[c],O=i[c];if(o&&(y=o(y),O=o(O)),O!==y)return!1}return!0}(this._results,c,o))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(i){this._onDirty=i}setDirty(){var i;this.dirty=!0,null===(i=this._onDirty)||void 0===i||i.call(this)}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function ef(n){return!(128&~n.flags)}const Sg=new Map;let Ap=0;const nf="__ngContext__";function wl(n,i){Wa(i)?(n[nf]=i[ld],function pE(n){Sg.set(n[ld],n)}(i)):n[nf]=i}function Gv(n){return $v(n[ad])}function zv(n){return $v(n[ko])}function $v(n){for(;null!==n&&!bl(n);)n=n[ko];return n}let Dp;function vE(n){Dp=n}const oh=new di("",{providedIn:"root",factory:()=>Zv}),Zv="ng",E1=new di(""),Ip=new di("",{providedIn:"platform",factory:()=>"unknown"}),_E=new di(""),Jv=new di("",{providedIn:"root",factory:()=>{var n;return(null===(n=function _u(){if(void 0!==Dp)return Dp;if(typeof document<"u")return document;throw new Br(210,!1)}().body)||void 0===n||null===(n=n.querySelector("[ngCspNonce]"))||void 0===n?void 0:n.getAttribute("ngCspNonce"))||null}});let C1=()=>null;function Qv(n,i,o=!1){return C1(n,i,o)}const a0=new di("",{providedIn:"root",factory:()=>!1});let Vp,Gp;function lh(n){var i;return(null===(i=function Lg(){if(void 0===Vp&&(Vp=null,ho.trustedTypes))try{Vp=ho.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vp}())||void 0===i?void 0:i.createHTML(n))||n}function h0(n){var i;return(null===(i=function Ng(){if(void 0===Gp&&(Gp=null,ho.trustedTypes))try{Gp=ho.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gp}())||void 0===i?void 0:i.createScriptURL(n))||n}class Ed{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Js})`}}class k1 extends Ed{getTypeName(){return"HTML"}}class L1 extends Ed{getTypeName(){return"Style"}}class N1 extends Ed{getTypeName(){return"Script"}}class j1 extends Ed{getTypeName(){return"URL"}}class F1 extends Ed{getTypeName(){return"ResourceURL"}}function bu(n){return n instanceof Ed?n.changingThisBreaksApplicationSecurity:n}function ch(n,i){const o=function U1(n){return n instanceof Ed&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Js})`)}return o===i}function B1(n){return new k1(n)}function V1(n){return new L1(n)}function G1(n){return new N1(n)}function z1(n){return new j1(n)}function $1(n){return new F1(n)}class H1{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(lh(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class W1{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=lh(i),o}}const q1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zp(n){return(n=String(n)).match(q1)?n:"unsafe:"+n}function wu(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function uf(...n){const i={};for(const o of n)for(const c in o)o.hasOwnProperty(c)&&(i[c]=!0);return i}const p0=wu("area,br,col,hr,img,wbr"),m0=wu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),g0=wu("rp,rt"),jg=uf(p0,uf(m0,wu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uf(g0,wu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uf(g0,m0)),Fg=wu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),y0=uf(Fg,wu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K1=wu("script,style,template");class Y1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,c=!0,y=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)y.push(o),o=Q1(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let O=J1(o);if(O){o=O;break}o=y.pop()}return this.buf.join("")}startElement(i){const o=v0(i).toLowerCase();if(!jg.hasOwnProperty(o))return this.sanitizedSomething=!0,!K1.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=i.attributes;for(let y=0;y<c.length;y++){const O=c.item(y),W=O.name,ce=W.toLowerCase();if(!y0.hasOwnProperty(ce)){this.sanitizedSomething=!0;continue}let Ee=O.value;Fg[ce]&&(Ee=zp(Ee)),this.buf.push(" ",W,'="',b0(Ee),'"')}return this.buf.push(">"),!0}endElement(i){const o=v0(i).toLowerCase();jg.hasOwnProperty(o)&&!p0.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(b0(i))}}function J1(n){const i=n.nextSibling;if(i&&n!==i.previousSibling)throw _0(i);return i}function Q1(n){const i=n.firstChild;if(i&&function Z1(n,i){return(n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,i))throw _0(i);return i}function v0(n){const i=n.nodeName;return"string"==typeof i?i:"FORM"}function _0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const ew=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tw=/([^\#-~ |!])/g;function b0(n){return n.replace(/&/g,"&amp;").replace(ew,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(tw,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $p;function w0(n,i){let o=null;try{$p=$p||function f0(n){const i=new W1(n);return function X1(){try{return!!(new window.DOMParser).parseFromString(lh(""),"text/html")}catch{return!1}}()?new H1(i):i}(n);let c=i?String(i):"";o=$p.getInertBodyElement(c);let y=5,O=c;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,c=O,O=o.innerHTML,o=$p.getInertBodyElement(c)}while(c!==O);return lh((new Y1).sanitizeChildren(Ug(o)||o))}finally{if(o){const c=Ug(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Ug(n){return"content"in n&&function nw(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Td=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Td||{});function Bg(n){const i=df();return i?i.sanitize(Td.URL,n)||"":ch(n,"URL")?bu(n):zp(os(n))}function x0(n){const i=df();if(i)return h0(i.sanitize(Td.RESOURCE_URL,n)||"");if(ch(n,"ResourceURL"))return h0(bu(n));throw new Br(904,!1)}function S0(n,i,o){return function lw(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?x0:Bg}(i,o)(n)}function df(){const n=Sr();return n&&n[sl].sanitizer}const cw=/^>|^->|<!--|-->|--!>|<!-$/g,uw=/(<|>)/g,dw="\u200b$1\u200b";function gc(n){return n instanceof Function?n():n}var zg=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(zg||{});let C0;function D0(n,i){return C0(n,i)}function ff(n,i,o,c,y){if(null!=c){let O,W=!1;bl(c)?O=c:Wa(c)&&(W=!0,c=c[Ho]);const ce=zs(c);0===n&&null!==o?null==y?pf(i,o,ce):xl(i,o,ce,y||null,!0):1===n&&null!==o?xl(i,o,ce,y||null,!0):2===n?function Md(n,i,o){const c=qp(n,i);c&&function Aw(n,i,o,c){n.removeChild(i,o,c)}(n,c,i,o)}(i,ce,W):3===n&&i.destroyNode(ce),null!=O&&function Dw(n,i,o,c,y){const O=o[nc];O!==zs(o)&&ff(i,n,c,O,y);for(let ce=wa;ce<o.length;ce++){const Ee=o[ce];tu(Ee[Xr],Ee,n,i,c,O)}}(i,n,O,o,y)}}function R0(n,i){return n.createComment(function E0(n){return n.replace(cw,i=>i.replace(uw,dw))}(i))}function $g(n,i,o){return n.createElement(i,o)}function Tw(n,i){var o;null===(o=i[sl].changeDetectionScheduler)||void 0===o||o.notify(8),tu(n,i,i[ps],2,null,null)}function Mw(n,i){const o=n[hu],c=i[Pa];(Wa(c)||i[Jo]!==c[Pa][Jo])&&(n[es]|=Vd.HasTransplantedViews),null===o?n[hu]=[i]:o.push(i)}function P0(n,i){const o=n[hu],c=o.indexOf(i);o.splice(c,1)}function Xp(n,i){if(n.length<=wa)return;const o=wa+i,c=n[o];if(c){const y=c[zc];null!==y&&y!==n&&P0(y,c),i>0&&(n[o-1][ko]=c[ko]);const O=ll(n,wa+i);!function GE(n,i){Tw(n,i),i[Ho]=null,i[ba]=null}(c[Xr],c);const W=O[_l];null!==W&&W.detachView(O[Xr]),c[Pa]=null,c[ko]=null,c[es]&=-129}return c}function Hg(n,i){if(!(256&i[es])){const o=i[ps];o.destroyNode&&tu(n,i,o,3,null,null),function $E(n){let i=n[ad];if(!i)return O0(n[Xr],n);for(;i;){let o=null;if(Wa(i))o=i[ad];else{const c=i[wa];c&&(o=c)}if(!o){for(;i&&!i[ko]&&i!==n;)Wa(i)&&O0(i[Xr],i),i=i[Pa];null===i&&(i=n),Wa(i)&&O0(i[Xr],i),o=i&&i[ko]}i=o}}(i)}}function O0(n,i){if(256&i[es])return;const o=be(null);try{i[es]&=-129,i[es]|=256,i[dl]&&x(i[dl]),function XE(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const y=i[o[c]];if(!(y instanceof Gh)){const O=o[c+1];if(Array.isArray(O))for(let W=0;W<O.length;W+=2){const ce=y[O[W]],Ee=O[W+1];Xc(4,ce,Ee);try{Ee.call(ce)}finally{Xc(5,ce,Ee)}}else{Xc(4,y,O);try{O.call(y)}finally{Xc(5,y,O)}}}}}(n,i),function WE(n,i){const o=n.cleanup,c=i[od];if(null!==o)for(let O=0;O<o.length-1;O+=2)if("string"==typeof o[O]){const W=o[O+3];W>=0?c[W]():c[-W].unsubscribe(),O+=2}else o[O].call(c[o[O+1]]);null!==c&&(i[od]=null);const y=i[fc];if(null!==y){i[fc]=null;for(let O=0;O<y.length;O++)(0,y[O])()}}(n,i),1===i[Xr].type&&i[ps].destroy();const c=i[zc];if(null!==c&&bl(i[Pa])){c!==i[Pa]&&P0(c,i);const y=i[_l];null!==y&&y.detachView(n)}!function Uv(n){Sg.delete(n[ld])}(i)}finally{be(o)}}function Cs(n,i,o){return function wi(n,i,o){let c=i;for(;null!==c&&168&c.type;)c=(i=c).parent;if(null===c)return o[Ho];{const{componentOffset:y}=c;if(y>-1){const{encapsulation:O}=n.data[c.directiveStart+y];if(O===nl.None||O===nl.Emulated)return null}return kl(c,o)}}(n,i.parent,o)}function xl(n,i,o,c,y){n.insertBefore(i,o,c,y)}function pf(n,i,o){n.appendChild(i,o)}function qu(n,i,o,c,y){null!==c?xl(n,i,o,c,y):pf(n,i,o)}function qp(n,i){return n.parentNode(i)}function k0(n,i,o){return N0(n,i,o)}let Ku,N0=function L0(n,i,o){return 40&n.type?kl(n,o):null};function eu(n,i,o,c){const y=Cs(n,c,i),O=i[ps],ce=k0(c.parent||i[ba],c,i);if(null!=y)if(Array.isArray(o))for(let Ee=0;Ee<o.length;Ee++)qu(O,y,o[Ee],ce,!1);else qu(O,y,o,ce,!1);void 0!==Ku&&Ku(O,c,i,o,y)}function xu(n,i){if(null!==i){const o=i.type;if(3&o)return kl(i,n);if(4&o)return mf(-1,n[i.index]);if(8&o){const c=i.child;if(null!==c)return xu(n,c);{const y=n[i.index];return bl(y)?mf(-1,y):zs(y)}}if(128&o)return xu(n,i.next);if(32&o)return D0(i,n)()||zs(n[i.index]);{const c=Xg(n,i);return null!==c?Array.isArray(c)?c[0]:xu(Kc(n[Jo]),c):xu(n,i.next)}}return null}function Xg(n,i){return null!==i?n[Jo][ba].projection[i.projection]:null}function mf(n,i){const o=wa+n+1;if(o<i.length){const c=i[o],y=c[Xr].firstChild;if(null!==y)return xu(c,y)}return i[nc]}function gf(n,i,o,c,y,O,W){for(;null!=o;){if(128===o.type){o=o.next;continue}const ce=c[o.index],Ee=o.type;if(W&&0===i&&(ce&&wl(zs(ce),c),o.flags|=2),32&~o.flags)if(8&Ee)gf(n,i,o.child,c,y,O,!1),ff(i,n,y,ce,O);else if(32&Ee){const Xe=D0(o,c);let ct;for(;ct=Xe();)ff(i,n,y,ct,O);ff(i,n,y,ce,O)}else 16&Ee?qg(n,i,c,o,y,O):ff(i,n,y,ce,O);o=W?o.projectionNext:o.next}}function tu(n,i,o,c,y,O){gf(o,c,n.firstChild,i,y,O,!1)}function qg(n,i,o,c,y,O){const W=o[Jo],Ee=W[ba].projection[c.projection];if(Array.isArray(Ee))for(let Xe=0;Xe<Ee.length;Xe++)ff(i,n,y,Ee[Xe],O);else{let Xe=Ee;const ct=W[Pa];ef(c)&&(Xe.flags|=128),gf(n,i,Xe,ct,y,O,!0)}}function Kg(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function yf(n,i,o){const{mergedAttrs:c,classes:y,styles:O}=o;null!==c&&Cl(n,i,c),null!==y&&Kg(n,i,y),null!==O&&function Iw(n,i,o){n.setAttribute(i,"style",o)}(n,i,O)}const ys={};function Yg(n=1){Zg($s(),Sr(),qa()+n,!1)}function Zg(n,i,o,c){if(!c)if(3&~i[es]){const O=n.preOrderHooks;null!==O&&gp(i,O,0,o)}else{const O=n.preOrderCheckHooks;null!==O&&mp(i,O,o)}Yc(o)}function Yu(n,i=As.Default){const o=Sr();return null===o?ve(n,i):Xh(bo(),o,hi(n),i)}function F0(){throw new Error("invalid")}function U0(n,i,o,c,y,O){const W=be(null);try{let ce=null;y&ao.SignalBased&&(ce=i[c][l]),null!==ce&&void 0!==ce.transformFn&&(O=ce.transformFn(O)),y&ao.HasDecoratorInputTransform&&(O=n.inputTransforms[c].call(i,O)),null!==n.setInput?n.setInput(i,ce,O,o,c):iv(i,ce,c,O)}finally{be(W)}}function Yp(n,i,o,c,y,O,W,ce,Ee,Xe,ct){const Et=i.blueprint.slice();return Et[Ho]=y,Et[es]=204|c,(null!==Xe||n&&2048&n[es])&&(Et[es]|=2048),Oh(Et),Et[Pa]=Et[Nu]=n,Et[Do]=o,Et[sl]=W||n&&n[sl],Et[ps]=ce||n&&n[ps],Et[Fa]=Ee||n&&n[Fa]||null,Et[ba]=O,Et[ld]=function Fv(){return Ap++}(),Et[ja]=ct,Et[cd]=Xe,Et[Jo]=2==i.type?n[Jo]:Et,Et}function Ad(n,i,o,c,y){let O=n.data[i];if(null===O)O=function Jg(n,i,o,c,y){const O=ov(),W=Nh(),Ee=n.data[i]=function tm(n,i,o,c,y,O){let W=i?i.injectorIndex:-1,ce=0;return Gu()&&(ce|=128),{type:o,index:c,insertBeforeIndex:null,injectorIndex:W,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:ce,providerIndexes:0,value:y,attrs:O,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,W?O:O&&O.parent,o,i,c,y);return null===n.firstChild&&(n.firstChild=Ee),null!==O&&(W?null==O.child&&null!==Ee.parent&&(O.child=Ee):null===O.next&&(O.next=Ee,Ee.prev=O)),Ee}(n,i,o,c,y),function Fh(){return ds.lFrame.inI18n}()&&(O.flags|=32);else if(64&O.type){O.type=o,O.value=c,O.attrs=y;const W=function fd(){const n=ds.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();O.injectorIndex=null===W?-1:W.injectorIndex}return Xl(O,!0),O}function vf(n,i,o,c){if(0===o)return-1;const y=i.length;for(let O=0;O<o;O++)i.push(c),n.blueprint.push(c),n.data.push(null);return y}function Qg(n,i,o,c,y){const O=qa(),W=2&c;try{Yc(-1),W&&i.length>Vi&&Zg(n,i,Vi,!1),Xc(W?2:0,y),o(c,y)}finally{Yc(O),Xc(W?3:1,y)}}function Zp(n,i,o){if(Gd(i)){const c=be(null);try{const O=i.directiveEnd;for(let W=i.directiveStart;W<O;W++){const ce=n.data[W];ce.contentQueries&&ce.contentQueries(1,o[W],W)}}finally{be(c)}}}function Jp(n,i,o){Xd()&&(function Fw(n,i,o,c){const y=o.directiveStart,O=o.directiveEnd;Hc(o)&&function Hw(n,i,o){const c=kl(i,n),y=ey(o);let W=16;o.signals?W=4096:o.onPush&&(W=64);const ce=nm(n,Yp(n,y,null,W,c,i,null,n[sl].rendererFactory.createRenderer(c,o),null,null,null));n[i.index]=ce}(i,o,n.data[y+o.componentOffset]),n.firstCreatePass||_p(o,i),wl(c,i);const W=o.initialInputs;for(let ce=y;ce<O;ce++){const Ee=n.data[ce],Xe=mu(i,n,ce,o);wl(Xe,i),null!==W&&Ww(0,ce-y,Xe,Ee,0,W),Sc(Ee)&&(rc(o.index,i)[Do]=mu(i,n,ce,o))}}(n,i,o,kl(o,i)),!(64&~o.flags)&&W0(n,i,o))}function Qp(n,i,o=kl){const c=i.localNames;if(null!==c){let y=i.index+1;for(let O=0;O<c.length;O+=2){const W=c[O+1],ce=-1===W?o(i,n):n[W];n[y++]=ce}}}function ey(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=em(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):i}function em(n,i,o,c,y,O,W,ce,Ee,Xe,ct){const Et=Vi+c,un=Et+y,yn=function B0(n,i){const o=[];for(let c=0;c<i;c++)o.push(c<n?null:ys);return o}(Et,un),pn="function"==typeof Xe?Xe():Xe;return yn[Xr]={type:n,blueprint:yn,template:o,queries:null,viewQuery:ce,declTNode:i,data:yn.slice().fill(null,Et),bindingStartIndex:Et,expandoStartIndex:un,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof O?O():O,pipeRegistry:"function"==typeof W?W():W,firstChild:null,schemas:Ee,consts:pn,incompleteFirstPass:!1,ssrId:ct}}let ty=()=>null;function z0(n,i,o,c,y){for(let W in i){var O;if(!i.hasOwnProperty(W))continue;const ce=i[W];if(void 0===ce)continue;null!==(O=c)&&void 0!==O||(c={});let Ee,Xe=ao.None;Array.isArray(ce)?(Ee=ce[0],Xe=ce[1]):Ee=ce;let ct=W;if(null!==y){if(!y.hasOwnProperty(W))continue;ct=y[W]}0===n?$0(c,o,ct,Ee,Xe):$0(c,o,ct,Ee)}return c}function $0(n,i,o,c,y){let O;n.hasOwnProperty(o)?(O=n[o]).push(i,c):O=n[o]=[i,c],void 0!==y&&O.push(y)}function Yl(n,i,o,c,y,O,W,ce){const Ee=kl(i,o);let ct,Xe=i.inputs;!ce&&null!=Xe&&(ct=Xe[c])?(oy(n,o,ct,c,y),Hc(i)&&function kw(n,i){const o=rc(i,n);16&o[es]||(o[es]|=64)}(o,i.index)):3&i.type&&(c=function Ow(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),y=null!=W?W(y,i.value||"",c):y,O.setProperty(Ee,c,y))}function ny(n,i,o,c){if(Xd()){const y=null===c?null:{"":-1},O=function Bw(n,i){const o=n.directiveRegistry;let c=null,y=null;if(o)for(let W=0;W<o.length;W++){const ce=o[W];if(Eo(i,ce.selectors,!1))if(c||(c=[]),Sc(ce))if(null!==ce.findHostDirectiveDefs){const Ee=[];y=y||new Map,ce.findHostDirectiveDefs(ce,Ee,y),c.unshift(...Ee,ce),ry(n,i,Ee.length)}else c.unshift(ce),ry(n,i,0);else{var O;y=y||new Map,null===(O=ce.findHostDirectiveDefs)||void 0===O||O.call(ce,ce,c,y),c.push(ce)}}return null===c?null:[c,y]}(n,o);let W,ce;null===O?W=ce=null:[W,ce]=O,null!==W&&H0(n,i,o,W,y,ce),y&&function Vw(n,i,o){if(i){const c=n.localNames=[];for(let y=0;y<i.length;y+=2){const O=o[i[y+1]];if(null==O)throw new Br(-301,!1);c.push(i[y],O)}}}(o,c,y)}o.mergedAttrs=Ra(o.mergedAttrs,o.attrs)}function H0(n,i,o,c,y,O){for(let Et=0;Et<c.length;Et++)gd(_p(o,i),n,c[Et].type);!function zw(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,c.length);for(let Et=0;Et<c.length;Et++){const un=c[Et];un.providersResolver&&un.providersResolver(un)}let W=!1,ce=!1,Ee=vf(n,i,c.length,null);for(let Et=0;Et<c.length;Et++){const un=c[Et];o.mergedAttrs=Ra(o.mergedAttrs,un.hostAttrs),$w(n,o,i,Ee,un),Gw(Ee,un,y),null!==un.contentQueries&&(o.flags|=4),(null!==un.hostBindings||null!==un.hostAttrs||0!==un.hostVars)&&(o.flags|=64);const yn=un.type.prototype;var Xe,ct;!W&&(yn.ngOnChanges||yn.ngOnInit||yn.ngDoCheck)&&((null!==(Xe=n.preOrderHooks)&&void 0!==Xe?Xe:n.preOrderHooks=[]).push(o.index),W=!0),ce||!yn.ngOnChanges&&!yn.ngDoCheck||((null!==(ct=n.preOrderCheckHooks)&&void 0!==ct?ct:n.preOrderCheckHooks=[]).push(o.index),ce=!0),Ee++}!function Pw(n,i,o){const y=i.directiveEnd,O=n.data,W=i.attrs,ce=[];let Ee=null,Xe=null;for(let ct=i.directiveStart;ct<y;ct++){const Et=O[ct],un=o?o.get(Et):null,pn=un?un.outputs:null;Ee=z0(0,Et.inputs,ct,Ee,un?un.inputs:null),Xe=z0(1,Et.outputs,ct,Xe,pn);const ir=null===Ee||null===W||kd(i)?null:Xw(Ee,ct,W);ce.push(ir)}null!==Ee&&(Ee.hasOwnProperty("class")&&(i.flags|=8),Ee.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=ce,i.inputs=Ee,i.outputs=Xe}(n,o,O)}function W0(n,i,o){const c=o.directiveStart,y=o.directiveEnd,O=o.index,W=function dv(){return ds.lFrame.currentDirectiveIndex}();try{Yc(O);for(let ce=c;ce<y;ce++){const Ee=n.data[ce],Xe=i[ce];rg(ce),(null!==Ee.hostBindings||0!==Ee.hostVars||null!==Ee.hostAttrs)&&Uw(Ee,Xe)}}finally{Yc(-1),rg(W)}}function Uw(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function ry(n,i,o){var c;i.componentOffset=o,(null!==(c=n.components)&&void 0!==c?c:n.components=[]).push(i.index)}function Gw(n,i,o){if(o){if(i.exportAs)for(let c=0;c<i.exportAs.length;c++)o[i.exportAs[c]]=n;Sc(i)&&(o[""]=n)}}function $w(n,i,o,c,y){n.data[c]=y;const O=y.factory||(y.factory=Ks(y.type)),W=new Gh(O,Sc(y),Yu);n.blueprint[c]=W,o[c]=W,function Nw(n,i,o,c,y){const O=y.hostBindings;if(O){let W=n.hostBindingOpCodes;null===W&&(W=n.hostBindingOpCodes=[]);const ce=~i.index;(function jw(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(W)!=ce&&W.push(ce),W.push(o,c,O)}}(n,i,c,vf(n,o,y.hostVars,ys),y)}function nu(n,i,o,c,y,O){const W=kl(n,i);!function iy(n,i,o,c,y,O,W){if(null==O)n.removeAttribute(i,y,o);else{const ce=null==W?os(O):W(O,c||"",y);n.setAttribute(i,y,ce,o)}}(i[ps],W,O,n.value,o,c,y)}function Ww(n,i,o,c,y,O){const W=O[i];if(null!==W)for(let ce=0;ce<W.length;)U0(c,o,W[ce++],W[ce++],W[ce++],W[ce++])}function Xw(n,i,o){let c=null,y=0;for(;y<o.length;){const O=o[y];if(0!==O)if(5!==O){if("number"==typeof O)break;if(n.hasOwnProperty(O)){null===c&&(c=[]);const W=n[O];for(let ce=0;ce<W.length;ce+=3)if(W[ce]===i){c.push(O,W[ce+1],W[ce+2],o[y+1]);break}}y+=2}else y+=2;else y+=4}return c}function X0(n,i,o,c){return[n,!0,0,i,null,c,null,o,null,null]}function q0(n,i){const o=n.contentQueries;if(null!==o){const c=be(null);try{for(let y=0;y<o.length;y+=2){const W=o[y+1];if(-1!==W){const ce=n.data[W];Uh(o[y]),ce.contentQueries(2,i[W],W)}}}finally{be(c)}}}function nm(n,i){return n[ad]?n[Yf][ko]=i:n[ad]=i,n[Yf]=i,i}function sy(n,i,o){Uh(0);const c=be(null);try{i(n,o)}finally{be(c)}}function K0(n){var i;return null!==(i=n[od])&&void 0!==i?i:n[od]=[]}function Y0(n){var i;return null!==(i=n.cleanup)&&void 0!==i?i:n.cleanup=[]}function rm(n,i){const o=n[Fa],c=o?o.get(Rc,null):null;c&&c.handleError(i)}function oy(n,i,o,c,y){for(let O=0;O<o.length;){const W=o[O++],ce=o[O++],Ee=o[O++];U0(n.data[W],i[W],c,ce,Ee,y)}}function Su(n,i,o){const c=$d(i,n);!function Ew(n,i,o){n.setValue(i,o)}(n[ps],c,o)}function qw(n,i){const o=rc(i,n),c=o[Xr];!function Kw(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])}(c,o);const y=o[Ho];null!==y&&null===o[ja]&&(o[ja]=Qv(y,o[Fa])),ay(c,o,o[Do])}function ay(n,i,o){qd(i);try{var c;const y=n.viewQuery;null!==y&&sy(1,y,o);const O=n.template;null!==O&&Qg(n,i,O,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),null===(c=i[_l])||void 0===c||c.finishViewCreation(n),n.staticContentQueries&&q0(n,i),n.staticViewQueries&&sy(2,n.viewQuery,o);const W=n.components;null!==W&&function Yw(n,i){for(let o=0;o<i.length;o++)qw(n,i[o])}(i,W)}catch(y){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),y}finally{i[es]&=-5,Vh()}}function hh(n,i,o,c){const y=be(null);try{var O,W,ce;const Ee=i.tView,Et=Yp(n,Ee,o,4096&n[es]?4096:16,null,i,null,null,null!==(O=null==c?void 0:c.injector)&&void 0!==O?O:null,null!==(W=null==c?void 0:c.embeddedViewInjector)&&void 0!==W?W:null,null!==(ce=null==c?void 0:c.dehydratedView)&&void 0!==ce?ce:null);Et[zc]=n[i.index];const yn=n[_l];return null!==yn&&(Et[_l]=yn.createEmbeddedView(Ee)),ay(Ee,Et,o),Et}finally{be(y)}}function Eu(n,i){return!i||null===i.firstChild||ef(n)}function Cd(n,i,o,c=!0){const y=i[Xr];if(function HE(n,i,o,c){const y=wa+c,O=o.length;c>0&&(o[y-1][ko]=i),c<O-wa?(i[ko]=o[y],ia(o,wa+c,i)):(o.push(i),i[ko]=null),i[Pa]=o;const W=i[zc];null!==W&&o!==W&&Mw(W,i);const ce=i[_l];null!==ce&&ce.insertView(n),kh(i),i[es]|=128}(y,i,n,o),c){const W=mf(o,n),ce=i[ps],Ee=qp(ce,n[nc]);null!==Ee&&function zE(n,i,o,c,y,O){c[Ho]=y,c[ba]=i,tu(n,c,o,1,y,O)}(y,n[ba],ce,i,Ee,W)}const O=i[ja];null!==O&&null!==O.firstChild&&(O.firstChild=null)}function Zu(n,i,o,c,y=!1){for(;null!==o;){if(128===o.type){o=y?o.projectionNext:o.next;continue}const O=i[o.index];null!==O&&c.push(zs(O)),bl(O)&&cy(O,c);const W=o.type;if(8&W)Zu(n,i,o.child,c);else if(32&W){const ce=D0(o,i);let Ee;for(;Ee=ce();)c.push(Ee)}else if(16&W){const ce=Xg(i,o);if(Array.isArray(ce))c.push(...ce);else{const Ee=Kc(i[Jo]);Zu(Ee[Xr],Ee,ce,c,!0)}}o=y?o.projectionNext:o.next}return c}function cy(n,i){for(let o=wa;o<n.length;o++){const c=n[o],y=c[Xr].firstChild;null!==y&&Zu(c[Xr],c,y,i)}n[nc]!==n[Ho]&&i.push(n[nc])}let Q0=[];const Qw={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Lh(n.lView)},consumerOnSignalRead(){this.lView[dl]=this}},ex={...b,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let i=Kc(n.lView);for(;i&&!n_(i[Xr]);)i=Kc(i);i&&Jm(i)},consumerOnSignalRead(){this.lView[dl]=this}};function n_(n){return 2!==n.type}const im=100;function sm(n,i=!0,o=0){const c=n[sl],y=c.rendererFactory;var W;null===(W=y.begin)||void 0===W||W.call(y);try{!function tx(n,i){const o=lv();try{cv(!0),_f(n,i);let c=0;for(;Bu(n);){if(c===im)throw new Br(103,!1);c++,_f(n,1)}}finally{cv(o)}}(n,o)}catch(Xe){throw i&&rm(n,Xe),Xe}finally{var ce,Ee;null===(ce=y.end)||void 0===ce||ce.call(y),null===(Ee=c.inlineEffectRunner)||void 0===Ee||Ee.flush()}}function nx(n,i,o,c){var y;const O=i[es];if(!(256&~O))return;null===(y=i[sl].inlineEffectRunner)||void 0===y||y.flush(),qd(i);let Ee=!0,Xe=null,ct=null;n_(n)?(ct=function Zw(n){var i;return null!==(i=n[dl])&&void 0!==i?i:function Jw(n){var i;const o=null!==(i=Q0.pop())&&void 0!==i?i:Object.create(Qw);return o.lView=n,o}(n)}(i),Xe=p(ct)):null===function Z(){return j}()?(Ee=!1,ct=function t_(n){var i;const o=null!==(i=n[dl])&&void 0!==i?i:Object.create(ex);return o.lView=n,o}(i),Xe=p(ct)):i[dl]&&(x(i[dl]),i[dl]=null);try{Oh(i),function uv(n){return ds.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Qg(n,i,o,2,c);const Et=!(3&~O);if(Et){const pn=n.preOrderCheckHooks;null!==pn&&mp(i,pn,null)}else{const pn=n.preOrderHooks;null!==pn&&gp(i,pn,0,null),og(i,0)}if(function i_(n){for(let i=Gv(n);null!==i;i=zv(i)){if(!(i[es]&Vd.HasTransplantedViews))continue;const o=i[hu];for(let c=0;c<o.length;c++)Jm(o[c])}}(i),fh(i,0),null!==n.contentQueries&&q0(n,i),Et){const pn=n.contentCheckHooks;null!==pn&&mp(i,pn)}else{const pn=n.contentHooks;null!==pn&&gp(i,pn,1),og(i,1)}!function Rw(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const y=o[c];if(y<0)Yc(~y);else{const O=y,W=o[++c],ce=o[++c];Wb(W,O),ce(2,i[O])}}}finally{Yc(-1)}}(n,i);const un=n.components;null!==un&&a_(i,un,0);const yn=n.viewQuery;if(null!==yn&&sy(2,yn,c),Et){const pn=n.viewCheckHooks;null!==pn&&mp(i,pn)}else{const pn=n.viewHooks;null!==pn&&gp(i,pn,2),og(i,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[$c]){for(const pn of i[$c])pn();i[$c]=null}i[es]&=-73}catch(Et){throw Lh(i),Et}finally{null!==ct&&(m(ct,Xe),Ee&&function e_(n){n.lView[dl]!==n&&(n.lView=null,Q0.push(n))}(ct)),Vh()}}function fh(n,i){for(let o=Gv(n);null!==o;o=zv(o))for(let c=wa;c<o.length;c++)o_(o[c],i)}function s_(n,i,o){o_(rc(i,n),o)}function o_(n,i){Zm(n)&&_f(n,i)}function _f(n,i){const c=n[Xr],y=n[es],O=n[dl];let W=!!(0===i&&16&y);if(W||(W=!!(64&y&&0===i)),W||(W=!!(1024&y)),W||(W=!(null==O||!O.dirty||!g(O))),W||(W=!1),O&&(O.dirty=!1),n[es]&=-9217,W)nx(c,n,c.template,n[Do]);else if(8192&y){fh(n,1);const ce=c.components;null!==ce&&a_(n,ce,1)}}function a_(n,i,o){for(let c=0;c<i.length;c++)s_(n,i[c],o)}function bf(n,i){var o;const c=lv()?64:1088;for(null===(o=n[sl].changeDetectionScheduler)||void 0===o||o.notify(i);n;){n[es]|=c;const y=Kc(n);if(zd(n)&&!y)return n;n=y}return null}class wf{get rootNodes(){const i=this._lView,o=i[Xr];return Zu(o,i,o.firstChild,[])}constructor(i,o,c=!0){this._lView=i,this._cdRefInjectingView=o,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Do]}set context(i){this._lView[Do]=i}get destroyed(){return!(256&~this._lView[es])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Pa];if(bl(i)){const o=i[8],c=o?o.indexOf(this):-1;c>-1&&(Xp(i,c),ll(o,c))}this._attachedToViewContainer=!1}Hg(this._lView[Xr],this._lView)}onDestroy(i){Ec(this._lView,i)}markForCheck(){bf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[es]&=-129}reattach(){kh(this._lView),this._lView[es]|=128}detectChanges(){this._lView[es]|=1024,sm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Br(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=zd(this._lView),o=this._lView[zc];null!==o&&!i&&P0(o,this._lView),Tw(this._lView[Xr],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Br(902,!1);this._appRef=i;const o=zd(this._lView),c=this._lView[zc];null!==c&&!o&&Mw(c,this._lView),kh(this._lView)}}let ph=(()=>{class i{}return i.__NG_ELEMENT_ID__=ix,i})();const rx=ph,l_=class extends rx{constructor(i,o,c){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=c}get ssrId(){var i;return(null===(i=this._declarationTContainer.tView)||void 0===i?void 0:i.ssrId)||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,c){const y=hh(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:o,dehydratedView:c});return new wf(y)}};function ix(){return om(bo(),Sr())}function om(n,i){return 4&n.type?new l_(i,n,ih(n,i)):null}let R_=()=>null;function Ju(n,i){return R_(n,i)}class gh{}const If=new di("",{providedIn:"root",factory:()=>!1}),O_=new di("");class k_{}class L_{}class N_{resolveComponentFactory(i){throw function Ox(n){const i=Error(`No component factory found for ${Mo(n)}.`);return i.ngComponent=n,i}(i)}}class yh{}yh.NULL=new N_;class Pf{}let wy=(()=>{class i{constructor(){this.destroyNode=null}}return i.__NG_ELEMENT_ID__=()=>function Qu(){const n=Sr(),o=rc(bo().index,n);return(Wa(o)?o:n)[ps]}(),i})(),kx=(()=>{var n;class i{}return(n=i).\u0275prov=Zr({token:n,providedIn:"root",factory:()=>null}),i})();const F_=new Set;function ka(n){var i,o;F_.has(n)||(F_.add(n),null===(i=performance)||void 0===i||null===(o=i.mark)||void 0===o||o.call(i,"mark_feature_usage",{detail:{feature:n}}))}var va=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(va||{});const U_={destroy(){}};function fm(n,i){var o,c;!i&&function Fd(n){if(!Ah())throw new Br(-203,!1)}();const y=null!==(o=null==i?void 0:i.injector)&&void 0!==o?o:lt(ya);return function oc(n){return"browser"===(null!=n?n:lt(ya)).get(Ip)}(y)?(ka("NgAfterNextRender"),function B_(n,i,o,c){var y;const O=function Sy(n,i){if(n instanceof Function)switch(i){case va.EarlyRead:return{earlyRead:n};case va.Write:return{write:n};case va.MixedReadWrite:return{mixedReadWrite:n};case va.Read:return{read:n}}return n}(n,c),W=i.get(pm),ce=null!==(y=W.handler)&&void 0!==y?y:W.handler=new jx,Ee=[],Xe=[],ct=()=>{for(const pn of Xe)ce.unregister(pn);Et()},Et=i.get(gu).onDestroy(ct);let un=0;const yn=(pn,ir)=>{if(!ir)return;const Or=o?(...gr)=>(un--,un<1&&ct(),ir(...gr)):ir,$r=Mh(i,()=>new Nx(pn,Ee,Or));ce.register($r),Xe.push($r),un++};return yn(va.EarlyRead,O.earlyRead),yn(va.Write,O.write),yn(va.MixedReadWrite,O.mixedReadWrite),yn(va.Read,O.read),{destroy:ct}}(n,y,!0,null!==(c=null==i?void 0:i.phase)&&void 0!==c?c:va.MixedReadWrite)):U_}class Nx{constructor(i,o,c){var y;this.phase=i,this.pipelinedArgs=o,this.callbackFn=c,this.zone=lt(la),this.errorHandler=lt(Rc,{optional:!0}),null===(y=lt(gh,{optional:!0}))||void 0===y||y.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){var i;null===(i=this.errorHandler)||void 0===i||i.handleError(o)}}}class jx{constructor(){this.executingCallbacks=!1,this.buckets={[va.EarlyRead]:new Set,[va.Write]:new Set,[va.MixedReadWrite]:new Set,[va.Read]:new Set},this.deferredCallbacks=new Set}register(i){(this.executingCallbacks?this.deferredCallbacks:this.buckets[i.phase]).add(i)}unregister(i){this.buckets[i.phase].delete(i),this.deferredCallbacks.delete(i)}execute(){this.executingCallbacks=!0;for(const i of Object.values(this.buckets))for(const o of i)o.invoke();this.executingCallbacks=!1;for(const i of this.deferredCallbacks)this.buckets[i.phase].add(i);this.deferredCallbacks.clear()}destroy(){for(const i of Object.values(this.buckets))i.clear();this.deferredCallbacks.clear()}}let pm=(()=>{var n;class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var c;this.executeInternalCallbacks(),null===(c=this.handler)||void 0===c||c.execute()}executeInternalCallbacks(){const c=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const y of c)y()}ngOnDestroy(){var c;null===(c=this.handler)||void 0===c||c.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(n=i).\u0275prov=Zr({token:n,providedIn:"root",factory:()=>new n}),i})();function ed(n){return!!gi(n)}function ym(n,i,o){let c=o?n.styles:null,y=o?n.classes:null,O=0;if(null!==i)for(let W=0;W<i.length;W++){const ce=i[W];"number"==typeof ce?O=ce:1==O?y=gl(y,ce):2==O&&(c=gl(c,ce+": "+i[++W]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=y:n.classesWithoutHost=y}class $_ extends yh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Ln(i);return new vh(o,this.ngModule)}}function H_(n,i){const o=[];for(const c in n){if(!n.hasOwnProperty(c))continue;const y=n[c];if(void 0===y)continue;const O=Array.isArray(y),W=O?y[0]:y;o.push(i?{propName:W,templateName:c,isSignal:!!((O?y[1]:ao.None)&ao.SignalBased)}:{propName:W,templateName:c})}return o}class vh extends L_{get inputs(){const i=this.componentDef,o=i.inputTransforms,c=H_(i.inputs,!0);if(null!==o)for(const y of c)o.hasOwnProperty(y.propName)&&(y.transform=o[y.propName]);return c}get outputs(){return H_(this.componentDef.outputs,!1)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function me(n){return n.map(rd).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,c,y){const O=be(null);try{var ce;let Ee=(y=y||this.ngModule)instanceof Hl?y:null===(ce=y)||void 0===ce?void 0:ce.injector;Ee&&null!==this.componentDef.getStandaloneInjector&&(Ee=this.componentDef.getStandaloneInjector(Ee)||Ee);const Xe=Ee?new Zc(i,Ee):i,ct=Xe.get(Pf,null);if(null===ct)throw new Br(407,!1);const Et=Xe.get(kx,null),pn={rendererFactory:ct,sanitizer:Et,inlineEffectRunner:null,afterRenderEventManager:Xe.get(pm,null),changeDetectionScheduler:Xe.get(gh,null)},ir=ct.createRenderer(null,this.componentDef),Or=this.componentDef.selectors[0][0]||"div",$r=c?function V0(n,i,o,c){const O=c.get(a0,!1)||o===nl.ShadowDom,W=n.selectRootElement(i,O);return function G0(n){ty(n)}(W),W}(ir,c,this.componentDef.encapsulation,Xe):$g(ir,Or,function ru(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Or));let gr=512;this.componentDef.signals?gr|=4096:this.componentDef.onPush||(gr|=16);let ls=null;null!==$r&&(ls=Qv($r,Xe,!0));const Is=em(0,null,null,1,0,null,null,null,null,null,null),xo=Yp(null,Is,null,gr,null,null,pn,ir,Xe,null,ls);let Ul,Jl;qd(xo);try{const Pu=this.componentDef;let Vf,tE=null;Pu.findHostDirectiveDefs?(Vf=[],tE=new Map,Pu.findHostDirectiveDefs(Pu,Vf,tE),Vf.push(Pu)):Vf=[Pu];const EO=function Ux(n,i){const o=n[Xr],c=Vi;return n[c]=i,Ad(o,c,2,"#host",null)}(xo,$r),TO=function Bx(n,i,o,c,y,O,W){const ce=y[Xr];!function Vx(n,i,o,c){for(const y of n)i.mergedAttrs=Ra(i.mergedAttrs,y.hostAttrs);null!==i.mergedAttrs&&(ym(i,i.mergedAttrs,!0),null!==o&&yf(c,o,i))}(c,n,i,W);let Ee=null;null!==i&&(Ee=Qv(i,y[Fa]));const Xe=O.rendererFactory.createRenderer(i,o);let ct=16;o.signals?ct=4096:o.onPush&&(ct=64);const Et=Yp(y,ey(o),null,ct,y[n.index],n,O,Xe,null,null,Ee);return ce.firstCreatePass&&ry(ce,n,c.length-1),nm(y,Et),y[n.index]=Et}(EO,$r,Pu,Vf,xo,pn,ir);Jl=Ba(Is,Vi),$r&&function zx(n,i,o,c){if(c)Cl(n,o,["ng-version","18.1.3"]);else{const{attrs:y,classes:O}=function Ce(n){const i=[],o=[];let c=1,y=2;for(;c<n.length;){let O=n[c];if("string"==typeof O)2===y?""!==O&&i.push(O,n[++c]):8===y&&o.push(O);else{if(!rl(y))break;y=O}c++}return{attrs:i,classes:o}}(i.selectors[0]);y&&Cl(n,o,y),O&&O.length>0&&Kg(n,o,O.join(" "))}}(ir,Pu,$r,c),void 0!==o&&function $x(n,i,o){const c=n.projection=[];for(let y=0;y<i.length;y++){const O=o[y];c.push(null!=O?Array.from(O):null)}}(Jl,this.ngContentSelectors,o),Ul=function Gx(n,i,o,c,y,O){const W=bo(),ce=y[Xr],Ee=kl(W,y);H0(ce,y,W,o,null,c);for(let ct=0;ct<o.length;ct++)wl(mu(y,ce,W.directiveStart+ct,W),y);W0(ce,y,W),Ee&&wl(Ee,y);const Xe=mu(y,ce,W.directiveStart+W.componentOffset,W);if(n[Do]=y[Do]=Xe,null!==O)for(const ct of O)ct(Xe,i);return Zp(ce,W,y),Xe}(TO,Pu,Vf,tE,xo,[Mu]),ay(Is,xo,null)}finally{Vh()}return new Fx(this.componentType,Ul,ih(Jl,xo),xo,Jl)}finally{be(O)}}}class Fx extends k_{constructor(i,o,c,y,O){super(),this.location=c,this._rootLView=y,this._tNode=O,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new wf(y,void 0,!1),this.componentType=i}setInput(i,o){const c=this._tNode.inputs;let y;if(null!==c&&(y=c[i])){var O;if(null!==(O=this.previousInputValues)&&void 0!==O||(this.previousInputValues=new Map),this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const W=this._rootLView;oy(W[Xr],W,y,i,o),this.previousInputValues.set(i,o),bf(rc(this._tNode.index,W),1)}}get injector(){return new ga(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Mu(){const n=bo();pp(Sr()[Xr],n)}let _h=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hx,i})();function Hx(){return a(bo(),Sr())}const v=_h,t=class extends v{constructor(i,o,c){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=c}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new ga(this._hostTNode,this._hostLView)}get parentInjector(){const i=md(this._hostTNode,this._hostLView);if(Qd(i)){const o=Wh(i,this._hostLView),c=$h(i);return new ga(o[Xr].data[c+8],o)}return new ga(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=r(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-wa}createEmbeddedView(i,o,c){let y,O;"number"==typeof c?y=c:null!=c&&(y=c.index,O=c.injector);const W=Ju(this._lContainer,i.ssrId),ce=i.createEmbeddedViewImpl(o||{},O,W);return this.insertImpl(ce,y,Eu(this._hostTNode,W)),ce}createComponent(i,o,c,y,O){var W,ce,Ee;const Xe=i&&!function Gc(n){return"function"==typeof n}(i);let ct;if(Xe)ct=o;else{const $r=o||{};ct=$r.index,c=$r.injector,y=$r.projectableNodes,O=$r.environmentInjector||$r.ngModuleRef}const Et=Xe?i:new vh(Ln(i)),un=c||this.parentInjector;if(!O&&null==Et.ngModule){const gr=(Xe?un:this.parentInjector).get(Hl,null);gr&&(O=gr)}const yn=Ln(null!==(W=Et.componentType)&&void 0!==W?W:{}),pn=Ju(this._lContainer,null!==(ce=null==yn?void 0:yn.id)&&void 0!==ce?ce:null),ir=null!==(Ee=null==pn?void 0:pn.firstChild)&&void 0!==Ee?Ee:null,Or=Et.create(un,y,ir,O);return this.insertImpl(Or.hostView,ct,Eu(this._hostTNode,pn)),Or}insert(i,o){return this.insertImpl(i,o,!0)}insertImpl(i,o,c){const y=i._lView;if(function ol(n){return bl(n[Pa])}(y)){const ce=this.indexOf(i);if(-1!==ce)this.detach(ce);else{const Ee=y[Pa],Xe=new t(Ee,Ee[ba],Ee[Pa]);Xe.detach(Xe.indexOf(i))}}const O=this._adjustIndex(o),W=this._lContainer;return Cd(W,y,O,c),i.attachToViewContainerRef(),ia(s(W),O,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=r(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),c=Xp(this._lContainer,o);c&&(ll(s(this._lContainer),o),Hg(c[Xr],c))}detach(i){const o=this._adjustIndex(i,-1),c=Xp(this._lContainer,o);return c&&null!=ll(s(this._lContainer),o)?new wf(c):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function r(n){return n[8]}function s(n){return n[8]||(n[8]=[])}function a(n,i){let o;const c=i[n.index];return bl(c)?o=c:(o=X0(c,i,null,n),i[n.index]=o,nm(i,o)),_(o,i,n,c),new t(o,n,i)}let _=function B(n,i,o,c){if(n[nc])return;let y;y=8&o.type?zs(c):function u(n,i){const o=n[ps],c=o.createComment(""),y=kl(i,n);return xl(o,qp(o,y),c,function Cw(n,i){return n.nextSibling(i)}(o,y),!1),c}(i,o),n[nc]=y},A=()=>!1;class _e{constructor(i){this.queryList=i,this.matches=null}clone(){return new _e(this.queryList)}setDirty(){this.queryList.setDirty()}}class Re{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const c=null!==i.contentQueries?i.contentQueries[0]:o.length,y=[];for(let O=0;O<c;O++){const W=o.getByIndex(O);y.push(this.queries[W.indexInDeclarationView].clone())}return new Re(y)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==wr(i,o).matches&&this.queries[o].setDirty()}}class Be{constructor(i,o,c=null){this.flags=o,this.read=c,this.predicate="string"==typeof i?function Yn(n){return n.split(",").map(i=>i.trim())}(i):i}}class Le{constructor(i=[]){this.queries=i}elementStart(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let c=0;c<this.length;c++){const y=null!==o?o.length:0,O=this.getByIndex(c).embeddedTView(i,y);O&&(O.indexInDeclarationView=c,null!==o?o.push(O):o=[O])}return null!==o?new Le(o):null}template(i,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Oe{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Oe(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let c=i.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let y=0;y<c.length;y++){const O=c[y];this.matchTNodeWithReadOption(i,o,ft(o,O)),this.matchTNodeWithReadOption(i,o,eh(o,i,O,!1,!1))}else c===ph?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,eh(o,i,c,!1,!1))}matchTNodeWithReadOption(i,o,c){if(null!==c){const y=this.metadata.read;if(null!==y)if(y===Jh||y===_h||y===ph&&4&o.type)this.addMatch(o.index,-2);else{const O=eh(o,i,y,!1,!1);null!==O&&this.addMatch(o.index,O)}else this.addMatch(o.index,c)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function ft(n,i){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===i)return o[c+1];return null}function st(n,i,o,c){return-1===o?function dt(n,i){return 11&n.type?ih(n,i):4&n.type?om(n,i):null}(i,n):-2===o?function Yt(n,i,o){return o===Jh?ih(i,n):o===ph?om(i,n):o===_h?a(i,n):void 0}(n,i,c):mu(n,n[Xr],o,i)}function Mt(n,i,o,c){const y=i[_l].queries[c];if(null===y.matches){const O=n.data,W=o.matches,ce=[];for(let Ee=0;null!==W&&Ee<W.length;Ee+=2){const Xe=W[Ee];ce.push(Xe<0?null:st(i,O[Xe],W[Ee+1],o.metadata.read))}y.matches=ce}return y.matches}function Gt(n,i,o,c){const y=n.queries.getByIndex(o),O=y.matches;if(null!==O){const W=Mt(n,i,y,o);for(let ce=0;ce<O.length;ce+=2){const Ee=O[ce];if(Ee>0)c.push(W[ce/2]);else{const Xe=O[ce+1],ct=i[-Ee];for(let Et=wa;Et<ct.length;Et++){const un=ct[Et];un[zc]===un[Pa]&&Gt(un[Xr],un,Xe,c)}if(null!==ct[hu]){const Et=ct[hu];for(let un=0;un<Et.length;un++){const yn=Et[un];Gt(yn[Xr],yn,Xe,c)}}}}}return c}function It(n,i,o){var c;const y=new vu(!(4&~o));return function Ya(n,i,o,c){const y=K0(i);y.push(o),n.firstCreatePass&&Y0(n).push(c,y.length-1)}(n,i,y,y.destroy),(null!==(c=i[_l])&&void 0!==c?c:i[_l]=new Re).queries.push(new _e(y))-1}function Kn(n,i,o){null===n.queries&&(n.queries=new Le),n.queries.track(new Oe(i,o))}function wr(n,i){return n.queries.getByIndex(i)}function nr(n,i){const o=n[Xr],c=wr(o,i);return c.crossesNgTemplate?Gt(o,n,i,[]):Mt(o,n,c,i)}function fi(n,i){ka("NgSignals");const o=function Q(n){const i=Object.create(ye);i.value=n;const o=()=>(w(i),i.value);return o[l]=i,o}(n),c=o[l];return null!=i&&i.equal&&(c.equal=i.equal),o.set=y=>it(c,y),o.update=y=>function le(n,i){f()||oe(),it(n,i(n.value))}(c,y),o.asReadonly=Oi.bind(o),o}function Oi(){const n=this[l];if(void 0===n.readonlyFn){const i=()=>this();i[l]=n,n.readonlyFn=i}return n.readonlyFn}function as(n){return function Hr(n){return"function"==typeof n&&void 0!==n[l]}(n)&&"function"==typeof n.set}function wo(n){let i=function hl(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;i;){let y;if(Sc(n))y=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Br(903,!1);y=i.\u0275dir}if(y){if(o){c.push(y);const W=n;W.inputs=Lf(n.inputs),W.inputTransforms=Lf(n.inputTransforms),W.declaredInputs=Lf(n.declaredInputs),W.outputs=Lf(n.outputs);const ce=y.hostBindings;ce&&My(n,ce);const Ee=y.viewQuery,Xe=y.contentQueries;if(Ee&&W_(n,Ee),Xe&&Rd(n,Xe),Oc(n,y),Vl(n.outputs,y.outputs),Sc(y)&&y.data.animation){const ct=n.data;ct.animation=(ct.animation||[]).concat(y.data.animation)}}const O=y.features;if(O)for(let W=0;W<O.length;W++){const ce=O[W];ce&&ce.ngInherit&&ce(n),ce===wo&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Au(n){let i=0,o=null;for(let c=n.length-1;c>=0;c--){const y=n[c];y.hostVars=i+=y.hostVars,y.hostAttrs=Ra(y.hostAttrs,o=Ra(o,y.hostAttrs))}}(c)}function Oc(n,i){for(const c in i.inputs){if(!i.inputs.hasOwnProperty(c)||n.inputs.hasOwnProperty(c))continue;const y=i.inputs[c];if(void 0!==y&&(n.inputs[c]=y,n.declaredInputs[c]=i.declaredInputs[c],null!==i.inputTransforms)){var o;const O=Array.isArray(y)?y[0]:y;if(!i.inputTransforms.hasOwnProperty(O))continue;null!==(o=n.inputTransforms)&&void 0!==o||(n.inputTransforms={}),n.inputTransforms[O]=i.inputTransforms[O]}}}function Lf(n){return n===ci?{}:n===Qr?[]:n}function W_(n,i){const o=n.viewQuery;n.viewQuery=o?(c,y)=>{i(c,y),o(c,y)}:i}function Rd(n,i){const o=n.contentQueries;n.contentQueries=o?(c,y,O)=>{i(c,y,O),o(c,y,O)}:i}function My(n,i){const o=n.hostBindings;n.hostBindings=o?(c,y)=>{i(c,y),o(c,y)}:i}function J_(n){const i=n.inputConfig,o={};for(const c in i)if(i.hasOwnProperty(c)){const y=i[c];Array.isArray(y)&&y[3]&&(o[c]=y[3])}n.inputTransforms=o}class Pd{}class Q_{}function Wx(n,i){return new qn(n,null!=i?i:null,[])}class qn extends Pd{constructor(i,o,c){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $_(this);const y=gi(i);this._bootstrapComponents=gc(y.bootstrap),this._r3Injector=Ic(i,o,[{provide:Pd,useValue:this},{provide:yh,useValue:this.componentFactoryResolver},...c],Mo(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class dr extends Q_{constructor(i){super(),this.moduleType=i}create(i){return new qn(this.moduleType,i,[])}}class Jn extends Pd{constructor(i){super(),this.componentFactoryResolver=new $_(this),this.instance=null;const o=new xc([...i.providers,{provide:Pd,useValue:this},{provide:yh,useValue:this.componentFactoryResolver}],i.parent||Rl(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function ni(n,i,o=null){return new Jn({providers:n,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}function Fi(n){return!!ss(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ss(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ws(n,i,o){return n[i]=o}function Ds(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function iu(n,i,o,c,y,O,W,ce,Ee,Xe){const ct=o+Vi,Et=i.firstCreatePass?function kc(n,i,o,c,y,O,W,ce,Ee){const Xe=i.consts,ct=Ad(i,n,4,W||null,ce||null);ny(i,o,ct,Ll(Xe,Ee)),pp(i,ct);const Et=ct.tView=em(2,ct,c,y,O,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Xe,null);return null!==i.queries&&(i.queries.template(i,ct),Et.queries=i.queries.embeddedTView(ct)),ct}(ct,i,n,c,y,O,W,ce,Ee):i.data[ct];Xl(Et,!1);const un=bh(i,n,Et,o);Ac()&&eu(i,n,un,Et),wl(un,n);const yn=X0(un,n,un,Et);return n[ct]=yn,nm(n,yn),function k(n,i,o){return A(n,i,o)}(yn,Et,n),Ch(Et)&&Jp(i,n,Et),null!=Ee&&Qp(n,Et,Xe),Et}function jl(n,i,o,c,y,O,W,ce){const Ee=Sr(),Xe=$s();return iu(Ee,Xe,n,i,o,c,y,Ll(Xe.consts,O),W,ce),jl}let bh=function Qo(n,i,o,c){return ql(!0),i[ps].createComment("")};function rS(n,i,o,c){const y=Sr();return Ds(y,Mc(),i)&&($s(),nu(Io(),y,n,i,o,c)),rS}function Am(n,i,o,c,y,O){const ce=function Xs(n,i,o,c){const y=Ds(n,i,o);return Ds(n,i+1,c)||y}(n,function fu(){return ds.lFrame.bindingIndex}(),o,y);return pu(2),ce?i+os(o)+c+os(y)+O:ys}function sb(n,i){return n<<17|i<<2}function xh(n){return n>>17&32767}function iS(n){return 2|n}function Ff(n){return(131068&n)>>2}function sS(n,i){return-131069&n|i<<2}function oS(n){return 1|n}function UT(n,i,o,c){const y=n[o+1],O=null===i;let W=c?xh(y):Ff(y),ce=!1;for(;0!==W&&(!1===ce||O);){const Xe=n[W+1];FD(n[W],i)&&(ce=!0,n[W+1]=c?oS(Xe):iS(Xe)),W=c?xh(Xe):Ff(Xe)}ce&&(n[o+1]=c?iS(y):oS(y))}function FD(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Yo(n,i)>=0}const fl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function BT(n){return n.substring(fl.key,fl.keyEnd)}function UD(n){return n.substring(fl.value,fl.valueEnd)}function GT(n,i){const o=fl.textEnd;let c=fl.key=km(n,i,o);return o===c?-1:(c=fl.keyEnd=function zD(n,i,o){let c;for(;i<o&&(45===(c=n.charCodeAt(i))||95===c||(-33&c)>=65&&(-33&c)<=90||c>=48&&c<=57);)i++;return i}(n,c,o),c=$T(n,c,o),c=fl.value=km(n,c,o),c=fl.valueEnd=function $D(n,i,o){let c=-1,y=-1,O=-1,W=i,ce=W;for(;W<o;){const Ee=n.charCodeAt(W++);if(59===Ee)return ce;34===Ee||39===Ee?ce=W=HT(n,Ee,W,o):i===W-4&&85===O&&82===y&&76===c&&40===Ee?ce=W=HT(n,41,W,o):Ee>32&&(ce=W),O=y,y=c,c=-33&Ee}return ce}(n,c,o),$T(n,c,o))}function km(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function $T(n,i,o,c){return(i=km(n,i,o))<o&&i++,i}function HT(n,i,o,c){let y=-1,O=o;for(;O<c;){const W=n.charCodeAt(O++);if(W==i&&92!==y)return O;y=92==W&&92===y?0:W}throw new Error}function aS(n,i,o){const c=Sr();return Ds(c,Mc(),i)&&Yl($s(),Io(),c,n,i,c[ps],o,!1),aS}function lS(n,i,o,c,y){const W=y?"class":"style";oy(n,o,i.inputs[W],W,c)}function cS(n,i,o){return Du(n,i,o,!1),cS}function uS(n,i){return Du(n,i,null,!0),uS}function Cu(n){!function Iu(n,i,o,c){const y=$s(),O=pu(2);y.firstUpdatePass&&XT(y,null,O,c);const W=Sr();if(o!==ys&&Ds(W,O,o)){const ce=y.data[qa()];if(ZT(ce,c)&&!WT(y,O)){let Ee=c?ce.classesWithoutHost:ce.stylesWithoutHost;null!==Ee&&(o=gl(Ee,o||"")),lS(y,ce,W,o,c)}else!function QD(n,i,o,c,y,O,W,ce){y===ys&&(y=Qr);let Ee=0,Xe=0,ct=0<y.length?y[0]:null,Et=0<O.length?O[0]:null;for(;null!==ct||null!==Et;){const un=Ee<y.length?y[Ee+1]:void 0,yn=Xe<O.length?O[Xe+1]:void 0;let ir,pn=null;ct===Et?(Ee+=2,Xe+=2,un!==yn&&(pn=Et,ir=yn)):null===Et||null!==ct&&ct<Et?(Ee+=2,pn=ct):(Xe+=2,pn=Et,ir=yn),null!==pn&&KT(n,i,o,c,pn,ir,W,ce),ct=Ee<y.length?y[Ee]:null,Et=Xe<O.length?O[Xe]:null}}(y,ce,W,W[ps],W[O+1],W[O+1]=function ZD(n,i,o){if(null==o||""===o)return Qr;const c=[],y=bu(o);if(Array.isArray(y))for(let O=0;O<y.length;O++)n(c,y[O],!0);else if("object"==typeof y)for(const O in y)y.hasOwnProperty(O)&&n(c,O,y[O]);else"string"==typeof y&&i(c,y);return c}(n,i,o),c,O)}}(qT,HD,n,!1)}function HD(n,i){for(let o=function VD(n){return function zT(n){fl.key=0,fl.keyEnd=0,fl.value=0,fl.valueEnd=0,fl.textEnd=n.length}(n),GT(n,km(n,0,fl.textEnd))}(i);o>=0;o=GT(i,o))qT(n,BT(i),UD(i))}function Du(n,i,o,c){const y=Sr(),O=$s(),W=pu(2);O.firstUpdatePass&&XT(O,n,W,c),i!==ys&&Ds(y,W,i)&&KT(O,O.data[qa()],y,y[ps],n,y[W+1]=function eI(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Mo(bu(n)))),n}(i,o),c,W)}function WT(n,i){return i>=n.expandoStartIndex}function XT(n,i,o,c){const y=n.data;if(null===y[o+1]){const O=y[qa()],W=WT(n,o);ZT(O,c)&&null===i&&!W&&(i=!1),i=function XD(n,i,o,c){const y=function lp(n){const i=ds.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let O=c?i.residualClasses:i.residualStyles;if(null===y)0===(c?i.classBindings:i.styleBindings)&&(o=Py(o=dS(null,n,i,o,c),i.attrs,c),O=null);else{const W=i.directiveStylingLast;if(-1===W||n[W]!==y)if(o=dS(y,n,i,o,c),null===O){let Ee=function qD(n,i,o){const c=o?i.classBindings:i.styleBindings;if(0!==Ff(c))return n[xh(c)]}(n,i,c);void 0!==Ee&&Array.isArray(Ee)&&(Ee=dS(null,n,i,Ee[1],c),Ee=Py(Ee,i.attrs,c),function KD(n,i,o,c){n[xh(o?i.classBindings:i.styleBindings)]=c}(n,i,c,Ee))}else O=function YD(n,i,o){let c;const y=i.directiveEnd;for(let O=1+i.directiveStylingLast;O<y;O++)c=Py(c,n[O].hostAttrs,o);return Py(c,i.attrs,o)}(n,i,c)}return void 0!==O&&(c?i.residualClasses=O:i.residualStyles=O),o}(y,O,i,c),function ND(n,i,o,c,y,O){let W=O?i.classBindings:i.styleBindings,ce=xh(W),Ee=Ff(W);n[c]=o;let ct,Xe=!1;if(Array.isArray(o)?(ct=o[1],(null===ct||Yo(o,ct)>0)&&(Xe=!0)):ct=o,y)if(0!==Ee){const un=xh(n[ce+1]);n[c+1]=sb(un,ce),0!==un&&(n[un+1]=sS(n[un+1],c)),n[ce+1]=function kD(n,i){return 131071&n|i<<17}(n[ce+1],c)}else n[c+1]=sb(ce,0),0!==ce&&(n[ce+1]=sS(n[ce+1],c)),ce=c;else n[c+1]=sb(Ee,0),0===ce?ce=c:n[Ee+1]=sS(n[Ee+1],c),Ee=c;Xe&&(n[c+1]=iS(n[c+1])),UT(n,ct,c,!0),UT(n,ct,c,!1),function jD(n,i,o,c,y){const O=y?n.residualClasses:n.residualStyles;null!=O&&"string"==typeof i&&Yo(O,i)>=0&&(o[c+1]=oS(o[c+1]))}(i,ct,n,c,O),W=sb(ce,Ee),O?i.classBindings=W:i.styleBindings=W}(y,O,i,o,W,c)}}function dS(n,i,o,c,y){let O=null;const W=o.directiveEnd;let ce=o.directiveStylingLast;for(-1===ce?ce=o.directiveStart:ce++;ce<W&&(O=i[ce],c=Py(c,O.hostAttrs,y),O!==n);)ce++;return null!==n&&(o.directiveStylingLast=ce),c}function Py(n,i,o){const c=o?1:2;let y=-1;if(null!==i)for(let O=0;O<i.length;O++){const W=i[O];"number"==typeof W?y=W:y===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Li(n,W,!!o||i[++O]))}return void 0===n?null:n}function qT(n,i,o){Li(n,i,bu(o))}function KT(n,i,o,c,y,O,W,ce){if(!(3&i.type))return;const Ee=n.data,Xe=Ee[ce+1],ct=function LD(n){return!(1&~n)}(Xe)?YT(Ee,i,o,y,Ff(Xe),W):void 0;ob(ct)||(ob(O)||function OD(n){return!(2&~n)}(Xe)&&(O=YT(Ee,null,o,y,ce,W)),function j0(n,i,o,c,y){if(i)y?n.addClass(o,c):n.removeClass(o,c);else{let O=-1===c.indexOf("-")?void 0:zg.DashCase;null==y?n.removeStyle(o,c,O):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),O|=zg.Important),n.setStyle(o,c,y,O))}}(c,W,$d(qa(),o),y,O))}function YT(n,i,o,c,y,O){const W=null===i;let ce;for(;y>0;){const Ee=n[y],Xe=Array.isArray(Ee),ct=Xe?Ee[1]:Ee,Et=null===ct;let un=o[y+1];un===ys&&(un=Et?Qr:void 0);let yn=Et?Al(un,c):ct===c?un:void 0;if(Xe&&!ob(yn)&&(yn=Al(Ee,c)),ob(yn)&&(ce=yn,W))return ce;const pn=n[y+1];y=W?xh(pn):Ff(pn)}if(null!==i){let Ee=O?i.residualClasses:i.residualStyles;null!=Ee&&(ce=Al(Ee,c))}return ce}function ob(n){return void 0!==n}function ZT(n,i){return!!(n.flags&(i?8:16))}function lb(n,i,o,c){const y=Sr(),O=$s(),W=Vi+n,ce=y[ps],Ee=O.firstCreatePass?function SI(n,i,o,c,y,O){const W=i.consts,Ee=Ad(i,n,2,c,Ll(W,y));return ny(i,o,Ee,Ll(W,O)),null!==Ee.attrs&&ym(Ee,Ee.attrs,!1),null!==Ee.mergedAttrs&&ym(Ee,Ee.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Ee),Ee}(W,O,y,i,o,c):O.data[W],Xe=tM(O,y,Ee,ce,i,n);y[W]=Xe;const ct=Ch(Ee);return Xl(Ee,!0),yf(ce,Xe,Ee),!function ro(n){return!(32&~n.flags)}(Ee)&&Ac()&&eu(O,y,Xe,Ee),0===function Qm(){return ds.lFrame.elementDepthCount}()&&wl(Xe,y),function sp(){ds.lFrame.elementDepthCount++}(),ct&&(Jp(O,y,Ee),Zp(O,Ee,y)),null!==c&&Qp(y,Ee),lb}function cb(){let n=bo();Nh()?jh():(n=n.parent,Xl(n,!1));const i=n;(function $b(n){return ds.skipHydrationRootTNode===n})(i)&&function lE(){ds.skipHydrationRootTNode=null}(),function op(){ds.lFrame.elementDepthCount--}();const o=$s();return o.firstCreatePass&&(pp(o,n),Gd(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Jd(n){return!!(8&n.flags)}(i)&&lS(o,i,Sr(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Zb(n){return!!(16&n.flags)}(i)&&lS(o,i,Sr(),i.stylesWithoutHost,!1),cb}function mS(n,i,o,c){return lb(n,i,o,c),cb(),mS}let tM=(n,i,o,c,y,O)=>(ql(!0),$g(c,y,function fv(){return ds.lFrame.currentNamespace}()));function ub(n,i,o){const c=Sr(),y=$s(),O=n+Vi,W=y.firstCreatePass?function MI(n,i,o,c,y){const O=i.consts,W=Ll(O,c),ce=Ad(i,n,8,"ng-container",W);return null!==W&&ym(ce,W,!0),ny(i,o,ce,Ll(O,y)),null!==i.queries&&i.queries.elementStart(i,ce),ce}(O,y,c,i,o):y.data[O];Xl(W,!0);const ce=nM(y,c,W,n);return c[O]=ce,Ac()&&eu(y,c,ce,W),wl(ce,c),Ch(W)&&(Jp(y,c,W),Zp(y,W,c)),null!=o&&Qp(c,W),ub}function db(){let n=bo();const i=$s();return Nh()?jh():(n=n.parent,Xl(n,!1)),i.firstCreatePass&&(pp(i,n),Gd(n)&&i.queries.elementEnd(n)),db}function gS(n,i,o){return ub(n,i,o),db(),gS}let nM=(n,i,o,c)=>(ql(!0),R0(i[ps],""));function rM(){return Sr()}const Uf=void 0;var II=["en",[["a","p"],["AM","PM"],Uf],[["AM","PM"],Uf,Uf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uf,"{1} 'at' {0}",Uf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DI(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Lm={};function yS(n){const i=function RI(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=aM(i);if(o)return o;const c=i.split("-")[0];if(o=aM(c),o)return o;if("en"===c)return II;throw new Br(701,!1)}function oM(n){return yS(n)[Nm.PluralCase]}function aM(n){return n in Lm||(Lm[n]=ho.ng&&ho.ng.common&&ho.ng.common.locales&&ho.ng.common.locales[n]),Lm[n]}var Nm=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Nm||{});const jm="en-US";let lM=jm;let AM=(n,i,o)=>{};function bS(n,i,o,c){const y=Sr(),O=$s(),W=bo();return wS(O,y,y[ps],W,n,i,c),bS}function wS(n,i,o,c,y,O,W){const ce=Ch(c),Xe=n.firstCreatePass&&Y0(n),ct=i[Do],Et=K0(i);let un=!0;if(3&c.type||W){const ir=kl(c,i),Or=W?W(ir):ir,$r=Et.length,gr=W?Is=>W(zs(Is[c.index])):c.index;let ls=null;if(!W&&ce&&(ls=function v2(n,i,o,c){const y=n.cleanup;if(null!=y)for(let O=0;O<y.length-1;O+=2){const W=y[O];if(W===o&&y[O+1]===c){const ce=i[od],Ee=y[O+2];return ce.length>Ee?ce[Ee]:null}"string"==typeof W&&(O+=2)}return null}(n,i,y,c.index)),null!==ls)(ls.__ngLastListenerFn__||ls).__ngNextListenerFn__=O,ls.__ngLastListenerFn__=O,un=!1;else{O=RM(c,i,ct,O),AM(ir,y,O);const Is=o.listen(Or,y,O);Et.push(O,Is),Xe&&Xe.push(y,gr,$r,$r+1)}}else O=RM(c,i,ct,O);const yn=c.outputs;let pn;if(un&&null!==yn&&(pn=yn[y])){const ir=pn.length;if(ir)for(let Or=0;Or<ir;Or+=2){const xo=i[pn[Or]][pn[Or+1]].subscribe(O),Ul=Et.length;Et.push(O,xo),Xe&&Xe.push(y,c.index,Ul,-(Ul+1))}}}function IM(n,i,o,c){const y=be(null);try{return Xc(6,i,o),!1!==o(c)}catch(O){return rm(n,O),!1}finally{Xc(7,i,o),be(y)}}function RM(n,i,o,c){return function y(O){if(O===Function)return c;bf(n.componentOffset>-1?rc(n.index,i):i,5);let ce=IM(i,o,c,O),Ee=y.__ngNextListenerFn__;for(;Ee;)ce=IM(i,o,Ee,O)&&ce,Ee=Ee.__ngNextListenerFn__;return ce}}function PM(n=1){return function pd(n){return(ds.lFrame.contextLView=function Hd(n,i){for(;n>0;)i=i[Nu],n--;return i}(n,ds.lFrame.contextLView))[Do]}(n)}function _2(n,i){let o=null;const c=function dc(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let y=0;y<i.length;y++){const O=i[y];if("*"!==O){if(null===c?Eo(n,O,!0):Vc(c,O))return y}else o=y}return o}function OM(n){const i=Sr()[Jo][ba];if(!i.projection){const c=i.projection=function sa(n,i){const o=[];for(let c=0;c<n;c++)o.push(i);return o}(n?n.length:1,null),y=c.slice();let O=i.child;for(;null!==O;){if(128!==O.type){const W=n?_2(O,n):0;null!==W&&(y[W]?y[W].projectionNext=O:c[W]=O,y[W]=O)}O=O.next}}}function kM(n,i=0,o,c,y,O){const W=Sr(),ce=$s(),Ee=c?n+1:null;null!==Ee&&iu(W,ce,Ee,c,y,O,null,o);const Xe=Ad(ce,Vi+n,16,null,o||null);null===Xe.projection&&(Xe.projection=i),jh();const Et=!W[ja]||Gu();null===W[Jo][ba].projection[Xe.projection]&&null!==Ee?function b2(n,i,o){const c=Vi+o,y=i.data[c],O=n[c],W=Ju(O,y.tView.ssrId);Cd(O,hh(n,y,void 0,{dehydratedView:W}),0,Eu(y,W))}(W,ce,Ee):Et&&32&~Xe.flags&&function uh(n,i,o){qg(i[ps],0,i,o,Cs(n,o,i),k0(o.parent||i[ba],o,i))}(ce,W,Xe)}function $M(n,i,o,c){!function bn(n,i,o,c){const y=$s();if(y.firstCreatePass){const O=bo();Kn(y,new Be(i,o,c),O.index),function rr(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(y,n),!(2&~o)&&(y.staticContentQueries=!0)}return It(y,Sr(),o)}(n,i,o,c)}function HM(n,i,o){!function Dt(n,i,o){const c=$s();return c.firstCreatePass&&(Kn(c,new Be(n,i,o),-1),!(2&~i)&&(c.staticViewQueries=!0)),It(c,Sr(),i)}(n,i,o)}function WM(n){const i=Sr(),o=$s(),c=cp();Uh(c+1);const y=wr(o,c);if(n.dirty&&function hd(n){return!(4&~n[es])}(i)===!(2&~y.metadata.flags)){if(null===y.matches)n.reset([]);else{const O=nr(i,c);n.reset(O,Nv),n.notifyOnChanges()}return!0}return!1}function XM(){return function tn(n,i){return n[_l].queries[i].queryList}(Sr(),cp())}function qM(n){return function qc(n,i){return n[i]}(function ap(){return ds.lFrame.contextLView}(),Vi+n)}function iA(n,i=""){const o=Sr(),c=$s(),y=n+Vi,O=c.firstCreatePass?Ad(c,y,1,i,null):c.data[y],W=sA(c,o,O,i,n);o[y]=W,Ac()&&eu(c,o,W,O),Xl(O,!1)}let sA=(n,i,o,c,y)=>(ql(!0),function I0(n,i){return n.createText(i)}(i[ps],c));function ES(n){return mb("",n,""),ES}function mb(n,i,o){const c=Sr(),y=function Mm(n,i,o,c){return Ds(n,Mc(),o)?i+os(o)+c:ys}(c,n,i,o);return y!==ys&&Su(c,qa(),y),mb}function TS(n,i,o,c,y){const O=Sr(),W=Am(O,n,i,o,c,y);return W!==ys&&Su(O,qa(),W),TS}function MS(n,i,o){as(i)&&(i=i());const c=Sr();return Ds(c,Mc(),i)&&Yl($s(),Io(),c,n,i,c[ps],o,!1),MS}function fA(n,i){const o=as(n);return o&&n.set(i),o}function AS(n,i){const o=Sr(),c=$s(),y=bo();return wS(c,o,o[ps],y,n,i),AS}function CS(n,i,o,c,y){if(n=hi(n),Array.isArray(n))for(let O=0;O<n.length;O++)CS(n[O],i,o,c,y);else{const O=$s(),W=Sr(),ce=bo();let Ee=Lu(n)?n:hi(n.provide);const Xe=gs(n),ct=1048575&ce.providerIndexes,Et=ce.directiveStart,un=ce.providerIndexes>>20;if(Lu(n)||!n.multi){const yn=new Gh(Xe,y,Yu),pn=IS(Ee,i,y?ct:ct+un,Et);-1===pn?(gd(_p(ce,W),O,Ee),DS(O,n,i.length),i.push(Ee),ce.directiveStart++,ce.directiveEnd++,y&&(ce.providerIndexes+=1048576),o.push(yn),W.push(yn)):(o[pn]=yn,W[pn]=yn)}else{const yn=IS(Ee,i,ct+un,Et),pn=IS(Ee,i,ct,ct+un),Or=pn>=0&&o[pn];if(y&&!Or||!y&&!(yn>=0&&o[yn])){gd(_p(ce,W),O,Ee);const $r=function B2(n,i,o,c,y){const O=new Gh(n,o,Yu);return O.multi=[],O.index=i,O.componentProviders=0,gA(O,y,c&&!o),O}(y?U2:F2,o.length,y,c,Xe);!y&&Or&&(o[pn].providerFactory=$r),DS(O,n,i.length,0),i.push(Ee),ce.directiveStart++,ce.directiveEnd++,y&&(ce.providerIndexes+=1048576),o.push($r),W.push($r)}else DS(O,n,yn>-1?yn:pn,gA(o[y?pn:yn],Xe,!y&&c));!y&&c&&Or&&o[pn].componentProviders++}}}function DS(n,i,o,c){const y=Lu(i),O=function iE(n){return!!n.useClass}(i);if(y||O){const Ee=(O?hi(i.useClass):i).prototype.ngOnDestroy;if(Ee){const Xe=n.destroyHooks||(n.destroyHooks=[]);if(!y&&i.multi){const ct=Xe.indexOf(o);-1===ct?Xe.push(o,[c,Ee]):Xe[ct+1].push(c,Ee)}else Xe.push(o,Ee)}}}function gA(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function IS(n,i,o,c){for(let y=o;y<c;y++)if(i[y]===n)return y;return-1}function F2(n,i,o,c){return RS(this.multi,[])}function U2(n,i,o,c){const y=this.multi;let O;if(this.providerFactory){const W=this.providerFactory.componentProviders,ce=mu(o,o[Xr],this.providerFactory.index,c);O=ce.slice(0,W),RS(y,O);for(let Ee=W;Ee<ce.length;Ee++)O.push(ce[Ee])}else O=[],RS(y,O);return O}function RS(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function yA(n,i=[]){return o=>{o.providersResolver=(c,y)=>function j2(n,i,o){const c=$s();if(c.firstCreatePass){const y=Sc(n);CS(o,c.data,c.blueprint,y,!0),CS(i,c.data,c.blueprint,y,!1)}}(c,y?y(n):n,i)}}let V2=(()=>{var n;class i{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const y=Nd(0,c.type),O=y.length>0?ni([y],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,O)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(n=i).\u0275prov=Zr({token:n,providedIn:"environment",factory:()=>new n(ve(Hl))}),i})();function vA(n){ka("NgStandalone"),n.getStandaloneInjector=i=>i.get(V2).getOrCreateStandaloneInjector(n)}function wA(n,i,o){const c=Xa()+n,y=Sr();return y[c]===ys?Ws(y,c,o?i.call(o):i()):function Uo(n,i){return n[i]}(y,c)}function xA(n,i,o,c){return function SA(n,i,o,c,y,O){const W=i+o;return Ds(n,W,y)?Ws(n,W+1,O?c.call(O,y):c(y)):function Fy(n,i){const o=n[i];return o===ys?void 0:o}(n,W+1)}(Sr(),Xa(),n,i,o,c)}class zA{constructor(i){this.full=i;const o=i.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}let $A=(()=>{var n;class i{log(c){console.log(c)}warn(c){console.warn(c)}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();const qA=new di(""),KA=new di("");let FS,QR=(()=>{var n;class i{constructor(c,y,O){this._ngZone=c,this.registry=y,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,FS||(function eP(n){FS=n}(O),O.addToWindow(y)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb()}});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(c)||(clearTimeout(y.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,y,O){let W=-1;y&&y>0&&(W=setTimeout(()=>{this._callbacks=this._callbacks.filter(ce=>ce.timeoutId!==W),c()},y)),this._callbacks.push({doneCb:c,timeoutId:W,updateCb:O})}whenStable(c,y,O){if(O&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,y,O),this._runCallbacksIfReady()}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,y,O){return[]}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(la),ve(YA),ve(KA))},n.\u0275prov=Zr({token:n,factory:n.\u0275fac}),i})(),YA=(()=>{var n;class i{constructor(){this._applications=new Map}registerApplication(c,y){this._applications.set(c,y)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,y=!0){var O,W;return null!==(O=null===(W=FS)||void 0===W?void 0:W.findTestabilityInTree(this,c,y))&&void 0!==O?O:null}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})();function US(n){return!!n&&"function"==typeof n.then}function ZA(n){return!!n&&"function"==typeof n.subscribe}const JA=new di("");let BS=(()=>{var n;class i{constructor(){var c;this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,O)=>{this.resolve=y,this.reject=O}),this.appInits=null!==(c=lt(JA,{optional:!0}))&&void 0!==c?c:[]}runInitializers(){if(this.initialized)return;const c=[];for(const O of this.appInits){const W=O();if(US(W))c.push(W);else if(ZA(W)){const ce=new Promise((Ee,Xe)=>{W.subscribe({complete:Ee,error:Xe})});c.push(ce)}}const y=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{y()}).catch(O=>{this.reject(O)}),0===c.length&&y(),this.initialized=!0}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const bb=new di("");function tC(n,i){return Array.isArray(i)?i.reduce(tC,n):{...n,...i}}let Ru=(()=>{var n;class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=lt(Zh),this.afterRenderEffectManager=lt(pm),this.zonelessEnabled=lt(If),this.externalTestViews=new Set,this.beforeRender=new Ft.B,this.afterTick=new Ft.B,this.componentTypes=[],this.components=[],this.isStable=lt(Kl).hasPendingTasks.pipe((0,mt.T)(c=>!c)),this._injector=lt(Hl)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,y){const O=c instanceof L_;if(!this._injector.get(BS).done)throw!O&&kr(c),new Br(405,!1);let ce;ce=O?c:this._injector.get(yh).resolveComponentFactory(c),this.componentTypes.push(ce.componentType);const Ee=function tP(n){return n.isBoundToModule}(ce)?void 0:this._injector.get(Pd),ct=ce.create(ya.NULL,[],y||ce.selector,Ee),Et=ct.location.nativeElement,un=ct.injector.get(qA,null);return null==un||un.registerApplication(Et),ct.onDestroy(()=>{this.detachView(ct.hostView),wb(this.components,ct),null==un||un.unregisterApplication(Et)}),this._loadComponent(ct),ct}tick(){this._tick(!0)}_tick(c){if(this._runningTick)throw new Br(101,!1);const y=be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(c)}catch(O){this.internalErrorHandler(O)}finally{this._runningTick=!1,be(y),this.afterTick.next()}}detectChangesInAttachedViews(c){let y=null;this._injector.destroyed||(y=this._injector.get(Pf,null,{optional:!0}));let O=0;const W=this.afterRenderEffectManager;for(;O<10;){const yn=0===O;if(c||!yn){this.beforeRender.next(yn);for(let{_lView:pn,notifyErrorHandler:ir}of this._views)rP(pn,ir,yn,this.zonelessEnabled)}else{var ce,Ee,Xe,ct,Et,un;null===(ce=y)||void 0===ce||null===(Ee=(Xe=ce).begin)||void 0===Ee||Ee.call(Xe),null===(ct=y)||void 0===ct||null===(Et=(un=ct).end)||void 0===Et||Et.call(un)}if(O++,W.executeInternalCallbacks(),!this.allViews.some(({_lView:pn})=>Bu(pn))&&(W.execute(),!this.allViews.some(({_lView:pn})=>Bu(pn))))break}}attachView(c){const y=c;this._views.push(y),y.attachToAppRef(this)}detachView(c){const y=c;wb(this._views,y),y.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const y=this._injector.get(bb,[]);[...this._bootstrapListeners,...y].forEach(O=>O(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>wb(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Br(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function wb(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function rP(n,i,o,c){(o||Bu(n))&&sm(n,i,o&&!c?0:1)}class iP{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let sP=(()=>{var n;class i{compileModuleSync(c){return new dr(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const y=this.compileModuleSync(c),W=gc(gi(c).declarations).reduce((ce,Ee)=>{const Xe=Ln(Ee);return Xe&&ce.push(new vh(Xe)),ce},[]);return new iP(y,W)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),lP=(()=>{var n;class i{constructor(){this.zone=lt(la),this.changeDetectionScheduler=lt(gh),this.applicationRef=lt(Ru)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var c;null===(c=this._onMicrotaskEmptySubscription)||void 0===c||c.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();function VS({ngZoneFactory:n,ignoreChangesOutsideZone:i}){var o;return null!==(o=n)&&void 0!==o||(n=()=>new la(GS())),[{provide:la,useFactory:n},{provide:mi,multi:!0,useFactory:()=>{const c=lt(lP,{optional:!0});return()=>c.initialize()}},{provide:mi,multi:!0,useFactory:()=>{const c=lt(uP);return()=>{c.initialize()}}},!0===i?{provide:O_,useValue:!0}:[]]}function GS(n){var i,o;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(i=null==n?void 0:n.eventCoalescing)&&void 0!==i&&i,shouldCoalesceRunChangeDetection:null!==(o=null==n?void 0:n.runCoalescing)&&void 0!==o&&o}}let uP=(()=>{var n;class i{constructor(){this.subscription=new Wt.yU,this.initialized=!1,this.zone=lt(la),this.pendingTasks=lt(Kl)}initialize(){if(this.initialized)return;this.initialized=!0;let c=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(c=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),queueMicrotask(()=>{null!==c&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(c),c=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{var y;la.assertInAngularZone(),null!==(y=c)&&void 0!==y||(c=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})(),zy=(()=>{var n;class i{constructor(){var c;this.appRef=lt(Ru),this.taskService=lt(Kl),this.ngZone=lt(la),this.zonelessEnabled=lt(If),this.disableScheduling=null!==(c=lt(O_,{optional:!0}))&&void 0!==c&&c,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Wt.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||(this.disableScheduling=!this.zonelessEnabled&&(this.ngZone instanceof Tp||!this.zoneIsDefined))}notify(c){if(!this.zonelessEnabled&&5===c)return;switch(c){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const y=this.useMicrotaskScheduler?ic:Cv;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=y(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&la.isInAngularZone())}tick(c){if(this.runningTick||this.appRef.destroyed)return;const y=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(c)},void 0,this.schedulerTickApplyArgs)}catch(O){throw this.taskService.remove(y),O}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ic(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(y)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){var c;if(this.shouldRefreshViews=!1,this.runningTick=!1,null===(c=this.cancelScheduledCallback)||void 0===c||c.call(this),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const y=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(y)}}}return(n=i).\u0275fac=function(c){return new(c||n)},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"root"}),i})();const xb=new di("",{providedIn:"root",factory:()=>lt(xb,As.Optional|As.SkipSelf)||function dP(){return typeof $localize<"u"&&$localize.locale||jm}()}),hP=new di("",{providedIn:"root",factory:()=>"USD"}),$S=new di("");let oC=(()=>{var n;class i{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,y){const O=function Ov(n="zone.js",i){return"noop"===n?new Tp:"zone.js"===n?new la(i):n}(null==y?void 0:y.ngZone,GS({eventCoalescing:null==y?void 0:y.ngZoneEventCoalescing,runCoalescing:null==y?void 0:y.ngZoneRunCoalescing}));return O.run(()=>{const ce=function mr(n,i,o){return new qn(n,i,o)}(c.moduleType,this.injector,[...VS({ngZoneFactory:()=>O,ignoreChangesOutsideZone:null==y?void 0:y.ignoreChangesOutsideZone}),{provide:gh,useExisting:zy}]),Ee=ce.injector.get(Rc,null);return O.runOutsideAngular(()=>{const Xe=O.onError.subscribe({next:ct=>{Ee.handleError(ct)}});ce.onDestroy(()=>{wb(this._modules,ce),Xe.unsubscribe()})}),function eC(n,i,o){try{const c=o();return US(c)?c.catch(y=>{throw i.runOutsideAngular(()=>n.handleError(y)),y}):c}catch(c){throw i.runOutsideAngular(()=>n.handleError(c)),c}}(Ee,O,()=>{const Xe=ce.injector.get(BS);return Xe.runInitializers(),Xe.donePromise.then(()=>(function cM(n){"string"==typeof n&&(lM=n.toLowerCase().replace(/_/g,"-"))}(ce.injector.get(xb,jm)||jm),this._moduleDoBootstrap(ce),ce))})})}bootstrapModule(c,y=[]){const O=tC({},y);return function aP(n,i,o){const c=new dr(o);return Promise.resolve(c)}(0,0,c).then(W=>this.bootstrapModuleFactory(W,O))}_moduleDoBootstrap(c){const y=c.injector.get(Ru);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(O=>y.bootstrap(O));else{if(!c.instance.ngDoBootstrap)throw new Br(-403,!1);c.instance.ngDoBootstrap(y)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Br(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const c=this._injector.get($S,null);c&&(c.forEach(y=>y()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(ya))},n.\u0275prov=Zr({token:n,factory:n.\u0275fac,providedIn:"platform"}),i})(),Sh=null;const aC=new di("");function lC(n,i,o=[]){const c=`Platform: ${i}`,y=new di(c);return(O=[])=>{let W=HS();if(!W||W.injector.get(aC,!1)){const ce=[...o,...O,{provide:y,useValue:!0}];n?n(ce):function pP(n){if(Sh&&!Sh.get(aC,!1))throw new Br(400,!1);(function QA(){!function ge(n){Se=n}(()=>{throw new Br(600,!1)})})(),Sh=n;const i=n.get(oC);(function uC(n){const i=n.get(E1,null);null==i||i.forEach(o=>o())})(n)}(function cC(n=[],i){return ya.create({name:i,providers:[{provide:Wf,useValue:"platform"},{provide:$S,useValue:new Set([()=>Sh=null])},...n]})}(ce,c))}return function mP(n){const i=HS();if(!i)throw new Br(401,!1);return i}()}}function HS(){var n,i;return null!==(n=null===(i=Sh)||void 0===i?void 0:i.get(oC))&&void 0!==n?n:null}function yP(){}let hC=(()=>{class i{}return i.__NG_ELEMENT_ID__=vP,i})();function vP(n){return function _P(n,i,o){if(Hc(n)&&!o){const c=rc(n.index,i);return new wf(c,c)}return 175&n.type?new wf(i[Jo],i):null}(bo(),Sr(),!(16&~n))}class gC{constructor(){}supports(i){return Fi(i)}create(i){return new EP(i)}}const SP=(n,i)=>i;class EP{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SP}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,c=this._removalsHead,y=0,O=null;for(;o||c;){const W=!c||o&&o.currentIndex<vC(c,y,O)?o:c,ce=vC(W,y,O),Ee=W.currentIndex;if(W===c)y--,c=c._nextRemoved;else if(o=o._next,null==W.previousIndex)y++;else{O||(O=[]);const Xe=ce-y,ct=Ee-y;if(Xe!=ct){for(let un=0;un<Xe;un++){const yn=un<O.length?O[un]:O[un]=0,pn=yn+un;ct<=pn&&pn<Xe&&(O[un]=yn+1)}O[W.previousIndex]=ct-Xe}}ce!==Ee&&i(W,ce,Ee)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Fi(i))throw new Br(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let y,O,W,o=this._itHead,c=!1;if(Array.isArray(i)){this.length=i.length;for(let ce=0;ce<this.length;ce++)O=i[ce],W=this._trackByFn(ce,O),null!==o&&Object.is(o.trackById,W)?(c&&(o=this._verifyReinsertion(o,O,W,ce)),Object.is(o.item,O)||this._addIdentityChange(o,O)):(o=this._mismatch(o,O,W,ce),c=!0),o=o._next}else y=0,function bs(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let c;for(;!(c=o.next()).done;)i(c.value)}}(i,ce=>{W=this._trackByFn(y,ce),null!==o&&Object.is(o.trackById,W)?(c&&(o=this._verifyReinsertion(o,ce,W,y)),Object.is(o.item,ce)||this._addIdentityChange(o,ce)):(o=this._mismatch(o,ce,W,y),c=!0),o=o._next,y++}),this.length=y;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,c,y){let O;return null===i?O=this._itTail:(O=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,O,y)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(c,y))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,O,y)):i=this._addAfter(new TP(o,c),O,y),i}_verifyReinsertion(i,o,c,y){let O=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==O?i=this._reinsertAfter(O,i._prev,y):i.currentIndex!=y&&(i.currentIndex=y,this._addToMoves(i,y)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const y=i._prevRemoved,O=i._nextRemoved;return null===y?this._removalsHead=O:y._nextRemoved=O,null===O?this._removalsTail=y:O._prevRemoved=y,this._insertAfter(i,o,c),this._addToMoves(i,c),i}_moveAfter(i,o,c){return this._unlink(i),this._insertAfter(i,o,c),this._addToMoves(i,c),i}_addAfter(i,o,c){return this._insertAfter(i,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,c){const y=null===o?this._itHead:o._next;return i._next=y,i._prev=o,null===y?this._itTail=i:y._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new yC),this._linkedRecords.put(i),i.currentIndex=c,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,c=i._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class TP{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MP{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,i))return c;return null}remove(i){const o=i._prevDup,c=i._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class yC{constructor(){this.map=new Map}put(i){const o=i.trackById;let c=this.map.get(o);c||(c=new MP,this.map.set(o,c)),c.add(i)}get(i,o){const y=this.map.get(i);return y?y.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vC(n,i,o){const c=n.previousIndex;if(null===c)return c;let y=0;return o&&c<o.length&&(y=o[c]),c+i+y}class _C{constructor(){}supports(i){return i instanceof Map||ss(i)}create(){return new AP}}class AP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ss(i)))throw new Br(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(c,y)=>{if(o&&o.key===y)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const O=this._getOrCreateRecordForKey(y,c);o=this._insertBeforeOrAppend(o,O)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const c=i._prev;return o._next=i,o._prev=c,i._prev=o,c&&(c._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const y=this._records.get(i);this._maybeAddToChanges(y,o);const O=y._prev,W=y._next;return O&&(O._next=W),W&&(W._prev=O),y._next=null,y._prev=null,y}const c=new CP(i);return this._records.set(i,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(c=>o(i[c],c))}}class CP{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bC(){return new YS([new gC])}let YS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(null!=y){const O=y.factories.slice();c=c.concat(O)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||bC()),deps:[[i,new Xi,new ki]]}}find(c){const y=this.factories.find(O=>O.supports(c));if(null!=y)return y;throw new Br(901,!1)}}return(n=i).\u0275prov=Zr({token:n,providedIn:"root",factory:bC}),i})();function wC(){return new ZS([new _C])}let ZS=(()=>{var n;class i{constructor(c){this.factories=c}static create(c,y){if(y){const O=y.factories.slice();c=c.concat(O)}return new i(c)}static extend(c){return{provide:i,useFactory:y=>i.create(c,y||wC()),deps:[[i,new Xi,new ki]]}}find(c){const y=this.factories.find(O=>O.supports(c));if(y)return y;throw new Br(901,!1)}}return(n=i).\u0275prov=Zr({token:n,providedIn:"root",factory:wC}),i})();const RP=lC(null,"core",[]);let PP=(()=>{var n;class i{constructor(c){}}return(n=i).\u0275fac=function(c){return new(c||n)(ve(Ru))},n.\u0275mod=Pt({type:n}),n.\u0275inj=_i({}),i})();const FC=new di("");function fO(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function mO(n,i){ka("NgSignals");const o=function V(n){const i=Object.create(Y);i.computation=n;const o=()=>{if(D(i),w(i),i.value===te)throw i.error;return i.value};return o[l]=i,o}(n);return null!=i&&i.equal&&(o[l].equal=i.equal),o}function gO(n){const i=be(null);try{return n()}finally{be(i)}}function xO(n,i){const o=Ln(n),c=i.elementInjector||Rl();return new vh(o).create(c,i.projectableNodes,i.hostElement,i.environmentInjector)}function SO(n){const i=Ln(n);if(!i)return null;const o=new vh(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},4341:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{me:()=>S,YN:()=>Jt,zX:()=>el,VZ:()=>Aa,cz:()=>J,kq:()=>h,vO:()=>qt,BC:()=>Qn,vS:()=>Ma,Q0:()=>Qa});var F=Ge(3953),j=Ge(177),Rt=Ge(6648),rn=Ge(1985),l=Ge(3073),be=Ge(8750),Z=Ge(9326),M=Ge(4360),C=Ge(6450),b=Ge(8496),I=Ge(1413),D=Ge(6354);let d=(()=>{var je;class xe{constructor(ke,ht){this._renderer=ke,this._elementRef=ht,this.onChange=on=>{},this.onTouched=()=>{}}setProperty(ke,ht){this._renderer.setProperty(this._elementRef.nativeElement,ke,ht)}registerOnTouched(ke){this.onTouched=ke}registerOnChange(ke){this.onChange=ke}setDisabledState(ke){this.setProperty("disabled",ke)}}return(je=xe).\u0275fac=function(ke){return new(ke||je)(F.rXU(F.sFG),F.rXU(F.aKT))},je.\u0275dir=F.FsC({type:je}),xe})(),f=(()=>{var je;class xe extends d{}return(je=xe).\u0275fac=(()=>{let Ve;return function(ht){return(Ve||(Ve=F.xGo(je)))(ht||je)}})(),je.\u0275dir=F.FsC({type:je,features:[F.Vt3]}),xe})();const h=new F.nKC(""),g={provide:h,useExisting:(0,F.Rfq)(()=>S),multi:!0},E=new F.nKC("");let S=(()=>{var je;class xe extends d{constructor(ke,ht,on){super(ke,ht),this._compositionMode=on,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x(){const je=(0,j.QT)()?(0,j.QT)().getUserAgent():"";return/android (\d+)/.test(je.toLowerCase())}())}writeValue(ke){this.setProperty("value",null==ke?"":ke)}_handleInput(ke){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(ke)}_compositionStart(){this._composing=!0}_compositionEnd(ke){this._composing=!1,this._compositionMode&&this.onChange(ke)}}return(je=xe).\u0275fac=function(ke){return new(ke||je)(F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(E,8))},je.\u0275dir=F.FsC({type:je,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ke,ht){1&ke&&F.bIt("input",function(Dn){return ht._handleInput(Dn.target.value)})("blur",function(){return ht.onTouched()})("compositionstart",function(){return ht._compositionStart()})("compositionend",function(Dn){return ht._compositionEnd(Dn.target.value)})},features:[F.Jv_([g]),F.Vt3]}),xe})();function L(je){return null==je||("string"==typeof je||Array.isArray(je))&&0===je.length}const J=new F.nKC(""),G=new F.nKC("");function Q(je){return null}function fe(je){return null!=je}function De(je){return(0,F.jNT)(je)?(0,Rt.H)(je):je}function it(je){let xe={};return je.forEach(Ve=>{xe=null!=Ve?{...xe,...Ve}:xe}),0===Object.keys(xe).length?null:xe}function le(je,xe){return xe.map(Ve=>Ve(je))}function ye(je){return je.map(xe=>function z(je){return!je.validate}(xe)?xe:Ve=>xe.validate(Ve))}function Je(je){return null!=je?function Ue(je){if(!je)return null;const xe=je.filter(fe);return 0==xe.length?null:function(Ve){return it(le(Ve,xe))}}(ye(je)):null}function Ct(je){return null!=je?function vt(je){if(!je)return null;const xe=je.filter(fe);return 0==xe.length?null:function(Ve){return function w(...je){const xe=(0,Z.ms)(je),{args:Ve,keys:ke}=(0,l.D)(je),ht=new rn.c(on=>{const{length:Dn}=Ve;if(!Dn)return void on.complete();const Gn=new Array(Dn);let li=Dn,Zr=Dn;for(let Si=0;Si<Dn;Si++){let _i=!1;(0,be.Tg)(Ve[Si]).subscribe((0,M._)(on,Ji=>{_i||(_i=!0,Zr--),Gn[Si]=Ji},()=>li--,void 0,()=>{(!li||!_i)&&(Zr||on.next(ke?(0,b.e)(ke,Gn):Gn),on.complete())}))}});return xe?ht.pipe((0,C.I)(xe)):ht}(le(Ve,xe).map(De)).pipe((0,D.T)(it))}}(ye(je)):null}function zt(je,xe){return null===je?[xe]:Array.isArray(je)?[...je,xe]:[je,xe]}function Wt(je){return je?Array.isArray(je)?je:[je]:[]}function mt(je,xe){return Array.isArray(je)?je.includes(xe):je===xe}function Nt(je,xe){const Ve=Wt(xe);return Wt(je).forEach(ht=>{mt(Ve,ht)||Ve.push(ht)}),Ve}function kt(je,xe){return Wt(xe).filter(Ve=>!mt(je,Ve))}class Ut{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(xe){this._rawValidators=xe||[],this._composedValidatorFn=Je(this._rawValidators)}_setAsyncValidators(xe){this._rawAsyncValidators=xe||[],this._composedAsyncValidatorFn=Ct(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(xe){this._onDestroyCallbacks.push(xe)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(xe=>xe()),this._onDestroyCallbacks=[]}reset(xe=void 0){this.control&&this.control.reset(xe)}hasError(xe,Ve){return!!this.control&&this.control.hasError(xe,Ve)}getError(xe,Ve){return this.control?this.control.getError(xe,Ve):null}}class Tt extends Ut{get formDirective(){return null}get path(){return null}}class qt extends Ut{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mn{constructor(xe){this._cd=xe}get isTouched(){var xe,Ve,ke;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Ve=xe._touched)||void 0===Ve||Ve.call(xe),!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.touched)}get isUntouched(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.untouched)}get isPristine(){var xe,Ve,ke;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Ve=xe._pristine)||void 0===Ve||Ve.call(xe),!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.pristine)}get isDirty(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.dirty)}get isValid(){var xe,Ve,ke;return null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||null===(Ve=xe._status)||void 0===Ve||Ve.call(xe),!(null===(ke=this._cd)||void 0===ke||null===(ke=ke.control)||void 0===ke||!ke.valid)}get isInvalid(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.invalid)}get isPending(){var xe;return!(null===(xe=this._cd)||void 0===xe||null===(xe=xe.control)||void 0===xe||!xe.pending)}get isSubmitted(){var xe,Ve,ke;return null===(xe=this._cd)||void 0===xe||null===(Ve=xe._submitted)||void 0===Ve||Ve.call(xe),!(null===(ke=this._cd)||void 0===ke||!ke.submitted)}}let Qn=(()=>{var je;class xe extends mn{constructor(ke){super(ke)}}return(je=xe).\u0275fac=function(ke){return new(ke||je)(F.rXU(qt,2))},je.\u0275dir=F.FsC({type:je,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ke,ht){2&ke&&F.AVh("ng-untouched",ht.isUntouched)("ng-touched",ht.isTouched)("ng-pristine",ht.isPristine)("ng-dirty",ht.isDirty)("ng-valid",ht.isValid)("ng-invalid",ht.isInvalid)("ng-pending",ht.isPending)},features:[F.Vt3]}),xe})();const cn="VALID",Tn="INVALID",sn="PENDING",_n="DISABLED";class tr{}class Xt extends tr{constructor(xe,Ve){super(),this.value=xe,this.source=Ve}}class hn extends tr{constructor(xe,Ve){super(),this.pristine=xe,this.source=Ve}}class Fn extends tr{constructor(xe,Ve){super(),this.touched=xe,this.source=Ve}}class Cn extends tr{constructor(xe,Ve){super(),this.status=xe,this.source=Ve}}function ne(je){return null!=je&&!Array.isArray(je)&&"object"==typeof je}class T{constructor(xe,Ve){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=(0,F.EWP)(()=>this.statusReactive()),this.statusReactive=(0,F.vPA)(void 0),this._pristine=(0,F.EWP)(()=>this.pristineReactive()),this.pristineReactive=(0,F.vPA)(!0),this._touched=(0,F.EWP)(()=>this.touchedReactive()),this.touchedReactive=(0,F.vPA)(!1),this._events=new I.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(xe),this._assignAsyncValidators(Ve)}get validator(){return this._composedValidatorFn}set validator(xe){this._rawValidators=this._composedValidatorFn=xe}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(xe){this._rawAsyncValidators=this._composedAsyncValidatorFn=xe}get parent(){return this._parent}get status(){return(0,F.O8t)(this.statusReactive)}set status(xe){(0,F.O8t)(()=>this.statusReactive.set(xe))}get valid(){return this.status===cn}get invalid(){return this.status===Tn}get pending(){return this.status==sn}get disabled(){return this.status===_n}get enabled(){return this.status!==_n}get pristine(){return(0,F.O8t)(this.pristineReactive)}set pristine(xe){(0,F.O8t)(()=>this.pristineReactive.set(xe))}get dirty(){return!this.pristine}get touched(){return(0,F.O8t)(this.touchedReactive)}set touched(xe){(0,F.O8t)(()=>this.touchedReactive.set(xe))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(xe){this._assignValidators(xe)}setAsyncValidators(xe){this._assignAsyncValidators(xe)}addValidators(xe){this.setValidators(Nt(xe,this._rawValidators))}addAsyncValidators(xe){this.setAsyncValidators(Nt(xe,this._rawAsyncValidators))}removeValidators(xe){this.setValidators(kt(xe,this._rawValidators))}removeAsyncValidators(xe){this.setAsyncValidators(kt(xe,this._rawAsyncValidators))}hasValidator(xe){return mt(this._rawValidators,xe)}hasAsyncValidator(xe){return mt(this._rawAsyncValidators,xe)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(xe={}){var Ve;const ke=!1===this.touched;this.touched=!0;const ht=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;this._parent&&!xe.onlySelf&&this._parent.markAsTouched({...xe,sourceControl:ht}),ke&&!1!==xe.emitEvent&&this._events.next(new Fn(!0,ht))}markAllAsTouched(xe={}){this.markAsTouched({onlySelf:!0,emitEvent:xe.emitEvent,sourceControl:this}),this._forEachChild(Ve=>Ve.markAllAsTouched(xe))}markAsUntouched(xe={}){var Ve;const ke=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const ht=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;this._forEachChild(on=>{on.markAsUntouched({onlySelf:!0,emitEvent:xe.emitEvent,sourceControl:ht})}),this._parent&&!xe.onlySelf&&this._parent._updateTouched(xe,ht),ke&&!1!==xe.emitEvent&&this._events.next(new Fn(!1,ht))}markAsDirty(xe={}){var Ve;const ke=!0===this.pristine;this.pristine=!1;const ht=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;this._parent&&!xe.onlySelf&&this._parent.markAsDirty({...xe,sourceControl:ht}),ke&&!1!==xe.emitEvent&&this._events.next(new hn(!1,ht))}markAsPristine(xe={}){var Ve;const ke=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const ht=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;this._forEachChild(on=>{on.markAsPristine({onlySelf:!0,emitEvent:xe.emitEvent})}),this._parent&&!xe.onlySelf&&this._parent._updatePristine(xe,ht),ke&&!1!==xe.emitEvent&&this._events.next(new hn(!0,ht))}markAsPending(xe={}){var Ve;this.status=sn;const ke=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;!1!==xe.emitEvent&&(this._events.next(new Cn(this.status,ke)),this.statusChanges.emit(this.status)),this._parent&&!xe.onlySelf&&this._parent.markAsPending({...xe,sourceControl:ke})}disable(xe={}){var Ve;const ke=this._parentMarkedDirty(xe.onlySelf);this.status=_n,this.errors=null,this._forEachChild(on=>{on.disable({...xe,onlySelf:!0})}),this._updateValue();const ht=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;!1!==xe.emitEvent&&(this._events.next(new Xt(this.value,ht)),this._events.next(new Cn(this.status,ht)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...xe,skipPristineCheck:ke},this),this._onDisabledChange.forEach(on=>on(!0))}enable(xe={}){const Ve=this._parentMarkedDirty(xe.onlySelf);this.status=cn,this._forEachChild(ke=>{ke.enable({...xe,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:xe.emitEvent}),this._updateAncestors({...xe,skipPristineCheck:Ve},this),this._onDisabledChange.forEach(ke=>ke(!1))}_updateAncestors(xe,Ve){this._parent&&!xe.onlySelf&&(this._parent.updateValueAndValidity(xe),xe.skipPristineCheck||this._parent._updatePristine({},Ve),this._parent._updateTouched({},Ve))}setParent(xe){this._parent=xe}getRawValue(){return this.value}updateValueAndValidity(xe={}){var Ve;if(this._setInitialStatus(),this._updateValue(),this.enabled){const ht=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cn||this.status===sn)&&this._runAsyncValidator(ht,xe.emitEvent)}const ke=null!==(Ve=xe.sourceControl)&&void 0!==Ve?Ve:this;!1!==xe.emitEvent&&(this._events.next(new Xt(this.value,ke)),this._events.next(new Cn(this.status,ke)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!xe.onlySelf&&this._parent.updateValueAndValidity({...xe,sourceControl:ke})}_updateTreeValidity(xe={emitEvent:!0}){this._forEachChild(Ve=>Ve._updateTreeValidity(xe)),this.updateValueAndValidity({onlySelf:!0,emitEvent:xe.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_n:cn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(xe,Ve){if(this.asyncValidator){this.status=sn,this._hasOwnPendingAsyncValidator={emitEvent:!1!==Ve};const ke=De(this.asyncValidator(this));this._asyncValidationSubscription=ke.subscribe(ht=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(ht,{emitEvent:Ve,shouldHaveEmitted:xe})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){var xe,Ve;this._asyncValidationSubscription.unsubscribe();const ke=null!==(xe=null===(Ve=this._hasOwnPendingAsyncValidator)||void 0===Ve?void 0:Ve.emitEvent)&&void 0!==xe&&xe;return this._hasOwnPendingAsyncValidator=null,ke}return!1}setErrors(xe,Ve={}){this.errors=xe,this._updateControlsErrors(!1!==Ve.emitEvent,this,Ve.shouldHaveEmitted)}get(xe){let Ve=xe;return null==Ve||(Array.isArray(Ve)||(Ve=Ve.split(".")),0===Ve.length)?null:Ve.reduce((ke,ht)=>ke&&ke._find(ht),this)}getError(xe,Ve){const ke=Ve?this.get(Ve):this;return ke&&ke.errors?ke.errors[xe]:null}hasError(xe,Ve){return!!this.getError(xe,Ve)}get root(){let xe=this;for(;xe._parent;)xe=xe._parent;return xe}_updateControlsErrors(xe,Ve,ke){this.status=this._calculateStatus(),xe&&this.statusChanges.emit(this.status),(xe||ke)&&this._events.next(new Cn(this.status,Ve)),this._parent&&this._parent._updateControlsErrors(xe,Ve,ke)}_initObservables(){this.valueChanges=new F.bkB,this.statusChanges=new F.bkB}_calculateStatus(){return this._allControlsDisabled()?_n:this.errors?Tn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sn)?sn:this._anyControlsHaveStatus(Tn)?Tn:cn}_anyControlsHaveStatus(xe){return this._anyControls(Ve=>Ve.status===xe)}_anyControlsDirty(){return this._anyControls(xe=>xe.dirty)}_anyControlsTouched(){return this._anyControls(xe=>xe.touched)}_updatePristine(xe,Ve){const ke=!this._anyControlsDirty(),ht=this.pristine!==ke;this.pristine=ke,this._parent&&!xe.onlySelf&&this._parent._updatePristine(xe,Ve),ht&&this._events.next(new hn(this.pristine,Ve))}_updateTouched(xe={},Ve){this.touched=this._anyControlsTouched(),this._events.next(new Fn(this.touched,Ve)),this._parent&&!xe.onlySelf&&this._parent._updateTouched(xe,Ve)}_registerOnCollectionChange(xe){this._onCollectionChange=xe}_setUpdateStrategy(xe){ne(xe)&&null!=xe.updateOn&&(this._updateOn=xe.updateOn)}_parentMarkedDirty(xe){return!xe&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(xe){return null}_assignValidators(xe){this._rawValidators=Array.isArray(xe)?xe.slice():xe,this._composedValidatorFn=function Ur(je){return Array.isArray(je)?Je(je):je||null}(this._rawValidators)}_assignAsyncValidators(xe){this._rawAsyncValidators=Array.isArray(xe)?xe.slice():xe,this._composedAsyncValidatorFn=function ei(je){return Array.isArray(je)?Ct(je):je||null}(this._rawAsyncValidators)}}const Ae=new F.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>tt}),tt="always";function Kt(je,xe,Ve=tt){var ke,ht;(function Ze(je,xe){const Ve=function _t(je){return je._rawValidators}(je);null!==xe.validator?je.setValidators(zt(Ve,xe.validator)):"function"==typeof Ve&&je.setValidators([Ve]);const ke=function Ft(je){return je._rawAsyncValidators}(je);null!==xe.asyncValidator?je.setAsyncValidators(zt(ke,xe.asyncValidator)):"function"==typeof ke&&je.setAsyncValidators([ke]);const ht=()=>je.updateValueAndValidity();We(xe._rawValidators,ht),We(xe._rawAsyncValidators,ht)})(je,xe),xe.valueAccessor.writeValue(je.value),(je.disabled||"always"===Ve)&&(null===(ke=(ht=xe.valueAccessor).setDisabledState)||void 0===ke||ke.call(ht,je.disabled)),function Zt(je,xe){xe.valueAccessor.registerOnChange(Ve=>{je._pendingValue=Ve,je._pendingChange=!0,je._pendingDirty=!0,"change"===je.updateOn&&zn(je,xe)})}(je,xe),function or(je,xe){const Ve=(ke,ht)=>{xe.valueAccessor.writeValue(ke),ht&&xe.viewToModelUpdate(ke)};je.registerOnChange(Ve),xe._registerOnDestroy(()=>{je._unregisterOnChange(Ve)})}(je,xe),function En(je,xe){xe.valueAccessor.registerOnTouched(()=>{je._pendingTouched=!0,"blur"===je.updateOn&&je._pendingChange&&zn(je,xe),"submit"!==je.updateOn&&je.markAsTouched()})}(je,xe),function at(je,xe){if(xe.valueAccessor.setDisabledState){const Ve=ke=>{xe.valueAccessor.setDisabledState(ke)};je.registerOnDisabledChange(Ve),xe._registerOnDestroy(()=>{je._unregisterOnDisabledChange(Ve)})}}(je,xe)}function We(je,xe){je.forEach(Ve=>{Ve.registerOnValidatorChange&&Ve.registerOnValidatorChange(xe)})}function zn(je,xe){je._pendingDirty&&je.markAsDirty(),je.setValue(je._pendingValue,{emitModelToViewChange:!1}),xe.viewToModelUpdate(je._pendingValue),je._pendingChange=!1}function Ta(je,xe){const Ve=je.indexOf(xe);Ve>-1&&je.splice(Ve,1)}function To(je){return"object"==typeof je&&null!==je&&2===Object.keys(je).length&&"value"in je&&"disabled"in je}Promise.resolve();const Ja=class extends T{constructor(xe=null,Ve,ke){super(function fr(je){return(ne(je)?je.validators:je)||null}(Ve),function vr(je,xe){return(ne(xe)?xe.asyncValidators:je)||null}(ke,Ve)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(xe),this._setUpdateStrategy(Ve),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ne(Ve)&&(Ve.nonNullable||Ve.initialValueIsDefault)&&(this.defaultValue=To(xe)?xe.value:xe)}setValue(xe,Ve={}){this.value=this._pendingValue=xe,this._onChange.length&&!1!==Ve.emitModelToViewChange&&this._onChange.forEach(ke=>ke(this.value,!1!==Ve.emitViewToModelChange)),this.updateValueAndValidity(Ve)}patchValue(xe,Ve={}){this.setValue(xe,Ve)}reset(xe=this.defaultValue,Ve={}){this._applyFormState(xe),this.markAsPristine(Ve),this.markAsUntouched(Ve),this.setValue(this.value,Ve),this._pendingChange=!1}_updateValue(){}_anyControls(xe){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(xe){this._onChange.push(xe)}_unregisterOnChange(xe){Ta(this._onChange,xe)}registerOnDisabledChange(xe){this._onDisabledChange.push(xe)}_unregisterOnDisabledChange(xe){Ta(this._onDisabledChange,xe)}_forEachChild(xe){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(xe){To(xe)?(this.value=this._pendingValue=xe.value,xe.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=xe}},na={provide:qt,useExisting:(0,F.Rfq)(()=>Ma)},Ga=Promise.resolve();let Ma=(()=>{var je;class xe extends qt{constructor(ke,ht,on,Dn,Gn,li){super(),this._changeDetectorRef=Gn,this.callSetDisabledState=li,this.control=new Ja,this._registered=!1,this.name="",this.update=new F.bkB,this._parent=ke,this._setValidators(ht),this._setAsyncValidators(on),this.valueAccessor=function So(je,xe){if(!xe)return null;let Ve,ke,ht;return Array.isArray(xe),xe.forEach(on=>{on.constructor===S?Ve=on:function so(je){return Object.getPrototypeOf(je.constructor)===f}(on)?ke=on:ht=on}),ht||ke||Ve||null}(0,Dn)}ngOnChanges(ke){if(this._checkForErrors(),!this._registered||"name"in ke){if(this._registered&&(this._checkName(),this.formDirective)){const ht=ke.name.previousValue;this.formDirective.removeControl({name:ht,path:this._getPath(ht)})}this._setUpControl()}"isDisabled"in ke&&this._updateDisabled(ke),function Ls(je,xe){if(!je.hasOwnProperty("model"))return!1;const Ve=je.model;return!!Ve.isFirstChange()||!Object.is(xe,Ve.currentValue)}(ke,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(ke){this.viewModel=ke,this.update.emit(ke)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(ke){Ga.then(()=>{var ht;this.control.setValue(ke,{emitViewToModelChange:!1}),null===(ht=this._changeDetectorRef)||void 0===ht||ht.markForCheck()})}_updateDisabled(ke){const ht=ke.isDisabled.currentValue,on=0!==ht&&(0,F.L39)(ht);Ga.then(()=>{var Dn;on&&!this.control.disabled?this.control.disable():!on&&this.control.disabled&&this.control.enable(),null===(Dn=this._changeDetectorRef)||void 0===Dn||Dn.markForCheck()})}_getPath(ke){return this._parent?function pt(je,xe){return[...xe.path,je]}(ke,this._parent):[ke]}}return(je=xe).\u0275fac=function(ke){return new(ke||je)(F.rXU(Tt,9),F.rXU(J,10),F.rXU(G,10),F.rXU(h,10),F.rXU(F.gRc,8),F.rXU(Ae,8))},je.\u0275dir=F.FsC({type:je,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[F.Jv_([na]),F.Vt3,F.OA$]}),xe})();const La={provide:h,useExisting:(0,F.Rfq)(()=>Qa),multi:!0};let Qa=(()=>{var je;class xe extends f{writeValue(ke){this.setProperty("value",null==ke?"":ke)}registerOnChange(ke){this.onChange=ht=>{ke(""==ht?null:parseFloat(ht))}}}return(je=xe).\u0275fac=(()=>{let Ve;return function(ht){return(Ve||(Ve=F.xGo(je)))(ht||je)}})(),je.\u0275dir=F.FsC({type:je,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ke,ht){1&ke&&F.bIt("input",function(Dn){return ht.onChange(Dn.target.value)})("blur",function(){return ht.onTouched()})},features:[F.Jv_([La]),F.Vt3]}),xe})();function ha(je){return"number"==typeof je?je:parseFloat(je)}let go=(()=>{var je;class xe{constructor(){this._validator=Q}ngOnChanges(ke){if(this.inputName in ke){const ht=this.normalizeInput(ke[this.inputName].currentValue);this._enabled=this.enabled(ht),this._validator=this._enabled?this.createValidator(ht):Q,this._onChange&&this._onChange()}}validate(ke){return this._validator(ke)}registerOnValidatorChange(ke){this._onChange=ke}enabled(ke){return null!=ke}}return(je=xe).\u0275fac=function(ke){return new(ke||je)},je.\u0275dir=F.FsC({type:je,features:[F.OA$]}),xe})();const pi={provide:J,useExisting:(0,F.Rfq)(()=>el),multi:!0};let el=(()=>{var je;class xe extends go{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=ke=>ha(ke),this.createValidator=ke=>function te(je){return xe=>{if(L(xe.value)||L(je))return null;const Ve=parseFloat(xe.value);return!isNaN(Ve)&&Ve>je?{max:{max:je,actual:xe.value}}:null}}(ke)}}return(je=xe).\u0275fac=(()=>{let Ve;return function(ht){return(Ve||(Ve=F.xGo(je)))(ht||je)}})(),je.\u0275dir=F.FsC({type:je,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(ke,ht){2&ke&&F.BMQ("max",ht._enabled?ht.max:null)},inputs:{max:"max"},features:[F.Jv_([pi]),F.Vt3]}),xe})();const al={provide:J,useExisting:(0,F.Rfq)(()=>Aa),multi:!0};let Aa=(()=>{var je;class xe extends go{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=ke=>ha(ke),this.createValidator=ke=>function H(je){return xe=>{if(L(xe.value)||L(je))return null;const Ve=parseFloat(xe.value);return!isNaN(Ve)&&Ve<je?{min:{min:je,actual:xe.value}}:null}}(ke)}}return(je=xe).\u0275fac=(()=>{let Ve;return function(ht){return(Ve||(Ve=F.xGo(je)))(ht||je)}})(),je.\u0275dir=F.FsC({type:je,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(ke,ht){2&ke&&F.BMQ("min",ht._enabled?ht.min:null)},inputs:{min:"min"},features:[F.Jv_([al]),F.Vt3]}),xe})(),P=(()=>{var je;class xe{}return(je=xe).\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=F.$C({type:je}),je.\u0275inj=F.G2t({}),xe})(),Jt=(()=>{var je;class xe{static withConfig(ke){var ht;return{ngModule:xe,providers:[{provide:Ae,useValue:null!==(ht=ke.callSetDisabledState)&&void 0!==ht?ht:tt}]}}}return(je=xe).\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=F.$C({type:je}),je.\u0275inj=F.G2t({imports:[P]}),xe})()},345:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{B7:()=>J,Bb:()=>Wt,hE:()=>kt,sG:()=>Ct,up:()=>gt});var F=Ge(177),j=Ge(3953);class Rt extends F.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rn extends Rt{static makeCurrent(){(0,F.ZD)(new rn)}onAndCancel(cn,Tn,sn){return cn.addEventListener(Tn,sn),()=>{cn.removeEventListener(Tn,sn)}}dispatchEvent(cn,Tn){cn.dispatchEvent(Tn)}remove(cn){cn.parentNode&&cn.parentNode.removeChild(cn)}createElement(cn,Tn){return(Tn=Tn||this.getDefaultDocument()).createElement(cn)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(cn){return cn.nodeType===Node.ELEMENT_NODE}isShadowRoot(cn){return cn instanceof DocumentFragment}getGlobalEventTarget(cn,Tn){return"window"===Tn?window:"document"===Tn?cn:"body"===Tn?cn.body:null}getBaseHref(cn){const Tn=function be(){return l=l||document.querySelector("base"),l?l.getAttribute("href"):null}();return null==Tn?null:function Z(In){return new URL(In,document.baseURI).pathname}(Tn)}resetBaseElement(){l=null}getUserAgent(){return window.navigator.userAgent}getCookie(cn){return(0,F._b)(document.cookie,cn)}}let l=null,C=(()=>{var In;class cn{build(){return new XMLHttpRequest}}return(In=cn).\u0275fac=function(sn){return new(sn||In)},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();const b=new j.nKC("");let w=(()=>{var In;class cn{constructor(sn,_n){this._zone=_n,this._eventNameToPlugin=new Map,sn.forEach(tr=>{tr.manager=this}),this._plugins=sn.slice().reverse()}addEventListener(sn,_n,tr){return this._findPluginFor(_n).addEventListener(sn,_n,tr)}getZone(){return this._zone}_findPluginFor(sn){let _n=this._eventNameToPlugin.get(sn);if(_n)return _n;if(_n=this._plugins.find(Xt=>Xt.supports(sn)),!_n)throw new j.wOt(5101,!1);return this._eventNameToPlugin.set(sn,_n),_n}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(b),j.KVO(j.SKi))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();class I{constructor(cn){this._doc=cn}}const D="ng-app-id";let d=(()=>{var In;class cn{constructor(sn,_n,tr,Xt={}){this.doc=sn,this.appId=_n,this.nonce=tr,this.platformId=Xt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,F.Vy)(Xt),this.resetHostNodes()}addStyles(sn){for(const _n of sn)1===this.changeUsageCount(_n,1)&&this.onStyleAdded(_n)}removeStyles(sn){for(const _n of sn)this.changeUsageCount(_n,-1)<=0&&this.onStyleRemoved(_n)}ngOnDestroy(){const sn=this.styleNodesInDOM;sn&&(sn.forEach(_n=>_n.remove()),sn.clear());for(const _n of this.getAllStyles())this.onStyleRemoved(_n);this.resetHostNodes()}addHost(sn){this.hostNodes.add(sn);for(const _n of this.getAllStyles())this.addStyleToHost(sn,_n)}removeHost(sn){this.hostNodes.delete(sn)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(sn){for(const _n of this.hostNodes)this.addStyleToHost(_n,sn)}onStyleRemoved(sn){var _n;const tr=this.styleRef;null===(_n=tr.get(sn))||void 0===_n||null===(_n=_n.elements)||void 0===_n||_n.forEach(Xt=>Xt.remove()),tr.delete(sn)}collectServerRenderedStyles(){var sn;const _n=null===(sn=this.doc.head)||void 0===sn?void 0:sn.querySelectorAll(`style[${D}="${this.appId}"]`);if(null!=_n&&_n.length){const tr=new Map;return _n.forEach(Xt=>{null!=Xt.textContent&&tr.set(Xt.textContent,Xt)}),tr}return null}changeUsageCount(sn,_n){const tr=this.styleRef;if(tr.has(sn)){const Xt=tr.get(sn);return Xt.usage+=_n,Xt.usage}return tr.set(sn,{usage:_n,elements:[]}),_n}getStyleElement(sn,_n){const tr=this.styleNodesInDOM,Xt=null==tr?void 0:tr.get(_n);if((null==Xt?void 0:Xt.parentNode)===sn)return tr.delete(_n),Xt.removeAttribute(D),Xt;{const hn=this.doc.createElement("style");return this.nonce&&hn.setAttribute("nonce",this.nonce),hn.textContent=_n,this.platformIsServer&&hn.setAttribute(D,this.appId),sn.appendChild(hn),hn}}addStyleToHost(sn,_n){var tr;const Xt=this.getStyleElement(sn,_n),hn=this.styleRef,Fn=null===(tr=hn.get(_n))||void 0===tr?void 0:tr.elements;Fn?Fn.push(Xt):hn.set(_n,{elements:[Xt],usage:1})}resetHostNodes(){const sn=this.hostNodes;sn.clear(),sn.add(this.doc.head)}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ),j.KVO(j.sZ2),j.KVO(j.BIS,8),j.KVO(j.Agw))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();const f={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h=/%COMP%/g,p="%COMP%",m=`_nghost-${p}`,g=`_ngcontent-${p}`,E=new j.nKC("",{providedIn:"root",factory:()=>!0});function q(In,cn){return cn.map(Tn=>Tn.replace(h,In))}let J=(()=>{var In;class cn{constructor(sn,_n,tr,Xt,hn,Fn,Cn,Wn=null){this.eventManager=sn,this.sharedStylesHost=_n,this.appId=tr,this.removeStylesOnCompDestroy=Xt,this.doc=hn,this.platformId=Fn,this.ngZone=Cn,this.nonce=Wn,this.rendererByCompId=new Map,this.platformIsServer=(0,F.Vy)(Fn),this.defaultRenderer=new G(sn,hn,Cn,this.platformIsServer)}createRenderer(sn,_n){if(!sn||!_n)return this.defaultRenderer;this.platformIsServer&&_n.encapsulation===j.gXe.ShadowDom&&(_n={..._n,encapsulation:j.gXe.Emulated});const tr=this.getOrCreateRenderer(sn,_n);return tr instanceof we?tr.applyToHost(sn):tr instanceof Y&&tr.applyStyles(),tr}getOrCreateRenderer(sn,_n){const tr=this.rendererByCompId;let Xt=tr.get(_n.id);if(!Xt){const hn=this.doc,Fn=this.ngZone,Cn=this.eventManager,Wn=this.sharedStylesHost,yr=this.removeStylesOnCompDestroy,fr=this.platformIsServer;switch(_n.encapsulation){case j.gXe.Emulated:Xt=new we(Cn,Wn,_n,this.appId,yr,hn,Fn,fr);break;case j.gXe.ShadowDom:return new te(Cn,Wn,sn,_n,hn,Fn,this.nonce,fr);default:Xt=new Y(Cn,Wn,_n,yr,hn,Fn,fr)}tr.set(_n.id,Xt)}return Xt}ngOnDestroy(){this.rendererByCompId.clear()}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(w),j.KVO(d),j.KVO(j.sZ2),j.KVO(E),j.KVO(F.qQ),j.KVO(j.Agw),j.KVO(j.SKi),j.KVO(j.BIS))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();class G{constructor(cn,Tn,sn,_n){this.eventManager=cn,this.doc=Tn,this.ngZone=sn,this.platformIsServer=_n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(cn,Tn){return Tn?this.doc.createElementNS(f[Tn]||Tn,cn):this.doc.createElement(cn)}createComment(cn){return this.doc.createComment(cn)}createText(cn){return this.doc.createTextNode(cn)}appendChild(cn,Tn){(H(cn)?cn.content:cn).appendChild(Tn)}insertBefore(cn,Tn,sn){cn&&(H(cn)?cn.content:cn).insertBefore(Tn,sn)}removeChild(cn,Tn){cn&&cn.removeChild(Tn)}selectRootElement(cn,Tn){let sn="string"==typeof cn?this.doc.querySelector(cn):cn;if(!sn)throw new j.wOt(-5104,!1);return Tn||(sn.textContent=""),sn}parentNode(cn){return cn.parentNode}nextSibling(cn){return cn.nextSibling}setAttribute(cn,Tn,sn,_n){if(_n){Tn=_n+":"+Tn;const tr=f[_n];tr?cn.setAttributeNS(tr,Tn,sn):cn.setAttribute(Tn,sn)}else cn.setAttribute(Tn,sn)}removeAttribute(cn,Tn,sn){if(sn){const _n=f[sn];_n?cn.removeAttributeNS(_n,Tn):cn.removeAttribute(`${sn}:${Tn}`)}else cn.removeAttribute(Tn)}addClass(cn,Tn){cn.classList.add(Tn)}removeClass(cn,Tn){cn.classList.remove(Tn)}setStyle(cn,Tn,sn,_n){_n&(j.czy.DashCase|j.czy.Important)?cn.style.setProperty(Tn,sn,_n&j.czy.Important?"important":""):cn.style[Tn]=sn}removeStyle(cn,Tn,sn){sn&j.czy.DashCase?cn.style.removeProperty(Tn):cn.style[Tn]=""}setProperty(cn,Tn,sn){null!=cn&&(cn[Tn]=sn)}setValue(cn,Tn){cn.nodeValue=Tn}listen(cn,Tn,sn){if("string"==typeof cn&&!(cn=(0,F.QT)().getGlobalEventTarget(this.doc,cn)))throw new Error(`Unsupported event target ${cn} for event ${Tn}`);return this.eventManager.addEventListener(cn,Tn,this.decoratePreventDefault(sn))}decoratePreventDefault(cn){return Tn=>{if("__ngUnwrap__"===Tn)return cn;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>cn(Tn)):cn(Tn))&&Tn.preventDefault()}}}function H(In){return"TEMPLATE"===In.tagName&&void 0!==In.content}class te extends G{constructor(cn,Tn,sn,_n,tr,Xt,hn,Fn){super(cn,tr,Xt,Fn),this.sharedStylesHost=Tn,this.hostEl=sn,this.shadowRoot=sn.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Cn=q(_n.id,_n.styles);for(const Wn of Cn){const yr=document.createElement("style");hn&&yr.setAttribute("nonce",hn),yr.textContent=Wn,this.shadowRoot.appendChild(yr)}}nodeOrShadowRoot(cn){return cn===this.hostEl?this.shadowRoot:cn}appendChild(cn,Tn){return super.appendChild(this.nodeOrShadowRoot(cn),Tn)}insertBefore(cn,Tn,sn){return super.insertBefore(this.nodeOrShadowRoot(cn),Tn,sn)}removeChild(cn,Tn){return super.removeChild(this.nodeOrShadowRoot(cn),Tn)}parentNode(cn){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(cn)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Y extends G{constructor(cn,Tn,sn,_n,tr,Xt,hn,Fn){super(cn,tr,Xt,hn),this.sharedStylesHost=Tn,this.removeStylesOnCompDestroy=_n,this.styles=Fn?q(Fn,sn.styles):sn.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class we extends Y{constructor(cn,Tn,sn,_n,tr,Xt,hn,Fn){const Cn=_n+"-"+sn.id;super(cn,Tn,sn,tr,Xt,hn,Fn,Cn),this.contentAttr=function S(In){return g.replace(h,In)}(Cn),this.hostAttr=function L(In){return m.replace(h,In)}(Cn)}applyToHost(cn){this.applyStyles(),this.setAttribute(cn,this.hostAttr,"")}createElement(cn,Tn){const sn=super.createElement(cn,Tn);return super.setAttribute(sn,this.contentAttr,""),sn}}let Se=(()=>{var In;class cn extends I{constructor(sn){super(sn)}supports(sn){return!0}addEventListener(sn,_n,tr){return sn.addEventListener(_n,tr,!1),()=>this.removeEventListener(sn,_n,tr)}removeEventListener(sn,_n,tr){return sn.removeEventListener(_n,tr)}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})(),oe=(()=>{var In;class cn extends I{constructor(sn){super(sn),this.delegate=(0,j.WQX)(j.zAP,{optional:!0})}supports(sn){return!!this.delegate&&this.delegate.supports(sn)}addEventListener(sn,_n,tr){return this.delegate.addEventListener(sn,_n,tr)}removeEventListener(sn,_n,tr){return this.delegate.removeEventListener(sn,_n,tr)}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();const ge=["alt","control","meta","shift"],re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Q={alt:In=>In.altKey,control:In=>In.ctrlKey,meta:In=>In.metaKey,shift:In=>In.shiftKey};let fe=(()=>{var In;class cn extends I{constructor(sn){super(sn)}supports(sn){return null!=cn.parseEventName(sn)}addEventListener(sn,_n,tr){const Xt=cn.parseEventName(_n),hn=cn.eventCallback(Xt.fullKey,tr,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,F.QT)().onAndCancel(sn,Xt.domEventName,hn))}static parseEventName(sn){const _n=sn.toLowerCase().split("."),tr=_n.shift();if(0===_n.length||"keydown"!==tr&&"keyup"!==tr)return null;const Xt=cn._normalizeKey(_n.pop());let hn="",Fn=_n.indexOf("code");if(Fn>-1&&(_n.splice(Fn,1),hn="code."),ge.forEach(Wn=>{const yr=_n.indexOf(Wn);yr>-1&&(_n.splice(yr,1),hn+=Wn+".")}),hn+=Xt,0!=_n.length||0===Xt.length)return null;const Cn={};return Cn.domEventName=tr,Cn.fullKey=hn,Cn}static matchEventFullKeyCode(sn,_n){let tr=re[sn.key]||sn.key,Xt="";return _n.indexOf("code.")>-1&&(tr=sn.code,Xt="code."),!(null==tr||!tr)&&(tr=tr.toLowerCase()," "===tr?tr="space":"."===tr&&(tr="dot"),ge.forEach(hn=>{hn!==tr&&(0,Q[hn])(sn)&&(Xt+=hn+".")}),Xt+=tr,Xt===_n)}static eventCallback(sn,_n,tr){return Xt=>{cn.matchEventFullKeyCode(Xt,sn)&&tr.runGuarded(()=>_n(Xt))}}static _normalizeKey(sn){return"esc"===sn?"escape":sn}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac}),cn})();const Ct=(0,j.oH4)(j.fpN,"browser",[{provide:j.Agw,useValue:F.AJ},{provide:j.PLl,useValue:function ye(){rn.makeCurrent()},multi:!0},{provide:F.qQ,useFactory:function Je(){return(0,j.TL$)(document),document},deps:[]}]),zt=new j.nKC(""),_t=[{provide:j.e01,useClass:class M{addToWindow(cn){j.JZv.getAngularTestability=(sn,_n=!0)=>{const tr=cn.findTestabilityInTree(sn,_n);if(null==tr)throw new j.wOt(5103,!1);return tr},j.JZv.getAllAngularTestabilities=()=>cn.getAllTestabilities(),j.JZv.getAllAngularRootElements=()=>cn.getAllRootElements(),j.JZv.frameworkStabilizers||(j.JZv.frameworkStabilizers=[]),j.JZv.frameworkStabilizers.push(sn=>{const _n=j.JZv.getAllAngularTestabilities();let tr=_n.length;const Xt=function(){tr--,0==tr&&sn()};_n.forEach(hn=>{hn.whenStable(Xt)})})}findTestabilityInTree(cn,Tn,sn){if(null==Tn)return null;const _n=cn.getTestability(Tn);return null!=_n?_n:sn?(0,F.QT)().isShadowRoot(Tn)?this.findTestabilityInTree(cn,Tn.host,!0):this.findTestabilityInTree(cn,Tn.parentElement,!0):null}},deps:[]},{provide:j.WHO,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]},{provide:j.NYb,useClass:j.NYb,deps:[j.SKi,j.giA,j.e01]}],Ft=[{provide:j.H8p,useValue:"root"},{provide:j.zcH,useFactory:function Ue(){return new j.zcH},deps:[]},{provide:b,useClass:Se,multi:!0,deps:[F.qQ,j.SKi,j.Agw]},{provide:b,useClass:fe,multi:!0,deps:[F.qQ]},{provide:b,useClass:oe,multi:!0},J,d,w,{provide:j._9s,useExisting:J},{provide:F.N0,useClass:C,deps:[]},[]];let Wt=(()=>{var In;class cn{constructor(sn){}static withServerTransition(sn){return{ngModule:cn,providers:[{provide:j.sZ2,useValue:sn.appId}]}}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(zt,12))},In.\u0275mod=j.$C({type:In}),In.\u0275inj=j.G2t({providers:[...Ft,..._t],imports:[F.MD,j.Hbi]}),cn})(),kt=(()=>{var In;class cn{constructor(sn){this._doc=sn}getTitle(){return this._doc.title}setTitle(sn){this._doc.title=sn||""}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac,providedIn:"root"}),cn})(),gt=(()=>{var In;class cn{}return(In=cn).\u0275fac=function(sn){return new(sn||In)},In.\u0275prov=j.jDH({token:In,factory:function(sn){let _n=null;return _n=sn?new(sn||In):j.KVO(wt),_n},providedIn:"root"}),cn})(),wt=(()=>{var In;class cn extends gt{constructor(sn){super(),this._doc=sn}sanitize(sn,_n){if(null==_n)return null;switch(sn){case j.WPN.NONE:return _n;case j.WPN.HTML:return(0,j.ZF7)(_n,"HTML")?(0,j.rcV)(_n):(0,j.h9k)(this._doc,String(_n)).toString();case j.WPN.STYLE:return(0,j.ZF7)(_n,"Style")?(0,j.rcV)(_n):_n;case j.WPN.SCRIPT:if((0,j.ZF7)(_n,"Script"))return(0,j.rcV)(_n);throw new j.wOt(5200,!1);case j.WPN.URL:return(0,j.ZF7)(_n,"URL")?(0,j.rcV)(_n):(0,j.$MX)(String(_n));case j.WPN.RESOURCE_URL:if((0,j.ZF7)(_n,"ResourceURL"))return(0,j.rcV)(_n);throw new j.wOt(5201,!1);default:throw new j.wOt(5202,!1)}}bypassSecurityTrustHtml(sn){return(0,j.Kcf)(sn)}bypassSecurityTrustStyle(sn){return(0,j.cWb)(sn)}bypassSecurityTrustScript(sn){return(0,j.UyX)(sn)}bypassSecurityTrustUrl(sn){return(0,j.osQ)(sn)}bypassSecurityTrustResourceUrl(sn){return(0,j.e5t)(sn)}}return(In=cn).\u0275fac=function(sn){return new(sn||In)(j.KVO(F.qQ))},In.\u0275prov=j.jDH({token:In,factory:In.\u0275fac,providedIn:"root"}),cn})()},9858:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{nX:()=>Jr,Zp:()=>fn,Z:()=>co,Xk:()=>_t,Kp:()=>po,b:()=>ve,Ix:()=>ki,Wk:()=>is,iI:()=>cu,Sd:()=>$n});var F=Ge(3953),j=Ge(1985),Rt=Ge(8071),l=Ge(6648),be=Ge(7673),Z=Ge(4412),M=Ge(4572);const b=(0,Ge(1853).L)(me=>function(){me(this),this.name="EmptyError",this.message="no elements in sequence"});var w=Ge(8793),I=Ge(9030),D=Ge(1203),d=Ge(8810),f=Ge(983),h=Ge(17),p=Ge(1413),m=Ge(8359),g=Ge(177),x=Ge(6354),E=Ge(5558),S=Ge(6697),L=Ge(9326),q=Ge(9974),G=Ge(5964),V=Ge(1397),K=Ge(4360);function H(me){return(0,q.N)((Ce,$e)=>{let Me=!1;Ce.subscribe((0,K._)($e,qe=>{Me=!0,$e.next(qe)},()=>{Me||$e.next(me),$e.complete()}))})}function te(me=Y){return(0,q.N)((Ce,$e)=>{let Me=!1;Ce.subscribe((0,K._)($e,qe=>{Me=!0,$e.next(qe)},()=>Me?$e.complete():$e.error(me())))})}function Y(){return new b}var we=Ge(3669);function Se(me,Ce){const $e=arguments.length>=2;return Me=>Me.pipe(me?(0,G.p)((qe,Pt)=>me(qe,Pt,Me)):we.D,(0,S.s)(1),$e?H(Ce):te(()=>new b))}function oe(me,Ce){return(0,Rt.T)(Ce)?(0,V.Z)(me,Ce,1):(0,V.Z)(me,1)}var ge=Ge(8141),re=Ge(8750);function Q(me){return(0,q.N)((Ce,$e)=>{let Pt,Me=null,qe=!1;Me=Ce.subscribe((0,K._)($e,void 0,void 0,Vt=>{Pt=(0,re.Tg)(me(Vt,Q(me)(Ce))),Me?(Me.unsubscribe(),Me=null,Pt.subscribe($e)):qe=!0})),qe&&(Me.unsubscribe(),Me=null,Pt.subscribe($e))})}function it(me){return me<=0?()=>f.w:(0,q.N)((Ce,$e)=>{let Me=[];Ce.subscribe((0,K._)($e,qe=>{Me.push(qe),me<Me.length&&Me.shift()},()=>{for(const qe of Me)$e.next(qe);$e.complete()},void 0,()=>{Me=null}))})}var z=Ge(3703);function ye(me){return(0,q.N)((Ce,$e)=>{try{Ce.subscribe($e)}finally{$e.add(me)}})}var Ue=Ge(9898),Je=Ge(5343),Ct=Ge(6365),zt=Ge(345);const _t="primary",Ft=Symbol("RouteTitle");class Wt{constructor(Ce){this.params=Ce||{}}has(Ce){return Object.prototype.hasOwnProperty.call(this.params,Ce)}get(Ce){if(this.has(Ce)){const $e=this.params[Ce];return Array.isArray($e)?$e[0]:$e}return null}getAll(Ce){if(this.has(Ce)){const $e=this.params[Ce];return Array.isArray($e)?$e:[$e]}return[]}get keys(){return Object.keys(this.params)}}function mt(me){return new Wt(me)}function Nt(me,Ce,$e){const Me=$e.path.split("/");if(Me.length>me.length||"full"===$e.pathMatch&&(Ce.hasChildren()||Me.length<me.length))return null;const qe={};for(let Pt=0;Pt<Me.length;Pt++){const Vt=Me[Pt],Vn=me[Pt];if(":"===Vt[0])qe[Vt.substring(1)]=Vn;else if(Vt!==Vn.path)return null}return{consumed:me.slice(0,Me.length),posParams:qe}}function Ut(me,Ce){const $e=me?Tt(me):void 0,Me=Ce?Tt(Ce):void 0;if(!$e||!Me||$e.length!=Me.length)return!1;let qe;for(let Pt=0;Pt<$e.length;Pt++)if(qe=$e[Pt],!qt(me[qe],Ce[qe]))return!1;return!0}function Tt(me){return[...Object.keys(me),...Object.getOwnPropertySymbols(me)]}function qt(me,Ce){if(Array.isArray(me)&&Array.isArray(Ce)){if(me.length!==Ce.length)return!1;const $e=[...me].sort(),Me=[...Ce].sort();return $e.every((qe,Pt)=>Me[Pt]===qe)}return me===Ce}function mn(me){return me.length>0?me[me.length-1]:null}function Zn(me){return function rn(me){return!!me&&(me instanceof j.c||(0,Rt.T)(me.lift)&&(0,Rt.T)(me.subscribe))}(me)?me:(0,F.jNT)(me)?(0,l.H)(Promise.resolve(me)):(0,be.of)(me)}const An={exact:function Bn(me,Ce,$e){if(!gn(me.segments,Ce.segments)||!Pn(me.segments,Ce.segments,$e)||me.numberOfChildren!==Ce.numberOfChildren)return!1;for(const Me in Ce.children)if(!me.children[Me]||!Bn(me.children[Me],Ce.children[Me],$e))return!1;return!0},subset:vn},Qn={exact:function Er(me,Ce){return Ut(me,Ce)},subset:function ur(me,Ce){return Object.keys(Ce).length<=Object.keys(me).length&&Object.keys(Ce).every($e=>qt(me[$e],Ce[$e]))},ignored:()=>!0};function Rn(me,Ce,$e){return An[$e.paths](me.root,Ce.root,$e.matrixParams)&&Qn[$e.queryParams](me.queryParams,Ce.queryParams)&&!("exact"===$e.fragment&&me.fragment!==Ce.fragment)}function vn(me,Ce,$e){return er(me,Ce,Ce.segments,$e)}function er(me,Ce,$e,Me){if(me.segments.length>$e.length){const qe=me.segments.slice(0,$e.length);return!(!gn(qe,$e)||Ce.hasChildren()||!Pn(qe,$e,Me))}if(me.segments.length===$e.length){if(!gn(me.segments,$e)||!Pn(me.segments,$e,Me))return!1;for(const qe in Ce.children)if(!me.children[qe]||!vn(me.children[qe],Ce.children[qe],Me))return!1;return!0}{const qe=$e.slice(0,me.segments.length),Pt=$e.slice(me.segments.length);return!!(gn(me.segments,qe)&&Pn(me.segments,qe,Me)&&me.children[_t])&&er(me.children[_t],Ce,Pt,Me)}}function Pn(me,Ce,$e){return Ce.every((Me,qe)=>Qn[$e](me[qe].parameters,Me.parameters))}class gt{constructor(Ce=new wt([],{}),$e={},Me=null){this.root=Ce,this.queryParams=$e,this.fragment=Me}get queryParamMap(){var Ce;return null!==(Ce=this._queryParamMap)&&void 0!==Ce||(this._queryParamMap=mt(this.queryParams)),this._queryParamMap}toString(){return Cr.serialize(this)}}class wt{constructor(Ce,$e){this.segments=Ce,this.children=$e,this.parent=null,Object.values($e).forEach(Me=>Me.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rr(this)}}class rt{constructor(Ce,$e){this.path=Ce,this.parameters=$e}get parameterMap(){var Ce;return null!==(Ce=this._parameterMap)&&void 0!==Ce||(this._parameterMap=mt(this.parameters)),this._parameterMap}toString(){return Xt(this)}}function gn(me,Ce){return me.length===Ce.length&&me.every(($e,Me)=>$e.path===Ce[Me].path)}let $n=(()=>{var me;class Ce{}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>new sr,providedIn:"root"}),Ce})();class sr{parse(Ce){const $e=new Pe(Ce);return new gt($e.parseRootSegment(),$e.parseQueryParams(),$e.parseFragment())}serialize(Ce){const $e=`/${Fr(Ce.root,!0)}`,Me=function Fn(me){const Ce=Object.entries(me).map(([$e,Me])=>Array.isArray(Me)?Me.map(qe=>`${cn($e)}=${cn(qe)}`).join("&"):`${cn($e)}=${cn(Me)}`).filter($e=>$e);return Ce.length?`?${Ce.join("&")}`:""}(Ce.queryParams);return`${$e}${Me}${"string"==typeof Ce.fragment?`#${function Tn(me){return encodeURI(me)}(Ce.fragment)}`:""}`}}const Cr=new sr;function Rr(me){return me.segments.map(Ce=>Xt(Ce)).join("/")}function Fr(me,Ce){if(!me.hasChildren())return Rr(me);if(Ce){const $e=me.children[_t]?Fr(me.children[_t],!1):"",Me=[];return Object.entries(me.children).forEach(([qe,Pt])=>{qe!==_t&&Me.push(`${qe}:${Fr(Pt,!1)}`)}),Me.length>0?`${$e}(${Me.join("//")})`:$e}{const $e=function On(me,Ce){let $e=[];return Object.entries(me.children).forEach(([Me,qe])=>{Me===_t&&($e=$e.concat(Ce(qe,Me)))}),Object.entries(me.children).forEach(([Me,qe])=>{Me!==_t&&($e=$e.concat(Ce(qe,Me)))}),$e}(me,(Me,qe)=>qe===_t?[Fr(me.children[_t],!1)]:[`${qe}:${Fr(Me,!1)}`]);return 1===Object.keys(me.children).length&&null!=me.children[_t]?`${Rr(me)}/${$e[0]}`:`${Rr(me)}/(${$e.join("//")})`}}function In(me){return encodeURIComponent(me).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cn(me){return In(me).replace(/%3B/gi,";")}function sn(me){return In(me).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _n(me){return decodeURIComponent(me)}function tr(me){return _n(me.replace(/\+/g,"%20"))}function Xt(me){return`${sn(me.path)}${function hn(me){return Object.entries(me).map(([Ce,$e])=>`;${sn(Ce)}=${sn($e)}`).join("")}(me.parameters)}`}const Cn=/^[^\/()?;#]+/;function Wn(me){const Ce=me.match(Cn);return Ce?Ce[0]:""}const yr=/^[^\/()?;=#]+/,Ur=/^[^=?&#]+/,ei=/^[^&#]+/;class Pe{constructor(Ce){this.url=Ce,this.remaining=Ce}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const Ce={};if(this.consumeOptional("?"))do{this.parseQueryParam(Ce)}while(this.consumeOptional("&"));return Ce}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const Ce=[];for(this.peekStartsWith("(")||Ce.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),Ce.push(this.parseSegment());let $e={};this.peekStartsWith("/(")&&(this.capture("/"),$e=this.parseParens(!0));let Me={};return this.peekStartsWith("(")&&(Me=this.parseParens(!1)),(Ce.length>0||Object.keys($e).length>0)&&(Me[_t]=new wt(Ce,$e)),Me}parseSegment(){const Ce=Wn(this.remaining);if(""===Ce&&this.peekStartsWith(";"))throw new F.wOt(4009,!1);return this.capture(Ce),new rt(_n(Ce),this.parseMatrixParams())}parseMatrixParams(){const Ce={};for(;this.consumeOptional(";");)this.parseParam(Ce);return Ce}parseParam(Ce){const $e=function fr(me){const Ce=me.match(yr);return Ce?Ce[0]:""}(this.remaining);if(!$e)return;this.capture($e);let Me="";if(this.consumeOptional("=")){const qe=Wn(this.remaining);qe&&(Me=qe,this.capture(Me))}Ce[_n($e)]=_n(Me)}parseQueryParam(Ce){const $e=function vr(me){const Ce=me.match(Ur);return Ce?Ce[0]:""}(this.remaining);if(!$e)return;this.capture($e);let Me="";if(this.consumeOptional("=")){const Vt=function ne(me){const Ce=me.match(ei);return Ce?Ce[0]:""}(this.remaining);Vt&&(Me=Vt,this.capture(Me))}const qe=tr($e),Pt=tr(Me);if(Ce.hasOwnProperty(qe)){let Vt=Ce[qe];Array.isArray(Vt)||(Vt=[Vt],Ce[qe]=Vt),Vt.push(Pt)}else Ce[qe]=Pt}parseParens(Ce){const $e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Me=Wn(this.remaining),qe=this.remaining[Me.length];if("/"!==qe&&")"!==qe&&";"!==qe)throw new F.wOt(4010,!1);let Pt;Me.indexOf(":")>-1?(Pt=Me.slice(0,Me.indexOf(":")),this.capture(Pt),this.capture(":")):Ce&&(Pt=_t);const Vt=this.parseChildren();$e[Pt]=1===Object.keys(Vt).length?Vt[_t]:new wt([],Vt),this.consumeOptional("//")}return $e}peekStartsWith(Ce){return this.remaining.startsWith(Ce)}consumeOptional(Ce){return!!this.peekStartsWith(Ce)&&(this.remaining=this.remaining.substring(Ce.length),!0)}capture(Ce){if(!this.consumeOptional(Ce))throw new F.wOt(4011,!1)}}function Qe(me){return me.segments.length>0?new wt([],{[_t]:me}):me}function T(me){const Ce={};for(const[Me,qe]of Object.entries(me.children)){const Pt=T(qe);if(Me===_t&&0===Pt.segments.length&&Pt.hasChildren())for(const[Vt,Vn]of Object.entries(Pt.children))Ce[Vt]=Vn;else(Pt.segments.length>0||Pt.hasChildren())&&(Ce[Me]=Pt)}return function N(me){if(1===me.numberOfChildren&&me.children[_t]){const Ce=me.children[_t];return new wt(me.segments.concat(Ce.segments),Ce.children)}return me}(new wt(me.segments,Ce))}function R(me){return me instanceof gt}function ie(me){var Ce;let $e;const Pt=Qe(function Me(Vt){const Vn={};for(const Ln of Vt.children){const Gr=Me(Ln);Vn[Ln.outlet]=Gr}const xr=new wt(Vt.url,Vn);return Vt===me&&($e=xr),xr}(me.root));return null!==(Ce=$e)&&void 0!==Ce?Ce:Pt}function $(me,Ce,$e,Me){let qe=me;for(;qe.parent;)qe=qe.parent;if(0===Ce.length)return tt(qe,qe,qe,$e,Me);const Pt=function Fe(me){if("string"==typeof me[0]&&1===me.length&&"/"===me[0])return new Kt(!0,0,me);let Ce=0,$e=!1;const Me=me.reduce((qe,Pt,Vt)=>{if("object"==typeof Pt&&null!=Pt){if(Pt.outlets){const Vn={};return Object.entries(Pt.outlets).forEach(([xr,Ln])=>{Vn[xr]="string"==typeof Ln?Ln.split("/"):Ln}),[...qe,{outlets:Vn}]}if(Pt.segmentPath)return[...qe,Pt.segmentPath]}return"string"!=typeof Pt?[...qe,Pt]:0===Vt?(Pt.split("/").forEach((Vn,xr)=>{0==xr&&"."===Vn||(0==xr&&""===Vn?$e=!0:".."===Vn?Ce++:""!=Vn&&qe.push(Vn))}),qe):[...qe,Pt]},[]);return new Kt($e,Ce,Me)}(Ce);if(Pt.toRoot())return tt(qe,qe,new wt([],{}),$e,Me);const Vt=function at(me,Ce,$e){if(me.isAbsolute)return new We(Ce,!0,0);if(!$e)return new We(Ce,!1,NaN);if(null===$e.parent)return new We($e,!0,0);const Me=de(me.commands[0])?0:1;return function Ze(me,Ce,$e){let Me=me,qe=Ce,Pt=$e;for(;Pt>qe;){if(Pt-=qe,Me=Me.parent,!Me)throw new F.wOt(4005,!1);qe=Me.segments.length}return new We(Me,!1,qe-Pt)}($e,$e.segments.length-1+Me,me.numberOfDoubleDots)}(Pt,qe,me),Vn=Vt.processChildren?En(Vt.segmentGroup,Vt.index,Pt.commands):Zt(Vt.segmentGroup,Vt.index,Pt.commands);return tt(qe,Vt.segmentGroup,Vn,$e,Me)}function de(me){return"object"==typeof me&&null!=me&&!me.outlets&&!me.segmentPath}function Ae(me){return"object"==typeof me&&null!=me&&me.outlets}function tt(me,Ce,$e,Me,qe){let Vt,Pt={};Me&&Object.entries(Me).forEach(([xr,Ln])=>{Pt[xr]=Array.isArray(Ln)?Ln.map(Gr=>`${Gr}`):`${Ln}`}),Vt=me===Ce?$e:pt(me,Ce,$e);const Vn=Qe(T(Vt));return new gt(Vn,Pt,qe)}function pt(me,Ce,$e){const Me={};return Object.entries(me.children).forEach(([qe,Pt])=>{Me[qe]=Pt===Ce?$e:pt(Pt,Ce,$e)}),new wt(me.segments,Me)}class Kt{constructor(Ce,$e,Me){if(this.isAbsolute=Ce,this.numberOfDoubleDots=$e,this.commands=Me,Ce&&Me.length>0&&de(Me[0]))throw new F.wOt(4003,!1);const qe=Me.find(Ae);if(qe&&qe!==mn(Me))throw new F.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class We{constructor(Ce,$e,Me){this.segmentGroup=Ce,this.processChildren=$e,this.index=Me}}function Zt(me,Ce,$e){var Me;if(null!==(Me=me)&&void 0!==Me||(me=new wt([],{})),0===me.segments.length&&me.hasChildren())return En(me,Ce,$e);const qe=function zn(me,Ce,$e){let Me=0,qe=Ce;const Pt={match:!1,pathIndex:0,commandIndex:0};for(;qe<me.segments.length;){if(Me>=$e.length)return Pt;const Vt=me.segments[qe],Vn=$e[Me];if(Ae(Vn))break;const xr=`${Vn}`,Ln=Me<$e.length-1?$e[Me+1]:null;if(qe>0&&void 0===xr)break;if(xr&&Ln&&"object"==typeof Ln&&void 0===Ln.outlets){if(!Rs(xr,Ln,Vt))return Pt;Me+=2}else{if(!Rs(xr,{},Vt))return Pt;Me++}qe++}return{match:!0,pathIndex:qe,commandIndex:Me}}(me,Ce,$e),Pt=$e.slice(qe.commandIndex);if(qe.match&&qe.pathIndex<me.segments.length){const Vt=new wt(me.segments.slice(0,qe.pathIndex),{});return Vt.children[_t]=new wt(me.segments.slice(qe.pathIndex),me.children),En(Vt,0,Pt)}return qe.match&&0===Pt.length?new wt(me.segments,{}):qe.match&&!me.hasChildren()?or(me,Ce,$e):qe.match?En(me,0,Pt):or(me,Ce,$e)}function En(me,Ce,$e){if(0===$e.length)return new wt(me.segments,{});{const Me=function xt(me){return Ae(me[0])?me[0].outlets:{[_t]:me}}($e),qe={};if(Object.keys(Me).some(Pt=>Pt!==_t)&&me.children[_t]&&1===me.numberOfChildren&&0===me.children[_t].segments.length){const Pt=En(me.children[_t],Ce,$e);return new wt(me.segments,Pt.children)}return Object.entries(Me).forEach(([Pt,Vt])=>{"string"==typeof Vt&&(Vt=[Vt]),null!==Vt&&(qe[Pt]=Zt(me.children[Pt],Ce,Vt))}),Object.entries(me.children).forEach(([Pt,Vt])=>{void 0===Me[Pt]&&(qe[Pt]=Vt)}),new wt(me.segments,qe)}}function or(me,Ce,$e){const Me=me.segments.slice(0,Ce);let qe=0;for(;qe<$e.length;){const Pt=$e[qe];if(Ae(Pt)){const xr=ii(Pt.outlets);return new wt(Me,xr)}if(0===qe&&de($e[0])){Me.push(new rt(me.segments[Ce].path,Bi($e[0]))),qe++;continue}const Vt=Ae(Pt)?Pt.outlets[_t]:`${Pt}`,Vn=qe<$e.length-1?$e[qe+1]:null;Vt&&Vn&&de(Vn)?(Me.push(new rt(Vt,Bi(Vn))),qe+=2):(Me.push(new rt(Vt,{})),qe++)}return new wt(Me,{})}function ii(me){const Ce={};return Object.entries(me).forEach(([$e,Me])=>{"string"==typeof Me&&(Me=[Me]),null!==Me&&(Ce[$e]=or(new wt([],{}),0,Me))}),Ce}function Bi(me){const Ce={};return Object.entries(me).forEach(([$e,Me])=>Ce[$e]=`${Me}`),Ce}function Rs(me,Ce,$e){return me==$e.path&&Ut(Ce,$e.parameters)}const Ps="imperative";var xi=function(me){return me[me.NavigationStart=0]="NavigationStart",me[me.NavigationEnd=1]="NavigationEnd",me[me.NavigationCancel=2]="NavigationCancel",me[me.NavigationError=3]="NavigationError",me[me.RoutesRecognized=4]="RoutesRecognized",me[me.ResolveStart=5]="ResolveStart",me[me.ResolveEnd=6]="ResolveEnd",me[me.GuardsCheckStart=7]="GuardsCheckStart",me[me.GuardsCheckEnd=8]="GuardsCheckEnd",me[me.RouteConfigLoadStart=9]="RouteConfigLoadStart",me[me.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",me[me.ChildActivationStart=11]="ChildActivationStart",me[me.ChildActivationEnd=12]="ChildActivationEnd",me[me.ActivationStart=13]="ActivationStart",me[me.ActivationEnd=14]="ActivationEnd",me[me.Scroll=15]="Scroll",me[me.NavigationSkipped=16]="NavigationSkipped",me}(xi||{});class ws{constructor(Ce,$e){this.id=Ce,this.url=$e}}class co extends ws{constructor(Ce,$e,Me="imperative",qe=null){super(Ce,$e),this.type=xi.NavigationStart,this.navigationTrigger=Me,this.restoredState=qe}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ls extends ws{constructor(Ce,$e,Me){super(Ce,$e),this.urlAfterRedirects=Me,this.type=xi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var so=function(me){return me[me.Redirect=0]="Redirect",me[me.SupersededByNewNavigation=1]="SupersededByNewNavigation",me[me.NoDataFromResolver=2]="NoDataFromResolver",me[me.GuardRejected=3]="GuardRejected",me}(so||{}),ea=function(me){return me[me.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",me[me.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",me}(ea||{});class So extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.reason=Me,this.code=qe,this.type=xi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ca extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.reason=Me,this.code=qe,this.type=xi.NavigationSkipped}}class ta extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.error=Me,this.target=qe,this.type=xi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qo extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.urlAfterRedirects=Me,this.state=qe,this.type=xi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ua extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.urlAfterRedirects=Me,this.state=qe,this.type=xi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends ws{constructor(Ce,$e,Me,qe,Pt){super(Ce,$e),this.urlAfterRedirects=Me,this.state=qe,this.shouldActivate=Pt,this.type=xi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ta extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.urlAfterRedirects=Me,this.state=qe,this.type=xi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class To extends ws{constructor(Ce,$e,Me,qe){super(Ce,$e),this.urlAfterRedirects=Me,this.state=qe,this.type=xi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(Ce){this.route=Ce,this.type=xi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Va{constructor(Ce){this.route=Ce,this.type=xi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ne{constructor(Ce){this.snapshot=Ce,this.type=xi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yt{constructor(Ce){this.snapshot=Ce,this.type=xi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bt{constructor(Ce){this.snapshot=Ce,this.type=xi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class He{constructor(Ce){this.snapshot=Ce,this.type=xi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ht{constructor(Ce,$e,Me){this.routerEvent=Ce,this.position=$e,this.anchor=Me,this.type=xi.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kn{}class fs{constructor(Ce,$e){this.url=Ce,this.navigationBehaviorOptions=$e}}function oo(me){return me.outlet||_t}function ut(me){var Ce;if(!me)return null;if(null!==(Ce=me.routeConfig)&&void 0!==Ce&&Ce._injector)return me.routeConfig._injector;for(let $e=me.parent;$e;$e=$e.parent){const Me=$e.routeConfig;if(null!=Me&&Me._loadedInjector)return Me._loadedInjector;if(null!=Me&&Me._injector)return Me._injector}return null}class Ot{get injector(){var Ce,$e;return null!==(Ce=ut(null===($e=this.route)||void 0===$e?void 0:$e.snapshot))&&void 0!==Ce?Ce:this.rootInjector}set injector(Ce){}constructor(Ce){this.rootInjector=Ce,this.outlet=null,this.route=null,this.children=new fn(this.rootInjector),this.attachRef=null}}let fn=(()=>{var me;class Ce{constructor(Me){this.rootInjector=Me,this.contexts=new Map}onChildOutletCreated(Me,qe){const Pt=this.getOrCreateContext(Me);Pt.outlet=qe,this.contexts.set(Me,Pt)}onChildOutletDestroyed(Me){const qe=this.getContext(Me);qe&&(qe.outlet=null,qe.attachRef=null)}onOutletDeactivated(){const Me=this.contexts;return this.contexts=new Map,Me}onOutletReAttached(Me){this.contexts=Me}getOrCreateContext(Me){let qe=this.getContext(Me);return qe||(qe=new Ot(this.rootInjector),this.contexts.set(Me,qe)),qe}getContext(Me){return this.contexts.get(Me)||null}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)(F.KVO(F.uvJ))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();class wn{constructor(Ce){this._root=Ce}get root(){return this._root.value}parent(Ce){const $e=this.pathFromRoot(Ce);return $e.length>1?$e[$e.length-2]:null}children(Ce){const $e=Nn(Ce,this._root);return $e?$e.children.map(Me=>Me.value):[]}firstChild(Ce){const $e=Nn(Ce,this._root);return $e&&$e.children.length>0?$e.children[0].value:null}siblings(Ce){const $e=jn(Ce,this._root);return $e.length<2?[]:$e[$e.length-2].children.map(qe=>qe.value).filter(qe=>qe!==Ce)}pathFromRoot(Ce){return jn(Ce,this._root).map($e=>$e.value)}}function Nn(me,Ce){if(me===Ce.value)return Ce;for(const $e of Ce.children){const Me=Nn(me,$e);if(Me)return Me}return null}function jn(me,Ce){if(me===Ce.value)return[Ce];for(const $e of Ce.children){const Me=jn(me,$e);if(Me.length)return Me.unshift(Ce),Me}return[]}class hr{constructor(Ce,$e){this.value=Ce,this.children=$e}toString(){return`TreeNode(${this.value})`}}function br(me){const Ce={};return me&&me.children.forEach($e=>Ce[$e.value.outlet]=$e),Ce}class Mr extends wn{constructor(Ce,$e){super(Ce),this.snapshot=$e,ns(this,Ce)}toString(){return this.snapshot.toString()}}function Pr(me){const Ce=function oi(me){const Pt=new Ei([],{},{},"",{},_t,me,null,{});return new zi("",new hr(Pt,[]))}(me),$e=new Z.t([new rt("",{})]),Me=new Z.t({}),qe=new Z.t({}),Pt=new Z.t({}),Vt=new Z.t(""),Vn=new Jr($e,Me,Pt,Vt,qe,_t,me,Ce.root);return Vn.snapshot=Ce.root,new Mr(new hr(Vn,[]),Ce)}class Jr{constructor(Ce,$e,Me,qe,Pt,Vt,Vn,xr){var Ln,Gr;this.urlSubject=Ce,this.paramsSubject=$e,this.queryParamsSubject=Me,this.fragmentSubject=qe,this.dataSubject=Pt,this.outlet=Vt,this.component=Vn,this._futureSnapshot=xr,this.title=null!==(Ln=null===(Gr=this.dataSubject)||void 0===Gr?void 0:Gr.pipe((0,x.T)(Ci=>Ci[Ft])))&&void 0!==Ln?Ln:(0,be.of)(void 0),this.url=Ce,this.params=$e,this.queryParams=Me,this.fragment=qe,this.data=Pt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ce;return null!==(Ce=this._paramMap)&&void 0!==Ce||(this._paramMap=this.params.pipe((0,x.T)($e=>mt($e)))),this._paramMap}get queryParamMap(){var Ce;return null!==(Ce=this._queryParamMap)&&void 0!==Ce||(this._queryParamMap=this.queryParams.pipe((0,x.T)($e=>mt($e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vi(me,Ce,$e="emptyOnly"){var Me;let qe;const{routeConfig:Pt}=me;var Vt;return qe=null===Ce||"always"!==$e&&""!==(null==Pt?void 0:Pt.path)&&(Ce.component||null!==(Me=Ce.routeConfig)&&void 0!==Me&&Me.loadComponent)?{params:{...me.params},data:{...me.data},resolve:{...me.data,...null!==(Vt=me._resolvedData)&&void 0!==Vt?Vt:{}}}:{params:{...Ce.params,...me.params},data:{...Ce.data,...me.data},resolve:{...me.data,...Ce.data,...null==Pt?void 0:Pt.data,...me._resolvedData}},Pt&&Br(Pt)&&(qe.resolve[Ft]=Pt.title),qe}class Ei{get title(){var Ce;return null===(Ce=this.data)||void 0===Ce?void 0:Ce[Ft]}constructor(Ce,$e,Me,qe,Pt,Vt,Vn,xr,Ln){this.url=Ce,this.params=$e,this.queryParams=Me,this.fragment=qe,this.data=Pt,this.outlet=Vt,this.component=Vn,this.routeConfig=xr,this._resolve=Ln}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var Ce;return null!==(Ce=this._paramMap)&&void 0!==Ce||(this._paramMap=mt(this.params)),this._paramMap}get queryParamMap(){var Ce;return null!==(Ce=this._queryParamMap)&&void 0!==Ce||(this._queryParamMap=mt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Me=>Me.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zi extends wn{constructor(Ce,$e){super($e),this.url=Ce,ns(this,$e)}toString(){return Ms(this._root)}}function ns(me,Ce){Ce.value._routerState=me,Ce.children.forEach($e=>ns(me,$e))}function Ms(me){const Ce=me.children.length>0?` { ${me.children.map(Ms).join(", ")} } `:"";return`${me.value}${Ce}`}function Ki(me){if(me.snapshot){const Ce=me.snapshot,$e=me._futureSnapshot;me.snapshot=$e,Ut(Ce.queryParams,$e.queryParams)||me.queryParamsSubject.next($e.queryParams),Ce.fragment!==$e.fragment&&me.fragmentSubject.next($e.fragment),Ut(Ce.params,$e.params)||me.paramsSubject.next($e.params),function kt(me,Ce){if(me.length!==Ce.length)return!1;for(let $e=0;$e<me.length;++$e)if(!Ut(me[$e],Ce[$e]))return!1;return!0}(Ce.url,$e.url)||me.urlSubject.next($e.url),Ut(Ce.data,$e.data)||me.dataSubject.next($e.data)}else me.snapshot=me._futureSnapshot,me.dataSubject.next(me._futureSnapshot.data)}function Js(me,Ce){const $e=Ut(me.params,Ce.params)&&function bt(me,Ce){return gn(me,Ce)&&me.every(($e,Me)=>Ut($e.parameters,Ce[Me].parameters))}(me.url,Ce.url);return $e&&!(!me.parent!=!Ce.parent)&&(!me.parent||Js(me.parent,Ce.parent))}function Br(me){return"string"==typeof me.title||null===me.title}let da=(()=>{var me;class Ce{constructor(){this.activated=null,this._activatedRoute=null,this.name=_t,this.activateEvents=new F.bkB,this.deactivateEvents=new F.bkB,this.attachEvents=new F.bkB,this.detachEvents=new F.bkB,this.parentContexts=(0,F.WQX)(fn),this.location=(0,F.WQX)(F.c1b),this.changeDetector=(0,F.WQX)(F.gRc),this.inputBinder=(0,F.WQX)(uo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(Me){if(Me.name){const{firstChange:qe,previousValue:Pt}=Me.name;if(qe)return;this.isTrackedInParentContexts(Pt)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Pt)),this.initializeOutletWithName()}}ngOnDestroy(){var Me;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(Me=this.inputBinder)||void 0===Me||Me.unsubscribeFromRouteData(this)}isTrackedInParentContexts(Me){var qe;return(null===(qe=this.parentContexts.getContext(Me))||void 0===qe?void 0:qe.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const Me=this.parentContexts.getContext(this.name);null!=Me&&Me.route&&(Me.attachRef?this.attach(Me.attachRef,Me.route):this.activateWith(Me.route,Me.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F.wOt(4012,!1);this.location.detach();const Me=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(Me.instance),Me}attach(Me,qe){var Pt;this.activated=Me,this._activatedRoute=qe,this.location.insert(Me.hostView),null===(Pt=this.inputBinder)||void 0===Pt||Pt.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(Me.instance)}deactivate(){if(this.activated){const Me=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Me)}}activateWith(Me,qe){var Pt;if(this.isActivated)throw new F.wOt(4013,!1);this._activatedRoute=Me;const Vt=this.location,xr=Me.snapshot.component,Ln=this.parentContexts.getOrCreateContext(this.name).children,Gr=new Na(Me,Ln,Vt.injector);this.activated=Vt.createComponent(xr,{index:Vt.length,injector:Gr,environmentInjector:qe}),this.changeDetector.markForCheck(),null===(Pt=this.inputBinder)||void 0===Pt||Pt.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275dir=F.FsC({type:me,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[F.OA$]}),Ce})();class Na{__ngOutletInjector(Ce){return new Na(this.route,this.childContexts,Ce)}constructor(Ce,$e,Me){this.route=Ce,this.childContexts=$e,this.parent=Me}get(Ce,$e){return Ce===Jr?this.route:Ce===fn?this.childContexts:this.parent.get(Ce,$e)}}const uo=new F.nKC("");let El=(()=>{var me;class Ce{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(Me){this.unsubscribeFromRouteData(Me),this.subscribeToRouteData(Me)}unsubscribeFromRouteData(Me){var qe;null===(qe=this.outletDataSubscriptions.get(Me))||void 0===qe||qe.unsubscribe(),this.outletDataSubscriptions.delete(Me)}subscribeToRouteData(Me){const{activatedRoute:qe}=Me,Pt=(0,M.z)([qe.queryParams,qe.params,qe.data]).pipe((0,E.n)(([Vt,Vn,xr],Ln)=>(xr={...Vt,...Vn,...xr},0===Ln?(0,be.of)(xr):Promise.resolve(xr)))).subscribe(Vt=>{if(!Me.isActivated||!Me.activatedComponentRef||Me.activatedRoute!==qe||null===qe.component)return void this.unsubscribeFromRouteData(Me);const Vn=(0,F.HJs)(qe.component);if(Vn)for(const{templateName:xr}of Vn.inputs)Me.activatedComponentRef.setInput(xr,Vt[xr]);else this.unsubscribeFromRouteData(Me)});this.outletDataSubscriptions.set(Me,Pt)}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac}),Ce})();function ha(me,Ce,$e){if($e&&me.shouldReuseRoute(Ce.value,$e.value.snapshot)){const Me=$e.value;Me._futureSnapshot=Ce.value;const qe=function go(me,Ce,$e){return Ce.children.map(Me=>{for(const qe of $e.children)if(me.shouldReuseRoute(Me.value,qe.value.snapshot))return ha(me,Me,qe);return ha(me,Me)})}(me,Ce,$e);return new hr(Me,qe)}{if(me.shouldAttach(Ce.value)){const Pt=me.retrieve(Ce.value);if(null!==Pt){const Vt=Pt.route;return Vt.value._futureSnapshot=Ce.value,Vt.children=Ce.children.map(Vn=>ha(me,Vn)),Vt}}const Me=function pi(me){return new Jr(new Z.t(me.url),new Z.t(me.params),new Z.t(me.queryParams),new Z.t(me.fragment),new Z.t(me.data),me.outlet,me.component,me)}(Ce.value),qe=Ce.children.map(Pt=>ha(me,Pt));return new hr(Me,qe)}}class el{constructor(Ce,$e){this.redirectTo=Ce,this.navigationBehaviorOptions=$e}}const al="ngNavigationCancelingError";function Aa(me,Ce){const{redirectTo:$e,navigationBehaviorOptions:Me}=R(Ce)?{redirectTo:Ce,navigationBehaviorOptions:void 0}:Ce,qe=za(!1,so.Redirect);return qe.url=$e,qe.navigationBehaviorOptions=Me,qe}function za(me,Ce){const $e=new Error(`NavigationCancelingError: ${me||""}`);return $e[al]=!0,$e.cancellationCode=Ce,$e}function Os(me){return!!me&&me[al]}class Ca{constructor(Ce,$e,Me,qe,Pt){this.routeReuseStrategy=Ce,this.futureState=$e,this.currState=Me,this.forwardEvent=qe,this.inputBindingEnabled=Pt}activate(Ce){const $e=this.futureState._root,Me=this.currState?this.currState._root:null;this.deactivateChildRoutes($e,Me,Ce),Ki(this.futureState.root),this.activateChildRoutes($e,Me,Ce)}deactivateChildRoutes(Ce,$e,Me){const qe=br($e);Ce.children.forEach(Pt=>{const Vt=Pt.value.outlet;this.deactivateRoutes(Pt,qe[Vt],Me),delete qe[Vt]}),Object.values(qe).forEach(Pt=>{this.deactivateRouteAndItsChildren(Pt,Me)})}deactivateRoutes(Ce,$e,Me){const qe=Ce.value,Pt=$e?$e.value:null;if(qe===Pt)if(qe.component){const Vt=Me.getContext(qe.outlet);Vt&&this.deactivateChildRoutes(Ce,$e,Vt.children)}else this.deactivateChildRoutes(Ce,$e,Me);else Pt&&this.deactivateRouteAndItsChildren($e,Me)}deactivateRouteAndItsChildren(Ce,$e){Ce.value.component&&this.routeReuseStrategy.shouldDetach(Ce.value.snapshot)?this.detachAndStoreRouteSubtree(Ce,$e):this.deactivateRouteAndOutlet(Ce,$e)}detachAndStoreRouteSubtree(Ce,$e){const Me=$e.getContext(Ce.value.outlet),qe=Me&&Ce.value.component?Me.children:$e,Pt=br(Ce);for(const Vt of Object.values(Pt))this.deactivateRouteAndItsChildren(Vt,qe);if(Me&&Me.outlet){const Vt=Me.outlet.detach(),Vn=Me.children.onOutletDeactivated();this.routeReuseStrategy.store(Ce.value.snapshot,{componentRef:Vt,route:Ce,contexts:Vn})}}deactivateRouteAndOutlet(Ce,$e){const Me=$e.getContext(Ce.value.outlet),qe=Me&&Ce.value.component?Me.children:$e,Pt=br(Ce);for(const Vt of Object.values(Pt))this.deactivateRouteAndItsChildren(Vt,qe);Me&&(Me.outlet&&(Me.outlet.deactivate(),Me.children.onOutletDeactivated()),Me.attachRef=null,Me.route=null)}activateChildRoutes(Ce,$e,Me){const qe=br($e);Ce.children.forEach(Pt=>{this.activateRoutes(Pt,qe[Pt.value.outlet],Me),this.forwardEvent(new He(Pt.value.snapshot))}),Ce.children.length&&this.forwardEvent(new yt(Ce.value.snapshot))}activateRoutes(Ce,$e,Me){const qe=Ce.value,Pt=$e?$e.value:null;if(Ki(qe),qe===Pt)if(qe.component){const Vt=Me.getOrCreateContext(qe.outlet);this.activateChildRoutes(Ce,$e,Vt.children)}else this.activateChildRoutes(Ce,$e,Me);else if(qe.component){const Vt=Me.getOrCreateContext(qe.outlet);if(this.routeReuseStrategy.shouldAttach(qe.snapshot)){const Vn=this.routeReuseStrategy.retrieve(qe.snapshot);this.routeReuseStrategy.store(qe.snapshot,null),Vt.children.onOutletReAttached(Vn.contexts),Vt.attachRef=Vn.componentRef,Vt.route=Vn.route.value,Vt.outlet&&Vt.outlet.attach(Vn.componentRef,Vn.route.value),Ki(Vn.route.value),this.activateChildRoutes(Ce,null,Vt.children)}else Vt.attachRef=null,Vt.route=qe,Vt.outlet&&Vt.outlet.activateWith(qe,Vt.injector),this.activateChildRoutes(Ce,null,Vt.children)}else this.activateChildRoutes(Ce,null,Me)}}class Ns{constructor(Ce){this.path=Ce,this.route=this.path[this.path.length-1]}}class Vl{constructor(Ce,$e){this.component=Ce,this.route=$e}}function Mo(me,Ce,$e){const Me=me._root;return Da(Me,Ce?Ce._root:null,$e,[Me.value])}function Tl(me,Ce){const $e=Symbol(),Me=Ce.get(me,$e);return Me===$e?"function"!=typeof me||(0,F.LfX)(me)?Ce.get(me):me:Me}function Da(me,Ce,$e,Me,qe={canDeactivateChecks:[],canActivateChecks:[]}){const Pt=br(Ce);return me.children.forEach(Vt=>{(function Gl(me,Ce,$e,Me,qe={canDeactivateChecks:[],canActivateChecks:[]}){const Pt=me.value,Vt=Ce?Ce.value:null,Vn=$e?$e.getContext(me.value.outlet):null;if(Vt&&Pt.routeConfig===Vt.routeConfig){const xr=function hi(me,Ce,$e){if("function"==typeof $e)return $e(me,Ce);switch($e){case"pathParamsChange":return!gn(me.url,Ce.url);case"pathParamsOrQueryParamsChange":return!gn(me.url,Ce.url)||!Ut(me.queryParams,Ce.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(me,Ce)||!Ut(me.queryParams,Ce.queryParams);default:return!Js(me,Ce)}}(Vt,Pt,Pt.routeConfig.runGuardsAndResolvers);xr?qe.canActivateChecks.push(new Ns(Me)):(Pt.data=Vt.data,Pt._resolvedData=Vt._resolvedData),Da(me,Ce,Pt.component?Vn?Vn.children:null:$e,Me,qe),xr&&Vn&&Vn.outlet&&Vn.outlet.isActivated&&qe.canDeactivateChecks.push(new Vl(Vn.outlet.component,Vt))}else Vt&&tl(Ce,Vn,qe),qe.canActivateChecks.push(new Ns(Me)),Da(me,null,Pt.component?Vn?Vn.children:null:$e,Me,qe)})(Vt,Pt[Vt.value.outlet],$e,Me.concat([Vt.value]),qe),delete Pt[Vt.value.outlet]}),Object.entries(Pt).forEach(([Vt,Vn])=>tl(Vn,$e.getContext(Vt),qe)),qe}function tl(me,Ce,$e){const Me=br(me),qe=me.value;Object.entries(Me).forEach(([Pt,Vt])=>{tl(Vt,qe.component?Ce?Ce.children.getContext(Pt):null:Ce,$e)}),$e.canDeactivateChecks.push(new Vl(qe.component&&Ce&&Ce.outlet&&Ce.outlet.isActivated?Ce.outlet.component:null,qe))}function P(me){return"function"==typeof me}function At(me){return me instanceof b||"EmptyError"===(null==me?void 0:me.name)}const Qt=Symbol("INITIAL_VALUE");function Jt(){return(0,E.n)(me=>(0,M.z)(me.map(Ce=>Ce.pipe((0,S.s)(1),function J(...me){const Ce=(0,L.lI)(me);return(0,q.N)(($e,Me)=>{(Ce?(0,w.x)(me,$e,Ce):(0,w.x)(me,$e)).subscribe(Me)})}(Qt)))).pipe((0,x.T)(Ce=>{for(const $e of Ce)if(!0!==$e){if($e===Qt)return Qt;if(!1===$e||Mn($e))return $e}return!0}),(0,G.p)(Ce=>Ce!==Qt),(0,S.s)(1)))}function Mn(me){return R(me)||me instanceof el}function Zr(me){return(0,D.F)((0,ge.M)(Ce=>{if("boolean"!=typeof Ce)throw Aa(0,Ce)}),(0,x.T)(Ce=>!0===Ce))}class _i{constructor(Ce){this.segmentGroup=Ce||null}}class Ji extends Error{constructor(Ce){super(),this.urlTree=Ce}}function cs(me){return(0,d.$)(new _i(me))}class Ao{constructor(Ce,$e){this.urlSerializer=Ce,this.urlTree=$e}lineralizeSegments(Ce,$e){let Me=[],qe=$e.root;for(;;){if(Me=Me.concat(qe.segments),0===qe.numberOfChildren)return(0,be.of)(Me);if(qe.numberOfChildren>1||!qe.children[_t])return(0,d.$)(new F.wOt(4e3,!1));qe=qe.children[_t]}}applyRedirectCommands(Ce,$e,Me,qe,Pt){if("string"!=typeof $e){const Vn=$e,{queryParams:xr,fragment:Ln,routeConfig:Gr,url:Ci,outlet:kr,params:gi,data:Zo,title:Zs}=qe,Co=(0,F.N4e)(Pt,()=>Vn({params:gi,data:Zo,queryParams:xr,fragment:Ln,routeConfig:Gr,url:Ci,outlet:kr,title:Zs}));if(Co instanceof gt)throw new Ji(Co);$e=Co}const Vt=this.applyRedirectCreateUrlTree($e,this.urlSerializer.parse($e),Ce,Me);if("/"===$e[0])throw new Ji(Vt);return Vt}applyRedirectCreateUrlTree(Ce,$e,Me,qe){const Pt=this.createSegmentGroup(Ce,$e.root,Me,qe);return new gt(Pt,this.createQueryParams($e.queryParams,this.urlTree.queryParams),$e.fragment)}createQueryParams(Ce,$e){const Me={};return Object.entries(Ce).forEach(([qe,Pt])=>{if("string"==typeof Pt&&":"===Pt[0]){const Vn=Pt.substring(1);Me[qe]=$e[Vn]}else Me[qe]=Pt}),Me}createSegmentGroup(Ce,$e,Me,qe){const Pt=this.createSegments(Ce,$e.segments,Me,qe);let Vt={};return Object.entries($e.children).forEach(([Vn,xr])=>{Vt[Vn]=this.createSegmentGroup(Ce,xr,Me,qe)}),new wt(Pt,Vt)}createSegments(Ce,$e,Me,qe){return $e.map(Pt=>":"===Pt.path[0]?this.findPosParam(Ce,Pt,qe):this.findOrReturn(Pt,Me))}findPosParam(Ce,$e,Me){const qe=Me[$e.path.substring(1)];if(!qe)throw new F.wOt(4001,!1);return qe}findOrReturn(Ce,$e){let Me=0;for(const qe of $e){if(qe.path===Ce.path)return $e.splice(Me),qe;Me++}return Ce}}const ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vs(me,Ce,$e,Me,qe){const Pt=Qs(me,Ce,$e);return Pt.matched?(Me=function na(me,Ce){var $e;return me.providers&&!me._injector&&(me._injector=(0,F.Ol2)(me.providers,Ce,`Route: ${me.path}`)),null!==($e=me._injector)&&void 0!==$e?$e:Ce}(Ce,Me),function Si(me,Ce,$e,Me){const qe=Ce.canMatch;if(!qe||0===qe.length)return(0,be.of)(!0);const Pt=qe.map(Vt=>{const Vn=Tl(Vt,me);return Zn(function nt(me){return me&&P(me.canMatch)}(Vn)?Vn.canMatch(Ce,$e):(0,F.N4e)(me,()=>Vn(Ce,$e)))});return(0,be.of)(Pt).pipe(Jt(),Zr())}(Me,Ce,$e).pipe((0,x.T)(Vt=>!0===Vt?Pt:{...ra}))):(0,be.of)(Pt)}function Qs(me,Ce,$e){var Me,qe;if("**"===Ce.path)return function di(me){return{matched:!0,parameters:me.length>0?mn(me).parameters:{},consumedSegments:me,remainingSegments:[],positionalParamSegments:{}}}($e);if(""===Ce.path)return"full"===Ce.pathMatch&&(me.hasChildren()||$e.length>0)?{...ra}:{matched:!0,consumedSegments:[],remainingSegments:$e,parameters:{},positionalParamSegments:{}};const Vt=(Ce.matcher||Nt)($e,me,Ce);if(!Vt)return{...ra};const Vn={};Object.entries(null!==(Me=Vt.posParams)&&void 0!==Me?Me:{}).forEach(([Ln,Gr])=>{Vn[Ln]=Gr.path});const xr=Vt.consumed.length>0?{...Vn,...Vt.consumed[Vt.consumed.length-1].parameters}:Vn;return{matched:!0,consumedSegments:Vt.consumed,remainingSegments:$e.slice(Vt.consumed.length),parameters:xr,positionalParamSegments:null!==(qe=Vt.posParams)&&void 0!==qe?qe:{}}}function eo(me,Ce,$e,Me){return $e.length>0&&function bi(me,Ce,$e){return $e.some(Me=>pr(me,Ce,Me)&&oo(Me)!==_t)}(me,$e,Me)?{segmentGroup:new wt(Ce,js(Me,new wt($e,me.children))),slicedSegments:[]}:0===$e.length&&function Fo(me,Ce,$e){return $e.some(Me=>pr(me,Ce,Me))}(me,$e,Me)?{segmentGroup:new wt(me.segments,fo(me,$e,Me,me.children)),slicedSegments:$e}:{segmentGroup:new wt(me.segments,me.children),slicedSegments:$e}}function fo(me,Ce,$e,Me){const qe={};for(const Pt of $e)if(pr(me,Ce,Pt)&&!Me[oo(Pt)]){const Vt=new wt([],{});qe[oo(Pt)]=Vt}return{...Me,...qe}}function js(me,Ce){const $e={};$e[_t]=Ce;for(const Me of me)if(""===Me.path&&oo(Me)!==_t){const qe=new wt([],{});$e[oo(Me)]=qe}return $e}function pr(me,Ce,$e){return(!(me.hasChildren()||Ce.length>0)||"full"!==$e.pathMatch)&&""===$e.path}class Od{}class yl{constructor(Ce,$e,Me,qe,Pt,Vt,Vn){this.injector=Ce,this.configLoader=$e,this.rootComponentType=Me,this.config=qe,this.urlTree=Pt,this.paramsInheritanceStrategy=Vt,this.urlSerializer=Vn,this.applyRedirects=new Ao(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(Ce){return new F.wOt(4002,`'${Ce.segmentGroup}'`)}recognize(){const Ce=eo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(Ce).pipe((0,x.T)(({children:$e,rootSnapshot:Me})=>{const qe=new hr(Me,$e),Pt=new zi("",qe),Vt=function U(me,Ce,$e=null,Me=null){return $(ie(me),Ce,$e,Me)}(Me,[],this.urlTree.queryParams,this.urlTree.fragment);return Vt.queryParams=this.urlTree.queryParams,Pt.url=this.urlSerializer.serialize(Vt),{state:Pt,tree:Vt}}))}match(Ce){const $e=new Ei([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),_t,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,Ce,_t,$e).pipe((0,x.T)(Me=>({children:Me,rootSnapshot:$e})),Q(Me=>{if(Me instanceof Ji)return this.urlTree=Me.urlTree,this.match(Me.urlTree.root);throw Me instanceof _i?this.noMatchError(Me):Me}))}processSegmentGroup(Ce,$e,Me,qe,Pt){return 0===Me.segments.length&&Me.hasChildren()?this.processChildren(Ce,$e,Me,Pt):this.processSegment(Ce,$e,Me,Me.segments,qe,!0,Pt).pipe((0,x.T)(Vt=>Vt instanceof hr?[Vt]:[]))}processChildren(Ce,$e,Me,qe){const Pt=[];for(const Vt of Object.keys(Me.children))"primary"===Vt?Pt.unshift(Vt):Pt.push(Vt);return(0,l.H)(Pt).pipe(oe(Vt=>{const Vn=Me.children[Vt],xr=function jo(me,Ce){const $e=me.filter(Me=>oo(Me)===Ce);return $e.push(...me.filter(Me=>oo(Me)!==Ce)),$e}($e,Vt);return this.processSegmentGroup(Ce,xr,Vn,Vt,qe)}),function De(me,Ce){return(0,q.N)(function fe(me,Ce,$e,Me,qe){return(Pt,Vt)=>{let Vn=$e,xr=Ce,Ln=0;Pt.subscribe((0,K._)(Vt,Gr=>{const Ci=Ln++;xr=Vn?me(xr,Gr,Ci):(Vn=!0,Gr),Me&&Vt.next(xr)},qe&&(()=>{Vn&&Vt.next(xr),Vt.complete()})))}}(me,Ce,arguments.length>=2,!0))}((Vt,Vn)=>(Vt.push(...Vn),Vt)),H(null),function le(me,Ce){const $e=arguments.length>=2;return Me=>Me.pipe(me?(0,G.p)((qe,Pt)=>me(qe,Pt,Me)):we.D,it(1),$e?H(Ce):te(()=>new b))}(),(0,V.Z)(Vt=>{if(null===Vt)return cs(Me);const Vn=$a(Vt);return function cc(me){me.sort((Ce,$e)=>Ce.value.outlet===_t?-1:$e.value.outlet===_t?1:Ce.value.outlet.localeCompare($e.value.outlet))}(Vn),(0,be.of)(Vn)}))}processSegment(Ce,$e,Me,qe,Pt,Vt,Vn){return(0,l.H)($e).pipe(oe(xr=>{var Ln;return this.processSegmentAgainstRoute(null!==(Ln=xr._injector)&&void 0!==Ln?Ln:Ce,$e,xr,Me,qe,Pt,Vt,Vn).pipe(Q(Gr=>{if(Gr instanceof _i)return(0,be.of)(null);throw Gr}))}),Se(xr=>!!xr),Q(xr=>{if(At(xr))return function jc(me,Ce,$e){return 0===Ce.length&&!me.children[$e]}(Me,qe,Pt)?(0,be.of)(new Od):cs(Me);throw xr}))}processSegmentAgainstRoute(Ce,$e,Me,qe,Pt,Vt,Vn,xr){return function Yi(me,Ce,$e,Me){return!!(oo(me)===Me||Me!==_t&&pr(Ce,$e,me))&&Qs(Ce,me,$e).matched}(Me,qe,Pt,Vt)?void 0===Me.redirectTo?this.matchSegmentAgainstRoute(Ce,qe,Me,Pt,Vt,xr):this.allowRedirects&&Vn?this.expandSegmentAgainstRouteUsingRedirect(Ce,qe,$e,Me,Pt,Vt,xr):cs(qe):cs(qe)}expandSegmentAgainstRouteUsingRedirect(Ce,$e,Me,qe,Pt,Vt,Vn){var xr,Ln;const{matched:Gr,parameters:Ci,consumedSegments:kr,positionalParamSegments:gi,remainingSegments:Zo}=Qs($e,qe,Pt);if(!Gr)return cs($e);"string"==typeof qe.redirectTo&&"/"===qe.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Zs=new Ei(Pt,Ci,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uc(qe),oo(qe),null!==(xr=null!==(Ln=qe.component)&&void 0!==Ln?Ln:qe._loadedComponent)&&void 0!==xr?xr:null,qe,su(qe)),Co=vi(Zs,Vn,this.paramsInheritanceStrategy);Zs.params=Object.freeze(Co.params),Zs.data=Object.freeze(Co.data);const Il=this.applyRedirects.applyRedirectCommands(kr,qe.redirectTo,gi,Zs,Ce);return this.applyRedirects.lineralizeSegments(qe,Il).pipe((0,V.Z)($l=>this.processSegment(Ce,Me,$e,$l.concat(Zo),Vt,!1,Vn)))}matchSegmentAgainstRoute(Ce,$e,Me,qe,Pt,Vt){const Vn=Vs($e,Me,qe,Ce);return"**"===Me.path&&($e.children={}),Vn.pipe((0,E.n)(xr=>{var Ln;return xr.matched?(Ce=null!==(Ln=Me._injector)&&void 0!==Ln?Ln:Ce,this.getChildConfig(Ce,Me,qe).pipe((0,E.n)(({routes:Gr})=>{var Ci,kr,gi;const Zo=null!==(Ci=Me._loadedInjector)&&void 0!==Ci?Ci:Ce,{parameters:Zs,consumedSegments:Co,remainingSegments:Il}=xr,$l=new Ei(Co,Zs,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uc(Me),oo(Me),null!==(kr=null!==(gi=Me.component)&&void 0!==gi?gi:Me._loadedComponent)&&void 0!==kr?kr:null,Me,su(Me)),pa=vi($l,Vt,this.paramsInheritanceStrategy);$l.params=Object.freeze(pa.params),$l.data=Object.freeze(pa.data);const{segmentGroup:uu,slicedSegments:Nd}=eo($e,Co,Il,Gr);if(0===Nd.length&&uu.hasChildren())return this.processChildren(Zo,Gr,uu,$l).pipe((0,x.T)(hc=>new hr($l,hc)));if(0===Gr.length&&0===Nd.length)return(0,be.of)(new hr($l,[]));const ma=oo(Me)===Pt;return this.processSegment(Zo,Gr,uu,Nd,ma?_t:Pt,!0,$l).pipe((0,x.T)(hc=>new hr($l,hc instanceof hr?[hc]:[])))}))):cs($e)}))}getChildConfig(Ce,$e,Me){return $e.children?(0,be.of)({routes:$e.children,injector:Ce}):$e.loadChildren?void 0!==$e._loadedRoutes?(0,be.of)({routes:$e._loadedRoutes,injector:$e._loadedInjector}):function li(me,Ce,$e,Me){const qe=Ce.canLoad;if(void 0===qe||0===qe.length)return(0,be.of)(!0);const Pt=qe.map(Vt=>{const Vn=Tl(Vt,me);return Zn(function se(me){return me&&P(me.canLoad)}(Vn)?Vn.canLoad(Ce,$e):(0,F.N4e)(me,()=>Vn(Ce,$e)))});return(0,be.of)(Pt).pipe(Jt(),Zr())}(Ce,$e,Me).pipe((0,V.Z)(qe=>qe?this.configLoader.loadChildren(Ce,$e).pipe((0,ge.M)(Pt=>{$e._loadedRoutes=Pt.routes,$e._loadedInjector=Pt.injector})):function Po(me){return(0,d.$)(za(!1,so.GuardRejected))}())):(0,be.of)({routes:[],injector:Ce})}}function Fc(me){const Ce=me.value.routeConfig;return Ce&&""===Ce.path}function $a(me){const Ce=[],$e=new Set;for(const Me of me){if(!Fc(Me)){Ce.push(Me);continue}const qe=Ce.find(Pt=>Me.value.routeConfig===Pt.value.routeConfig);void 0!==qe?(qe.children.push(...Me.children),$e.add(qe)):Ce.push(Me)}for(const Me of $e){const qe=$a(Me.children);Ce.push(new hr(Me.value,qe))}return Ce.filter(Me=>!$e.has(Me))}function uc(me){return me.data||{}}function su(me){return me.resolve||{}}function Eh(me){const Ce=me.children.map($e=>Eh($e)).flat();return[me,...Ce]}function Ql(me){return(0,E.n)(Ce=>{const $e=me(Ce);return $e?(0,l.H)($e).pipe((0,x.T)(()=>Ce)):(0,be.of)(Ce)})}let ou=(()=>{var me;class Ce{buildTitle(Me){let qe,Pt=Me.root;for(;void 0!==Pt;){var Vt;qe=null!==(Vt=this.getResolvedTitleForRoute(Pt))&&void 0!==Vt?Vt:qe,Pt=Pt.children.find(Vn=>Vn.outlet===_t)}return qe}getResolvedTitleForRoute(Me){return Me.data[Ft]}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(As),providedIn:"root"}),Ce})(),As=(()=>{var me;class Ce extends ou{constructor(Me){super(),this.title=Me}updateTitle(Me){const qe=this.buildTitle(Me);void 0!==qe&&this.title.setTitle(qe)}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)(F.KVO(zt.hE))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();const Ha=new F.nKC("",{providedIn:"root",factory:()=>({})});let ec=(()=>{var me;class Ce{}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275cmp=F.VBU({type:me,selectors:[["ng-component"]],standalone:!0,features:[F.aNF],decls:1,vars:0,template:function(Me,qe){1&Me&&F.nrm(0,"router-outlet")},dependencies:[da],encapsulation:2}),Ce})();function Ia(me){const Ce=me.children&&me.children.map(Ia),$e=Ce?{...me,children:Ce}:{...me};return!$e.component&&!$e.loadComponent&&(Ce||$e.loadChildren)&&$e.outlet&&$e.outlet!==_t&&($e.component=ec),$e}const _o=new F.nKC("");let Gs=(()=>{var me;class Ce{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,F.WQX)(F.Ql9)}loadComponent(Me){if(this.componentLoaders.get(Me))return this.componentLoaders.get(Me);if(Me._loadedComponent)return(0,be.of)(Me._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(Me);const qe=Zn(Me.loadComponent()).pipe((0,x.T)(et),(0,ge.M)(Vt=>{this.onLoadEndListener&&this.onLoadEndListener(Me),Me._loadedComponent=Vt}),ye(()=>{this.componentLoaders.delete(Me)})),Pt=new h.G(qe,()=>new p.B).pipe((0,Ue.B)());return this.componentLoaders.set(Me,Pt),Pt}loadChildren(Me,qe){if(this.childrenLoaders.get(qe))return this.childrenLoaders.get(qe);if(qe._loadedRoutes)return(0,be.of)({routes:qe._loadedRoutes,injector:qe._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(qe);const Vt=function au(me,Ce,$e,Me){return Zn(me.loadChildren()).pipe((0,x.T)(et),(0,V.Z)(qe=>qe instanceof F.Co$||Array.isArray(qe)?(0,be.of)(qe):(0,l.H)(Ce.compileModuleAsync(qe))),(0,x.T)(qe=>{Me&&Me(me);let Pt,Vt,Vn=!1;return Array.isArray(qe)?(Vt=qe,!0):(Pt=qe.create($e).injector,Vt=Pt.get(_o,[],{optional:!0,self:!0}).flat()),{routes:Vt.map(Ia),injector:Pt}}))}(qe,this.compiler,Me,this.onLoadEndListener).pipe(ye(()=>{this.childrenLoaders.delete(qe)})),Vn=new h.G(Vt,()=>new p.B).pipe((0,Ue.B)());return this.childrenLoaders.set(qe,Vn),Vn}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();function et(me){return function Te(me){return me&&"object"==typeof me&&"default"in me}(me)?me.default:me}let nn=(()=>{var me;class Ce{}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(Ye),providedIn:"root"}),Ce})(),Ye=(()=>{var me;class Ce{shouldProcessUrl(Me){return!0}extract(Me){return Me}merge(Me,qe){return Me}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();const jt=new F.nKC(""),an=new F.nKC("");function St(me,Ce,$e){const Me=me.get(an),qe=me.get(g.qQ);return me.get(F.SKi).runOutsideAngular(()=>{if(!qe.startViewTransition||Me.skipNextTransition)return Me.skipNextTransition=!1,new Promise(Ln=>setTimeout(Ln));let Pt;const Vt=new Promise(Ln=>{Pt=Ln}),Vn=qe.startViewTransition(()=>(Pt(),function Nr(me){return new Promise(Ce=>{(0,F.mal)({read:()=>setTimeout(Ce)},{injector:me})})}(me))),{onViewTransitionCreated:xr}=Me;return xr&&(0,F.N4e)(me,()=>xr({transition:Vn,from:Ce,to:$e})),Vt})}const rs=new F.nKC("");let ot=(()=>{var me;class Ce{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new p.B,this.transitionAbortSubject=new p.B,this.configLoader=(0,F.WQX)(Gs),this.environmentInjector=(0,F.WQX)(F.uvJ),this.urlSerializer=(0,F.WQX)($n),this.rootContexts=(0,F.WQX)(fn),this.location=(0,F.WQX)(g.aZ),this.inputBindingEnabled=null!==(0,F.WQX)(uo,{optional:!0}),this.titleStrategy=(0,F.WQX)(ou),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,F.WQX)(nn),this.createViewTransition=(0,F.WQX)(jt,{optional:!0}),this.navigationErrorHandler=(0,F.WQX)(rs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,be.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Pt=>this.events.next(new Va(Pt)),this.configLoader.onLoadStartListener=Pt=>this.events.next(new Ja(Pt))}complete(){var Me;null===(Me=this.transitions)||void 0===Me||Me.complete()}handleNavigationRequest(Me){var qe;const Pt=++this.navigationId;null===(qe=this.transitions)||void 0===qe||qe.next({...this.transitions.value,...Me,id:Pt})}setupNavigations(Me,qe,Pt){return this.transitions=new Z.t({id:0,currentUrlTree:qe,currentRawUrl:qe,extractedUrl:this.urlHandlingStrategy.extract(qe),urlAfterRedirects:this.urlHandlingStrategy.extract(qe),rawUrl:qe,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ps,restoredState:null,currentSnapshot:Pt.snapshot,targetSnapshot:null,currentRouterState:Pt,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,G.p)(Vt=>0!==Vt.id),(0,x.T)(Vt=>({...Vt,extractedUrl:this.urlHandlingStrategy.extract(Vt.rawUrl)})),(0,E.n)(Vt=>{let Vn=!1,xr=!1;return(0,be.of)(Vt).pipe((0,E.n)(Ln=>{var Gr;if(this.navigationId>Vt.id)return this.cancelNavigationTransition(Vt,"",so.SupersededByNewNavigation),f.w;this.currentTransition=Vt,this.currentNavigation={id:Ln.id,initialUrl:Ln.rawUrl,extractedUrl:Ln.extractedUrl,targetBrowserUrl:"string"==typeof Ln.extras.browserUrl?this.urlSerializer.parse(Ln.extras.browserUrl):Ln.extras.browserUrl,trigger:Ln.source,extras:Ln.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Ci=!Me.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),kr=null!==(Gr=Ln.extras.onSameUrlNavigation)&&void 0!==Gr?Gr:Me.onSameUrlNavigation;if(!Ci&&"reload"!==kr){const gi="";return this.events.next(new ca(Ln.id,this.urlSerializer.serialize(Ln.rawUrl),gi,ea.IgnoredSameUrlNavigation)),Ln.resolve(!1),f.w}if(this.urlHandlingStrategy.shouldProcessUrl(Ln.rawUrl))return(0,be.of)(Ln).pipe((0,E.n)(gi=>{var Zo,Zs;const Co=null===(Zo=this.transitions)||void 0===Zo?void 0:Zo.getValue();return this.events.next(new co(gi.id,this.urlSerializer.serialize(gi.extractedUrl),gi.source,gi.restoredState)),Co!==(null===(Zs=this.transitions)||void 0===Zs?void 0:Zs.getValue())?f.w:Promise.resolve(gi)}),function os(me,Ce,$e,Me,qe,Pt){return(0,V.Z)(Vt=>function nd(me,Ce,$e,Me,qe,Pt,Vt="emptyOnly"){return new yl(me,Ce,$e,Me,qe,Vt,Pt).recognize()}(me,Ce,$e,Me,Vt.extractedUrl,qe,Pt).pipe((0,x.T)(({state:Vn,tree:xr})=>({...Vt,targetSnapshot:Vn,urlAfterRedirects:xr}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,Me.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,ge.M)(gi=>{Vt.targetSnapshot=gi.targetSnapshot,Vt.urlAfterRedirects=gi.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:gi.urlAfterRedirects};const Zo=new qo(gi.id,this.urlSerializer.serialize(gi.extractedUrl),this.urlSerializer.serialize(gi.urlAfterRedirects),gi.targetSnapshot);this.events.next(Zo)}));if(Ci&&this.urlHandlingStrategy.shouldProcessUrl(Ln.currentRawUrl)){const{id:gi,extractedUrl:Zo,source:Zs,restoredState:Co,extras:Il}=Ln,$l=new co(gi,this.urlSerializer.serialize(Zo),Zs,Co);this.events.next($l);const pa=Pr(this.rootComponentType).snapshot;return this.currentTransition=Vt={...Ln,targetSnapshot:pa,urlAfterRedirects:Zo,extras:{...Il,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Zo,(0,be.of)(Vt)}{const gi="";return this.events.next(new ca(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),gi,ea.IgnoredByUrlHandlingStrategy)),Ln.resolve(!1),f.w}}),(0,ge.M)(Ln=>{const Gr=new ua(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),this.urlSerializer.serialize(Ln.urlAfterRedirects),Ln.targetSnapshot);this.events.next(Gr)}),(0,x.T)(Ln=>(this.currentTransition=Vt={...Ln,guards:Mo(Ln.targetSnapshot,Ln.currentSnapshot,this.rootContexts)},Vt)),function je(me,Ce){return(0,V.Z)($e=>{const{targetSnapshot:Me,currentSnapshot:qe,guards:{canActivateChecks:Pt,canDeactivateChecks:Vt}}=$e;return 0===Vt.length&&0===Pt.length?(0,be.of)({...$e,guardsResult:!0}):function xe(me,Ce,$e,Me){return(0,l.H)(me).pipe((0,V.Z)(qe=>function Gn(me,Ce,$e,Me,qe){const Pt=Ce&&Ce.routeConfig?Ce.routeConfig.canDeactivate:null;if(!Pt||0===Pt.length)return(0,be.of)(!0);const Vt=Pt.map(Vn=>{var xr;const Ln=null!==(xr=ut(Ce))&&void 0!==xr?xr:qe,Gr=Tl(Vn,Ln);return Zn(function Ke(me){return me&&P(me.canDeactivate)}(Gr)?Gr.canDeactivate(me,Ce,$e,Me):(0,F.N4e)(Ln,()=>Gr(me,Ce,$e,Me))).pipe(Se())});return(0,be.of)(Vt).pipe(Jt())}(qe.component,qe.route,$e,Ce,Me)),Se(qe=>!0!==qe,!0))}(Vt,Me,qe,me).pipe((0,V.Z)(Vn=>Vn&&function X(me){return"boolean"==typeof me}(Vn)?function Ve(me,Ce,$e,Me){return(0,l.H)(Ce).pipe(oe(qe=>(0,w.x)(function ht(me,Ce){return null!==me&&Ce&&Ce(new Ne(me)),(0,be.of)(!0)}(qe.route.parent,Me),function ke(me,Ce){return null!==me&&Ce&&Ce(new Bt(me)),(0,be.of)(!0)}(qe.route,Me),function Dn(me,Ce,$e){const Me=Ce[Ce.length-1],Pt=Ce.slice(0,Ce.length-1).reverse().map(Vt=>function gl(me){const Ce=me.routeConfig?me.routeConfig.canActivateChild:null;return Ce&&0!==Ce.length?{node:me,guards:Ce}:null}(Vt)).filter(Vt=>null!==Vt).map(Vt=>(0,I.v)(()=>{const Vn=Vt.guards.map(xr=>{var Ln;const Gr=null!==(Ln=ut(Vt.node))&&void 0!==Ln?Ln:$e,Ci=Tl(xr,Gr);return Zn(function Ie(me){return me&&P(me.canActivateChild)}(Ci)?Ci.canActivateChild(Me,me):(0,F.N4e)(Gr,()=>Ci(Me,me))).pipe(Se())});return(0,be.of)(Vn).pipe(Jt())}));return(0,be.of)(Pt).pipe(Jt())}(me,qe.path,$e),function on(me,Ce,$e){const Me=Ce.routeConfig?Ce.routeConfig.canActivate:null;if(!Me||0===Me.length)return(0,be.of)(!0);const qe=Me.map(Pt=>(0,I.v)(()=>{var Vt;const Vn=null!==(Vt=ut(Ce))&&void 0!==Vt?Vt:$e,xr=Tl(Pt,Vn);return Zn(function he(me){return me&&P(me.canActivate)}(xr)?xr.canActivate(Ce,me):(0,F.N4e)(Vn,()=>xr(Ce,me))).pipe(Se())}));return(0,be.of)(qe).pipe(Jt())}(me,qe.route,$e))),Se(qe=>!0!==qe,!0))}(Me,Pt,me,Ce):(0,be.of)(Vn)),(0,x.T)(Vn=>({...$e,guardsResult:Vn})))})}(this.environmentInjector,Ln=>this.events.next(Ln)),(0,ge.M)(Ln=>{if(Vt.guardsResult=Ln.guardsResult,Ln.guardsResult&&"boolean"!=typeof Ln.guardsResult)throw Aa(0,Ln.guardsResult);const Gr=new mo(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),this.urlSerializer.serialize(Ln.urlAfterRedirects),Ln.targetSnapshot,!!Ln.guardsResult);this.events.next(Gr)}),(0,G.p)(Ln=>!!Ln.guardsResult||(this.cancelNavigationTransition(Ln,"",so.GuardRejected),!1)),Ql(Ln=>{if(Ln.guards.canActivateChecks.length)return(0,be.of)(Ln).pipe((0,ge.M)(Gr=>{const Ci=new Ta(Gr.id,this.urlSerializer.serialize(Gr.extractedUrl),this.urlSerializer.serialize(Gr.urlAfterRedirects),Gr.targetSnapshot);this.events.next(Ci)}),(0,E.n)(Gr=>{let Ci=!1;return(0,be.of)(Gr).pipe(function Ys(me,Ce){return(0,V.Z)($e=>{const{targetSnapshot:Me,guards:{canActivateChecks:qe}}=$e;if(!qe.length)return(0,be.of)($e);const Pt=new Set(qe.map(xr=>xr.route)),Vt=new Set;for(const xr of Pt)if(!Vt.has(xr))for(const Ln of Eh(xr))Vt.add(Ln);let Vn=0;return(0,l.H)(Vt).pipe(oe(xr=>Pt.has(xr)?function xs(me,Ce,$e,Me){const qe=me.routeConfig,Pt=me._resolve;return void 0!==(null==qe?void 0:qe.title)&&!Br(qe)&&(Pt[Ft]=qe.title),function Ml(me,Ce,$e,Me){const qe=Tt(me);if(0===qe.length)return(0,be.of)({});const Pt={};return(0,l.H)(qe).pipe((0,V.Z)(Vt=>function wc(me,Ce,$e,Me){var qe;const Pt=null!==(qe=ut(Ce))&&void 0!==qe?qe:Me,Vt=Tl(me,Pt);return Zn(Vt.resolve?Vt.resolve(Ce,$e):(0,F.N4e)(Pt,()=>Vt(Ce,$e)))}(me[Vt],Ce,$e,Me).pipe(Se(),(0,ge.M)(Vn=>{if(Vn instanceof el)throw Aa(new sr,Vn);Pt[Vt]=Vn}))),it(1),(0,z.u)(Pt),Q(Vt=>At(Vt)?f.w:(0,d.$)(Vt)))}(Pt,me,Ce,Me).pipe((0,x.T)(Vt=>(me._resolvedData=Vt,me.data=vi(me,me.parent,$e).resolve,null)))}(xr,Me,me,Ce):(xr.data=vi(xr,xr.parent,me).resolve,(0,be.of)(void 0))),(0,ge.M)(()=>Vn++),it(1),(0,V.Z)(xr=>Vn===Vt.size?(0,be.of)($e):f.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,ge.M)({next:()=>Ci=!0,complete:()=>{Ci||this.cancelNavigationTransition(Gr,"",so.NoDataFromResolver)}}))}),(0,ge.M)(Gr=>{const Ci=new To(Gr.id,this.urlSerializer.serialize(Gr.extractedUrl),this.urlSerializer.serialize(Gr.urlAfterRedirects),Gr.targetSnapshot);this.events.next(Ci)}))}),Ql(Ln=>{const Gr=Ci=>{var kr;const gi=[];null!==(kr=Ci.routeConfig)&&void 0!==kr&&kr.loadComponent&&!Ci.routeConfig._loadedComponent&&gi.push(this.configLoader.loadComponent(Ci.routeConfig).pipe((0,ge.M)(Zo=>{Ci.component=Zo}),(0,x.T)(()=>{})));for(const Zo of Ci.children)gi.push(...Gr(Zo));return gi};return(0,M.z)(Gr(Ln.targetSnapshot.root)).pipe(H(null),(0,S.s)(1))}),Ql(()=>this.afterPreactivation()),(0,E.n)(()=>{var Ln;const{currentSnapshot:Gr,targetSnapshot:Ci}=Vt,kr=null===(Ln=this.createViewTransition)||void 0===Ln?void 0:Ln.call(this,this.environmentInjector,Gr.root,Ci.root);return kr?(0,l.H)(kr).pipe((0,x.T)(()=>Vt)):(0,be.of)(Vt)}),(0,x.T)(Ln=>{const Gr=function bc(me,Ce,$e){const Me=ha(me,Ce._root,$e?$e._root:void 0);return new Mr(Me,Ce)}(Me.routeReuseStrategy,Ln.targetSnapshot,Ln.currentRouterState);return this.currentTransition=Vt={...Ln,targetRouterState:Gr},this.currentNavigation.targetRouterState=Gr,Vt}),(0,ge.M)(()=>{this.events.next(new kn)}),((me,Ce,$e,Me)=>(0,x.T)(qe=>(new Ca(Ce,qe.targetRouterState,qe.currentRouterState,$e,Me).activate(me),qe)))(this.rootContexts,Me.routeReuseStrategy,Ln=>this.events.next(Ln),this.inputBindingEnabled),(0,S.s)(1),(0,ge.M)({next:Ln=>{var Gr;Vn=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(Ln.id,this.urlSerializer.serialize(Ln.extractedUrl),this.urlSerializer.serialize(Ln.urlAfterRedirects))),null===(Gr=this.titleStrategy)||void 0===Gr||Gr.updateTitle(Ln.targetRouterState.snapshot),Ln.resolve(!0)},complete:()=>{Vn=!0}}),function vt(me){return(0,q.N)((Ce,$e)=>{(0,re.Tg)(me).subscribe((0,K._)($e,()=>$e.complete(),Je.l)),!$e.closed&&Ce.subscribe($e)})}(this.transitionAbortSubject.pipe((0,ge.M)(Ln=>{throw Ln}))),ye(()=>{var Ln;!Vn&&!xr&&this.cancelNavigationTransition(Vt,"",so.SupersededByNewNavigation),(null===(Ln=this.currentTransition)||void 0===Ln?void 0:Ln.id)===Vt.id&&(this.currentNavigation=null,this.currentTransition=null)}),Q(Ln=>{if(xr=!0,Os(Ln))this.events.next(new So(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),Ln.message,Ln.cancellationCode)),function ml(me){return Os(me)&&R(me.url)}(Ln)?this.events.next(new fs(Ln.url,Ln.navigationBehaviorOptions)):Vt.resolve(!1);else{var Gr;const Ci=new ta(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),Ln,null!==(Gr=Vt.targetSnapshot)&&void 0!==Gr?Gr:void 0);try{const kr=(0,F.N4e)(this.environmentInjector,()=>{var gi;return null===(gi=this.navigationErrorHandler)||void 0===gi?void 0:gi.call(this,Ci)});if(kr instanceof el){const{message:gi,cancellationCode:Zo}=Aa(0,kr);this.events.next(new So(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),gi,Zo)),this.events.next(new fs(kr.redirectTo,kr.navigationBehaviorOptions))}else{this.events.next(Ci);const gi=Me.errorHandler(Ln);Vt.resolve(!!gi)}}catch(kr){this.options.resolveNavigationPromiseOnError?Vt.resolve(!1):Vt.reject(kr)}}return f.w}))}))}cancelNavigationTransition(Me,qe,Pt){const Vt=new So(Me.id,this.urlSerializer.serialize(Me.extractedUrl),qe,Pt);this.events.next(Vt),Me.resolve(!1)}isUpdatingInternalState(){var Me,qe;return(null===(Me=this.currentTransition)||void 0===Me?void 0:Me.extractedUrl.toString())!==(null===(qe=this.currentTransition)||void 0===qe?void 0:qe.currentUrlTree.toString())}isUpdatedBrowserUrl(){var Me,qe,Pt,Vt;const Vn=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),xr=null!==(Me=null===(qe=this.currentNavigation)||void 0===qe?void 0:qe.targetBrowserUrl)&&void 0!==Me?Me:null===(Pt=this.currentNavigation)||void 0===Pt?void 0:Pt.extractedUrl;return Vn.toString()!==(null==xr?void 0:xr.toString())&&!(null!==(Vt=this.currentNavigation)&&void 0!==Vt&&Vt.extras.skipLocationChange)}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();function ue(me){return me!==Ps}let ve=(()=>{var me;class Ce{}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(lt),providedIn:"root"}),Ce})();class ze{shouldDetach(Ce){return!1}store(Ce,$e){}shouldAttach(Ce){return!1}retrieve(Ce){return null}shouldReuseRoute(Ce,$e){return Ce.routeConfig===$e.routeConfig}}let lt=(()=>{var me;class Ce extends ze{}return(me=Ce).\u0275fac=(()=>{let $e;return function(qe){return($e||($e=F.xGo(me)))(qe||me)}})(),me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})(),Lt=(()=>{var me;class Ce{}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:()=>(0,F.WQX)(Sn),providedIn:"root"}),Ce})(),Sn=(()=>{var me;class Ce extends Lt{constructor(){super(...arguments),this.location=(0,F.WQX)(g.aZ),this.urlSerializer=(0,F.WQX)($n),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,F.WQX)(nn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Pr(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var Me,qe;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(Me=null===(qe=this.restoredState())||void 0===qe?void 0:qe.\u0275routerPageId)&&void 0!==Me?Me:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(Me){return this.location.subscribe(qe=>{"popstate"===qe.type&&Me(qe.url,qe.state)})}handleRouterEvent(Me,qe){if(Me instanceof co)this.stateMemento=this.createStateMemento();else if(Me instanceof ca)this.rawUrlTree=qe.initialUrl;else if(Me instanceof qo){if("eager"===this.urlUpdateStrategy&&!qe.extras.skipLocationChange){var Pt;const Vn=this.urlHandlingStrategy.merge(qe.finalUrl,qe.initialUrl);this.setBrowserUrl(null!==(Pt=qe.targetBrowserUrl)&&void 0!==Pt?Pt:Vn,qe)}}else if(Me instanceof kn){var Vt;this.currentUrlTree=qe.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(qe.finalUrl,qe.initialUrl),this.routerState=qe.targetRouterState,"deferred"!==this.urlUpdateStrategy||qe.extras.skipLocationChange||this.setBrowserUrl(null!==(Vt=qe.targetBrowserUrl)&&void 0!==Vt?Vt:this.rawUrlTree,qe)}else Me instanceof So&&(Me.code===so.GuardRejected||Me.code===so.NoDataFromResolver)?this.restoreHistory(qe):Me instanceof ta?this.restoreHistory(qe,!0):Me instanceof Ls&&(this.lastSuccessfulId=Me.id,this.currentPageId=this.browserPageId)}setBrowserUrl(Me,qe){const Pt=Me instanceof gt?this.urlSerializer.serialize(Me):Me;if(this.location.isCurrentPathEqualTo(Pt)||qe.extras.replaceUrl){const Vn={...qe.extras.state,...this.generateNgRouterState(qe.id,this.browserPageId)};this.location.replaceState(Pt,"",Vn)}else{const Vt={...qe.extras.state,...this.generateNgRouterState(qe.id,this.browserPageId+1)};this.location.go(Pt,"",Vt)}}restoreHistory(Me,qe=!1){if("computed"===this.canceledNavigationResolution){const Vt=this.currentPageId-this.browserPageId;0!==Vt?this.location.historyGo(Vt):this.currentUrlTree===Me.finalUrl&&0===Vt&&(this.resetState(Me),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(qe&&this.resetState(Me),this.resetUrlToCurrentUrlTree())}resetState(Me){var qe;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(qe=Me.finalUrl)&&void 0!==qe?qe:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(Me,qe){return"computed"===this.canceledNavigationResolution?{navigationId:Me,\u0275routerPageId:qe}:{navigationId:Me}}}return(me=Ce).\u0275fac=(()=>{let $e;return function(qe){return($e||($e=F.xGo(me)))(qe||me)}})(),me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();var xn=function(me){return me[me.COMPLETE=0]="COMPLETE",me[me.FAILED=1]="FAILED",me[me.REDIRECTING=2]="REDIRECTING",me}(xn||{});function Hn(me,Ce){me.events.pipe((0,G.p)($e=>$e instanceof Ls||$e instanceof So||$e instanceof ta||$e instanceof ca),(0,x.T)($e=>$e instanceof Ls||$e instanceof ca?xn.COMPLETE:$e instanceof So&&($e.code===so.Redirect||$e.code===so.SupersededByNewNavigation)?xn.REDIRECTING:xn.FAILED),(0,G.p)($e=>$e!==xn.REDIRECTING),(0,S.s)(1)).subscribe(()=>{Ce()})}function ar(me){throw me}const Wr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ai={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{var me;class Ce{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var Me,qe;this.disposed=!1,this.console=(0,F.WQX)(F.H3F),this.stateManager=(0,F.WQX)(Lt),this.options=(0,F.WQX)(Ha,{optional:!0})||{},this.pendingTasks=(0,F.WQX)(F.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,F.WQX)(ot),this.urlSerializer=(0,F.WQX)($n),this.location=(0,F.WQX)(g.aZ),this.urlHandlingStrategy=(0,F.WQX)(nn),this._events=new p.B,this.errorHandler=this.options.errorHandler||ar,this.navigated=!1,this.routeReuseStrategy=(0,F.WQX)(ve),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(Me=null===(qe=(0,F.WQX)(_o,{optional:!0}))||void 0===qe?void 0:qe.flat())&&void 0!==Me?Me:[],this.componentInputBindingEnabled=!!(0,F.WQX)(uo,{optional:!0}),this.eventsSubscription=new m.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:Pt=>{this.console.warn(Pt)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const Me=this.navigationTransitions.events.subscribe(qe=>{try{const Pt=this.navigationTransitions.currentTransition,Vt=this.navigationTransitions.currentNavigation;if(null!==Pt&&null!==Vt)if(this.stateManager.handleRouterEvent(qe,Vt),qe instanceof So&&qe.code!==so.Redirect&&qe.code!==so.SupersededByNewNavigation)this.navigated=!0;else if(qe instanceof Ls)this.navigated=!0;else if(qe instanceof fs){const Vn=qe.navigationBehaviorOptions,xr=this.urlHandlingStrategy.merge(qe.url,Pt.currentRawUrl),Ln={browserUrl:Pt.extras.browserUrl,info:Pt.extras.info,skipLocationChange:Pt.extras.skipLocationChange,replaceUrl:Pt.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ue(Pt.source),...Vn};this.scheduleNavigation(xr,Ps,null,Ln,{resolve:Pt.resolve,reject:Pt.reject,promise:Pt.promise})}(function Xi(me){return!(me instanceof kn||me instanceof fs)})(qe)&&this._events.next(qe)}catch(Pt){this.navigationTransitions.transitionAbortSubject.next(Pt)}});this.eventsSubscription.add(Me)}resetRootComponentType(Me){this.routerState.root.component=Me,this.navigationTransitions.rootComponentType=Me}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ps,this.stateManager.restoredState())}setUpLocationChangeListener(){var Me;null!==(Me=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==Me||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((qe,Pt)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(qe,"popstate",Pt)},0)}))}navigateToSyncWithBrowser(Me,qe,Pt){const Vt={replaceUrl:!0},Vn=null!=Pt&&Pt.navigationId?Pt:null;if(Pt){const Ln={...Pt};delete Ln.navigationId,delete Ln.\u0275routerPageId,0!==Object.keys(Ln).length&&(Vt.state=Ln)}const xr=this.parseUrl(Me);this.scheduleNavigation(xr,qe,Vn,Vt)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(Me){this.config=Me.map(Ia),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(Me,qe={}){const{relativeTo:Pt,queryParams:Vt,fragment:Vn,queryParamsHandling:xr,preserveFragment:Ln}=qe,Gr=Ln?this.currentUrlTree.fragment:Vn;let kr,Ci=null;switch(xr){case"merge":Ci={...this.currentUrlTree.queryParams,...Vt};break;case"preserve":Ci=this.currentUrlTree.queryParams;break;default:Ci=Vt||null}null!==Ci&&(Ci=this.removeEmptyProps(Ci));try{kr=ie(Pt?Pt.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof Me[0]||"/"!==Me[0][0])&&(Me=[]),kr=this.currentUrlTree.root}return $(kr,Me,Ci,null!=Gr?Gr:null)}navigateByUrl(Me,qe={skipLocationChange:!1}){const Pt=R(Me)?Me:this.parseUrl(Me),Vt=this.urlHandlingStrategy.merge(Pt,this.rawUrlTree);return this.scheduleNavigation(Vt,Ps,null,qe)}navigate(Me,qe={skipLocationChange:!1}){return function Qi(me){for(let Ce=0;Ce<me.length;Ce++)if(null==me[Ce])throw new F.wOt(4008,!1)}(Me),this.navigateByUrl(this.createUrlTree(Me,qe),qe)}serializeUrl(Me){return this.urlSerializer.serialize(Me)}parseUrl(Me){try{return this.urlSerializer.parse(Me)}catch{return this.urlSerializer.parse("/")}}isActive(Me,qe){let Pt;if(Pt=!0===qe?{...Wr}:!1===qe?{...ai}:qe,R(Me))return Rn(this.currentUrlTree,Me,Pt);const Vt=this.parseUrl(Me);return Rn(this.currentUrlTree,Vt,Pt)}removeEmptyProps(Me){return Object.entries(Me).reduce((qe,[Pt,Vt])=>(null!=Vt&&(qe[Pt]=Vt),qe),{})}scheduleNavigation(Me,qe,Pt,Vt,Vn){if(this.disposed)return Promise.resolve(!1);let xr,Ln,Gr;Vn?(xr=Vn.resolve,Ln=Vn.reject,Gr=Vn.promise):Gr=new Promise((kr,gi)=>{xr=kr,Ln=gi});const Ci=this.pendingTasks.add();return Hn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ci))}),this.navigationTransitions.handleNavigationRequest({source:qe,restoredState:Pt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:Me,extras:Vt,resolve:xr,reject:Ln,promise:Gr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gr.catch(kr=>Promise.reject(kr))}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})(),is=(()=>{var me;class Ce{constructor(Me,qe,Pt,Vt,Vn,xr){var Ln;this.router=Me,this.route=qe,this.tabIndexAttribute=Pt,this.renderer=Vt,this.el=Vn,this.locationStrategy=xr,this.href=null,this.onChanges=new p.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const Gr=null===(Ln=Vn.nativeElement.tagName)||void 0===Ln?void 0:Ln.toLowerCase();this.isAnchorElement="a"===Gr||"area"===Gr,this.isAnchorElement?this.subscription=Me.events.subscribe(Ci=>{Ci instanceof Ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(Me){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",Me)}ngOnChanges(Me){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(Me){null==Me?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=R(Me)||Array.isArray(Me)?Me:[Me],this.setTabIndexIfNotOnNativeEl("0"))}onClick(Me,qe,Pt,Vt,Vn){const xr=this.urlTree;return!!(null===xr||this.isAnchorElement&&(0!==Me||qe||Pt||Vt||Vn||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(xr,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){var Me;null===(Me=this.subscription)||void 0===Me||Me.unsubscribe()}updateHref(){var Me;const qe=this.urlTree;this.href=null!==qe&&this.locationStrategy?null===(Me=this.locationStrategy)||void 0===Me?void 0:Me.prepareExternalUrl(this.router.serializeUrl(qe)):null;const Pt=null===this.href?null:(0,F.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",Pt)}applyAttributeValue(Me,qe){const Pt=this.renderer,Vt=this.el.nativeElement;null!==qe?Pt.setAttribute(Vt,Me,qe):Pt.removeAttribute(Vt,Me)}get urlTree(){return null===this.routerLinkInput?null:R(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)(F.rXU(ki),F.rXU(Jr),F.kS0("tabindex"),F.rXU(F.sFG),F.rXU(F.aKT),F.rXU(g.hb))},me.\u0275dir=F.FsC({type:me,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(Me,qe){1&Me&&F.bIt("click",function(Vt){return qe.onClick(Vt.button,Vt.ctrlKey,Vt.shiftKey,Vt.altKey,Vt.metaKey)}),2&Me&&F.BMQ("target",qe.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",F.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",F.L39],replaceUrl:[2,"replaceUrl","replaceUrl",F.L39],routerLink:"routerLink"},standalone:!0,features:[F.GFd,F.OA$]}),Ce})();class us{}let po=(()=>{var me;class Ce{preload(Me,qe){return qe().pipe(Q(()=>(0,be.of)(null)))}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})(),ll=(()=>{var me;class Ce{constructor(Me,qe,Pt,Vt,Vn){this.router=Me,this.injector=Pt,this.preloadingStrategy=Vt,this.loader=Vn}setUpPreloading(){this.subscription=this.router.events.pipe((0,G.p)(Me=>Me instanceof Ls),oe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(Me,qe){const Pt=[];for(const Ln of qe){var Vt,Vn;Ln.providers&&!Ln._injector&&(Ln._injector=(0,F.Ol2)(Ln.providers,Me,`Route: ${Ln.path}`));const Gr=null!==(Vt=Ln._injector)&&void 0!==Vt?Vt:Me,Ci=null!==(Vn=Ln._loadedInjector)&&void 0!==Vn?Vn:Gr;var xr;(Ln.loadChildren&&!Ln._loadedRoutes&&void 0===Ln.canLoad||Ln.loadComponent&&!Ln._loadedComponent)&&Pt.push(this.preloadConfig(Gr,Ln)),(Ln.children||Ln._loadedRoutes)&&Pt.push(this.processRoutes(Ci,null!==(xr=Ln.children)&&void 0!==xr?xr:Ln._loadedRoutes))}return(0,l.H)(Pt).pipe((0,Ct.U)())}preloadConfig(Me,qe){return this.preloadingStrategy.preload(qe,()=>{let Pt;Pt=qe.loadChildren&&void 0===qe.canLoad?this.loader.loadChildren(Me,qe):(0,be.of)(null);const Vt=Pt.pipe((0,V.Z)(Vn=>{var xr;return null===Vn?(0,be.of)(void 0):(qe._loadedRoutes=Vn.routes,qe._loadedInjector=Vn.injector,this.processRoutes(null!==(xr=Vn.injector)&&void 0!==xr?xr:Me,Vn.routes))}));if(qe.loadComponent&&!qe._loadedComponent){const Vn=this.loader.loadComponent(qe);return(0,l.H)([Vt,Vn]).pipe((0,Ct.U)())}return Vt})}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)(F.KVO(ki),F.KVO(F.Ql9),F.KVO(F.uvJ),F.KVO(us),F.KVO(Gs))},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac,providedIn:"root"}),Ce})();const sa=new F.nKC("");let fa=(()=>{var me;class Ce{constructor(Me,qe,Pt,Vt,Vn={}){this.urlSerializer=Me,this.transitions=qe,this.viewportScroller=Pt,this.zone=Vt,this.options=Vn,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Vn.scrollPositionRestoration||(Vn.scrollPositionRestoration="disabled"),Vn.anchorScrolling||(Vn.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(Me=>{Me instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=Me.navigationTrigger,this.restoredId=Me.restoredState?Me.restoredState.navigationId:0):Me instanceof Ls?(this.lastId=Me.id,this.scheduleScrollEvent(Me,this.urlSerializer.parse(Me.urlAfterRedirects).fragment)):Me instanceof ca&&Me.code===ea.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(Me,this.urlSerializer.parse(Me.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(Me=>{Me instanceof Ht&&(Me.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(Me.position):Me.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(Me.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(Me,qe){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ht(Me,"popstate"===this.lastSource?this.store[this.restoredId]:null,qe))})},0)})}ngOnDestroy(){var Me,qe;null===(Me=this.routerEventsSubscription)||void 0===Me||Me.unsubscribe(),null===(qe=this.scrollEventsSubscription)||void 0===qe||qe.unsubscribe()}}return(me=Ce).\u0275fac=function(Me){F.QTQ()},me.\u0275prov=F.jDH({token:me,factory:me.\u0275fac}),Ce})();function zo(me,Ce){return{\u0275kind:me,\u0275providers:Ce}}function Ou(){const me=(0,F.WQX)(F.zZn);return Ce=>{var $e,Me;const qe=me.get(F.o8S);if(Ce!==qe.components[0])return;const Pt=me.get(ki),Vt=me.get(ci);1===me.get(Qr)&&Pt.initialNavigation(),null===($e=me.get($o,null,F.$GK.Optional))||void 0===$e||$e.setUpPreloading(),null===(Me=me.get(sa,null,F.$GK.Optional))||void 0===Me||Me.init(),Pt.resetRootComponentType(qe.componentTypes[0]),Vt.closed||(Vt.next(),Vt.complete(),Vt.unsubscribe())}}const ci=new F.nKC("",{factory:()=>new p.B}),Qr=new F.nKC("",{providedIn:"root",factory:()=>1}),$o=new F.nKC("");function _a(me){return zo(0,[{provide:$o,useExisting:ll},{provide:us,useExisting:me}])}function oa(me){return zo(9,[{provide:jt,useValue:St},{provide:an,useValue:{skipNextTransition:!(null==me||!me.skipInitialTransition),...me}}])}const Ra=new F.nKC("ROUTER_FORROOT_GUARD"),lu=[g.aZ,{provide:$n,useClass:sr},ki,fn,{provide:Jr,useFactory:function ul(me){return me.routerState.root},deps:[ki]},Gs,[]];let cu=(()=>{var me;class Ce{constructor(Me){}static forRoot(Me,qe){return{ngModule:Ce,providers:[lu,[],{provide:_o,multi:!0,useValue:Me},{provide:Ra,useFactory:Bm,deps:[[ki,new F.Xx1,new F.kdw]]},{provide:Ha,useValue:qe||{}},null!=qe&&qe.useHash?{provide:g.hb,useClass:g.fw}:{provide:g.hb,useClass:g.Sm},{provide:sa,useFactory:()=>{const me=(0,F.WQX)(g.Xr),Ce=(0,F.WQX)(F.SKi),$e=(0,F.WQX)(Ha),Me=(0,F.WQX)(ot),qe=(0,F.WQX)($n);return $e.scrollOffset&&me.setOffset($e.scrollOffset),new fa(qe,Me,me,Ce,$e)}},null!=qe&&qe.preloadingStrategy?_a(qe.preloadingStrategy).\u0275providers:[],null!=qe&&qe.initialNavigation?rl(qe):[],null!=qe&&qe.bindToComponentInputs?zo(8,[El,{provide:uo,useExisting:El}]).\u0275providers:[],null!=qe&&qe.enableViewTransitions?oa().\u0275providers:[],[{provide:Ld,useFactory:Ou},{provide:F.iLQ,multi:!0,useExisting:Ld}]]}}static forChild(Me){return{ngModule:Ce,providers:[{provide:_o,multi:!0,useValue:Me}]}}}return(me=Ce).\u0275fac=function(Me){return new(Me||me)(F.KVO(Ra,8))},me.\u0275mod=F.$C({type:me}),me.\u0275inj=F.G2t({}),Ce})();function Bm(me){return"guarded"}function rl(me){return["disabled"===me.initialNavigation?zo(3,[{provide:F.hnV,multi:!0,useFactory:()=>{const Ce=(0,F.WQX)(ki);return()=>{Ce.setUpLocationChangeListener()}}},{provide:Qr,useValue:2}]).\u0275providers:[],"enabledBlocking"===me.initialNavigation?zo(2,[{provide:Qr,useValue:0},{provide:F.hnV,multi:!0,deps:[F.zZn],useFactory:Ce=>{const $e=Ce.get(g.hj,Promise.resolve());return()=>$e.then(()=>new Promise(Me=>{const qe=Ce.get(ki),Pt=Ce.get(ci);Hn(qe,()=>{Me(!0)}),Ce.get(ot).afterPreactivation=()=>(Me(!0),Pt.closed?(0,be.of)(void 0):Pt),qe.initialNavigation()}))}}]).\u0275providers:[]]}const Ld=new F.nKC("")},3656:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{Yq:()=>mn,TS:()=>kt,sR:()=>Ut,el:()=>ei,Sb:()=>$n,QE:()=>N,CF:()=>bt,Rg:()=>Fn,p4:()=>R,jM:()=>pt,q9:()=>Ft,y8:()=>qt,Kb:()=>Kt,OD:()=>Ct,CE:()=>ne,pF:()=>Pe,fL:()=>ie,YV:()=>fr,er:()=>U,z3:()=>$});var F=Ge(467),j=Ge(9842),Rt=Ge(3953),rn=Ge(9858),l=Ge(177),be=Ge(5531),Z=Ge(4442);var H=Ge(1413),te=Ge(3726),Y=Ge(4412),we=Ge(4572),Se=Ge(7673),oe=Ge(1635),ge=Ge(5964),re=Ge(5558),Q=Ge(3669),fe=Ge(9974),De=Ge(4360);function le(Fe,We){return Fe===We}var z=Ge(4341);const ye=["tabsInner"];let Ct=(()=>{var Fe;class We{constructor(Ze,xt){(0,j.A)(this,"doc",void 0),(0,j.A)(this,"_readyPromise",void 0),(0,j.A)(this,"win",void 0),(0,j.A)(this,"backButton",new H.B),(0,j.A)(this,"keyboardDidShow",new H.B),(0,j.A)(this,"keyboardDidHide",new H.B),(0,j.A)(this,"pause",new H.B),(0,j.A)(this,"resume",new H.B),(0,j.A)(this,"resize",new H.B),this.doc=Ze,xt.run(()=>{var Zt;let En;this.win=Ze.defaultView,this.backButton.subscribeWithPriority=function(zn,or){return this.subscribe(ii=>ii.register(zn,Bi=>xt.run(()=>or(Bi))))},_t(this.pause,Ze,"pause",xt),_t(this.resume,Ze,"resume",xt),_t(this.backButton,Ze,"ionBackButton",xt),_t(this.resize,this.win,"resize",xt),_t(this.keyboardDidShow,this.win,"ionKeyboardDidShow",xt),_t(this.keyboardDidHide,this.win,"ionKeyboardDidHide",xt),this._readyPromise=new Promise(zn=>{En=zn}),null!==(Zt=this.win)&&void 0!==Zt&&Zt.cordova?Ze.addEventListener("deviceready",()=>{En("cordova")},{once:!0}):En("dom")})}is(Ze){return(0,be.a)(this.win,Ze)}platforms(){return(0,be.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(Ze){return zt(this.win.location.href,Ze)}isLandscape(){return!this.isPortrait()}isPortrait(){var Ze,xt;return null===(Ze=(xt=this.win).matchMedia)||void 0===Ze?void 0:Ze.call(xt,"(orientation: portrait)").matches}testUserAgent(Ze){const xt=this.win.navigator;return!!(null!=xt&&xt.userAgent&&xt.userAgent.indexOf(Ze)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.KVO(l.qQ),Rt.KVO(Rt.SKi))}),(0,j.A)(We,"\u0275prov",Rt.jDH({token:Fe,factory:Fe.\u0275fac,providedIn:"root"})),We})();const zt=(Fe,We)=>{We=We.replace(/[[\]\\]/g,"\\$&");const Ze=new RegExp("[\\?&]"+We+"=([^&#]*)").exec(Fe);return Ze?decodeURIComponent(Ze[1].replace(/\+/g," ")):null},_t=(Fe,We,at,Ze)=>{We&&We.addEventListener(at,xt=>{Ze.run(()=>{Fe.next(null!=xt?xt.detail:void 0)})})};let Ft=(()=>{var Fe;class We{constructor(Ze,xt,Zt,En){(0,j.A)(this,"location",void 0),(0,j.A)(this,"serializer",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"topOutlet",void 0),(0,j.A)(this,"direction",mt),(0,j.A)(this,"animated",Nt),(0,j.A)(this,"animationBuilder",void 0),(0,j.A)(this,"guessDirection","forward"),(0,j.A)(this,"guessAnimation",void 0),(0,j.A)(this,"lastNavId",-1),this.location=xt,this.serializer=Zt,this.router=En,En&&En.events.subscribe(zn=>{if(zn instanceof rn.Z){const or=zn.restoredState?zn.restoredState.navigationId:zn.id;this.guessDirection=this.guessAnimation=or<this.lastNavId?"back":"forward",this.lastNavId="forward"===this.guessDirection?zn.id:or}}),Ze.backButton.subscribeWithPriority(0,zn=>{this.pop(),zn()})}navigateForward(Ze,xt={}){return this.setDirection("forward",xt.animated,xt.animationDirection,xt.animation),this.navigate(Ze,xt)}navigateBack(Ze,xt={}){return this.setDirection("back",xt.animated,xt.animationDirection,xt.animation),this.navigate(Ze,xt)}navigateRoot(Ze,xt={}){return this.setDirection("root",xt.animated,xt.animationDirection,xt.animation),this.navigate(Ze,xt)}back(Ze={animated:!0,animationDirection:"back"}){return this.setDirection("back",Ze.animated,Ze.animationDirection,Ze.animation),this.location.back()}pop(){var Ze=this;return(0,F.A)(function*(){let xt=Ze.topOutlet;for(;xt;){if(yield xt.pop())return!0;xt=xt.parentOutlet}return!1})()}setDirection(Ze,xt,Zt,En){this.direction=Ze,this.animated=Wt(Ze,xt,Zt),this.animationBuilder=En}setTopOutlet(Ze){this.topOutlet=Ze}consumeTransition(){let xt,Ze="root";const Zt=this.animationBuilder;return"auto"===this.direction?(Ze=this.guessDirection,xt=this.guessAnimation):(xt=this.animated,Ze=this.direction),this.direction=mt,this.animated=Nt,this.animationBuilder=void 0,{direction:Ze,animation:xt,animationBuilder:Zt}}navigate(Ze,xt){if(Array.isArray(Ze))return this.router.navigate(Ze,xt);{const Zt=this.serializer.parse(Ze.toString());return void 0!==xt.queryParams&&(Zt.queryParams={...xt.queryParams}),void 0!==xt.fragment&&(Zt.fragment=xt.fragment),this.router.navigateByUrl(Zt,xt)}}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.KVO(Ct),Rt.KVO(l.aZ),Rt.KVO(rn.Sd),Rt.KVO(rn.Ix,8))}),(0,j.A)(We,"\u0275prov",Rt.jDH({token:Fe,factory:Fe.\u0275fac,providedIn:"root"})),We})();const Wt=(Fe,We,at)=>{if(!1!==We){if(void 0!==at)return at;if("forward"===Fe||"back"===Fe)return Fe;if("root"===Fe&&!0===We)return"forward"}},mt="auto",Nt=void 0;let kt=(()=>{var Fe;class We{get(Ze,xt){const Zt=Tt();return Zt?Zt.get(Ze,xt):null}getBoolean(Ze,xt){const Zt=Tt();return!!Zt&&Zt.getBoolean(Ze,xt)}getNumber(Ze,xt){const Zt=Tt();return Zt?Zt.getNumber(Ze,xt):0}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)}),(0,j.A)(We,"\u0275prov",Rt.jDH({token:Fe,factory:Fe.\u0275fac,providedIn:"root"})),We})();const Ut=new Rt.nKC("USERCONFIG"),Tt=()=>{if(typeof window<"u"){const Fe=window.Ionic;if(null!=Fe&&Fe.config)return Fe.config}return null};class qt{constructor(We={}){(0,j.A)(this,"data",void 0),this.data=We,console.warn("[Ionic Warning]: NavParams has been deprecated in favor of using Angular's input API. Developers should migrate to either the @Input decorator or the Signals-based input API.")}get(We){return this.data[We]}}let mn=(()=>{var Fe;class We{constructor(){(0,j.A)(this,"zone",(0,Rt.WQX)(Rt.SKi)),(0,j.A)(this,"applicationRef",(0,Rt.WQX)(Rt.o8S)),(0,j.A)(this,"config",(0,Rt.WQX)(Ut))}create(Ze,xt,Zt){var En;return new Zn(Ze,xt,this.applicationRef,this.zone,Zt,null!==(En=this.config.useSetInputAPI)&&void 0!==En&&En)}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)}),(0,j.A)(We,"\u0275prov",Rt.jDH({token:Fe,factory:Fe.\u0275fac})),We})();class Zn{constructor(We,at,Ze,xt,Zt,En){(0,j.A)(this,"environmentInjector",void 0),(0,j.A)(this,"injector",void 0),(0,j.A)(this,"applicationRef",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"elementReferenceKey",void 0),(0,j.A)(this,"enableSignalsSupport",void 0),(0,j.A)(this,"elRefMap",new WeakMap),(0,j.A)(this,"elEventsMap",new WeakMap),this.environmentInjector=We,this.injector=at,this.applicationRef=Ze,this.zone=xt,this.elementReferenceKey=Zt,this.enableSignalsSupport=En}attachViewToDom(We,at,Ze,xt){return this.zone.run(()=>new Promise(Zt=>{const En={...Ze};void 0!==this.elementReferenceKey&&(En[this.elementReferenceKey]=We),Zt(An(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,We,at,En,xt,this.elementReferenceKey,this.enableSignalsSupport))}))}removeViewFromDom(We,at){return this.zone.run(()=>new Promise(Ze=>{const xt=this.elRefMap.get(at);if(xt){xt.destroy(),this.elRefMap.delete(at);const Zt=this.elEventsMap.get(at);Zt&&(Zt(),this.elEventsMap.delete(at))}Ze()}))}}const An=(Fe,We,at,Ze,xt,Zt,En,zn,or,ii,Bi,Rs)=>{const Ps=Rt.zZn.create({providers:Bn(or),parent:at}),xi=(0,Rt.a0P)(zn,{environmentInjector:We,elementInjector:Ps}),ws=xi.instance,co=xi.location.nativeElement;if(or)if(Bi&&void 0!==ws[Bi]&&console.error(`[Ionic Error]: ${Bi} is a reserved property when using ${En.tagName.toLowerCase()}. Rename or remove the "${Bi}" property from ${zn.name}.`),!0===Rs&&void 0!==xi.setInput){const{modal:so,popover:ea,...So}=or;for(const ca in So)xi.setInput(ca,So[ca]);void 0!==so&&Object.assign(ws,{modal:so}),void 0!==ea&&Object.assign(ws,{popover:ea})}else Object.assign(ws,or);if(ii)for(const so of ii)co.classList.add(so);const Ls=Rn(Fe,ws,co);return En.appendChild(co),Ze.attachView(xi.hostView),xt.set(co,xi),Zt.set(co,Ls),co},Qn=[Z.L,Z.a,Z.b,Z.c,Z.d],Rn=(Fe,We,at)=>Fe.run(()=>{const Ze=Qn.filter(xt=>"function"==typeof We[xt]).map(xt=>{const Zt=En=>We[xt](En.detail);return at.addEventListener(xt,Zt),()=>at.removeEventListener(xt,Zt)});return()=>Ze.forEach(xt=>xt())}),Er=new Rt.nKC("NavParamsToken"),Bn=Fe=>[{provide:Er,useValue:Fe},{provide:qt,useFactory:ur,deps:[Er]}],ur=Fe=>new qt(Fe),vn=(Fe,We)=>{const at=Fe.prototype;We.forEach(Ze=>{Object.defineProperty(at,Ze,{get(){return this.el[Ze]},set(xt){this.z.runOutsideAngular(()=>this.el[Ze]=xt)}})})},er=(Fe,We)=>{const at=Fe.prototype;We.forEach(Ze=>{at[Ze]=function(){const xt=arguments;return this.z.runOutsideAngular(()=>this.el[Ze].apply(this.el,xt))}})},Pn=(Fe,We,at)=>{at.forEach(Ze=>Fe[Ze]=(0,te.R)(We,Ze))};function gt(Fe){return function(at){const{defineCustomElementFn:Ze,inputs:xt,methods:Zt}=Fe;return void 0!==Ze&&Ze(),xt&&vn(at,xt),Zt&&er(at,Zt),at}}const wt=["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","focusTrap","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],rt=["present","dismiss","onDidDismiss","onWillDismiss"];let bt=(()=>{var Fe;let We=((0,j.A)(Fe=class{constructor(Ze,xt,Zt){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=Zt,this.el=xt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,Ze.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,Ze.detectChanges()}),Pn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Rt.gRc),Rt.rXU(Rt.aKT),Rt.rXU(Rt.SKi))}),(0,j.A)(Fe,"\u0275dir",Rt.FsC({type:Fe,selectors:[["ion-popover"]],contentQueries:function(Ze,xt,Zt){if(1&Ze&&Rt.wni(Zt,Rt.C4Q,5),2&Ze){let En;Rt.mGM(En=Rt.lsd())&&(xt.template=En.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"}})),Fe);return We=(0,oe.Cg)([gt({inputs:wt,methods:rt})],We),We})();const gn=["animated","keepContentsMounted","backdropBreakpoint","backdropDismiss","breakpoints","canDismiss","cssClass","enterAnimation","event","focusTrap","handle","handleBehavior","initialBreakpoint","isOpen","keyboardClose","leaveAnimation","mode","presentingElement","showBackdrop","translucent","trigger"],On=["present","dismiss","onDidDismiss","onWillDismiss","setCurrentBreakpoint","getCurrentBreakpoint"];let $n=(()=>{var Fe;let We=((0,j.A)(Fe=class{constructor(Ze,xt,Zt){(0,j.A)(this,"z",void 0),(0,j.A)(this,"template",void 0),(0,j.A)(this,"isCmpOpen",!1),(0,j.A)(this,"el",void 0),this.z=Zt,this.el=xt.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,Ze.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,Ze.detectChanges()}),Pn(this,this.el,["ionModalDidPresent","ionModalWillPresent","ionModalWillDismiss","ionModalDidDismiss","ionBreakpointDidChange","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Rt.gRc),Rt.rXU(Rt.aKT),Rt.rXU(Rt.SKi))}),(0,j.A)(Fe,"\u0275dir",Rt.FsC({type:Fe,selectors:[["ion-modal"]],contentQueries:function(Ze,xt,Zt){if(1&Ze&&Rt.wni(Zt,Rt.C4Q,5),2&Ze){let En;Rt.mGM(En=Rt.lsd())&&(xt.template=En.first)}},inputs:{animated:"animated",keepContentsMounted:"keepContentsMounted",backdropBreakpoint:"backdropBreakpoint",backdropDismiss:"backdropDismiss",breakpoints:"breakpoints",canDismiss:"canDismiss",cssClass:"cssClass",enterAnimation:"enterAnimation",event:"event",focusTrap:"focusTrap",handle:"handle",handleBehavior:"handleBehavior",initialBreakpoint:"initialBreakpoint",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",presentingElement:"presentingElement",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger"}})),Fe);return We=(0,oe.Cg)([gt({inputs:gn,methods:On})],We),We})();const Cr=(Fe,We)=>((Fe=Fe.filter(at=>at.stackId!==We.stackId)).push(We),Fe),In=(Fe,We)=>{const at=Fe.createUrlTree(["."],{relativeTo:We});return Fe.serializeUrl(at)},cn=(Fe,We)=>!We||Fe.stackId!==We.stackId,Tn=(Fe,We)=>{if(!Fe)return;const at=sn(We);for(let Ze=0;Ze<at.length;Ze++){if(Ze>=Fe.length)return at[Ze];if(at[Ze]!==Fe[Ze])return}},sn=Fe=>Fe.split("/").map(We=>We.trim()).filter(We=>""!==We),_n=Fe=>{Fe&&(Fe.ref.destroy(),Fe.unlistenEvents())};class tr{constructor(We,at,Ze,xt,Zt,En){(0,j.A)(this,"containerEl",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"zone",void 0),(0,j.A)(this,"location",void 0),(0,j.A)(this,"views",[]),(0,j.A)(this,"runningTask",void 0),(0,j.A)(this,"skipTransition",!1),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"activeView",void 0),(0,j.A)(this,"nextId",0),this.containerEl=at,this.router=Ze,this.navCtrl=xt,this.zone=Zt,this.location=En,this.tabsPrefix=void 0!==We?sn(We):void 0}createView(We,at){var Ze;const xt=In(this.router,at),Zt=null==We||null===(Ze=We.location)||void 0===Ze?void 0:Ze.nativeElement,En=Rn(this.zone,We.instance,Zt);return{id:this.nextId++,stackId:Tn(this.tabsPrefix,xt),unlistenEvents:En,element:Zt,ref:We,url:xt}}getExistingView(We){const at=In(this.router,We),Ze=this.views.find(xt=>xt.url===at);return Ze&&Ze.ref.changeDetectorRef.reattach(),Ze}setActive(We){var at,Ze;const xt=this.navCtrl.consumeTransition();let{direction:Zt,animation:En,animationBuilder:zn}=xt;const or=this.activeView,ii=cn(We,or);ii&&(Zt="back",En=void 0);const Bi=this.views.slice();let Rs;const Ps=this.router;Ps.getCurrentNavigation?Rs=Ps.getCurrentNavigation():null!==(at=Ps.navigations)&&void 0!==at&&at.value&&(Rs=Ps.navigations.value),null!==(Ze=Rs)&&void 0!==Ze&&null!==(Ze=Ze.extras)&&void 0!==Ze&&Ze.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const xi=this.views.includes(We),ws=this.insertView(We,Zt);xi||We.ref.changeDetectorRef.detectChanges();const co=We.animationBuilder;return void 0===zn&&"back"===Zt&&!ii&&void 0!==co&&(zn=co),or&&(or.animationBuilder=zn),this.zone.runOutsideAngular(()=>this.wait(()=>(or&&or.ref.changeDetectorRef.detach(),We.ref.changeDetectorRef.reattach(),this.transition(We,or,En,this.canGoBack(1),!1,zn).then(()=>Xt(We,ws,Bi,this.location,this.zone)).then(()=>({enteringView:We,direction:Zt,animation:En,tabSwitch:ii})))))}canGoBack(We,at=this.getActiveStackId()){return this.getStack(at).length>We}pop(We,at=this.getActiveStackId()){return this.zone.run(()=>{const Ze=this.getStack(at);if(Ze.length<=We)return Promise.resolve(!1);const xt=Ze[Ze.length-We-1];let Zt=xt.url;const En=xt.savedData;if(En){var zn;const ii=En.get("primary");null!=ii&&null!==(zn=ii.route)&&void 0!==zn&&null!==(zn=zn._routerState)&&void 0!==zn&&zn.snapshot.url&&(Zt=ii.route._routerState.snapshot.url)}const{animationBuilder:or}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Zt,{...xt.savedExtras,animation:or}).then(()=>!0)})}startBackTransition(){const We=this.activeView;if(We){const at=this.getStack(We.stackId),Ze=at[at.length-2],xt=Ze.animationBuilder;return this.wait(()=>this.transition(Ze,We,"back",this.canGoBack(2),!0,xt))}return Promise.resolve()}endBackTransition(We){We?(this.skipTransition=!0,this.pop(1)):this.activeView&&hn(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(We){const at=this.getStack(We);return at.length>0?at[at.length-1]:void 0}getRootUrl(We){const at=this.getStack(We);return at.length>0?at[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(_n),this.activeView=void 0,this.views=[]}getStack(We){return this.views.filter(at=>at.stackId===We)}insertView(We,at){return this.activeView=We,this.views=((Fe,We,at)=>"root"===at?Cr(Fe,We):"forward"===at?((Fe,We)=>(Fe.indexOf(We)>=0?Fe=Fe.filter(Ze=>Ze.stackId!==We.stackId||Ze.id<=We.id):Fe.push(We),Fe))(Fe,We):((Fe,We)=>Fe.indexOf(We)>=0?Fe.filter(Ze=>Ze.stackId!==We.stackId||Ze.id<=We.id):Cr(Fe,We))(Fe,We))(this.views,We,at),this.views.slice()}transition(We,at,Ze,xt,Zt,En){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(at===We)return Promise.resolve(!1);const zn=We?We.element:void 0,or=at?at.element:void 0,ii=this.containerEl;return zn&&zn!==or&&(zn.classList.add("ion-page"),zn.classList.add("ion-page-invisible"),ii.commit)?ii.commit(zn,or,{duration:void 0===Ze?0:void 0,direction:Ze,showGoBack:xt,progressAnimation:Zt,animationBuilder:En}):Promise.resolve(!1)}wait(We){var at=this;return(0,F.A)(function*(){void 0!==at.runningTask&&(yield at.runningTask,at.runningTask=void 0);const Ze=at.runningTask=We();return Ze.finally(()=>at.runningTask=void 0),Ze})()}}const Xt=(Fe,We,at,Ze,xt)=>"function"==typeof requestAnimationFrame?new Promise(Zt=>{requestAnimationFrame(()=>{hn(Fe,We,at,Ze,xt),Zt()})}):Promise.resolve(),hn=(Fe,We,at,Ze,xt)=>{xt.run(()=>at.filter(Zt=>!We.includes(Zt)).forEach(_n)),We.forEach(Zt=>{const zn=Ze.path().split("?")[0].split("#")[0];if(Zt!==Fe&&Zt.url!==zn){const or=Zt.element;or.setAttribute("aria-hidden","true"),or.classList.add("ion-page-hidden"),Zt.ref.changeDetectorRef.detach()}})};let Fn=(()=>{var Fe;class We{get activatedComponentRef(){return this.activated}set animation(Ze){this.nativeEl.animation=Ze}set animated(Ze){this.nativeEl.animated=Ze}set swipeGesture(Ze){this._swipeGesture=Ze,this.nativeEl.swipeHandler=Ze?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:xt=>this.stackCtrl.endBackTransition(xt)}:void 0}constructor(Ze,xt,Zt,En,zn,or,ii,Bi){(0,j.A)(this,"parentOutlet",void 0),(0,j.A)(this,"nativeEl",void 0),(0,j.A)(this,"activatedView",null),(0,j.A)(this,"tabsPrefix",void 0),(0,j.A)(this,"_swipeGesture",void 0),(0,j.A)(this,"stackCtrl",void 0),(0,j.A)(this,"proxyMap",new WeakMap),(0,j.A)(this,"currentActivatedRoute$",new Y.t(null)),(0,j.A)(this,"activated",null),(0,j.A)(this,"_activatedRoute",null),(0,j.A)(this,"name",rn.Xk),(0,j.A)(this,"stackWillChange",new Rt.bkB),(0,j.A)(this,"stackDidChange",new Rt.bkB),(0,j.A)(this,"activateEvents",new Rt.bkB),(0,j.A)(this,"deactivateEvents",new Rt.bkB),(0,j.A)(this,"parentContexts",(0,Rt.WQX)(rn.Zp)),(0,j.A)(this,"location",(0,Rt.WQX)(Rt.c1b)),(0,j.A)(this,"environmentInjector",(0,Rt.WQX)(Rt.uvJ)),(0,j.A)(this,"inputBinder",(0,Rt.WQX)(Wn,{optional:!0})),(0,j.A)(this,"supportsBindingToComponentInputs",!0),(0,j.A)(this,"config",(0,Rt.WQX)(kt)),(0,j.A)(this,"navCtrl",(0,Rt.WQX)(Ft)),this.parentOutlet=Bi,this.nativeEl=En.nativeElement,this.name=Ze||rn.Xk,this.tabsPrefix="true"===xt?In(zn,ii):void 0,this.stackCtrl=new tr(this.tabsPrefix,this.nativeEl,zn,this.navCtrl,or,Zt),this.parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){var Ze;this.stackCtrl.destroy(),null===(Ze=this.inputBinder)||void 0===Ze||Ze.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const Ze=this.getContext();null!=Ze&&Ze.route&&this.activateWith(Ze.route,Ze.injector)}new Promise(Ze=>((Fe,We)=>{Fe.componentOnReady?Fe.componentOnReady().then(at=>We(at)):(Fe=>{"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Fe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Fe):setTimeout(Fe)})(()=>We(Fe))})(this.nativeEl,Ze)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(Ze,xt){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const xt=this.getContext();this.activatedView.savedData=new Map(xt.children.contexts);const Zt=this.activatedView.savedData.get("primary");if(Zt&&xt.route&&(Zt.route={...xt.route}),this.activatedView.savedExtras={},xt.route){const En=xt.route.snapshot;this.activatedView.savedExtras.queryParams=En.queryParams,this.activatedView.savedExtras.fragment=En.fragment}}const Ze=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(Ze)}}activateWith(Ze,xt){var Zt;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=Ze;let En,zn=this.stackCtrl.getExistingView(Ze);if(zn){En=this.activated=zn.ref;const Bi=zn.savedData;Bi&&(this.getContext().children.contexts=Bi),this.updateActivatedRouteProxy(En.instance,Ze)}else{var or;const Bi=Ze._futureSnapshot,Rs=this.parentContexts.getOrCreateContext(this.name).children,Ps=new Y.t(null),xi=this.createActivatedRouteProxy(Ps,Ze),ws=new Cn(xi,Rs,this.location.injector),co=null!==(or=Bi.routeConfig.component)&&void 0!==or?or:Bi.component;En=this.activated=this.outletContent.createComponent(co,{index:this.outletContent.length,injector:ws,environmentInjector:null!=xt?xt:this.environmentInjector}),Ps.next(En.instance),zn=this.stackCtrl.createView(this.activated,Ze),this.proxyMap.set(En.instance,xi),this.currentActivatedRoute$.next({component:En.instance,activatedRoute:Ze})}null===(Zt=this.inputBinder)||void 0===Zt||Zt.bindActivatedRouteToOutletComponent(this),this.activatedView=zn,this.navCtrl.setTopOutlet(this);const ii=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:zn,tabSwitch:cn(zn,ii)}),this.stackCtrl.setActive(zn).then(Bi=>{this.activateEvents.emit(En.instance),this.stackDidChange.emit(Bi)})}canGoBack(Ze=1,xt){return this.stackCtrl.canGoBack(Ze,xt)}pop(Ze=1,xt){return this.stackCtrl.pop(Ze,xt)}getLastUrl(Ze){const xt=this.stackCtrl.getLastUrl(Ze);return xt?xt.url:void 0}getLastRouteView(Ze){return this.stackCtrl.getLastUrl(Ze)}getRootView(Ze){return this.stackCtrl.getRootUrl(Ze)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(Ze,xt){const Zt=new rn.nX;return Zt._futureSnapshot=xt._futureSnapshot,Zt._routerState=xt._routerState,Zt.snapshot=xt.snapshot,Zt.outlet=xt.outlet,Zt.component=xt.component,Zt._paramMap=this.proxyObservable(Ze,"paramMap"),Zt._queryParamMap=this.proxyObservable(Ze,"queryParamMap"),Zt.url=this.proxyObservable(Ze,"url"),Zt.params=this.proxyObservable(Ze,"params"),Zt.queryParams=this.proxyObservable(Ze,"queryParams"),Zt.fragment=this.proxyObservable(Ze,"fragment"),Zt.data=this.proxyObservable(Ze,"data"),Zt}proxyObservable(Ze,xt){return Ze.pipe((0,ge.p)(Zt=>!!Zt),(0,re.n)(Zt=>this.currentActivatedRoute$.pipe((0,ge.p)(En=>null!==En&&En.component===Zt),(0,re.n)(En=>En&&En.activatedRoute[xt]),function it(Fe,We=Q.D){return Fe=null!=Fe?Fe:le,(0,fe.N)((at,Ze)=>{let xt,Zt=!0;at.subscribe((0,De._)(Ze,En=>{const zn=We(En);(Zt||!Fe(xt,zn))&&(Zt=!1,xt=zn,Ze.next(En))}))})}())))}updateActivatedRouteProxy(Ze,xt){const Zt=this.proxyMap.get(Ze);if(!Zt)throw new Error("Could not find activated route proxy for view");Zt._futureSnapshot=xt._futureSnapshot,Zt._routerState=xt._routerState,Zt.snapshot=xt.snapshot,Zt.outlet=xt.outlet,Zt.component=xt.component,this.currentActivatedRoute$.next({component:Ze,activatedRoute:xt})}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.kS0("name"),Rt.kS0("tabs"),Rt.rXU(l.aZ),Rt.rXU(Rt.aKT),Rt.rXU(rn.Ix),Rt.rXU(Rt.SKi),Rt.rXU(rn.nX),Rt.rXU(Fe,12))}),(0,j.A)(We,"\u0275dir",Rt.FsC({type:Fe,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]})),We})();class Cn{constructor(We,at,Ze){(0,j.A)(this,"route",void 0),(0,j.A)(this,"childContexts",void 0),(0,j.A)(this,"parent",void 0),this.route=We,this.childContexts=at,this.parent=Ze}get(We,at){return We===rn.nX?this.route:We===rn.Zp?this.childContexts:this.parent.get(We,at)}}const Wn=new Rt.nKC("");let yr=(()=>{var Fe;class We{constructor(){(0,j.A)(this,"outletDataSubscriptions",new Map)}bindActivatedRouteToOutletComponent(Ze){this.unsubscribeFromRouteData(Ze),this.subscribeToRouteData(Ze)}unsubscribeFromRouteData(Ze){var xt;null===(xt=this.outletDataSubscriptions.get(Ze))||void 0===xt||xt.unsubscribe(),this.outletDataSubscriptions.delete(Ze)}subscribeToRouteData(Ze){const{activatedRoute:xt}=Ze,Zt=(0,we.z)([xt.queryParams,xt.params,xt.data]).pipe((0,re.n)(([En,zn,or],ii)=>(or={...En,...zn,...or},0===ii?(0,Se.of)(or):Promise.resolve(or)))).subscribe(En=>{if(!Ze.isActivated||!Ze.activatedComponentRef||Ze.activatedRoute!==xt||null===xt.component)return void this.unsubscribeFromRouteData(Ze);const zn=(0,Rt.HJs)(xt.component);if(zn)for(const{templateName:or}of zn.inputs)Ze.activatedComponentRef.setInput(or,En[or]);else this.unsubscribeFromRouteData(Ze)});this.outletDataSubscriptions.set(Ze,Zt)}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)}),(0,j.A)(We,"\u0275prov",Rt.jDH({token:Fe,factory:Fe.\u0275fac})),We})();const fr=()=>({provide:Wn,useFactory:Ur,deps:[rn.Ix]});function Ur(Fe){return null!=Fe&&Fe.componentInputBindingEnabled?new yr:null}const vr=["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"];let ei=(()=>{var Fe;let We=((0,j.A)(Fe=class{constructor(Ze,xt,Zt,En,zn,or){(0,j.A)(this,"routerOutlet",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"config",void 0),(0,j.A)(this,"r",void 0),(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.routerOutlet=Ze,this.navCtrl=xt,this.config=Zt,this.r=En,this.z=zn,or.detach(),this.el=this.r.nativeElement}onClick(Ze){var xt;const Zt=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(xt=this.routerOutlet)&&void 0!==xt&&xt.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),Ze.preventDefault()):null!=Zt&&(this.navCtrl.navigateBack(Zt,{animation:this.routerAnimation}),Ze.preventDefault())}},"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Fn,8),Rt.rXU(Ft),Rt.rXU(kt),Rt.rXU(Rt.aKT),Rt.rXU(Rt.SKi),Rt.rXU(Rt.gRc))}),(0,j.A)(Fe,"\u0275dir",Rt.FsC({type:Fe,hostBindings:function(Ze,xt){1&Ze&&Rt.bIt("click",function(En){return xt.onClick(En)})},inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"}})),Fe);return We=(0,oe.Cg)([gt({inputs:vr})],We),We})(),ne=(()=>{var Fe;class We{constructor(Ze,xt,Zt,En,zn){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=Ze,this.navCtrl=xt,this.elementRef=Zt,this.router=En,this.routerLink=zn}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var Ze;if(null!==(Ze=this.routerLink)&&void 0!==Ze&&Ze.urlTree){const xt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=xt}}onClick(Ze){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),Ze.preventDefault()}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(l.hb),Rt.rXU(Ft),Rt.rXU(Rt.aKT),Rt.rXU(rn.Ix),Rt.rXU(rn.Wk,8))}),(0,j.A)(We,"\u0275dir",Rt.FsC({type:Fe,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(Ze,xt){1&Ze&&Rt.bIt("click",function(En){return xt.onClick(En)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Rt.OA$]})),We})(),Pe=(()=>{var Fe;class We{constructor(Ze,xt,Zt,En,zn){(0,j.A)(this,"locationStrategy",void 0),(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"router",void 0),(0,j.A)(this,"routerLink",void 0),(0,j.A)(this,"routerDirection","forward"),(0,j.A)(this,"routerAnimation",void 0),this.locationStrategy=Ze,this.navCtrl=xt,this.elementRef=Zt,this.router=En,this.routerLink=zn}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var Ze;if(null!==(Ze=this.routerLink)&&void 0!==Ze&&Ze.urlTree){const xt=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=xt}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(l.hb),Rt.rXU(Ft),Rt.rXU(Rt.aKT),Rt.rXU(rn.Ix),Rt.rXU(rn.Wk,8))}),(0,j.A)(We,"\u0275dir",Rt.FsC({type:Fe,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(Ze,xt){1&Ze&&Rt.bIt("click",function(){return xt.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[Rt.OA$]})),We})();const Qe=["animated","animation","root","rootParams","swipeGesture"],T=["push","insert","insertPages","pop","popTo","popToRoot","removeIndex","setRoot","setPages","getActive","getByIndex","canGoBack","getPrevious"];let N=(()=>{var Fe;let We=((0,j.A)(Fe=class{constructor(Ze,xt,Zt,En,zn,or){(0,j.A)(this,"z",void 0),(0,j.A)(this,"el",void 0),this.z=zn,or.detach(),this.el=Ze.nativeElement,Ze.nativeElement.delegate=En.create(xt,Zt),Pn(this,this.el,["ionNavDidChange","ionNavWillChange"])}},"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Rt.aKT),Rt.rXU(Rt.uvJ),Rt.rXU(Rt.zZn),Rt.rXU(mn),Rt.rXU(Rt.SKi),Rt.rXU(Rt.gRc))}),(0,j.A)(Fe,"\u0275dir",Rt.FsC({type:Fe,inputs:{animated:"animated",animation:"animation",root:"root",rootParams:"rootParams",swipeGesture:"swipeGesture"}})),Fe);return We=(0,oe.Cg)([gt({inputs:Qe,methods:T})],We),We})(),R=(()=>{var Fe;class We{constructor(Ze){(0,j.A)(this,"navCtrl",void 0),(0,j.A)(this,"tabsInner",void 0),(0,j.A)(this,"ionTabsWillChange",new Rt.bkB),(0,j.A)(this,"ionTabsDidChange",new Rt.bkB),(0,j.A)(this,"tabBarSlot","bottom"),this.navCtrl=Ze}ngAfterContentInit(){this.detectSlotChanges()}ngAfterContentChecked(){this.detectSlotChanges()}onStackWillChange({enteringView:Ze,tabSwitch:xt}){const Zt=Ze.stackId;xt&&void 0!==Zt&&this.ionTabsWillChange.emit({tab:Zt})}onStackDidChange({enteringView:Ze,tabSwitch:xt}){const Zt=Ze.stackId;xt&&void 0!==Zt&&(this.tabBar&&(this.tabBar.selectedTab=Zt),this.ionTabsDidChange.emit({tab:Zt}))}select(Ze){const xt="string"==typeof Ze,Zt=xt?Ze:Ze.detail.tab,En=this.outlet.getActiveStackId()===Zt,zn=`${this.outlet.tabsPrefix}/${Zt}`;if(xt||Ze.stopPropagation(),En){const or=this.outlet.getActiveStackId(),ii=this.outlet.getLastRouteView(or);if((null==ii?void 0:ii.url)===zn)return;const Bi=this.outlet.getRootView(Zt);return this.navCtrl.navigateRoot(zn,{...Bi&&zn===Bi.url&&Bi.savedExtras,animated:!0,animationDirection:"back"})}{const or=this.outlet.getLastRouteView(Zt);return this.navCtrl.navigateRoot((null==or?void 0:or.url)||zn,{...null==or?void 0:or.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}detectSlotChanges(){this.tabBars.forEach(Ze=>{const xt=Ze.el.getAttribute("slot");xt!==this.tabBarSlot&&(this.tabBarSlot=xt,this.relocateTabBar())})}relocateTabBar(){const Ze=this.tabBar.el;"top"===this.tabBarSlot?this.tabsInner.nativeElement.before(Ze):this.tabsInner.nativeElement.after(Ze)}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Ft))}),(0,j.A)(We,"\u0275dir",Rt.FsC({type:Fe,selectors:[["ion-tabs"]],viewQuery:function(Ze,xt){if(1&Ze&&Rt.GBs(ye,7,Rt.aKT),2&Ze){let Zt;Rt.mGM(Zt=Rt.lsd())&&(xt.tabsInner=Zt.first)}},hostBindings:function(Ze,xt){1&Ze&&Rt.bIt("ionTabButtonClick",function(En){return xt.select(En)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"}})),We})();const U=Fe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Fe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Fe):setTimeout(Fe);let ie=(()=>{var Fe;class We{constructor(Ze,xt){(0,j.A)(this,"injector",void 0),(0,j.A)(this,"elementRef",void 0),(0,j.A)(this,"onChange",()=>{}),(0,j.A)(this,"onTouched",()=>{}),(0,j.A)(this,"lastValue",void 0),(0,j.A)(this,"statusChanges",void 0),this.injector=Ze,this.elementRef=xt}writeValue(Ze){this.elementRef.nativeElement.value=this.lastValue=Ze,$(this.elementRef)}handleValueChange(Ze,xt){Ze===this.elementRef.nativeElement&&(xt!==this.lastValue&&(this.lastValue=xt,this.onChange(xt)),$(this.elementRef))}_handleBlurEvent(Ze){Ze===this.elementRef.nativeElement&&(this.onTouched(),$(this.elementRef))}registerOnChange(Ze){this.onChange=Ze}registerOnTouched(Ze){this.onTouched=Ze}setDisabledState(Ze){this.elementRef.nativeElement.disabled=Ze}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let Ze;try{Ze=this.injector.get(z.vO)}catch{}if(!Ze)return;Ze.statusChanges&&(this.statusChanges=Ze.statusChanges.subscribe(()=>$(this.elementRef)));const xt=Ze.control;xt&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(En=>{if(typeof xt[En]<"u"){const zn=xt[En].bind(xt);xt[En]=(...or)=>{zn(...or),$(this.elementRef)}}})}}return Fe=We,(0,j.A)(We,"\u0275fac",function(Ze){return new(Ze||Fe)(Rt.rXU(Rt.zZn),Rt.rXU(Rt.aKT))}),(0,j.A)(We,"\u0275dir",Rt.FsC({type:Fe,hostBindings:function(Ze,xt){1&Ze&&Rt.bIt("ionBlur",function(En){return xt._handleBlurEvent(En.target)})}})),We})();const $=Fe=>{U(()=>{const We=Fe.nativeElement,at=null!=We.value&&We.value.toString().length>0,Ze=de(We);Ae(We,Ze);const xt=We.closest("ion-item");xt&&Ae(xt,at?[...Ze,"item-has-value"]:Ze)})},de=Fe=>{const We=Fe.classList,at=[];for(let Ze=0;Ze<We.length;Ze++){const xt=We.item(Ze);null!==xt&&tt(xt,"ng-")&&at.push(`ion-${xt.substring(3)}`)}return at},Ae=(Fe,We)=>{const at=Fe.classList;at.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),at.add(...We)},tt=(Fe,We)=>Fe.substring(0,We.length)===We;class pt{shouldDetach(We){return!1}shouldAttach(We){return!1}store(We,at){}retrieve(We){return null}shouldReuseRoute(We,at){if(We.routeConfig!==at.routeConfig)return!1;const Ze=We.params,xt=at.params,Zt=Object.keys(Ze),En=Object.keys(xt);if(Zt.length!==En.length)return!1;for(const zn of Zt)if(xt[zn]!==Ze[zn])return!1;return!0}}class Kt{constructor(We){(0,j.A)(this,"ctrl",void 0),this.ctrl=We}create(We){return this.ctrl.create(We||{})}dismiss(We,at,Ze){return this.ctrl.dismiss(We,at,Ze)}getTop(){return this.ctrl.getTop()}}},5374:(Ir,Un,Ge)=>{"use strict";Ge.d(Un,{hG:()=>co,Hx:()=>Ls,hB:()=>L,xk:()=>we,YH:()=>Se,Zy:()=>ge,U1:()=>re,mC:()=>Q,el:()=>Zt,Jm:()=>z,QW:()=>ye,b_:()=>Ue,I9:()=>Je,ME:()=>vt,HW:()=>Ct,tN:()=>zt,eY:()=>_t,ZB:()=>Ft,hU:()=>Wt,W9:()=>mt,A9:()=>Nt,M0:()=>mn,lO:()=>Zn,eU:()=>An,iq:()=>Qn,$w:()=>ur,uz:()=>er,Dg:()=>Pn,he:()=>gn,nf:()=>On,AF:()=>$n,jL:()=>Ps,T6:()=>ws,Sb:()=>ii,CF:()=>Bi,KO:()=>hn,f0:()=>Fn,Ob:()=>Cn,Rg:()=>Ze,ln:()=>ei,S1:()=>ne,Nm:()=>T,Ip:()=>N,Jq:()=>$,qW:()=>de,p4:()=>xt,BC:()=>Kt,BY:()=>We,ai:()=>at,bv:()=>Va,Xi:()=>So,W3:()=>ta,su:()=>q,Je:()=>J,Gw:()=>G});var F=Ge(9842),j=Ge(3953),Rt=Ge(4341),rn=Ge(3656),l=Ge(1635),be=Ge(3726),Z=Ge(177),M=Ge(9858),C=Ge(617),w=Ge(467),I=Ge(8393);const d=Ge(4921).i,f=function(){var Ne=(0,w.A)(function*(yt,Bt){if(!(typeof window>"u"))return yield d(),(0,I.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]],{"type":["typeChanged"],"disabled":["disabledChanged"],"side":["sideChanged"],"swipeGesture":["swipeGestureChanged"]}],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-input-password-toggle",[[33,"ion-input-password-toggle",{"color":[513],"showIcon":[1,"show-icon"],"hideIcon":[1,"hide-icon"],"type":[1025]},null,{"type":["onTypeChange"]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]},null,{"activated":["activatedChanged"]}],[1,"ion-fab-list",{"activated":[4],"side":[1]},null,{"activated":["activatedChanged"]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"positionAnchor":[1,"position-anchor"],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"swipeGesture":[1,"swipe-gesture"],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"swipeGesture":["swipeGestureChanged"],"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]},null,{"value":["valueChanged"]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]],{"value":["valueChanged"],"disabled":["disabledChanged"],"readonly":["readonlyChanged"]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]},null,{"threshold":["thresholdChanged"],"disabled":["disabledChanged"]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]},null,{"disabled":["disabledChanged"]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]},null,{"value":["valueChanged"]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]],{"color":["colorChanged"],"swipeGesture":["swipeGestureChanged"],"value":["valueChanged"],"disabled":["disabledChanged"]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]},null,{"selectedTab":["selectedTabChanged"]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearInputIcon":[1,"clear-input-icon"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[516],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[516],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"type":["onTypeChange"],"value":["valueChanged"]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]},null,{"lang":["onLangChanged"],"dir":["onDirChanged"],"debounce":["debounceChanged"],"value":["valueChanged"],"showCancelButton":["showCancelButtonChanged"]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"activated":[32]},null,{"disabled":["disabledChanged"]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64],"getLength":[64]},null,{"swipeGesture":["swipeGestureChanged"],"root":["rootChanged"]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]},null,{"debounce":["debounceChanged"],"value":["valueChanged"]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]],{"maxItems":["maxItemsChanged"],"itemsBeforeCollapse":["maxItemsChanged"],"itemsAfterCollapse":["maxItemsChanged"]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"focusTrap":[4,"focus-trap"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]},null,{"url":["onUpdate"],"component":["onUpdate"],"componentProps":["onComponentProps"]}],[0,"ion-route-redirect",{"from":[1],"to":[1]},null,{"from":["propDidChange"],"to":["propDidChange"]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]},null,{"active":["changeActive"]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]},null,{"src":["srcChanged"]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]},null,{"debounce":["debounceChanged"],"min":["minChanged"],"max":["maxChanged"],"activeBarStart":["activeBarStartChanged"],"disabled":["disabledChanged"],"value":["valueChanged"]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32],"isVisible":[64]},null,{"visible":["visibleChanged"],"disabled":["updateState"],"when":["updateState"]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]},null,{"disabled":["styleChanged"],"isExpanded":["styleChanged"],"placeholder":["styleChanged"],"value":["styleChanged"]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker",[[33,"ion-picker",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-picker-column",[[1,"ion-picker-column",{"disabled":[4],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"ariaLabel":[32],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64],"setFocus":[64]},null,{"aria-label":["ariaLabelChanged"],"value":["valueChange"]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"formatOptions":[16],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"forceRenderDate":[32],"confirm":[64],"reset":[64],"cancel":[64]},null,{"formatOptions":["formatOptionsChanged"],"disabled":["disabledChanged"],"min":["minChanged"],"max":["maxChanged"],"presentation":["presentationChanged"],"yearValues":["yearValuesChanged"],"monthValues":["monthValuesChanged"],"dayValues":["dayValuesChanged"],"hourValues":["hourValuesChanged"],"minuteValues":["minuteValuesChanged"],"value":["valueChanged"]}],[34,"ion-picker-legacy",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}],[32,"ion-picker-legacy-column",{"col":[16]},null,{"col":["colChanged"]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]},null,{"value":["valueChanged"]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"compareWith":[1,"compare-with"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]],{"value":["valueChanged"]}]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1],"isCircle":[32]},null,{"disabled":["disabledChanged"]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]},null,{"name":["loadIcon"],"src":["loadIcon"],"icon":["loadIcon"],"ios":["loadIcon"],"md":["loadIcon"]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]],{"isOpen":["onIsOpenChange"],"trigger":["triggerChanged"],"buttons":["buttonsChanged"],"inputs":["inputsChanged"]}]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"fixedSlotPlacement":[1,"fixed-slot-placement"],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]},null,{"swipeHandler":["swipeHandlerChanged"]}],[33,"ion-title",{"color":[513],"size":[1]},null,{"size":["sizeChanged"]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[38,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-option",[[33,"ion-picker-column-option",{"disabled":[4],"value":[8],"color":[513],"ariaLabel":[32]},null,{"aria-label":["onAriaLabelChange"]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"focusTrap":[4,"focus-trap"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]},null,{"trigger":["onTriggerChange"],"triggerAction":["onTriggerChange"],"isOpen":["onIsOpenChange"]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"alignment":[1]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[33,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[516],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]],{"button":["buttonChanged"]}],[38,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]},null,{"color":["colorChanged"],"position":["positionChanged"]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),Bt)});return function(Bt,He){return Ne.apply(this,arguments)}}(),h=["*"],p=["outletContent"],m=["outlet"],g=[[["","slot","top"]],"*"],x=["[slot=top]","*"];function E(Ne,yt){if(1&Ne&&(j.j41(0,"div",1),j.eu8(1,2),j.k0s()),2&Ne){const Bt=j.XpG();j.R7$(),j.Y8G("ngTemplateOutlet",Bt.template)}}function S(Ne,yt){if(1&Ne&&j.eu8(0,1),2&Ne){const Bt=j.XpG();j.Y8G("ngTemplateOutlet",Bt.template)}}let L=(()=>{var Ne;class yt extends rn.fL{constructor(He,Ht){super(He,Ht)}writeValue(He){this.elementRef.nativeElement.checked=this.lastValue=He,(0,rn.z3)(this.elementRef)}_handleIonChange(He){this.handleValueChange(He,He.checked)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(He,Ht){1&He&&j.bIt("ionChange",function(fs){return Ht._handleIonChange(fs.target)})},features:[j.Jv_([{provide:Rt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),yt})(),q=(()=>{var Ne;class yt extends rn.fL{constructor(He,Ht){super(He,Ht),(0,F.A)(this,"el",void 0),this.el=Ht}handleInputEvent(He){this.handleValueChange(He,He.value)}registerOnChange(He){super.registerOnChange("ION-INPUT"===this.el.nativeElement.tagName?Ht=>{He(""===Ht?null:parseFloat(Ht))}:He)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number"],["ion-range"]],hostBindings:function(He,Ht){1&He&&j.bIt("ionInput",function(fs){return Ht.handleInputEvent(fs.target)})},features:[j.Jv_([{provide:Rt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),yt})(),J=(()=>{var Ne;class yt extends rn.fL{constructor(He,Ht){super(He,Ht)}_handleChangeEvent(He){this.handleValueChange(He,He.value)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(He,Ht){1&He&&j.bIt("ionChange",function(fs){return Ht._handleChangeEvent(fs.target)})},features:[j.Jv_([{provide:Rt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),yt})(),G=(()=>{var Ne;class yt extends rn.fL{constructor(He,Ht){super(He,Ht)}_handleInputEvent(He){this.handleValueChange(He,He.value)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.zZn),j.rXU(j.aKT))}),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(He,Ht){1&He&&j.bIt("ionInput",function(fs){return Ht._handleInputEvent(fs.target)})},features:[j.Jv_([{provide:Rt.kq,useExisting:Ne,multi:!0}]),j.Vt3]})),yt})();const V=(Ne,yt)=>{const Bt=Ne.prototype;yt.forEach(He=>{Object.defineProperty(Bt,He,{get(){return this.el[He]},set(Ht){this.z.runOutsideAngular(()=>this.el[He]=Ht)},configurable:!0})})},K=(Ne,yt)=>{const Bt=Ne.prototype;yt.forEach(He=>{Bt[He]=function(){const Ht=arguments;return this.z.runOutsideAngular(()=>this.el[He].apply(this.el,Ht))}})},H=(Ne,yt,Bt)=>{Bt.forEach(He=>Ne[He]=(0,be.R)(yt,He))};function Y(Ne){return function(Bt){const{defineCustomElementFn:He,inputs:Ht,methods:kn}=Ne;return void 0!==He&&He(),Ht&&V(Bt,Ht),kn&&K(Bt,kn),Bt}}let we=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-accordion"]],inputs:{disabled:"disabled",mode:"mode",readonly:"readonly",toggleIcon:"toggleIcon",toggleIconSlot:"toggleIconSlot",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["disabled","mode","readonly","toggleIcon","toggleIconSlot","value"]})],yt),yt})(),Se=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-accordion-group"]],inputs:{animated:"animated",disabled:"disabled",expand:"expand",mode:"mode",multiple:"multiple",readonly:"readonly",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["animated","disabled","expand","mode","multiple","readonly","value"]})],yt),yt})(),ge=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionAlertDidPresent","ionAlertWillPresent","ionAlertWillDismiss","ionAlertDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-alert"]],inputs:{animated:"animated",backdropDismiss:"backdropDismiss",buttons:"buttons",cssClass:"cssClass",enterAnimation:"enterAnimation",header:"header",htmlAttributes:"htmlAttributes",inputs:"inputs",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",message:"message",mode:"mode",subHeader:"subHeader",translucent:"translucent",trigger:"trigger"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["animated","backdropDismiss","buttons","cssClass","enterAnimation","header","htmlAttributes","inputs","isOpen","keyboardClose","leaveAnimation","message","mode","subHeader","translucent","trigger"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],yt),yt})(),re=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-app"]],ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({})],yt),yt})(),Q=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-avatar"]],ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({})],yt),yt})(),z=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],yt),yt})(),ye=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["collapse"]})],yt),yt})(),Ue=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],yt),yt})(),Je=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["mode"]})],yt),yt})(),vt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode","translucent"]})],yt),yt})(),Ct=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode"]})],yt),yt})(),zt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode"]})],yt),yt})(),_t=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-checkbox"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["alignment","checked","color","disabled","indeterminate","justify","labelPlacement","mode","name","value"]})],yt),yt})(),Ft=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","disabled","mode","outline"]})],yt),yt})(),Wt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],yt),yt})(),mt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-content"]],inputs:{color:"color",fixedSlotPlacement:"fixedSlotPlacement",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","fixedSlotPlacement","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],yt),yt})(),Nt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionCancel","ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-datetime"]],inputs:{cancelText:"cancelText",clearText:"clearText",color:"color",dayValues:"dayValues",disabled:"disabled",doneText:"doneText",firstDayOfWeek:"firstDayOfWeek",formatOptions:"formatOptions",highlightedDates:"highlightedDates",hourCycle:"hourCycle",hourValues:"hourValues",isDateEnabled:"isDateEnabled",locale:"locale",max:"max",min:"min",minuteValues:"minuteValues",mode:"mode",monthValues:"monthValues",multiple:"multiple",name:"name",preferWheel:"preferWheel",presentation:"presentation",readonly:"readonly",showClearButton:"showClearButton",showDefaultButtons:"showDefaultButtons",showDefaultTimeLabel:"showDefaultTimeLabel",showDefaultTitle:"showDefaultTitle",size:"size",titleSelectedDatesFormatter:"titleSelectedDatesFormatter",value:"value",yearValues:"yearValues"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["cancelText","clearText","color","dayValues","disabled","doneText","firstDayOfWeek","formatOptions","highlightedDates","hourCycle","hourValues","isDateEnabled","locale","max","min","minuteValues","mode","monthValues","multiple","name","preferWheel","presentation","readonly","showClearButton","showDefaultButtons","showDefaultTimeLabel","showDefaultTitle","size","titleSelectedDatesFormatter","value","yearValues"],methods:["confirm","reset","cancel"]})],yt),yt})(),mn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["collapse","mode","translucent"]})],yt),yt})(),Zn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["fixed"]})],yt),yt})(),An=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["collapse","mode","translucent"]})],yt),yt})(),Qn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],yt),yt})(),ur=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-input"]],inputs:{autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearInputIcon:"clearInputIcon",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearInputIcon","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],yt),yt})(),er=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],yt),yt})(),Pn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-item-divider"]],inputs:{color:"color",mode:"mode",sticky:"sticky"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode","sticky"]})],yt),yt})(),gn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode","position"]})],yt),yt})(),On=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],yt),yt})(),$n=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-list-header"]],inputs:{color:"color",lines:"lines",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","lines","mode"]})],yt),yt})(),hn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-radio"]],inputs:{alignment:"alignment",color:"color",disabled:"disabled",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["alignment","color","disabled","justify","labelPlacement","mode","name","value"]})],yt),yt})(),Fn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-radio-group"]],inputs:{allowEmptySelection:"allowEmptySelection",compareWith:"compareWith",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["allowEmptySelection","compareWith","name","value"]})],yt),yt})(),Cn=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange","ionInput","ionFocus","ionBlur","ionKnobMoveStart","ionKnobMoveEnd"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-range"]],inputs:{activeBarStart:"activeBarStart",color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",label:"label",labelPlacement:"labelPlacement",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",pinFormatter:"pinFormatter",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["activeBarStart","color","debounce","disabled","dualKnobs","label","labelPlacement","max","min","mode","name","pin","pinFormatter","snaps","step","ticks","value"]})],yt),yt})(),ei=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-row"]],ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({})],yt),yt})(),ne=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["animated","autocapitalize","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],yt),yt})(),T=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",color:"color",compareWith:"compareWith",disabled:"disabled",expandedIcon:"expandedIcon",fill:"fill",interface:"interface",interfaceOptions:"interfaceOptions",justify:"justify",label:"label",labelPlacement:"labelPlacement",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",shape:"shape",toggleIcon:"toggleIcon",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["cancelText","color","compareWith","disabled","expandedIcon","fill","interface","interfaceOptions","justify","label","labelPlacement","mode","multiple","name","okText","placeholder","selectedText","shape","toggleIcon","value"],methods:["open"]})],yt),yt})(),N=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["disabled","value"]})],yt),yt})(),$=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode","selectedTab","translucent"]})],yt),yt})(),de=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],yt),yt})(),Kt=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","size"]})],yt),yt})(),We=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement,H(this,this.el,["ionChange","ionFocus","ionBlur"])}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-toggle"]],inputs:{alignment:"alignment",checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",justify:"justify",labelPlacement:"labelPlacement",mode:"mode",name:"name",value:"value"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["alignment","checked","color","disabled","enableOnOffLabels","justify","labelPlacement","mode","name","value"]})],yt),yt})(),at=(()=>{var Ne;let yt=((0,F.A)(Ne=class{constructor(He,Ht,kn){(0,F.A)(this,"z",void 0),(0,F.A)(this,"el",void 0),this.z=kn,He.detach(),this.el=Ht.nativeElement}},"\u0275fac",function(He){return new(He||Ne)(j.rXU(j.gRc),j.rXU(j.aKT),j.rXU(j.SKi))}),(0,F.A)(Ne,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),Ne);return yt=(0,l.Cg)([Y({inputs:["color","mode"]})],yt),yt})(),Ze=(()=>{var Ne;class yt extends rn.Rg{constructor(He,Ht,kn,fs,qs,na,Ga,Ma){super(He,Ht,kn,fs,qs,na,Ga,Ma),(0,F.A)(this,"parentOutlet",void 0),(0,F.A)(this,"outletContent",void 0),this.parentOutlet=Ma}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.kS0("name"),j.kS0("tabs"),j.rXU(Z.aZ),j.rXU(j.aKT),j.rXU(M.Ix),j.rXU(j.SKi),j.rXU(M.nX),j.rXU(Ne,12))}),(0,F.A)(yt,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-router-outlet"]],viewQuery:function(He,Ht){if(1&He&&j.GBs(p,7,j.c1b),2&He){let kn;j.mGM(kn=j.lsd())&&(Ht.outletContent=kn.first)}},features:[j.Vt3],ngContentSelectors:h,decls:3,vars:0,consts:[["outletContent",""]],template:function(He,Ht){1&He&&(j.NAR(),j.qex(0,null,0),j.SdG(2),j.bVm())},encapsulation:2})),yt})(),xt=(()=>{var Ne;class yt extends rn.p4{constructor(...He){super(...He),(0,F.A)(this,"outlet",void 0),(0,F.A)(this,"tabBar",void 0),(0,F.A)(this,"tabBars",void 0)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",(()=>{let Bt;return function(Ht){return(Bt||(Bt=j.xGo(Ne)))(Ht||Ne)}})()),(0,F.A)(yt,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-tabs"]],contentQueries:function(He,Ht,kn){if(1&He&&(j.wni(kn,$,5),j.wni(kn,$,4)),2&He){let fs;j.mGM(fs=j.lsd())&&(Ht.tabBar=fs.first),j.mGM(fs=j.lsd())&&(Ht.tabBars=fs)}},viewQuery:function(He,Ht){if(1&He&&j.GBs(m,5,Ze),2&He){let kn;j.mGM(kn=j.lsd())&&(Ht.outlet=kn.first)}},features:[j.Vt3],ngContentSelectors:x,decls:6,vars:0,consts:[["tabsInner",""],["outlet",""],[1,"tabs-inner"],["tabs","true",3,"stackWillChange","stackDidChange"]],template:function(He,Ht){if(1&He){const kn=j.RV6();j.NAR(g),j.SdG(0),j.j41(1,"div",2,0)(3,"ion-router-outlet",3,1),j.bIt("stackWillChange",function(qs){return j.eBV(kn),j.Njj(Ht.onStackWillChange(qs))})("stackDidChange",function(qs){return j.eBV(kn),j.Njj(Ht.onStackDidChange(qs))}),j.k0s()(),j.SdG(5,1)}},dependencies:[Ze],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]})),yt})(),Zt=(()=>{var Ne;class yt extends rn.el{constructor(He,Ht,kn,fs,qs,na){super(He,Ht,kn,fs,qs,na)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)(j.rXU(Ze,8),j.rXU(rn.q9),j.rXU(rn.TS),j.rXU(j.aKT),j.rXU(j.SKi),j.rXU(j.gRc))}),(0,F.A)(yt,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-back-button"]],features:[j.Vt3],ngContentSelectors:h,decls:1,vars:0,template:function(He,Ht){1&He&&(j.NAR(),j.SdG(0))},encapsulation:2,changeDetection:0})),yt})(),ii=(()=>{var Ne;class yt extends rn.Sb{}return Ne=yt,(0,F.A)(yt,"\u0275fac",(()=>{let Bt;return function(Ht){return(Bt||(Bt=j.xGo(Ne)))(Ht||Ne)}})()),(0,F.A)(yt,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-modal"]],features:[j.Vt3],decls:1,vars:1,consts:[["class","ion-delegate-host ion-page",4,"ngIf"],[1,"ion-delegate-host","ion-page"],[3,"ngTemplateOutlet"]],template:function(He,Ht){1&He&&j.DNE(0,E,2,1,"div",0),2&He&&j.Y8G("ngIf",Ht.isCmpOpen||Ht.keepContentsMounted)},dependencies:[Z.bT,Z.T3],encapsulation:2,changeDetection:0})),yt})(),Bi=(()=>{var Ne;class yt extends rn.CF{}return Ne=yt,(0,F.A)(yt,"\u0275fac",(()=>{let Bt;return function(Ht){return(Bt||(Bt=j.xGo(Ne)))(Ht||Ne)}})()),(0,F.A)(yt,"\u0275cmp",j.VBU({type:Ne,selectors:[["ion-popover"]],features:[j.Vt3],decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(He,Ht){1&He&&j.DNE(0,S,1,1,"ng-container",0),2&He&&j.Y8G("ngIf",Ht.isCmpOpen||Ht.keepContentsMounted)},dependencies:[Z.bT,Z.T3],encapsulation:2,changeDetection:0})),yt})();const Rs={provide:Rt.cz,useExisting:(0,j.Rfq)(()=>Ps),multi:!0};let Ps=(()=>{var Ne;class yt extends Rt.zX{}return Ne=yt,(0,F.A)(yt,"\u0275fac",(()=>{let Bt;return function(Ht){return(Bt||(Bt=j.xGo(Ne)))(Ht||Ne)}})()),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(He,Ht){2&He&&j.BMQ("max",Ht._enabled?Ht.max:null)},features:[j.Jv_([Rs]),j.Vt3]})),yt})();const xi={provide:Rt.cz,useExisting:(0,j.Rfq)(()=>ws),multi:!0};let ws=(()=>{var Ne;class yt extends Rt.VZ{}return Ne=yt,(0,F.A)(yt,"\u0275fac",(()=>{let Bt;return function(Ht){return(Bt||(Bt=j.xGo(Ne)))(Ht||Ne)}})()),(0,F.A)(yt,"\u0275dir",j.FsC({type:Ne,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(He,Ht){2&He&&j.BMQ("min",Ht._enabled?Ht.min:null)},features:[j.Jv_([xi]),j.Vt3]})),yt})(),co=(()=>{var Ne;class yt extends rn.Kb{constructor(){super(C.TN)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)}),(0,F.A)(yt,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),yt})(),Ls=(()=>{var Ne;class yt{create(He){return(0,C.JI)(He)}easingTime(He,Ht,kn,fs,qs){return(0,C.sE)(He,Ht,kn,fs,qs)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)}),(0,F.A)(yt,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),yt})(),So=(()=>{var Ne;class yt extends rn.Kb{constructor(){super(C.FJ)}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)}),(0,F.A)(yt,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac,providedIn:"root"})),yt})(),ta=(()=>{var Ne;class yt extends rn.Kb{constructor(){super(C.OZ),(0,F.A)(this,"angularDelegate",(0,j.WQX)(rn.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(He){return super.create({...He,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)}),(0,F.A)(yt,"\u0275prov",j.jDH({token:Ne,factory:Ne.\u0275fac})),yt})();class ua extends rn.Kb{constructor(){super(C.mF),(0,F.A)(this,"angularDelegate",(0,j.WQX)(rn.Yq)),(0,F.A)(this,"injector",(0,j.WQX)(j.zZn)),(0,F.A)(this,"environmentInjector",(0,j.WQX)(j.uvJ))}create(yt){return super.create({...yt,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}const Ta=(Ne,yt,Bt)=>()=>{const He=yt.defaultView;if(He&&typeof window<"u"){(0,C.QX)({...Ne,_zoneGate:kn=>Bt.run(kn)});const Ht="__zone_symbol__addEventListener"in yt.body?"__zone_symbol__addEventListener":"addEventListener";return function b(){var Ne=[];if(typeof window<"u"){var yt=window;(!yt.customElements||yt.Element&&(!yt.Element.prototype.closest||!yt.Element.prototype.matches||!yt.Element.prototype.remove||!yt.Element.prototype.getRootNode))&&Ne.push(Ge.e(7278).then(Ge.t.bind(Ge,2190,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||yt.NodeList&&!yt.NodeList.prototype.forEach||!yt.fetch||!function(){try{var He=new URL("b","http://a");return He.pathname="c%20d","http://a/c%20d"===He.href&&He.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&Ne.push(Ge.e(9329).then(Ge.t.bind(Ge,7783,23)))}return Promise.all(Ne)}().then(()=>f(He,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:rn.er,jmp:kn=>Bt.runOutsideAngular(kn),ael(kn,fs,qs,na){kn[Ht](fs,qs,na)},rel(kn,fs,qs,na){kn.removeEventListener(fs,qs,na)}}))}};let Va=(()=>{var Ne;class yt{static forRoot(He={}){return{ngModule:yt,providers:[{provide:rn.sR,useValue:He},{provide:j.hnV,useFactory:Ta,multi:!0,deps:[rn.sR,Z.qQ,j.SKi]},rn.Yq,(0,rn.YV)()]}}}return Ne=yt,(0,F.A)(yt,"\u0275fac",function(He){return new(He||Ne)}),(0,F.A)(yt,"\u0275mod",j.$C({type:Ne})),(0,F.A)(yt,"\u0275inj",j.G2t({providers:[ta,ua],imports:[Z.MD]})),yt})()},467:(Ir,Un,Ge)=>{"use strict";function F(Rt,rn,l,be,Z,M,C){try{var b=Rt[M](C),w=b.value}catch(I){return void l(I)}b.done?rn(w):Promise.resolve(w).then(be,Z)}function j(Rt){return function(){var rn=this,l=arguments;return new Promise(function(be,Z){var M=Rt.apply(rn,l);function C(w){F(M,be,Z,C,b,"next",w)}function b(w){F(M,be,Z,C,b,"throw",w)}C(void 0)})}}Ge.d(Un,{A:()=>j})},9842:(Ir,Un,Ge)=>{"use strict";function F(l){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(be){return typeof be}:function(be){return be&&"function"==typeof Symbol&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be})(l)}function rn(l,be,Z){return(be=function Rt(l){var be=function j(l,be){if("object"!=F(l)||!l)return l;var Z=l[Symbol.toPrimitive];if(void 0!==Z){var M=Z.call(l,be||"default");if("object"!=F(M))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===be?String:Number)(l)}(l,"string");return"symbol"==F(be)?be:be+""}(be))in l?Object.defineProperty(l,be,{value:Z,enumerable:!0,configurable:!0,writable:!0}):l[be]=Z,l}Ge.d(Un,{A:()=>rn})},1635:(Ir,Un,Ge)=>{"use strict";function l(re,Q,fe,De){var z,it=arguments.length,le=it<3?Q:null===De?De=Object.getOwnPropertyDescriptor(Q,fe):De;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)le=Reflect.decorate(re,Q,fe,De);else for(var ye=re.length-1;ye>=0;ye--)(z=re[ye])&&(le=(it<3?z(le):it>3?z(Q,fe,le):z(Q,fe))||le);return it>3&&le&&Object.defineProperty(Q,fe,le),le}function I(re,Q,fe,De){return new(fe||(fe=Promise))(function(le,z){function ye(vt){try{Je(De.next(vt))}catch(Ct){z(Ct)}}function Ue(vt){try{Je(De.throw(vt))}catch(Ct){z(Ct)}}function Je(vt){vt.done?le(vt.value):function it(le){return le instanceof fe?le:new fe(function(z){z(le)})}(vt.value).then(ye,Ue)}Je((De=De.apply(re,Q||[])).next())})}function E(re){return this instanceof E?(this.v=re,this):new E(re)}function S(re,Q,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,De=fe.apply(re,Q||[]),le=[];return it={},ye("next"),ye("throw"),ye("return",function z(_t){return function(Ft){return Promise.resolve(Ft).then(_t,Ct)}}),it[Symbol.asyncIterator]=function(){return this},it;function ye(_t,Ft){De[_t]&&(it[_t]=function(Wt){return new Promise(function(mt,Nt){le.push([_t,Wt,mt,Nt])>1||Ue(_t,Wt)})},Ft&&(it[_t]=Ft(it[_t])))}function Ue(_t,Ft){try{!function Je(_t){_t.value instanceof E?Promise.resolve(_t.value.v).then(vt,Ct):zt(le[0][2],_t)}(De[_t](Ft))}catch(Wt){zt(le[0][3],Wt)}}function vt(_t){Ue("next",_t)}function Ct(_t){Ue("throw",_t)}function zt(_t,Ft){_t(Ft),le.shift(),le.length&&Ue(le[0][0],le[0][1])}}function q(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Q=re[Symbol.asyncIterator];return Q?Q.call(re):(re=function h(re){var Q="function"==typeof Symbol&&Symbol.iterator,fe=Q&&re[Q],De=0;if(fe)return fe.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&De>=re.length&&(re=void 0),{value:re&&re[De++],done:!re}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),fe={},De("next"),De("throw"),De("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function De(le){fe[le]=re[le]&&function(z){return new Promise(function(ye,Ue){!function it(le,z,ye,Ue){Promise.resolve(Ue).then(function(Je){le({value:Je,done:ye})},z)}(ye,Ue,(z=re[le](z)).done,z.value)})}}}Ge.d(Un,{AQ:()=>S,Cg:()=>l,N3:()=>E,sH:()=>I,xN:()=>q}),"function"==typeof SuppressedError&&SuppressedError}},Ir=>{Ir(Ir.s=6197)}]);