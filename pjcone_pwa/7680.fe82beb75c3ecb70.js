"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7680],{7680:(N,d,n)=>{n.r(d),n.d(d,{SettingsPageModule:()=>M});var u=n(1368),c=n(4716),l=n(5624),m=n(3332),p=n(1528),f=n(4708),h=n(5193),_=n(6124),v=n(9596),t=n(4496),S=n(9240),k=n(4180),C=n(7136),y=n(4500),I=n(6819),G=n(5020),B=n(6884);const P=["Devkit"],R=["LangSel"];function L(i,r){if(1&i){const s=t.KQA();t.I0R(0,"ion-item",18),t.wR5(1,"ion-icon",19),t.I0R(2,"ion-input",20),t.iHE("ngModelChange",function(e){t.usT(s);const o=t.GaO();return t.kNx(o.FallbackServerAddress,e)||(o.FallbackServerAddress=e),t.CGJ(e)}),t.qCj("ionInput",function(){t.usT(s);const e=t.GaO();return t.CGJ(e.fallback_fs_input())}),t.C$Y()()}if(2&i){const s=t.GaO();t.yG2(2),t.E7m("label",s.lang.text.Settings.FallbackFS),t.OKB("ngModel",s.FallbackServerAddress)}}function b(i,r){if(1&i){const s=t.KQA();t.I0R(0,"ion-item",3),t.qCj("click",function(){t.usT(s);const e=t.GaO();return t.CGJ(e.start_minimalserver())}),t.I0R(1,"ion-label"),t.OEk(2),t.C$Y()()}if(2&i){const s=t.GaO();t.yG2(2),t.cNF(s.lang.text.Settings.joinDediChat)}}function F(i,r){if(1&i){const s=t.KQA();t.I0R(0,"div")(1,"ion-item-divider")(2,"ion-label"),t.OEk(3),t.C$Y()(),t.I0R(4,"ion-item",3),t.qCj("click",function(){t.usT(s);const e=t.GaO();return t.CGJ(e.go_to_page("admin-tools"))}),t.I0R(5,"ion-label"),t.OEk(6),t.C$Y()()()}if(2&i){const s=t.GaO();t.yG2(3),t.cNF(s.lang.text.Settings.admin_tools),t.yG2(3),t.cNF(s.lang.text.Settings.ServerAdmin)}}function T(i,r){if(1&i){const s=t.KQA();t.I0R(0,"ion-item",3),t.qCj("click",function(){t.usT(s);const e=t.GaO();return t.CGJ(e.go_to_page("translator"))}),t.I0R(1,"ion-label"),t.OEk(2),t.C$Y()()}if(2&i){const s=t.GaO();t.yG2(2),t.cNF(s.lang.text.Settings.AppTranslator)}}const E=[{path:"",component:(()=>{var i;class r{constructor(a,e,o,g,w,D,A,Y){this.modalCtrl=a,this.navCtrl=e,this.statusBar=o,this.nakama=g,this.lang=w,this.noti=D,this.global=A,this.server=Y,this.cant_dedicated=!1,this.can_use_http=!1,this.is_nativefier=h.O$,this.BackButtonPressed=!1,this.as_admin=[],this.FallbackServerAddress="",this.self={},this.LinkButton=[],this.will_enter=!1,this.lock_modal_open=!1,this.WillLeave=!1}InitBrowserBackButtonOverride(){window.history.pushState(null,null,window.location.href),window.onpopstate=()=>{this.BackButtonPressed||(this.BackButtonPressed=!0,this.navCtrl.back())}}ngOnInit(){("DesktopPWA"==h.s1||"MobilePWA"==h.s1)&&(this.cant_dedicated=!0),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()},this.can_use_http="http:"==window.location.protocol||h.O$}toggle_ShowServer(){this.nakama.showServer?localStorage.setItem("showServer","1"):localStorage.removeItem("showServer")}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let a=this.as_admin.length-1;a>=0;a--)this.as_admin[a].is_admin||this.as_admin.splice(a,1)}start_minimalserver(){"offline"==this.statusBar.dedicated.official.groupchat?(this.statusBar.settings.dedicatedServer="pending",this.statusBar.dedicated.official.groupchat="pending",this.server.funcs.onStart=()=>{this.statusBar.settings.dedicatedServer="online",this.statusBar.dedicated.official.groupchat="online",this.start_minimalchat("ws://127.0.0.1")},this.server.funcs.onFailed=()=>{this.statusBar.settings.dedicatedServer="missing",this.statusBar.dedicated.official.groupchat="missing",setTimeout(()=>{this.statusBar.settings.dedicatedServer="offline",this.statusBar.dedicated.official.groupchat="offline"},1500)},this.server.initialize()):this.start_minimalchat("ws://127.0.0.1")}ionViewWillEnter(){this.InitBrowserBackButtonOverride(),this.profile_filter="online"==this.statusBar.settings.groupServer?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin(),this.FallbackServerAddress=localStorage.getItem("fallback_fs"),this.cant_dedicated&&(this.Fallback_FS_input_element=document.getElementById("fallback_fs_input").childNodes[1].childNodes[1].childNodes[1].childNodes[1],this.Fallback_FS_input_element.onfocus=()=>{delete this.global.p5key.KeyShortCut.Digit},this.WillLeave=!1,this.Fallback_FS_input_element.addEventListener("focusout",()=>{this.WillLeave||this.ionViewDidEnter()}))}focus_to_fallback_fs_input(){this.Devkit.value="Devkit",setTimeout(()=>{this.Fallback_FS_input_element.focus()},50)}fallback_fs_input(){this.FallbackServerAddress?localStorage.setItem("fallback_fs",this.FallbackServerAddress):localStorage.removeItem("fallback_fs")}ToggleAccordion(){this.Devkit.value?(this.LinkButton.splice(5,!this.cant_dedicated&&this.can_use_http?5:4),this.Devkit.value=void 0):(this.Devkit.value="Devkit",this.cant_dedicated?this.LinkButton.splice(4,0,()=>this.go_to_page("weblink-gen"),()=>this.focus_to_fallback_fs_input(),()=>this.go_to_webrtc_manager()):this.LinkButton.splice(4,0,()=>this.go_to_page("weblink-gen"),()=>this.go_to_webrtc_manager()),!this.cant_dedicated&&this.can_use_http?this.LinkButton.splice(7,0,()=>this.start_minimalserver(),()=>this.download_serverfile()):this.LinkButton.splice(7,0,()=>this.download_serverfile()))}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.navCtrl.pop()},this.LinkButton.length=0,this.LinkButton.push(()=>this.go_to_page("noti-alert")),this.LinkButton.push(()=>{this.nakama.showServer=!this.nakama.showServer,this.toggle_ShowServer()}),this.LinkButton.push(()=>this.open_inapp_explorer()),this.LinkButton.push(()=>this.ToggleAccordion()),this.Devkit.value&&(this.LinkButton.push(()=>this.go_to_page("weblink-gen")),this.cant_dedicated&&this.LinkButton.push(()=>this.focus_to_fallback_fs_input()),this.LinkButton.push(()=>this.go_to_webrtc_manager()),!this.cant_dedicated&&this.can_use_http&&this.LinkButton.push(()=>this.start_minimalserver()),this.LinkButton.push(()=>this.download_serverfile())),this.as_admin.length&&this.LinkButton.push(()=>this.go_to_page("admin-tools")),this.LinkButton.push(()=>this.go_to_page("creator")),"ko"!=this.lang.lang&&this.LinkButton.push(()=>this.go_to_page("translator")),this.LinkButton.push(()=>this.LangClicked()),this.LinkButton.push(()=>this.go_to_page("licenses")),this.cant_dedicated&&this.LinkButton.push(()=>this.open_playstore()),this.global.p5key.KeyShortCut.Digit=a=>{this.LinkButton[a]&&this.LinkButton[a]()}}start_minimalchat(a){var e=this;if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings.dedicated_groupchat&&"certified"!=this.statusBar.settings.dedicated_groupchat&&(this.statusBar.settings.dedicated_groupchat="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:_._,componentProps:{address:a,name:this.nakama.users.self.display_name}}).then(function(){var o=(0,p.c)(function*(g){yield g.present(),e.lock_modal_open=!1});return function(g){return o.apply(this,arguments)}}())}}open_inapp_explorer(){this.navCtrl.navigateForward("user-fs-dir",{animation:f.uw})}LangClicked(){this.LangSel.open()}LanguageChanged(a){this.lang.lang=a.detail.value,this.lang.load_selected_lang()}go_to_page(a){this.navCtrl.navigateForward(`portal/settings/${a}`,{animation:f.uw})}download_serverfile(){var a=this;return(0,p.c)(function*(){"ko"==a.lang.lang?window.open("https://is2you2.github.io/posts/how-to-use-pjcone-server/","_system"):window.open("https://is2you2.github.io/posts/how-to-use-pjcone-server-en/","_system")})()}go_to_webrtc_manager(){this.modalCtrl.create({component:v.I}).then(a=>{this.RemoveKeyShortCut(),a.onDidDismiss().then(()=>{this.ionViewDidEnter()}),a.present()})}open_playstore(){window.open("https://play.google.com/store/apps/details?id=org.pjcone.portal","_system")}RemoveKeyShortCut(){delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit}ionViewWillLeave(){this.WillLeave=!0,this.RemoveKeyShortCut()}ngOnDestroy(){delete this.nakama.on_socket_disconnected.settings_admin_check}}return(i=r).\u0275fac=function(a){return new(a||i)(t.GI1(l.qS),t.GI1(S.wX),t.GI1(k.Y),t.GI1(C.h),t.GI1(y.o),t.GI1(I.s),t.GI1(G.A1),t.GI1(B.a))},i.\u0275cmp=t.In1({type:i,selectors:[["app-settings"]],viewQuery:function(a,e){if(1&a&&(t.CC$(P,5),t.CC$(R,5)),2&a){let o;t.wto(o=t.Gqi())&&(e.Devkit=o.first),t.wto(o=t.Gqi())&&(e.LangSel=o.first)}},decls:56,vars:20,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","portal/main"],["button","",3,"click"],["button","",3,"ionChange"],[2,"pointer-events","none",3,"ngModel","ngModelChange"],["Devkit",""],["value","Devkit"],["slot","header"],["slot","content"],["button","","id","fallback_fs_input",4,"ngIf"],["button","",3,"click",4,"ngIf"],[4,"ngIf"],["name","language",1,"icon_margin"],[2,"pointer-events","none",3,"label","value","placeholder","ionChange"],["LangSel",""],["value","en"],["value","ko"],["button","","id","fallback_fs_input"],["name","cloud-done-outline",1,"icon_margin"],["placeholder","0.0.0.0:0",1,"ion-text-right",3,"label","ngModel","ngModelChange","ionInput"]],template:function(a,e){1&a&&(t.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.OEk(3),t.C$Y(),t.I0R(4,"ion-buttons",1),t.wR5(5,"ion-back-button",2),t.C$Y()()(),t.I0R(6,"ion-content")(7,"ion-item-divider")(8,"ion-label"),t.OEk(9),t.C$Y()(),t.I0R(10,"ion-item",3),t.qCj("click",function(){return e.go_to_page("noti-alert")}),t.I0R(11,"ion-label"),t.OEk(12),t.C$Y()(),t.I0R(13,"ion-item",4),t.qCj("ionChange",function(){return e.toggle_ShowServer()}),t.I0R(14,"ion-toggle",5),t.iHE("ngModelChange",function(g){return t.kNx(e.nakama.showServer,g)||(e.nakama.showServer=g),g}),t.OEk(15),t.C$Y()(),t.I0R(16,"ion-item",3),t.qCj("click",function(){return e.open_inapp_explorer()}),t.I0R(17,"ion-label"),t.OEk(18),t.C$Y()(),t.I0R(19,"ion-accordion-group",null,6)(21,"ion-accordion",7)(22,"ion-item",8)(23,"ion-label"),t.OEk(24),t.C$Y()(),t.I0R(25,"div",9)(26,"ion-item",3),t.qCj("click",function(){return e.go_to_page("weblink-gen")}),t.I0R(27,"ion-label"),t.OEk(28),t.C$Y()(),t.yuY(29,L,3,2,"ion-item",10),t.I0R(30,"ion-item",3),t.qCj("click",function(){return e.go_to_webrtc_manager()}),t.I0R(31,"ion-label"),t.OEk(32),t.C$Y()(),t.yuY(33,b,3,1,"ion-item",11),t.I0R(34,"ion-item",3),t.qCj("click",function(){return e.download_serverfile()}),t.I0R(35,"ion-label"),t.OEk(36),t.C$Y()()()()(),t.yuY(37,F,7,2,"div",12),t.I0R(38,"ion-item-divider")(39,"ion-label"),t.OEk(40),t.C$Y()(),t.I0R(41,"ion-item",3),t.qCj("click",function(){return e.go_to_page("creator")}),t.I0R(42,"ion-label"),t.OEk(43),t.C$Y()(),t.yuY(44,T,3,1,"ion-item",11),t.I0R(45,"ion-item",3),t.qCj("click",function(){return e.LangClicked()}),t.wR5(46,"ion-icon",13),t.I0R(47,"ion-select",14,15),t.qCj("ionChange",function(g){return e.LanguageChanged(g)}),t.I0R(49,"ion-select-option",16),t.OEk(50,"English"),t.C$Y(),t.I0R(51,"ion-select-option",17),t.OEk(52,"\ud55c\uad6d\uc5b4"),t.C$Y()()(),t.I0R(53,"ion-item",3),t.qCj("click",function(){return e.go_to_page("licenses")}),t.I0R(54,"ion-label"),t.OEk(55),t.C$Y()()()),2&a&&(t.yG2(3),t.cNF(e.lang.text.Settings.Title),t.yG2(6),t.cNF(e.lang.text.Settings.env_info),t.yG2(3),t.cNF(e.lang.text.Settings.NotificationSetting),t.yG2(2),t.OKB("ngModel",e.nakama.showServer),t.yG2(),t.cNF(e.lang.text.Settings.ShowChnServer),t.yG2(3),t.cNF(e.lang.text.Settings.InAppExplorer),t.yG2(6),t.cNF(e.lang.text.Settings.DevKit),t.yG2(4),t.cNF(e.lang.text.Settings.WebLinkGen),t.yG2(),t.E7m("ngIf",e.cant_dedicated),t.yG2(3),t.cNF(e.lang.text.WebRTCDevManager.Title),t.yG2(),t.E7m("ngIf",!e.cant_dedicated&&e.can_use_http),t.yG2(3),t.cNF(e.lang.text.Settings.ServerFiles),t.yG2(),t.E7m("ngIf",e.as_admin.length),t.yG2(3),t.cNF(e.lang.text.Settings.AppInfo),t.yG2(3),t.cNF(e.lang.text.Settings.AppCreator),t.yG2(),t.E7m("ngIf","ko"!=e.lang.lang),t.yG2(3),t.E7m("label",e.lang.text.Settings.AppLanguage)("value",e.lang.lang)("placeholder",e.lang.lang),t.yG2(8),t.cNF(e.lang.text.Settings.LicenseNotice))},dependencies:[u.u_,c.ue,c._G,l.cm,l.qU,l.GS,l._i,l.wB,l.Ko,l.A5,l.Yb,l.S8,l.QR,l.Cy,l.gd,l.tM,l.E$,l.Md,l.UJ,l.IT,l.qG,l.Im],styles:[".img_icon_size[_ngcontent-%COMP%]{width:21px;height:21px;margin-right:16px}.icon_margin[_ngcontent-%COMP%]{margin-right:16px}"]}),r})()},{path:"licenses",loadChildren:()=>n.e(6768).then(n.bind(n,6768)).then(i=>i.LicensesPageModule)},{path:"group-server",loadChildren:()=>n.e(8928).then(n.bind(n,8928)).then(i=>i.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([n.e(9492),n.e(148)]).then(n.bind(n,7768)).then(i=>i.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>n.e(1588).then(n.bind(n,9208)).then(i=>i.GroupDetailPageModule)},{path:"translator",loadChildren:()=>n.e(9236).then(n.bind(n,9236)).then(i=>i.TranslatorPageModule)},{path:"creator",loadChildren:()=>n.e(4984).then(n.bind(n,4984)).then(i=>i.CreatorPageModule)},{path:"noti-alert",loadChildren:()=>n.e(7816).then(n.bind(n,7816)).then(i=>i.NotiAlertPageModule)},{path:"admin-tools",loadChildren:()=>n.e(6710).then(n.bind(n,6710)).then(i=>i.AdminToolsPageModule)},{path:"weblink-gen",loadChildren:()=>n.e(3544).then(n.bind(n,3544)).then(i=>i.WeblinkGenPageModule)}];let O=(()=>{var i;class r{}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.a4G({type:i}),i.\u0275inj=t.s3X({imports:[m.qQ.forChild(E),m.qQ]}),r})(),M=(()=>{var i;class r{}return(i=r).\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.a4G({type:i}),i.\u0275inj=t.s3X({imports:[u.MD,c.y,l.wZ,O]}),r})()}}]);