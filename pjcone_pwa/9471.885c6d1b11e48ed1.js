"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9471],{9471:(Z,g,s)=>{s.r(g),s.d(g,{AdminToolsPageModule:()=>x});var d=s(9808),c=s(4182),t=s(3996),u=s(9705),m=s(655),n=s(9863),p=s(5742),h=s(9912),f=s(3336);function _(i,l){if(1&i){const o=n.EpF();n.TgZ(0,"ion-item",14),n.NdJ("click",function(){const r=n.CHM(o).index;return n.oxw(2).select_server(r)}),n.TgZ(1,"ion-label"),n._uU(2),n.qZA()()}if(2&i){const o=l.$implicit;n.xp6(2),n.Oqu(o.name)}}function T(i,l){if(1&i){const o=n.EpF();n.TgZ(0,"ion-accordion-group",7,8),n.NdJ("click",function(){return n.CHM(o),n.oxw().isExpanded=!0}),n.TgZ(2,"ion-accordion",9)(3,"ion-item",10)(4,"ion-label"),n._uU(5),n.qZA(),n.TgZ(6,"ion-label",11),n._uU(7),n.qZA()(),n.TgZ(8,"ion-list",12),n.YNc(9,_,3,1,"ion-item",13),n.qZA()()()}if(2&i){const o=n.oxw();n.Q6J("value",o.isExpanded),n.xp6(5),n.Oqu(o.lang.text.AddGroup.SelectServer),n.xp6(2),n.Oqu(o.servers[o.index].name),n.xp6(2),n.Q6J("ngForOf",o.servers)}}const v=[{path:"",component:(()=>{class i{constructor(o,e,a){this.lang=o,this.nakama=e,this.p5toast=a,this.servers=[],this.index=0,this.isExpanded=!0,this.notification={uri:"",msg:""},this.is_sending=!1}select_server(o){this.index=o,this.isExpanded=!1}ngOnInit(){this.servers=this.nakama.get_all_server_info(!0,!0);for(let o=this.servers.length-1;o>=0;o--)this.servers[o].is_admin||this.servers.splice(o,1)}send_noti_to_server(){return(0,m.mG)(this,void 0,void 0,function*(){if(!this.notification.msg&&!this.notification.uri)return void this.p5toast.show({text:this.lang.text.AdminTools.NoNotiMsg});this.is_sending=!0;let o=this.servers[this.index].isOfficial,e=this.servers[this.index].target;this.notification.msg=encodeURIComponent(this.notification.msg),this.notification.uri=encodeURIComponent(this.notification.uri);try{yield this.nakama.servers[o][e].client.rpc(this.nakama.servers[o][e].session,"send_noti_all_fn",this.notification)}catch(a){}this.notification.msg="",this.notification.uri="",this.is_sending=!1})}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(p.b),n.Y36(h.a),n.Y36(f.F))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-admin-tools"]],decls:19,vars:10,consts:[["slot","start"],["defaultHref","portal/settings"],["value","colors","expand","inset",3,"value","click",4,"ngIf"],[1,"ion-text-end",3,"ngModel","placeholder","ngModelChange"],[1,"infobox","content_size",3,"ngModel","placeholder","ngModelChange"],["button","",3,"disabled"],[1,"ion-text-center",3,"click"],["value","colors","expand","inset",3,"value","click"],["accordionGroup",""],["value","colors"],["slot","header"],[1,"ion-text-right"],["slot","content"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",0),n._UZ(5,"ion-back-button",1),n.qZA()()(),n.TgZ(6,"ion-content"),n.YNc(7,T,10,4,"ion-accordion-group",2),n.TgZ(8,"ion-item-divider")(9,"ion-label"),n._uU(10),n.qZA()(),n.TgZ(11,"ion-item")(12,"ion-label"),n._uU(13),n.qZA(),n.TgZ(14,"ion-input",3),n.NdJ("ngModelChange",function(r){return e.notification.uri=r}),n.qZA()(),n.TgZ(15,"textarea",4),n.NdJ("ngModelChange",function(r){return e.notification.msg=r}),n.qZA(),n.TgZ(16,"ion-item",5)(17,"ion-label",6),n.NdJ("click",function(){return e.send_noti_to_server()}),n._uU(18),n.qZA()()()),2&o&&(n.xp6(3),n.Oqu(e.lang.text.Settings.admin_tools),n.xp6(4),n.Q6J("ngIf",e.servers.length),n.xp6(3),n.Oqu(e.lang.text.AdminTools.GlobalNoti),n.xp6(3),n.Oqu(e.lang.text.AdminTools.ImageURL),n.xp6(1),n.Q6J("ngModel",e.notification.uri)("placeholder",e.lang.text.AdminTools.EnterURI),n.xp6(1),n.Q6J("ngModel",e.notification.msg)("placeholder",e.lang.text.AdminTools.NoNotiMsg),n.xp6(1),n.Q6J("disabled",e.is_sending),n.xp6(2),n.Oqu(e.lang.text.AdminTools.Send))},directives:[t.Gu,t.sr,t.wd,t.Sm,t.oU,t.cs,t.W2,d.O5,t.eh,t.We,t.Ie,t.Q$,t.q_,d.sg,t.rH,t.pK,t.j9,c.JJ,c.On,c.Fj],styles:[""]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[u.Bz.forChild(v)],u.Bz]}),i})(),x=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[d.ez,c.u5,t.Pc,A]]}),i})()}}]);