"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1484],{1484:(W,u,n)=>{n.r(u),n.d(u,{SettingsPageModule:()=>Q});var p=n(9808),m=n(4182),l=n(3996),f=n(9705),T=n(655),_=n(4464),h=n(5016),v=n(2722),S=n(5337),x=n(2879),t=n(9863),Z=n(4606),A=n(9912),P=n(3496),C=n(9040),y=n(5742),b=n(8677),N=n(1282),O=n(4433),U=n(3336);const M=["LangSel"];function J(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setDisableBatteryOptimizations()}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Oqu(e.lang.text.Settings.batteryOptimization)}}function k(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().go_to_page("dedicated-settings")}),t._UZ(1,"div",21),t.TgZ(2,"ion-label",22),t._uU(3),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.dedicatedServer||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.useDeviceAsServer)}}function D(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",23),t._UZ(1,"div",21),t.TgZ(2,"ion-label",22),t._uU(3),t.qZA(),t.TgZ(4,"ion-input",24),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().chat_address=a}),t.qZA(),t.TgZ(5,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.start_minimalchat(a.chat_address?"ws://"+a.chat_address:"ws://127.0.0.1")}),t._uU(6),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.will_enter),t.xp6(1),t.Akn("background-color: "+e.statusBar.colors[e.statusBar.settings.dedicated_groupchat||"offline"]),t.xp6(2),t.Oqu(e.lang.text.Settings.joinDediChat),t.xp6(1),t.Q6J("placeholder",e.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",e.chat_address),t.xp6(2),t.hij(" ",e.lang.text.Settings.joinDedi_button," ")}}function B(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().go_to_page("admin-tools")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.lang.text.Settings.admin_tools)}}function F(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().go_to_page("translator")}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.lang.text.Settings.AppTranslator)}}function I(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().open_playstore()}),t._UZ(1,"ion-icon",26),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Oqu(e.lang.text.Settings.OpenPlayStore)}}const z=[{path:"",component:(()=>{class o{constructor(e,i,a,d,s,c,r,H,E,G,L,j){this.modalCtrl=e,this.nav=i,this.statusBar=a,this.nakama=d,this.indexed=s,this.bgmode=c,this.lang=r,this.noti=H,this.global=E,this.file=G,this.p5toast=L,this.loadingCtrl=j,this.cant_dedicated=!1,this.can_use_http=!1,this.as_admin=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==h.n$||"MobilePWA"==h.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(e,i)=>{e&&i&&(this.nakama.users.self.img=i.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=Boolean(localStorage.getItem("ShowDisableBatteryOptimizations")),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()},this.can_use_http="http:"==window.location.protocol}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let e=this.as_admin.length-1;e>=0;e--)this.as_admin[e].is_admin||this.as_admin.splice(e,1)}checkAdsInfo(){return(0,T.mG)(this,void 0,void 0,function*(){try{let e=yield fetch(`${h.Oy}pjcone_ads/${this.lang.lang}.txt`);if(e.ok){let i=yield(yield e.blob()).text();this.indexed.saveTextFileToUserPath(i,"ads_list.txt");let a=i.split("\n");this.listAvailableAds(a)}}catch(e){this.indexed.loadTextFromUserPath("ads_list.txt",(i,a)=>{i&&a&&this.listAvailableAds(a.split("\n"))})}})}listAvailableAds(e){let a,i=(new Date).getTime();this.availables.length=0;for(let s=0,c=e.length;s<c;s++){let r=e[s].split(",");Number(r[0])<i?i<Number(r[1])&&this.availables.push([Number(r[0]),Number(r[1]),r[2]]):a?Number(r[0])<a&&(a=Number(r[0])):a=Number(r[0])}let d=this.AD_Div.childNodes;this.isAdHiding=!0,d.forEach(s=>{s.remove()}),this.availables.length?this.displayRandomAds():a&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(s,c)=>{s&&c&&this.listAvailableAds(c.split("\n"))})},a-(new Date).getTime()))}displayRandomAds(){let e=Math.floor(Math.random()*this.availables.length),i=this.availables[e];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(d,s)=>{d&&s&&this.listAvailableAds(s.split("\n"))})},i[1]-(new Date).getTime());let a=document.createElement("iframe");a.id="AdFrame",a.setAttribute("src",i[2]),a.setAttribute("frameborder","0"),a.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(a)}open_link(e){window.open(e,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.profile_filter="online"==this.statusBar.settings.groupServer?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin()}start_minimalchat(e){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[e?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:v.X,componentProps:{address:e,name:this.nakama.users.self.display_name}}).then(i=>{i.present(),this.lock_modal_open=!1})}}open_inapp_explorer(){this.nav.navigateForward("user-fs-dir",{animation:_.Nn})}LangClicked(){this.LangSel.open()}LanguageChanged(e){this.lang.lang=e.detail.value,this.lang.load_selected_lang()}go_to_page(e){this.nav.navigateForward(`settings/${e}`,{animation:_.Nn})}download_serverfile(){return(0,T.mG)(this,void 0,void 0,function*(){if("Android"==h.n$||"iOS"==h.n$){let e=yield this.loadingCtrl.create({message:this.lang.text.TodoDetail.WIP});e.present();let i="nakama.zip",a=yield fetch("assets/data/nakama.zip").then(d=>d.blob());try{yield this.file.writeFile(this.file.externalDataDirectory,i,a),e.dismiss(),this.p5toast.show({text:this.lang.text.ContentViewer.fileSaved})}catch(d){console.log("download_serverfile: ",d);try{yield this.file.writeExistingFile(this.file.externalDataDirectory,i,a),e.dismiss(),this.p5toast.show({text:this.lang.text.ContentViewer.fileSaved})}catch(s){console.log("download_serverfile_rewrite: ",s),e.dismiss(),this.p5toast.show({text:this.lang.text.ContentViewer.fileSaveFailed})}}}else{let e=document.createElement("a");e.download="nakama.zip",e.href="assets/data/nakama.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e),e.remove()}})}go_to_qr_share(){this.modalCtrl.create({component:x.b,componentProps:{NoReturn:!0}}).then(e=>e.present())}go_to_webrtc_manager(){this.modalCtrl.create({component:S.$}).then(e=>e.present())}open_playstore(){window.open("https://play.google.com/store/apps/details?id=org.pjcone.portal","_system")}ngOnDestroy(){delete this.nakama.users.self.img,delete this.nakama.on_socket_disconnected.settings_admin_check,clearTimeout(this.refreshAds),this.global.CreateGodotIFrame("todo",{local_url:"assets/data/godot/todo.pck",title:"Todo",add_todo_menu:e=>{this.nakama.open_add_todo_page(e)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.IN),t.Y36(l.SH),t.Y36(Z.g),t.Y36(A.a),t.Y36(P.H),t.Y36(C.z),t.Y36(y.b),t.Y36(b.J),t.Y36(N.AN),t.Y36(O.$),t.Y36(U.F),t.Y36(l.HT))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],viewQuery:function(e,i){if(1&e&&t.Gf(M,5),2&e){let a;t.iGM(a=t.CRH())&&(i.LangSel=a.first)}},decls:85,vars:32,consts:[["slot","start"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],[4,"ngIf"],["button","",3,"click",4,"ngIf"],["button","",3,"disabled",4,"ngIf"],["slot","start","name","qr-code-outline"],["value","Devkit"],["slot","header"],["slot","content"],["src","assets/icon/engineppt.png","alt","",1,"img_icon_size"],["slot","start","name","language"],[2,"pointer-events","none",3,"value","placeholder","ionChange"],["LangSel",""],["value","en"],["value","ko"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["button","",3,"disabled"],[1,"ion-text-center",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["slot","start","name","logo-google-playstore"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return i.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("group-server")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t.TgZ(20,"ion-label"),t._uU(21),t.qZA()(),t.TgZ(22,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("noti-alert")}),t.TgZ(23,"ion-label"),t._uU(24),t.qZA()(),t.YNc(25,J,4,1,"div",8),t.TgZ(26,"ion-item-divider")(27,"ion-label"),t._uU(28),t.qZA()(),t.YNc(29,k,4,3,"ion-item",9),t.YNc(30,D,7,7,"ion-item",10),t.TgZ(31,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("weblink-gen")}),t.TgZ(32,"ion-label"),t._uU(33),t.qZA()(),t.TgZ(34,"ion-item",5),t.NdJ("click",function(){return i.go_to_qr_share()}),t._UZ(35,"ion-icon",11),t.TgZ(36,"ion-label"),t._uU(37),t.qZA()(),t.TgZ(38,"ion-item",5),t.NdJ("click",function(){return i.go_to_webrtc_manager()}),t.TgZ(39,"ion-label"),t._uU(40),t.qZA()(),t.YNc(41,B,3,1,"ion-item",9),t.TgZ(42,"ion-accordion-group")(43,"ion-accordion",12)(44,"ion-item",13)(45,"ion-label"),t._uU(46),t.qZA()(),t.TgZ(47,"ion-list",14)(48,"ion-item",5),t.NdJ("click",function(){return i.open_inapp_explorer()}),t.TgZ(49,"ion-label"),t._uU(50),t.qZA()(),t.TgZ(51,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("engineppt")}),t._UZ(52,"img",15),t.TgZ(53,"ion-label"),t._uU(54),t.qZA()(),t.TgZ(55,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("qrcode-gen")}),t.TgZ(56,"ion-label"),t._uU(57),t.qZA()(),t.TgZ(58,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("wsclient")}),t.TgZ(59,"ion-label"),t._uU(60),t.qZA()(),t.TgZ(61,"ion-item",5),t.NdJ("click",function(){return i.download_serverfile()}),t.TgZ(62,"ion-label"),t._uU(63),t.qZA()()()()(),t.TgZ(64,"ion-item-divider")(65,"ion-label"),t._uU(66),t.qZA()(),t.TgZ(67,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("creator")}),t.TgZ(68,"ion-label"),t._uU(69),t.qZA()(),t.YNc(70,F,3,1,"ion-item",9),t.TgZ(71,"ion-item",5),t.NdJ("click",function(){return i.LangClicked()}),t._UZ(72,"ion-icon",16),t.TgZ(73,"ion-label"),t._uU(74),t.qZA(),t.TgZ(75,"ion-select",17,18),t.NdJ("ionChange",function(d){return i.LanguageChanged(d)}),t.TgZ(77,"ion-select-option",19),t._uU(78,"English"),t.qZA(),t.TgZ(79,"ion-select-option",20),t._uU(80,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(81,"ion-item",5),t.NdJ("click",function(){return i.go_to_page("licenses")}),t.TgZ(82,"ion-label"),t._uU(83),t.qZA()(),t.YNc(84,I,4,1,"ion-item",9),t.qZA()),2&e&&(t.xp6(3),t.Oqu(i.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",i.isAdHiding),t.xp6(3),t.Oqu(i.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",i.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(i.lang.text.Settings.env_info),t.xp6(3),t.Akn(i.profile_filter),t.Q6J("src",i.nakama.users.self.img,t.LSH),t.xp6(2),t.Oqu(i.lang.text.Settings.groupServer),t.xp6(3),t.Oqu(i.lang.text.Settings.NotificationSetting),t.xp6(1),t.Q6J("ngIf",!i.cant_dedicated&&!i.isBatteryOptimizationsShowed),t.xp6(3),t.Oqu(i.lang.text.Settings.ServerNTools),t.xp6(1),t.Q6J("ngIf",!i.cant_dedicated),t.xp6(1),t.Q6J("ngIf",i.can_use_http),t.xp6(3),t.Oqu(i.lang.text.Settings.WebLinkGen),t.xp6(4),t.Oqu(i.lang.text.Settings.quickQRshare),t.xp6(3),t.Oqu(i.lang.text.WebRTCDevManager.Title),t.xp6(1),t.Q6J("ngIf",i.as_admin.length),t.xp6(5),t.Oqu(i.lang.text.Settings.DevKit),t.xp6(4),t.Oqu(i.lang.text.Settings.InAppExplorer),t.xp6(4),t.Oqu(i.lang.text.Settings.EnginePPT),t.xp6(3),t.Oqu(i.lang.text.Settings.QRCodeGen),t.xp6(3),t.Oqu(i.lang.text.Settings.WSClient),t.xp6(3),t.Oqu(i.lang.text.Settings.ServerFiles),t.xp6(3),t.Oqu(i.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(i.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=i.lang.lang),t.xp6(4),t.Oqu(i.lang.text.Settings.AppLanguage),t.xp6(1),t.Q6J("value",i.lang.lang)("placeholder",i.lang.lang),t.xp6(8),t.Oqu(i.lang.text.Settings.LicenseNotice),t.xp6(1),t.Q6J("ngIf",i.cant_dedicated))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.oU,l.cs,l.W2,l.rH,l.Q$,l.YG,l.Ie,p.O5,l.pK,l.j9,m.JJ,m.On,l.gu,l.eh,l.We,l.q_,l.t9,l.QI,l.n0],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}.img_icon_size[_ngcontent-%COMP%]{width:21px;height:21px;margin-right:8px}"]}),o})()},{path:"licenses",loadChildren:()=>n.e(4189).then(n.bind(n,4189)).then(o=>o.LicensesPageModule)},{path:"dedicated-settings",loadChildren:()=>n.e(1420).then(n.bind(n,1420)).then(o=>o.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>n.e(9666).then(n.bind(n,9666)).then(o=>o.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([n.e(8592),n.e(160)]).then(n.bind(n,160)).then(o=>o.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>n.e(6167).then(n.bind(n,6167)).then(o=>o.GroupDetailPageModule)},{path:"translator",loadChildren:()=>n.e(747).then(n.bind(n,747)).then(o=>o.TranslatorPageModule)},{path:"creator",loadChildren:()=>n.e(3742).then(n.bind(n,3742)).then(o=>o.CreatorPageModule)},{path:"qr-share",loadChildren:()=>n.e(6250).then(n.bind(n,6250)).then(o=>o.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>n.e(6886).then(n.bind(n,6886)).then(o=>o.NotiAlertPageModule)},{path:"engineppt",loadChildren:()=>n.e(6526).then(n.bind(n,6526)).then(o=>o.EnginepptPageModule)},{path:"admin-tools",loadChildren:()=>n.e(9471).then(n.bind(n,9471)).then(o=>o.AdminToolsPageModule)},{path:"qrcode-gen",loadChildren:()=>n.e(7368).then(n.bind(n,7368)).then(o=>o.QrcodeGenPageModule)},{path:"wsclient",loadChildren:()=>n.e(4454).then(n.bind(n,4454)).then(o=>o.WsclientPageModule)},{path:"weblink-gen",loadChildren:()=>n.e(8244).then(n.bind(n,8244)).then(o=>o.WeblinkGenPageModule)}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(z)],f.Bz]}),o})(),Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,m.u5,l.Pc,Y]]}),o})()}}]);