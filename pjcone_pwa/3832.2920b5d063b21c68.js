"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3832],{5346:(T,D,_)=>{_.d(D,{ez:()=>g});var g=function(m){return m.UTF8="utf8",m.ASCII="ascii",m.UTF16="utf16",m}(g||{})},3832:(T,D,_)=>{_.d(D,{P:()=>se});var f=_(5861),g=_(6845),v=_(9745),U=_(2726);_(5346);const Z=(0,U.fo)("Filesystem",{web:()=>_.e(4522).then(_.bind(_,4522)).then(r=>new r.FilesystemWeb)});var e=_(9468),u=_(1325),I=_(797),y=_(3857),C=_(6052),w=_(9376),A=_(6593),L=_(2372),P=_(4093),b=_(6814);const E=["FileSel"];function k(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-icon",6),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.toggle_thumbnail())}),e.qZA()}}function N(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-icon",7),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.toggle_thumbnail())}),e.qZA()}}function $(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-button",15),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.ExportDirectoryRecursive())}),e._uU(1),e.qZA()}if(2&r){const n=e.oxw(3);e.xp6(1),e.hij(" ",n.lang.text.UserFsDir.ExportDir," ")}}function O(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div")(1,"ion-item",10),e._UZ(2,"ion-icon",11),e.TgZ(3,"ion-label"),e._uU(4,"."),e.qZA(),e.YNc(5,$,2,1,"ion-button",12),e.TgZ(6,"ion-button",13),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.RemoveDirectoryRecursive())}),e._uU(7),e.qZA()(),e.TgZ(8,"ion-item",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.MoveToUpDir())}),e._UZ(9,"ion-icon",11),e.TgZ(10,"ion-label"),e._uU(11,".."),e.qZA()()()}if(2&r){const n=e.oxw(2);e.xp6(5),e.Q6J("ngIf",!n.cant_dedicated),e.xp6(2),e.hij(" ",n.lang.text.UserFsDir.RemoveCurrentDir," ")}}function B(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div")(1,"ion-item",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.SelectImportFolder())}),e._UZ(2,"ion-icon",16),e.TgZ(3,"ion-label"),e._uU(4),e.qZA()(),e.TgZ(5,"input",17),e.NdJ("change",function(t){e.CHM(n);const o=e.oxw(2);return e.KtG(o.inputImageSelected(t))}),e.qZA()()}if(2&r){const n=e.oxw(2);e.xp6(4),e.hij(" ",n.lang.text.UserFsDir.ImportFolder," ")}}function J(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.SelectFolder(t))}),e._UZ(1,"ion-icon",11),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&r){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.name)}}function Y(r,a){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,J,4,1,"ion-item",18),e.qZA()),2&r){const n=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.CurrentDir==n.dir)}}function R(r,a){1&r&&e._UZ(0,"ion-icon",35)}function S(r,a){1&r&&e._UZ(0,"ion-icon",36)}function M(r,a){1&r&&e._UZ(0,"ion-icon",37)}function H(r,a){1&r&&e._UZ(0,"ion-icon",38)}function Q(r,a){1&r&&e._UZ(0,"ion-icon",39)}function G(r,a){1&r&&e._UZ(0,"ion-icon",40)}function q(r,a){if(1&r&&(e.TgZ(0,"ion-label",41),e._uU(1),e.qZA()),2&r){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n.name)}}function K(r,a){if(1&r&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&r){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n.name)}}function j(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-button",42),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.OpenFile(t))}),e._uU(1),e.qZA()}if(2&r){const n=e.oxw(4);e.xp6(1),e.hij(" ",n.lang.text.UserFsDir.Open," ")}}function V(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-button",42),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.dismiss_page(t))}),e._uU(1),e.qZA()}if(2&r){const n=e.oxw(4);e.xp6(1),e.hij(" ",n.lang.text.UserFsDir.Select," ")}}function z(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-button",42),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.DownloadFile(t))}),e._uU(1),e.qZA()}if(2&r){const n=e.oxw(4);e.xp6(1),e.hij(" ",n.lang.text.UserFsDir.Download," ")}}function W(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2).$implicit,o=e.oxw(2);return e.KtG(o.OpenFile(t))}),e._UZ(1,"img",44),e.qZA()}if(2&r){const n=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Akn(i.HideThumbnail?"filter: blur(6px);":""),e.Q6J("src",n.thumbnail,e.LSH)("alt",n.name)}}function X(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-accordion",20)(1,"ion-item",21),e.YNc(2,R,1,0,"ion-icon",22),e.YNc(3,S,1,0,"ion-icon",23),e.YNc(4,M,1,0,"ion-icon",24),e.YNc(5,H,1,0,"ion-icon",25),e.YNc(6,Q,1,0,"ion-icon",26),e.YNc(7,G,1,0,"ion-icon",27),e.YNc(8,q,2,1,"ion-label",28),e.YNc(9,K,2,1,"ion-label",5),e._UZ(10,"ion-icon",29),e.qZA(),e.TgZ(11,"div",30)(12,"ion-item",10)(13,"ion-label"),e._uU(14),e.qZA(),e.YNc(15,j,2,1,"ion-button",31),e.YNc(16,V,2,1,"ion-button",31),e.YNc(17,z,2,1,"ion-button",31),e.TgZ(18,"ion-button",32),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(),o=t.$implicit,l=t.index,s=e.oxw(2);return e.KtG(s.RemoveFile(o,l))}),e._uU(19),e.qZA()(),e.YNc(20,W,2,4,"div",33),e.TgZ(21,"ion-item",10)(22,"ion-label"),e._uU(23),e.qZA(),e.TgZ(24,"ion-label",34),e._uU(25),e.qZA()()()()}if(2&r){const n=e.oxw().$implicit;e.oxw();const i=e.MAs(5),t=e.oxw();e.Q6J("value",n.path),e.xp6(2),e.Q6J("ngIf","image"==n.viewer),e.xp6(1),e.Q6J("ngIf","audio"==n.viewer),e.xp6(1),e.Q6J("ngIf","video"==n.viewer),e.xp6(1),e.Q6J("ngIf","text"==n.viewer),e.xp6(1),e.Q6J("ngIf","godot"==n.viewer),e.xp6(1),e.Q6J("ngIf","disabled"==n.viewer),e.xp6(1),e.Q6J("ngIf",i.value==n.path),e.xp6(1),e.Q6J("ngIf",i.value!=n.path),e.xp6(5),e.Oqu(t.lang.text.UserFsDir.Action),e.xp6(1),e.Q6J("ngIf","disabled"!=n.viewer&&"image"!=n.viewer),e.xp6(1),e.Q6J("ngIf",t.is_file_selector),e.xp6(1),e.Q6J("ngIf",t.cant_dedicated&&!t.is_file_selector),e.xp6(2),e.hij(" ",t.lang.text.UserFsDir.Delete," "),e.xp6(1),e.Q6J("ngIf","image"==n.viewer),e.xp6(3),e.Oqu(t.lang.text.UserFsDir.CreateAt),e.xp6(2),e.Oqu(n.timestamp)}}function ee(r,a){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,X,26,17,"ion-accordion",19),e.qZA()),2&r){const n=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.CurrentDir==n.dir||i.is_file_selector)}}function ie(r,a){if(1&r&&(e.TgZ(0,"ion-list"),e.YNc(1,O,12,2,"div",5),e.YNc(2,B,6,1,"div",5),e.YNc(3,Y,2,1,"div",8),e.TgZ(4,"ion-accordion-group",null,9),e.YNc(6,ee,2,1,"div",8),e.qZA()()),2&r){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",""!=n.CurrentDir),e.xp6(1),e.Q6J("ngIf",""==n.CurrentDir&&!n.is_file_selector),e.xp6(1),e.Q6J("ngForOf",n.DirList),e.xp6(3),e.Q6J("ngForOf",n.FileList)}}function te(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.importFolderMiddleAct(t))}),e._UZ(1,"ion-icon",11),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&r){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.name)}}function ne(r,a){if(1&r&&(e.TgZ(0,"ion-item",47),e._UZ(1,"ion-icon",40),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()),2&r){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.name)}}function oe(r,a){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,te,4,1,"ion-item",18),e.YNc(2,ne,4,1,"ion-item",46),e.qZA()),2&r){const n=a.$implicit;e.xp6(1),e.Q6J("ngIf",n.isDirectory),e.xp6(1),e.Q6J("ngIf",n.isFile)}}function re(r,a){if(1&r){const n=e.EpF();e.TgZ(0,"ion-list")(1,"ion-item",14),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.InAppBrowser=!0)}),e._UZ(2,"ion-icon",11),e.TgZ(3,"ion-label",45),e._uU(4,"/sdcard/Android/data/org.pjcone.portal/files"),e.qZA()(),e.YNc(5,oe,3,2,"div",8),e.qZA()}if(2&r){const n=e.oxw();e.xp6(5),e.Q6J("ngForOf",n.ExternalFolder)}}let se=(()=>{var r;class a{constructor(i,t,o,l,s,c,p,d,h,x,F,le){this.modalCtrl=i,this.indexed=t,this.loadingCtrl=o,this.lang=l,this.global=s,this.p5toast=c,this.alertCtrl=p,this.sanitizer=d,this.file=h,this.navCtrl=x,this.noti=F,this.navParams=le,this.DirList=[],this.FileList=[],this.cant_dedicated=!1,this.InAppBrowser=!0,this.is_ready=!1,this.is_file_selector=!1,this.HideThumbnail=!1,this.StopIndexing=!1,this.EventListenerAct=ae=>{ae.detail.register(110,ce=>{this.is_ready?""==this.CurrentDir?ce():this.MoveToUpDir():(this.initLoadingElement.dismiss(),this.is_ready=!0)})},this.isCreateFolderRecursive=!1,this.ExternalFolder=[]}toggle_thumbnail(){this.HideThumbnail=!this.HideThumbnail,localStorage.setItem("user-fs-thumbnail",this.HideThumbnail?"1":"0")}ngOnInit(){}ionViewDidEnter(){this.global.p5key.KeyShortCut.Escape=()=>{this.is_ready?""==this.CurrentDir?this.navCtrl.pop():this.MoveToUpDir():(this.initLoadingElement.dismiss(),this.is_ready=!0)}}ionViewWillEnter(){this.HideThumbnail="1"==localStorage.getItem("user-fs-thumbnail"),this.CurrentDir="",this.is_file_selector=!!this.navParams.data.modal,this.LoadAllIndexedFiles(),("DesktopPWA"==g.n$||"MobilePWA"==g.n$)&&(this.cant_dedicated=!0),document.addEventListener("ionBackButton",this.EventListenerAct)}dismiss_page(i){var t=this;return(0,f.Z)(function*(){if(t.is_file_selector){let o;i&&(o=yield t.indexed.loadBlobFromUserPath(i.path,""),o.name=i.name,o.file_ext=i.file_ext),t.modalCtrl.dismiss(o)}})()}LoadAllIndexedFiles(){var i=this;return(0,f.Z)(function*(){if(i.initLoadingElement=yield i.loadingCtrl.create({message:i.lang.text.UserFsDir.LoadingExplorer}),i.initLoadingElement.present(),i.DirList.length=0,i.FileList.length=0,("Android"==g.n$||"iOS"==g.n$)&&i.noti.noti.schedule({id:5,title:i.lang.text.UserFsDir.LoadingExplorer,progressBar:{indeterminate:!0},sound:null,smallIcon:"res://icon_mono",color:"b0b0b0"}),i.is_file_selector){let t=yield i.indexed.GetFileListFromDB("/files/"),o=yield i.indexed.GetFileListFromDB("/todo/");t.push.apply(t,o),yield i.ModulateIndexedFile(t)}else{if(i.indexed.godotDB){let o=yield i.indexed.GetFileListFromDB("/",void 0,i.indexed.godotDB);yield i.ModulateIndexedFile(o,i.indexed.godotDB)}let t=yield i.indexed.GetFileListFromDB("/");yield i.ModulateIndexedFile(t)}i.FileList.sort((t,o)=>t.path>o.path?1:t.path<o.path?-1:0),i.DirList.sort((t,o)=>t.path>o.path?1:t.path<o.path?-1:0),setTimeout(()=>{i.noti.ClearNoti(5)},100),i.initLoadingElement.dismiss(),i.is_ready=!0})()}ModulateIndexedFile(i,t=this.indexed.ionicDB){var o=this;return(0,f.Z)(function*(){for(let l=0,s=i.length;l<s;l++){if(o.StopIndexing)return;let c=`${o.lang.text.UserFsDir.LoadingExplorer}: ${i.length-l}`;("Android"==g.n$||"iOS"==g.n$)&&o.noti.noti.schedule({id:5,title:c,progressBar:{value:l,maxValue:i.length},sound:null,smallIcon:"res://icon_mono",color:"b0b0b0"}),o.initLoadingElement.message=c,yield o.indexed.GetFileInfoFromDB(i[l],p=>{let d={path:i[l],mode:p.mode,timestamp:new Date(p.timestamp).toLocaleString(),db:t};switch(d.name=d.path.substring(d.path.lastIndexOf("/")+1),d.dir=i[l].substring(0,i[l].lastIndexOf("/")),d.mode){case 33206:d.file_ext=d.name.split(".").pop(),o.global.set_viewer_category_from_ext(d),"image"==d.viewer&&o.indexed.loadBlobFromUserPath(d.path,"",h=>{let x=URL.createObjectURL(h);d.thumbnail=o.sanitizer.bypassSecurityTrustUrl(x)},t),o.FileList.push(d);break;case 16893:o.DirList.push(d);break;default:console.log("\uc608\uc0c1\ud558\uc9c0 \ubabb\ud55c \ud30c\uc77c \ubaa8\ub4dc: ",d)}},t)}})()}MoveToUpDir(){this.CurrentDir=this.CurrentDir.substring(0,this.CurrentDir.lastIndexOf("/")),this.FileSel.value=void 0}SelectFolder(i){this.CurrentDir=i.path,this.FileSel.value=void 0}OpenFile(i){this.CheckIfAccessable(i.path)&&("disabled"===i.viewer?this.p5toast.show({text:this.lang.text.UserFsDir.CannotOpenFile}):(document.removeEventListener("ionBackButton",this.EventListenerAct),this.modalCtrl.create({component:v.B,componentProps:{info:{content:{filename:i.name,file_ext:i.file_ext,type:"",viewer:i.viewer,path:i.path}},targetDB:this.indexed.ionicDB,no_edit:!0,path:i.path},cssClass:"fullscreen"}).then(t=>{delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit,t.onDidDismiss().then(o=>{document.addEventListener("ionBackButton",this.EventListenerAct),this.ionViewDidEnter()}),t.present()})))}CheckIfAccessable(i){switch(i){case"servers/webrtc_server.json":case"servers/self/profile.json":return this.p5toast.show({text:this.lang.text.UserFsDir.PrivateAccessDenied}),!1}return!0}DownloadFile(i){this.CheckIfAccessable(i.path)&&this.indexed.DownloadFileFromUserPath(i.path,"",i.name)}ExportDirectoryRecursive(){this.alertCtrl.create({header:this.lang.text.UserFsDir.ExportDirTitle,message:this.lang.text.UserFsDir.ExportDirMsg,buttons:[{text:this.lang.text.UserFsDir.ExportConfirm,handler:()=>{this.ExportDirectoryRecursiveAct()}}]}).then(i=>i.present())}ExportDirectoryRecursiveAct(){var i=this;return(0,f.Z)(function*(){let t=yield i.loadingCtrl.create({message:i.lang.text.UserFsDir.ExportDirTitle});t.present();let o=yield i.indexed.GetFileListFromDB(i.CurrentDir);for(let l=0,s=o.length;l<s;l++){let c=yield i.indexed.GetFileInfoFromDB(o[l]),p=yield i.indexed.loadBlobFromUserPath(o[l],""),d=o[l].lastIndexOf("/"),h=o[l].substring(0,d),x=o[l].substring(d+1);i.isCreateFolderRecursive||(i.isCreateFolderRecursive=!0,yield i.CreateFolderRecursive(h));try{if(16893==c.mode)throw yield i.file.createDir(i.file.externalDataDirectory+h,x,!0),t.message=`${i.lang.text.UserFsDir.ExportDirTitle}: ${x}`,"\uc774\uac70 \ud3f4\ub354\uc784";if(!i.CheckIfAccessable(o[l]))throw"\uc5f4\ub78c \ubd88\uac00 \ud30c\uc77c \uc81c\uc678";yield i.file.writeFile(i.file.externalDataDirectory+h+"/",x,p,{replace:!0})}catch(F){console.error(o[l],": \ud30c\uc77c \uc800\uc7a5 \uc2e4\ud328: ",F)}}i.isCreateFolderRecursive=!1,t.dismiss()})()}CreateFolderRecursive(i){var t=this;return(0,f.Z)(function*(){let o=i.lastIndexOf("/")+1,l=i.substring(0,o),s=i.substring(o);l&&(yield t.CreateFolderRecursive(i.substring(0,o-1)));try{yield t.file.createDir(t.file.externalDataDirectory+l,s,!0)}catch{}})()}BrowseExternalFiles(){var i=this;return(0,f.Z)(function*(){i.ExternalFolder.length=0,i.InAppBrowser=!1,i.ExternalFolder=yield i.file.listDir(i.file.externalApplicationStorageDirectory,"files"),i.ExternalFolder.sort(),i.ExternalFolder.sort((t,o)=>t.isDirectory?-1:1)})()}importFolderMiddleAct(i){var t=this;return(0,f.Z)(function*(){let o=yield t.loadingCtrl.create({message:t.lang.text.UserFsDir.Import});o.present(),yield t.importThisFolder(i,o),t.InAppBrowser=!0,o.dismiss()})()}importThisFolder(i,t){var o=this;return(0,f.Z)(function*(){let l=i.nativeURL.substring(0,i.nativeURL.length-1),s=l.lastIndexOf("/"),c=yield o.file.listDir(l.substring(0,s)+"/",l.substring(s+1));for(let p=0,d=c.length;p<d;p++)if(c[p].isDirectory)yield o.importThisFolder(c[p],t);else{let h=c[p].nativeURL.split("org.pjcone.portal/files/")[1];try{let F=(yield Z.readFile({path:c[p].nativeURL})).data.replace(/"|\\|=/g,"");yield o.indexed.saveBase64ToUserPath(","+F,decodeURIComponent(h)),t.message=`${o.lang.text.UserFsDir.Import}: ${c[p].name}`}catch(x){console.log("\ubd88\ub7ec\uc624\uae30 \uc2e4\ud328: ",x),o.p5toast.show({text:`${o.lang.text.UserFsDir.ImportFailed}: ${x}`})}}})()}SelectImportFolder(){this.cant_dedicated?document.getElementById("folder_sel_id").click():this.BrowseExternalFiles()}inputImageSelected(i){var t=this;return(0,f.Z)(function*(){let o=yield t.loadingCtrl.create({message:t.lang.text.UserFsDir.LoadingExplorer});o.present();for(let l=0,s=i.target.files.length;l<s;l++)yield t.indexed.saveBlobToUserPath(i.target.files[l],i.target.files[l].webkitRelativePath);t.LoadAllIndexedFiles(),o.dismiss()})()}RemoveDirectoryRecursive(){var t,i=this;this.alertCtrl.create({header:this.CurrentDir.substring(this.CurrentDir.lastIndexOf("/")+1),message:this.lang.text.UserFsDir.RemoveThisFolder,buttons:[{text:this.lang.text.UserFsDir.RemoveApply,handler:(t=(0,f.Z)(function*(){let o=yield i.loadingCtrl.create({message:i.lang.text.UserFsDir.DeleteFile});o.present(),("Android"==g.n$||"iOS"==g.n$)&&i.noti.noti.schedule({id:4,title:i.lang.text.UserFsDir.DeleteFile,progressBar:{indeterminate:!0},sound:null,smallIcon:"res://icon_mono",color:"b0b0b0"});let l=yield i.indexed.GetFileListFromDB(i.CurrentDir);for(let s=0,c=l.length;s<c;s++)("Android"==g.n$||"iOS"==g.n$)&&i.noti.noti.schedule({id:5,title:`${i.lang.text.UserFsDir.DeleteFile}: ${c-s}`,progressBar:{value:s,maxValue:c},sound:null,smallIcon:"res://icon_mono",color:"b0b0b0"}),o.message=`${i.lang.text.UserFsDir.DeleteFile}: ${c-s}`,yield i.indexed.removeFileFromUserPath(l[s]);for(let s=i.DirList.length-1;s>=0;s--)0==i.DirList[s].path.indexOf(i.CurrentDir)&&i.DirList.splice(s,1);for(let s=i.FileList.length-1;s>=0;s--)0==i.FileList[s].path.indexOf(i.CurrentDir)&&i.FileList.splice(s,1);l=yield i.indexed.GetFileListFromDB(i.CurrentDir);for(let s=0,c=l.length;s<c;s++)("Android"==g.n$||"iOS"==g.n$)&&i.noti.noti.schedule({id:5,title:`${i.lang.text.UserFsDir.DeleteFile}: ${c-s}`,progressBar:{value:s,maxValue:c},sound:null,smallIcon:"res://icon_mono",color:"b0b0b0"}),o.message=`${i.lang.text.UserFsDir.DeleteFile}: ${c-s}`,yield i.indexed.removeFileFromUserPath(l[s]);for(let s=i.DirList.length-1;s>=0;s--)0==i.DirList[s].path.indexOf(i.CurrentDir)&&i.DirList.splice(s,1);for(let s=i.FileList.length-1;s>=0;s--)0==i.FileList[s].path.indexOf(i.CurrentDir)&&i.FileList.splice(s,1);i.MoveToUpDir(),o.dismiss(),setTimeout(()=>{i.noti.ClearNoti(4)},100)}),function(){return t.apply(this,arguments)})}]}).then(t=>t.present())}RemoveFile(i,t){this.alertCtrl.create({header:this.lang.text.UserFsDir.DeleteFile,message:this.lang.text.UserFsDir.CannotBeUndo,buttons:[{text:this.lang.text.UserFsDir.DeleteAccept,handler:()=>{this.indexed.removeFileFromUserPath(i.path,()=>{this.FileList.splice(t,1)})}}]}).then(o=>o.present())}ionViewDidLeave(){this.StopIndexing=!0,this.FileList.forEach(i=>{URL.revokeObjectURL(i.thumbnail)}),this.noti.ClearNoti(4),this.noti.ClearNoti(5)}ionViewWillLeave(){document.removeEventListener("ionBackButton",this.EventListenerAct),delete this.global.p5key.KeyShortCut.Escape,delete this.global.p5key.KeyShortCut.Digit}}return(r=a).\u0275fac=function(i){return new(i||r)(e.Y36(u.IN),e.Y36(I.H),e.Y36(u.HT),e.Y36(y.b),e.Y36(C.AN),e.Y36(w.F),e.Y36(u.Br),e.Y36(A.H7),e.Y36(L.$),e.Y36(u.SH),e.Y36(P.J),e.Y36(u.X1))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-fs-dir"]],viewQuery:function(i,t){if(1&i&&e.Gf(E,5),2&i){let o;e.iGM(o=e.CRH())&&(t.FileSel=o.first)}},decls:11,vars:5,consts:[[1,"ion-no-border"],["slot","start",3,"click"],["defaultHref",""],["class","top_icon","slot","end","name","eye-outline",3,"click",4,"ngIf"],["class","top_icon","slot","end","name","eye-off-outline",3,"click",4,"ngIf"],[4,"ngIf"],["slot","end","name","eye-outline",1,"top_icon",3,"click"],["slot","end","name","eye-off-outline",1,"top_icon",3,"click"],[4,"ngFor","ngForOf"],["FileSel",""],["button",""],["slot","start","name","folder"],["style","padding-right: 4px;",3,"click",4,"ngIf"],[3,"click"],["button","",3,"click"],[2,"padding-right","4px",3,"click"],["slot","start","name","arrow-down-circle"],["hidden","","type","file","id","folder_sel_id","webkitdirectory","",3,"change"],["button","",3,"click",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],["slot","header"],["slot","start","name","image",4,"ngIf"],["slot","start","name","musical-notes",4,"ngIf"],["slot","start","name","play-circle",4,"ngIf"],["slot","start","name","reader",4,"ngIf"],["slot","start","name","extension-puzzle",4,"ngIf"],["slot","start","name","document",4,"ngIf"],["text-wrap","",4,"ngIf"],[1,"ion-accordion-toggle-icon","hide_accordion_icon"],["slot","content"],["class","ion-text-right",3,"click",4,"ngIf"],[1,"ion-text-end",3,"click"],["class","image_front_form",3,"click",4,"ngIf"],[1,"ion-text-end"],["slot","start","name","image"],["slot","start","name","musical-notes"],["slot","start","name","play-circle"],["slot","start","name","reader"],["slot","start","name","extension-puzzle"],["slot","start","name","document"],["text-wrap",""],[1,"ion-text-right",3,"click"],[1,"image_front_form",3,"click"],[1,"image_front_view",3,"src","alt"],["color","medium"],["button","","disabled","",4,"ngIf"],["button","","disabled",""]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",1),e.NdJ("click",function(){return t.dismiss_page()}),e._UZ(5,"ion-back-button",2),e.qZA(),e.YNc(6,k,1,0,"ion-icon",3),e.YNc(7,N,1,0,"ion-icon",4),e.qZA()(),e.TgZ(8,"ion-content"),e.YNc(9,ie,7,4,"ion-list",5),e.YNc(10,re,6,1,"ion-list",5),e.qZA()),2&i&&(e.xp6(3),e.Oqu(t.lang.text.Settings.InAppExplorer),e.xp6(3),e.Q6J("ngIf",!t.HideThumbnail),e.xp6(1),e.Q6J("ngIf",t.HideThumbnail),e.xp6(2),e.Q6J("ngIf",t.InAppBrowser),e.xp6(1),e.Q6J("ngIf",!t.InAppBrowser))},dependencies:[b.sg,b.O5,u.We,u.eh,u.oU,u.YG,u.Sm,u.W2,u.Gu,u.gu,u.Ie,u.Q$,u.q_,u.wd,u.sr,u.cs],styles:[".item.sc-ion-label-md-h[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .sc-ion-label-md-h[_ngcontent-%COMP%]{overflow:unset}.image_front_form[_ngcontent-%COMP%]{text-align:center}.image_front_view[_ngcontent-%COMP%]{max-height:233px}.top_icon[_ngcontent-%COMP%]{width:28px;height:28px;padding-right:28px;cursor:pointer}"]}),a})()}}]);