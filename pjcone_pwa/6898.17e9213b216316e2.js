"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6898],{6898:(R,u,n)=>{n.r(u),n.d(u,{SettingsPageModule:()=>E});var f=n(6814),p=n(95),s=n(1325),_=n(5877),T=n(5861),v=n(1450),h=n(3641),S=n(4978),x=n(4156),Z=n(4688),t=n(9468),A=n(7488),P=n(9080),C=n(797),y=n(6395),b=n(3857),U=n(4093),N=n(6052),O=n(2372),M=n(9376);const J=["LangSel"];function k(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"div")(1,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.setDisableBatteryOptimizations())}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&o){const a=t.oxw();t.xp6(3),t.Oqu(a.lang.text.Settings.batteryOptimization)}}function D(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.go_to_page("dedicated-settings"))}),t._UZ(1,"div",27),t.TgZ(2,"ion-label",28),t._uU(3),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(1),t.Akn("background-color: "+a.statusBar.colors[a.statusBar.settings.dedicatedServer||"offline"]),t.xp6(2),t.Oqu(a.lang.text.Settings.useDeviceAsServer)}}function B(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",29),t._UZ(1,"div",27),t.TgZ(2,"ion-input",30),t.NdJ("ngModelChange",function(e){t.CHM(a);const l=t.oxw();return t.KtG(l.chat_address=e)}),t.qZA(),t.TgZ(3,"ion-button",31),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.start_minimalchat(e.chat_address?"ws://"+e.chat_address:"ws://127.0.0.1"))}),t._uU(4),t.qZA()()}if(2&o){const a=t.oxw();t.Q6J("disabled",a.will_enter),t.xp6(1),t.Akn("background-color: "+a.statusBar.colors[a.statusBar.settings.dedicated_groupchat||"offline"]),t.xp6(1),t.Q6J("label",a.lang.text.Settings.joinDediChat)("placeholder",a.lang.text.Settings.joinDedi_placeholder+": 127.0.0.1")("ngModel",a.chat_address),t.xp6(2),t.hij(" ",a.lang.text.Settings.joinDedi_button," ")}}function F(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.go_to_page("admin-tools"))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(2),t.Oqu(a.lang.text.Settings.admin_tools)}}function I(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.go_to_page("tts-export"))}),t._UZ(1,"ion-icon",32),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(3),t.Oqu(a.lang.text.Settings.TTSExport)}}function z(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"div")(1,"ion-item-divider")(2,"ion-label"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.open_playstore())}),t._UZ(5,"ion-icon",33),t.TgZ(6,"ion-label"),t._uU(7),t.qZA()()()}if(2&o){const a=t.oxw();t.xp6(3),t.Oqu(a.lang.text.Settings.OtherPlatform),t.xp6(4),t.Oqu(a.lang.text.Settings.OpenPlayStore)}}function G(o,d){if(1&o){const a=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.go_to_page("translator"))}),t.TgZ(1,"ion-label"),t._uU(2),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(2),t.Oqu(a.lang.text.Settings.AppTranslator)}}const Y=[{path:"",component:(()=>{var o;class d{constructor(i,e,l,r,g,m,c,H,L,j,W,K){this.modalCtrl=i,this.nav=e,this.statusBar=l,this.nakama=r,this.indexed=g,this.bgmode=m,this.lang=c,this.noti=H,this.global=L,this.file=j,this.p5toast=W,this.loadingCtrl=K,this.cant_dedicated=!1,this.can_use_http=!1,this.is_nativefier=h.bS,this.as_admin=[],this.availables=[],this.isAdHiding=!0,this.isBatteryOptimizationsShowed=!1,this.self={},this.will_enter=!1,this.lock_modal_open=!1}ngOnInit(){this.nakama.removeBanner(),("DesktopPWA"==h.n$||"MobilePWA"==h.n$)&&(this.cant_dedicated=!0),this.indexed.loadTextFromUserPath("servers/self/profile.img",(i,e)=>{i&&e&&(this.nakama.users.self.img=e.replace(/"|=|\\/g,""))}),this.isBatteryOptimizationsShowed=!!localStorage.getItem("ShowDisableBatteryOptimizations"),this.AD_Div=document.getElementById("advertise"),this.checkAdsInfo(),this.check_if_admin(),this.nakama.on_socket_disconnected.settings_admin_check=()=>{this.check_if_admin()},this.can_use_http="http:"==window.location.protocol||h.bS}check_if_admin(){this.as_admin=this.nakama.get_all_server_info(!0,!0);for(let i=this.as_admin.length-1;i>=0;i--)this.as_admin[i].is_admin||this.as_admin.splice(i,1)}checkAdsInfo(){var i=this;return(0,T.Z)(function*(){try{let e=yield fetch(`${h.Oy}pjcone_ads/${i.lang.lang}.txt`);if(e.ok){let l=yield(yield e.blob()).text();i.indexed.saveTextFileToUserPath(l,"ads_list.txt");let r=l.split("\n");i.listAvailableAds(r)}}catch{i.indexed.loadTextFromUserPath("ads_list.txt",(l,r)=>{l&&r&&i.listAvailableAds(r.split("\n"))})}})()}listAvailableAds(i){let l,e=(new Date).getTime();this.availables.length=0;for(let g=0,m=i.length;g<m;g++){let c=i[g].split(",");Number(c[0])<e?e<Number(c[1])&&this.availables.push([Number(c[0]),Number(c[1]),c[2]]):l?Number(c[0])<l&&(l=Number(c[0])):l=Number(c[0])}let r=this.AD_Div.childNodes;this.isAdHiding=!0,r.forEach(g=>{g.remove()}),this.availables.length?this.displayRandomAds():l&&(this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(g,m)=>{g&&m&&this.listAvailableAds(m.split("\n"))})},l-(new Date).getTime()))}displayRandomAds(){let i=Math.floor(Math.random()*this.availables.length),e=this.availables[i];this.refreshAds=setTimeout(()=>{this.indexed.loadTextFromUserPath("ads_list.txt",(r,g)=>{r&&g&&this.listAvailableAds(g.split("\n"))})},e[1]-(new Date).getTime());let l=document.createElement("iframe");l.id="AdFrame",l.setAttribute("src",e[2]),l.setAttribute("frameborder","0"),l.setAttribute("class","full_screen"),this.isAdHiding=!1,this.AD_Div.appendChild(l)}open_link(i){window.open(i,"_system")}setDisableBatteryOptimizations(){this.bgmode.disableBatteryOptimizations(),this.isBatteryOptimizationsShowed=!0,localStorage.setItem("ShowDisableBatteryOptimizations","true")}ionViewWillEnter(){this.profile_filter="online"==this.statusBar.settings.groupServer?"filter: grayscale(0) contrast(1);":"filter: grayscale(.9) contrast(1.4);",this.check_if_admin()}start_minimalchat(i){if(!this.lock_modal_open){if(this.lock_modal_open=!0,this.will_enter)return;"online"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&"certified"!=this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]&&(this.statusBar.settings[i?"dedicated_groupchat":"community_ranchat"]="pending"),this.will_enter=!0,setTimeout(()=>{this.will_enter=!1},500),this.modalCtrl.create({component:S.X,componentProps:{address:i,name:this.nakama.users.self.display_name}}).then(e=>{e.present(),this.lock_modal_open=!1})}}open_inapp_explorer(){this.nav.navigateForward("user-fs-dir",{animation:v.Nn})}LangClicked(){this.LangSel.open()}LanguageChanged(i){this.lang.lang=i.detail.value,this.lang.load_selected_lang()}go_to_page(i){this.nav.navigateForward(`settings/${i}`,{animation:v.Nn})}download_serverfile(){var i=this;return(0,T.Z)(function*(){if("Android"==h.n$||"iOS"==h.n$){let e=yield i.loadingCtrl.create({message:i.lang.text.TodoDetail.WIP});e.present();let l="nakama.zip",r=yield fetch("assets/data/nakama.zip").then(g=>g.blob());try{yield i.file.writeFile(i.file.externalDataDirectory,l,r),e.dismiss(),i.p5toast.show({text:i.lang.text.ContentViewer.fileSaved})}catch(g){console.log("download_serverfile: ",g);try{yield i.file.writeExistingFile(i.file.externalDataDirectory,l,r),e.dismiss(),i.p5toast.show({text:i.lang.text.ContentViewer.fileSaved})}catch(m){console.log("download_serverfile_rewrite: ",m),e.dismiss(),i.p5toast.show({text:i.lang.text.ContentViewer.fileSaveFailed})}}}else{let e=document.createElement("a");e.download="nakama.zip",e.href="assets/data/nakama.zip",document.body.appendChild(e),e.click(),document.body.removeChild(e),e.remove(),i.p5toast.show({text:i.lang.text.ContentViewer.fileSaved})}})()}go_to_qr_share(){this.modalCtrl.create({component:Z.b,componentProps:{NoReturn:!0}}).then(i=>i.present())}go_to_webrtc_manager(){this.modalCtrl.create({component:x.$}).then(i=>i.present())}open_playstore(){window.open("https://play.google.com/store/apps/details?id=org.pjcone.portal","_system")}ngOnDestroy(){delete this.nakama.users.self.img,delete this.nakama.on_socket_disconnected.settings_admin_check,clearTimeout(this.refreshAds),this.global.CreateGodotIFrame("todo",{local_url:"assets/data/godot/todo.pck",title:"Todo",add_todo_menu:i=>{this.nakama.open_add_todo_page(i)}})}}return(o=d).\u0275fac=function(i){return new(i||o)(t.Y36(s.IN),t.Y36(s.SH),t.Y36(A.g),t.Y36(P.a),t.Y36(C.H),t.Y36(y.z),t.Y36(b.b),t.Y36(U.J),t.Y36(N.AN),t.Y36(O.$),t.Y36(M.F),t.Y36(s.HT))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],viewQuery:function(i,e){if(1&i&&t.Gf(J,5),2&i){let l;t.iGM(l=t.CRH())&&(e.LangSel=l.first)}},decls:92,vars:33,consts:[["slot","start"],["defaultHref","main"],[3,"hidden"],["slot","end","fill","clear","shape","round",3,"click"],["id","advertise",1,"advertise_banner"],["button","",3,"click"],[1,"additional_form","bg_img_form"],[1,"profile_img",3,"src"],["name","person-circle-outline",1,"icon_margin"],["name","notifications-outline",1,"icon_margin"],[4,"ngIf"],["button","",3,"click",4,"ngIf"],["button","",3,"disabled",4,"ngIf"],["name","logo-html5",1,"icon_margin"],["name","qr-code-outline",1,"icon_margin"],["src","assets/icon/diychat.png","alt","",1,"img_icon_size"],["value","Devkit"],["slot","header"],["name","construct-outline",1,"icon_margin"],["slot","content"],["name","folder-outline",1,"icon_margin"],["src","assets/icon/engineppt.png","alt","",1,"img_icon_size"],["name","language",1,"icon_margin"],[2,"pointer-events","none",3,"label","value","placeholder","ionChange"],["LangSel",""],["value","en"],["value","ko"],[1,"additional_form","status_bar_single"],[1,"form_margin"],["button","",3,"disabled"],[1,"form_margin","ion-text-center",3,"label","placeholder","ngModel","ngModelChange"],[3,"click"],["name","volume-high-outline",1,"icon_margin"],["name","logo-google-playstore",1,"icon_margin"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button",1),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-item-divider")(9,"ion-label"),t._uU(10),t.qZA(),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return e.open_link("https://is2you2.github.io/")}),t._uU(12),t.qZA()(),t._UZ(13,"div",4),t.qZA(),t.TgZ(14,"ion-item-divider")(15,"ion-label"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("group-server")}),t.TgZ(18,"div",6),t._UZ(19,"img",7),t.qZA(),t._UZ(20,"ion-icon",8),t.TgZ(21,"ion-label"),t._uU(22),t.qZA()(),t.TgZ(23,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("noti-alert")}),t._UZ(24,"ion-icon",9),t.TgZ(25,"ion-label"),t._uU(26),t.qZA()(),t.YNc(27,k,4,1,"div",10),t.TgZ(28,"ion-item-divider")(29,"ion-label"),t._uU(30),t.qZA()(),t.YNc(31,D,4,3,"ion-item",11),t.YNc(32,B,5,7,"ion-item",12),t.TgZ(33,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("weblink-gen")}),t._UZ(34,"ion-icon",13),t.TgZ(35,"ion-label"),t._uU(36),t.qZA()(),t.TgZ(37,"ion-item",5),t.NdJ("click",function(){return e.go_to_qr_share()}),t._UZ(38,"ion-icon",14),t.TgZ(39,"ion-label"),t._uU(40),t.qZA()(),t.TgZ(41,"ion-item",5),t.NdJ("click",function(){return e.go_to_webrtc_manager()}),t._UZ(42,"img",15),t.TgZ(43,"ion-label"),t._uU(44),t.qZA()(),t.YNc(45,F,3,1,"ion-item",11),t.TgZ(46,"ion-accordion-group")(47,"ion-accordion",16)(48,"ion-item",17),t._UZ(49,"ion-icon",18),t.TgZ(50,"ion-label"),t._uU(51),t.qZA()(),t.TgZ(52,"div",19)(53,"ion-item",5),t.NdJ("click",function(){return e.open_inapp_explorer()}),t._UZ(54,"ion-icon",20),t.TgZ(55,"ion-label"),t._uU(56),t.qZA()(),t.TgZ(57,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("qrcode-gen")}),t._UZ(58,"ion-icon",14),t.TgZ(59,"ion-label"),t._uU(60),t.qZA()(),t.YNc(61,I,4,1,"ion-item",11),t.TgZ(62,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("wsclient")}),t.TgZ(63,"ion-label"),t._uU(64),t.qZA()(),t.TgZ(65,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("engineppt")}),t._UZ(66,"img",21),t.TgZ(67,"ion-label"),t._uU(68),t.qZA()(),t.TgZ(69,"ion-item",5),t.NdJ("click",function(){return e.download_serverfile()}),t._UZ(70,"img",15),t.TgZ(71,"ion-label"),t._uU(72),t.qZA()()()()(),t.YNc(73,z,8,2,"div",10),t.TgZ(74,"ion-item-divider")(75,"ion-label"),t._uU(76),t.qZA()(),t.TgZ(77,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("creator")}),t.TgZ(78,"ion-label"),t._uU(79),t.qZA()(),t.YNc(80,G,3,1,"ion-item",11),t.TgZ(81,"ion-item",5),t.NdJ("click",function(){return e.LangClicked()}),t._UZ(82,"ion-icon",22),t.TgZ(83,"ion-select",23,24),t.NdJ("ionChange",function(r){return e.LanguageChanged(r)}),t.TgZ(85,"ion-select-option",25),t._uU(86,"English"),t.qZA(),t.TgZ(87,"ion-select-option",26),t._uU(88,"\ud55c\uad6d\uc5b4"),t.qZA()()(),t.TgZ(89,"ion-item",5),t.NdJ("click",function(){return e.go_to_page("licenses")}),t.TgZ(90,"ion-label"),t._uU(91),t.qZA()()()),2&i&&(t.xp6(3),t.Oqu(e.lang.text.Settings.Title),t.xp6(4),t.Q6J("hidden",e.isAdHiding),t.xp6(3),t.Oqu(e.lang.text.Settings.CommunityAds),t.xp6(2),t.hij(" ",e.lang.text.Settings.AdsContact," "),t.xp6(4),t.Oqu(e.lang.text.Settings.env_info),t.xp6(3),t.Akn(e.profile_filter),t.Q6J("src",e.nakama.users.self.img,t.LSH),t.xp6(3),t.Oqu(e.lang.text.Settings.groupServer),t.xp6(4),t.Oqu(e.lang.text.Settings.NotificationSetting),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated&&!e.isBatteryOptimizationsShowed),t.xp6(3),t.Oqu(e.lang.text.Settings.ServerNTools),t.xp6(1),t.Q6J("ngIf",!e.cant_dedicated),t.xp6(1),t.Q6J("ngIf",e.can_use_http),t.xp6(4),t.Oqu(e.lang.text.Settings.WebLinkGen),t.xp6(4),t.Oqu(e.lang.text.Settings.quickQRshare),t.xp6(4),t.Oqu(e.lang.text.WebRTCDevManager.Title),t.xp6(1),t.Q6J("ngIf",e.as_admin.length),t.xp6(6),t.Oqu(e.lang.text.Settings.DevKit),t.xp6(5),t.Oqu(e.lang.text.Settings.InAppExplorer),t.xp6(4),t.Oqu(e.lang.text.Settings.QRCodeGen),t.xp6(1),t.Q6J("ngIf",!e.is_nativefier),t.xp6(3),t.Oqu(e.lang.text.Settings.WSClient),t.xp6(4),t.Oqu(e.lang.text.Settings.EnginePPT),t.xp6(4),t.Oqu(e.lang.text.Settings.ServerFiles),t.xp6(1),t.Q6J("ngIf",e.cant_dedicated),t.xp6(3),t.Oqu(e.lang.text.Settings.AppInfo),t.xp6(3),t.Oqu(e.lang.text.Settings.AppCreator),t.xp6(1),t.Q6J("ngIf","ko"!=e.lang.lang),t.xp6(3),t.Q6J("label",e.lang.text.Settings.AppLanguage)("value",e.lang.lang)("placeholder",e.lang.lang),t.xp6(8),t.Oqu(e.lang.text.Settings.LicenseNotice))},dependencies:[f.O5,p.JJ,p.On,s.We,s.eh,s.oU,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.rH,s.Q$,s.t9,s.n0,s.wd,s.sr,s.QI,s.j9,s.cs],styles:[".advertise_banner[_ngcontent-%COMP%]{width:100%;max-height:150px}.img_icon_size[_ngcontent-%COMP%]{width:21px;height:21px;margin-right:16px}.icon_margin[_ngcontent-%COMP%]{margin-right:16px}"]}),d})()},{path:"licenses",loadChildren:()=>n.e(8944).then(n.bind(n,8944)).then(o=>o.LicensesPageModule)},{path:"dedicated-settings",loadChildren:()=>n.e(2467).then(n.bind(n,2467)).then(o=>o.DedicatedSettingsPageModule)},{path:"group-server",loadChildren:()=>n.e(2503).then(n.bind(n,2503)).then(o=>o.GroupServerPageModule)},{path:"add-group",loadChildren:()=>Promise.all([n.e(8592),n.e(2098)]).then(n.bind(n,2098)).then(o=>o.AddGroupPageModule)},{path:"group-detail",loadChildren:()=>n.e(4970).then(n.bind(n,4970)).then(o=>o.GroupDetailPageModule)},{path:"translator",loadChildren:()=>n.e(7661).then(n.bind(n,7661)).then(o=>o.TranslatorPageModule)},{path:"creator",loadChildren:()=>n.e(7178).then(n.bind(n,7178)).then(o=>o.CreatorPageModule)},{path:"qr-share",loadChildren:()=>n.e(8732).then(n.bind(n,8732)).then(o=>o.QrSharePageModule)},{path:"noti-alert",loadChildren:()=>n.e(4622).then(n.bind(n,4622)).then(o=>o.NotiAlertPageModule)},{path:"engineppt",loadChildren:()=>Promise.all([n.e(7429),n.e(6810)]).then(n.bind(n,6810)).then(o=>o.EnginepptPageModule)},{path:"admin-tools",loadChildren:()=>n.e(5229).then(n.bind(n,5229)).then(o=>o.AdminToolsPageModule)},{path:"qrcode-gen",loadChildren:()=>n.e(318).then(n.bind(n,318)).then(o=>o.QrcodeGenPageModule)},{path:"wsclient",loadChildren:()=>n.e(5174).then(n.bind(n,5174)).then(o=>o.WsclientPageModule)},{path:"weblink-gen",loadChildren:()=>n.e(8821).then(n.bind(n,8821)).then(o=>o.WeblinkGenPageModule)},{path:"tts-export",loadChildren:()=>Promise.all([n.e(8592),n.e(4595)]).then(n.bind(n,4595)).then(o=>o.TtsExportPageModule)}];let Q=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.Bz.forChild(Y),_.Bz]}),d})(),E=(()=>{var o;class d{}return(o=d).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[f.ez,p.u5,s.Pc,Q]}),d})()}}]);